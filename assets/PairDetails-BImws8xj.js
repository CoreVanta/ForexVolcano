import{u as L,r as l,j as e,S as _,L as i,B as E,c as h,d as g,q as p,w as A,o as b,z as u,g as y}from"./index-CdHir_gS.js";const q=()=>{const{symbol:a}=L(),[n,f]=l.useState([]),[d,j]=l.useState([]),[o,x]=l.useState(!0),r=a.length===6?`${a.slice(0,3)}/${a.slice(3)}`:a;return l.useEffect(()=>{(async()=>{x(!0);try{const c=h(g,"analysis"),N=p(c,A("pair","==",r),b("createdAt","desc"),u(5)),w=await y(N);f(w.docs.map(t=>({id:t.id,...t.data()})));const v=a.slice(0,3),S=a.slice(3,6),k=h(g,"news"),D=p(k,b("timestamp","desc"),u(20)),$=(await y(D)).docs.map(t=>({id:t.id,...t.data()})).filter(t=>{const m=t.affectedCurrencies||[];return m.includes(v)||m.includes(S)||t.title.includes(a)}).slice(0,5);j($)}catch(c){console.error("Error fetching pair details:",c)}finally{x(!1)}})()},[a,r]),e.jsxs("div",{className:"min-h-screen bg-background pt-20 pb-10",children:[e.jsx(_,{title:`${r} Live Chart & Analysis`,description:`Track live ${r} price, view charts, and read expert analysis.`}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:r}),e.jsx("p",{className:"text-gray-400",children:"Live Market Data & Intelligence"})]}),e.jsx(i,{to:"/market",children:e.jsx(E,{variant:"outline",size:"sm",children:"Back to Market"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden h-[500px]",children:e.jsx("iframe",{title:"TradingView",src:`https://s.tradingview.com/widgetembed/?frameElementId=tradingview_widget&symbol=${a}&interval=D&hidesidetoolbar=1&symboledit=1&saveimage=1&toolbarbg=f1f3f6&studies=[]&theme=dark&style=1&timezone=Etc%2FUTC&studies_overrides={}&overrides={}&enabled_features=[]&disabled_features=[]&locale=en&utm_source=localhost&utm_medium=widget&utm_campaign=chart&utm_term=${a}`,className:"w-full h-full border-none"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4 border-l-4 border-primary pl-3",children:"Technical Analysis"}),o?e.jsx("p",{className:"text-gray-500",children:"Loading analysis..."}):n.length>0?e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs(i,{to:`/analysis/${s.id}`,className:"block bg-surface p-4 rounded-lg border border-gray-800 hover:border-primary transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:s.title}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${s.direction==="Bullish"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:s.direction})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-2 line-clamp-2",children:s.content?.replace(/<[^>]*>?/gm,"")}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:s.timestamp?.seconds?new Date(s.timestamp.seconds*1e3).toLocaleDateString():"Recent"})]},s.id))}):e.jsxs("div",{className:"p-6 bg-surface rounded-lg border border-gray-800 text-center text-gray-500",children:["No recent analysis found for ",r,"."]})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4 border-l-4 border-secondary pl-3",children:"Related News"}),o?e.jsx("p",{className:"text-gray-500",children:"Loading news..."}):d.length>0?e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsxs(i,{to:`/news/${s.id}`,className:"block bg-surface p-4 rounded-lg border border-gray-800 hover:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${s.impact==="High"?"bg-red-500":s.impact==="Medium"?"bg-orange-500":"bg-green-500"}`}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(s.date||s.timestamp?.seconds*1e3).toLocaleDateString()})]}),e.jsx("h4",{className:"font-bold text-white text-sm hover:text-primary transition-colors",children:s.title})]},s.id))}):e.jsx("div",{className:"p-4 bg-surface rounded-lg border border-gray-800 text-gray-500 text-sm",children:"No direct news found."})]}),e.jsxs("div",{className:"bg-surface p-4 rounded-xl border border-gray-800",children:[e.jsx("h3",{className:"text-white font-bold mb-4",children:"Technical Rating"}),e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Market Sentiment"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:"Neutral"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Based on MA & Oscillators"})]})]})]})]})]})]})};export{q as default};
