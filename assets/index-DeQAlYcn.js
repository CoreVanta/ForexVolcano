var r2=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var O8=r2((ts,ns)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ep={exports:{}},yu={};var d_;function s2(){if(d_)return yu;d_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var f in a)f!=="key"&&(o[f]=a[f])}else o=a;return a=o.ref,{$$typeof:r,type:s,key:u,ref:a!==void 0?a:null,props:o}}return yu.Fragment=e,yu.jsx=t,yu.jsxs=t,yu}var m_;function i2(){return m_||(m_=1,ep.exports=s2()),ep.exports}var p=i2(),tp={exports:{}},ze={};var g_;function a2(){if(g_)return ze;g_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),T=Symbol.iterator;function A(P){return P===null||typeof P!="object"?null:(P=T&&P[T]||P["@@iterator"],typeof P=="function"?P:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,I={};function H(P,Y,he){this.props=P,this.context=Y,this.refs=I,this.updater=he||C}H.prototype.isReactComponent={},H.prototype.setState=function(P,Y){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,Y,"setState")},H.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function $(){}$.prototype=H.prototype;function Z(P,Y,he){this.props=P,this.context=Y,this.refs=I,this.updater=he||C}var te=Z.prototype=new $;te.constructor=Z,j(te,H.prototype),te.isPureReactComponent=!0;var de=Array.isArray;function xe(){}var M={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function V(P,Y,he){var me=he.ref;return{$$typeof:r,type:P,key:Y,ref:me!==void 0?me:null,props:he}}function F(P,Y){return V(P.type,Y,P.props)}function S(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function k(P){var Y={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(he){return Y[he]})}var N=/\/+/g;function pe(P,Y){return typeof P=="object"&&P!==null&&P.key!=null?k(""+P.key):Y.toString(36)}function ge(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(xe,xe):(P.status="pending",P.then(function(Y){P.status==="pending"&&(P.status="fulfilled",P.value=Y)},function(Y){P.status==="pending"&&(P.status="rejected",P.reason=Y)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function z(P,Y,he,me,ye){var we=typeof P;(we==="undefined"||we==="boolean")&&(P=null);var De=!1;if(P===null)De=!0;else switch(we){case"bigint":case"string":case"number":De=!0;break;case"object":switch(P.$$typeof){case r:case e:De=!0;break;case v:return De=P._init,z(De(P._payload),Y,he,me,ye)}}if(De)return ye=ye(P),De=me===""?"."+pe(P,0):me,de(ye)?(he="",De!=null&&(he=De.replace(N,"$&/")+"/"),z(ye,Y,he,"",function(Qe){return Qe})):ye!=null&&(S(ye)&&(ye=F(ye,he+(ye.key==null||P&&P.key===ye.key?"":(""+ye.key).replace(N,"$&/")+"/")+De)),Y.push(ye)),1;De=0;var Ie=me===""?".":me+":";if(de(P))for(var je=0;je<P.length;je++)me=P[je],we=Ie+pe(me,je),De+=z(me,Y,he,we,ye);else if(je=A(P),typeof je=="function")for(P=je.call(P),je=0;!(me=P.next()).done;)me=me.value,we=Ie+pe(me,je++),De+=z(me,Y,he,we,ye);else if(we==="object"){if(typeof P.then=="function")return z(ge(P),Y,he,me,ye);throw Y=String(P),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return De}function J(P,Y,he){if(P==null)return P;var me=[],ye=0;return z(P,me,"","",function(we){return Y.call(he,we,ye++)}),me}function ce(P){if(P._status===-1){var Y=P._result;Y=Y(),Y.then(function(he){(P._status===0||P._status===-1)&&(P._status=1,P._result=he)},function(he){(P._status===0||P._status===-1)&&(P._status=2,P._result=he)}),P._status===-1&&(P._status=0,P._result=Y)}if(P._status===1)return P._result.default;throw P._result}var be=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ve={map:J,forEach:function(P,Y,he){J(P,function(){Y.apply(this,arguments)},he)},count:function(P){var Y=0;return J(P,function(){Y++}),Y},toArray:function(P){return J(P,function(Y){return Y})||[]},only:function(P){if(!S(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return ze.Activity=x,ze.Children=ve,ze.Component=H,ze.Fragment=t,ze.Profiler=a,ze.PureComponent=Z,ze.StrictMode=s,ze.Suspense=m,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,ze.__COMPILER_RUNTIME={__proto__:null,c:function(P){return M.H.useMemoCache(P)}},ze.cache=function(P){return function(){return P.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(P,Y,he){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var me=j({},P.props),ye=P.key;if(Y!=null)for(we in Y.key!==void 0&&(ye=""+Y.key),Y)!L.call(Y,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&Y.ref===void 0||(me[we]=Y[we]);var we=arguments.length-2;if(we===1)me.children=he;else if(1<we){for(var De=Array(we),Ie=0;Ie<we;Ie++)De[Ie]=arguments[Ie+2];me.children=De}return V(P.type,ye,me)},ze.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:o,_context:P},P},ze.createElement=function(P,Y,he){var me,ye={},we=null;if(Y!=null)for(me in Y.key!==void 0&&(we=""+Y.key),Y)L.call(Y,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ye[me]=Y[me]);var De=arguments.length-2;if(De===1)ye.children=he;else if(1<De){for(var Ie=Array(De),je=0;je<De;je++)Ie[je]=arguments[je+2];ye.children=Ie}if(P&&P.defaultProps)for(me in De=P.defaultProps,De)ye[me]===void 0&&(ye[me]=De[me]);return V(P,we,ye)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(P){return{$$typeof:f,render:P}},ze.isValidElement=S,ze.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:ce}},ze.memo=function(P,Y){return{$$typeof:g,type:P,compare:Y===void 0?null:Y}},ze.startTransition=function(P){var Y=M.T,he={};M.T=he;try{var me=P(),ye=M.S;ye!==null&&ye(he,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(xe,be)}catch(we){be(we)}finally{Y!==null&&he.types!==null&&(Y.types=he.types),M.T=Y}},ze.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},ze.use=function(P){return M.H.use(P)},ze.useActionState=function(P,Y,he){return M.H.useActionState(P,Y,he)},ze.useCallback=function(P,Y){return M.H.useCallback(P,Y)},ze.useContext=function(P){return M.H.useContext(P)},ze.useDebugValue=function(){},ze.useDeferredValue=function(P,Y){return M.H.useDeferredValue(P,Y)},ze.useEffect=function(P,Y){return M.H.useEffect(P,Y)},ze.useEffectEvent=function(P){return M.H.useEffectEvent(P)},ze.useId=function(){return M.H.useId()},ze.useImperativeHandle=function(P,Y,he){return M.H.useImperativeHandle(P,Y,he)},ze.useInsertionEffect=function(P,Y){return M.H.useInsertionEffect(P,Y)},ze.useLayoutEffect=function(P,Y){return M.H.useLayoutEffect(P,Y)},ze.useMemo=function(P,Y){return M.H.useMemo(P,Y)},ze.useOptimistic=function(P,Y){return M.H.useOptimistic(P,Y)},ze.useReducer=function(P,Y,he){return M.H.useReducer(P,Y,he)},ze.useRef=function(P){return M.H.useRef(P)},ze.useState=function(P){return M.H.useState(P)},ze.useSyncExternalStore=function(P,Y,he){return M.H.useSyncExternalStore(P,Y,he)},ze.useTransition=function(){return M.H.useTransition()},ze.version="19.2.1",ze}var p_;function Ay(){return p_||(p_=1,tp.exports=a2()),tp.exports}var U=Ay();const vi=wy(U);var np={exports:{}},vu={},rp={exports:{}},sp={};var y_;function l2(){return y_||(y_=1,(function(r){function e(z,J){var ce=z.length;z.push(J);e:for(;0<ce;){var be=ce-1>>>1,ve=z[be];if(0<a(ve,J))z[be]=J,z[ce]=ve,ce=be;else break e}}function t(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var J=z[0],ce=z.pop();if(ce!==J){z[0]=ce;e:for(var be=0,ve=z.length,P=ve>>>1;be<P;){var Y=2*(be+1)-1,he=z[Y],me=Y+1,ye=z[me];if(0>a(he,ce))me<ve&&0>a(ye,he)?(z[be]=ye,z[me]=ce,be=me):(z[be]=he,z[Y]=ce,be=Y);else if(me<ve&&0>a(ye,ce))z[be]=ye,z[me]=ce,be=me;else break e}}return J}function a(z,J){var ce=z.sortIndex-J.sortIndex;return ce!==0?ce:z.id-J.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var u=Date,f=u.now();r.unstable_now=function(){return u.now()-f}}var m=[],g=[],v=1,x=null,T=3,A=!1,C=!1,j=!1,I=!1,H=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function te(z){for(var J=t(g);J!==null;){if(J.callback===null)s(g);else if(J.startTime<=z)s(g),J.sortIndex=J.expirationTime,e(m,J);else break;J=t(g)}}function de(z){if(j=!1,te(z),!C)if(t(m)!==null)C=!0,xe||(xe=!0,k());else{var J=t(g);J!==null&&ge(de,J.startTime-z)}}var xe=!1,M=-1,L=5,V=-1;function F(){return I?!0:!(r.unstable_now()-V<L)}function S(){if(I=!1,xe){var z=r.unstable_now();V=z;var J=!0;try{e:{C=!1,j&&(j=!1,$(M),M=-1),A=!0;var ce=T;try{t:{for(te(z),x=t(m);x!==null&&!(x.expirationTime>z&&F());){var be=x.callback;if(typeof be=="function"){x.callback=null,T=x.priorityLevel;var ve=be(x.expirationTime<=z);if(z=r.unstable_now(),typeof ve=="function"){x.callback=ve,te(z),J=!0;break t}x===t(m)&&s(m),te(z)}else s(m);x=t(m)}if(x!==null)J=!0;else{var P=t(g);P!==null&&ge(de,P.startTime-z),J=!1}}break e}finally{x=null,T=ce,A=!1}J=void 0}}finally{J?k():xe=!1}}}var k;if(typeof Z=="function")k=function(){Z(S)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,pe=N.port2;N.port1.onmessage=S,k=function(){pe.postMessage(null)}}else k=function(){H(S,0)};function ge(z,J){M=H(function(){z(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(z){z.callback=null},r.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<z?Math.floor(1e3/z):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(z){switch(T){case 1:case 2:case 3:var J=3;break;default:J=T}var ce=T;T=J;try{return z()}finally{T=ce}},r.unstable_requestPaint=function(){I=!0},r.unstable_runWithPriority=function(z,J){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ce=T;T=z;try{return J()}finally{T=ce}},r.unstable_scheduleCallback=function(z,J,ce){var be=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?be+ce:be):ce=be,z){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=ce+ve,z={id:v++,callback:J,priorityLevel:z,startTime:ce,expirationTime:ve,sortIndex:-1},ce>be?(z.sortIndex=ce,e(g,z),t(m)===null&&z===t(g)&&(j?($(M),M=-1):j=!0,ge(de,ce-be))):(z.sortIndex=ve,e(m,z),C||A||(C=!0,xe||(xe=!0,k()))),z},r.unstable_shouldYield=F,r.unstable_wrapCallback=function(z){var J=T;return function(){var ce=T;T=J;try{return z.apply(this,arguments)}finally{T=ce}}}})(sp)),sp}var v_;function o2(){return v_||(v_=1,rp.exports=l2()),rp.exports}var ip={exports:{}},ir={};var b_;function c2(){if(b_)return ir;b_=1;var r=Ay();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(m,g,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:m,containerInfo:g,implementation:v}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ir.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ir.createPortal=function(m,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return o(m,g,null,v)},ir.flushSync=function(m){var g=u.T,v=s.p;try{if(u.T=null,s.p=2,m)return m()}finally{u.T=g,s.p=v,s.d.f()}},ir.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},ir.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},ir.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var v=g.as,x=f(v,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:T,fetchPriority:A}):v==="script"&&s.d.X(m,{crossOrigin:x,integrity:T,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ir.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=f(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},ir.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,x=f(v,g.crossOrigin);s.d.L(m,v,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ir.preloadModule=function(m,g){if(typeof m=="string")if(g){var v=f(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},ir.requestFormReset=function(m){s.d.r(m)},ir.unstable_batchedUpdates=function(m,g){return m(g)},ir.useFormState=function(m,g,v){return u.H.useFormState(m,g,v)},ir.useFormStatus=function(){return u.H.useHostTransitionStatus()},ir.version="19.2.1",ir}var __;function u2(){if(__)return ip.exports;__=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ip.exports=c2(),ip.exports}var x_;function h2(){if(x_)return vu;x_=1;var r=o2(),e=Ay(),t=u2();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(o(n)!==n)throw Error(s(188))}function g(n){var i=n.alternate;if(!i){if(i=o(n),i===null)throw Error(s(188));return i!==n?null:n}for(var l=n,c=i;;){var d=l.return;if(d===null)break;var y=d.alternate;if(y===null){if(c=d.return,c!==null){l=c;continue}break}if(d.child===y.child){for(y=d.child;y;){if(y===l)return m(d),n;if(y===c)return m(d),i;y=y.sibling}throw Error(s(188))}if(l.return!==c.return)l=d,c=y;else{for(var E=!1,R=d.child;R;){if(R===l){E=!0,l=d,c=y;break}if(R===c){E=!0,c=d,l=y;break}R=R.sibling}if(!E){for(R=y.child;R;){if(R===l){E=!0,l=y,c=d;break}if(R===c){E=!0,c=y,l=d;break}R=R.sibling}if(!E)throw Error(s(189))}}if(l.alternate!==c)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?n:i}function v(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=v(n),i!==null)return i;n=n.sibling}return null}var x=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),S=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=S&&n[S]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function pe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case H:return"Profiler";case I:return"StrictMode";case de:return"Suspense";case xe:return"SuspenseList";case V:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case C:return"Portal";case Z:return n.displayName||"Context";case $:return(n._context.displayName||"Context")+".Consumer";case te:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case M:return i=n.displayName||null,i!==null?i:pe(n.type)||"Memo";case L:i=n._payload,n=n._init;try{return pe(n(i))}catch{}}return null}var ge=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},be=[],ve=-1;function P(n){return{current:n}}function Y(n){0>ve||(n.current=be[ve],be[ve]=null,ve--)}function he(n,i){ve++,be[ve]=n.current,n.current=i}var me=P(null),ye=P(null),we=P(null),De=P(null);function Ie(n,i){switch(he(we,i),he(ye,n),he(me,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?M1(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=M1(i),n=V1(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Y(me),he(me,n)}function je(){Y(me),Y(ye),Y(we)}function Qe(n){n.memoizedState!==null&&he(De,n);var i=me.current,l=V1(i,n.type);i!==l&&(he(ye,n),he(me,l))}function Ze(n){ye.current===n&&(Y(me),Y(ye)),De.current===n&&(Y(De),du._currentValue=ce)}var tt,lt;function dt(n){if(tt===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);tt=i&&i[1]||"",lt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tt+n+lt}var tn=!1;function Vr(n,i){if(!n||tn)return"";tn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(se){var ee=se}Reflect.construct(n,[],ue)}else{try{ue.call()}catch(se){ee=se}n.call(ue.prototype)}}else{try{throw Error()}catch(se){ee=se}(ue=n())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(se){if(se&&ee&&typeof se.stack=="string")return[se.stack,ee.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),E=y[0],R=y[1];if(E&&R){var B=E.split(`
`),W=R.split(`
`);for(d=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;d<W.length&&!W[d].includes("DetermineComponentFrameRoot");)d++;if(c===B.length||d===W.length)for(c=B.length-1,d=W.length-1;1<=c&&0<=d&&B[c]!==W[d];)d--;for(;1<=c&&0<=d;c--,d--)if(B[c]!==W[d]){if(c!==1||d!==1)do if(c--,d--,0>d||B[c]!==W[d]){var ie=`
`+B[c].replace(" at new "," at ");return n.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",n.displayName)),ie}while(1<=c&&0<=d);break}}}finally{tn=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?dt(l):""}function si(n,i){switch(n.tag){case 26:case 27:case 5:return dt(n.type);case 16:return dt("Lazy");case 13:return n.child!==i&&i!==null?dt("Suspense Fallback"):dt("Suspense");case 19:return dt("SuspenseList");case 0:case 15:return Vr(n.type,!1);case 11:return Vr(n.type.render,!1);case 1:return Vr(n.type,!0);case 31:return dt("Activity");default:return""}}function Di(n){try{var i="",l=null;do i+=si(n,l),l=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ht=Object.prototype.hasOwnProperty,Rt=r.unstable_scheduleCallback,_r=r.unstable_cancelCallback,Ta=r.unstable_shouldYield,ji=r.unstable_requestPaint,It=r.unstable_now,xr=r.unstable_getCurrentPriorityLevel,Li=r.unstable_ImmediatePriority,Pr=r.unstable_UserBlockingPriority,cr=r.unstable_NormalPriority,ki=r.unstable_LowPriority,Ln=r.unstable_IdlePriority,Mi=r.log,Vi=r.unstable_setDisableYieldValue,ur=null,Wt=null;function wn(n){if(typeof Mi=="function"&&Vi(n),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(ur,n)}catch{}}var Ot=Math.clz32?Math.clz32:Wn,js=Math.log,Er=Math.LN2;function Wn(n){return n>>>=0,n===0?32:31-(js(n)/Er|0)|0}var kn=256,Ur=262144,xt=4194304;function Jn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Rn(n,i,l){var c=n.pendingLanes;if(c===0)return 0;var d=0,y=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var R=c&134217727;return R!==0?(c=R&~y,c!==0?d=Jn(c):(E&=R,E!==0?d=Jn(E):l||(l=R&~n,l!==0&&(d=Jn(l))))):(R=c&~y,R!==0?d=Jn(R):E!==0?d=Jn(E):l||(l=c&~n,l!==0&&(d=Jn(l)))),d===0?0:i!==0&&i!==d&&(i&y)===0&&(y=d&-d,l=i&-i,y>=l||y===32&&(l&4194048)!==0)?i:d}function Mn(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Pi(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ii(){var n=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),n}function An(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function as(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function qr(n,i,l,c,d,y){var E=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var R=n.entanglements,B=n.expirationTimes,W=n.hiddenUpdates;for(l=E&~l;0<l;){var ie=31-Ot(l),ue=1<<ie;R[ie]=0,B[ie]=-1;var ee=W[ie];if(ee!==null)for(W[ie]=null,ie=0;ie<ee.length;ie++){var se=ee[ie];se!==null&&(se.lane&=-536870913)}l&=~ue}c!==0&&Ls(n,c,0),y!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=y&~(E&~i))}function Ls(n,i,l){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-Ot(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|l&261930}function Ui(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var c=31-Ot(l),d=1<<c;d&i|n[c]&i&&(n[c]|=i),l&=~d}}function qi(n,i){var l=i&-i;return l=(l&42)!==0?1:ls(l),(l&(n.suspendedLanes|i))!==0?0:l}function ls(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function hr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function nn(){var n=J.p;return n!==0?n:(n=window.event,n===void 0?32:a_(n.type))}function fr(n,i){var l=J.p;try{return J.p=n,i()}finally{J.p=l}}var dr=Math.random().toString(36).slice(2),Ft="__reactFiber$"+dr,rn="__reactProps$"+dr,Tr="__reactContainer$"+dr,Jt="__reactEvents$"+dr,Cl="__reactListeners$"+dr,wa="__reactHandles$"+dr,Aa="__reactResources$"+dr,wr="__reactMarker$"+dr;function ai(n){delete n[Ft],delete n[rn],delete n[Jt],delete n[Cl],delete n[wa]}function kt(n){var i=n[Ft];if(i)return i;for(var l=n.parentNode;l;){if(i=l[Tr]||l[Ft]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=F1(n);n!==null;){if(l=n[Ft])return l;n=F1(n)}return i}n=l,l=n.parentNode}return null}function er(n){if(n=n[Ft]||n[Tr]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Vn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function Ar(n){var i=n[Aa];return i||(i=n[Aa]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Gt(n){n[wr]=!0}var Bi=new Set,os={};function mr(n,i){Pn(n,i),Pn(n+"Capture",i)}function Pn(n,i){for(os[n]=i,n=0;n<i.length;n++)Bi.add(i[n])}var tr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ks={},zi={};function Sa(n){return Ht.call(zi,n)?!0:Ht.call(ks,n)?!1:tr.test(n)?zi[n]=!0:(ks[n]=!0,!1)}function li(n,i,l){if(Sa(i))if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+l)}}function Un(n,i,l){if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+l)}}function $t(n,i,l,c){if(c===null)n.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(i,l,""+c)}}function Mt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Sr(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Br(n,i,l){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var d=c.get,y=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(E){l=""+E,y.call(this,E)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ct(n){if(!n._valueTracker){var i=Sr(n)?"checked":"value";n._valueTracker=Br(n,i,""+n[i])}}function cs(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),c="";return n&&(c=Sr(n)?n.checked?"true":"false":n.value),n=c,n!==l?(i.setValue(n),!0):!1}function Nr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ms=/[\n"\\]/g;function In(n){return n.replace(Ms,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function oi(n,i,l,c,d,y,E,R){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),i!=null?E==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Mt(i)):n.value!==""+Mt(i)&&(n.value=""+Mt(i)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),i!=null?Hi(n,E,Mt(i)):l!=null?Hi(n,E,Mt(l)):c!=null&&n.removeAttribute("value"),d==null&&y!=null&&(n.defaultChecked=!!y),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?n.name=""+Mt(R):n.removeAttribute("name")}function ci(n,i,l,c,d,y,E,R){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),i!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){ct(n);return}l=l!=null?""+Mt(l):"",i=i!=null?""+Mt(i):l,R||i===n.value||(n.value=i),n.defaultValue=i}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=R?n.checked:!!c,n.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E),ct(n)}function Hi(n,i,l){i==="number"&&Nr(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function us(n,i,l,c){if(n=n.options,i){i={};for(var d=0;d<l.length;d++)i["$"+l[d]]=!0;for(l=0;l<n.length;l++)d=i.hasOwnProperty("$"+n[l].value),n[l].selected!==d&&(n[l].selected=d),d&&c&&(n[l].defaultSelected=!0)}else{for(l=""+Mt(l),i=null,d=0;d<n.length;d++){if(n[d].value===l){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function hs(n,i,l){if(i!=null&&(i=""+Mt(i),i!==n.value&&(n.value=i),l==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=l!=null?""+Mt(l):""}function gn(n,i,l,c){if(i==null){if(c!=null){if(l!=null)throw Error(s(92));if(ge(c)){if(1<c.length)throw Error(s(93));c=c[0]}l=c}l==null&&(l=""),i=l}l=Mt(i),n.defaultValue=l,c=n.textContent,c===l&&c!==""&&c!==null&&(n.value=c),ct(n)}function Kt(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var Cr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fi(n,i,l){var c=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,l):typeof l!="number"||l===0||Cr.has(i)?i==="float"?n.cssFloat=l:n[i]=(""+l).trim():n[i]=l+"px"}function nr(n,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var d in i)c=i[d],i.hasOwnProperty(d)&&l[d]!==c&&Fi(n,d,c)}else for(var y in i)i.hasOwnProperty(y)&&Fi(n,y,i[y])}function ui(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Na=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hi(n){return fs.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function rr(){}var on=null;function qn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zr=null,Bn=null;function Hr(n){var i=er(n);if(i&&(n=i.stateNode)){var l=n[rn]||null;e:switch(n=i.stateNode,i.type){case"input":if(oi(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+In(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var c=l[i];if(c!==n&&c.form===n.form){var d=c[rn]||null;if(!d)throw Error(s(90));oi(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<l.length;i++)c=l[i],c.form===n.form&&cs(c)}break e;case"textarea":hs(n,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&us(n,!!l.multiple,i,!1)}}}var Fr=!1;function ds(n,i,l){if(Fr)return n(i,l);Fr=!0;try{var c=n(i);return c}finally{if(Fr=!1,(zr!==null||Bn!==null)&&(ff(),zr&&(i=zr,n=Bn,Bn=zr=null,Hr(i),n)))for(i=0;i<n.length;i++)Hr(n[i])}}function sr(n,i){var l=n.stateNode;if(l===null)return null;var c=l[rn]||null;if(c===null)return null;l=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ms=!1;if(On)try{var Ye={};Object.defineProperty(Ye,"passive",{get:function(){ms=!0}}),window.addEventListener("test",Ye,Ye),window.removeEventListener("test",Ye,Ye)}catch{ms=!1}var gr=null,Vs=null,Ps=null;function Gi(){if(Ps)return Ps;var n,i=Vs,l=i.length,c,d="value"in gr?gr.value:gr.textContent,y=d.length;for(n=0;n<l&&i[n]===d[n];n++);var E=l-n;for(c=1;c<=E&&i[l-c]===d[y-c];c++);return Ps=d.slice(n,1<c?1-c:void 0)}function _(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function O(){return!0}function q(){return!1}function ne(n){function i(l,c,d,y,E){this._reactName=l,this._targetInst=d,this.type=c,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(l=n[R],this[R]=l?l(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?O:q,this.isPropagationStopped=q,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=O)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=O)},persist:function(){},isPersistent:O}),i}var Me={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ae=ne(Me),Ge=x({},Me,{view:0,detail:0}),Xe=ne(Ge),vt,We,Nt,cn=x({},Ge,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ca,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Nt&&(Nt&&n.type==="mousemove"?(vt=n.screenX-Nt.screenX,We=n.screenY-Nt.screenY):We=vt=0,Nt=n),vt)},movementY:function(n){return"movementY"in n?n.movementY:We}}),Vt=ne(cn),Qt=x({},cn,{dataTransfer:0}),sn=ne(Qt),Gr=x({},Ge,{relatedTarget:0}),zn=ne(Gr),$r=x({},Me,{animationName:0,elapsedTime:0,pseudoElement:0}),Rl=ne($r),Us=x({},Me,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$i=ne(Us),Th=x({},Me,{data:0}),fi=ne(Th),wh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ah={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nh(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Sh[n])?!!i[n]:!1}function Ca(){return Nh}var pr=x({},Ge,{key:function(n){if(n.key){var i=wh[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=_(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ah[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ca,charCode:function(n){return n.type==="keypress"?_(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?_(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ch=ne(pr),Rh=x({},cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ki=ne(Rh),h=x({},Ge,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ca}),b=ne(h),w=x({},Me,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=ne(w),Q=x({},cn,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),re=ne(Q),_e=x({},Me,{newState:0,oldState:0}),He=ne(_e),un=[9,13,27,32],mt=On&&"CompositionEvent"in window,Yt=null;On&&"documentMode"in document&&(Yt=document.documentMode);var gs=On&&"TextEvent"in window&&!Yt,di=On&&(!mt||Yt&&8<Yt&&11>=Yt),qs=" ",Bs=!1;function Il(n,i){switch(n){case"keyup":return un.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var _o=!1;function NS(n,i){switch(n){case"compositionend":return bo(i);case"keypress":return i.which!==32?null:(Bs=!0,qs);case"textInput":return n=i.data,n===qs&&Bs?null:n;default:return null}}function CS(n,i){if(_o)return n==="compositionend"||!mt&&Il(n,i)?(n=Gi(),Ps=Vs=gr=null,_o=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return di&&i.locale!=="ko"?null:i.data;default:return null}}var RS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $0(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!RS[n.type]:i==="textarea"}function K0(n,i,l,c){zr?Bn?Bn.push(c):Bn=[c]:zr=c,i=bf(i,"onChange"),0<i.length&&(l=new Ae("onChange","change",null,l,c),n.push({event:l,listeners:i}))}var kc=null,Mc=null;function IS(n){I1(n,0)}function Ih(n){var i=Vn(n);if(cs(i))return n}function Q0(n,i){if(n==="change")return i}var Y0=!1;if(On){var lm;if(On){var om="oninput"in document;if(!om){var X0=document.createElement("div");X0.setAttribute("oninput","return;"),om=typeof X0.oninput=="function"}lm=om}else lm=!1;Y0=lm&&(!document.documentMode||9<document.documentMode)}function Z0(){kc&&(kc.detachEvent("onpropertychange",W0),Mc=kc=null)}function W0(n){if(n.propertyName==="value"&&Ih(Mc)){var i=[];K0(i,Mc,n,qn(n)),ds(IS,i)}}function OS(n,i,l){n==="focusin"?(Z0(),kc=i,Mc=l,kc.attachEvent("onpropertychange",W0)):n==="focusout"&&Z0()}function DS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ih(Mc)}function jS(n,i){if(n==="click")return Ih(i)}function LS(n,i){if(n==="input"||n==="change")return Ih(i)}function kS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Kr=typeof Object.is=="function"?Object.is:kS;function Vc(n,i){if(Kr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),c=Object.keys(i);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var d=l[c];if(!Ht.call(i,d)||!Kr(n[d],i[d]))return!1}return!0}function J0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ev(n,i){var l=J0(n);n=0;for(var c;l;){if(l.nodeType===3){if(c=n+l.textContent.length,n<=i&&c>=i)return{node:l,offset:i-n};n=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=J0(l)}}function tv(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?tv(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function nv(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Nr(n.document);i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=Nr(n.document)}return i}function cm(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var MS=On&&"documentMode"in document&&11>=document.documentMode,xo=null,um=null,Pc=null,hm=!1;function rv(n,i,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;hm||xo==null||xo!==Nr(c)||(c=xo,"selectionStart"in c&&cm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Pc&&Vc(Pc,c)||(Pc=c,c=bf(um,"onSelect"),0<c.length&&(i=new Ae("onSelect","select",null,i,l),n.push({event:i,listeners:c}),i.target=xo)))}function Ol(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var Eo={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionrun:Ol("Transition","TransitionRun"),transitionstart:Ol("Transition","TransitionStart"),transitioncancel:Ol("Transition","TransitionCancel"),transitionend:Ol("Transition","TransitionEnd")},fm={},sv={};On&&(sv=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function Dl(n){if(fm[n])return fm[n];if(!Eo[n])return n;var i=Eo[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in sv)return fm[n]=i[l];return n}var iv=Dl("animationend"),av=Dl("animationiteration"),lv=Dl("animationstart"),VS=Dl("transitionrun"),PS=Dl("transitionstart"),US=Dl("transitioncancel"),ov=Dl("transitionend"),cv=new Map,dm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dm.push("scrollEnd");function zs(n,i){cv.set(n,i),mr(i,[n])}var Oh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},ps=[],To=0,mm=0;function Dh(){for(var n=To,i=mm=To=0;i<n;){var l=ps[i];ps[i++]=null;var c=ps[i];ps[i++]=null;var d=ps[i];ps[i++]=null;var y=ps[i];if(ps[i++]=null,c!==null&&d!==null){var E=c.pending;E===null?d.next=d:(d.next=E.next,E.next=d),c.pending=d}y!==0&&uv(l,d,y)}}function jh(n,i,l,c){ps[To++]=n,ps[To++]=i,ps[To++]=l,ps[To++]=c,mm|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function gm(n,i,l,c){return jh(n,i,l,c),Lh(n)}function jl(n,i){return jh(n,null,null,i),Lh(n)}function uv(n,i,l){n.lanes|=l;var c=n.alternate;c!==null&&(c.lanes|=l);for(var d=!1,y=n.return;y!==null;)y.childLanes|=l,c=y.alternate,c!==null&&(c.childLanes|=l),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(d=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,d&&i!==null&&(d=31-Ot(l),n=y.hiddenUpdates,c=n[d],c===null?n[d]=[i]:c.push(i),i.lane=l|536870912),y):null}function Lh(n){if(50<au)throw au=0,wg=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var wo={};function qS(n,i,l,c){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(n,i,l,c){return new qS(n,i,l,c)}function pm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Qi(n,i){var l=n.alternate;return l===null?(l=Qr(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function hv(n,i){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,i=l.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function kh(n,i,l,c,d,y){var E=0;if(c=n,typeof n=="function")pm(n)&&(E=1);else if(typeof n=="string")E=GN(n,l,me.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case V:return n=Qr(31,l,i,d),n.elementType=V,n.lanes=y,n;case j:return Ll(l.children,d,y,i);case I:E=8,d|=24;break;case H:return n=Qr(12,l,i,d|2),n.elementType=H,n.lanes=y,n;case de:return n=Qr(13,l,i,d),n.elementType=de,n.lanes=y,n;case xe:return n=Qr(19,l,i,d),n.elementType=xe,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Z:E=10;break e;case $:E=9;break e;case te:E=11;break e;case M:E=14;break e;case L:E=16,c=null;break e}E=29,l=Error(s(130,n===null?"null":typeof n,"")),c=null}return i=Qr(E,l,i,d),i.elementType=n,i.type=c,i.lanes=y,i}function Ll(n,i,l,c){return n=Qr(7,n,c,i),n.lanes=l,n}function ym(n,i,l){return n=Qr(6,n,null,i),n.lanes=l,n}function fv(n){var i=Qr(18,null,null,0);return i.stateNode=n,i}function vm(n,i,l){return i=Qr(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var dv=new WeakMap;function ys(n,i){if(typeof n=="object"&&n!==null){var l=dv.get(n);return l!==void 0?l:(i={value:n,source:i,stack:Di(i)},dv.set(n,i),i)}return{value:n,source:i,stack:Di(i)}}var Ao=[],So=0,Mh=null,Uc=0,vs=[],bs=0,Ra=null,mi=1,gi="";function Yi(n,i){Ao[So++]=Uc,Ao[So++]=Mh,Mh=n,Uc=i}function mv(n,i,l){vs[bs++]=mi,vs[bs++]=gi,vs[bs++]=Ra,Ra=n;var c=mi;n=gi;var d=32-Ot(c)-1;c&=~(1<<d),l+=1;var y=32-Ot(i)+d;if(30<y){var E=d-d%5;y=(c&(1<<E)-1).toString(32),c>>=E,d-=E,mi=1<<32-Ot(i)+d|l<<d|c,gi=y+n}else mi=1<<y|l<<d|c,gi=n}function bm(n){n.return!==null&&(Yi(n,1),mv(n,1,0))}function _m(n){for(;n===Mh;)Mh=Ao[--So],Ao[So]=null,Uc=Ao[--So],Ao[So]=null;for(;n===Ra;)Ra=vs[--bs],vs[bs]=null,gi=vs[--bs],vs[bs]=null,mi=vs[--bs],vs[bs]=null}function gv(n,i){vs[bs++]=mi,vs[bs++]=gi,vs[bs++]=Ra,mi=i.id,gi=i.overflow,Ra=n}var Hn=null,Pt=null,ot=!1,Ia=null,_s=!1,xm=Error(s(519));function Oa(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qc(ys(i,n)),xm}function pv(n){var i=n.stateNode,l=n.type,c=n.memoizedProps;switch(i[Ft]=n,i[rn]=c,l){case"dialog":et("cancel",i),et("close",i);break;case"iframe":case"object":case"embed":et("load",i);break;case"video":case"audio":for(l=0;l<ou.length;l++)et(ou[l],i);break;case"source":et("error",i);break;case"img":case"image":case"link":et("error",i),et("load",i);break;case"details":et("toggle",i);break;case"input":et("invalid",i),ci(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":et("invalid",i);break;case"textarea":et("invalid",i),gn(i,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||c.suppressHydrationWarning===!0||L1(i.textContent,l)?(c.popover!=null&&(et("beforetoggle",i),et("toggle",i)),c.onScroll!=null&&et("scroll",i),c.onScrollEnd!=null&&et("scrollend",i),c.onClick!=null&&(i.onclick=rr),i=!0):i=!1,i||Oa(n,!0)}function yv(n){for(Hn=n.return;Hn;)switch(Hn.tag){case 5:case 31:case 13:_s=!1;return;case 27:case 3:_s=!0;return;default:Hn=Hn.return}}function No(n){if(n!==Hn)return!1;if(!ot)return yv(n),ot=!0,!1;var i=n.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Ug(n.type,n.memoizedProps)),l=!l),l&&Pt&&Oa(n),yv(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Pt=H1(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Pt=H1(n)}else i===27?(i=Pt,Ga(n.type)?(n=Fg,Fg=null,Pt=n):Pt=i):Pt=Hn?Es(n.stateNode.nextSibling):null;return!0}function kl(){Pt=Hn=null,ot=!1}function Em(){var n=Ia;return n!==null&&(Dr===null?Dr=n:Dr.push.apply(Dr,n),Ia=null),n}function qc(n){Ia===null?Ia=[n]:Ia.push(n)}var Tm=P(null),Ml=null,Xi=null;function Da(n,i,l){he(Tm,i._currentValue),i._currentValue=l}function Zi(n){n._currentValue=Tm.current,Y(Tm)}function wm(n,i,l){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===l)break;n=n.return}}function Am(n,i,l,c){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var y=d.dependencies;if(y!==null){var E=d.child;y=y.firstContext;e:for(;y!==null;){var R=y;y=d;for(var B=0;B<i.length;B++)if(R.context===i[B]){y.lanes|=l,R=y.alternate,R!==null&&(R.lanes|=l),wm(y.return,l,n),c||(E=null);break e}y=R.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(s(341));E.lanes|=l,y=E.alternate,y!==null&&(y.lanes|=l),wm(E,l,n),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===n){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function Co(n,i,l,c){n=null;for(var d=i,y=!1;d!==null;){if(!y){if((d.flags&524288)!==0)y=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var R=d.type;Kr(d.pendingProps.value,E.value)||(n!==null?n.push(R):n=[R])}}else if(d===De.current){if(E=d.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(du):n=[du])}d=d.return}n!==null&&Am(i,n,l,c),i.flags|=262144}function Vh(n){for(n=n.firstContext;n!==null;){if(!Kr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Vl(n){Ml=n,Xi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Fn(n){return vv(Ml,n)}function Ph(n,i){return Ml===null&&Vl(n),vv(n,i)}function vv(n,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Xi===null){if(n===null)throw Error(s(308));Xi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Xi=Xi.next=i;return l}var BS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(l,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(l){return l()})}},zS=r.unstable_scheduleCallback,HS=r.unstable_NormalPriority,pn={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sm(){return{controller:new BS,data:new Map,refCount:0}}function Bc(n){n.refCount--,n.refCount===0&&zS(HS,function(){n.controller.abort()})}var zc=null,Nm=0,Ro=0,Io=null;function FS(n,i){if(zc===null){var l=zc=[];Nm=0,Ro=Ig(),Io={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Nm++,i.then(bv,bv),i}function bv(){if(--Nm===0&&zc!==null){Io!==null&&(Io.status="fulfilled");var n=zc;zc=null,Ro=0,Io=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function GS(n,i){var l=[],c={status:"pending",value:null,reason:null,then:function(d){l.push(d)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var d=0;d<l.length;d++)(0,l[d])(i)},function(d){for(c.status="rejected",c.reason=d,d=0;d<l.length;d++)(0,l[d])(void 0)}),c}var _v=z.S;z.S=function(n,i){s1=It(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&FS(n,i),_v!==null&&_v(n,i)};var Pl=P(null);function Cm(){var n=Pl.current;return n!==null?n:Ct.pooledCache}function Uh(n,i){i===null?he(Pl,Pl.current):he(Pl,i.pool)}function xv(){var n=Cm();return n===null?null:{parent:pn._currentValue,pool:n}}var Oo=Error(s(460)),Rm=Error(s(474)),qh=Error(s(542)),Bh={then:function(){}};function Ev(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Tv(n,i,l){switch(l=n[l],l===void 0?n.push(i):l!==i&&(i.then(rr,rr),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Av(n),n;default:if(typeof i.status=="string")i.then(rr,rr);else{if(n=Ct,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=c}},function(c){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Av(n),n}throw ql=i,Oo}}function Ul(n){try{var i=n._init;return i(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ql=l,Oo):l}}var ql=null;function wv(){if(ql===null)throw Error(s(459));var n=ql;return ql=null,n}function Av(n){if(n===Oo||n===qh)throw Error(s(483))}var Do=null,Hc=0;function zh(n){var i=Hc;return Hc+=1,Do===null&&(Do=[]),Tv(Do,n,i)}function Fc(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Hh(n,i){throw i.$$typeof===T?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Sv(n){function i(K,G){if(n){var X=K.deletions;X===null?(K.deletions=[G],K.flags|=16):X.push(G)}}function l(K,G){if(!n)return null;for(;G!==null;)i(K,G),G=G.sibling;return null}function c(K){for(var G=new Map;K!==null;)K.key!==null?G.set(K.key,K):G.set(K.index,K),K=K.sibling;return G}function d(K,G){return K=Qi(K,G),K.index=0,K.sibling=null,K}function y(K,G,X){return K.index=X,n?(X=K.alternate,X!==null?(X=X.index,X<G?(K.flags|=67108866,G):X):(K.flags|=67108866,G)):(K.flags|=1048576,G)}function E(K){return n&&K.alternate===null&&(K.flags|=67108866),K}function R(K,G,X,ae){return G===null||G.tag!==6?(G=ym(X,K.mode,ae),G.return=K,G):(G=d(G,X),G.return=K,G)}function B(K,G,X,ae){var Le=X.type;return Le===j?ie(K,G,X.props.children,ae,X.key):G!==null&&(G.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===L&&Ul(Le)===G.type)?(G=d(G,X.props),Fc(G,X),G.return=K,G):(G=kh(X.type,X.key,X.props,null,K.mode,ae),Fc(G,X),G.return=K,G)}function W(K,G,X,ae){return G===null||G.tag!==4||G.stateNode.containerInfo!==X.containerInfo||G.stateNode.implementation!==X.implementation?(G=vm(X,K.mode,ae),G.return=K,G):(G=d(G,X.children||[]),G.return=K,G)}function ie(K,G,X,ae,Le){return G===null||G.tag!==7?(G=Ll(X,K.mode,ae,Le),G.return=K,G):(G=d(G,X),G.return=K,G)}function ue(K,G,X){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=ym(""+G,K.mode,X),G.return=K,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case A:return X=kh(G.type,G.key,G.props,null,K.mode,X),Fc(X,G),X.return=K,X;case C:return G=vm(G,K.mode,X),G.return=K,G;case L:return G=Ul(G),ue(K,G,X)}if(ge(G)||k(G))return G=Ll(G,K.mode,X,null),G.return=K,G;if(typeof G.then=="function")return ue(K,zh(G),X);if(G.$$typeof===Z)return ue(K,Ph(K,G),X);Hh(K,G)}return null}function ee(K,G,X,ae){var Le=G!==null?G.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Le!==null?null:R(K,G,""+X,ae);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case A:return X.key===Le?B(K,G,X,ae):null;case C:return X.key===Le?W(K,G,X,ae):null;case L:return X=Ul(X),ee(K,G,X,ae)}if(ge(X)||k(X))return Le!==null?null:ie(K,G,X,ae,null);if(typeof X.then=="function")return ee(K,G,zh(X),ae);if(X.$$typeof===Z)return ee(K,G,Ph(K,X),ae);Hh(K,X)}return null}function se(K,G,X,ae,Le){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return K=K.get(X)||null,R(G,K,""+ae,Le);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case A:return K=K.get(ae.key===null?X:ae.key)||null,B(G,K,ae,Le);case C:return K=K.get(ae.key===null?X:ae.key)||null,W(G,K,ae,Le);case L:return ae=Ul(ae),se(K,G,X,ae,Le)}if(ge(ae)||k(ae))return K=K.get(X)||null,ie(G,K,ae,Le,null);if(typeof ae.then=="function")return se(K,G,X,zh(ae),Le);if(ae.$$typeof===Z)return se(K,G,X,Ph(G,ae),Le);Hh(G,ae)}return null}function Se(K,G,X,ae){for(var Le=null,ht=null,Ce=G,$e=G=0,rt=null;Ce!==null&&$e<X.length;$e++){Ce.index>$e?(rt=Ce,Ce=null):rt=Ce.sibling;var ft=ee(K,Ce,X[$e],ae);if(ft===null){Ce===null&&(Ce=rt);break}n&&Ce&&ft.alternate===null&&i(K,Ce),G=y(ft,G,$e),ht===null?Le=ft:ht.sibling=ft,ht=ft,Ce=rt}if($e===X.length)return l(K,Ce),ot&&Yi(K,$e),Le;if(Ce===null){for(;$e<X.length;$e++)Ce=ue(K,X[$e],ae),Ce!==null&&(G=y(Ce,G,$e),ht===null?Le=Ce:ht.sibling=Ce,ht=Ce);return ot&&Yi(K,$e),Le}for(Ce=c(Ce);$e<X.length;$e++)rt=se(Ce,K,$e,X[$e],ae),rt!==null&&(n&&rt.alternate!==null&&Ce.delete(rt.key===null?$e:rt.key),G=y(rt,G,$e),ht===null?Le=rt:ht.sibling=rt,ht=rt);return n&&Ce.forEach(function(Xa){return i(K,Xa)}),ot&&Yi(K,$e),Le}function Pe(K,G,X,ae){if(X==null)throw Error(s(151));for(var Le=null,ht=null,Ce=G,$e=G=0,rt=null,ft=X.next();Ce!==null&&!ft.done;$e++,ft=X.next()){Ce.index>$e?(rt=Ce,Ce=null):rt=Ce.sibling;var Xa=ee(K,Ce,ft.value,ae);if(Xa===null){Ce===null&&(Ce=rt);break}n&&Ce&&Xa.alternate===null&&i(K,Ce),G=y(Xa,G,$e),ht===null?Le=Xa:ht.sibling=Xa,ht=Xa,Ce=rt}if(ft.done)return l(K,Ce),ot&&Yi(K,$e),Le;if(Ce===null){for(;!ft.done;$e++,ft=X.next())ft=ue(K,ft.value,ae),ft!==null&&(G=y(ft,G,$e),ht===null?Le=ft:ht.sibling=ft,ht=ft);return ot&&Yi(K,$e),Le}for(Ce=c(Ce);!ft.done;$e++,ft=X.next())ft=se(Ce,K,$e,ft.value,ae),ft!==null&&(n&&ft.alternate!==null&&Ce.delete(ft.key===null?$e:ft.key),G=y(ft,G,$e),ht===null?Le=ft:ht.sibling=ft,ht=ft);return n&&Ce.forEach(function(n2){return i(K,n2)}),ot&&Yi(K,$e),Le}function wt(K,G,X,ae){if(typeof X=="object"&&X!==null&&X.type===j&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case A:e:{for(var Le=X.key;G!==null;){if(G.key===Le){if(Le=X.type,Le===j){if(G.tag===7){l(K,G.sibling),ae=d(G,X.props.children),ae.return=K,K=ae;break e}}else if(G.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===L&&Ul(Le)===G.type){l(K,G.sibling),ae=d(G,X.props),Fc(ae,X),ae.return=K,K=ae;break e}l(K,G);break}else i(K,G);G=G.sibling}X.type===j?(ae=Ll(X.props.children,K.mode,ae,X.key),ae.return=K,K=ae):(ae=kh(X.type,X.key,X.props,null,K.mode,ae),Fc(ae,X),ae.return=K,K=ae)}return E(K);case C:e:{for(Le=X.key;G!==null;){if(G.key===Le)if(G.tag===4&&G.stateNode.containerInfo===X.containerInfo&&G.stateNode.implementation===X.implementation){l(K,G.sibling),ae=d(G,X.children||[]),ae.return=K,K=ae;break e}else{l(K,G);break}else i(K,G);G=G.sibling}ae=vm(X,K.mode,ae),ae.return=K,K=ae}return E(K);case L:return X=Ul(X),wt(K,G,X,ae)}if(ge(X))return Se(K,G,X,ae);if(k(X)){if(Le=k(X),typeof Le!="function")throw Error(s(150));return X=Le.call(X),Pe(K,G,X,ae)}if(typeof X.then=="function")return wt(K,G,zh(X),ae);if(X.$$typeof===Z)return wt(K,G,Ph(K,X),ae);Hh(K,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,G!==null&&G.tag===6?(l(K,G.sibling),ae=d(G,X),ae.return=K,K=ae):(l(K,G),ae=ym(X,K.mode,ae),ae.return=K,K=ae),E(K)):l(K,G)}return function(K,G,X,ae){try{Hc=0;var Le=wt(K,G,X,ae);return Do=null,Le}catch(Ce){if(Ce===Oo||Ce===qh)throw Ce;var ht=Qr(29,Ce,null,K.mode);return ht.lanes=ae,ht.return=K,ht}finally{}}}var Bl=Sv(!0),Nv=Sv(!1),ja=!1;function Im(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Om(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function La(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ka(n,i,l){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(gt&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,i=Lh(n),uv(n,null,l),i}return jh(n,c,i,l),Lh(n)}function Gc(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,l|=c,i.lanes=l,Ui(n,l)}}function Dm(n,i){var l=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var d=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?d=y=E:y=y.next=E,l=l.next}while(l!==null);y===null?d=y=i:y=y.next=i}else d=y=i;l={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}var jm=!1;function $c(){if(jm){var n=Io;if(n!==null)throw n}}function Kc(n,i,l,c){jm=!1;var d=n.updateQueue;ja=!1;var y=d.firstBaseUpdate,E=d.lastBaseUpdate,R=d.shared.pending;if(R!==null){d.shared.pending=null;var B=R,W=B.next;B.next=null,E===null?y=W:E.next=W,E=B;var ie=n.alternate;ie!==null&&(ie=ie.updateQueue,R=ie.lastBaseUpdate,R!==E&&(R===null?ie.firstBaseUpdate=W:R.next=W,ie.lastBaseUpdate=B))}if(y!==null){var ue=d.baseState;E=0,ie=W=B=null,R=y;do{var ee=R.lane&-536870913,se=ee!==R.lane;if(se?(nt&ee)===ee:(c&ee)===ee){ee!==0&&ee===Ro&&(jm=!0),ie!==null&&(ie=ie.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Se=n,Pe=R;ee=i;var wt=l;switch(Pe.tag){case 1:if(Se=Pe.payload,typeof Se=="function"){ue=Se.call(wt,ue,ee);break e}ue=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Pe.payload,ee=typeof Se=="function"?Se.call(wt,ue,ee):Se,ee==null)break e;ue=x({},ue,ee);break e;case 2:ja=!0}}ee=R.callback,ee!==null&&(n.flags|=64,se&&(n.flags|=8192),se=d.callbacks,se===null?d.callbacks=[ee]:se.push(ee))}else se={lane:ee,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ie===null?(W=ie=se,B=ue):ie=ie.next=se,E|=ee;if(R=R.next,R===null){if(R=d.shared.pending,R===null)break;se=R,R=se.next,se.next=null,d.lastBaseUpdate=se,d.shared.pending=null}}while(!0);ie===null&&(B=ue),d.baseState=B,d.firstBaseUpdate=W,d.lastBaseUpdate=ie,y===null&&(d.shared.lanes=0),qa|=E,n.lanes=E,n.memoizedState=ue}}function Cv(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function Rv(n,i){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)Cv(l[n],i)}var jo=P(null),Fh=P(0);function Iv(n,i){n=aa,he(Fh,n),he(jo,i),aa=n|i.baseLanes}function Lm(){he(Fh,aa),he(jo,jo.current)}function km(){aa=Fh.current,Y(jo),Y(Fh)}var Yr=P(null),xs=null;function Ma(n){var i=n.alternate;he(hn,hn.current&1),he(Yr,n),xs===null&&(i===null||jo.current!==null||i.memoizedState!==null)&&(xs=n)}function Mm(n){he(hn,hn.current),he(Yr,n),xs===null&&(xs=n)}function Ov(n){n.tag===22?(he(hn,hn.current),he(Yr,n),xs===null&&(xs=n)):Va()}function Va(){he(hn,hn.current),he(Yr,Yr.current)}function Xr(n){Y(Yr),xs===n&&(xs=null),Y(hn)}var hn=P(0);function Gh(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||zg(l)||Hg(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wi=0,Fe=null,Et=null,yn=null,$h=!1,Lo=!1,zl=!1,Kh=0,Qc=0,ko=null,$S=0;function an(){throw Error(s(321))}function Vm(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!Kr(n[l],i[l]))return!1;return!0}function Pm(n,i,l,c,d,y){return Wi=y,Fe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,z.H=n===null||n.memoizedState===null?gb:Jm,zl=!1,y=l(c,d),zl=!1,Lo&&(y=jv(i,l,c,d)),Dv(n),y}function Dv(n){z.H=Zc;var i=Et!==null&&Et.next!==null;if(Wi=0,yn=Et=Fe=null,$h=!1,Qc=0,ko=null,i)throw Error(s(300));n===null||vn||(n=n.dependencies,n!==null&&Vh(n)&&(vn=!0))}function jv(n,i,l,c){Fe=n;var d=0;do{if(Lo&&(ko=null),Qc=0,Lo=!1,25<=d)throw Error(s(301));if(d+=1,yn=Et=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}z.H=pb,y=i(l,c)}while(Lo);return y}function KS(){var n=z.H,i=n.useState()[0];return i=typeof i.then=="function"?Yc(i):i,n=n.useState()[0],(Et!==null?Et.memoizedState:null)!==n&&(Fe.flags|=1024),i}function Um(){var n=Kh!==0;return Kh=0,n}function qm(n,i,l){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~l}function Bm(n){if($h){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}$h=!1}Wi=0,yn=Et=Fe=null,Lo=!1,Qc=Kh=0,ko=null}function yr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Fe.memoizedState=yn=n:yn=yn.next=n,yn}function fn(){if(Et===null){var n=Fe.alternate;n=n!==null?n.memoizedState:null}else n=Et.next;var i=yn===null?Fe.memoizedState:yn.next;if(i!==null)yn=i,Et=n;else{if(n===null)throw Fe.alternate===null?Error(s(467)):Error(s(310));Et=n,n={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},yn===null?Fe.memoizedState=yn=n:yn=yn.next=n}return yn}function Qh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yc(n){var i=Qc;return Qc+=1,ko===null&&(ko=[]),n=Tv(ko,n,i),i=Fe,(yn===null?i.memoizedState:yn.next)===null&&(i=i.alternate,z.H=i===null||i.memoizedState===null?gb:Jm),n}function Yh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Yc(n);if(n.$$typeof===Z)return Fn(n)}throw Error(s(438,String(n)))}function zm(n){var i=null,l=Fe.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var c=Fe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Qh(),Fe.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(n),c=0;c<n;c++)l[c]=F;return i.index++,l}function Ji(n,i){return typeof i=="function"?i(n):i}function Xh(n){var i=fn();return Hm(i,Et,n)}function Hm(n,i,l){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=l;var d=n.baseQueue,y=c.pending;if(y!==null){if(d!==null){var E=d.next;d.next=y.next,y.next=E}i.baseQueue=d=y,c.pending=null}if(y=n.baseState,d===null)n.memoizedState=y;else{i=d.next;var R=E=null,B=null,W=i,ie=!1;do{var ue=W.lane&-536870913;if(ue!==W.lane?(nt&ue)===ue:(Wi&ue)===ue){var ee=W.revertLane;if(ee===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ue===Ro&&(ie=!0);else if((Wi&ee)===ee){W=W.next,ee===Ro&&(ie=!0);continue}else ue={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},B===null?(R=B=ue,E=y):B=B.next=ue,Fe.lanes|=ee,qa|=ee;ue=W.action,zl&&l(y,ue),y=W.hasEagerState?W.eagerState:l(y,ue)}else ee={lane:ue,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},B===null?(R=B=ee,E=y):B=B.next=ee,Fe.lanes|=ue,qa|=ue;W=W.next}while(W!==null&&W!==i);if(B===null?E=y:B.next=R,!Kr(y,n.memoizedState)&&(vn=!0,ie&&(l=Io,l!==null)))throw l;n.memoizedState=y,n.baseState=E,n.baseQueue=B,c.lastRenderedState=y}return d===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Fm(n){var i=fn(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=n;var c=l.dispatch,d=l.pending,y=i.memoizedState;if(d!==null){l.pending=null;var E=d=d.next;do y=n(y,E.action),E=E.next;while(E!==d);Kr(y,i.memoizedState)||(vn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),l.lastRenderedState=y}return[y,c]}function Lv(n,i,l){var c=Fe,d=fn(),y=ot;if(y){if(l===void 0)throw Error(s(407));l=l()}else l=i();var E=!Kr((Et||d).memoizedState,l);if(E&&(d.memoizedState=l,vn=!0),d=d.queue,Km(Vv.bind(null,c,d,n),[n]),d.getSnapshot!==i||E||yn!==null&&yn.memoizedState.tag&1){if(c.flags|=2048,Mo(9,{destroy:void 0},Mv.bind(null,c,d,l,i),null),Ct===null)throw Error(s(349));y||(Wi&127)!==0||kv(c,i,l)}return l}function kv(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=Fe.updateQueue,i===null?(i=Qh(),Fe.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function Mv(n,i,l,c){i.value=l,i.getSnapshot=c,Pv(i)&&Uv(n)}function Vv(n,i,l){return l(function(){Pv(i)&&Uv(n)})}function Pv(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!Kr(n,l)}catch{return!0}}function Uv(n){var i=jl(n,2);i!==null&&jr(i,n,2)}function Gm(n){var i=yr();if(typeof n=="function"){var l=n;if(n=l(),zl){wn(!0);try{l()}finally{wn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:n},i}function qv(n,i,l,c){return n.baseState=l,Hm(n,Et,typeof c=="function"?c:Ji)}function QS(n,i,l,c,d){if(Jh(n))throw Error(s(485));if(n=i.action,n!==null){var y={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};z.T!==null?l(!0):y.isTransition=!1,c(y),l=i.pending,l===null?(y.next=i.pending=y,Bv(i,y)):(y.next=l.next,i.pending=l.next=y)}}function Bv(n,i){var l=i.action,c=i.payload,d=n.state;if(i.isTransition){var y=z.T,E={};z.T=E;try{var R=l(d,c),B=z.S;B!==null&&B(E,R),zv(n,i,R)}catch(W){$m(n,i,W)}finally{y!==null&&E.types!==null&&(y.types=E.types),z.T=y}}else try{y=l(d,c),zv(n,i,y)}catch(W){$m(n,i,W)}}function zv(n,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Hv(n,i,c)},function(c){return $m(n,i,c)}):Hv(n,i,l)}function Hv(n,i,l){i.status="fulfilled",i.value=l,Fv(i),n.state=l,i=n.pending,i!==null&&(l=i.next,l===i?n.pending=null:(l=l.next,i.next=l,Bv(n,l)))}function $m(n,i,l){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=l,Fv(i),i=i.next;while(i!==c)}n.action=null}function Fv(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Gv(n,i){return i}function $v(n,i){if(ot){var l=Ct.formState;if(l!==null){e:{var c=Fe;if(ot){if(Pt){t:{for(var d=Pt,y=_s;d.nodeType!==8;){if(!y){d=null;break t}if(d=Es(d.nextSibling),d===null){d=null;break t}}y=d.data,d=y==="F!"||y==="F"?d:null}if(d){Pt=Es(d.nextSibling),c=d.data==="F!";break e}}Oa(c)}c=!1}c&&(i=l[0])}}return l=yr(),l.memoizedState=l.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gv,lastRenderedState:i},l.queue=c,l=hb.bind(null,Fe,c),c.dispatch=l,c=Gm(!1),y=Wm.bind(null,Fe,!1,c.queue),c=yr(),d={state:i,dispatch:null,action:n,pending:null},c.queue=d,l=QS.bind(null,Fe,d,y,l),d.dispatch=l,c.memoizedState=n,[i,l,!1]}function Kv(n){var i=fn();return Qv(i,Et,n)}function Qv(n,i,l){if(i=Hm(n,i,Gv)[0],n=Xh(Ji)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Yc(i)}catch(E){throw E===Oo?qh:E}else c=i;i=fn();var d=i.queue,y=d.dispatch;return l!==i.memoizedState&&(Fe.flags|=2048,Mo(9,{destroy:void 0},YS.bind(null,d,l),null)),[c,y,n]}function YS(n,i){n.action=i}function Yv(n){var i=fn(),l=Et;if(l!==null)return Qv(i,l,n);fn(),i=i.memoizedState,l=fn();var c=l.queue.dispatch;return l.memoizedState=n,[i,c,!1]}function Mo(n,i,l,c){return n={tag:n,create:l,deps:c,inst:i,next:null},i=Fe.updateQueue,i===null&&(i=Qh(),Fe.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=n.next=n:(c=l.next,l.next=n,n.next=c,i.lastEffect=n),n}function Xv(){return fn().memoizedState}function Zh(n,i,l,c){var d=yr();Fe.flags|=n,d.memoizedState=Mo(1|i,{destroy:void 0},l,c===void 0?null:c)}function Wh(n,i,l,c){var d=fn();c=c===void 0?null:c;var y=d.memoizedState.inst;Et!==null&&c!==null&&Vm(c,Et.memoizedState.deps)?d.memoizedState=Mo(i,y,l,c):(Fe.flags|=n,d.memoizedState=Mo(1|i,y,l,c))}function Zv(n,i){Zh(8390656,8,n,i)}function Km(n,i){Wh(2048,8,n,i)}function XS(n){Fe.flags|=4;var i=Fe.updateQueue;if(i===null)i=Qh(),Fe.updateQueue=i,i.events=[n];else{var l=i.events;l===null?i.events=[n]:l.push(n)}}function Wv(n){var i=fn().memoizedState;return XS({ref:i,nextImpl:n}),function(){if((gt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Jv(n,i){return Wh(4,2,n,i)}function eb(n,i){return Wh(4,4,n,i)}function tb(n,i){if(typeof i=="function"){n=n();var l=i(n);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function nb(n,i,l){l=l!=null?l.concat([n]):null,Wh(4,4,tb.bind(null,i,n),l)}function Qm(){}function rb(n,i){var l=fn();i=i===void 0?null:i;var c=l.memoizedState;return i!==null&&Vm(i,c[1])?c[0]:(l.memoizedState=[n,i],n)}function sb(n,i){var l=fn();i=i===void 0?null:i;var c=l.memoizedState;if(i!==null&&Vm(i,c[1]))return c[0];if(c=n(),zl){wn(!0);try{n()}finally{wn(!1)}}return l.memoizedState=[c,i],c}function Ym(n,i,l){return l===void 0||(Wi&1073741824)!==0&&(nt&261930)===0?n.memoizedState=i:(n.memoizedState=l,n=a1(),Fe.lanes|=n,qa|=n,l)}function ib(n,i,l,c){return Kr(l,i)?l:jo.current!==null?(n=Ym(n,l,c),Kr(n,i)||(vn=!0),n):(Wi&42)===0||(Wi&1073741824)!==0&&(nt&261930)===0?(vn=!0,n.memoizedState=l):(n=a1(),Fe.lanes|=n,qa|=n,i)}function ab(n,i,l,c,d){var y=J.p;J.p=y!==0&&8>y?y:8;var E=z.T,R={};z.T=R,Wm(n,!1,i,l);try{var B=d(),W=z.S;if(W!==null&&W(R,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ie=GS(B,c);Xc(n,i,ie,Jr(n))}else Xc(n,i,c,Jr(n))}catch(ue){Xc(n,i,{then:function(){},status:"rejected",reason:ue},Jr())}finally{J.p=y,E!==null&&R.types!==null&&(E.types=R.types),z.T=E}}function ZS(){}function Xm(n,i,l,c){if(n.tag!==5)throw Error(s(476));var d=lb(n).queue;ab(n,d,i,ce,l===null?ZS:function(){return ob(n),l(c)})}function lb(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:ce},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:l},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function ob(n){var i=lb(n);i.next===null&&(i=n.alternate.memoizedState),Xc(n,i.next.queue,{},Jr())}function Zm(){return Fn(du)}function cb(){return fn().memoizedState}function ub(){return fn().memoizedState}function WS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var l=Jr();n=La(l);var c=ka(i,n,l);c!==null&&(jr(c,i,l),Gc(c,i,l)),i={cache:Sm()},n.payload=i;return}i=i.return}}function JS(n,i,l){var c=Jr();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Jh(n)?fb(i,l):(l=gm(n,i,l,c),l!==null&&(jr(l,n,c),mb(l,i,c)))}function hb(n,i,l){var c=Jr();Xc(n,i,l,c)}function Xc(n,i,l,c){var d={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Jh(n))fb(i,d);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var E=i.lastRenderedState,R=y(E,l);if(d.hasEagerState=!0,d.eagerState=R,Kr(R,E))return jh(n,i,d,0),Ct===null&&Dh(),!1}catch{}finally{}if(l=gm(n,i,d,c),l!==null)return jr(l,n,c),mb(l,i,c),!0}return!1}function Wm(n,i,l,c){if(c={lane:2,revertLane:Ig(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Jh(n)){if(i)throw Error(s(479))}else i=gm(n,l,c,2),i!==null&&jr(i,n,2)}function Jh(n){var i=n.alternate;return n===Fe||i!==null&&i===Fe}function fb(n,i){Lo=$h=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function mb(n,i,l){if((l&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,l|=c,i.lanes=l,Ui(n,l)}}var Zc={readContext:Fn,use:Yh,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};Zc.useEffectEvent=an;var gb={readContext:Fn,use:Yh,useCallback:function(n,i){return yr().memoizedState=[n,i===void 0?null:i],n},useContext:Fn,useEffect:Zv,useImperativeHandle:function(n,i,l){l=l!=null?l.concat([n]):null,Zh(4194308,4,tb.bind(null,i,n),l)},useLayoutEffect:function(n,i){return Zh(4194308,4,n,i)},useInsertionEffect:function(n,i){Zh(4,2,n,i)},useMemo:function(n,i){var l=yr();i=i===void 0?null:i;var c=n();if(zl){wn(!0);try{n()}finally{wn(!1)}}return l.memoizedState=[c,i],c},useReducer:function(n,i,l){var c=yr();if(l!==void 0){var d=l(i);if(zl){wn(!0);try{l(i)}finally{wn(!1)}}}else d=i;return c.memoizedState=c.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},c.queue=n,n=n.dispatch=JS.bind(null,Fe,n),[c.memoizedState,n]},useRef:function(n){var i=yr();return n={current:n},i.memoizedState=n},useState:function(n){n=Gm(n);var i=n.queue,l=hb.bind(null,Fe,i);return i.dispatch=l,[n.memoizedState,l]},useDebugValue:Qm,useDeferredValue:function(n,i){var l=yr();return Ym(l,n,i)},useTransition:function(){var n=Gm(!1);return n=ab.bind(null,Fe,n.queue,!0,!1),yr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,l){var c=Fe,d=yr();if(ot){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),Ct===null)throw Error(s(349));(nt&127)!==0||kv(c,i,l)}d.memoizedState=l;var y={value:l,getSnapshot:i};return d.queue=y,Zv(Vv.bind(null,c,y,n),[n]),c.flags|=2048,Mo(9,{destroy:void 0},Mv.bind(null,c,y,l,i),null),l},useId:function(){var n=yr(),i=Ct.identifierPrefix;if(ot){var l=gi,c=mi;l=(c&~(1<<32-Ot(c)-1)).toString(32)+l,i="_"+i+"R_"+l,l=Kh++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=$S++,i="_"+i+"r_"+l.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Zm,useFormState:$v,useActionState:$v,useOptimistic:function(n){var i=yr();i.memoizedState=i.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=Wm.bind(null,Fe,!0,l),l.dispatch=i,[n,i]},useMemoCache:zm,useCacheRefresh:function(){return yr().memoizedState=WS.bind(null,Fe)},useEffectEvent:function(n){var i=yr(),l={impl:n};return i.memoizedState=l,function(){if((gt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Jm={readContext:Fn,use:Yh,useCallback:rb,useContext:Fn,useEffect:Km,useImperativeHandle:nb,useInsertionEffect:Jv,useLayoutEffect:eb,useMemo:sb,useReducer:Xh,useRef:Xv,useState:function(){return Xh(Ji)},useDebugValue:Qm,useDeferredValue:function(n,i){var l=fn();return ib(l,Et.memoizedState,n,i)},useTransition:function(){var n=Xh(Ji)[0],i=fn().memoizedState;return[typeof n=="boolean"?n:Yc(n),i]},useSyncExternalStore:Lv,useId:cb,useHostTransitionStatus:Zm,useFormState:Kv,useActionState:Kv,useOptimistic:function(n,i){var l=fn();return qv(l,Et,n,i)},useMemoCache:zm,useCacheRefresh:ub};Jm.useEffectEvent=Wv;var pb={readContext:Fn,use:Yh,useCallback:rb,useContext:Fn,useEffect:Km,useImperativeHandle:nb,useInsertionEffect:Jv,useLayoutEffect:eb,useMemo:sb,useReducer:Fm,useRef:Xv,useState:function(){return Fm(Ji)},useDebugValue:Qm,useDeferredValue:function(n,i){var l=fn();return Et===null?Ym(l,n,i):ib(l,Et.memoizedState,n,i)},useTransition:function(){var n=Fm(Ji)[0],i=fn().memoizedState;return[typeof n=="boolean"?n:Yc(n),i]},useSyncExternalStore:Lv,useId:cb,useHostTransitionStatus:Zm,useFormState:Yv,useActionState:Yv,useOptimistic:function(n,i){var l=fn();return Et!==null?qv(l,Et,n,i):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:zm,useCacheRefresh:ub};pb.useEffectEvent=Wv;function eg(n,i,l,c){i=n.memoizedState,l=l(c,i),l=l==null?i:x({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var tg={enqueueSetState:function(n,i,l){n=n._reactInternals;var c=Jr(),d=La(c);d.payload=i,l!=null&&(d.callback=l),i=ka(n,d,c),i!==null&&(jr(i,n,c),Gc(i,n,c))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var c=Jr(),d=La(c);d.tag=1,d.payload=i,l!=null&&(d.callback=l),i=ka(n,d,c),i!==null&&(jr(i,n,c),Gc(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=Jr(),c=La(l);c.tag=2,i!=null&&(c.callback=i),i=ka(n,c,l),i!==null&&(jr(i,n,l),Gc(i,n,l))}};function yb(n,i,l,c,d,y,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,y,E):i.prototype&&i.prototype.isPureReactComponent?!Vc(l,c)||!Vc(d,y):!0}function vb(n,i,l,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,c),i.state!==n&&tg.enqueueReplaceState(i,i.state,null)}function Hl(n,i){var l=i;if("ref"in i){l={};for(var c in i)c!=="ref"&&(l[c]=i[c])}if(n=n.defaultProps){l===i&&(l=x({},l));for(var d in n)l[d]===void 0&&(l[d]=n[d])}return l}function bb(n){Oh(n)}function _b(n){console.error(n)}function xb(n){Oh(n)}function ef(n,i){try{var l=n.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Eb(n,i,l){try{var c=n.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function ng(n,i,l){return l=La(l),l.tag=3,l.payload={element:null},l.callback=function(){ef(n,i)},l}function Tb(n){return n=La(n),n.tag=3,n}function wb(n,i,l,c){var d=l.type.getDerivedStateFromError;if(typeof d=="function"){var y=c.value;n.payload=function(){return d(y)},n.callback=function(){Eb(i,l,c)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Eb(i,l,c),typeof d!="function"&&(Ba===null?Ba=new Set([this]):Ba.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function eN(n,i,l,c,d){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=l.alternate,i!==null&&Co(i,l,d,!0),l=Yr.current,l!==null){switch(l.tag){case 31:case 13:return xs===null?df():l.alternate===null&&ln===0&&(ln=3),l.flags&=-257,l.flags|=65536,l.lanes=d,c===Bh?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([c]):i.add(c),Ng(n,c,d)),!1;case 22:return l.flags|=65536,c===Bh?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([c]):l.add(c)),Ng(n,c,d)),!1}throw Error(s(435,l.tag))}return Ng(n,c,d),df(),!1}if(ot)return i=Yr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,c!==xm&&(n=Error(s(422),{cause:c}),qc(ys(n,l)))):(c!==xm&&(i=Error(s(423),{cause:c}),qc(ys(i,l))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,c=ys(c,l),d=ng(n.stateNode,c,d),Dm(n,d),ln!==4&&(ln=2)),!1;var y=Error(s(520),{cause:c});if(y=ys(y,l),iu===null?iu=[y]:iu.push(y),ln!==4&&(ln=2),i===null)return!0;c=ys(c,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,n=d&-d,l.lanes|=n,n=ng(l.stateNode,c,n),Dm(l,n),!1;case 1:if(i=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ba===null||!Ba.has(y))))return l.flags|=65536,d&=-d,l.lanes|=d,d=Tb(d),wb(d,n,l,c),Dm(l,d),!1}l=l.return}while(l!==null);return!1}var rg=Error(s(461)),vn=!1;function Gn(n,i,l,c){i.child=n===null?Nv(i,null,l,c):Bl(i,n.child,l,c)}function Ab(n,i,l,c,d){l=l.render;var y=i.ref;if("ref"in c){var E={};for(var R in c)R!=="ref"&&(E[R]=c[R])}else E=c;return Vl(i),c=Pm(n,i,l,E,y,d),R=Um(),n!==null&&!vn?(qm(n,i,d),ea(n,i,d)):(ot&&R&&bm(i),i.flags|=1,Gn(n,i,c,d),i.child)}function Sb(n,i,l,c,d){if(n===null){var y=l.type;return typeof y=="function"&&!pm(y)&&y.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=y,Nb(n,i,y,c,d)):(n=kh(l.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(y=n.child,!hg(n,d)){var E=y.memoizedProps;if(l=l.compare,l=l!==null?l:Vc,l(E,c)&&n.ref===i.ref)return ea(n,i,d)}return i.flags|=1,n=Qi(y,c),n.ref=i.ref,n.return=i,i.child=n}function Nb(n,i,l,c,d){if(n!==null){var y=n.memoizedProps;if(Vc(y,c)&&n.ref===i.ref)if(vn=!1,i.pendingProps=c=y,hg(n,d))(n.flags&131072)!==0&&(vn=!0);else return i.lanes=n.lanes,ea(n,i,d)}return sg(n,i,l,c,d)}function Cb(n,i,l,c){var d=c.children,y=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,n!==null){for(c=i.child=n.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;c=d&~y}else c=0,i.child=null;return Rb(n,i,y,l,c)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Uh(i,y!==null?y.cachePool:null),y!==null?Iv(i,y):Lm(),Ov(i);else return c=i.lanes=536870912,Rb(n,i,y!==null?y.baseLanes|l:l,l,c)}else y!==null?(Uh(i,y.cachePool),Iv(i,y),Va(),i.memoizedState=null):(n!==null&&Uh(i,null),Lm(),Va());return Gn(n,i,d,l),i.child}function Wc(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Rb(n,i,l,c,d){var y=Cm();return y=y===null?null:{parent:pn._currentValue,pool:y},i.memoizedState={baseLanes:l,cachePool:y},n!==null&&Uh(i,null),Lm(),Ov(i),n!==null&&Co(n,i,c,!0),i.childLanes=d,null}function tf(n,i){return i=rf({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Ib(n,i,l){return Bl(i,n.child,null,l),n=tf(i,i.pendingProps),n.flags|=2,Xr(i),i.memoizedState=null,n}function tN(n,i,l){var c=i.pendingProps,d=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(ot){if(c.mode==="hidden")return n=tf(i,c),i.lanes=536870912,Wc(null,n);if(Mm(i),(n=Pt)?(n=z1(n,_s),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ra!==null?{id:mi,overflow:gi}:null,retryLane:536870912,hydrationErrors:null},l=fv(n),l.return=i,i.child=l,Hn=i,Pt=null)):n=null,n===null)throw Oa(i);return i.lanes=536870912,null}return tf(i,c)}var y=n.memoizedState;if(y!==null){var E=y.dehydrated;if(Mm(i),d)if(i.flags&256)i.flags&=-257,i=Ib(n,i,l);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(vn||Co(n,i,l,!1),d=(l&n.childLanes)!==0,vn||d){if(c=Ct,c!==null&&(E=qi(c,l),E!==0&&E!==y.retryLane))throw y.retryLane=E,jl(n,E),jr(c,n,E),rg;df(),i=Ib(n,i,l)}else n=y.treeContext,Pt=Es(E.nextSibling),Hn=i,ot=!0,Ia=null,_s=!1,n!==null&&gv(i,n),i=tf(i,c),i.flags|=4096;return i}return n=Qi(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function nf(n,i){var l=i.ref;if(l===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(n===null||n.ref!==l)&&(i.flags|=4194816)}}function sg(n,i,l,c,d){return Vl(i),l=Pm(n,i,l,c,void 0,d),c=Um(),n!==null&&!vn?(qm(n,i,d),ea(n,i,d)):(ot&&c&&bm(i),i.flags|=1,Gn(n,i,l,d),i.child)}function Ob(n,i,l,c,d,y){return Vl(i),i.updateQueue=null,l=jv(i,c,l,d),Dv(n),c=Um(),n!==null&&!vn?(qm(n,i,y),ea(n,i,y)):(ot&&c&&bm(i),i.flags|=1,Gn(n,i,l,y),i.child)}function Db(n,i,l,c,d){if(Vl(i),i.stateNode===null){var y=wo,E=l.contextType;typeof E=="object"&&E!==null&&(y=Fn(E)),y=new l(c,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=tg,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=c,y.state=i.memoizedState,y.refs={},Im(i),E=l.contextType,y.context=typeof E=="object"&&E!==null?Fn(E):wo,y.state=i.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(eg(i,l,E,c),y.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&tg.enqueueReplaceState(y,y.state,null),Kc(i,c,y,d),$c(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){y=i.stateNode;var R=i.memoizedProps,B=Hl(l,R);y.props=B;var W=y.context,ie=l.contextType;E=wo,typeof ie=="object"&&ie!==null&&(E=Fn(ie));var ue=l.getDerivedStateFromProps;ie=typeof ue=="function"||typeof y.getSnapshotBeforeUpdate=="function",R=i.pendingProps!==R,ie||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(R||W!==E)&&vb(i,y,c,E),ja=!1;var ee=i.memoizedState;y.state=ee,Kc(i,c,y,d),$c(),W=i.memoizedState,R||ee!==W||ja?(typeof ue=="function"&&(eg(i,l,ue,c),W=i.memoizedState),(B=ja||yb(i,l,B,c,ee,W,E))?(ie||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=W),y.props=c,y.state=W,y.context=E,c=B):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{y=i.stateNode,Om(n,i),E=i.memoizedProps,ie=Hl(l,E),y.props=ie,ue=i.pendingProps,ee=y.context,W=l.contextType,B=wo,typeof W=="object"&&W!==null&&(B=Fn(W)),R=l.getDerivedStateFromProps,(W=typeof R=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==ue||ee!==B)&&vb(i,y,c,B),ja=!1,ee=i.memoizedState,y.state=ee,Kc(i,c,y,d),$c();var se=i.memoizedState;E!==ue||ee!==se||ja||n!==null&&n.dependencies!==null&&Vh(n.dependencies)?(typeof R=="function"&&(eg(i,l,R,c),se=i.memoizedState),(ie=ja||yb(i,l,ie,c,ee,se,B)||n!==null&&n.dependencies!==null&&Vh(n.dependencies))?(W||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,se,B),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,se,B)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===n.memoizedProps&&ee===n.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&ee===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=se),y.props=c,y.state=se,y.context=B,c=ie):(typeof y.componentDidUpdate!="function"||E===n.memoizedProps&&ee===n.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&ee===n.memoizedState||(i.flags|=1024),c=!1)}return y=c,nf(n,i),c=(i.flags&128)!==0,y||c?(y=i.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,n!==null&&c?(i.child=Bl(i,n.child,null,d),i.child=Bl(i,null,l,d)):Gn(n,i,l,d),i.memoizedState=y.state,n=i.child):n=ea(n,i,d),n}function jb(n,i,l,c){return kl(),i.flags|=256,Gn(n,i,l,c),i.child}var ig={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ag(n){return{baseLanes:n,cachePool:xv()}}function lg(n,i,l){return n=n!==null?n.childLanes&~l:0,i&&(n|=Wr),n}function Lb(n,i,l){var c=i.pendingProps,d=!1,y=(i.flags&128)!==0,E;if((E=y)||(E=n!==null&&n.memoizedState===null?!1:(hn.current&2)!==0),E&&(d=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,n===null){if(ot){if(d?Ma(i):Va(),(n=Pt)?(n=z1(n,_s),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ra!==null?{id:mi,overflow:gi}:null,retryLane:536870912,hydrationErrors:null},l=fv(n),l.return=i,i.child=l,Hn=i,Pt=null)):n=null,n===null)throw Oa(i);return Hg(n)?i.lanes=32:i.lanes=536870912,null}var R=c.children;return c=c.fallback,d?(Va(),d=i.mode,R=rf({mode:"hidden",children:R},d),c=Ll(c,d,l,null),R.return=i,c.return=i,R.sibling=c,i.child=R,c=i.child,c.memoizedState=ag(l),c.childLanes=lg(n,E,l),i.memoizedState=ig,Wc(null,c)):(Ma(i),og(i,R))}var B=n.memoizedState;if(B!==null&&(R=B.dehydrated,R!==null)){if(y)i.flags&256?(Ma(i),i.flags&=-257,i=cg(n,i,l)):i.memoizedState!==null?(Va(),i.child=n.child,i.flags|=128,i=null):(Va(),R=c.fallback,d=i.mode,c=rf({mode:"visible",children:c.children},d),R=Ll(R,d,l,null),R.flags|=2,c.return=i,R.return=i,c.sibling=R,i.child=c,Bl(i,n.child,null,l),c=i.child,c.memoizedState=ag(l),c.childLanes=lg(n,E,l),i.memoizedState=ig,i=Wc(null,c));else if(Ma(i),Hg(R)){if(E=R.nextSibling&&R.nextSibling.dataset,E)var W=E.dgst;E=W,c=Error(s(419)),c.stack="",c.digest=E,qc({value:c,source:null,stack:null}),i=cg(n,i,l)}else if(vn||Co(n,i,l,!1),E=(l&n.childLanes)!==0,vn||E){if(E=Ct,E!==null&&(c=qi(E,l),c!==0&&c!==B.retryLane))throw B.retryLane=c,jl(n,c),jr(E,n,c),rg;zg(R)||df(),i=cg(n,i,l)}else zg(R)?(i.flags|=192,i.child=n.child,i=null):(n=B.treeContext,Pt=Es(R.nextSibling),Hn=i,ot=!0,Ia=null,_s=!1,n!==null&&gv(i,n),i=og(i,c.children),i.flags|=4096);return i}return d?(Va(),R=c.fallback,d=i.mode,B=n.child,W=B.sibling,c=Qi(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,W!==null?R=Qi(W,R):(R=Ll(R,d,l,null),R.flags|=2),R.return=i,c.return=i,c.sibling=R,i.child=c,Wc(null,c),c=i.child,R=n.child.memoizedState,R===null?R=ag(l):(d=R.cachePool,d!==null?(B=pn._currentValue,d=d.parent!==B?{parent:B,pool:B}:d):d=xv(),R={baseLanes:R.baseLanes|l,cachePool:d}),c.memoizedState=R,c.childLanes=lg(n,E,l),i.memoizedState=ig,Wc(n.child,c)):(Ma(i),l=n.child,n=l.sibling,l=Qi(l,{mode:"visible",children:c.children}),l.return=i,l.sibling=null,n!==null&&(E=i.deletions,E===null?(i.deletions=[n],i.flags|=16):E.push(n)),i.child=l,i.memoizedState=null,l)}function og(n,i){return i=rf({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function rf(n,i){return n=Qr(22,n,null,i),n.lanes=0,n}function cg(n,i,l){return Bl(i,n.child,null,l),n=og(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function kb(n,i,l){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),wm(n.return,i,l)}function ug(n,i,l,c,d,y){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:d,treeForkCount:y}:(E.isBackwards=i,E.rendering=null,E.renderingStartTime=0,E.last=c,E.tail=l,E.tailMode=d,E.treeForkCount=y)}function Mb(n,i,l){var c=i.pendingProps,d=c.revealOrder,y=c.tail;c=c.children;var E=hn.current,R=(E&2)!==0;if(R?(E=E&1|2,i.flags|=128):E&=1,he(hn,E),Gn(n,i,c,l),c=ot?Uc:0,!R&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&kb(n,l,i);else if(n.tag===19)kb(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(l=i.child,d=null;l!==null;)n=l.alternate,n!==null&&Gh(n)===null&&(d=l),l=l.sibling;l=d,l===null?(d=i.child,i.child=null):(d=l.sibling,l.sibling=null),ug(i,!1,d,l,y,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&Gh(n)===null){i.child=d;break}n=d.sibling,d.sibling=l,l=d,d=n}ug(i,!0,l,null,y,c);break;case"together":ug(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function ea(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),qa|=i.lanes,(l&i.childLanes)===0)if(n!==null){if(Co(n,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,l=Qi(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=Qi(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function hg(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Vh(n)))}function nN(n,i,l){switch(i.tag){case 3:Ie(i,i.stateNode.containerInfo),Da(i,pn,n.memoizedState.cache),kl();break;case 27:case 5:Qe(i);break;case 4:Ie(i,i.stateNode.containerInfo);break;case 10:Da(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Mm(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ma(i),i.flags|=128,null):(l&i.child.childLanes)!==0?Lb(n,i,l):(Ma(i),n=ea(n,i,l),n!==null?n.sibling:null);Ma(i);break;case 19:var d=(n.flags&128)!==0;if(c=(l&i.childLanes)!==0,c||(Co(n,i,l,!1),c=(l&i.childLanes)!==0),d){if(c)return Mb(n,i,l);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),he(hn,hn.current),c)break;return null;case 22:return i.lanes=0,Cb(n,i,l,i.pendingProps);case 24:Da(i,pn,n.memoizedState.cache)}return ea(n,i,l)}function Vb(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps)vn=!0;else{if(!hg(n,l)&&(i.flags&128)===0)return vn=!1,nN(n,i,l);vn=(n.flags&131072)!==0}else vn=!1,ot&&(i.flags&1048576)!==0&&mv(i,Uc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(n=Ul(i.elementType),i.type=n,typeof n=="function")pm(n)?(c=Hl(n,c),i.tag=1,i=Db(null,i,n,c,l)):(i.tag=0,i=sg(null,i,n,c,l));else{if(n!=null){var d=n.$$typeof;if(d===te){i.tag=11,i=Ab(null,i,n,c,l);break e}else if(d===M){i.tag=14,i=Sb(null,i,n,c,l);break e}}throw i=pe(n)||n,Error(s(306,i,""))}}return i;case 0:return sg(n,i,i.type,i.pendingProps,l);case 1:return c=i.type,d=Hl(c,i.pendingProps),Db(n,i,c,d,l);case 3:e:{if(Ie(i,i.stateNode.containerInfo),n===null)throw Error(s(387));c=i.pendingProps;var y=i.memoizedState;d=y.element,Om(n,i),Kc(i,c,null,l);var E=i.memoizedState;if(c=E.cache,Da(i,pn,c),c!==y.cache&&Am(i,[pn],l,!0),$c(),c=E.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=jb(n,i,c,l);break e}else if(c!==d){d=ys(Error(s(424)),i),qc(d),i=jb(n,i,c,l);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Pt=Es(n.firstChild),Hn=i,ot=!0,Ia=null,_s=!0,l=Nv(i,null,c,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(kl(),c===d){i=ea(n,i,l);break e}Gn(n,i,c,l)}i=i.child}return i;case 26:return nf(n,i),n===null?(l=Q1(i.type,null,i.pendingProps,null))?i.memoizedState=l:ot||(l=i.type,n=i.pendingProps,c=_f(we.current).createElement(l),c[Ft]=i,c[rn]=n,$n(c,l,n),Gt(c),i.stateNode=c):i.memoizedState=Q1(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Qe(i),n===null&&ot&&(c=i.stateNode=G1(i.type,i.pendingProps,we.current),Hn=i,_s=!0,d=Pt,Ga(i.type)?(Fg=d,Pt=Es(c.firstChild)):Pt=d),Gn(n,i,i.pendingProps.children,l),nf(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&ot&&((d=c=Pt)&&(c=DN(c,i.type,i.pendingProps,_s),c!==null?(i.stateNode=c,Hn=i,Pt=Es(c.firstChild),_s=!1,d=!0):d=!1),d||Oa(i)),Qe(i),d=i.type,y=i.pendingProps,E=n!==null?n.memoizedProps:null,c=y.children,Ug(d,y)?c=null:E!==null&&Ug(d,E)&&(i.flags|=32),i.memoizedState!==null&&(d=Pm(n,i,KS,null,null,l),du._currentValue=d),nf(n,i),Gn(n,i,c,l),i.child;case 6:return n===null&&ot&&((n=l=Pt)&&(l=jN(l,i.pendingProps,_s),l!==null?(i.stateNode=l,Hn=i,Pt=null,n=!0):n=!1),n||Oa(i)),null;case 13:return Lb(n,i,l);case 4:return Ie(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Bl(i,null,c,l):Gn(n,i,c,l),i.child;case 11:return Ab(n,i,i.type,i.pendingProps,l);case 7:return Gn(n,i,i.pendingProps,l),i.child;case 8:return Gn(n,i,i.pendingProps.children,l),i.child;case 12:return Gn(n,i,i.pendingProps.children,l),i.child;case 10:return c=i.pendingProps,Da(i,i.type,c.value),Gn(n,i,c.children,l),i.child;case 9:return d=i.type._context,c=i.pendingProps.children,Vl(i),d=Fn(d),c=c(d),i.flags|=1,Gn(n,i,c,l),i.child;case 14:return Sb(n,i,i.type,i.pendingProps,l);case 15:return Nb(n,i,i.type,i.pendingProps,l);case 19:return Mb(n,i,l);case 31:return tN(n,i,l);case 22:return Cb(n,i,l,i.pendingProps);case 24:return Vl(i),c=Fn(pn),n===null?(d=Cm(),d===null&&(d=Ct,y=Sm(),d.pooledCache=y,y.refCount++,y!==null&&(d.pooledCacheLanes|=l),d=y),i.memoizedState={parent:c,cache:d},Im(i),Da(i,pn,d)):((n.lanes&l)!==0&&(Om(n,i),Kc(i,null,null,l),$c()),d=n.memoizedState,y=i.memoizedState,d.parent!==c?(d={parent:c,cache:c},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Da(i,pn,c)):(c=y.cache,Da(i,pn,c),c!==d.cache&&Am(i,[pn],l,!0))),Gn(n,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ta(n){n.flags|=4}function fg(n,i,l,c,d){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(u1())n.flags|=8192;else throw ql=Bh,Rm}else n.flags&=-16777217}function Pb(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!J1(i))if(u1())n.flags|=8192;else throw ql=Bh,Rm}function sf(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?ii():536870912,n.lanes|=i,qo|=i)}function Jc(n,i){if(!ot)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ut(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,c=0;if(i)for(var d=n.child;d!==null;)l|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)l|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=l,i}function rN(n,i,l){var c=i.pendingProps;switch(_m(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(i),null;case 1:return Ut(i),null;case 3:return l=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Zi(pn),je(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(No(i)?ta(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Em())),Ut(i),null;case 26:var d=i.type,y=i.memoizedState;return n===null?(ta(i),y!==null?(Ut(i),Pb(i,y)):(Ut(i),fg(i,d,null,c,l))):y?y!==n.memoizedState?(ta(i),Ut(i),Pb(i,y)):(Ut(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&ta(i),Ut(i),fg(i,d,n,c,l)),null;case 27:if(Ze(i),l=we.current,d=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ta(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Ut(i),null}n=me.current,No(i)?pv(i):(n=G1(d,c,l),i.stateNode=n,ta(i))}return Ut(i),null;case 5:if(Ze(i),d=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ta(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Ut(i),null}if(y=me.current,No(i))pv(i);else{var E=_f(we.current);switch(y){case 1:y=E.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:y=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":y=E.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":y=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":y=E.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?E.createElement("select",{is:c.is}):E.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?E.createElement(d,{is:c.is}):E.createElement(d)}}y[Ft]=i,y[rn]=c;e:for(E=i.child;E!==null;){if(E.tag===5||E.tag===6)y.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===i)break e;for(;E.sibling===null;){if(E.return===null||E.return===i)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}i.stateNode=y;e:switch($n(y,d,c),d){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ta(i)}}return Ut(i),fg(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,l),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&ta(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(n=we.current,No(i)){if(n=i.stateNode,l=i.memoizedProps,c=null,d=Hn,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}n[Ft]=i,n=!!(n.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||L1(n.nodeValue,l)),n||Oa(i,!0)}else n=_f(n).createTextNode(c),n[Ft]=i,i.stateNode=n}return Ut(i),null;case 31:if(l=i.memoizedState,n===null||n.memoizedState!==null){if(c=No(i),l!==null){if(n===null){if(!c)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Ft]=i}else kl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ut(i),n=!1}else l=Em(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return i.flags&256?(Xr(i),i):(Xr(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Ut(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=No(i),c!==null&&c.dehydrated!==null){if(n===null){if(!d)throw Error(s(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[Ft]=i}else kl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ut(i),d=!1}else d=Em(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(Xr(i),i):(Xr(i),null)}return Xr(i),(i.flags&128)!==0?(i.lanes=l,i):(l=c!==null,n=n!==null&&n.memoizedState!==null,l&&(c=i.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==d&&(c.flags|=2048)),l!==n&&l&&(i.child.flags|=8192),sf(i,i.updateQueue),Ut(i),null);case 4:return je(),n===null&&Lg(i.stateNode.containerInfo),Ut(i),null;case 10:return Zi(i.type),Ut(i),null;case 19:if(Y(hn),c=i.memoizedState,c===null)return Ut(i),null;if(d=(i.flags&128)!==0,y=c.rendering,y===null)if(d)Jc(c,!1);else{if(ln!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(y=Gh(n),y!==null){for(i.flags|=128,Jc(c,!1),n=y.updateQueue,i.updateQueue=n,sf(i,n),i.subtreeFlags=0,n=l,l=i.child;l!==null;)hv(l,n),l=l.sibling;return he(hn,hn.current&1|2),ot&&Yi(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&It()>uf&&(i.flags|=128,d=!0,Jc(c,!1),i.lanes=4194304)}else{if(!d)if(n=Gh(y),n!==null){if(i.flags|=128,d=!0,n=n.updateQueue,i.updateQueue=n,sf(i,n),Jc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!ot)return Ut(i),null}else 2*It()-c.renderingStartTime>uf&&l!==536870912&&(i.flags|=128,d=!0,Jc(c,!1),i.lanes=4194304);c.isBackwards?(y.sibling=i.child,i.child=y):(n=c.last,n!==null?n.sibling=y:i.child=y,c.last=y)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=It(),n.sibling=null,l=hn.current,he(hn,d?l&1|2:l&1),ot&&Yi(i,c.treeForkCount),n):(Ut(i),null);case 22:case 23:return Xr(i),km(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(l&536870912)!==0&&(i.flags&128)===0&&(Ut(i),i.subtreeFlags&6&&(i.flags|=8192)):Ut(i),l=i.updateQueue,l!==null&&sf(i,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==l&&(i.flags|=2048),n!==null&&Y(Pl),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Zi(pn),Ut(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function sN(n,i){switch(_m(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Zi(pn),je(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Ze(i),null;case 31:if(i.memoizedState!==null){if(Xr(i),i.alternate===null)throw Error(s(340));kl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Xr(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));kl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Y(hn),null;case 4:return je(),null;case 10:return Zi(i.type),null;case 22:case 23:return Xr(i),km(),n!==null&&Y(Pl),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Zi(pn),null;case 25:return null;default:return null}}function Ub(n,i){switch(_m(i),i.tag){case 3:Zi(pn),je();break;case 26:case 27:case 5:Ze(i);break;case 4:je();break;case 31:i.memoizedState!==null&&Xr(i);break;case 13:Xr(i);break;case 19:Y(hn);break;case 10:Zi(i.type);break;case 22:case 23:Xr(i),km(),n!==null&&Y(Pl);break;case 24:Zi(pn)}}function eu(n,i){try{var l=i.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var d=c.next;l=d;do{if((l.tag&n)===n){c=void 0;var y=l.create,E=l.inst;c=y(),E.destroy=c}l=l.next}while(l!==d)}}catch(R){_t(i,i.return,R)}}function Pa(n,i,l){try{var c=i.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&n)===n){var E=c.inst,R=E.destroy;if(R!==void 0){E.destroy=void 0,d=i;var B=l,W=R;try{W()}catch(ie){_t(d,B,ie)}}}c=c.next}while(c!==y)}}catch(ie){_t(i,i.return,ie)}}function qb(n){var i=n.updateQueue;if(i!==null){var l=n.stateNode;try{Rv(i,l)}catch(c){_t(n,n.return,c)}}}function Bb(n,i,l){l.props=Hl(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(c){_t(n,i,c)}}function tu(n,i){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof l=="function"?n.refCleanup=l(c):l.current=c}}catch(d){_t(n,i,d)}}function pi(n,i){var l=n.ref,c=n.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(d){_t(n,i,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(d){_t(n,i,d)}else l.current=null}function zb(n){var i=n.type,l=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(d){_t(n,n.return,d)}}function dg(n,i,l){try{var c=n.stateNode;SN(c,n.type,l,i),c[rn]=i}catch(d){_t(n,n.return,d)}}function Hb(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ga(n.type)||n.tag===4}function mg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Hb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ga(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function gg(n,i,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(n),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=rr));else if(c!==4&&(c===27&&Ga(n.type)&&(l=n.stateNode,i=null),n=n.child,n!==null))for(gg(n,i,l),n=n.sibling;n!==null;)gg(n,i,l),n=n.sibling}function af(n,i,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(c!==4&&(c===27&&Ga(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(af(n,i,l),n=n.sibling;n!==null;)af(n,i,l),n=n.sibling}function Fb(n){var i=n.stateNode,l=n.memoizedProps;try{for(var c=n.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);$n(i,c,l),i[Ft]=n,i[rn]=l}catch(y){_t(n,n.return,y)}}var na=!1,bn=!1,pg=!1,Gb=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function iN(n,i){if(n=n.containerInfo,Vg=Nf,n=nv(n),cm(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var d=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var E=0,R=-1,B=-1,W=0,ie=0,ue=n,ee=null;t:for(;;){for(var se;ue!==l||d!==0&&ue.nodeType!==3||(R=E+d),ue!==y||c!==0&&ue.nodeType!==3||(B=E+c),ue.nodeType===3&&(E+=ue.nodeValue.length),(se=ue.firstChild)!==null;)ee=ue,ue=se;for(;;){if(ue===n)break t;if(ee===l&&++W===d&&(R=E),ee===y&&++ie===c&&(B=E),(se=ue.nextSibling)!==null)break;ue=ee,ee=ue.parentNode}ue=se}l=R===-1||B===-1?null:{start:R,end:B}}else l=null}l=l||{start:0,end:0}}else l=null;for(Pg={focusedElem:n,selectionRange:l},Nf=!1,Dn=i;Dn!==null;)if(i=Dn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Dn=n;else for(;Dn!==null;){switch(i=Dn,y=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)d=n[l],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,l=i,d=y.memoizedProps,y=y.memoizedState,c=l.stateNode;try{var Se=Hl(l.type,d);n=c.getSnapshotBeforeUpdate(Se,y),c.__reactInternalSnapshotBeforeUpdate=n}catch(Pe){_t(l,l.return,Pe)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,l=n.nodeType,l===9)Bg(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Bg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Dn=n;break}Dn=i.return}}function $b(n,i,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:sa(n,l),c&4&&eu(5,l);break;case 1:if(sa(n,l),c&4)if(n=l.stateNode,i===null)try{n.componentDidMount()}catch(E){_t(l,l.return,E)}else{var d=Hl(l.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(d,i,n.__reactInternalSnapshotBeforeUpdate)}catch(E){_t(l,l.return,E)}}c&64&&qb(l),c&512&&tu(l,l.return);break;case 3:if(sa(n,l),c&64&&(n=l.updateQueue,n!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Rv(n,i)}catch(E){_t(l,l.return,E)}}break;case 27:i===null&&c&4&&Fb(l);case 26:case 5:sa(n,l),i===null&&c&4&&zb(l),c&512&&tu(l,l.return);break;case 12:sa(n,l);break;case 31:sa(n,l),c&4&&Yb(n,l);break;case 13:sa(n,l),c&4&&Xb(n,l),c&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=mN.bind(null,l),LN(n,l))));break;case 22:if(c=l.memoizedState!==null||na,!c){i=i!==null&&i.memoizedState!==null||bn,d=na;var y=bn;na=c,(bn=i)&&!y?ia(n,l,(l.subtreeFlags&8772)!==0):sa(n,l),na=d,bn=y}break;case 30:break;default:sa(n,l)}}function Kb(n){var i=n.alternate;i!==null&&(n.alternate=null,Kb(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&ai(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Xt=null,Rr=!1;function ra(n,i,l){for(l=l.child;l!==null;)Qb(n,i,l),l=l.sibling}function Qb(n,i,l){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(ur,l)}catch{}switch(l.tag){case 26:bn||pi(l,i),ra(n,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:bn||pi(l,i);var c=Xt,d=Rr;Ga(l.type)&&(Xt=l.stateNode,Rr=!1),ra(n,i,l),uu(l.stateNode),Xt=c,Rr=d;break;case 5:bn||pi(l,i);case 6:if(c=Xt,d=Rr,Xt=null,ra(n,i,l),Xt=c,Rr=d,Xt!==null)if(Rr)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(l.stateNode)}catch(y){_t(l,i,y)}else try{Xt.removeChild(l.stateNode)}catch(y){_t(l,i,y)}break;case 18:Xt!==null&&(Rr?(n=Xt,q1(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),Qo(n)):q1(Xt,l.stateNode));break;case 4:c=Xt,d=Rr,Xt=l.stateNode.containerInfo,Rr=!0,ra(n,i,l),Xt=c,Rr=d;break;case 0:case 11:case 14:case 15:Pa(2,l,i),bn||Pa(4,l,i),ra(n,i,l);break;case 1:bn||(pi(l,i),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Bb(l,i,c)),ra(n,i,l);break;case 21:ra(n,i,l);break;case 22:bn=(c=bn)||l.memoizedState!==null,ra(n,i,l),bn=c;break;default:ra(n,i,l)}}function Yb(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Qo(n)}catch(l){_t(i,i.return,l)}}}function Xb(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Qo(n)}catch(l){_t(i,i.return,l)}}function aN(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Gb),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Gb),i;default:throw Error(s(435,n.tag))}}function lf(n,i){var l=aN(n);i.forEach(function(c){if(!l.has(c)){l.add(c);var d=gN.bind(null,n,c);c.then(d,d)}})}function Ir(n,i){var l=i.deletions;if(l!==null)for(var c=0;c<l.length;c++){var d=l[c],y=n,E=i,R=E;e:for(;R!==null;){switch(R.tag){case 27:if(Ga(R.type)){Xt=R.stateNode,Rr=!1;break e}break;case 5:Xt=R.stateNode,Rr=!1;break e;case 3:case 4:Xt=R.stateNode.containerInfo,Rr=!0;break e}R=R.return}if(Xt===null)throw Error(s(160));Qb(y,E,d),Xt=null,Rr=!1,y=d.alternate,y!==null&&(y.return=null),d.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Zb(i,n),i=i.sibling}var Hs=null;function Zb(n,i){var l=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ir(i,n),Or(n),c&4&&(Pa(3,n,n.return),eu(3,n),Pa(5,n,n.return));break;case 1:Ir(i,n),Or(n),c&512&&(bn||l===null||pi(l,l.return)),c&64&&na&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var d=Hs;if(Ir(i,n),Or(n),c&512&&(bn||l===null||pi(l,l.return)),c&4){var y=l!==null?l.memoizedState:null;if(c=n.memoizedState,l===null)if(c===null)if(n.stateNode===null){e:{c=n.type,l=n.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":y=d.getElementsByTagName("title")[0],(!y||y[wr]||y[Ft]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=d.createElement(c),d.head.insertBefore(y,d.querySelector("head > title"))),$n(y,c,l),y[Ft]=n,Gt(y),c=y;break e;case"link":var E=Z1("link","href",d).get(c+(l.href||""));if(E){for(var R=0;R<E.length;R++)if(y=E[R],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(R,1);break t}}y=d.createElement(c),$n(y,c,l),d.head.appendChild(y);break;case"meta":if(E=Z1("meta","content",d).get(c+(l.content||""))){for(R=0;R<E.length;R++)if(y=E[R],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(R,1);break t}}y=d.createElement(c),$n(y,c,l),d.head.appendChild(y);break;default:throw Error(s(468,c))}y[Ft]=n,Gt(y),c=y}n.stateNode=c}else W1(d,n.type,n.stateNode);else n.stateNode=X1(d,c,n.memoizedProps);else y!==c?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,c===null?W1(d,n.type,n.stateNode):X1(d,c,n.memoizedProps)):c===null&&n.stateNode!==null&&dg(n,n.memoizedProps,l.memoizedProps)}break;case 27:Ir(i,n),Or(n),c&512&&(bn||l===null||pi(l,l.return)),l!==null&&c&4&&dg(n,n.memoizedProps,l.memoizedProps);break;case 5:if(Ir(i,n),Or(n),c&512&&(bn||l===null||pi(l,l.return)),n.flags&32){d=n.stateNode;try{Kt(d,"")}catch(Se){_t(n,n.return,Se)}}c&4&&n.stateNode!=null&&(d=n.memoizedProps,dg(n,d,l!==null?l.memoizedProps:d)),c&1024&&(pg=!0);break;case 6:if(Ir(i,n),Or(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,l=n.stateNode;try{l.nodeValue=c}catch(Se){_t(n,n.return,Se)}}break;case 3:if(Tf=null,d=Hs,Hs=xf(i.containerInfo),Ir(i,n),Hs=d,Or(n),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Qo(i.containerInfo)}catch(Se){_t(n,n.return,Se)}pg&&(pg=!1,Wb(n));break;case 4:c=Hs,Hs=xf(n.stateNode.containerInfo),Ir(i,n),Or(n),Hs=c;break;case 12:Ir(i,n),Or(n);break;case 31:Ir(i,n),Or(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,lf(n,c)));break;case 13:Ir(i,n),Or(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(cf=It()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,lf(n,c)));break;case 22:d=n.memoizedState!==null;var B=l!==null&&l.memoizedState!==null,W=na,ie=bn;if(na=W||d,bn=ie||B,Ir(i,n),bn=ie,na=W,Or(n),c&8192)e:for(i=n.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(l===null||B||na||bn||Fl(n)),l=null,i=n;;){if(i.tag===5||i.tag===26){if(l===null){B=l=i;try{if(y=B.stateNode,d)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{R=B.stateNode;var ue=B.memoizedProps.style,ee=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;R.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Se){_t(B,B.return,Se)}}}else if(i.tag===6){if(l===null){B=i;try{B.stateNode.nodeValue=d?"":B.memoizedProps}catch(Se){_t(B,B.return,Se)}}}else if(i.tag===18){if(l===null){B=i;try{var se=B.stateNode;d?B1(se,!0):B1(B.stateNode,!1)}catch(Se){_t(B,B.return,Se)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,lf(n,l))));break;case 19:Ir(i,n),Or(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,lf(n,c)));break;case 30:break;case 21:break;default:Ir(i,n),Or(n)}}function Or(n){var i=n.flags;if(i&2){try{for(var l,c=n.return;c!==null;){if(Hb(c)){l=c;break}c=c.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var d=l.stateNode,y=mg(n);af(n,y,d);break;case 5:var E=l.stateNode;l.flags&32&&(Kt(E,""),l.flags&=-33);var R=mg(n);af(n,R,E);break;case 3:case 4:var B=l.stateNode.containerInfo,W=mg(n);gg(n,W,B);break;default:throw Error(s(161))}}catch(ie){_t(n,n.return,ie)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Wb(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Wb(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function sa(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)$b(n,i.alternate,i),i=i.sibling}function Fl(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Pa(4,i,i.return),Fl(i);break;case 1:pi(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&Bb(i,i.return,l),Fl(i);break;case 27:uu(i.stateNode);case 26:case 5:pi(i,i.return),Fl(i);break;case 22:i.memoizedState===null&&Fl(i);break;case 30:Fl(i);break;default:Fl(i)}n=n.sibling}}function ia(n,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,d=n,y=i,E=y.flags;switch(y.tag){case 0:case 11:case 15:ia(d,y,l),eu(4,y);break;case 1:if(ia(d,y,l),c=y,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(W){_t(c,c.return,W)}if(c=y,d=c.updateQueue,d!==null){var R=c.stateNode;try{var B=d.shared.hiddenCallbacks;if(B!==null)for(d.shared.hiddenCallbacks=null,d=0;d<B.length;d++)Cv(B[d],R)}catch(W){_t(c,c.return,W)}}l&&E&64&&qb(y),tu(y,y.return);break;case 27:Fb(y);case 26:case 5:ia(d,y,l),l&&c===null&&E&4&&zb(y),tu(y,y.return);break;case 12:ia(d,y,l);break;case 31:ia(d,y,l),l&&E&4&&Yb(d,y);break;case 13:ia(d,y,l),l&&E&4&&Xb(d,y);break;case 22:y.memoizedState===null&&ia(d,y,l),tu(y,y.return);break;case 30:break;default:ia(d,y,l)}i=i.sibling}}function yg(n,i){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Bc(l))}function vg(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Bc(n))}function Fs(n,i,l,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Jb(n,i,l,c),i=i.sibling}function Jb(n,i,l,c){var d=i.flags;switch(i.tag){case 0:case 11:case 15:Fs(n,i,l,c),d&2048&&eu(9,i);break;case 1:Fs(n,i,l,c);break;case 3:Fs(n,i,l,c),d&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Bc(n)));break;case 12:if(d&2048){Fs(n,i,l,c),n=i.stateNode;try{var y=i.memoizedProps,E=y.id,R=y.onPostCommit;typeof R=="function"&&R(E,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(B){_t(i,i.return,B)}}else Fs(n,i,l,c);break;case 31:Fs(n,i,l,c);break;case 13:Fs(n,i,l,c);break;case 23:break;case 22:y=i.stateNode,E=i.alternate,i.memoizedState!==null?y._visibility&2?Fs(n,i,l,c):nu(n,i):y._visibility&2?Fs(n,i,l,c):(y._visibility|=2,Vo(n,i,l,c,(i.subtreeFlags&10256)!==0||!1)),d&2048&&yg(E,i);break;case 24:Fs(n,i,l,c),d&2048&&vg(i.alternate,i);break;default:Fs(n,i,l,c)}}function Vo(n,i,l,c,d){for(d=d&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=n,E=i,R=l,B=c,W=E.flags;switch(E.tag){case 0:case 11:case 15:Vo(y,E,R,B,d),eu(8,E);break;case 23:break;case 22:var ie=E.stateNode;E.memoizedState!==null?ie._visibility&2?Vo(y,E,R,B,d):nu(y,E):(ie._visibility|=2,Vo(y,E,R,B,d)),d&&W&2048&&yg(E.alternate,E);break;case 24:Vo(y,E,R,B,d),d&&W&2048&&vg(E.alternate,E);break;default:Vo(y,E,R,B,d)}i=i.sibling}}function nu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=n,c=i,d=c.flags;switch(c.tag){case 22:nu(l,c),d&2048&&yg(c.alternate,c);break;case 24:nu(l,c),d&2048&&vg(c.alternate,c);break;default:nu(l,c)}i=i.sibling}}var ru=8192;function Po(n,i,l){if(n.subtreeFlags&ru)for(n=n.child;n!==null;)e1(n,i,l),n=n.sibling}function e1(n,i,l){switch(n.tag){case 26:Po(n,i,l),n.flags&ru&&n.memoizedState!==null&&$N(l,Hs,n.memoizedState,n.memoizedProps);break;case 5:Po(n,i,l);break;case 3:case 4:var c=Hs;Hs=xf(n.stateNode.containerInfo),Po(n,i,l),Hs=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=ru,ru=16777216,Po(n,i,l),ru=c):Po(n,i,l));break;default:Po(n,i,l)}}function t1(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function su(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var c=i[l];Dn=c,r1(c,n)}t1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)n1(n),n=n.sibling}function n1(n){switch(n.tag){case 0:case 11:case 15:su(n),n.flags&2048&&Pa(9,n,n.return);break;case 3:su(n);break;case 12:su(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,of(n)):su(n);break;default:su(n)}}function of(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var c=i[l];Dn=c,r1(c,n)}t1(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Pa(8,i,i.return),of(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,of(i));break;default:of(i)}n=n.sibling}}function r1(n,i){for(;Dn!==null;){var l=Dn;switch(l.tag){case 0:case 11:case 15:Pa(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Bc(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Dn=c;else e:for(l=n;Dn!==null;){c=Dn;var d=c.sibling,y=c.return;if(Kb(c),c===l){Dn=null;break e}if(d!==null){d.return=y,Dn=d;break e}Dn=y}}}var lN={getCacheForType:function(n){var i=Fn(pn),l=i.data.get(n);return l===void 0&&(l=n(),i.data.set(n,l)),l},cacheSignal:function(){return Fn(pn).controller.signal}},oN=typeof WeakMap=="function"?WeakMap:Map,gt=0,Ct=null,Je=null,nt=0,bt=0,Zr=null,Ua=!1,Uo=!1,bg=!1,aa=0,ln=0,qa=0,Gl=0,_g=0,Wr=0,qo=0,iu=null,Dr=null,xg=!1,cf=0,s1=0,uf=1/0,hf=null,Ba=null,Sn=0,za=null,Bo=null,la=0,Eg=0,Tg=null,i1=null,au=0,wg=null;function Jr(){return(gt&2)!==0&&nt!==0?nt&-nt:z.T!==null?Ig():nn()}function a1(){if(Wr===0)if((nt&536870912)===0||ot){var n=Ur;Ur<<=1,(Ur&3932160)===0&&(Ur=262144),Wr=n}else Wr=536870912;return n=Yr.current,n!==null&&(n.flags|=32),Wr}function jr(n,i,l){(n===Ct&&(bt===2||bt===9)||n.cancelPendingCommit!==null)&&(zo(n,0),Ha(n,nt,Wr,!1)),as(n,l),((gt&2)===0||n!==Ct)&&(n===Ct&&((gt&2)===0&&(Gl|=l),ln===4&&Ha(n,nt,Wr,!1)),yi(n))}function l1(n,i,l){if((gt&6)!==0)throw Error(s(327));var c=!l&&(i&127)===0&&(i&n.expiredLanes)===0||Mn(n,i),d=c?hN(n,i):Sg(n,i,!0),y=c;do{if(d===0){Uo&&!c&&Ha(n,i,0,!1);break}else{if(l=n.current.alternate,y&&!cN(l)){d=Sg(n,i,!1),y=!1;continue}if(d===2){if(y=i,n.errorRecoveryDisabledLanes&y)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var R=n;d=iu;var B=R.current.memoizedState.isDehydrated;if(B&&(zo(R,E).flags|=256),E=Sg(R,E,!1),E!==2){if(bg&&!B){R.errorRecoveryDisabledLanes|=y,Gl|=y,d=4;break e}y=Dr,Dr=d,y!==null&&(Dr===null?Dr=y:Dr.push.apply(Dr,y))}d=E}if(y=!1,d!==2)continue}}if(d===1){zo(n,0),Ha(n,i,0,!0);break}e:{switch(c=n,y=d,y){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ha(c,i,Wr,!Ua);break e;case 2:Dr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(d=cf+300-It(),10<d)){if(Ha(c,i,Wr,!Ua),Rn(c,0,!0)!==0)break e;la=i,c.timeoutHandle=P1(o1.bind(null,c,l,Dr,hf,xg,i,Wr,Gl,qo,Ua,y,"Throttled",-0,0),d);break e}o1(c,l,Dr,hf,xg,i,Wr,Gl,qo,Ua,y,null,-0,0)}}break}while(!0);yi(n)}function o1(n,i,l,c,d,y,E,R,B,W,ie,ue,ee,se){if(n.timeoutHandle=-1,ue=i.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rr},e1(i,y,ue);var Se=(y&62914560)===y?cf-It():(y&4194048)===y?s1-It():0;if(Se=KN(ue,Se),Se!==null){la=y,n.cancelPendingCommit=Se(p1.bind(null,n,i,y,l,c,d,E,R,B,ie,ue,null,ee,se)),Ha(n,y,E,!W);return}}p1(n,i,y,l,c,d,E,R,B)}function cN(n){for(var i=n;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var d=l[c],y=d.getSnapshot;d=d.value;try{if(!Kr(y(),d))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ha(n,i,l,c){i&=~_g,i&=~Gl,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var d=i;0<d;){var y=31-Ot(d),E=1<<y;c[y]=-1,d&=~E}l!==0&&Ls(n,l,i)}function ff(){return(gt&6)===0?(lu(0),!1):!0}function Ag(){if(Je!==null){if(bt===0)var n=Je.return;else n=Je,Xi=Ml=null,Bm(n),Do=null,Hc=0,n=Je;for(;n!==null;)Ub(n.alternate,n),n=n.return;Je=null}}function zo(n,i){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,RN(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),la=0,Ag(),Ct=n,Je=l=Qi(n.current,null),nt=i,bt=0,Zr=null,Ua=!1,Uo=Mn(n,i),bg=!1,qo=Wr=_g=Gl=qa=ln=0,Dr=iu=null,xg=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var d=31-Ot(c),y=1<<d;i|=n[d],c&=~y}return aa=i,Dh(),l}function c1(n,i){Fe=null,z.H=Zc,i===Oo||i===qh?(i=wv(),bt=3):i===Rm?(i=wv(),bt=4):bt=i===rg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Zr=i,Je===null&&(ln=1,ef(n,ys(i,n.current)))}function u1(){var n=Yr.current;return n===null?!0:(nt&4194048)===nt?xs===null:(nt&62914560)===nt||(nt&536870912)!==0?n===xs:!1}function h1(){var n=z.H;return z.H=Zc,n===null?Zc:n}function f1(){var n=z.A;return z.A=lN,n}function df(){ln=4,Ua||(nt&4194048)!==nt&&Yr.current!==null||(Uo=!0),(qa&134217727)===0&&(Gl&134217727)===0||Ct===null||Ha(Ct,nt,Wr,!1)}function Sg(n,i,l){var c=gt;gt|=2;var d=h1(),y=f1();(Ct!==n||nt!==i)&&(hf=null,zo(n,i)),i=!1;var E=ln;e:do try{if(bt!==0&&Je!==null){var R=Je,B=Zr;switch(bt){case 8:Ag(),E=6;break e;case 3:case 2:case 9:case 6:Yr.current===null&&(i=!0);var W=bt;if(bt=0,Zr=null,Ho(n,R,B,W),l&&Uo){E=0;break e}break;default:W=bt,bt=0,Zr=null,Ho(n,R,B,W)}}uN(),E=ln;break}catch(ie){c1(n,ie)}while(!0);return i&&n.shellSuspendCounter++,Xi=Ml=null,gt=c,z.H=d,z.A=y,Je===null&&(Ct=null,nt=0,Dh()),E}function uN(){for(;Je!==null;)d1(Je)}function hN(n,i){var l=gt;gt|=2;var c=h1(),d=f1();Ct!==n||nt!==i?(hf=null,uf=It()+500,zo(n,i)):Uo=Mn(n,i);e:do try{if(bt!==0&&Je!==null){i=Je;var y=Zr;t:switch(bt){case 1:bt=0,Zr=null,Ho(n,i,y,1);break;case 2:case 9:if(Ev(y)){bt=0,Zr=null,m1(i);break}i=function(){bt!==2&&bt!==9||Ct!==n||(bt=7),yi(n)},y.then(i,i);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:Ev(y)?(bt=0,Zr=null,m1(i)):(bt=0,Zr=null,Ho(n,i,y,7));break;case 5:var E=null;switch(Je.tag){case 26:E=Je.memoizedState;case 5:case 27:var R=Je;if(E?J1(E):R.stateNode.complete){bt=0,Zr=null;var B=R.sibling;if(B!==null)Je=B;else{var W=R.return;W!==null?(Je=W,mf(W)):Je=null}break t}}bt=0,Zr=null,Ho(n,i,y,5);break;case 6:bt=0,Zr=null,Ho(n,i,y,6);break;case 8:Ag(),ln=6;break e;default:throw Error(s(462))}}fN();break}catch(ie){c1(n,ie)}while(!0);return Xi=Ml=null,z.H=c,z.A=d,gt=l,Je!==null?0:(Ct=null,nt=0,Dh(),ln)}function fN(){for(;Je!==null&&!Ta();)d1(Je)}function d1(n){var i=Vb(n.alternate,n,aa);n.memoizedProps=n.pendingProps,i===null?mf(n):Je=i}function m1(n){var i=n,l=i.alternate;switch(i.tag){case 15:case 0:i=Ob(l,i,i.pendingProps,i.type,void 0,nt);break;case 11:i=Ob(l,i,i.pendingProps,i.type.render,i.ref,nt);break;case 5:Bm(i);default:Ub(l,i),i=Je=hv(i,aa),i=Vb(l,i,aa)}n.memoizedProps=n.pendingProps,i===null?mf(n):Je=i}function Ho(n,i,l,c){Xi=Ml=null,Bm(i),Do=null,Hc=0;var d=i.return;try{if(eN(n,d,i,l,nt)){ln=1,ef(n,ys(l,n.current)),Je=null;return}}catch(y){if(d!==null)throw Je=d,y;ln=1,ef(n,ys(l,n.current)),Je=null;return}i.flags&32768?(ot||c===1?n=!0:Uo||(nt&536870912)!==0?n=!1:(Ua=n=!0,(c===2||c===9||c===3||c===6)&&(c=Yr.current,c!==null&&c.tag===13&&(c.flags|=16384))),g1(i,n)):mf(i)}function mf(n){var i=n;do{if((i.flags&32768)!==0){g1(i,Ua);return}n=i.return;var l=rN(i.alternate,i,aa);if(l!==null){Je=l;return}if(i=i.sibling,i!==null){Je=i;return}Je=i=n}while(i!==null);ln===0&&(ln=5)}function g1(n,i){do{var l=sN(n.alternate,n);if(l!==null){l.flags&=32767,Je=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(n=n.sibling,n!==null)){Je=n;return}Je=n=l}while(n!==null);ln=6,Je=null}function p1(n,i,l,c,d,y,E,R,B){n.cancelPendingCommit=null;do gf();while(Sn!==0);if((gt&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(y=i.lanes|i.childLanes,y|=mm,qr(n,l,y,E,R,B),n===Ct&&(Je=Ct=null,nt=0),Bo=i,za=n,la=l,Eg=y,Tg=d,i1=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,pN(cr,function(){return x1(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=z.T,z.T=null,d=J.p,J.p=2,E=gt,gt|=4;try{iN(n,i,l)}finally{gt=E,J.p=d,z.T=c}}Sn=1,y1(),v1(),b1()}}function y1(){if(Sn===1){Sn=0;var n=za,i=Bo,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=z.T,z.T=null;var c=J.p;J.p=2;var d=gt;gt|=4;try{Zb(i,n);var y=Pg,E=nv(n.containerInfo),R=y.focusedElem,B=y.selectionRange;if(E!==R&&R&&R.ownerDocument&&tv(R.ownerDocument.documentElement,R)){if(B!==null&&cm(R)){var W=B.start,ie=B.end;if(ie===void 0&&(ie=W),"selectionStart"in R)R.selectionStart=W,R.selectionEnd=Math.min(ie,R.value.length);else{var ue=R.ownerDocument||document,ee=ue&&ue.defaultView||window;if(ee.getSelection){var se=ee.getSelection(),Se=R.textContent.length,Pe=Math.min(B.start,Se),wt=B.end===void 0?Pe:Math.min(B.end,Se);!se.extend&&Pe>wt&&(E=wt,wt=Pe,Pe=E);var K=ev(R,Pe),G=ev(R,wt);if(K&&G&&(se.rangeCount!==1||se.anchorNode!==K.node||se.anchorOffset!==K.offset||se.focusNode!==G.node||se.focusOffset!==G.offset)){var X=ue.createRange();X.setStart(K.node,K.offset),se.removeAllRanges(),Pe>wt?(se.addRange(X),se.extend(G.node,G.offset)):(X.setEnd(G.node,G.offset),se.addRange(X))}}}}for(ue=[],se=R;se=se.parentNode;)se.nodeType===1&&ue.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ue.length;R++){var ae=ue[R];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Nf=!!Vg,Pg=Vg=null}finally{gt=d,J.p=c,z.T=l}}n.current=i,Sn=2}}function v1(){if(Sn===2){Sn=0;var n=za,i=Bo,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=z.T,z.T=null;var c=J.p;J.p=2;var d=gt;gt|=4;try{$b(n,i.alternate,i)}finally{gt=d,J.p=c,z.T=l}}Sn=3}}function b1(){if(Sn===4||Sn===3){Sn=0,ji();var n=za,i=Bo,l=la,c=i1;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Sn=5:(Sn=0,Bo=za=null,_1(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Ba=null),hr(l),i=i.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(ur,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=z.T,d=J.p,J.p=2,z.T=null;try{for(var y=n.onRecoverableError,E=0;E<c.length;E++){var R=c[E];y(R.value,{componentStack:R.stack})}}finally{z.T=i,J.p=d}}(la&3)!==0&&gf(),yi(n),d=n.pendingLanes,(l&261930)!==0&&(d&42)!==0?n===wg?au++:(au=0,wg=n):au=0,lu(0)}}function _1(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Bc(i)))}function gf(){return y1(),v1(),b1(),x1()}function x1(){if(Sn!==5)return!1;var n=za,i=Eg;Eg=0;var l=hr(la),c=z.T,d=J.p;try{J.p=32>l?32:l,z.T=null,l=Tg,Tg=null;var y=za,E=la;if(Sn=0,Bo=za=null,la=0,(gt&6)!==0)throw Error(s(331));var R=gt;if(gt|=4,n1(y.current),Jb(y,y.current,E,l),gt=R,lu(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(ur,y)}catch{}return!0}finally{J.p=d,z.T=c,_1(n,i)}}function E1(n,i,l){i=ys(l,i),i=ng(n.stateNode,i,2),n=ka(n,i,2),n!==null&&(as(n,2),yi(n))}function _t(n,i,l){if(n.tag===3)E1(n,n,l);else for(;i!==null;){if(i.tag===3){E1(i,n,l);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ba===null||!Ba.has(c))){n=ys(l,n),l=Tb(2),c=ka(i,l,2),c!==null&&(wb(l,c,i,n),as(c,2),yi(c));break}}i=i.return}}function Ng(n,i,l){var c=n.pingCache;if(c===null){c=n.pingCache=new oN;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(l)||(bg=!0,d.add(l),n=dN.bind(null,n,i,l),i.then(n,n))}function dN(n,i,l){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,Ct===n&&(nt&l)===l&&(ln===4||ln===3&&(nt&62914560)===nt&&300>It()-cf?(gt&2)===0&&zo(n,0):_g|=l,qo===nt&&(qo=0)),yi(n)}function T1(n,i){i===0&&(i=ii()),n=jl(n,i),n!==null&&(as(n,i),yi(n))}function mN(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),T1(n,l)}function gN(n,i){var l=0;switch(n.tag){case 31:case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(l=d.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),T1(n,l)}function pN(n,i){return Rt(n,i)}var pf=null,Fo=null,Cg=!1,yf=!1,Rg=!1,Fa=0;function yi(n){n!==Fo&&n.next===null&&(Fo===null?pf=Fo=n:Fo=Fo.next=n),yf=!0,Cg||(Cg=!0,vN())}function lu(n,i){if(!Rg&&yf){Rg=!0;do for(var l=!1,c=pf;c!==null;){if(n!==0){var d=c.pendingLanes;if(d===0)var y=0;else{var E=c.suspendedLanes,R=c.pingedLanes;y=(1<<31-Ot(42|n)+1)-1,y&=d&~(E&~R),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,N1(c,y))}else y=nt,y=Rn(c,c===Ct?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Mn(c,y)||(l=!0,N1(c,y));c=c.next}while(l);Rg=!1}}function yN(){w1()}function w1(){yf=Cg=!1;var n=0;Fa!==0&&CN()&&(n=Fa);for(var i=It(),l=null,c=pf;c!==null;){var d=c.next,y=A1(c,i);y===0?(c.next=null,l===null?pf=d:l.next=d,d===null&&(Fo=l)):(l=c,(n!==0||(y&3)!==0)&&(yf=!0)),c=d}Sn!==0&&Sn!==5||lu(n),Fa!==0&&(Fa=0)}function A1(n,i){for(var l=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var E=31-Ot(y),R=1<<E,B=d[E];B===-1?((R&l)===0||(R&c)!==0)&&(d[E]=Pi(R,i)):B<=i&&(n.expiredLanes|=R),y&=~R}if(i=Ct,l=nt,l=Rn(n,n===i?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,l===0||n===i&&(bt===2||bt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&_r(c),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Mn(n,l)){if(i=l&-l,i===n.callbackPriority)return i;switch(c!==null&&_r(c),hr(l)){case 2:case 8:l=Pr;break;case 32:l=cr;break;case 268435456:l=Ln;break;default:l=cr}return c=S1.bind(null,n),l=Rt(l,c),n.callbackPriority=i,n.callbackNode=l,i}return c!==null&&c!==null&&_r(c),n.callbackPriority=2,n.callbackNode=null,2}function S1(n,i){if(Sn!==0&&Sn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(gf()&&n.callbackNode!==l)return null;var c=nt;return c=Rn(n,n===Ct?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(l1(n,c,i),A1(n,It()),n.callbackNode!=null&&n.callbackNode===l?S1.bind(null,n):null)}function N1(n,i){if(gf())return null;l1(n,i,!0)}function vN(){IN(function(){(gt&6)!==0?Rt(Li,yN):w1()})}function Ig(){if(Fa===0){var n=Ro;n===0&&(n=kn,kn<<=1,(kn&261888)===0&&(kn=256)),Fa=n}return Fa}function C1(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:hi(""+n)}function R1(n,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,n.id&&l.setAttribute("form",n.id),i.parentNode.insertBefore(l,i),n=new FormData(n),l.parentNode.removeChild(l),n}function bN(n,i,l,c,d){if(i==="submit"&&l&&l.stateNode===d){var y=C1((d[rn]||null).action),E=c.submitter;E&&(i=(i=E[rn]||null)?C1(i.formAction):E.getAttribute("formAction"),i!==null&&(y=i,E=null));var R=new Ae("action","action",null,c,d);n.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Fa!==0){var B=E?R1(d,E):new FormData(d);Xm(l,{pending:!0,data:B,method:d.method,action:y},null,B)}}else typeof y=="function"&&(R.preventDefault(),B=E?R1(d,E):new FormData(d),Xm(l,{pending:!0,data:B,method:d.method,action:y},y,B))},currentTarget:d}]})}}for(var Og=0;Og<dm.length;Og++){var Dg=dm[Og],_N=Dg.toLowerCase(),xN=Dg[0].toUpperCase()+Dg.slice(1);zs(_N,"on"+xN)}zs(iv,"onAnimationEnd"),zs(av,"onAnimationIteration"),zs(lv,"onAnimationStart"),zs("dblclick","onDoubleClick"),zs("focusin","onFocus"),zs("focusout","onBlur"),zs(VS,"onTransitionRun"),zs(PS,"onTransitionStart"),zs(US,"onTransitionCancel"),zs(ov,"onTransitionEnd"),Pn("onMouseEnter",["mouseout","mouseover"]),Pn("onMouseLeave",["mouseout","mouseover"]),Pn("onPointerEnter",["pointerout","pointerover"]),Pn("onPointerLeave",["pointerout","pointerover"]),mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ou));function I1(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var c=n[l],d=c.event;c=c.listeners;e:{var y=void 0;if(i)for(var E=c.length-1;0<=E;E--){var R=c[E],B=R.instance,W=R.currentTarget;if(R=R.listener,B!==y&&d.isPropagationStopped())break e;y=R,d.currentTarget=W;try{y(d)}catch(ie){Oh(ie)}d.currentTarget=null,y=B}else for(E=0;E<c.length;E++){if(R=c[E],B=R.instance,W=R.currentTarget,R=R.listener,B!==y&&d.isPropagationStopped())break e;y=R,d.currentTarget=W;try{y(d)}catch(ie){Oh(ie)}d.currentTarget=null,y=B}}}}function et(n,i){var l=i[Jt];l===void 0&&(l=i[Jt]=new Set);var c=n+"__bubble";l.has(c)||(O1(i,n,2,!1),l.add(c))}function jg(n,i,l){var c=0;i&&(c|=4),O1(l,n,c,i)}var vf="_reactListening"+Math.random().toString(36).slice(2);function Lg(n){if(!n[vf]){n[vf]=!0,Bi.forEach(function(l){l!=="selectionchange"&&(EN.has(l)||jg(l,!1,n),jg(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[vf]||(i[vf]=!0,jg("selectionchange",!1,i))}}function O1(n,i,l,c){switch(a_(i)){case 2:var d=XN;break;case 8:d=ZN;break;default:d=Yg}l=d.bind(null,i,l,n),d=void 0,!ms||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,l,{capture:!0,passive:d}):n.addEventListener(i,l,!0):d!==void 0?n.addEventListener(i,l,{passive:d}):n.addEventListener(i,l,!1)}function kg(n,i,l,c,d){var y=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var R=c.stateNode.containerInfo;if(R===d)break;if(E===4)for(E=c.return;E!==null;){var B=E.tag;if((B===3||B===4)&&E.stateNode.containerInfo===d)return;E=E.return}for(;R!==null;){if(E=kt(R),E===null)return;if(B=E.tag,B===5||B===6||B===26||B===27){c=y=E;continue e}R=R.parentNode}}c=c.return}ds(function(){var W=y,ie=qn(l),ue=[];e:{var ee=cv.get(n);if(ee!==void 0){var se=Ae,Se=n;switch(n){case"keypress":if(_(l)===0)break e;case"keydown":case"keyup":se=Ch;break;case"focusin":Se="focus",se=zn;break;case"focusout":Se="blur",se=zn;break;case"beforeblur":case"afterblur":se=zn;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Vt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=b;break;case iv:case av:case lv:se=Rl;break;case ov:se=D;break;case"scroll":case"scrollend":se=Xe;break;case"wheel":se=re;break;case"copy":case"cut":case"paste":se=$i;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Ki;break;case"toggle":case"beforetoggle":se=He}var Pe=(i&4)!==0,wt=!Pe&&(n==="scroll"||n==="scrollend"),K=Pe?ee!==null?ee+"Capture":null:ee;Pe=[];for(var G=W,X;G!==null;){var ae=G;if(X=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||X===null||K===null||(ae=sr(G,K),ae!=null&&Pe.push(cu(G,ae,X))),wt)break;G=G.return}0<Pe.length&&(ee=new se(ee,Se,null,l,ie),ue.push({event:ee,listeners:Pe}))}}if((i&7)===0){e:{if(ee=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",ee&&l!==on&&(Se=l.relatedTarget||l.fromElement)&&(kt(Se)||Se[Tr]))break e;if((se||ee)&&(ee=ie.window===ie?ie:(ee=ie.ownerDocument)?ee.defaultView||ee.parentWindow:window,se?(Se=l.relatedTarget||l.toElement,se=W,Se=Se?kt(Se):null,Se!==null&&(wt=o(Se),Pe=Se.tag,Se!==wt||Pe!==5&&Pe!==27&&Pe!==6)&&(Se=null)):(se=null,Se=W),se!==Se)){if(Pe=Vt,ae="onMouseLeave",K="onMouseEnter",G="mouse",(n==="pointerout"||n==="pointerover")&&(Pe=Ki,ae="onPointerLeave",K="onPointerEnter",G="pointer"),wt=se==null?ee:Vn(se),X=Se==null?ee:Vn(Se),ee=new Pe(ae,G+"leave",se,l,ie),ee.target=wt,ee.relatedTarget=X,ae=null,kt(ie)===W&&(Pe=new Pe(K,G+"enter",Se,l,ie),Pe.target=X,Pe.relatedTarget=wt,ae=Pe),wt=ae,se&&Se)t:{for(Pe=TN,K=se,G=Se,X=0,ae=K;ae;ae=Pe(ae))X++;ae=0;for(var Le=G;Le;Le=Pe(Le))ae++;for(;0<X-ae;)K=Pe(K),X--;for(;0<ae-X;)G=Pe(G),ae--;for(;X--;){if(K===G||G!==null&&K===G.alternate){Pe=K;break t}K=Pe(K),G=Pe(G)}Pe=null}else Pe=null;se!==null&&D1(ue,ee,se,Pe,!1),Se!==null&&wt!==null&&D1(ue,wt,Se,Pe,!0)}}e:{if(ee=W?Vn(W):window,se=ee.nodeName&&ee.nodeName.toLowerCase(),se==="select"||se==="input"&&ee.type==="file")var ht=Q0;else if($0(ee))if(Y0)ht=LS;else{ht=DS;var Ce=OS}else se=ee.nodeName,!se||se.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?W&&ui(W.elementType)&&(ht=Q0):ht=jS;if(ht&&(ht=ht(n,W))){K0(ue,ht,l,ie);break e}Ce&&Ce(n,ee,W),n==="focusout"&&W&&ee.type==="number"&&W.memoizedProps.value!=null&&Hi(ee,"number",ee.value)}switch(Ce=W?Vn(W):window,n){case"focusin":($0(Ce)||Ce.contentEditable==="true")&&(xo=Ce,um=W,Pc=null);break;case"focusout":Pc=um=xo=null;break;case"mousedown":hm=!0;break;case"contextmenu":case"mouseup":case"dragend":hm=!1,rv(ue,l,ie);break;case"selectionchange":if(MS)break;case"keydown":case"keyup":rv(ue,l,ie)}var $e;if(mt)e:{switch(n){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else _o?Il(n,l)&&(rt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(rt="onCompositionStart");rt&&(di&&l.locale!=="ko"&&(_o||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&_o&&($e=Gi()):(gr=ie,Vs="value"in gr?gr.value:gr.textContent,_o=!0)),Ce=bf(W,rt),0<Ce.length&&(rt=new fi(rt,n,null,l,ie),ue.push({event:rt,listeners:Ce}),$e?rt.data=$e:($e=bo(l),$e!==null&&(rt.data=$e)))),($e=gs?NS(n,l):CS(n,l))&&(rt=bf(W,"onBeforeInput"),0<rt.length&&(Ce=new fi("onBeforeInput","beforeinput",null,l,ie),ue.push({event:Ce,listeners:rt}),Ce.data=$e)),bN(ue,n,W,l,ie)}I1(ue,i)})}function cu(n,i,l){return{instance:n,listener:i,currentTarget:l}}function bf(n,i){for(var l=i+"Capture",c=[];n!==null;){var d=n,y=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||y===null||(d=sr(n,l),d!=null&&c.unshift(cu(n,d,y)),d=sr(n,i),d!=null&&c.push(cu(n,d,y))),n.tag===3)return c;n=n.return}return[]}function TN(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function D1(n,i,l,c,d){for(var y=i._reactName,E=[];l!==null&&l!==c;){var R=l,B=R.alternate,W=R.stateNode;if(R=R.tag,B!==null&&B===c)break;R!==5&&R!==26&&R!==27||W===null||(B=W,d?(W=sr(l,y),W!=null&&E.unshift(cu(l,W,B))):d||(W=sr(l,y),W!=null&&E.push(cu(l,W,B)))),l=l.return}E.length!==0&&n.push({event:i,listeners:E})}var wN=/\r\n?/g,AN=/\u0000|\uFFFD/g;function j1(n){return(typeof n=="string"?n:""+n).replace(wN,`
`).replace(AN,"")}function L1(n,i){return i=j1(i),j1(n)===i}function Tt(n,i,l,c,d,y){switch(l){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Kt(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Kt(n,""+c);break;case"className":Un(n,"class",c);break;case"tabIndex":Un(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Un(n,l,c);break;case"style":nr(n,c,y);break;case"data":if(i!=="object"){Un(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||l!=="href")){n.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=hi(""+c),n.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(i!=="input"&&Tt(n,i,"name",d.name,d,null),Tt(n,i,"formEncType",d.formEncType,d,null),Tt(n,i,"formMethod",d.formMethod,d,null),Tt(n,i,"formTarget",d.formTarget,d,null)):(Tt(n,i,"encType",d.encType,d,null),Tt(n,i,"method",d.method,d,null),Tt(n,i,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=hi(""+c),n.setAttribute(l,c);break;case"onClick":c!=null&&(n.onclick=rr);break;case"onScroll":c!=null&&et("scroll",n);break;case"onScrollEnd":c!=null&&et("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(l=c.__html,l!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=l}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}l=hi(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""+c):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":c===!0?n.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,c):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(l,c):n.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(l):n.setAttribute(l,c);break;case"popover":et("beforetoggle",n),et("toggle",n),li(n,"popover",c);break;case"xlinkActuate":$t(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":$t(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":$t(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":$t(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":$t(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":$t(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":$t(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":$t(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":$t(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":li(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Na.get(l)||l,li(n,l,c))}}function Mg(n,i,l,c,d,y){switch(l){case"style":nr(n,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(l=c.__html,l!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=l}}break;case"children":typeof c=="string"?Kt(n,c):(typeof c=="number"||typeof c=="bigint")&&Kt(n,""+c);break;case"onScroll":c!=null&&et("scroll",n);break;case"onScrollEnd":c!=null&&et("scrollend",n);break;case"onClick":c!=null&&(n.onclick=rr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!os.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(d=l.endsWith("Capture"),i=l.slice(2,d?l.length-7:void 0),y=n[rn]||null,y=y!=null?y[l]:null,typeof y=="function"&&n.removeEventListener(i,y,d),typeof c=="function")){typeof y!="function"&&y!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(i,c,d);break e}l in n?n[l]=c:c===!0?n.setAttribute(l,""):li(n,l,c)}}}function $n(n,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",n),et("load",n);var c=!1,d=!1,y;for(y in l)if(l.hasOwnProperty(y)){var E=l[y];if(E!=null)switch(y){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Tt(n,i,y,E,l,null)}}d&&Tt(n,i,"srcSet",l.srcSet,l,null),c&&Tt(n,i,"src",l.src,l,null);return;case"input":et("invalid",n);var R=y=E=d=null,B=null,W=null;for(c in l)if(l.hasOwnProperty(c)){var ie=l[c];if(ie!=null)switch(c){case"name":d=ie;break;case"type":E=ie;break;case"checked":B=ie;break;case"defaultChecked":W=ie;break;case"value":y=ie;break;case"defaultValue":R=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,i));break;default:Tt(n,i,c,ie,l,null)}}ci(n,y,R,B,W,E,d,!1);return;case"select":et("invalid",n),c=E=y=null;for(d in l)if(l.hasOwnProperty(d)&&(R=l[d],R!=null))switch(d){case"value":y=R;break;case"defaultValue":E=R;break;case"multiple":c=R;default:Tt(n,i,d,R,l,null)}i=y,l=E,n.multiple=!!c,i!=null?us(n,!!c,i,!1):l!=null&&us(n,!!c,l,!0);return;case"textarea":et("invalid",n),y=d=c=null;for(E in l)if(l.hasOwnProperty(E)&&(R=l[E],R!=null))switch(E){case"value":c=R;break;case"defaultValue":d=R;break;case"children":y=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(91));break;default:Tt(n,i,E,R,l,null)}gn(n,c,d,y);return;case"option":for(B in l)if(l.hasOwnProperty(B)&&(c=l[B],c!=null))switch(B){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Tt(n,i,B,c,l,null)}return;case"dialog":et("beforetoggle",n),et("toggle",n),et("cancel",n),et("close",n);break;case"iframe":case"object":et("load",n);break;case"video":case"audio":for(c=0;c<ou.length;c++)et(ou[c],n);break;case"image":et("error",n),et("load",n);break;case"details":et("toggle",n);break;case"embed":case"source":case"link":et("error",n),et("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in l)if(l.hasOwnProperty(W)&&(c=l[W],c!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Tt(n,i,W,c,l,null)}return;default:if(ui(i)){for(ie in l)l.hasOwnProperty(ie)&&(c=l[ie],c!==void 0&&Mg(n,i,ie,c,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(c=l[R],c!=null&&Tt(n,i,R,c,l,null))}function SN(n,i,l,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,y=null,E=null,R=null,B=null,W=null,ie=null;for(se in l){var ue=l[se];if(l.hasOwnProperty(se)&&ue!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":B=ue;default:c.hasOwnProperty(se)||Tt(n,i,se,null,c,ue)}}for(var ee in c){var se=c[ee];if(ue=l[ee],c.hasOwnProperty(ee)&&(se!=null||ue!=null))switch(ee){case"type":y=se;break;case"name":d=se;break;case"checked":W=se;break;case"defaultChecked":ie=se;break;case"value":E=se;break;case"defaultValue":R=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,i));break;default:se!==ue&&Tt(n,i,ee,se,c,ue)}}oi(n,E,R,B,W,ie,y,d);return;case"select":se=E=R=ee=null;for(y in l)if(B=l[y],l.hasOwnProperty(y)&&B!=null)switch(y){case"value":break;case"multiple":se=B;default:c.hasOwnProperty(y)||Tt(n,i,y,null,c,B)}for(d in c)if(y=c[d],B=l[d],c.hasOwnProperty(d)&&(y!=null||B!=null))switch(d){case"value":ee=y;break;case"defaultValue":R=y;break;case"multiple":E=y;default:y!==B&&Tt(n,i,d,y,c,B)}i=R,l=E,c=se,ee!=null?us(n,!!l,ee,!1):!!c!=!!l&&(i!=null?us(n,!!l,i,!0):us(n,!!l,l?[]:"",!1));return;case"textarea":se=ee=null;for(R in l)if(d=l[R],l.hasOwnProperty(R)&&d!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Tt(n,i,R,null,c,d)}for(E in c)if(d=c[E],y=l[E],c.hasOwnProperty(E)&&(d!=null||y!=null))switch(E){case"value":ee=d;break;case"defaultValue":se=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==y&&Tt(n,i,E,d,c,y)}hs(n,ee,se);return;case"option":for(var Se in l)if(ee=l[Se],l.hasOwnProperty(Se)&&ee!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":n.selected=!1;break;default:Tt(n,i,Se,null,c,ee)}for(B in c)if(ee=c[B],se=l[B],c.hasOwnProperty(B)&&ee!==se&&(ee!=null||se!=null))switch(B){case"selected":n.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Tt(n,i,B,ee,c,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in l)ee=l[Pe],l.hasOwnProperty(Pe)&&ee!=null&&!c.hasOwnProperty(Pe)&&Tt(n,i,Pe,null,c,ee);for(W in c)if(ee=c[W],se=l[W],c.hasOwnProperty(W)&&ee!==se&&(ee!=null||se!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,i));break;default:Tt(n,i,W,ee,c,se)}return;default:if(ui(i)){for(var wt in l)ee=l[wt],l.hasOwnProperty(wt)&&ee!==void 0&&!c.hasOwnProperty(wt)&&Mg(n,i,wt,void 0,c,ee);for(ie in c)ee=c[ie],se=l[ie],!c.hasOwnProperty(ie)||ee===se||ee===void 0&&se===void 0||Mg(n,i,ie,ee,c,se);return}}for(var K in l)ee=l[K],l.hasOwnProperty(K)&&ee!=null&&!c.hasOwnProperty(K)&&Tt(n,i,K,null,c,ee);for(ue in c)ee=c[ue],se=l[ue],!c.hasOwnProperty(ue)||ee===se||ee==null&&se==null||Tt(n,i,ue,ee,c,se)}function k1(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NN(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var d=l[c],y=d.transferSize,E=d.initiatorType,R=d.duration;if(y&&R&&k1(E)){for(E=0,R=d.responseEnd,c+=1;c<l.length;c++){var B=l[c],W=B.startTime;if(W>R)break;var ie=B.transferSize,ue=B.initiatorType;ie&&k1(ue)&&(B=B.responseEnd,E+=ie*(B<R?1:(R-W)/(B-W)))}if(--c,i+=8*(y+E)/(d.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Vg=null,Pg=null;function _f(n){return n.nodeType===9?n:n.ownerDocument}function M1(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function V1(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Ug(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var qg=null;function CN(){var n=window.event;return n&&n.type==="popstate"?n===qg?!1:(qg=n,!0):(qg=null,!1)}var P1=typeof setTimeout=="function"?setTimeout:void 0,RN=typeof clearTimeout=="function"?clearTimeout:void 0,U1=typeof Promise=="function"?Promise:void 0,IN=typeof queueMicrotask=="function"?queueMicrotask:typeof U1<"u"?function(n){return U1.resolve(null).then(n).catch(ON)}:P1;function ON(n){setTimeout(function(){throw n})}function Ga(n){return n==="head"}function q1(n,i){var l=i,c=0;do{var d=l.nextSibling;if(n.removeChild(l),d&&d.nodeType===8)if(l=d.data,l==="/$"||l==="/&"){if(c===0){n.removeChild(d),Qo(i);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")uu(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,uu(l);for(var y=l.firstChild;y;){var E=y.nextSibling,R=y.nodeName;y[wr]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=E}}else l==="body"&&uu(n.ownerDocument.body);l=d}while(l);Qo(i)}function B1(n,i){var l=n;n=0;do{var c=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=c}while(l)}function Bg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Bg(l),ai(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function DN(n,i,l,c){for(;n.nodeType===1;){var d=l;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[wr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var y=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=Es(n.nextSibling),n===null)break}return null}function jN(n,i,l){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Es(n.nextSibling),n===null))return null;return n}function z1(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Es(n.nextSibling),n===null))return null;return n}function zg(n){return n.data==="$?"||n.data==="$~"}function Hg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function LN(n,i){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||l.readyState!=="loading")i();else{var c=function(){i(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Es(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Fg=null;function H1(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(i===0)return Es(n.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}n=n.nextSibling}return null}function F1(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return n;i--}else l!=="/$"&&l!=="/&"||i++}n=n.previousSibling}return null}function G1(n,i,l){switch(i=_f(l),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function uu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);ai(n)}var Ts=new Map,$1=new Set;function xf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var oa=J.d;J.d={f:kN,r:MN,D:VN,C:PN,L:UN,m:qN,X:zN,S:BN,M:HN};function kN(){var n=oa.f(),i=ff();return n||i}function MN(n){var i=er(n);i!==null&&i.tag===5&&i.type==="form"?ob(i):oa.r(n)}var Go=typeof document>"u"?null:document;function K1(n,i,l){var c=Go;if(c&&typeof i=="string"&&i){var d=In(i);d='link[rel="'+n+'"][href="'+d+'"]',typeof l=="string"&&(d+='[crossorigin="'+l+'"]'),$1.has(d)||($1.add(d),n={rel:n,crossOrigin:l,href:i},c.querySelector(d)===null&&(i=c.createElement("link"),$n(i,"link",n),Gt(i),c.head.appendChild(i)))}}function VN(n){oa.D(n),K1("dns-prefetch",n,null)}function PN(n,i){oa.C(n,i),K1("preconnect",n,i)}function UN(n,i,l){oa.L(n,i,l);var c=Go;if(c&&n&&i){var d='link[rel="preload"][as="'+In(i)+'"]';i==="image"&&l&&l.imageSrcSet?(d+='[imagesrcset="'+In(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(d+='[imagesizes="'+In(l.imageSizes)+'"]')):d+='[href="'+In(n)+'"]';var y=d;switch(i){case"style":y=$o(n);break;case"script":y=Ko(n)}Ts.has(y)||(n=x({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:n,as:i},l),Ts.set(y,n),c.querySelector(d)!==null||i==="style"&&c.querySelector(hu(y))||i==="script"&&c.querySelector(fu(y))||(i=c.createElement("link"),$n(i,"link",n),Gt(i),c.head.appendChild(i)))}}function qN(n,i){oa.m(n,i);var l=Go;if(l&&n){var c=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+In(c)+'"][href="'+In(n)+'"]',y=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ko(n)}if(!Ts.has(y)&&(n=x({rel:"modulepreload",href:n},i),Ts.set(y,n),l.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(fu(y)))return}c=l.createElement("link"),$n(c,"link",n),Gt(c),l.head.appendChild(c)}}}function BN(n,i,l){oa.S(n,i,l);var c=Go;if(c&&n){var d=Ar(c).hoistableStyles,y=$o(n);i=i||"default";var E=d.get(y);if(!E){var R={loading:0,preload:null};if(E=c.querySelector(hu(y)))R.loading=5;else{n=x({rel:"stylesheet",href:n,"data-precedence":i},l),(l=Ts.get(y))&&Gg(n,l);var B=E=c.createElement("link");Gt(B),$n(B,"link",n),B._p=new Promise(function(W,ie){B.onload=W,B.onerror=ie}),B.addEventListener("load",function(){R.loading|=1}),B.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Ef(E,i,c)}E={type:"stylesheet",instance:E,count:1,state:R},d.set(y,E)}}}function zN(n,i){oa.X(n,i);var l=Go;if(l&&n){var c=Ar(l).hoistableScripts,d=Ko(n),y=c.get(d);y||(y=l.querySelector(fu(d)),y||(n=x({src:n,async:!0},i),(i=Ts.get(d))&&$g(n,i),y=l.createElement("script"),Gt(y),$n(y,"link",n),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(d,y))}}function HN(n,i){oa.M(n,i);var l=Go;if(l&&n){var c=Ar(l).hoistableScripts,d=Ko(n),y=c.get(d);y||(y=l.querySelector(fu(d)),y||(n=x({src:n,async:!0,type:"module"},i),(i=Ts.get(d))&&$g(n,i),y=l.createElement("script"),Gt(y),$n(y,"link",n),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(d,y))}}function Q1(n,i,l,c){var d=(d=we.current)?xf(d):null;if(!d)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=$o(l.href),l=Ar(d).hoistableStyles,c=l.get(i),c||(c={type:"style",instance:null,count:0,state:null},l.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=$o(l.href);var y=Ar(d).hoistableStyles,E=y.get(n);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,E),(y=d.querySelector(hu(n)))&&!y._p&&(E.instance=y,E.state.loading=5),Ts.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ts.set(n,l),y||FN(d,n,l,E.state))),i&&c===null)throw Error(s(528,""));return E}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ko(l),l=Ar(d).hoistableScripts,c=l.get(i),c||(c={type:"script",instance:null,count:0,state:null},l.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function $o(n){return'href="'+In(n)+'"'}function hu(n){return'link[rel="stylesheet"]['+n+"]"}function Y1(n){return x({},n,{"data-precedence":n.precedence,precedence:null})}function FN(n,i,l,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),$n(i,"link",l),Gt(i),n.head.appendChild(i))}function Ko(n){return'[src="'+In(n)+'"]'}function fu(n){return"script[async]"+n}function X1(n,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+In(l.href)+'"]');if(c)return i.instance=c,Gt(c),c;var d=x({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Gt(c),$n(c,"style",d),Ef(c,l.precedence,n),i.instance=c;case"stylesheet":d=$o(l.href);var y=n.querySelector(hu(d));if(y)return i.state.loading|=4,i.instance=y,Gt(y),y;c=Y1(l),(d=Ts.get(d))&&Gg(c,d),y=(n.ownerDocument||n).createElement("link"),Gt(y);var E=y;return E._p=new Promise(function(R,B){E.onload=R,E.onerror=B}),$n(y,"link",c),i.state.loading|=4,Ef(y,l.precedence,n),i.instance=y;case"script":return y=Ko(l.src),(d=n.querySelector(fu(y)))?(i.instance=d,Gt(d),d):(c=l,(d=Ts.get(y))&&(c=x({},l),$g(c,d)),n=n.ownerDocument||n,d=n.createElement("script"),Gt(d),$n(d,"link",c),n.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Ef(c,l.precedence,n));return i.instance}function Ef(n,i,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,y=d,E=0;E<c.length;E++){var R=c[E];if(R.dataset.precedence===i)y=R;else if(y!==d)break}y?y.parentNode.insertBefore(n,y.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(n,i.firstChild))}function Gg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function $g(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Tf=null;function Z1(n,i,l){if(Tf===null){var c=new Map,d=Tf=new Map;d.set(l,c)}else d=Tf,c=d.get(l),c||(c=new Map,d.set(l,c));if(c.has(n))return c;for(c.set(n,null),l=l.getElementsByTagName(n),d=0;d<l.length;d++){var y=l[d];if(!(y[wr]||y[Ft]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(i)||"";E=n+E;var R=c.get(E);R?R.push(y):c.set(E,[y])}}return c}function W1(n,i,l){n=n.ownerDocument||n,n.head.insertBefore(l,i==="title"?n.querySelector("head > title"):null)}function GN(n,i,l){if(l===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function J1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function $N(n,i,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var d=$o(c.href),y=i.querySelector(hu(d));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=wf.bind(n),i.then(n,n)),l.state.loading|=4,l.instance=y,Gt(y);return}y=i.ownerDocument||i,c=Y1(c),(d=Ts.get(d))&&Gg(c,d),y=y.createElement("link"),Gt(y);var E=y;E._p=new Promise(function(R,B){E.onload=R,E.onerror=B}),$n(y,"link",c),l.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=wf.bind(n),i.addEventListener("load",l),i.addEventListener("error",l))}}var Kg=0;function KN(n,i){return n.stylesheets&&n.count===0&&Sf(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var c=setTimeout(function(){if(n.stylesheets&&Sf(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+i);0<n.imgBytes&&Kg===0&&(Kg=62500*NN());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Sf(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>Kg?50:800)+i);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(d)}}:null}function wf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Af=null;function Sf(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Af=new Map,i.forEach(QN,n),Af=null,wf.call(n))}function QN(n,i){if(!(i.state.loading&4)){var l=Af.get(n);if(l)var c=l.get(null);else{l=new Map,Af.set(n,l);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<d.length;y++){var E=d[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),c=E)}c&&l.set(null,c)}d=i.instance,E=d.getAttribute("data-precedence"),y=l.get(E)||c,y===c&&l.set(null,d),l.set(E,d),this.count++,c=wf.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),y?y.parentNode.insertBefore(d,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),i.state.loading|=4}}var du={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function YN(n,i,l,c,d,y,E,R,B){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=An(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=An(0),this.hiddenUpdates=An(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function e_(n,i,l,c,d,y,E,R,B,W,ie,ue){return n=new YN(n,i,l,E,B,W,ie,ue,R),i=1,y===!0&&(i|=24),y=Qr(3,null,null,i),n.current=y,y.stateNode=n,i=Sm(),i.refCount++,n.pooledCache=i,i.refCount++,y.memoizedState={element:c,isDehydrated:l,cache:i},Im(y),n}function t_(n){return n?(n=wo,n):wo}function n_(n,i,l,c,d,y){d=t_(d),c.context===null?c.context=d:c.pendingContext=d,c=La(i),c.payload={element:l},y=y===void 0?null:y,y!==null&&(c.callback=y),l=ka(n,c,i),l!==null&&(jr(l,n,i),Gc(l,n,i))}function r_(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function Qg(n,i){r_(n,i),(n=n.alternate)&&r_(n,i)}function s_(n){if(n.tag===13||n.tag===31){var i=jl(n,67108864);i!==null&&jr(i,n,67108864),Qg(n,67108864)}}function i_(n){if(n.tag===13||n.tag===31){var i=Jr();i=ls(i);var l=jl(n,i);l!==null&&jr(l,n,i),Qg(n,i)}}var Nf=!0;function XN(n,i,l,c){var d=z.T;z.T=null;var y=J.p;try{J.p=2,Yg(n,i,l,c)}finally{J.p=y,z.T=d}}function ZN(n,i,l,c){var d=z.T;z.T=null;var y=J.p;try{J.p=8,Yg(n,i,l,c)}finally{J.p=y,z.T=d}}function Yg(n,i,l,c){if(Nf){var d=Xg(c);if(d===null)kg(n,i,c,Cf,l),l_(n,c);else if(JN(d,n,i,l,c))c.stopPropagation();else if(l_(n,c),i&4&&-1<WN.indexOf(n)){for(;d!==null;){var y=er(d);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=Jn(y.pendingLanes);if(E!==0){var R=y;for(R.pendingLanes|=2,R.entangledLanes|=2;E;){var B=1<<31-Ot(E);R.entanglements[1]|=B,E&=~B}yi(y),(gt&6)===0&&(uf=It()+500,lu(0))}}break;case 31:case 13:R=jl(y,2),R!==null&&jr(R,y,2),ff(),Qg(y,2)}if(y=Xg(c),y===null&&kg(n,i,c,Cf,l),y===d)break;d=y}d!==null&&c.stopPropagation()}else kg(n,i,c,null,l)}}function Xg(n){return n=qn(n),Zg(n)}var Cf=null;function Zg(n){if(Cf=null,n=kt(n),n!==null){var i=o(n);if(i===null)n=null;else{var l=i.tag;if(l===13){if(n=u(i),n!==null)return n;n=null}else if(l===31){if(n=f(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Cf=n,null}function a_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xr()){case Li:return 2;case Pr:return 8;case cr:case ki:return 32;case Ln:return 268435456;default:return 32}default:return 32}}var Wg=!1,$a=null,Ka=null,Qa=null,mu=new Map,gu=new Map,Ya=[],WN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function l_(n,i){switch(n){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":mu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":gu.delete(i.pointerId)}}function pu(n,i,l,c,d,y){return n===null||n.nativeEvent!==y?(n={blockedOn:i,domEventName:l,eventSystemFlags:c,nativeEvent:y,targetContainers:[d]},i!==null&&(i=er(i),i!==null&&s_(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function JN(n,i,l,c,d){switch(i){case"focusin":return $a=pu($a,n,i,l,c,d),!0;case"dragenter":return Ka=pu(Ka,n,i,l,c,d),!0;case"mouseover":return Qa=pu(Qa,n,i,l,c,d),!0;case"pointerover":var y=d.pointerId;return mu.set(y,pu(mu.get(y)||null,n,i,l,c,d)),!0;case"gotpointercapture":return y=d.pointerId,gu.set(y,pu(gu.get(y)||null,n,i,l,c,d)),!0}return!1}function o_(n){var i=kt(n.target);if(i!==null){var l=o(i);if(l!==null){if(i=l.tag,i===13){if(i=u(l),i!==null){n.blockedOn=i,fr(n.priority,function(){i_(l)});return}}else if(i===31){if(i=f(l),i!==null){n.blockedOn=i,fr(n.priority,function(){i_(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Rf(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=Xg(n.nativeEvent);if(l===null){l=n.nativeEvent;var c=new l.constructor(l.type,l);on=c,l.target.dispatchEvent(c),on=null}else return i=er(l),i!==null&&s_(i),n.blockedOn=l,!1;i.shift()}return!0}function c_(n,i,l){Rf(n)&&l.delete(i)}function e2(){Wg=!1,$a!==null&&Rf($a)&&($a=null),Ka!==null&&Rf(Ka)&&(Ka=null),Qa!==null&&Rf(Qa)&&(Qa=null),mu.forEach(c_),gu.forEach(c_)}function If(n,i){n.blockedOn===i&&(n.blockedOn=null,Wg||(Wg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,e2)))}var Of=null;function u_(n){Of!==n&&(Of=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Of===n&&(Of=null);for(var i=0;i<n.length;i+=3){var l=n[i],c=n[i+1],d=n[i+2];if(typeof c!="function"){if(Zg(c||l)===null)continue;break}var y=er(l);y!==null&&(n.splice(i,3),i-=3,Xm(y,{pending:!0,data:d,method:l.method,action:c},c,d))}}))}function Qo(n){function i(B){return If(B,n)}$a!==null&&If($a,n),Ka!==null&&If(Ka,n),Qa!==null&&If(Qa,n),mu.forEach(i),gu.forEach(i);for(var l=0;l<Ya.length;l++){var c=Ya[l];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Ya.length&&(l=Ya[0],l.blockedOn===null);)o_(l),l.blockedOn===null&&Ya.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var d=l[c],y=l[c+1],E=d[rn]||null;if(typeof y=="function")E||u_(l);else if(E){var R=null;if(y&&y.hasAttribute("formAction")){if(d=y,E=y[rn]||null)R=E.formAction;else if(Zg(d)!==null)continue}else R=E.action;typeof R=="function"?l[c+1]=R:(l.splice(c,3),c-=3),u_(l)}}}function h_(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(E){return d=E})},focusReset:"manual",scroll:"manual"})}function i(){d!==null&&(d(),d=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),d!==null&&(d(),d=null)}}}function Jg(n){this._internalRoot=n}Df.prototype.render=Jg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,c=Jr();n_(l,c,n,i,null,null)},Df.prototype.unmount=Jg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;n_(n.current,2,null,n,null,null),ff(),i[Tr]=null}};function Df(n){this._internalRoot=n}Df.prototype.unstable_scheduleHydration=function(n){if(n){var i=nn();n={blockedOn:null,target:n,priority:i};for(var l=0;l<Ya.length&&i!==0&&i<Ya[l].priority;l++);Ya.splice(l,0,n),l===0&&o_(n)}};var f_=e.version;if(f_!=="19.2.1")throw Error(s(527,f_,"19.2.1"));J.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=g(i),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var t2={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jf.isDisabled&&jf.supportsFiber)try{ur=jf.inject(t2),Wt=jf}catch{}}return vu.createRoot=function(n,i){if(!a(n))throw Error(s(299));var l=!1,c="",d=bb,y=_b,E=xb;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError)),i=e_(n,1,!1,null,null,l,c,null,d,y,E,h_),n[Tr]=i.current,Lg(n),new Jg(i)},vu.hydrateRoot=function(n,i,l){if(!a(n))throw Error(s(299));var c=!1,d="",y=bb,E=_b,R=xb,B=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(B=l.formState)),i=e_(n,1,!0,i,l??null,c,d,B,y,E,R,h_),i.context=t_(null),l=i.current,c=Jr(),c=ls(c),d=La(c),d.callback=null,ka(l,d,c),l=c,i.current.lanes=l,as(i,l),yi(i),n[Tr]=i.current,Lg(n),new Df(i)},vu.version="19.2.1",vu}var E_;function f2(){if(E_)return np.exports;E_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),np.exports=h2(),np.exports}var d2=f2();var T_="popstate";function m2(r={}){function e(a,o){let{pathname:u="/",search:f="",hash:m=""}=lo(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Mp("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(a,o){let u=a.document.querySelector("base"),f="";if(u&&u.getAttribute("href")){let m=a.location.href,g=m.indexOf("#");f=g===-1?m:m.slice(0,g)}return f+"#"+(typeof o=="string"?o:Uu(o))}function s(a,o){rs(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return p2(e,t,s,r)}function Zt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function rs(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function g2(){return Math.random().toString(36).substring(2,10)}function w_(r,e){return{usr:r.state,key:r.key,idx:e}}function Mp(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?lo(e):e,state:t,key:e&&e.key||s||g2()}}function Uu({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function lo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function p2(r,e,t,s={}){let{window:a=document.defaultView,v5Compat:o=!1}=s,u=a.history,f="POP",m=null,g=v();g==null&&(g=0,u.replaceState({...u.state,idx:g},""));function v(){return(u.state||{idx:null}).idx}function x(){f="POP";let I=v(),H=I==null?null:I-g;g=I,m&&m({action:f,location:j.location,delta:H})}function T(I,H){f="PUSH";let $=Mp(j.location,I,H);t&&t($,I),g=v()+1;let Z=w_($,g),te=j.createHref($);try{u.pushState(Z,"",te)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;a.location.assign(te)}o&&m&&m({action:f,location:j.location,delta:1})}function A(I,H){f="REPLACE";let $=Mp(j.location,I,H);t&&t($,I),g=v();let Z=w_($,g),te=j.createHref($);u.replaceState(Z,"",te),o&&m&&m({action:f,location:j.location,delta:0})}function C(I){return y2(I)}let j={get action(){return f},get location(){return r(a,u)},listen(I){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(T_,x),m=I,()=>{a.removeEventListener(T_,x),m=null}},createHref(I){return e(a,I)},createURL:C,encodeLocation(I){let H=C(I);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:T,replace:A,go(I){return u.go(I)}};return j}function y2(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Zt(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Uu(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function sT(r,e,t="/"){return v2(r,e,t,!1)}function v2(r,e,t,s){let a=typeof e=="string"?lo(e):e,o=fa(a.pathname||"/",t);if(o==null)return null;let u=iT(r);b2(u);let f=null;for(let m=0;f==null&&m<u.length;++m){let g=I2(o);f=C2(u[m],g,s)}return f}function iT(r,e=[],t=[],s="",a=!1){let o=(u,f,m=a,g)=>{let v={relativePath:g===void 0?u.path||"":g,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&m)return;Zt(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let x=ha([s,v.relativePath]),T=t.concat(v);u.children&&u.children.length>0&&(Zt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),iT(u.children,e,T,x,m)),!(u.path==null&&!u.index)&&e.push({path:x,score:S2(x,u.index),routesMeta:T})};return r.forEach((u,f)=>{if(u.path===""||!u.path?.includes("?"))o(u,f);else for(let m of aT(u.path))o(u,f,!0,m)}),e}function aT(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let u=aT(s.join("/")),f=[];return f.push(...u.map(m=>m===""?o:[o,m].join("/"))),a&&f.push(...u),f.map(m=>r.startsWith("/")&&m===""?"/":m)}function b2(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:N2(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var _2=/^:[\w-]+$/,x2=3,E2=2,T2=1,w2=10,A2=-2,A_=r=>r==="*";function S2(r,e){let t=r.split("/"),s=t.length;return t.some(A_)&&(s+=A2),e&&(s+=E2),t.filter(a=>!A_(a)).reduce((a,o)=>a+(_2.test(o)?x2:o===""?T2:w2),s)}function N2(r,e){return r.length===e.length&&r.slice(0,-1).every((s,a)=>s===e[a])?r[r.length-1]-e[e.length-1]:0}function C2(r,e,t=!1){let{routesMeta:s}=r,a={},o="/",u=[];for(let f=0;f<s.length;++f){let m=s[f],g=f===s.length-1,v=o==="/"?e:e.slice(o.length)||"/",x=cd({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},v),T=m.route;if(!x&&g&&t&&!s[s.length-1].route.index&&(x=cd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!x)return null;Object.assign(a,x.params),u.push({params:a,pathname:ha([o,x.pathname]),pathnameBase:k2(ha([o,x.pathnameBase])),route:T}),x.pathnameBase!=="/"&&(o=ha([o,x.pathnameBase]))}return u}function cd(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=R2(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:s.reduce((g,{paramName:v,isOptional:x},T)=>{if(v==="*"){let C=f[T]||"";u=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const A=f[T];return x&&!A?g[v]=void 0:g[v]=(A||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:u,pattern:r}}function R2(r,e=!1,t=!0){rs(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,m)=>(s.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function I2(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rs(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function fa(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}var O2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,D2=r=>O2.test(r);function j2(r,e="/"){let{pathname:t,search:s="",hash:a=""}=typeof r=="string"?lo(r):r,o;if(t)if(D2(t))o=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),rs(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${t}`)}t.startsWith("/")?o=S_(t.substring(1),"/"):o=S_(t,e)}else o=e;return{pathname:o,search:M2(s),hash:V2(a)}}function S_(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function ap(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function L2(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Sy(r){let e=L2(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Ny(r,e,t,s=!1){let a;typeof r=="string"?a=lo(r):(a={...r},Zt(!a.pathname||!a.pathname.includes("?"),ap("?","pathname","search",a)),Zt(!a.pathname||!a.pathname.includes("#"),ap("#","pathname","hash",a)),Zt(!a.search||!a.search.includes("#"),ap("#","search","hash",a)));let o=r===""||a.pathname==="",u=o?"/":a.pathname,f;if(u==null)f=t;else{let x=e.length-1;if(!s&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),x-=1;a.pathname=T.join("/")}f=x>=0?e[x]:"/"}let m=j2(a,f),g=u&&u!=="/"&&u.endsWith("/"),v=(o||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||v)&&(m.pathname+="/"),m}var ha=r=>r.join("/").replace(/\/\/+/g,"/"),k2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),M2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,V2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function P2(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function U2(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var lT=["POST","PUT","PATCH","DELETE"];new Set(lT);var q2=["GET",...lT];new Set(q2);var Tc=U.createContext(null);Tc.displayName="DataRouter";var Rd=U.createContext(null);Rd.displayName="DataRouterState";U.createContext(!1);var oT=U.createContext({isTransitioning:!1});oT.displayName="ViewTransition";var B2=U.createContext(new Map);B2.displayName="Fetchers";var z2=U.createContext(null);z2.displayName="Await";var Os=U.createContext(null);Os.displayName="Navigation";var rh=U.createContext(null);rh.displayName="Location";var Ds=U.createContext({outlet:null,matches:[],isDataRoute:!1});Ds.displayName="Route";var Cy=U.createContext(null);Cy.displayName="RouteError";function H2(r,{relative:e}={}){Zt(wc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=U.useContext(Os),{hash:a,pathname:o,search:u}=sh(r,{relative:e}),f=o;return t!=="/"&&(f=o==="/"?t:ha([t,o])),s.createHref({pathname:f,search:u,hash:a})}function wc(){return U.useContext(rh)!=null}function _l(){return Zt(wc(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(rh).location}var cT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uT(r){U.useContext(Os).static||U.useLayoutEffect(r)}function Ri(){let{isDataRoute:r}=U.useContext(Ds);return r?sC():F2()}function F2(){Zt(wc(),"useNavigate() may be used only in the context of a <Router> component.");let r=U.useContext(Tc),{basename:e,navigator:t}=U.useContext(Os),{matches:s}=U.useContext(Ds),{pathname:a}=_l(),o=JSON.stringify(Sy(s)),u=U.useRef(!1);return uT(()=>{u.current=!0}),U.useCallback((m,g={})=>{if(rs(u.current,cT),!u.current)return;if(typeof m=="number"){t.go(m);return}let v=Ny(m,JSON.parse(o),a,g.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ha([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,o,a,r])}var G2=U.createContext(null);function $2(r){let e=U.useContext(Ds).outlet;return U.useMemo(()=>e&&U.createElement(G2.Provider,{value:r},e),[e,r])}function Ac(){let{matches:r}=U.useContext(Ds),e=r[r.length-1];return e?e.params:{}}function sh(r,{relative:e}={}){let{matches:t}=U.useContext(Ds),{pathname:s}=_l(),a=JSON.stringify(Sy(t));return U.useMemo(()=>Ny(r,JSON.parse(a),s,e==="path"),[r,a,s,e])}function K2(r,e){return hT(r,e)}function hT(r,e,t,s,a){Zt(wc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=U.useContext(Os),{matches:u}=U.useContext(Ds),f=u[u.length-1],m=f?f.params:{},g=f?f.pathname:"/",v=f?f.pathnameBase:"/",x=f&&f.route;{let $=x&&x.path||"";fT(g,!x||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let T=_l(),A;if(e){let $=typeof e=="string"?lo(e):e;Zt(v==="/"||$.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${$.pathname}" was given in the \`location\` prop.`),A=$}else A=T;let C=A.pathname||"/",j=C;if(v!=="/"){let $=v.replace(/^\//,"").split("/");j="/"+C.replace(/^\//,"").split("/").slice($.length).join("/")}let I=sT(r,{pathname:j});rs(x||I!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),rs(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=W2(I&&I.map($=>Object.assign({},$,{params:Object.assign({},m,$.params),pathname:ha([v,o.encodeLocation?o.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?v:ha([v,o.encodeLocation?o.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),u,t,s,a);return e&&H?U.createElement(rh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},H):H}function Q2(){let r=rC(),e=P2(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},u=null;return console.error("Error handled by React Router default ErrorBoundary:",r),u=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:o},"ErrorBoundary")," or"," ",U.createElement("code",{style:o},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),t?U.createElement("pre",{style:a},t):null,u)}var Y2=U.createElement(Q2,null),X2=class extends U.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?U.createElement(Ds.Provider,{value:this.props.routeContext},U.createElement(Cy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Z2({routeContext:r,match:e,children:t}){let s=U.useContext(Tc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(Ds.Provider,{value:r},t)}function W2(r,e=[],t=null,s=null,a=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,u=t?.errors;if(u!=null){let v=o.findIndex(x=>x.route.id&&u?.[x.route.id]!==void 0);Zt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,v+1))}let f=!1,m=-1;if(t)for(let v=0;v<o.length;v++){let x=o[v];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=v),x.route.id){let{loaderData:T,errors:A}=t,C=x.route.loader&&!T.hasOwnProperty(x.route.id)&&(!A||A[x.route.id]===void 0);if(x.route.lazy||C){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}let g=t&&s?(v,x)=>{s(v,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:U2(t.matches),errorInfo:x})}:void 0;return o.reduceRight((v,x,T)=>{let A,C=!1,j=null,I=null;t&&(A=u&&x.route.id?u[x.route.id]:void 0,j=x.route.errorElement||Y2,f&&(m<0&&T===0?(fT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,I=null):m===T&&(C=!0,I=x.route.hydrateFallbackElement||null)));let H=e.concat(o.slice(0,T+1)),$=()=>{let Z;return A?Z=j:C?Z=I:x.route.Component?Z=U.createElement(x.route.Component,null):x.route.element?Z=x.route.element:Z=v,U.createElement(Z2,{match:x,routeContext:{outlet:v,matches:H,isDataRoute:t!=null},children:Z})};return t&&(x.route.ErrorBoundary||x.route.errorElement||T===0)?U.createElement(X2,{location:t.location,revalidation:t.revalidation,component:j,error:A,children:$(),routeContext:{outlet:null,matches:H,isDataRoute:!0},onError:g}):$()},null)}function Ry(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function J2(r){let e=U.useContext(Tc);return Zt(e,Ry(r)),e}function eC(r){let e=U.useContext(Rd);return Zt(e,Ry(r)),e}function tC(r){let e=U.useContext(Ds);return Zt(e,Ry(r)),e}function Iy(r){let e=tC(r),t=e.matches[e.matches.length-1];return Zt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function nC(){return Iy("useRouteId")}function rC(){let r=U.useContext(Cy),e=eC("useRouteError"),t=Iy("useRouteError");return r!==void 0?r:e.errors?.[t]}function sC(){let{router:r}=J2("useNavigate"),e=Iy("useNavigate"),t=U.useRef(!1);return uT(()=>{t.current=!0}),U.useCallback(async(a,o={})=>{rs(t.current,cT),t.current&&(typeof a=="number"?await r.navigate(a):await r.navigate(a,{fromRouteId:e,...o}))},[r,e])}var N_={};function fT(r,e,t){!e&&!N_[r]&&(N_[r]=!0,rs(!1,t))}U.memo(iC);function iC({routes:r,future:e,state:t,unstable_onError:s}){return hT(r,void 0,t,s,e)}function aC({to:r,replace:e,state:t,relative:s}){Zt(wc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=U.useContext(Os);rs(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=U.useContext(Ds),{pathname:u}=_l(),f=Ri(),m=Ny(r,Sy(o),u,s==="path"),g=JSON.stringify(m);return U.useEffect(()=>{f(JSON.parse(g),{replace:e,state:t,relative:s})},[f,g,s,e,t]),null}function lC(r){return $2(r.context)}function _n(r){Zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function oC({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:a,static:o=!1,unstable_useTransitions:u}){Zt(!wc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),m=U.useMemo(()=>({basename:f,navigator:a,static:o,unstable_useTransitions:u,future:{}}),[f,a,o,u]);typeof t=="string"&&(t=lo(t));let{pathname:g="/",search:v="",hash:x="",state:T=null,key:A="default"}=t,C=U.useMemo(()=>{let j=fa(g,f);return j==null?null:{location:{pathname:j,search:v,hash:x,state:T,key:A},navigationType:s}},[f,g,v,x,T,A,s]);return rs(C!=null,`<Router basename="${f}"> is not able to match the URL "${g}${v}${x}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:U.createElement(Os.Provider,{value:m},U.createElement(rh.Provider,{children:e,value:C}))}function cC({children:r,location:e}){return K2(Vp(r),e)}function Vp(r,e=[]){let t=[];return U.Children.forEach(r,(s,a)=>{if(!U.isValidElement(s))return;let o=[...e,a];if(s.type===U.Fragment){t.push.apply(t,Vp(s.props.children,o));return}Zt(s.type===_n,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let u={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=Vp(s.props.children,o)),t.push(u)}),t}var Jf="get",ed="application/x-www-form-urlencoded";function Id(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function uC(r){return Id(r)&&r.tagName.toLowerCase()==="button"}function hC(r){return Id(r)&&r.tagName.toLowerCase()==="form"}function fC(r){return Id(r)&&r.tagName.toLowerCase()==="input"}function dC(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function mC(r,e){return r.button===0&&(!e||e==="_self")&&!dC(r)}var Lf=null;function gC(){if(Lf===null)try{new FormData(document.createElement("form"),0),Lf=!1}catch{Lf=!0}return Lf}var pC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lp(r){return r!=null&&!pC.has(r)?(rs(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ed}"`),null):r}function yC(r,e){let t,s,a,o,u;if(hC(r)){let f=r.getAttribute("action");s=f?fa(f,e):null,t=r.getAttribute("method")||Jf,a=lp(r.getAttribute("enctype"))||ed,o=new FormData(r)}else if(uC(r)||fC(r)&&(r.type==="submit"||r.type==="image")){let f=r.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||f.getAttribute("action");if(s=m?fa(m,e):null,t=r.getAttribute("formmethod")||f.getAttribute("method")||Jf,a=lp(r.getAttribute("formenctype"))||lp(f.getAttribute("enctype"))||ed,o=new FormData(f,r),!gC()){let{name:g,type:v,value:x}=r;if(v==="image"){let T=g?`${g}.`:"";o.append(`${T}x`,"0"),o.append(`${T}y`,"0")}else g&&o.append(g,x)}}else{if(Id(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Jf,s=null,a=ed,u=r}return o&&a==="text/plain"&&(u=o,o=void 0),{action:s,method:t.toLowerCase(),encType:a,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Oy(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function vC(r,e,t){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&fa(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function bC(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _C(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function xC(r,e,t){let s=await Promise.all(r.map(async a=>{let o=e.routes[a.route.id];if(o){let u=await bC(o,t);return u.links?u.links():[]}return[]}));return AC(s.flat(1).filter(_C).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function C_(r,e,t,s,a,o){let u=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,f=(m,g)=>t[g].pathname!==m.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==m.params["*"];return o==="assets"?e.filter((m,g)=>u(m,g)||f(m,g)):o==="data"?e.filter((m,g)=>{let v=s.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(u(m,g)||f(m,g))return!0;if(m.route.shouldRevalidate){let x=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function EC(r,e,{includeHydrateFallback:t}={}){return TC(r.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function TC(r){return[...new Set(r)]}function wC(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function AC(r,e){let t=new Set;return new Set(e),r.reduce((s,a)=>{let o=JSON.stringify(wC(a));return t.has(o)||(t.add(o),s.push({key:o,link:a})),s},[])}function dT(){let r=U.useContext(Tc);return Oy(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function SC(){let r=U.useContext(Rd);return Oy(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Dy=U.createContext(void 0);Dy.displayName="FrameworkContext";function mT(){let r=U.useContext(Dy);return Oy(r,"You must render this element inside a <HydratedRouter> element"),r}function NC(r,e){let t=U.useContext(Dy),[s,a]=U.useState(!1),[o,u]=U.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:g,onMouseLeave:v,onTouchStart:x}=e,T=U.useRef(null);U.useEffect(()=>{if(r==="render"&&u(!0),r==="viewport"){let j=H=>{H.forEach($=>{u($.isIntersecting)})},I=new IntersectionObserver(j,{threshold:.5});return T.current&&I.observe(T.current),()=>{I.disconnect()}}},[r]),U.useEffect(()=>{if(s){let j=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(j)}}},[s]);let A=()=>{a(!0)},C=()=>{a(!1),u(!1)};return t?r!=="intent"?[o,T,{}]:[o,T,{onFocus:bu(f,A),onBlur:bu(m,C),onMouseEnter:bu(g,A),onMouseLeave:bu(v,C),onTouchStart:bu(x,A)}]:[!1,T,{}]}function bu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function CC({page:r,...e}){let{router:t}=dT(),s=U.useMemo(()=>sT(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?U.createElement(IC,{page:r,matches:s,...e}):null}function RC(r){let{manifest:e,routeModules:t}=mT(),[s,a]=U.useState([]);return U.useEffect(()=>{let o=!1;return xC(r,e,t).then(u=>{o||a(u)}),()=>{o=!0}},[r,e,t]),s}function IC({page:r,matches:e,...t}){let s=_l(),{manifest:a,routeModules:o}=mT(),{basename:u}=dT(),{loaderData:f,matches:m}=SC(),g=U.useMemo(()=>C_(r,e,m,a,s,"data"),[r,e,m,a,s]),v=U.useMemo(()=>C_(r,e,m,a,s,"assets"),[r,e,m,a,s]),x=U.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let C=new Set,j=!1;if(e.forEach(H=>{let $=a.routes[H.route.id];!$||!$.hasLoader||(!g.some(Z=>Z.route.id===H.route.id)&&H.route.id in f&&o[H.route.id]?.shouldRevalidate||$.hasClientLoader?j=!0:C.add(H.route.id))}),C.size===0)return[];let I=vC(r,u,"data");return j&&C.size>0&&I.searchParams.set("_routes",e.filter(H=>C.has(H.route.id)).map(H=>H.route.id).join(",")),[I.pathname+I.search]},[u,f,s,a,g,e,r,o]),T=U.useMemo(()=>EC(v,a),[v,a]),A=RC(v);return U.createElement(U.Fragment,null,x.map(C=>U.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),T.map(C=>U.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),A.map(({key:C,link:j})=>U.createElement("link",{key:C,nonce:t.nonce,...j})))}function OC(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var gT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gT&&(window.__reactRouterVersion="7.10.1")}catch{}function DC({basename:r,children:e,unstable_useTransitions:t,window:s}){let a=U.useRef();a.current==null&&(a.current=m2({window:s,v5Compat:!0}));let o=a.current,[u,f]=U.useState({action:o.action,location:o.location}),m=U.useCallback(g=>{t===!1?f(g):U.startTransition(()=>f(g))},[t]);return U.useLayoutEffect(()=>o.listen(m),[o,m]),U.createElement(oC,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o,unstable_useTransitions:t===!0})}var pT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,At=U.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:a,reloadDocument:o,replace:u,state:f,target:m,to:g,preventScrollReset:v,viewTransition:x,...T},A){let{basename:C,unstable_useTransitions:j}=U.useContext(Os),I=typeof g=="string"&&pT.test(g),H,$=!1;if(typeof g=="string"&&I&&(H=g,gT))try{let F=new URL(window.location.href),S=g.startsWith("//")?new URL(F.protocol+g):new URL(g),k=fa(S.pathname,C);S.origin===F.origin&&k!=null?g=k+S.search+S.hash:$=!0}catch{rs(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=H2(g,{relative:a}),[te,de,xe]=NC(s,T),M=kC(g,{replace:u,state:f,target:m,preventScrollReset:v,relative:a,viewTransition:x,unstable_useTransitions:j});function L(F){e&&e(F),F.defaultPrevented||M(F)}let V=U.createElement("a",{...T,...xe,href:H||Z,onClick:$||o?e:L,ref:OC(A,de),target:m,"data-discover":!I&&t==="render"?"true":void 0});return te&&!I?U.createElement(U.Fragment,null,V,U.createElement(CC,{page:Z})):V});At.displayName="Link";var yT=U.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:a=!1,style:o,to:u,viewTransition:f,children:m,...g},v){let x=sh(u,{relative:g.relative}),T=_l(),A=U.useContext(Rd),{navigator:C,basename:j}=U.useContext(Os),I=A!=null&&qC(x)&&f===!0,H=C.encodeLocation?C.encodeLocation(x).pathname:x.pathname,$=T.pathname,Z=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||($=$.toLowerCase(),Z=Z?Z.toLowerCase():null,H=H.toLowerCase()),Z&&j&&(Z=fa(Z,j)||Z);const te=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let de=$===H||!a&&$.startsWith(H)&&$.charAt(te)==="/",xe=Z!=null&&(Z===H||!a&&Z.startsWith(H)&&Z.charAt(H.length)==="/"),M={isActive:de,isPending:xe,isTransitioning:I},L=de?e:void 0,V;typeof s=="function"?V=s(M):V=[s,de?"active":null,xe?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let F=typeof o=="function"?o(M):o;return U.createElement(At,{...g,"aria-current":L,className:V,ref:v,style:F,to:u,viewTransition:f},typeof m=="function"?m(M):m)});yT.displayName="NavLink";var jC=U.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:a,state:o,method:u=Jf,action:f,onSubmit:m,relative:g,preventScrollReset:v,viewTransition:x,...T},A)=>{let{unstable_useTransitions:C}=U.useContext(Os),j=PC(),I=UC(f,{relative:g}),H=u.toLowerCase()==="get"?"get":"post",$=typeof f=="string"&&pT.test(f),Z=te=>{if(m&&m(te),te.defaultPrevented)return;te.preventDefault();let de=te.nativeEvent.submitter,xe=de?.getAttribute("formmethod")||u,M=()=>j(de||te.currentTarget,{fetcherKey:e,method:xe,navigate:t,replace:a,state:o,relative:g,preventScrollReset:v,viewTransition:x});C&&t!==!1?U.startTransition(()=>M()):M()};return U.createElement("form",{ref:A,method:H,action:I,onSubmit:s?m:Z,...T,"data-discover":!$&&r==="render"?"true":void 0})});jC.displayName="Form";function LC(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vT(r){let e=U.useContext(Tc);return Zt(e,LC(r)),e}function kC(r,{target:e,replace:t,state:s,preventScrollReset:a,relative:o,viewTransition:u,unstable_useTransitions:f}={}){let m=Ri(),g=_l(),v=sh(r,{relative:o});return U.useCallback(x=>{if(mC(x,e)){x.preventDefault();let T=t!==void 0?t:Uu(g)===Uu(v),A=()=>m(r,{replace:T,state:s,preventScrollReset:a,relative:o,viewTransition:u});f?U.startTransition(()=>A()):A()}},[g,m,v,t,s,e,r,a,o,u,f])}var MC=0,VC=()=>`__${String(++MC)}__`;function PC(){let{router:r}=vT("useSubmit"),{basename:e}=U.useContext(Os),t=nC(),s=r.fetch,a=r.navigate;return U.useCallback(async(o,u={})=>{let{action:f,method:m,encType:g,formData:v,body:x}=yC(o,e);if(u.navigate===!1){let T=u.fetcherKey||VC();await s(T,t,u.action||f,{preventScrollReset:u.preventScrollReset,formData:v,body:x,formMethod:u.method||m,formEncType:u.encType||g,flushSync:u.flushSync})}else await a(u.action||f,{preventScrollReset:u.preventScrollReset,formData:v,body:x,formMethod:u.method||m,formEncType:u.encType||g,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[s,a,e,t])}function UC(r,{relative:e}={}){let{basename:t}=U.useContext(Os),s=U.useContext(Ds);Zt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),o={...sh(r||".",{relative:e})},u=_l();if(r==null){o.search=u.search;let f=new URLSearchParams(o.search),m=f.getAll("index");if(m.some(v=>v==="")){f.delete("index"),m.filter(x=>x).forEach(x=>f.append("index",x));let v=f.toString();o.search=v?`?${v}`:""}}return(!r||r===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ha([t,o.pathname])),Uu(o)}function qC(r,{relative:e}={}){let t=U.useContext(oT);Zt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=vT("useViewTransitionState"),a=sh(r,{relative:e});if(!t.isTransitioning)return!1;let o=fa(t.currentLocation.pathname,s)||t.currentLocation.pathname,u=fa(t.nextLocation.pathname,s)||t.nextLocation.pathname;return cd(a.pathname,u)!=null||cd(a.pathname,o)!=null}const BC={apiKey:"AIzaSyB3nTJlyM3K-XpvEUrXyk3leiVeMxzkTiU",authDomain:"forexvolcano-21180.firebaseapp.com",projectId:"forexvolcano-21180",storageBucket:"forexvolcano-21180.firebasestorage.app",messagingSenderId:"264687169302",appId:"1:264687169302:web:83322d7adc303b1f0c2a37",measurementId:"G-XTB0D1TPS6"},bT=initializeApp(BC),zt=getAuth(bT),Ve=getFirestore(bT),zC=()=>{};var R_={};const _T=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},HC=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const o=r[t++];e[s++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=r[t++],u=r[t++],f=r[t++],m=((a&7)<<18|(o&63)<<12|(u&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const o=r[t++],u=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(o&63)<<6|u&63)}}return e.join("")},xT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const o=r[a],u=a+1<r.length,f=u?r[a+1]:0,m=a+2<r.length,g=m?r[a+2]:0,v=o>>2,x=(o&3)<<4|f>>4;let T=(f&15)<<2|g>>6,A=g&63;m||(A=64,u||(T=64)),s.push(t[v],t[x],t[T],t[A])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(_T(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):HC(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const o=t[r.charAt(a++)],f=a<r.length?t[r.charAt(a)]:0;++a;const g=a<r.length?t[r.charAt(a)]:64;++a;const x=a<r.length?t[r.charAt(a)]:64;if(++a,o==null||f==null||g==null||x==null)throw new FC;const T=o<<2|f>>4;if(s.push(T),g!==64){const A=f<<4&240|g>>2;if(s.push(A),x!==64){const C=g<<6&192|x;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class FC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GC=function(r){const e=_T(r);return xT.encodeByteArray(e,!0)},ET=function(r){return GC(r).replace(/\./g,"")},TT=function(r){try{return xT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $C(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const KC=()=>$C().__FIREBASE_DEFAULTS__,QC=()=>{if(typeof process>"u"||typeof R_>"u")return;const r=R_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},YC=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&TT(r[1]);return e&&JSON.parse(e)},wT=()=>{try{return zC()||KC()||QC()||YC()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},XC=r=>wT()?.[`_${r}`];function jy(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}function Zs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zs())}function WC(){const r=wT()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function tR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nR(){return!WC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rR(){try{return typeof indexedDB=="object"}catch{return!1}}function sR(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const iR="FirebaseError";class ba extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=iR,Object.setPrototypeOf(this,ba.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ih.prototype.create)}}class ih{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],u=o?aR(o,s):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new ba(a,f,s)}}function aR(r,e){return r.replace(lR,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const lR=/\{\$([^}]+)}/g;function Ly(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Tu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,o]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function wu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function oR(r,e){const t=new cR(r,e);return t.subscribe.bind(t)}class cR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");uR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=op),a.error===void 0&&(a.error=op),a.complete===void 0&&(a.complete=op);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uR(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function op(){}function Xn(r){return r&&r._delegate?r._delegate:r}class hc{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}var st;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(st||(st={}));const hR={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},fR=st.INFO,dR={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},mR=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=dR[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ky{constructor(e){this.name=e,this._logLevel=fR,this._logHandler=mR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const gR=(r,e)=>e.some(t=>r instanceof t);let I_,O_;function pR(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yR(){return O_||(O_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AT=new WeakMap,Pp=new WeakMap,ST=new WeakMap,cp=new WeakMap,My=new WeakMap;function vR(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",o),r.removeEventListener("error",u)},o=()=>{t(ll(r.result)),a()},u=()=>{s(r.error),a()};r.addEventListener("success",o),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&AT.set(t,r)}).catch(()=>{}),My.set(e,r),e}function bR(r){if(Pp.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",u),r.removeEventListener("abort",u)},o=()=>{t(),a()},u=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",o),r.addEventListener("error",u),r.addEventListener("abort",u)});Pp.set(r,e)}let Up={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Pp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||ST.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ll(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function _R(r){Up=r(Up)}function xR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(up(this),e,...t);return ST.set(s,e.sort?e.sort():[e]),ll(s)}:yR().includes(r)?function(...e){return r.apply(up(this),e),ll(AT.get(this))}:function(...e){return ll(r.apply(up(this),e))}}function ER(r){return typeof r=="function"?xR(r):(r instanceof IDBTransaction&&bR(r),gR(r,pR())?new Proxy(r,Up):r)}function ll(r){if(r instanceof IDBRequest)return vR(r);if(cp.has(r))return cp.get(r);const e=ER(r);return e!==r&&(cp.set(r,e),My.set(e,r)),e}const up=r=>My.get(r);function TR(r,e,{blocked:t,upgrade:s,blocking:a,terminated:o}={}){const u=indexedDB.open(r,e),f=ll(u);return s&&u.addEventListener("upgradeneeded",m=>{s(ll(u.result),m.oldVersion,m.newVersion,ll(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{o&&m.addEventListener("close",()=>o()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const wR=["get","getKey","getAll","getAllKeys","count"],AR=["put","add","delete","clear"],hp=new Map;function D_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(hp.get(e))return hp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=AR.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||wR.includes(t)))return;const o=async function(u,...f){const m=this.transaction(u,a?"readwrite":"readonly");let g=m.store;return s&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),a&&m.done]))[0]};return hp.set(e,o),o}_R(r=>({...r,get:(e,t,s)=>D_(e,t)||r.get(e,t,s),has:(e,t)=>!!D_(e,t)||r.has(e,t)}));class SR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(NR(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function NR(r){return r.getComponent()?.type==="VERSION"}const qp="@firebase/app",j_="0.14.6";const da=new ky("@firebase/app"),CR="@firebase/app-compat",RR="@firebase/analytics-compat",IR="@firebase/analytics",OR="@firebase/app-check-compat",DR="@firebase/app-check",jR="@firebase/auth",LR="@firebase/auth-compat",kR="@firebase/database",MR="@firebase/data-connect",VR="@firebase/database-compat",PR="@firebase/functions",UR="@firebase/functions-compat",qR="@firebase/installations",BR="@firebase/installations-compat",zR="@firebase/messaging",HR="@firebase/messaging-compat",FR="@firebase/performance",GR="@firebase/performance-compat",$R="@firebase/remote-config",KR="@firebase/remote-config-compat",QR="@firebase/storage",YR="@firebase/storage-compat",XR="@firebase/firestore",ZR="@firebase/ai",WR="@firebase/firestore-compat",JR="firebase",e4="12.6.0",t4={[qp]:"fire-core",[CR]:"fire-core-compat",[IR]:"fire-analytics",[RR]:"fire-analytics-compat",[DR]:"fire-app-check",[OR]:"fire-app-check-compat",[jR]:"fire-auth",[LR]:"fire-auth-compat",[kR]:"fire-rtdb",[MR]:"fire-data-connect",[VR]:"fire-rtdb-compat",[PR]:"fire-fn",[UR]:"fire-fn-compat",[qR]:"fire-iid",[BR]:"fire-iid-compat",[zR]:"fire-fcm",[HR]:"fire-fcm-compat",[FR]:"fire-perf",[GR]:"fire-perf-compat",[$R]:"fire-rc",[KR]:"fire-rc-compat",[QR]:"fire-gcs",[YR]:"fire-gcs-compat",[XR]:"fire-fst",[WR]:"fire-fst-compat",[ZR]:"fire-vertex","fire-js":"fire-js",[JR]:"fire-js-all"};const n4=new Map,r4=new Map,L_=new Map;function k_(r,e){try{r.container.addComponent(e)}catch(t){da.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function fc(r){const e=r.name;if(L_.has(e))return da.debug(`There were multiple attempts to register component ${e}.`),!1;L_.set(e,r);for(const t of n4.values())k_(t,r);for(const t of r4.values())k_(t,r);return!0}function Ss(r){return r==null?!1:r.settings!==void 0}const s4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vy=new ih("app","Firebase",s4);const Od=e4;function Yl(r,e,t){let s=t4[r]??r;t&&(s+=`-${t}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),da.warn(u.join(" "));return}fc(new hc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const i4="firebase-heartbeat-database",a4=1,qu="firebase-heartbeat-store";let fp=null;function NT(){return fp||(fp=TR(i4,a4,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(qu)}catch(t){console.warn(t)}}}}).catch(r=>{throw Vy.create("idb-open",{originalErrorMessage:r.message})})),fp}async function l4(r){try{const t=(await NT()).transaction(qu),s=await t.objectStore(qu).get(CT(r));return await t.done,s}catch(e){if(e instanceof ba)da.warn(e.message);else{const t=Vy.create("idb-get",{originalErrorMessage:e?.message});da.warn(t.message)}}}async function M_(r,e){try{const s=(await NT()).transaction(qu,"readwrite");await s.objectStore(qu).put(e,CT(r)),await s.done}catch(t){if(t instanceof ba)da.warn(t.message);else{const s=Vy.create("idb-set",{originalErrorMessage:t?.message});da.warn(s.message)}}}function CT(r){return`${r.name}!${r.options.appId}`}const o4=1024,c4=30;class u4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new f4(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=V_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>c4){const a=d4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){da.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=V_(),{heartbeatsToSend:t,unsentEntries:s}=h4(this._heartbeatsCache.heartbeats),a=ET(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return da.warn(e),""}}}function V_(){return new Date().toISOString().substring(0,10)}function h4(r,e=o4){const t=[];let s=r.slice();for(const a of r){const o=t.find(u=>u.agent===a.agent);if(o){if(o.dates.push(a.date),P_(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),P_(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class f4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rR()?sR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await l4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return M_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return M_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function P_(r){return ET(JSON.stringify({version:2,heartbeats:r})).length}function d4(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function m4(r){fc(new hc("platform-logger",e=>new SR(e),"PRIVATE")),fc(new hc("heartbeat",e=>new u4(e),"PRIVATE")),Yl(qp,j_,r),Yl(qp,j_,"esm2020"),Yl("fire-js","")}m4("");var U_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ol,RT;(function(){var r;function e(M,L){function V(){}V.prototype=L.prototype,M.F=L.prototype,M.prototype=new V,M.prototype.constructor=M,M.D=function(F,S,k){for(var N=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)N[pe-2]=arguments[pe];return L.prototype[S].apply(F,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(M,L,V){V||(V=0);const F=Array(16);if(typeof L=="string")for(var S=0;S<16;++S)F[S]=L.charCodeAt(V++)|L.charCodeAt(V++)<<8|L.charCodeAt(V++)<<16|L.charCodeAt(V++)<<24;else for(S=0;S<16;++S)F[S]=L[V++]|L[V++]<<8|L[V++]<<16|L[V++]<<24;L=M.g[0],V=M.g[1],S=M.g[2];let k=M.g[3],N;N=L+(k^V&(S^k))+F[0]+3614090360&4294967295,L=V+(N<<7&4294967295|N>>>25),N=k+(S^L&(V^S))+F[1]+3905402710&4294967295,k=L+(N<<12&4294967295|N>>>20),N=S+(V^k&(L^V))+F[2]+606105819&4294967295,S=k+(N<<17&4294967295|N>>>15),N=V+(L^S&(k^L))+F[3]+3250441966&4294967295,V=S+(N<<22&4294967295|N>>>10),N=L+(k^V&(S^k))+F[4]+4118548399&4294967295,L=V+(N<<7&4294967295|N>>>25),N=k+(S^L&(V^S))+F[5]+1200080426&4294967295,k=L+(N<<12&4294967295|N>>>20),N=S+(V^k&(L^V))+F[6]+2821735955&4294967295,S=k+(N<<17&4294967295|N>>>15),N=V+(L^S&(k^L))+F[7]+4249261313&4294967295,V=S+(N<<22&4294967295|N>>>10),N=L+(k^V&(S^k))+F[8]+1770035416&4294967295,L=V+(N<<7&4294967295|N>>>25),N=k+(S^L&(V^S))+F[9]+2336552879&4294967295,k=L+(N<<12&4294967295|N>>>20),N=S+(V^k&(L^V))+F[10]+4294925233&4294967295,S=k+(N<<17&4294967295|N>>>15),N=V+(L^S&(k^L))+F[11]+2304563134&4294967295,V=S+(N<<22&4294967295|N>>>10),N=L+(k^V&(S^k))+F[12]+1804603682&4294967295,L=V+(N<<7&4294967295|N>>>25),N=k+(S^L&(V^S))+F[13]+4254626195&4294967295,k=L+(N<<12&4294967295|N>>>20),N=S+(V^k&(L^V))+F[14]+2792965006&4294967295,S=k+(N<<17&4294967295|N>>>15),N=V+(L^S&(k^L))+F[15]+1236535329&4294967295,V=S+(N<<22&4294967295|N>>>10),N=L+(S^k&(V^S))+F[1]+4129170786&4294967295,L=V+(N<<5&4294967295|N>>>27),N=k+(V^S&(L^V))+F[6]+3225465664&4294967295,k=L+(N<<9&4294967295|N>>>23),N=S+(L^V&(k^L))+F[11]+643717713&4294967295,S=k+(N<<14&4294967295|N>>>18),N=V+(k^L&(S^k))+F[0]+3921069994&4294967295,V=S+(N<<20&4294967295|N>>>12),N=L+(S^k&(V^S))+F[5]+3593408605&4294967295,L=V+(N<<5&4294967295|N>>>27),N=k+(V^S&(L^V))+F[10]+38016083&4294967295,k=L+(N<<9&4294967295|N>>>23),N=S+(L^V&(k^L))+F[15]+3634488961&4294967295,S=k+(N<<14&4294967295|N>>>18),N=V+(k^L&(S^k))+F[4]+3889429448&4294967295,V=S+(N<<20&4294967295|N>>>12),N=L+(S^k&(V^S))+F[9]+568446438&4294967295,L=V+(N<<5&4294967295|N>>>27),N=k+(V^S&(L^V))+F[14]+3275163606&4294967295,k=L+(N<<9&4294967295|N>>>23),N=S+(L^V&(k^L))+F[3]+4107603335&4294967295,S=k+(N<<14&4294967295|N>>>18),N=V+(k^L&(S^k))+F[8]+1163531501&4294967295,V=S+(N<<20&4294967295|N>>>12),N=L+(S^k&(V^S))+F[13]+2850285829&4294967295,L=V+(N<<5&4294967295|N>>>27),N=k+(V^S&(L^V))+F[2]+4243563512&4294967295,k=L+(N<<9&4294967295|N>>>23),N=S+(L^V&(k^L))+F[7]+1735328473&4294967295,S=k+(N<<14&4294967295|N>>>18),N=V+(k^L&(S^k))+F[12]+2368359562&4294967295,V=S+(N<<20&4294967295|N>>>12),N=L+(V^S^k)+F[5]+4294588738&4294967295,L=V+(N<<4&4294967295|N>>>28),N=k+(L^V^S)+F[8]+2272392833&4294967295,k=L+(N<<11&4294967295|N>>>21),N=S+(k^L^V)+F[11]+1839030562&4294967295,S=k+(N<<16&4294967295|N>>>16),N=V+(S^k^L)+F[14]+4259657740&4294967295,V=S+(N<<23&4294967295|N>>>9),N=L+(V^S^k)+F[1]+2763975236&4294967295,L=V+(N<<4&4294967295|N>>>28),N=k+(L^V^S)+F[4]+1272893353&4294967295,k=L+(N<<11&4294967295|N>>>21),N=S+(k^L^V)+F[7]+4139469664&4294967295,S=k+(N<<16&4294967295|N>>>16),N=V+(S^k^L)+F[10]+3200236656&4294967295,V=S+(N<<23&4294967295|N>>>9),N=L+(V^S^k)+F[13]+681279174&4294967295,L=V+(N<<4&4294967295|N>>>28),N=k+(L^V^S)+F[0]+3936430074&4294967295,k=L+(N<<11&4294967295|N>>>21),N=S+(k^L^V)+F[3]+3572445317&4294967295,S=k+(N<<16&4294967295|N>>>16),N=V+(S^k^L)+F[6]+76029189&4294967295,V=S+(N<<23&4294967295|N>>>9),N=L+(V^S^k)+F[9]+3654602809&4294967295,L=V+(N<<4&4294967295|N>>>28),N=k+(L^V^S)+F[12]+3873151461&4294967295,k=L+(N<<11&4294967295|N>>>21),N=S+(k^L^V)+F[15]+530742520&4294967295,S=k+(N<<16&4294967295|N>>>16),N=V+(S^k^L)+F[2]+3299628645&4294967295,V=S+(N<<23&4294967295|N>>>9),N=L+(S^(V|~k))+F[0]+4096336452&4294967295,L=V+(N<<6&4294967295|N>>>26),N=k+(V^(L|~S))+F[7]+1126891415&4294967295,k=L+(N<<10&4294967295|N>>>22),N=S+(L^(k|~V))+F[14]+2878612391&4294967295,S=k+(N<<15&4294967295|N>>>17),N=V+(k^(S|~L))+F[5]+4237533241&4294967295,V=S+(N<<21&4294967295|N>>>11),N=L+(S^(V|~k))+F[12]+1700485571&4294967295,L=V+(N<<6&4294967295|N>>>26),N=k+(V^(L|~S))+F[3]+2399980690&4294967295,k=L+(N<<10&4294967295|N>>>22),N=S+(L^(k|~V))+F[10]+4293915773&4294967295,S=k+(N<<15&4294967295|N>>>17),N=V+(k^(S|~L))+F[1]+2240044497&4294967295,V=S+(N<<21&4294967295|N>>>11),N=L+(S^(V|~k))+F[8]+1873313359&4294967295,L=V+(N<<6&4294967295|N>>>26),N=k+(V^(L|~S))+F[15]+4264355552&4294967295,k=L+(N<<10&4294967295|N>>>22),N=S+(L^(k|~V))+F[6]+2734768916&4294967295,S=k+(N<<15&4294967295|N>>>17),N=V+(k^(S|~L))+F[13]+1309151649&4294967295,V=S+(N<<21&4294967295|N>>>11),N=L+(S^(V|~k))+F[4]+4149444226&4294967295,L=V+(N<<6&4294967295|N>>>26),N=k+(V^(L|~S))+F[11]+3174756917&4294967295,k=L+(N<<10&4294967295|N>>>22),N=S+(L^(k|~V))+F[2]+718787259&4294967295,S=k+(N<<15&4294967295|N>>>17),N=V+(k^(S|~L))+F[9]+3951481745&4294967295,M.g[0]=M.g[0]+L&4294967295,M.g[1]=M.g[1]+(S+(N<<21&4294967295|N>>>11))&4294967295,M.g[2]=M.g[2]+S&4294967295,M.g[3]=M.g[3]+k&4294967295}s.prototype.v=function(M,L){L===void 0&&(L=M.length);const V=L-this.blockSize,F=this.C;let S=this.h,k=0;for(;k<L;){if(S==0)for(;k<=V;)a(this,M,k),k+=this.blockSize;if(typeof M=="string"){for(;k<L;)if(F[S++]=M.charCodeAt(k++),S==this.blockSize){a(this,F),S=0;break}}else for(;k<L;)if(F[S++]=M[k++],S==this.blockSize){a(this,F),S=0;break}}this.h=S,this.o+=L},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var L=1;L<M.length-8;++L)M[L]=0;L=this.o*8;for(var V=M.length-8;V<M.length;++V)M[V]=L&255,L/=256;for(this.v(M),M=Array(16),L=0,V=0;V<4;++V)for(let F=0;F<32;F+=8)M[L++]=this.g[V]>>>F&255;return M};function o(M,L){var V=f;return Object.prototype.hasOwnProperty.call(V,M)?V[M]:V[M]=L(M)}function u(M,L){this.h=L;const V=[];let F=!0;for(let S=M.length-1;S>=0;S--){const k=M[S]|0;F&&k==L||(V[S]=k,F=!1)}this.g=V}var f={};function m(M){return-128<=M&&M<128?o(M,function(L){return new u([L|0],L<0?-1:0)}):new u([M|0],M<0?-1:0)}function g(M){if(isNaN(M)||!isFinite(M))return x;if(M<0)return I(g(-M));const L=[];let V=1;for(let F=0;M>=V;F++)L[F]=M/V|0,V*=4294967296;return new u(L,0)}function v(M,L){if(M.length==0)throw Error("number format error: empty string");if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(M.charAt(0)=="-")return I(v(M.substring(1),L));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=g(Math.pow(L,8));let F=x;for(let k=0;k<M.length;k+=8){var S=Math.min(8,M.length-k);const N=parseInt(M.substring(k,k+S),L);S<8?(S=g(Math.pow(L,S)),F=F.j(S).add(g(N))):(F=F.j(V),F=F.add(g(N)))}return F}var x=m(0),T=m(1),A=m(16777216);r=u.prototype,r.m=function(){if(j(this))return-I(this).m();let M=0,L=1;for(let V=0;V<this.g.length;V++){const F=this.i(V);M+=(F>=0?F:4294967296+F)*L,L*=4294967296}return M},r.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(C(this))return"0";if(j(this))return"-"+I(this).toString(M);const L=g(Math.pow(M,6));var V=this;let F="";for(;;){const S=te(V,L).g;V=H(V,S.j(L));let k=((V.g.length>0?V.g[0]:V.h)>>>0).toString(M);if(V=S,C(V))return k+F;for(;k.length<6;)k="0"+k;F=k+F}},r.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function C(M){if(M.h!=0)return!1;for(let L=0;L<M.g.length;L++)if(M.g[L]!=0)return!1;return!0}function j(M){return M.h==-1}r.l=function(M){return M=H(this,M),j(M)?-1:C(M)?0:1};function I(M){const L=M.g.length,V=[];for(let F=0;F<L;F++)V[F]=~M.g[F];return new u(V,~M.h).add(T)}r.abs=function(){return j(this)?I(this):this},r.add=function(M){const L=Math.max(this.g.length,M.g.length),V=[];let F=0;for(let S=0;S<=L;S++){let k=F+(this.i(S)&65535)+(M.i(S)&65535),N=(k>>>16)+(this.i(S)>>>16)+(M.i(S)>>>16);F=N>>>16,k&=65535,N&=65535,V[S]=N<<16|k}return new u(V,V[V.length-1]&-2147483648?-1:0)};function H(M,L){return M.add(I(L))}r.j=function(M){if(C(this)||C(M))return x;if(j(this))return j(M)?I(this).j(I(M)):I(I(this).j(M));if(j(M))return I(this.j(I(M)));if(this.l(A)<0&&M.l(A)<0)return g(this.m()*M.m());const L=this.g.length+M.g.length,V=[];for(var F=0;F<2*L;F++)V[F]=0;for(F=0;F<this.g.length;F++)for(let S=0;S<M.g.length;S++){const k=this.i(F)>>>16,N=this.i(F)&65535,pe=M.i(S)>>>16,ge=M.i(S)&65535;V[2*F+2*S]+=N*ge,$(V,2*F+2*S),V[2*F+2*S+1]+=k*ge,$(V,2*F+2*S+1),V[2*F+2*S+1]+=N*pe,$(V,2*F+2*S+1),V[2*F+2*S+2]+=k*pe,$(V,2*F+2*S+2)}for(M=0;M<L;M++)V[M]=V[2*M+1]<<16|V[2*M];for(M=L;M<2*L;M++)V[M]=0;return new u(V,0)};function $(M,L){for(;(M[L]&65535)!=M[L];)M[L+1]+=M[L]>>>16,M[L]&=65535,L++}function Z(M,L){this.g=M,this.h=L}function te(M,L){if(C(L))throw Error("division by zero");if(C(M))return new Z(x,x);if(j(M))return L=te(I(M),L),new Z(I(L.g),I(L.h));if(j(L))return L=te(M,I(L)),new Z(I(L.g),L.h);if(M.g.length>30){if(j(M)||j(L))throw Error("slowDivide_ only works with positive integers.");for(var V=T,F=L;F.l(M)<=0;)V=de(V),F=de(F);var S=xe(V,1),k=xe(F,1);for(F=xe(F,2),V=xe(V,2);!C(F);){var N=k.add(F);N.l(M)<=0&&(S=S.add(V),k=N),F=xe(F,1),V=xe(V,1)}return L=H(M,S.j(L)),new Z(S,L)}for(S=x;M.l(L)>=0;){for(V=Math.max(1,Math.floor(M.m()/L.m())),F=Math.ceil(Math.log(V)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),k=g(V),N=k.j(L);j(N)||N.l(M)>0;)V-=F,k=g(V),N=k.j(L);C(k)&&(k=T),S=S.add(k),M=H(M,N)}return new Z(S,M)}r.B=function(M){return te(this,M).h},r.and=function(M){const L=Math.max(this.g.length,M.g.length),V=[];for(let F=0;F<L;F++)V[F]=this.i(F)&M.i(F);return new u(V,this.h&M.h)},r.or=function(M){const L=Math.max(this.g.length,M.g.length),V=[];for(let F=0;F<L;F++)V[F]=this.i(F)|M.i(F);return new u(V,this.h|M.h)},r.xor=function(M){const L=Math.max(this.g.length,M.g.length),V=[];for(let F=0;F<L;F++)V[F]=this.i(F)^M.i(F);return new u(V,this.h^M.h)};function de(M){const L=M.g.length+1,V=[];for(let F=0;F<L;F++)V[F]=M.i(F)<<1|M.i(F-1)>>>31;return new u(V,M.h)}function xe(M,L){const V=L>>5;L%=32;const F=M.g.length-V,S=[];for(let k=0;k<F;k++)S[k]=L>0?M.i(k+V)>>>L|M.i(k+V+1)<<32-L:M.i(k+V);return new u(S,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,RT=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=v,ol=u}).apply(typeof U_<"u"?U_:typeof self<"u"?self:typeof window<"u"?window:{});var kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var IT,Au,OT,td,Bp,DT,jT,LT;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof kf=="object"&&kf];for(var b=0;b<h.length;++b){var w=h[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function a(h,b){if(b)e:{var w=s;h=h.split(".");for(var D=0;D<h.length-1;D++){var Q=h[D];if(!(Q in w))break e;w=w[Q]}h=h[h.length-1],D=w[h],b=b(D),b!=D&&b!=null&&e(w,h,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(b){var w=[],D;for(D in b)Object.prototype.hasOwnProperty.call(b,D)&&w.push([D,b[D]]);return w}});var o=o||{},u=this||self;function f(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function m(h,b,w){return h.call.apply(h.bind,arguments)}function g(h,b,w){return g=m,g.apply(null,arguments)}function v(h,b){var w=Array.prototype.slice.call(arguments,1);return function(){var D=w.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function x(h,b){function w(){}w.prototype=b.prototype,h.Z=b.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(D,Q,re){for(var _e=Array(arguments.length-2),He=2;He<arguments.length;He++)_e[He-2]=arguments[He];return b.prototype[Q].apply(D,_e)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function A(h){const b=h.length;if(b>0){const w=Array(b);for(let D=0;D<b;D++)w[D]=h[D];return w}return[]}function C(h,b){for(let D=1;D<arguments.length;D++){const Q=arguments[D];var w=typeof Q;if(w=w!="object"?w:Q?Array.isArray(Q)?"array":w:"null",w=="array"||w=="object"&&typeof Q.length=="number"){w=h.length||0;const re=Q.length||0;h.length=w+re;for(let _e=0;_e<re;_e++)h[w+_e]=Q[_e]}else h.push(Q)}}class j{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function I(h){u.setTimeout(()=>{throw h},0)}function H(){var h=M;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class ${constructor(){this.h=this.g=null}add(b,w){const D=Z.get();D.set(b,w),this.h?this.h.next=D:this.g=D,this.h=D}}var Z=new j(()=>new te,h=>h.reset());class te{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let de,xe=!1,M=new $,L=()=>{const h=Promise.resolve(void 0);de=()=>{h.then(V)}};function V(){for(var h;h=H();){try{h.h.call(h.g)}catch(w){I(w)}var b=Z;b.j(h),b.h<100&&(b.h++,h.next=b.g,b.g=h)}xe=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};u.addEventListener("test",w,b),u.removeEventListener("test",w,b)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function pe(h,b){S.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,b)}x(pe,S),pe.prototype.init=function(h,b){const w=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget,b||(w=="mouseover"?b=h.fromElement:w=="mouseout"&&(b=h.toElement)),this.relatedTarget=b,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),z=0;function J(h,b,w,D,Q){this.listener=h,this.proxy=null,this.src=b,this.type=w,this.capture=!!D,this.ha=Q,this.key=++z,this.da=this.fa=!1}function ce(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function be(h,b,w){for(const D in h)b.call(w,h[D],D,h)}function ve(h,b){for(const w in h)b.call(void 0,h[w],w,h)}function P(h){const b={};for(const w in h)b[w]=h[w];return b}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(h,b){let w,D;for(let Q=1;Q<arguments.length;Q++){D=arguments[Q];for(w in D)h[w]=D[w];for(let re=0;re<Y.length;re++)w=Y[re],Object.prototype.hasOwnProperty.call(D,w)&&(h[w]=D[w])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,b,w,D,Q){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const _e=we(h,b,D,Q);return _e>-1?(b=h[_e],w||(b.fa=!1)):(b=new J(b,this.src,re,!!D,Q),b.fa=w,h.push(b)),b};function ye(h,b){const w=b.type;if(w in h.g){var D=h.g[w],Q=Array.prototype.indexOf.call(D,b,void 0),re;(re=Q>=0)&&Array.prototype.splice.call(D,Q,1),re&&(ce(b),h.g[w].length==0&&(delete h.g[w],h.h--))}}function we(h,b,w,D){for(let Q=0;Q<h.length;++Q){const re=h[Q];if(!re.da&&re.listener==b&&re.capture==!!w&&re.ha==D)return Q}return-1}var De="closure_lm_"+(Math.random()*1e6|0),Ie={};function je(h,b,w,D,Q){if(Array.isArray(b)){for(let re=0;re<b.length;re++)je(h,b[re],w,D,Q);return null}return w=Di(w),h&&h[ge]?h.J(b,w,f(D)?!!D.capture:!1,Q):Qe(h,b,w,!1,D,Q)}function Qe(h,b,w,D,Q,re){if(!b)throw Error("Invalid event type");const _e=f(Q)?!!Q.capture:!!Q;let He=Vr(h);if(He||(h[De]=He=new me(h)),w=He.add(b,w,D,_e,re),w.proxy)return w;if(D=Ze(),w.proxy=D,D.src=h,D.listener=w,h.addEventListener)k||(Q=_e),Q===void 0&&(Q=!1),h.addEventListener(b.toString(),D,Q);else if(h.attachEvent)h.attachEvent(dt(b.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ze(){function h(w){return b.call(h.src,h.listener,w)}const b=tn;return h}function tt(h,b,w,D,Q){if(Array.isArray(b))for(var re=0;re<b.length;re++)tt(h,b[re],w,D,Q);else D=f(D)?!!D.capture:!!D,w=Di(w),h&&h[ge]?(h=h.i,re=String(b).toString(),re in h.g&&(b=h.g[re],w=we(b,w,D,Q),w>-1&&(ce(b[w]),Array.prototype.splice.call(b,w,1),b.length==0&&(delete h.g[re],h.h--)))):h&&(h=Vr(h))&&(b=h.g[b.toString()],h=-1,b&&(h=we(b,w,D,Q)),(w=h>-1?b[h]:null)&&lt(w))}function lt(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[ge])ye(b.i,h);else{var w=h.type,D=h.proxy;b.removeEventListener?b.removeEventListener(w,D,h.capture):b.detachEvent?b.detachEvent(dt(w),D):b.addListener&&b.removeListener&&b.removeListener(D),(w=Vr(b))?(ye(w,h),w.h==0&&(w.src=null,b[De]=null)):ce(h)}}}function dt(h){return h in Ie?Ie[h]:Ie[h]="on"+h}function tn(h,b){if(h.da)h=!0;else{b=new pe(b,this);const w=h.listener,D=h.ha||h.src;h.fa&&lt(h),h=w.call(D,b)}return h}function Vr(h){return h=h[De],h instanceof me?h:null}var si="__closure_events_fn_"+(Math.random()*1e9>>>0);function Di(h){return typeof h=="function"?h:(h[si]||(h[si]=function(b){return h.handleEvent(b)}),h[si])}function Ht(){F.call(this),this.i=new me(this),this.M=this,this.G=null}x(Ht,F),Ht.prototype[ge]=!0,Ht.prototype.removeEventListener=function(h,b,w,D){tt(this,h,b,w,D)};function Rt(h,b){var w,D=h.G;if(D)for(w=[];D;D=D.G)w.push(D);if(h=h.M,D=b.type||b,typeof b=="string")b=new S(b,h);else if(b instanceof S)b.target=b.target||h;else{var Q=b;b=new S(D,h),he(b,Q)}Q=!0;let re,_e;if(w)for(_e=w.length-1;_e>=0;_e--)re=b.g=w[_e],Q=_r(re,D,!0,b)&&Q;if(re=b.g=h,Q=_r(re,D,!0,b)&&Q,Q=_r(re,D,!1,b)&&Q,w)for(_e=0;_e<w.length;_e++)re=b.g=w[_e],Q=_r(re,D,!1,b)&&Q}Ht.prototype.N=function(){if(Ht.Z.N.call(this),this.i){var h=this.i;for(const b in h.g){const w=h.g[b];for(let D=0;D<w.length;D++)ce(w[D]);delete h.g[b],h.h--}}this.G=null},Ht.prototype.J=function(h,b,w,D){return this.i.add(String(h),b,!1,w,D)},Ht.prototype.K=function(h,b,w,D){return this.i.add(String(h),b,!0,w,D)};function _r(h,b,w,D){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();let Q=!0;for(let re=0;re<b.length;++re){const _e=b[re];if(_e&&!_e.da&&_e.capture==w){const He=_e.listener,un=_e.ha||_e.src;_e.fa&&ye(h.i,_e),Q=He.call(un,D)!==!1&&Q}}return Q&&!D.defaultPrevented}function Ta(h,b){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:u.setTimeout(h,b||0)}function ji(h){h.g=Ta(()=>{h.g=null,h.i&&(h.i=!1,ji(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class It extends F{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:ji(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xr(h){F.call(this),this.h=h,this.g={}}x(xr,F);var Li=[];function Pr(h){be(h.g,function(b,w){this.g.hasOwnProperty(w)&&lt(b)},h),h.g={}}xr.prototype.N=function(){xr.Z.N.call(this),Pr(this)},xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cr=u.JSON.stringify,ki=u.JSON.parse,Ln=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Mi(){}function Vi(){}var ur={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){S.call(this,"d")}x(Wt,S);function wn(){S.call(this,"c")}x(wn,S);var Ot={},js=null;function Er(){return js=js||new Ht}Ot.Ia="serverreachability";function Wn(h){S.call(this,Ot.Ia,h)}x(Wn,S);function kn(h){const b=Er();Rt(b,new Wn(b))}Ot.STAT_EVENT="statevent";function Ur(h,b){S.call(this,Ot.STAT_EVENT,h),this.stat=b}x(Ur,S);function xt(h){const b=Er();Rt(b,new Ur(b,h))}Ot.Ja="timingevent";function Jn(h,b){S.call(this,Ot.Ja,h),this.size=b}x(Jn,S);function Rn(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},b)}function Mn(){this.g=!0}Mn.prototype.ua=function(){this.g=!1};function Pi(h,b,w,D,Q,re){h.info(function(){if(h.g)if(re){var _e="",He=re.split("&");for(let mt=0;mt<He.length;mt++){var un=He[mt].split("=");if(un.length>1){const Yt=un[0];un=un[1];const gs=Yt.split("_");_e=gs.length>=2&&gs[1]=="type"?_e+(Yt+"="+un+"&"):_e+(Yt+"=redacted&")}}}else _e=null;else _e=re;return"XMLHTTP REQ ("+D+") [attempt "+Q+"]: "+b+`
`+w+`
`+_e})}function ii(h,b,w,D,Q,re,_e){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Q+"]: "+b+`
`+w+`
`+re+" "+_e})}function An(h,b,w,D){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+qr(h,w)+(D?" "+D:"")})}function as(h,b){h.info(function(){return"TIMEOUT: "+b})}Mn.prototype.info=function(){};function qr(h,b){if(!h.g)return b;if(!b)return null;try{const re=JSON.parse(b);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var w=re[h];if(!(w.length<2)){var D=w[1];if(Array.isArray(D)&&!(D.length<1)){var Q=D[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let _e=1;_e<D.length;_e++)D[_e]=""}}}}return cr(re)}catch{return b}}var Ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ui={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qi;function ls(){}x(ls,Mi),ls.prototype.g=function(){return new XMLHttpRequest},qi=new ls;function hr(h){return encodeURIComponent(String(h))}function nn(h){var b=1;h=h.split(":");const w=[];for(;b>0&&h.length;)w.push(h.shift()),b--;return h.length&&w.push(h.join(":")),w}function fr(h,b,w,D){this.j=h,this.i=b,this.l=w,this.S=D||1,this.V=new xr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new dr}function dr(){this.i=null,this.g="",this.h=!1}var Ft={},rn={};function Tr(h,b,w){h.M=1,h.A=cs($t(b)),h.u=w,h.R=!0,Jt(h,null)}function Jt(h,b){h.F=Date.now(),wr(h),h.B=$t(h.A);var w=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),ui(w.i,"t",D),h.C=0,w=h.j.L,h.h=new dr,h.g=Sh(h.j,w?b:null,!h.u),h.P>0&&(h.O=new It(g(h.Y,h,h.g),h.P)),b=h.V,w=h.g,D=h.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Li[0]=Q.toString()),Q=Li);for(let re=0;re<Q.length;re++){const _e=je(w,Q[re],D||b.handleEvent,!1,b.h||b);if(!_e)break;b.g[_e.key]=_e}b=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,b)):(h.v="GET",h.g.ea(h.B,h.v,null,b)),kn(),Pi(h.i,h.v,h.B,h.l,h.S,h.u)}fr.prototype.ba=function(h){h=h.target;const b=this.O;b&&q(h)==3?b.j():this.Y(h)},fr.prototype.Y=function(h){try{if(h==this.g)e:{const He=q(this.g),un=this.g.ya(),mt=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||ne(this.g)))){this.K||He!=4||un==7||(un==8||mt<=0?kn(3):kn(2)),kt(this);var b=this.g.ca();this.X=b;var w=Cl(this);if(this.o=b==200,ii(this.i,this.v,this.B,this.l,this.S,He,b),this.o){if(this.U&&!this.L){t:{if(this.g){var D,Q=this.g;if((D=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(D)){var re=D;break t}}re=null}if(h=re)An(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ar(this,h);else{this.o=!1,this.m=3,xt(12),Vn(this),er(this);break e}}if(this.R){h=!0;let Yt;for(;!this.K&&this.C<w.length;)if(Yt=Aa(this,w),Yt==rn){He==4&&(this.m=4,xt(14),h=!1),An(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Ft){this.m=4,xt(15),An(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else An(this.i,this.l,Yt,null),Ar(this,Yt);if(wa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||w.length!=0||this.h.h||(this.m=1,xt(16),h=!1),this.o=this.o&&h,!h)An(this.i,this.l,w,"[Invalid Chunked Response]"),Vn(this),er(this);else if(w.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),$r(_e),_e.P=!0,xt(11))}}else An(this.i,this.l,w,null),Ar(this,w);He==4&&Vn(this),this.o&&!this.K&&(He==4?$i(this.j,this):(this.o=!1,wr(this)))}else Me(this.g),b==400&&w.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),Vn(this),er(this)}}}catch{}finally{}};function Cl(h){if(!wa(h))return h.g.la();const b=ne(h.g);if(b==="")return"";let w="";const D=b.length,Q=q(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Vn(h),er(h),"";h.h.i=new u.TextDecoder}for(let re=0;re<D;re++)h.h.h=!0,w+=h.h.i.decode(b[re],{stream:!(Q&&re==D-1)});return b.length=0,h.h.g+=w,h.C=0,h.h.g}function wa(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Aa(h,b){var w=h.C,D=b.indexOf(`
`,w);return D==-1?rn:(w=Number(b.substring(w,D)),isNaN(w)?Ft:(D+=1,D+w>b.length?rn:(b=b.slice(D,D+w),h.C=D+w,b)))}fr.prototype.cancel=function(){this.K=!0,Vn(this)};function wr(h){h.T=Date.now()+h.H,ai(h,h.H)}function ai(h,b){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Rn(g(h.aa,h),b)}function kt(h){h.D&&(u.clearTimeout(h.D),h.D=null)}fr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(as(this.i,this.B),this.M!=2&&(kn(),xt(17)),Vn(this),this.m=2,er(this)):ai(this,this.T-h)};function er(h){h.j.I==0||h.K||$i(h.j,h)}function Vn(h){kt(h);var b=h.O;b&&typeof b.dispose=="function"&&b.dispose(),h.O=null,Pr(h.V),h.g&&(b=h.g,h.g=null,b.abort(),b.dispose())}function Ar(h,b){try{var w=h.j;if(w.I!=0&&(w.g==h||Pn(w.h,h))){if(!h.L&&Pn(w.h,h)&&w.I==3){try{var D=w.Ba.g.parse(b)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Q=D;if(Q[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Us(w),vt(w);else break e;zn(w),xt(18)}}else w.xa=Q[1],0<w.xa-w.K&&Q[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Rn(g(w.Va,w),6e3));mr(w.h)<=1&&w.ta&&(w.ta=void 0)}else fi(w,11)}else if((h.L||w.g==h)&&Us(w),!N(b))for(Q=w.Ba.g.parse(b),b=0;b<Q.length;b++){let mt=Q[b];const Yt=mt[0];if(!(Yt<=w.K))if(w.K=Yt,mt=mt[1],w.I==2)if(mt[0]=="c"){w.M=mt[1],w.ba=mt[2];const gs=mt[3];gs!=null&&(w.ka=gs,w.j.info("VER="+w.ka));const di=mt[4];di!=null&&(w.za=di,w.j.info("SVER="+w.za));const qs=mt[5];qs!=null&&typeof qs=="number"&&qs>0&&(D=1.5*qs,w.O=D,w.j.info("backChannelRequestTimeoutMs_="+D)),D=w;const Bs=h.g;if(Bs){const Il=Bs.g?Bs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var re=D.h;re.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(tr(re,re.h),re.h=null))}if(D.G){const bo=Bs.g?Bs.g.getResponseHeader("X-HTTP-Session-Id"):null;bo&&(D.wa=bo,ct(D.J,D.G,bo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),D=w;var _e=h;if(D.na=Ah(D,D.L?D.ba:null,D.W),_e.L){ks(D.h,_e);var He=_e,un=D.O;un&&(He.H=un),He.D&&(kt(He),wr(He)),D.g=_e}else Gr(D);w.i.length>0&&Nt(w)}else mt[0]!="stop"&&mt[0]!="close"||fi(w,7);else w.I==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?fi(w,7):Xe(w):mt[0]!="noop"&&w.l&&w.l.qa(mt),w.A=0)}}kn(4)}catch{}}var Gt=class{constructor(h,b){this.g=h,this.map=b}};function Bi(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function os(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function mr(h){return h.h?1:h.g?h.g.size:0}function Pn(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function tr(h,b){h.g?h.g.add(b):h.h=b}function ks(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}Bi.prototype.cancel=function(){if(this.i=zi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function zi(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const w of h.g.values())b=b.concat(w.G);return b}return A(h.i)}var Sa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function li(h,b){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const D=h[w].indexOf("=");let Q,re=null;D>=0?(Q=h[w].substring(0,D),re=h[w].substring(D+1)):Q=h[w],b(Q,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Un(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;h instanceof Un?(this.l=h.l,Mt(this,h.j),this.o=h.o,this.g=h.g,Sr(this,h.u),this.h=h.h,Br(this,Na(h.i)),this.m=h.m):h&&(b=String(h).match(Sa))?(this.l=!1,Mt(this,b[1]||"",!0),this.o=Nr(b[2]||""),this.g=Nr(b[3]||"",!0),Sr(this,b[4]),this.h=Nr(b[5]||"",!0),Br(this,b[6]||"",!0),this.m=Nr(b[7]||"")):(this.l=!1,this.i=new gn(null,this.l))}Un.prototype.toString=function(){const h=[];var b=this.j;b&&h.push(Ms(b,oi,!0),":");var w=this.g;return(w||b=="file")&&(h.push("//"),(b=this.o)&&h.push(Ms(b,oi,!0),"@"),h.push(hr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Ms(w,w.charAt(0)=="/"?Hi:ci,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Ms(w,hs)),h.join("")},Un.prototype.resolve=function(h){const b=$t(this);let w=!!h.j;w?Mt(b,h.j):w=!!h.o,w?b.o=h.o:w=!!h.g,w?b.g=h.g:w=h.u!=null;var D=h.h;if(w)Sr(b,h.u);else if(w=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var Q=b.h.lastIndexOf("/");Q!=-1&&(D=b.h.slice(0,Q+1)+D)}if(Q=D,Q==".."||Q==".")D="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){D=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const re=[];for(let _e=0;_e<Q.length;){const He=Q[_e++];He=="."?D&&_e==Q.length&&re.push(""):He==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),D&&_e==Q.length&&re.push("")):(re.push(He),D=!0)}D=re.join("/")}else D=Q}return w?b.h=D:w=h.i.toString()!=="",w?Br(b,Na(h.i)):w=!!h.m,w&&(b.m=h.m),b};function $t(h){return new Un(h)}function Mt(h,b,w){h.j=w?Nr(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function Sr(h,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);h.u=b}else h.u=null}function Br(h,b,w){b instanceof gn?(h.i=b,hi(h.i,h.l)):(w||(b=Ms(b,us)),h.i=new gn(b,h.l))}function ct(h,b,w){h.i.set(b,w)}function cs(h){return ct(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Nr(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ms(h,b,w){return typeof h=="string"?(h=encodeURI(h).replace(b,In),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function In(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var oi=/[#\/\?@]/g,ci=/[#\?:]/g,Hi=/[#\?]/g,us=/[#\?@]/g,hs=/#/g;function gn(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function Kt(h){h.g||(h.g=new Map,h.h=0,h.i&&li(h.i,function(b,w){h.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}r=gn.prototype,r.add=function(h,b){Kt(this),this.i=null,h=fs(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(b),this.h+=1,this};function Cr(h,b){Kt(h),b=fs(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function Fi(h,b){return Kt(h),b=fs(h,b),h.g.has(b)}r.forEach=function(h,b){Kt(this),this.g.forEach(function(w,D){w.forEach(function(Q){h.call(b,Q,D,this)},this)},this)};function nr(h,b){Kt(h);let w=[];if(typeof b=="string")Fi(h,b)&&(w=w.concat(h.g.get(fs(h,b))));else for(h=Array.from(h.g.values()),b=0;b<h.length;b++)w=w.concat(h[b]);return w}r.set=function(h,b){return Kt(this),this.i=null,h=fs(this,h),Fi(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},r.get=function(h,b){return h?(h=nr(this,h),h.length>0?String(h[0]):b):b};function ui(h,b,w){Cr(h,b),w.length>0&&(h.i=null,h.g.set(fs(h,b),A(w)),h.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(let D=0;D<b.length;D++){var w=b[D];const Q=hr(w);w=nr(this,w);for(let re=0;re<w.length;re++){let _e=Q;w[re]!==""&&(_e+="="+hr(w[re])),h.push(_e)}}return this.i=h.join("&")};function Na(h){const b=new gn;return b.i=h.i,h.g&&(b.g=new Map(h.g),b.h=h.h),b}function fs(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function hi(h,b){b&&!h.j&&(Kt(h),h.i=null,h.g.forEach(function(w,D){const Q=D.toLowerCase();D!=Q&&(Cr(this,D),ui(this,Q,w))},h)),h.j=b}function rr(h,b){const w=new Mn;if(u.Image){const D=new Image;D.onload=v(qn,w,"TestLoadImage: loaded",!0,b,D),D.onerror=v(qn,w,"TestLoadImage: error",!1,b,D),D.onabort=v(qn,w,"TestLoadImage: abort",!1,b,D),D.ontimeout=v(qn,w,"TestLoadImage: timeout",!1,b,D),u.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else b(!1)}function on(h,b){const w=new Mn,D=new AbortController,Q=setTimeout(()=>{D.abort(),qn(w,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:D.signal}).then(re=>{clearTimeout(Q),re.ok?qn(w,"TestPingServer: ok",!0,b):qn(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Q),qn(w,"TestPingServer: error",!1,b)})}function qn(h,b,w,D,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),D(w)}catch{}}function zr(){this.g=new Ln}function Bn(h){this.i=h.Sb||null,this.h=h.ab||!1}x(Bn,Mi),Bn.prototype.g=function(){return new Hr(this.i,this.h)};function Hr(h,b){Ht.call(this),this.H=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Hr,Ht),r=Hr.prototype,r.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=b,this.readyState=1,sr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(b.body=h),(this.H||u).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ds(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,sr(this)),this.g&&(this.readyState=3,sr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?ds(this):sr(this),this.readyState==3&&Fr(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,ds(this))},r.Na=function(h){this.g&&(this.response=h,ds(this))},r.ga=function(){this.g&&ds(this)};function ds(h){h.readyState=4,h.l=null,h.j=null,h.B=null,sr(h)}r.setRequestHeader=function(h,b){this.A.append(h,b)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=b.next();return h.join(`\r
`)};function sr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Hr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function On(h){let b="";return be(h,function(w,D){b+=D,b+=":",b+=w,b+=`\r
`}),b}function ms(h,b,w){e:{for(D in w){var D=!1;break e}D=!0}D||(w=On(w),typeof h=="string"?w!=null&&hr(w):ct(h,b,w))}function Ye(h){Ht.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(Ye,Ht);var gr=/^https?$/i,Vs=["POST","PUT"];r=Ye.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,b,w,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qi.g(),this.g.onreadystatechange=T(g(this.Ca,this));try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(re){Ps(this,re);return}if(h=w||"",w=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Q in D)w.set(Q,D[Q]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const re of D.keys())w.set(re,D.get(re));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(w.keys()).find(re=>re.toLowerCase()=="content-type"),Q=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(Vs,b,void 0)>=0)||D||Q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,_e]of w)this.g.setRequestHeader(re,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){Ps(this,re)}};function Ps(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.o=5,Gi(h),O(h)}function Gi(h){h.A||(h.A=!0,Rt(h,"complete"),Rt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Rt(this,"complete"),Rt(this,"abort"),O(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),O(this,!0)),Ye.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?_(this):this.Xa())},r.Xa=function(){_(this)};function _(h){if(h.h&&typeof o<"u"){if(h.v&&q(h)==4)setTimeout(h.Ca.bind(h),0);else if(Rt(h,"readystatechange"),q(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var w;if(!(w=b)){var D;if(D=re===0){let _e=String(h.D).match(Sa)[1]||null;!_e&&u.self&&u.self.location&&(_e=u.self.location.protocol.slice(0,-1)),D=!gr.test(_e?_e.toLowerCase():"")}w=D}if(w)Rt(h,"complete"),Rt(h,"success");else{h.o=6;try{var Q=q(h)>2?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.ca()+"]",Gi(h)}}finally{O(h)}}}}function O(h,b){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,b||Rt(h,"ready");try{w.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function q(h){return h.g?h.g.readyState:0}r.ca=function(){try{return q(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),ki(b)}};function ne(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Me(h){const b={};h=(h.g&&q(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(N(h[D]))continue;var w=nn(h[D]);const Q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const re=b[Q]||[];b[Q]=re,re.push(w)}ve(b,function(D){return D.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ae(h,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||b}function Ge(h){this.za=0,this.i=[],this.j=new Mn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ae("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ae("baseRetryDelayMs",5e3,h),this.Za=Ae("retryDelaySeedMs",1e4,h),this.Ta=Ae("forwardChannelMaxRetries",2,h),this.va=Ae("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Bi(h&&h.concurrentRequestLimit),this.Ba=new zr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ge.prototype,r.ka=8,r.I=1,r.connect=function(h,b,w,D){xt(0),this.W=h,this.H=b||{},w&&D!==void 0&&(this.H.OSID=w,this.H.OAID=D),this.F=this.X,this.J=Ah(this,null,this.W),Nt(this)};function Xe(h){if(We(h),h.I==3){var b=h.V++,w=$t(h.J);if(ct(w,"SID",h.M),ct(w,"RID",b),ct(w,"TYPE","terminate"),Qt(h,w),b=new fr(h,h.j,b),b.M=2,b.A=cs($t(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(b.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=b.A,w=!0),w||(b.g=Sh(b.j,null),b.g.ea(b.A)),b.F=Date.now(),wr(b)}wh(h)}function vt(h){h.g&&($r(h),h.g.cancel(),h.g=null)}function We(h){vt(h),h.v&&(u.clearTimeout(h.v),h.v=null),Us(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function Nt(h){if(!os(h.h)&&!h.m){h.m=!0;var b=h.Ea;de||L(),xe||(de(),xe=!0),M.add(b,h),h.D=0}}function cn(h,b){return mr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=b.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Rn(g(h.Ea,h,b),Th(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Q=new fr(this,this.j,h);let re=this.o;if(this.U&&(re?(re=P(re),he(re,this.U)):re=this.U),this.u!==null||this.R||(Q.J=re,re=null),this.S)e:{for(var b=0,w=0;w<this.i.length;w++){t:{var D=this.i[w];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(b+=D,b>4096){b=w;break e}if(b===4096||w===this.i.length-1){b=w+1;break e}}b=1e3}else b=1e3;b=sn(this,Q,b),w=$t(this.J),ct(w,"RID",h),ct(w,"CVER",22),this.G&&ct(w,"X-HTTP-Session-Id",this.G),Qt(this,w),re&&(this.R?b="headers="+hr(On(re))+"&"+b:this.u&&ms(w,this.u,re)),tr(this.h,Q),this.Ra&&ct(w,"TYPE","init"),this.S?(ct(w,"$req",b),ct(w,"SID","null"),Q.U=!0,Tr(Q,w,null)):Tr(Q,w,b),this.I=2}}else this.I==3&&(h?Vt(this,h):this.i.length==0||os(this.h)||Vt(this))};function Vt(h,b){var w;b?w=b.l:w=h.V++;const D=$t(h.J);ct(D,"SID",h.M),ct(D,"RID",w),ct(D,"AID",h.K),Qt(h,D),h.u&&h.o&&ms(D,h.u,h.o),w=new fr(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),b&&(h.i=b.G.concat(h.i)),b=sn(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),tr(h.h,w),Tr(w,D,b)}function Qt(h,b){h.H&&be(h.H,function(w,D){ct(b,D,w)}),h.l&&be({},function(w,D){ct(b,D,w)})}function sn(h,b,w){w=Math.min(h.i.length,w);const D=h.l?g(h.l.Ka,h.l,h):null;e:{var Q=h.i;let He=-1;for(;;){const un=["count="+w];He==-1?w>0?(He=Q[0].g,un.push("ofs="+He)):He=0:un.push("ofs="+He);let mt=!0;for(let Yt=0;Yt<w;Yt++){var re=Q[Yt].g;const gs=Q[Yt].map;if(re-=He,re<0)He=Math.max(0,Q[Yt].g-100),mt=!1;else try{re="req"+re+"_"||"";try{var _e=gs instanceof Map?gs:Object.entries(gs);for(const[di,qs]of _e){let Bs=qs;f(qs)&&(Bs=cr(qs)),un.push(re+di+"="+encodeURIComponent(Bs))}}catch(di){throw un.push(re+"type="+encodeURIComponent("_badmap")),di}}catch{D&&D(gs)}}if(mt){_e=un.join("&");break e}}_e=void 0}return h=h.i.splice(0,w),b.G=h,_e}function Gr(h){if(!h.g&&!h.v){h.Y=1;var b=h.Da;de||L(),xe||(de(),xe=!0),M.add(b,h),h.A=0}}function zn(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Rn(g(h.Da,h),Th(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Rl(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Rn(g(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),vt(this),Rl(this))};function $r(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function Rl(h){h.g=new fr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var b=$t(h.na);ct(b,"RID","rpc"),ct(b,"SID",h.M),ct(b,"AID",h.K),ct(b,"CI",h.F?"0":"1"),!h.F&&h.ia&&ct(b,"TO",h.ia),ct(b,"TYPE","xmlhttp"),Qt(h,b),h.u&&h.o&&ms(b,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=cs($t(b)),w.u=null,w.R=!0,Jt(w,h)}r.Va=function(){this.C!=null&&(this.C=null,vt(this),zn(this),xt(19))};function Us(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function $i(h,b){var w=null;if(h.g==b){Us(h),$r(h),h.g=null;var D=2}else if(Pn(h.h,b))w=b.G,ks(h.h,b),D=1;else return;if(h.I!=0){if(b.o)if(D==1){w=b.u?b.u.length:0,b=Date.now()-b.F;var Q=h.D;D=Er(),Rt(D,new Jn(D,w)),Nt(h)}else Gr(h);else if(Q=b.m,Q==3||Q==0&&b.X>0||!(D==1&&cn(h,b)||D==2&&zn(h)))switch(w&&w.length>0&&(b=h.h,b.i=b.i.concat(w)),Q){case 1:fi(h,5);break;case 4:fi(h,10);break;case 3:fi(h,6);break;default:fi(h,2)}}}function Th(h,b){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*b}function fi(h,b){if(h.j.info("Error code "+b),b==2){var w=g(h.bb,h),D=h.Ua;const Q=!D;D=new Un(D||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Mt(D,"https"),cs(D),Q?rr(D.toString(),w):on(D.toString(),w)}else xt(2);h.I=0,h.l&&h.l.pa(b),wh(h),We(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function wh(h){if(h.I=0,h.ja=[],h.l){const b=zi(h.h);(b.length!=0||h.i.length!=0)&&(C(h.ja,b),C(h.ja,h.i),h.h.i.length=0,A(h.i),h.i.length=0),h.l.oa()}}function Ah(h,b,w){var D=w instanceof Un?$t(w):new Un(w);if(D.g!="")b&&(D.g=b+"."+D.g),Sr(D,D.u);else{var Q=u.location;D=Q.protocol,b=b?b+"."+Q.hostname:Q.hostname,Q=+Q.port;const re=new Un(null);D&&Mt(re,D),b&&(re.g=b),Q&&Sr(re,Q),w&&(re.h=w),D=re}return w=h.G,b=h.wa,w&&b&&ct(D,w,b),ct(D,"VER",h.ka),Qt(h,D),D}function Sh(h,b,w){if(b&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Aa&&!h.ma?new Ye(new Bn({ab:w})):new Ye(h.ma),b.Fa(h.L),b}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nh(){}r=Nh.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ca(){}Ca.prototype.g=function(h,b){return new pr(h,b)};function pr(h,b){Ht.call(this),this.g=new Ge(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(h?h["X-WebChannel-Client-Profile"]=b.sa:h={"X-WebChannel-Client-Profile":b.sa}),this.g.U=h,(h=b&&b.Qb)&&!N(h)&&(this.g.u=h),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!N(b)&&(this.g.G=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new Ki(this)}x(pr,Ht),pr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pr.prototype.close=function(){Xe(this.g)},pr.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=cr(h),h=w);b.i.push(new Gt(b.Ya++,h)),b.I==3&&Nt(b)},pr.prototype.N=function(){this.g.l=null,delete this.j,Xe(this.g),delete this.g,pr.Z.N.call(this)};function Ch(h){Wt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const w in b){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}x(Ch,Wt);function Rh(){wn.call(this),this.status=1}x(Rh,wn);function Ki(h){this.g=h}x(Ki,Nh),Ki.prototype.ra=function(){Rt(this.g,"a")},Ki.prototype.qa=function(h){Rt(this.g,new Ch(h))},Ki.prototype.pa=function(h){Rt(this.g,new Rh)},Ki.prototype.oa=function(){Rt(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,pr.prototype.send=pr.prototype.o,pr.prototype.open=pr.prototype.m,pr.prototype.close=pr.prototype.close,LT=function(){return new Ca},jT=function(){return Er()},DT=Ot,Bp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ls.NO_ERROR=0,Ls.TIMEOUT=8,Ls.HTTP_ERROR=6,td=Ls,Ui.COMPLETE="complete",OT=Ui,Vi.EventType=ur,ur.OPEN="a",ur.CLOSE="b",ur.ERROR="c",ur.MESSAGE="d",Ht.prototype.listen=Ht.prototype.J,Au=Vi,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,IT=Ye}).apply(typeof kf<"u"?kf:typeof self<"u"?self:typeof window<"u"?window:{});const q_="@firebase/firestore",B_="4.9.2";class Lr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lr.UNAUTHENTICATED=new Lr(null),Lr.GOOGLE_CREDENTIALS=new Lr("google-credentials-uid"),Lr.FIRST_PARTY=new Lr("first-party-uid"),Lr.MOCK_USER=new Lr("mock-user");let Sc="12.3.0";const Wl=new ky("@firebase/firestore");function Yo(){return Wl.logLevel}function Te(r,...e){if(Wl.logLevel<=st.DEBUG){const t=e.map(Py);Wl.debug(`Firestore (${Sc}): ${r}`,...t)}}function ma(r,...e){if(Wl.logLevel<=st.ERROR){const t=e.map(Py);Wl.error(`Firestore (${Sc}): ${r}`,...t)}}function Bu(r,...e){if(Wl.logLevel<=st.WARN){const t=e.map(Py);Wl.warn(`Firestore (${Sc}): ${r}`,...t)}}function Py(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Ue(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,kT(r,s,t)}function kT(r,e,t){let s=`FIRESTORE (${Sc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ma(s),new Error(s)}function pt(r,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,r||kT(e,a,s)}function qe(r,e){return r}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends ba{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class g4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Lr.UNAUTHENTICATED)))}shutdown(){}}class y4{constructor(e){this.t=e,this.currentUser=Lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pt(this.o===void 0,42304);let s=this.i;const a=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let o=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xi,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=o;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xi)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(pt(typeof s.accessToken=="string",31837,{l:s}),new g4(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string",2055,{h:e}),new Lr(e)}}class v4{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Lr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class b4{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new v4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Lr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class z_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ss(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pt(this.o===void 0,3512);const s=o=>{o.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,Te("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>s(o)))};const a=o=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>a(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new z_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(pt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new z_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function x4(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Uy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=x4(40);for(let o=0;o<a.length;++o)s.length<20&&a[o]<t&&(s+=e.charAt(a[o]%62))}return s}}function it(r,e){return r<e?-1:r>e?1:0}function zp(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const a=r.charAt(s),o=e.charAt(s);if(a!==o)return dp(a)===dp(o)?it(a,o):dp(a)?1:-1}return it(r.length,e.length)}const E4=55296,T4=57343;function dp(r){const e=r.charCodeAt(0);return e>=E4&&e<=T4}function dc(r,e,t){return r.length===e.length&&r.every(((s,a)=>t(s,e[a])))}const H_="__name__";class bi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ue(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ue(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const o=bi.compareSegments(e.get(a),t.get(a));if(o!==0)return o}return it(e.length,t.length)}static compareSegments(e,t){const s=bi.isNumericId(e),a=bi.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?bi.extractNumericId(e).compare(bi.extractNumericId(t)):zp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ol.fromString(e.substring(4,e.length-2))}}class jt extends bi{construct(e,t,s){return new jt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new jt(t)}static emptyPath(){return new jt([])}}const w4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends bi{construct(e,t,s){return new Qn(e,t,s)}static isValidIdentifier(e){return w4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===H_}static keyField(){return new Qn([H_])}static fromServerFormat(e){const t=[];let s="",a=0;const o=()=>{if(s.length===0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new Ee(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ee(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(s+=f,a++):(o(),a++)}if(o(),u)throw new Ee(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(t)}static emptyPath(){return new Qn([])}}class ke{constructor(e){this.path=e}static fromPath(e){return new ke(jt.fromString(e))}static fromName(e){return new ke(jt.fromString(e).popFirst(5))}static empty(){return new ke(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new jt(e.slice()))}}function MT(r,e,t){if(!t)throw new Ee(oe.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function A4(r,e,t,s){if(e===!0&&s===!0)throw new Ee(oe.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function F_(r){if(!ke.isDocumentKey(r))throw new Ee(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function G_(r){if(ke.isDocumentKey(r))throw new Ee(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function VT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Dd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ue(12329,{type:typeof r})}function Ws(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ee(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Dd(r);throw new Ee(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Tn(r,e){const t={typeString:r};return e&&(t.value=e),t}function ah(r,e){if(!VT(r))throw new Ee(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,o="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const u=r[s];if(a&&typeof u!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(o!==void 0&&u!==o.value){t=`Expected '${s}' field to equal '${o.value}'`;break}}if(t)throw new Ee(oe.INVALID_ARGUMENT,t);return!0}const $_=-62135596800,K_=1e6;class Bt{static now(){return Bt.fromMillis(Date.now())}static fromDate(e){return Bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*K_);return new Bt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$_)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/K_}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ah(e,Bt._jsonSchema))return new Bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Bt._jsonSchemaVersion="firestore/timestamp/1.0",Bt._jsonSchema={type:Tn("string",Bt._jsonSchemaVersion),seconds:Tn("number"),nanoseconds:Tn("number")};class Be{static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Bt(0,0))}static max(){return new Be(new Bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const zu=-1;function S4(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Be.fromTimestamp(s===1e9?new Bt(t+1,0):new Bt(t,s));return new dl(a,ke.empty(),e)}function N4(r){return new dl(r.readTime,r.key,zu)}class dl{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new dl(Be.min(),ke.empty(),zu)}static max(){return new dl(Be.max(),ke.empty(),zu)}}function C4(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(r.documentKey,e.documentKey),t!==0?t:it(r.largestBatchId,e.largestBatchId))}const R4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class I4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Nc(r){if(r.code!==oe.FAILED_PRECONDITION||r.message!==R4)throw r;Te("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((s,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,a)},this.catchCallback=o=>{this.wrapFailure(t,o).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,s)=>{t(e)}))}static reject(e){return new fe(((t,s)=>{s(e)}))}static waitFor(e){return new fe(((t,s)=>{let a=0,o=0,u=!1;e.forEach((f=>{++a,f.next((()=>{++o,u&&o===a&&t()}),(m=>s(m)))})),u=!0,o===a&&t()}))}static or(e){let t=fe.resolve(!1);for(const s of e)t=t.next((a=>a?fe.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,o)=>{s.push(t.call(this,a,o))})),this.waitFor(s)}static mapArray(e,t){return new fe(((s,a)=>{const o=e.length,u=new Array(o);let f=0;for(let m=0;m<o;m++){const g=m;t(e[g]).next((v=>{u[g]=v,++f,f===o&&s(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new fe(((s,a)=>{const o=()=>{e()===!0?t().next((()=>{o()}),a):s()};o()}))}}function O4(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Cc(r){return r.name==="IndexedDbTransactionError"}class jd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jd.ce=-1;const qy=-1;function Ld(r){return r==null}function ud(r){return r===0&&1/r==-1/0}function D4(r){return typeof r=="number"&&Number.isInteger(r)&&!ud(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const PT="";function j4(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Q_(e)),e=L4(r.get(t),e);return Q_(e)}function L4(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const o=r.charAt(a);switch(o){case"\0":t+="";break;case PT:t+="";break;default:t+=o}}return t}function Q_(r){return r+PT+""}function Y_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function xl(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function k4(r,e){const t=[];for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.push(e(r[s],s,r));return t}function UT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class en{constructor(e,t){this.comparator=e,this.root=t||Kn.EMPTY}insert(e,t){return new en(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mf(this.root,e,this.comparator,!0)}}class Mf{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?s(e.key,t):1,t&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kn{constructor(e,t,s,a,o){this.key=e,this.value=t,this.color=s??Kn.RED,this.left=a??Kn.EMPTY,this.right=o??Kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,o){return new Kn(e??this.key,t??this.value,s??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const o=s(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,t,s),null):o===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Kn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}Kn.EMPTY=null,Kn.RED=!0,Kn.BLACK=!1;Kn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,t,s,a,o){return this}insert(e,t,s){return new Kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new X_(this.data.getIterator())}getIteratorFrom(e){return new X_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=s.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class X_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class es{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new es([])}unionWith(e){let t=new Nn(Qn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dc(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class qT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new qT("Invalid base64 string: "+o):o}})(e);return new Zn(t)}static fromUint8Array(e){const t=(function(a){let o="";for(let u=0;u<a.length;++u)o+=String.fromCharCode(a[u]);return o})(e);return new Zn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zn.EMPTY_BYTE_STRING=new Zn("");const M4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ml(r){if(pt(!!r,39018),typeof r=="string"){let e=0;const t=M4.exec(r);if(pt(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:dn(r.seconds),nanos:dn(r.nanos)}}function dn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function gl(r){return typeof r=="string"?Zn.fromBase64String(r):Zn.fromUint8Array(r)}const BT="server_timestamp",zT="__type__",HT="__previous_value__",FT="__local_write_time__";function By(r){return(r?.mapValue?.fields||{})[zT]?.stringValue===BT}function kd(r){const e=r.mapValue.fields[HT];return By(e)?kd(e):e}function Hu(r){const e=ml(r.mapValue.fields[FT].timestampValue);return new Bt(e.seconds,e.nanos)}class V4{constructor(e,t,s,a,o,u,f,m,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=v}}const Hp="(default)";class Fu{constructor(e,t){this.projectId=e,this.database=t||Hp}static empty(){return new Fu("","")}get isDefaultDatabase(){return this.database===Hp}isEqual(e){return e instanceof Fu&&e.projectId===this.projectId&&e.database===this.database}}const GT="__type__",P4="__max__",Vf={mapValue:{}},$T="__vector__",hd="value";function pl(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?By(r)?4:q4(r)?9007199254740991:U4(r)?10:11:Ue(28295,{value:r})}function Ni(r,e){if(r===e)return!0;const t=pl(r);if(t!==pl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Hu(r).isEqual(Hu(e));case 3:return(function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const u=ml(a.timestampValue),f=ml(o.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,o){return gl(a.bytesValue).isEqual(gl(o.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,o){return dn(a.geoPointValue.latitude)===dn(o.geoPointValue.latitude)&&dn(a.geoPointValue.longitude)===dn(o.geoPointValue.longitude)})(r,e);case 2:return(function(a,o){if("integerValue"in a&&"integerValue"in o)return dn(a.integerValue)===dn(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const u=dn(a.doubleValue),f=dn(o.doubleValue);return u===f?ud(u)===ud(f):isNaN(u)&&isNaN(f)}return!1})(r,e);case 9:return dc(r.arrayValue.values||[],e.arrayValue.values||[],Ni);case 10:case 11:return(function(a,o){const u=a.mapValue.fields||{},f=o.mapValue.fields||{};if(Y_(u)!==Y_(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!Ni(u[m],f[m])))return!1;return!0})(r,e);default:return Ue(52216,{left:r})}}function Gu(r,e){return(r.values||[]).find((t=>Ni(t,e)))!==void 0}function mc(r,e){if(r===e)return 0;const t=pl(r),s=pl(e);if(t!==s)return it(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return it(r.booleanValue,e.booleanValue);case 2:return(function(o,u){const f=dn(o.integerValue||o.doubleValue),m=dn(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(r,e);case 3:return Z_(r.timestampValue,e.timestampValue);case 4:return Z_(Hu(r),Hu(e));case 5:return zp(r.stringValue,e.stringValue);case 6:return(function(o,u){const f=gl(o),m=gl(u);return f.compareTo(m)})(r.bytesValue,e.bytesValue);case 7:return(function(o,u){const f=o.split("/"),m=u.split("/");for(let g=0;g<f.length&&g<m.length;g++){const v=it(f[g],m[g]);if(v!==0)return v}return it(f.length,m.length)})(r.referenceValue,e.referenceValue);case 8:return(function(o,u){const f=it(dn(o.latitude),dn(u.latitude));return f!==0?f:it(dn(o.longitude),dn(u.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return W_(r.arrayValue,e.arrayValue);case 10:return(function(o,u){const f=o.fields||{},m=u.fields||{},g=f[hd]?.arrayValue,v=m[hd]?.arrayValue,x=it(g?.values?.length||0,v?.values?.length||0);return x!==0?x:W_(g,v)})(r.mapValue,e.mapValue);case 11:return(function(o,u){if(o===Vf.mapValue&&u===Vf.mapValue)return 0;if(o===Vf.mapValue)return 1;if(u===Vf.mapValue)return-1;const f=o.fields||{},m=Object.keys(f),g=u.fields||{},v=Object.keys(g);m.sort(),v.sort();for(let x=0;x<m.length&&x<v.length;++x){const T=zp(m[x],v[x]);if(T!==0)return T;const A=mc(f[m[x]],g[v[x]]);if(A!==0)return A}return it(m.length,v.length)})(r.mapValue,e.mapValue);default:throw Ue(23264,{he:t})}}function Z_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return it(r,e);const t=ml(r),s=ml(e),a=it(t.seconds,s.seconds);return a!==0?a:it(t.nanos,s.nanos)}function W_(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const o=mc(t[a],s[a]);if(o)return o}return it(t.length,s.length)}function gc(r){return Fp(r)}function Fp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=ml(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return gl(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ke.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",a=!0;for(const o of t.values||[])a?a=!1:s+=",",s+=Fp(o);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",o=!0;for(const u of s)o?o=!1:a+=",",a+=`${u}:${Fp(t.fields[u])}`;return a+"}"})(r.mapValue):Ue(61005,{value:r})}function nd(r){switch(pl(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kd(r);return e?16+nd(e):16;case 5:return 2*r.stringValue.length;case 6:return gl(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,o)=>a+nd(o)),0)})(r.arrayValue);case 10:case 11:return(function(s){let a=0;return xl(s.fields,((o,u)=>{a+=o.length+nd(u)})),a})(r.mapValue);default:throw Ue(13486,{value:r})}}function J_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Gp(r){return!!r&&"integerValue"in r}function zy(r){return!!r&&"arrayValue"in r}function ex(r){return!!r&&"nullValue"in r}function tx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function rd(r){return!!r&&"mapValue"in r}function U4(r){return(r?.mapValue?.fields||{})[GT]?.stringValue===$T}function Du(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return xl(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Du(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Du(r.arrayValue.values[t]);return e}return{...r}}function q4(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===P4}class Mr{constructor(e){this.value=e}static empty(){return new Mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!rd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Du(t)}setAll(e){let t=Qn.emptyPath(),s={},a=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,s,a),s={},a=[],t=f.popLast()}u?s[f.lastSegment()]=Du(u):a.push(f.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,s,a)}delete(e){const t=this.field(e.popLast());rd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ni(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];rd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){xl(t,((a,o)=>e[a]=o));for(const a of s)delete e[a]}clone(){return new Mr(Du(this.value))}}function KT(r){const e=[];return xl(r.fields,((t,s)=>{const a=new Qn([t]);if(rd(s)){const o=KT(s.mapValue).fields;if(o.length===0)e.push(a);else for(const u of o)e.push(a.child(u))}else e.push(a)})),new es(e)}class lr{constructor(e,t,s,a,o,u,f){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=o,this.data=u,this.documentState=f}static newInvalidDocument(e){return new lr(e,0,Be.min(),Be.min(),Be.min(),Mr.empty(),0)}static newFoundDocument(e,t,s,a){return new lr(e,1,t,Be.min(),s,a,0)}static newNoDocument(e,t){return new lr(e,2,t,Be.min(),Be.min(),Mr.empty(),0)}static newUnknownDocument(e,t){return new lr(e,3,t,Be.min(),Be.min(),Mr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fd{constructor(e,t){this.position=e,this.inclusive=t}}function nx(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const o=e[a],u=r.position[a];if(o.field.isKeyField()?s=ke.comparator(ke.fromName(u.referenceValue),t.key):s=mc(u,t.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function rx(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ni(r.position[t],e.position[t]))return!1;return!0}class $u{constructor(e,t="asc"){this.field=e,this.dir=t}}function B4(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class QT{}class En extends QT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new H4(e,t,s):t==="array-contains"?new $4(e,s):t==="in"?new K4(e,s):t==="not-in"?new Q4(e,s):t==="array-contains-any"?new Y4(e,s):new En(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new F4(e,s):new G4(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(mc(t,this.value)):t!==null&&pl(this.value)===pl(t)&&this.matchesComparison(mc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Js extends QT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Js(e,t)}matches(e){return YT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function YT(r){return r.op==="and"}function XT(r){return z4(r)&&YT(r)}function z4(r){for(const e of r.filters)if(e instanceof Js)return!1;return!0}function $p(r){if(r instanceof En)return r.field.canonicalString()+r.op.toString()+gc(r.value);if(XT(r))return r.filters.map((e=>$p(e))).join(",");{const e=r.filters.map((t=>$p(t))).join(",");return`${r.op}(${e})`}}function ZT(r,e){return r instanceof En?(function(s,a){return a instanceof En&&s.op===a.op&&s.field.isEqual(a.field)&&Ni(s.value,a.value)})(r,e):r instanceof Js?(function(s,a){return a instanceof Js&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((o,u,f)=>o&&ZT(u,a.filters[f])),!0):!1})(r,e):void Ue(19439)}function WT(r){return r instanceof En?(function(t){return`${t.field.canonicalString()} ${t.op} ${gc(t.value)}`})(r):r instanceof Js?(function(t){return t.op.toString()+" {"+t.getFilters().map(WT).join(" ,")+"}"})(r):"Filter"}class H4 extends En{constructor(e,t,s){super(e,t,s),this.key=ke.fromName(s.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class F4 extends En{constructor(e,t){super(e,"in",t),this.keys=JT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class G4 extends En{constructor(e,t){super(e,"not-in",t),this.keys=JT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function JT(r,e){return(e.arrayValue?.values||[]).map((t=>ke.fromName(t.referenceValue)))}class $4 extends En{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zy(t)&&Gu(t.arrayValue,this.value)}}class K4 extends En{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Gu(this.value.arrayValue,t)}}class Q4 extends En{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Gu(this.value.arrayValue,t)}}class Y4 extends En{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Gu(this.value.arrayValue,s)))}}class X4{constructor(e,t=null,s=[],a=[],o=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=o,this.startAt=u,this.endAt=f,this.Te=null}}function sx(r,e=null,t=[],s=[],a=null,o=null,u=null){return new X4(r,e,t,s,a,o,u)}function Hy(r){const e=qe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>$p(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(o){return o.field.canonicalString()+o.dir})(s))).join(","),Ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>gc(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>gc(s))).join(",")),e.Te=t}return e.Te}function Fy(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!B4(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!ZT(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!rx(r.startAt,e.startAt)&&rx(r.endAt,e.endAt)}function Kp(r){return ke.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Rc{constructor(e,t=null,s=[],a=[],o=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=o,this.limitType=u,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Z4(r,e,t,s,a,o,u,f){return new Rc(r,e,t,s,a,o,u,f)}function Gy(r){return new Rc(r)}function ix(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function ew(r){return r.collectionGroup!==null}function ju(r){const e=qe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Nn(Qn.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new $u(o,s))})),t.has(Qn.keyField().canonicalString())||e.Ie.push(new $u(Qn.keyField(),s))}return e.Ie}function Ei(r){const e=qe(r);return e.Ee||(e.Ee=tw(e,ju(r))),e.Ee}function W4(r){const e=qe(r);return e.de||(e.de=tw(e,r.explicitOrderBy)),e.de}function tw(r,e){if(r.limitType==="F")return sx(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const o=a.dir==="desc"?"asc":"desc";return new $u(a.field,o)}));const t=r.endAt?new fd(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new fd(r.startAt.position,r.startAt.inclusive):null;return sx(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Qp(r,e){const t=r.filters.concat([e]);return new Rc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Yp(r,e,t){return new Rc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Md(r,e){return Fy(Ei(r),Ei(e))&&r.limitType===e.limitType}function nw(r){return`${Hy(Ei(r))}|lt:${r.limitType}`}function Xo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>WT(a))).join(", ")}]`),Ld(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>gc(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>gc(a))).join(",")),`Target(${s})`})(Ei(r))}; limitType=${r.limitType})`}function Vd(r,e){return e.isFoundDocument()&&(function(s,a){const o=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):ke.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)})(r,e)&&(function(s,a){for(const o of ju(s))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0})(r,e)&&(function(s,a){for(const o of s.filters)if(!o.matches(a))return!1;return!0})(r,e)&&(function(s,a){return!(s.startAt&&!(function(u,f,m){const g=nx(u,f,m);return u.inclusive?g<=0:g<0})(s.startAt,ju(s),a)||s.endAt&&!(function(u,f,m){const g=nx(u,f,m);return u.inclusive?g>=0:g>0})(s.endAt,ju(s),a))})(r,e)}function J4(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function rw(r){return(e,t)=>{let s=!1;for(const a of ju(r)){const o=eI(a,e,t);if(o!==0)return o;s=s||a.field.isKeyField()}return 0}}function eI(r,e,t){const s=r.field.isKeyField()?ke.comparator(e.key,t.key):(function(o,u,f){const m=u.data.field(o),g=f.data.field(o);return m!==null&&g!==null?mc(m,g):Ue(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ue(19790,{direction:r.dir})}}class oo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,o]of s)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){xl(this.inner,((t,s)=>{for(const[a,o]of s)e(a,o)}))}isEmpty(){return UT(this.inner)}size(){return this.innerSize}}const tI=new en(ke.comparator);function ga(){return tI}const sw=new en(ke.comparator);function Su(...r){let e=sw;for(const t of r)e=e.insert(t.key,t);return e}function iw(r){let e=sw;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function $l(){return Lu()}function aw(){return Lu()}function Lu(){return new oo((r=>r.toString()),((r,e)=>r.isEqual(e)))}const nI=new en(ke.comparator),rI=new Nn(ke.comparator);function at(...r){let e=rI;for(const t of r)e=e.add(t);return e}const sI=new Nn(it);function iI(){return sI}function $y(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ud(e)?"-0":e}}function lw(r){return{integerValue:""+r}}function aI(r,e){return D4(e)?lw(e):$y(r,e)}class Pd{constructor(){this._=void 0}}function lI(r,e,t){return r instanceof Ku?(function(a,o){const u={fields:{[zT]:{stringValue:BT},[FT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&By(o)&&(o=kd(o)),o&&(u.fields[HT]=o),{mapValue:u}})(t,e):r instanceof Qu?cw(r,e):r instanceof Yu?uw(r,e):(function(a,o){const u=ow(a,o),f=ax(u)+ax(a.Ae);return Gp(u)&&Gp(a.Ae)?lw(f):$y(a.serializer,f)})(r,e)}function oI(r,e,t){return r instanceof Qu?cw(r,e):r instanceof Yu?uw(r,e):t}function ow(r,e){return r instanceof dd?(function(s){return Gp(s)||(function(o){return!!o&&"doubleValue"in o})(s)})(e)?e:{integerValue:0}:null}class Ku extends Pd{}class Qu extends Pd{constructor(e){super(),this.elements=e}}function cw(r,e){const t=hw(e);for(const s of r.elements)t.some((a=>Ni(a,s)))||t.push(s);return{arrayValue:{values:t}}}class Yu extends Pd{constructor(e){super(),this.elements=e}}function uw(r,e){let t=hw(e);for(const s of r.elements)t=t.filter((a=>!Ni(a,s)));return{arrayValue:{values:t}}}class dd extends Pd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ax(r){return dn(r.integerValue||r.doubleValue)}function hw(r){return zy(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class cI{constructor(e,t){this.field=e,this.transform=t}}function uI(r,e){return r.field.isEqual(e.field)&&(function(s,a){return s instanceof Qu&&a instanceof Qu||s instanceof Yu&&a instanceof Yu?dc(s.elements,a.elements,Ni):s instanceof dd&&a instanceof dd?Ni(s.Ae,a.Ae):s instanceof Ku&&a instanceof Ku})(r.transform,e.transform)}class hI{constructor(e,t){this.version=e,this.transformResults=t}}class Is{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Is}static exists(e){return new Is(void 0,e)}static updateTime(e){return new Is(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Ud{}function fw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Ky(r.key,Is.none()):new lh(r.key,r.data,Is.none());{const t=r.data,s=Mr.empty();let a=new Nn(Qn.comparator);for(let o of e.fields)if(!a.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?s.delete(o):s.set(o,u),a=a.add(o)}return new El(r.key,s,new es(a.toArray()),Is.none())}}function fI(r,e,t){r instanceof lh?(function(a,o,u){const f=a.value.clone(),m=ox(a.fieldTransforms,o,u.transformResults);f.setAll(m),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(r,e,t):r instanceof El?(function(a,o,u){if(!sd(a.precondition,o))return void o.convertToUnknownDocument(u.version);const f=ox(a.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(dw(a)),m.setAll(f),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(r,e,t):(function(a,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function ku(r,e,t,s){return r instanceof lh?(function(o,u,f,m){if(!sd(o.precondition,u))return f;const g=o.value.clone(),v=cx(o.fieldTransforms,m,u);return g.setAll(v),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(r,e,t,s):r instanceof El?(function(o,u,f,m){if(!sd(o.precondition,u))return f;const g=cx(o.fieldTransforms,m,u),v=u.data;return v.setAll(dw(o)),v.setAll(g),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((x=>x.field)))})(r,e,t,s):(function(o,u,f){return sd(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(r,e,t)}function dI(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),o=ow(s.transform,a||null);o!=null&&(t===null&&(t=Mr.empty()),t.set(s.field,o))}return t||null}function lx(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&dc(s,a,((o,u)=>uI(o,u)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class lh extends Ud{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class El extends Ud{constructor(e,t,s,a,o=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function dw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function ox(r,e,t){const s=new Map;pt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let a=0;a<t.length;a++){const o=r[a],u=o.transform,f=e.data.field(o.field);s.set(o.field,oI(u,f,t[a]))}return s}function cx(r,e,t){const s=new Map;for(const a of r){const o=a.transform,u=t.data.field(a.field);s.set(a.field,lI(o,u,e))}return s}class Ky extends Ud{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mI extends Ud{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gI{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&fI(o,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ku(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ku(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=aw();return this.mutations.forEach((a=>{const o=e.get(a.key),u=o.overlayedDocument;let f=this.applyToLocalView(u,o.mutatedFields);f=t.has(a.key)?null:f;const m=fw(u,f);m!==null&&s.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(Be.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),at())}isEqual(e){return this.batchId===e.batchId&&dc(this.mutations,e.mutations,((t,s)=>lx(t,s)))&&dc(this.baseMutations,e.baseMutations,((t,s)=>lx(t,s)))}}class Qy{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){pt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return nI})();const o=e.mutations;for(let u=0;u<o.length;u++)a=a.insert(o[u].key,s[u].version);return new Qy(e,t,s,a)}}class pI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class yI{constructor(e,t,s){this.alias=e,this.aggregateType=t,this.fieldPath=s}}class vI{constructor(e,t){this.count=e,this.unchangedNames=t}}var xn,ut;function bI(r){switch(r){case oe.OK:return Ue(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ue(15467,{code:r})}}function mw(r){if(r===void 0)return ma("GRPC error has no .code"),oe.UNKNOWN;switch(r){case xn.OK:return oe.OK;case xn.CANCELLED:return oe.CANCELLED;case xn.UNKNOWN:return oe.UNKNOWN;case xn.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case xn.INTERNAL:return oe.INTERNAL;case xn.UNAVAILABLE:return oe.UNAVAILABLE;case xn.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case xn.NOT_FOUND:return oe.NOT_FOUND;case xn.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case xn.ABORTED:return oe.ABORTED;case xn.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case xn.DATA_LOSS:return oe.DATA_LOSS;default:return Ue(39323,{code:r})}}(ut=xn||(xn={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";function _I(){return new TextEncoder}const xI=new ol([4294967295,4294967295],0);function ux(r){const e=_I().encode(r),t=new RT;return t.update(e),new Uint8Array(t.digest())}function hx(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ol([t,s],0),new ol([a,o],0)]}class Yy{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Nu(`Invalid padding: ${t}`);if(s<0)throw new Nu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Nu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Nu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ol.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(ol.fromNumber(s)));return a.compare(xI)===1&&(a=new ol([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ux(e),[s,a]=hx(t);for(let o=0;o<this.hashCount;o++){const u=this.ye(s,a,o);if(!this.we(u))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new Yy(o,a,t);return s.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=ux(e),[s,a]=hx(t);for(let o=0;o<this.hashCount;o++){const u=this.ye(s,a,o);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Nu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qd{constructor(e,t,s,a,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,oh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new qd(Be.min(),a,new en(it),ga(),at())}}class oh{constructor(e,t,s,a,o){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new oh(s,t,at(),at(),at())}}class id{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class gw{constructor(e,t){this.targetId=e,this.Ce=t}}class pw{constructor(e,t,s=Zn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class fx{constructor(){this.ve=0,this.Fe=dx(),this.Me=Zn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=at(),t=at(),s=at();return this.Fe.forEach(((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ue(38017,{changeType:o})}})),new oh(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=dx()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ga(),this.Je=Pf(),this.He=Pf(),this.Ye=new en(it)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ue(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const o=a.target;if(Kp(o))if(s===0){const u=new ke(o.path);this.et(t,u,lr.newNoDocument(u,Be.min()))}else pt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const f=this.ut(e),m=f?this.ct(f,e,u):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:o=0}=t;let u,f;try{u=gl(s).toUint8Array()}catch(m){if(m instanceof qT)return Bu("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Yy(u,a,o)}catch(m){return Bu(m instanceof Nu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((o=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(f)||(this.et(t,o,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((o,u)=>{const f=this.ot(u);if(f){if(o.current&&Kp(f.target)){const m=new ke(f.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,lr.newNoDocument(m,e))}o.Be&&(t.set(u,o.ke()),o.qe())}}));let s=at();this.He.forEach(((o,u)=>{let f=!0;u.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(e)));const a=new qd(e,t,this.Ye,this.je,s);return this.je=ga(),this.Je=Pf(),this.He=Pf(),this.Ye=new en(it),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new fx,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Nn(it),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Nn(it),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Pf(){return new en(ke.comparator)}function dx(){return new en(ke.comparator)}const TI={asc:"ASCENDING",desc:"DESCENDING"},wI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AI={and:"AND",or:"OR"};class SI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xp(r,e){return r.useProto3Json||Ld(e)?e:{value:e}}function md(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function NI(r,e){return md(r,e.toTimestamp())}function Ti(r){return pt(!!r,49232),Be.fromTimestamp((function(t){const s=ml(t);return new Bt(s.seconds,s.nanos)})(r))}function Xy(r,e){return Zp(r,e).canonicalString()}function Zp(r,e){const t=(function(a){return new jt(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function vw(r){const e=jt.fromString(r);return pt(ww(e),10190,{key:e.toString()}),e}function Wp(r,e){return Xy(r.databaseId,e.path)}function mp(r,e){const t=vw(e);if(t.get(1)!==r.databaseId.projectId)throw new Ee(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Ee(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ke(_w(t))}function bw(r,e){return Xy(r.databaseId,e)}function CI(r){const e=vw(r);return e.length===4?jt.emptyPath():_w(e)}function Jp(r){return new jt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function _w(r){return pt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function mx(r,e,t){return{name:Wp(r,e),fields:t.value.mapValue.fields}}function RI(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ue(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=(function(g,v){return g.useProto3Json?(pt(v===void 0||typeof v=="string",58123),Zn.fromBase64String(v||"")):(pt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Zn.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(g){const v=g.code===void 0?oe.UNKNOWN:mw(g.code);return new Ee(v,g.message||"")})(u);t=new pw(s,a,o,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=mp(r,s.document.name),o=Ti(s.document.updateTime),u=s.document.createTime?Ti(s.document.createTime):Be.min(),f=new Mr({mapValue:{fields:s.document.fields}}),m=lr.newFoundDocument(a,o,u,f),g=s.targetIds||[],v=s.removedTargetIds||[];t=new id(g,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=mp(r,s.document),o=s.readTime?Ti(s.readTime):Be.min(),u=lr.newNoDocument(a,o),f=s.removedTargetIds||[];t=new id([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=mp(r,s.document),o=s.removedTargetIds||[];t=new id([],o,a,null)}else{if(!("filter"in e))return Ue(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:o}=s,u=new vI(a,o),f=s.targetId;t=new gw(f,u)}}return t}function II(r,e){let t;if(e instanceof lh)t={update:mx(r,e.key,e.value)};else if(e instanceof Ky)t={delete:Wp(r,e.key)};else if(e instanceof El)t={update:mx(r,e.key,e.data),updateMask:UI(e.fieldMask)};else{if(!(e instanceof mI))return Ue(16599,{Vt:e.type});t={verify:Wp(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(o,u){const f=u.transform;if(f instanceof Ku)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Qu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Yu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof dd)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Ue(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,o){return o.updateTime!==void 0?{updateTime:NI(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ue(27497)})(r,e.precondition)),t}function OI(r,e){return r&&r.length>0?(pt(e!==void 0,14353),r.map((t=>(function(a,o){let u=a.updateTime?Ti(a.updateTime):Ti(o);return u.isEqual(Be.min())&&(u=Ti(o)),new hI(u,a.transformResults||[])})(t,e)))):[]}function DI(r,e){return{documents:[bw(r,e.path)]}}function xw(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=bw(r,a);const o=(function(g){if(g.length!==0)return Tw(Js.create(g,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const u=(function(g){if(g.length!==0)return g.map((v=>(function(T){return{field:Ja(T.field),direction:MI(T.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Xp(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function jI(r,e,t,s){const{ft:a,parent:o}=xw(r,e),u={},f=[];let m=0;return t.forEach((g=>{const v="aggregate_"+m++;u[v]=g.alias,g.aggregateType==="count"?f.push({alias:v,count:{}}):g.aggregateType==="avg"?f.push({alias:v,avg:{field:Ja(g.fieldPath)}}):g.aggregateType==="sum"&&f.push({alias:v,sum:{field:Ja(g.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:f,structuredQuery:a.structuredQuery},parent:a.parent},gt:u,parent:o}}function LI(r){let e=CI(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){pt(s===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let o=[];t.where&&(o=(function(x){const T=Ew(x);return T instanceof Js&&XT(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(x){return x.map((T=>(function(C){return new $u(Zo(C.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(T)))})(t.orderBy));let f=null;t.limit&&(f=(function(x){let T;return T=typeof x=="object"?x.value:x,Ld(T)?null:T})(t.limit));let m=null;t.startAt&&(m=(function(x){const T=!!x.before,A=x.values||[];return new fd(A,T)})(t.startAt));let g=null;return t.endAt&&(g=(function(x){const T=!x.before,A=x.values||[];return new fd(A,T)})(t.endAt)),Z4(e,a,u,o,f,"F",m,g)}function kI(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ew(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Zo(t.unaryFilter.field);return En.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Zo(t.unaryFilter.field);return En.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Zo(t.unaryFilter.field);return En.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Zo(t.unaryFilter.field);return En.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}})(r):r.fieldFilter!==void 0?(function(t){return En.create(Zo(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Js.create(t.compositeFilter.filters.map((s=>Ew(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}})(t.compositeFilter.op))})(r):Ue(30097,{filter:r})}function MI(r){return TI[r]}function VI(r){return wI[r]}function PI(r){return AI[r]}function Ja(r){return{fieldPath:r.canonicalString()}}function Zo(r){return Qn.fromServerFormat(r.fieldPath)}function Tw(r){return r instanceof En?(function(t){if(t.op==="=="){if(tx(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NAN"}};if(ex(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(tx(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NOT_NAN"}};if(ex(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ja(t.field),op:VI(t.op),value:t.value}}})(r):r instanceof Js?(function(t){const s=t.getFilters().map((a=>Tw(a)));return s.length===1?s[0]:{compositeFilter:{op:PI(t.op),filters:s}}})(r):Ue(54877,{filter:r})}function UI(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ww(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class il{constructor(e,t,s,a,o=Be.min(),u=Be.min(),f=Zn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new il(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qI{constructor(e){this.yt=e}}function BI(r){const e=LI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Yp(e,e.limit,"L"):e}class zI{constructor(){this.Cn=new HI}addToCollectionParentIndex(e,t){return this.Cn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(dl.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(dl.min())}updateCollectionGroup(e,t,s){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class HI{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Nn(jt.comparator),o=!a.has(s);return this.index[t]=a.add(s),o}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Nn(jt.comparator)).toArray()}}const gx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Aw=41943040;class kr{static withCacheSize(e){return new kr(e,kr.DEFAULT_COLLECTION_PERCENTILE,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}kr.DEFAULT_COLLECTION_PERCENTILE=10,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kr.DEFAULT=new kr(Aw,kr.DEFAULT_COLLECTION_PERCENTILE,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kr.DISABLED=new kr(-1,0,0);class pc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new pc(0)}static cr(){return new pc(-1)}}const px="LruGarbageCollector",FI=1048576;function yx([r,e],[t,s]){const a=it(r,t);return a===0?it(e,s):a}class GI{constructor(e){this.Ir=e,this.buffer=new Nn(yx),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();yx(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $I{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(px,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Cc(t)?Te(px,"Ignoring IndexedDB error during garbage collection: ",t):await Nc(t)}await this.Vr(3e5)}))}}class KI{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(jd.ce);const s=new GI(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(gx)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gx):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,o,u,f,m,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,u=Date.now(),this.nthSequenceNumber(e,a)))).next((x=>(s=x,f=Date.now(),this.removeTargets(e,s,t)))).next((x=>(o=x,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((x=>(g=Date.now(),Yo()<=st.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${o} targets in `+(m-f)+`ms
	Removed ${x} documents in `+(g-m)+`ms
Total Duration: ${g-v}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:x}))))}}function QI(r,e){return new KI(r,e)}class YI{constructor(){this.changes=new oo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,lr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?fe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class XI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ZI{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&ku(s.mutation,a,es.empty(),Bt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,at()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=at()){const a=$l();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((o=>{let u=Su();return o.forEach(((f,m)=>{u=u.insert(f,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=$l();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,at())))}populateOverlays(e,t,s){const a=[];return s.forEach((o=>{t.has(o)||a.push(o)})),this.documentOverlayCache.getOverlays(e,a).next((o=>{o.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,s,a){let o=ga();const u=Lu(),f=(function(){return Lu()})();return t.forEach(((m,g)=>{const v=s.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof El)?o=o.insert(g.key,g):v!==void 0?(u.set(g.key,v.mutation.getFieldMask()),ku(v.mutation,g,v.mutation.getFieldMask(),Bt.now())):u.set(g.key,es.empty())})),this.recalculateAndSaveOverlays(e,o).next((m=>(m.forEach(((g,v)=>u.set(g,v))),t.forEach(((g,v)=>f.set(g,new XI(v,u.get(g)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Lu();let a=new en(((u,f)=>u-f)),o=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let v=s.get(m)||es.empty();v=f.applyToLocalView(g,v),s.set(m,v);const x=(a.get(f.batchId)||at()).add(m);a=a.insert(f.batchId,x)}))})).next((()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,v=m.value,x=aw();v.forEach((T=>{if(!o.has(T)){const A=fw(t.get(T),s.get(T));A!==null&&x.set(T,A),o=o.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,x))}return fe.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(u){return ke.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ew(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((o=>{const u=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-o.size):fe.resolve($l());let f=zu,m=o;return u.next((g=>fe.forEach(g,((v,x)=>(f<x.largestBatchId&&(f=x.largestBatchId),o.get(v)?fe.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{m=m.insert(v,T)}))))).next((()=>this.populateOverlays(e,g,o))).next((()=>this.computeViews(e,m,g,at()))).next((v=>({batchId:f,changes:iw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next((s=>{let a=Su();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const o=t.collectionGroup;let u=Su();return this.indexManager.getCollectionParents(e,o).next((f=>fe.forEach(f,(m=>{const g=(function(x,T){return new Rc(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,g,s,a).next((v=>{v.forEach(((x,T)=>{u=u.insert(x,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,o,a)))).next((u=>{o.forEach(((m,g)=>{const v=g.getKey();u.get(v)===null&&(u=u.insert(v,lr.newInvalidDocument(v)))}));let f=Su();return u.forEach(((m,g)=>{const v=o.get(m);v!==void 0&&ku(v.mutation,g,es.empty(),Bt.now()),Vd(t,g)&&(f=f.insert(m,g))})),f}))}}class WI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return fe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ti(a.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:BI(a.bundledQuery),readTime:Ti(a.readTime)}})(t)),fe.resolve()}}class JI{constructor(){this.overlays=new en(ke.comparator),this.qr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=$l();return fe.forEach(t,(a=>this.getOverlay(e,a).next((o=>{o!==null&&s.set(a,o)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,o)=>{this.St(e,t,o)})),fe.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(s)),fe.resolve()}getOverlaysForCollection(e,t,s){const a=$l(),o=t.length+1,u=new ke(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===o&&m.largestBatchId>s&&a.set(m.getKey(),m)}return fe.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let o=new en(((g,v)=>g-v));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let v=o.get(g.largestBatchId);v===null&&(v=$l(),o=o.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const f=$l(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,v)=>f.set(g,v))),!(f.size()>=a)););return fe.resolve(f)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new pI(t,s));let o=this.qr.get(t);o===void 0&&(o=at(),this.qr.set(t,o)),this.qr.set(t,o.add(s.key))}}class e3{constructor(){this.sessionToken=Zn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}class Zy{constructor(){this.Qr=new Nn(jn.$r),this.Ur=new Nn(jn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new jn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new jn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ke(new jt([])),s=new jn(t,e),a=new jn(t,e+1),o=[];return this.Ur.forEachInRange([s,a],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ke(new jt([])),s=new jn(t,e),a=new jn(t,e+1);let o=at();return this.Ur.forEachInRange([s,a],(u=>{o=o.add(u.key)})),o}containsKey(e){const t=new jn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class jn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ke.comparator(e.key,t.key)||it(e.Yr,t.Yr)}static Kr(e,t){return it(e.Yr,t.Yr)||ke.comparator(e.key,t.key)}}class t3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Nn(jn.$r)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new gI(o,t,s,a);this.mutationQueue.push(u);for(const f of a)this.Zr=this.Zr.add(new jn(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return fe.resolve(u)}lookupMutationBatch(e,t){return fe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),o=a<0?0:a;return fe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?qy:this.tr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new jn(t,0),a=new jn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([s,a],(u=>{const f=this.Xr(u.Yr);o.push(f)})),fe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Nn(it);return t.forEach((a=>{const o=new jn(a,0),u=new jn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(f=>{s=s.add(f.Yr)}))})),fe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let o=s;ke.isDocumentKey(o)||(o=o.child(""));const u=new jn(new ke(o),0);let f=new Nn(it);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!s.isPrefixOf(g)&&(g.length===a&&(f=f.add(m.Yr)),!0)}),u),fe.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){pt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return fe.forEach(t.mutations,(a=>{const o=new jn(a.key,t.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new jn(t,0),a=this.Zr.firstAfterOrEqual(s);return fe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class n3{constructor(e){this.ri=e,this.docs=(function(){return new en(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),o=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return fe.resolve(s?s.document.mutableCopy():lr.newInvalidDocument(t))}getEntries(e,t){let s=ga();return t.forEach((a=>{const o=this.docs.get(a);s=s.insert(a,o?o.document.mutableCopy():lr.newInvalidDocument(a))})),fe.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let o=ga();const u=t.path,f=new ke(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:v}}=m.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||C4(N4(v),s)<=0||(a.has(v.key)||Vd(t,v))&&(o=o.insert(v.key,v.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(e,t,s,a){Ue(9500)}ii(e,t){return fe.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new r3(this)}getSize(e){return fe.resolve(this.size)}}class r3 extends YI{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),fe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class s3{constructor(e){this.persistence=e,this.si=new oo((t=>Hy(t)),Fy),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.oi=0,this._i=new Zy,this.targetCount=0,this.ai=pc.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),fe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new pc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Pr(t),fe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,s){let a=0;const o=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),fe.waitFor(o).next((()=>a))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return fe.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),fe.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,o=[];return a&&t.forEach((u=>{o.push(a.markPotentiallyOrphaned(e,u))})),fe.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return fe.resolve(s)}containsKey(e,t){return fe.resolve(this._i.containsKey(t))}}class Sw{constructor(e,t){this.ui={},this.overlays={},this.ci=new jd(0),this.li=!1,this.li=!0,this.hi=new e3,this.referenceDelegate=e(this),this.Pi=new s3(this),this.indexManager=new zI,this.remoteDocumentCache=(function(a){return new n3(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new qI(t),this.Ii=new WI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new t3(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Te("MemoryPersistence","Starting transaction:",e);const a=new i3(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((o=>this.referenceDelegate.di(a).next((()=>o)))).toPromise().then((o=>(a.raiseOnCommittedEvent(),o)))}Ai(e,t){return fe.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class i3 extends I4{constructor(e){super(),this.currentSequenceNumber=e}}class Wy{constructor(e){this.persistence=e,this.Ri=new Zy,this.Vi=null}static mi(e){return new Wy(e)}get fi(){if(this.Vi)return this.Vi;throw Ue(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),fe.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((o=>this.fi.add(o.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,(s=>{const a=ke.fromPath(s);return this.gi(e,a).next((o=>{o||t.removeEntry(a,Be.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class gd{constructor(e,t){this.persistence=e,this.pi=new oo((s=>j4(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=QI(this,t)}static mi(e,t){return new gd(e,t)}Ei(){}di(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return fe.forEach(this.pi,((s,a)=>this.br(e,s,a).next((o=>o?fe.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((f=>{f||(s++,o.removeEntry(u,Be.min()))})))).next((()=>o.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nd(e.data.value)),t}br(e,t,s){return fe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return fe.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Jy{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=at(),a=at();for(const o of t.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new Jy(e,t.fromCache,s,a)}}class a3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class l3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nR()?8:O4(Zs())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const o={result:null};return this.ys(e,t).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(e,t,a,s).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new a3;return this.Ss(e,t,u).next((f=>{if(o.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>o.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(Yo()<=st.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",Xo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(Yo()<=st.DEBUG&&Te("QueryEngine","Query:",Xo(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Yo()<=st.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",Xo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ei(t))):fe.resolve())}ys(e,t){if(ix(t))return fe.resolve(null);let s=Ei(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Yp(t,null,"F"),s=Ei(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((o=>{const u=at(...o);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,s).next((m=>{const g=this.Ds(t,f);return this.Cs(t,g,u,m.readTime)?this.ys(e,Yp(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,s,a){return ix(t)||a.isEqual(Be.min())?fe.resolve(null):this.ps.getDocuments(e,s).next((o=>{const u=this.Ds(t,o);return this.Cs(t,u,s,a)?fe.resolve(null):(Yo()<=st.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Xo(t)),this.vs(e,u,t,S4(a,zu)).next((f=>f)))}))}Ds(e,t){let s=new Nn(rw(e));return t.forEach(((a,o)=>{Vd(e,o)&&(s=s.add(o))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}Ss(e,t,s){return Yo()<=st.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",Xo(t)),this.ps.getDocumentsMatchingQuery(e,t,dl.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((o=>(t.forEach((u=>{o=o.insert(u.key,u)})),o)))}}const e0="LocalStore",o3=3e8;class c3{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new en(it),this.xs=new oo((o=>Hy(o)),Fy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function u3(r,e,t,s){return new c3(r,e,t,s)}async function Nw(r,e){const t=qe(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((o=>(a=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((o=>{const u=[],f=[];let m=at();for(const g of a){u.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}for(const g of o){f.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(s,m).next((g=>({Ls:g,removedBatchIds:u,addedBatchIds:f})))}))}))}function h3(r,e){const t=qe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,v){const x=g.batch,T=x.keys();let A=fe.resolve();return T.forEach((C=>{A=A.next((()=>v.getEntry(m,C))).next((j=>{const I=g.docVersions.get(C);pt(I!==null,48541),j.version.compareTo(I)<0&&(x.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),v.addEntry(j)))}))})),A.next((()=>f.mutationQueue.removeMutationBatch(m,x)))})(t,s,e,o).next((()=>o.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let m=at();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function Cw(r){const e=qe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function f3(r,e){const t=qe(r),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const f=[];e.targetChanges.forEach(((v,x)=>{const T=a.get(x);if(!T)return;f.push(t.Pi.removeMatchingKeys(o,v.removedDocuments,x).next((()=>t.Pi.addMatchingKeys(o,v.addedDocuments,x))));let A=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(x)!==null?A=A.withResumeToken(Zn.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,s)),a=a.insert(x,A),(function(j,I,H){return j.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=o3?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(T,A,v)&&f.push(t.Pi.updateTargetData(o,A))}));let m=ga(),g=at();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(o,v))})),f.push(d3(o,u,e.documentUpdates).next((v=>{m=v.ks,g=v.qs}))),!s.isEqual(Be.min())){const v=t.Pi.getLastRemoteSnapshotVersion(o).next((x=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,s)));f.push(v)}return fe.waitFor(f).next((()=>u.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,m,g))).next((()=>m))})).then((o=>(t.Ms=a,o)))}function d3(r,e,t){let s=at(),a=at();return t.forEach((o=>s=s.add(o))),e.getEntries(r,s).next((o=>{let u=ga();return t.forEach(((f,m)=>{const g=o.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Be.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):Te(e0,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{ks:u,qs:a}}))}function m3(r,e){const t=qe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=qy),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function g3(r,e){const t=qe(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((o=>o?(a=o,fe.resolve(a)):t.Pi.allocateTargetId(s).next((u=>(a=new il(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function ey(r,e,t){const s=qe(r),a=s.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",o,(u=>s.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Cc(u))throw u;Te(e0,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function vx(r,e,t){const s=qe(r);let a=Be.min(),o=at();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,g,v){const x=qe(m),T=x.xs.get(v);return T!==void 0?fe.resolve(x.Ms.get(T)):x.Pi.getTargetData(g,v)})(s,u,Ei(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,f.targetId).next((m=>{o=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?a:Be.min(),t?o:at()))).next((f=>(p3(s,J4(e),f),{documents:f,Qs:o})))))}function p3(r,e,t){let s=r.Os.get(e)||Be.min();t.forEach(((a,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)})),r.Os.set(e,s)}class bx{constructor(){this.activeTargetIds=iI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class y3{constructor(){this.Mo=new bx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new bx,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class v3{Oo(e){}shutdown(){}}const _x="ConnectivityMonitor";class xx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(_x,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(_x,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Uf=null;function ty(){return Uf===null?Uf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uf++,"0x"+Uf.toString(16)}const gp="RestConnection",b3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Hp?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,o){const u=ty(),f=this.zo(e,t.toUriEncodedString());Te(gp,`Sending RPC '${e}' ${u}:`,f,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,o);const{host:g}=new URL(f),v=jy(g);return this.Jo(e,f,m,s,v).then((x=>(Te(gp,`Received RPC '${e}' ${u}: `,x),x)),(x=>{throw Bu(gp,`RPC '${e}' ${u} failed with error: `,x,"url: ",f,"request:",s),x}))}Ho(e,t,s,a,o,u){return this.Go(e,t,s,a,o)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Sc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,o)=>e[o]=a)),s&&s.headers.forEach(((a,o)=>e[o]=a))}zo(e,t){const s=b3[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class x3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ar="WebChannelConnection";class E3 extends _3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,o){const u=ty();return new Promise(((f,m)=>{const g=new IT;g.setWithCredentials(!0),g.listenOnce(OT.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case td.NO_ERROR:const x=g.getResponseJson();Te(ar,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),f(x);break;case td.TIMEOUT:Te(ar,`RPC '${e}' ${u} timed out`),m(new Ee(oe.DEADLINE_EXCEEDED,"Request time out"));break;case td.HTTP_ERROR:const T=g.getStatus();if(Te(ar,`RPC '${e}' ${u} failed with status:`,T,"response text:",g.getResponseText()),T>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const C=A?.error;if(C&&C.status&&C.message){const j=(function(H){const $=H.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf($)>=0?$:oe.UNKNOWN})(C.status);m(new Ee(j,C.message))}else m(new Ee(oe.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Ee(oe.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{l_:e,streamId:u,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Te(ar,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);Te(ar,`RPC '${e}' ${u} sending request:`,a),g.send(t,"POST",v,s,15)}))}T_(e,t,s){const a=ty(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=LT(),f=jT(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const v=o.join("");Te(ar,`Creating RPC '${e}' stream ${a}: ${v}`,m);const x=u.createWebChannel(v,m);this.I_(x);let T=!1,A=!1;const C=new x3({Yo:I=>{A?Te(ar,`Not sending because RPC '${e}' stream ${a} is closed:`,I):(T||(Te(ar,`Opening RPC '${e}' stream ${a} transport.`),x.open(),T=!0),Te(ar,`RPC '${e}' stream ${a} sending:`,I),x.send(I))},Zo:()=>x.close()}),j=(I,H,$)=>{I.listen(H,(Z=>{try{$(Z)}catch(te){setTimeout((()=>{throw te}),0)}}))};return j(x,Au.EventType.OPEN,(()=>{A||(Te(ar,`RPC '${e}' stream ${a} transport opened.`),C.o_())})),j(x,Au.EventType.CLOSE,(()=>{A||(A=!0,Te(ar,`RPC '${e}' stream ${a} transport closed`),C.a_(),this.E_(x))})),j(x,Au.EventType.ERROR,(I=>{A||(A=!0,Bu(ar,`RPC '${e}' stream ${a} transport errored. Name:`,I.name,"Message:",I.message),C.a_(new Ee(oe.UNAVAILABLE,"The operation could not be completed")))})),j(x,Au.EventType.MESSAGE,(I=>{if(!A){const H=I.data[0];pt(!!H,16349);const $=H,Z=$?.error||$[0]?.error;if(Z){Te(ar,`RPC '${e}' stream ${a} received error:`,Z);const te=Z.status;let de=(function(L){const V=xn[L];if(V!==void 0)return mw(V)})(te),xe=Z.message;de===void 0&&(de=oe.INTERNAL,xe="Unknown error status: "+te+" with message "+Z.message),A=!0,C.a_(new Ee(de,xe)),x.close()}else Te(ar,`RPC '${e}' stream ${a} received:`,H),C.u_(H)}})),j(f,DT.STAT_EVENT,(I=>{I.stat===Bp.PROXY?Te(ar,`RPC '${e}' stream ${a} detected buffering proxy`):I.stat===Bp.NOPROXY&&Te(ar,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function pp(){return typeof document<"u"?document:null}function Bd(r){return new SI(r,!0)}class Rw{constructor(e,t,s=1e3,a=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&Te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Ex="PersistentStream";class Iw{constructor(e,t,s,a,o,u,f,m){this.Mi=e,this.S_=s,this.b_=a,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Rw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(ma(t.toString()),ma("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new Ee(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(Ex,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Te(Ex,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class T3 extends Iw{constructor(e,t,s,a,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,u),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=RI(this.serializer,e),s=(function(o){if(!("targetChange"in o))return Be.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Be.min():u.readTime?Ti(u.readTime):Be.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Jp(this.serializer),t.addTarget=(function(o,u){let f;const m=u.target;if(f=Kp(m)?{documents:DI(o,m)}:{query:xw(o,m).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=yw(o,u.resumeToken);const g=Xp(o,u.expectedCount);g!==null&&(f.expectedCount=g)}else if(u.snapshotVersion.compareTo(Be.min())>0){f.readTime=md(o,u.snapshotVersion.toTimestamp());const g=Xp(o,u.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const s=kI(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Jp(this.serializer),t.removeTarget=e,this.q_(t)}}class w3 extends Iw{constructor(e,t,s,a,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=OI(e.writeResults,e.commitTime),s=Ti(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Jp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>II(this.serializer,s)))};this.q_(t)}}class A3{}class S3 extends A3{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Ee(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(e,Zp(t,s),a,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(oe.UNKNOWN,o.toString())}))}Ho(e,t,s,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,Zp(t,s),a,u,f,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ee(oe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class N3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ma(t),this.aa=!1):Te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Jl="RemoteStore";class C3{constructor(e,t,s,a,o){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{co(this)&&(Te(Jl,"Restarting streams for network reachability change."),await(async function(m){const g=qe(m);g.Ea.add(4),await ch(g),g.Ra.set("Unknown"),g.Ea.delete(4),await zd(g)})(this))}))})),this.Ra=new N3(s,a)}}async function zd(r){if(co(r))for(const e of r.da)await e(!0)}async function ch(r){for(const e of r.da)await e(!1)}function Ow(r,e){const t=qe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),s0(t)?r0(t):Ic(t).O_()&&n0(t,e))}function t0(r,e){const t=qe(r),s=Ic(t);t.Ia.delete(e),s.O_()&&Dw(t,e),t.Ia.size===0&&(s.O_()?s.L_():co(t)&&t.Ra.set("Unknown"))}function n0(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ic(r).Y_(e)}function Dw(r,e){r.Va.Ue(e),Ic(r).Z_(e)}function r0(r){r.Va=new EI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ic(r).start(),r.Ra.ua()}function s0(r){return co(r)&&!Ic(r).x_()&&r.Ia.size>0}function co(r){return qe(r).Ea.size===0}function jw(r){r.Va=void 0}async function R3(r){r.Ra.set("Online")}async function I3(r){r.Ia.forEach(((e,t)=>{n0(r,e)}))}async function O3(r,e){jw(r),s0(r)?(r.Ra.ha(e),r0(r)):r.Ra.set("Unknown")}async function D3(r,e,t){if(r.Ra.set("Online"),e instanceof pw&&e.state===2&&e.cause)try{await(async function(a,o){const u=o.cause;for(const f of o.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a.Ia.delete(f),a.Va.removeTarget(f))})(r,e)}catch(s){Te(Jl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await pd(r,s)}else if(e instanceof id?r.Va.Ze(e):e instanceof gw?r.Va.st(e):r.Va.tt(e),!t.isEqual(Be.min()))try{const s=await Cw(r.localStore);t.compareTo(s)>=0&&await(function(o,u){const f=o.Va.Tt(u);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const v=o.Ia.get(g);v&&o.Ia.set(g,v.withResumeToken(m.resumeToken,u))}})),f.targetMismatches.forEach(((m,g)=>{const v=o.Ia.get(m);if(!v)return;o.Ia.set(m,v.withResumeToken(Zn.EMPTY_BYTE_STRING,v.snapshotVersion)),Dw(o,m);const x=new il(v.target,m,g,v.sequenceNumber);n0(o,x)})),o.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){Te(Jl,"Failed to raise snapshot:",s),await pd(r,s)}}async function pd(r,e,t){if(!Cc(e))throw e;r.Ea.add(1),await ch(r),r.Ra.set("Offline"),t||(t=()=>Cw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Te(Jl,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await zd(r)}))}function Lw(r,e){return e().catch((t=>pd(r,t,e)))}async function Hd(r){const e=qe(r),t=yl(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qy;for(;j3(e);)try{const a=await m3(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,L3(e,a)}catch(a){await pd(e,a)}kw(e)&&Mw(e)}function j3(r){return co(r)&&r.Ta.length<10}function L3(r,e){r.Ta.push(e);const t=yl(r);t.O_()&&t.X_&&t.ea(e.mutations)}function kw(r){return co(r)&&!yl(r).x_()&&r.Ta.length>0}function Mw(r){yl(r).start()}async function k3(r){yl(r).ra()}async function M3(r){const e=yl(r);for(const t of r.Ta)e.ea(t.mutations)}async function V3(r,e,t){const s=r.Ta.shift(),a=Qy.from(s,e,t);await Lw(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Hd(r)}async function P3(r,e){e&&yl(r).X_&&await(async function(s,a){if((function(u){return bI(u)&&u!==oe.ABORTED})(a.code)){const o=s.Ta.shift();yl(s).B_(),await Lw(s,(()=>s.remoteSyncer.rejectFailedWrite(o.batchId,a))),await Hd(s)}})(r,e),kw(r)&&Mw(r)}async function Tx(r,e){const t=qe(r);t.asyncQueue.verifyOperationInProgress(),Te(Jl,"RemoteStore received new credentials");const s=co(t);t.Ea.add(3),await ch(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await zd(t)}async function U3(r,e){const t=qe(r);e?(t.Ea.delete(2),await zd(t)):e||(t.Ea.add(2),await ch(t),t.Ra.set("Unknown"))}function Ic(r){return r.ma||(r.ma=(function(t,s,a){const o=qe(t);return o.sa(),new T3(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(r.datastore,r.asyncQueue,{Xo:R3.bind(null,r),t_:I3.bind(null,r),r_:O3.bind(null,r),H_:D3.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),s0(r)?r0(r):r.Ra.set("Unknown")):(await r.ma.stop(),jw(r))}))),r.ma}function yl(r){return r.fa||(r.fa=(function(t,s,a){const o=qe(t);return o.sa(),new w3(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:k3.bind(null,r),r_:P3.bind(null,r),ta:M3.bind(null,r),na:V3.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Hd(r)):(await r.fa.stop(),r.Ta.length>0&&(Te(Jl,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class i0{constructor(e,t,s,a,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=o,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,o){const u=Date.now()+s,f=new i0(e,t,u,a,o);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function a0(r,e){if(ma("AsyncQueue",`${e}: ${r}`),Cc(r))return new Ee(oe.UNAVAILABLE,`${e}: ${r}`);throw r}class rc{static emptySet(e){return new rc(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ke.comparator(t.key,s.key):(t,s)=>ke.comparator(t.key,s.key),this.keyedMap=Su(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=s.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new rc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class wx{constructor(){this.ga=new en(ke.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ue(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class yc{constructor(e,t,s,a,o,u,f,m,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,a,o){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new yc(e,t,rc.emptySet(t),u,s,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class q3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class B3{constructor(){this.queries=Ax(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=qe(t),o=a.queries;a.queries=Ax(),o.forEach(((u,f)=>{for(const m of f.Sa)m.onError(s)}))})(this,new Ee(oe.ABORTED,"Firestore shutting down"))}}function Ax(){return new oo((r=>nw(r)),Md)}async function Vw(r,e){const t=qe(r);let s=3;const a=e.query;let o=t.queries.get(a);o?!o.ba()&&e.Da()&&(s=2):(o=new q3,s=e.Da()?0:1);try{switch(s){case 0:o.wa=await t.onListen(a,!0);break;case 1:o.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=a0(u,`Initialization of query '${Xo(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&l0(t)}async function Pw(r,e){const t=qe(r),s=e.query;let a=3;const o=t.queries.get(s);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?a=e.Da()?0:1:!o.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function z3(r,e){const t=qe(r);let s=!1;for(const a of e){const o=a.query,u=t.queries.get(o);if(u){for(const f of u.Sa)f.Fa(a)&&(s=!0);u.wa=a}}s&&l0(t)}function H3(r,e,t){const s=qe(r),a=s.queries.get(e);if(a)for(const o of a.Sa)o.onError(t);s.queries.delete(e)}function l0(r){r.Ca.forEach((e=>{e.next()}))}var ny,Sx;(Sx=ny||(ny={})).Ma="default",Sx.Cache="cache";class Uw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new yc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=yc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ny.Cache}}class qw{constructor(e){this.key=e}}class Bw{constructor(e){this.key=e}}class F3{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=at(),this.mutatedKeys=at(),this.eu=rw(e),this.tu=new rc(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new wx,a=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,x)=>{const T=a.get(v),A=Vd(this.query,x)?x:null,C=!!T&&this.mutatedKeys.has(T.key),j=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let I=!1;T&&A?T.data.isEqual(A.data)?C!==j&&(s.track({type:3,doc:A}),I=!0):this.su(T,A)||(s.track({type:2,doc:A}),I=!0,(m&&this.eu(A,m)>0||g&&this.eu(A,g)<0)&&(f=!0)):!T&&A?(s.track({type:0,doc:A}),I=!0):T&&!A&&(s.track({type:1,doc:T}),I=!0,(m||g)&&(f=!0)),I&&(A?(u=u.add(A),o=j?o.add(v):o.delete(v)):(u=u.delete(v),o=o.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),o=o.delete(v.key),s.track({type:1,doc:v})}return{tu:u,iu:s,Cs:f,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,x)=>(function(A,C){const j=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Rt:I})}};return j(A)-j(C)})(v.type,x.type)||this.eu(v.doc,x.doc))),this.ou(s),a=a??!1;const f=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,u.length!==0||g?{snapshot:new yc(this.query,e.tu,o,u,e.mutatedKeys,m===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=at(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Bw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new qw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=at();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return yc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const o0="SyncEngine";class G3{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class $3{constructor(e){this.key=e,this.hu=!1}}class K3{constructor(e,t,s,a,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new oo((f=>nw(f)),Md),this.Iu=new Map,this.Eu=new Set,this.du=new en(ke.comparator),this.Au=new Map,this.Ru=new Zy,this.Vu={},this.mu=new Map,this.fu=pc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Q3(r,e,t=!0){const s=Kw(r);let a;const o=s.Tu.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.lu()):a=await zw(s,e,t,!0),a}async function Y3(r,e){const t=Kw(r);await zw(t,e,!0,!1)}async function zw(r,e,t,s){const a=await g3(r.localStore,Ei(e)),o=a.targetId,u=r.sharedClientState.addLocalQueryTarget(o,t);let f;return s&&(f=await X3(r,e,o,u==="current",a.resumeToken)),r.isPrimaryClient&&t&&Ow(r.remoteStore,a),f}async function X3(r,e,t,s,a){r.pu=(x,T,A)=>(async function(j,I,H,$){let Z=I.view.ru(H);Z.Cs&&(Z=await vx(j.localStore,I.query,!1).then((({documents:M})=>I.view.ru(M,Z))));const te=$&&$.targetChanges.get(I.targetId),de=$&&$.targetMismatches.get(I.targetId)!=null,xe=I.view.applyChanges(Z,j.isPrimaryClient,te,de);return Cx(j,I.targetId,xe.au),xe.snapshot})(r,x,T,A);const o=await vx(r.localStore,e,!0),u=new F3(e,o.Qs),f=u.ru(o.documents),m=oh.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),g=u.applyChanges(f,r.isPrimaryClient,m);Cx(r,t,g.au);const v=new G3(e,t,u);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),g.snapshot}async function Z3(r,e,t){const s=qe(r),a=s.Tu.get(e),o=s.Iu.get(a.targetId);if(o.length>1)return s.Iu.set(a.targetId,o.filter((u=>!Md(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await ey(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&t0(s.remoteStore,a.targetId),ry(s,a.targetId)})).catch(Nc)):(ry(s,a.targetId),await ey(s.localStore,a.targetId,!0))}async function W3(r,e){const t=qe(r),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),t0(t.remoteStore,s.targetId))}async function J3(r,e,t){const s=aO(r);try{const a=await(function(u,f){const m=qe(u),g=Bt.now(),v=f.reduce(((A,C)=>A.add(C.key)),at());let x,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let C=ga(),j=at();return m.Ns.getEntries(A,v).next((I=>{C=I,C.forEach(((H,$)=>{$.isValidDocument()||(j=j.add(H))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,C))).next((I=>{x=I;const H=[];for(const $ of f){const Z=dI($,x.get($.key).overlayedDocument);Z!=null&&H.push(new El($.key,Z,KT(Z.value.mapValue),Is.exists(!0)))}return m.mutationQueue.addMutationBatch(A,g,H,f)})).next((I=>{T=I;const H=I.applyToLocalDocumentSet(x,j);return m.documentOverlayCache.saveOverlays(A,I.batchId,H)}))})).then((()=>({batchId:T.batchId,changes:iw(x)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(u,f,m){let g=u.Vu[u.currentUser.toKey()];g||(g=new en(it)),g=g.insert(f,m),u.Vu[u.currentUser.toKey()]=g})(s,a.batchId,t),await uh(s,a.changes),await Hd(s.remoteStore)}catch(a){const o=a0(a,"Failed to persist write");t.reject(o)}}async function Hw(r,e){const t=qe(r);try{const s=await f3(t.localStore,e);e.targetChanges.forEach(((a,o)=>{const u=t.Au.get(o);u&&(pt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?pt(u.hu,14607):a.removedDocuments.size>0&&(pt(u.hu,42227),u.hu=!1))})),await uh(t,s,e)}catch(s){await Nc(s)}}function Nx(r,e,t){const s=qe(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((o,u)=>{const f=u.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(u,f){const m=qe(u);m.onlineState=f;let g=!1;m.queries.forEach(((v,x)=>{for(const T of x.Sa)T.va(f)&&(g=!0)})),g&&l0(m)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function eO(r,e,t){const s=qe(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),o=a&&a.key;if(o){let u=new en(ke.comparator);u=u.insert(o,lr.newNoDocument(o,Be.min()));const f=at().add(o),m=new qd(Be.min(),new Map,new en(it),u,f);await Hw(s,m),s.du=s.du.remove(o),s.Au.delete(e),c0(s)}else await ey(s.localStore,e,!1).then((()=>ry(s,e,t))).catch(Nc)}async function tO(r,e){const t=qe(r),s=e.batch.batchId;try{const a=await h3(t.localStore,e);Gw(t,s,null),Fw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await uh(t,a)}catch(a){await Nc(a)}}async function nO(r,e,t){const s=qe(r);try{const a=await(function(u,f){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return m.mutationQueue.lookupMutationBatch(g,f).next((x=>(pt(x!==null,37113),v=x.keys(),m.mutationQueue.removeMutationBatch(g,x)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,v,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>m.localDocuments.getDocuments(g,v)))}))})(s.localStore,e);Gw(s,e,t),Fw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await uh(s,a)}catch(a){await Nc(a)}}function Fw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Gw(r,e,t){const s=qe(r);let a=s.Vu[s.currentUser.toKey()];if(a){const o=a.get(e);o&&(t?o.reject(t):o.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function ry(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||$w(r,s)}))}function $w(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(t0(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),c0(r))}function Cx(r,e,t){for(const s of t)s instanceof qw?(r.Ru.addReference(s.key,e),rO(r,s)):s instanceof Bw?(Te(o0,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||$w(r,s.key)):Ue(19791,{wu:s})}function rO(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(Te(o0,"New document in limbo: "+t),r.Eu.add(s),c0(r))}function c0(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ke(jt.fromString(e)),s=r.fu.next();r.Au.set(s,new $3(t)),r.du=r.du.insert(t,s),Ow(r.remoteStore,new il(Ei(Gy(t.path)),s,"TargetPurposeLimboResolution",jd.ce))}}async function uh(r,e,t){const s=qe(r),a=[],o=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,m)=>{u.push(s.pu(m,e,t).then((g=>{if((g||t)&&s.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(m.targetId)?.current;s.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(g){a.push(g);const v=Jy.As(m.targetId,g);o.push(v)}})))})),await Promise.all(u),s.Pu.H_(a),await(async function(m,g){const v=qe(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>fe.forEach(g,(T=>fe.forEach(T.Es,(A=>v.persistence.referenceDelegate.addReference(x,T.targetId,A))).next((()=>fe.forEach(T.ds,(A=>v.persistence.referenceDelegate.removeReference(x,T.targetId,A)))))))))}catch(x){if(!Cc(x))throw x;Te(e0,"Failed to update sequence numbers: "+x)}for(const x of g){const T=x.targetId;if(!x.fromCache){const A=v.Ms.get(T),C=A.snapshotVersion,j=A.withLastLimboFreeSnapshotVersion(C);v.Ms=v.Ms.insert(T,j)}}})(s.localStore,o))}async function sO(r,e){const t=qe(r);if(!t.currentUser.isEqual(e)){Te(o0,"User change. New user:",e.toKey());const s=await Nw(t.localStore,e);t.currentUser=e,(function(o,u){o.mu.forEach((f=>{f.forEach((m=>{m.reject(new Ee(oe.CANCELLED,u))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await uh(t,s.Ls)}}function iO(r,e){const t=qe(r),s=t.Au.get(e);if(s&&s.hu)return at().add(s.key);{let a=at();const o=t.Iu.get(e);if(!o)return a;for(const u of o){const f=t.Tu.get(u);a=a.unionWith(f.view.nu)}return a}}function Kw(r){const e=qe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eO.bind(null,e),e.Pu.H_=z3.bind(null,e.eventManager),e.Pu.yu=H3.bind(null,e.eventManager),e}function aO(r){const e=qe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nO.bind(null,e),e}class yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return u3(this.persistence,new l3,e.initialUser,this.serializer)}Cu(e){return new Sw(Wy.mi,this.serializer)}Du(e){return new y3}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yd.provider={build:()=>new yd};class lO extends yd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){pt(this.persistence.referenceDelegate instanceof gd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new $I(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?kr.withCacheSize(this.cacheSizeBytes):kr.DEFAULT;return new Sw((s=>gd.mi(s,t)),this.serializer)}}class sy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Nx(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=sO.bind(null,this.syncEngine),await U3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new B3})()}createDatastore(e){const t=Bd(e.databaseInfo.databaseId),s=(function(o){return new E3(o)})(e.databaseInfo);return(function(o,u,f,m){return new S3(o,u,f,m)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,o,u,f){return new C3(s,a,o,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Nx(this.syncEngine,t,0)),(function(){return xx.v()?new xx:new v3})())}createSyncEngine(e,t){return(function(a,o,u,f,m,g,v){const x=new K3(a,o,u,f,m,g);return v&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=qe(t);Te(Jl,"RemoteStore shutting down."),s.Ea.add(5),await ch(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}sy.provider={build:()=>new sy};class Qw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ma("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const vl="FirestoreClient";class oO{constructor(e,t,s,a,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Lr.UNAUTHENTICATED,this.clientId=Uy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,(async u=>{Te(vl,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(Te(vl,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=a0(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function yp(r,e){r.asyncQueue.verifyOperationInProgress(),Te(vl,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async a=>{s.isEqual(a)||(await Nw(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Rx(r,e){r.asyncQueue.verifyOperationInProgress();const t=await cO(r);Te(vl,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>Tx(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,a)=>Tx(e.remoteStore,a))),r._onlineComponents=e}async function cO(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Te(vl,"Using user provided OfflineComponentProvider");try{await yp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===oe.FAILED_PRECONDITION||a.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Bu("Error using user provided cache. Falling back to memory cache: "+t),await yp(r,new yd)}}else Te(vl,"Using default OfflineComponentProvider"),await yp(r,new lO(void 0));return r._offlineComponents}async function u0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Te(vl,"Using user provided OnlineComponentProvider"),await Rx(r,r._uninitializedComponentsProvider._online)):(Te(vl,"Using default OnlineComponentProvider"),await Rx(r,new sy))),r._onlineComponents}function uO(r){return u0(r).then((e=>e.syncEngine))}function hO(r){return u0(r).then((e=>e.datastore))}async function Yw(r){const e=await u0(r),t=e.eventManager;return t.onListen=Q3.bind(null,e.syncEngine),t.onUnlisten=Z3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Y3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=W3.bind(null,e.syncEngine),t}function fO(r,e,t={}){const s=new xi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,u,f,m,g){const v=new Qw({next:T=>{v.Nu(),u.enqueueAndForget((()=>Pw(o,x)));const A=T.docs.has(f);!A&&T.fromCache?g.reject(new Ee(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&m&&m.source==="server"?g.reject(new Ee(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),x=new Uw(Gy(f.path),v,{includeMetadataChanges:!0,qa:!0});return Vw(o,x)})(await Yw(r),r.asyncQueue,e,t,s))),s.promise}function dO(r,e,t={}){const s=new xi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,u,f,m,g){const v=new Qw({next:T=>{v.Nu(),u.enqueueAndForget((()=>Pw(o,x))),T.fromCache&&m.source==="server"?g.reject(new Ee(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),x=new Uw(f,v,{includeMetadataChanges:!0,qa:!0});return Vw(o,x)})(await Yw(r),r.asyncQueue,e,t,s))),s.promise}function mO(r,e,t){const s=new xi;return r.asyncQueue.enqueueAndForget((async()=>{try{const a=await hO(r);s.resolve((async function(u,f,m){const g=qe(u),{request:v,gt:x,parent:T}=jI(g.serializer,W4(f),m);g.connection.$o||delete v.parent;const A=(await g.Ho("RunAggregationQuery",g.serializer.databaseId,T,v,1)).filter((j=>!!j.result));pt(A.length===1,64727);const C=A[0].result?.aggregateFields;return Object.keys(C).reduce(((j,I)=>(j[x[I]]=C[I],j)),{})})(a,e,t))}catch(a){s.reject(a)}})),s.promise}function Xw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Ix=new Map;const gO="firestore.googleapis.com",Ox=!0;class Dx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gO,this.ssl=Ox}else this.host=e.host,this.ssl=e.ssl??Ox;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Aw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FI)throw new Ee(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class h0{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new p4;switch(s.type){case"firstParty":return new b4(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ee(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Ix.get(t);s&&(Te("ComponentProvider","Removing Datastore"),Ix.delete(t),s.terminate())})(this),Promise.resolve()}}class uo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new uo(this.firestore,e,this._query)}}class mn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}toJSON(){return{type:mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(ah(t,mn._jsonSchema))return new mn(e,s||null,new ke(jt.fromString(t.referencePath)))}}mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:Tn("string",mn._jsonSchemaVersion),referencePath:Tn("string")};class cl extends uo{constructor(e,t,s){super(e,t,Gy(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new ke(e))}withConverter(e){return new cl(this.firestore,e,this._path)}}function St(r,e,...t){if(r=Xn(r),MT("collection","path",e),r instanceof h0){const s=jt.fromString(e,...t);return G_(s),new cl(r,null,s)}{if(!(r instanceof mn||r instanceof cl))throw new Ee(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(jt.fromString(e,...t));return G_(s),new cl(r.firestore,null,s)}}function yt(r,e,...t){if(r=Xn(r),arguments.length===1&&(e=Uy.newId()),MT("doc","path",e),r instanceof h0){const s=jt.fromString(e,...t);return F_(s),new mn(r,null,new ke(s))}{if(!(r instanceof mn||r instanceof cl))throw new Ee(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(jt.fromString(e,...t));return F_(s),new mn(r.firestore,r instanceof cl?r.converter:null,new ke(s))}}const jx="AsyncQueue";class Lx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Rw(this,"async_queue_retry"),this._c=()=>{const s=pp();s&&Te(jx,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=pp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=pp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new xi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Cc(e))throw e;Te(jx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ma("INTERNAL UNHANDLED ERROR: ",kx(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=i0.createAndSchedule(this,e,t,s,(o=>this.hc(o)));return this.tc.push(a),a}uc(){this.nc&&Ue(47125,{Pc:kx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function kx(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Tl extends h0{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Lx,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lx(e),this._firestoreClient=void 0,await e}}}function Fd(r){if(r._terminated)throw new Ee(oe.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||pO(r),r._firestoreClient}function pO(r){const e=r._freezeSettings(),t=(function(a,o,u,f){return new V4(a,o,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Xw(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new oO(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(a){const o=a?._online.build();return{_offline:a?._offline.build(o),_online:o}})(r._componentsProvider))}class yO{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class vO{constructor(e,t,s){this._userDataWriter=t,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Ns{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ns(Zn.fromBase64String(e))}catch(t){throw new Ee(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ns(Zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ns._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ah(e,Ns._jsonSchema))return Ns.fromBase64String(e.bytes)}}Ns._jsonSchemaVersion="firestore/bytes/1.0",Ns._jsonSchema={type:Tn("string",Ns._jsonSchemaVersion),bytes:Tn("string")};class Gd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $d{constructor(e){this._methodName=e}}class wi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wi._jsonSchemaVersion}}static fromJSON(e){if(ah(e,wi._jsonSchema))return new wi(e.latitude,e.longitude)}}wi._jsonSchemaVersion="firestore/geoPoint/1.0",wi._jsonSchema={type:Tn("string",wi._jsonSchemaVersion),latitude:Tn("number"),longitude:Tn("number")};class Ai{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==a[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ai._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ah(e,Ai._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ai(e.vectorValues);throw new Ee(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ai._jsonSchemaVersion="firestore/vectorValue/1.0",Ai._jsonSchema={type:Tn("string",Ai._jsonSchemaVersion),vectorValues:Tn("object")};const bO=/^__.*__$/;class _O{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new El(e,this.data,this.fieldMask,t,this.fieldTransforms):new lh(e,this.data,t,this.fieldTransforms)}}class Zw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new El(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ww(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{Ac:r})}}class f0{constructor(e,t,s,a,o,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new f0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ww(this.Ac)&&bO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xO{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Bd(e)}Cc(e,t,s,a=!1){return new f0({Ac:e,methodName:t,Dc:s,path:Qn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kd(r){const e=r._freezeSettings(),t=Bd(r._databaseId);return new xO(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Jw(r,e,t,s,a,o={}){const u=r.Cc(o.merge||o.mergeFields?2:0,e,t,a);m0("Data must be an object, but it was:",u,s);const f=eA(s,u);let m,g;if(o.merge)m=new es(u.fieldMask),g=u.fieldTransforms;else if(o.mergeFields){const v=[];for(const x of o.mergeFields){const T=iy(e,x,t);if(!u.contains(T))throw new Ee(oe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);nA(v,T)||v.push(T)}m=new es(v),g=u.fieldTransforms.filter((x=>m.covers(x.field)))}else m=null,g=u.fieldTransforms;return new _O(new Mr(f),m,g)}class Qd extends $d{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qd}}class d0 extends $d{_toFieldTransform(e){return new cI(e.path,new Ku)}isEqual(e){return e instanceof d0}}function EO(r,e,t,s){const a=r.Cc(1,e,t);m0("Data must be an object, but it was:",a,s);const o=[],u=Mr.empty();xl(s,((m,g)=>{const v=g0(e,m,t);g=Xn(g);const x=a.yc(v);if(g instanceof Qd)o.push(v);else{const T=hh(g,x);T!=null&&(o.push(v),u.set(v,T))}}));const f=new es(o);return new Zw(u,f,a.fieldTransforms)}function TO(r,e,t,s,a,o){const u=r.Cc(1,e,t),f=[iy(e,s,t)],m=[a];if(o.length%2!=0)throw new Ee(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)f.push(iy(e,o[T])),m.push(o[T+1]);const g=[],v=Mr.empty();for(let T=f.length-1;T>=0;--T)if(!nA(g,f[T])){const A=f[T];let C=m[T];C=Xn(C);const j=u.yc(A);if(C instanceof Qd)g.push(A);else{const I=hh(C,j);I!=null&&(g.push(A),v.set(A,I))}}const x=new es(g);return new Zw(v,x,u.fieldTransforms)}function wO(r,e,t,s=!1){return hh(t,r.Cc(s?4:3,e))}function hh(r,e){if(tA(r=Xn(r)))return m0("Unsupported field value:",e,r),eA(r,e);if(r instanceof $d)return(function(s,a){if(!Ww(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(a);o&&a.fieldTransforms.push(o)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const o=[];let u=0;for(const f of s){let m=hh(f,a.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}})(r,e)}return(function(s,a){if((s=Xn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return aI(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=Bt.fromDate(s);return{timestampValue:md(a.serializer,o)}}if(s instanceof Bt){const o=new Bt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:md(a.serializer,o)}}if(s instanceof wi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ns)return{bytesValue:yw(a.serializer,s._byteString)};if(s instanceof mn){const o=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(o))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Xy(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Ai)return(function(u,f){return{mapValue:{fields:{[GT]:{stringValue:$T},[hd]:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw f.Sc("VectorValues must only contain numeric values.");return $y(f.serializer,g)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Dd(s)}`)})(r,e)}function eA(r,e){const t={};return UT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xl(r,((s,a)=>{const o=hh(a,e.mc(s));o!=null&&(t[s]=o)})),{mapValue:{fields:t}}}function tA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Bt||r instanceof wi||r instanceof Ns||r instanceof mn||r instanceof $d||r instanceof Ai)}function m0(r,e,t){if(!tA(t)||!VT(t)){const s=Dd(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function iy(r,e,t){if((e=Xn(e))instanceof Gd)return e._internalPath;if(typeof e=="string")return g0(r,e);throw vd("Field path arguments must be of type string or ",r,!1,void 0,t)}const AO=new RegExp("[~\\*/\\[\\]]");function g0(r,e,t){if(e.search(AO)>=0)throw vd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Gd(...e.split("."))._internalPath}catch{throw vd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function vd(r,e,t,s,a){const o=s&&!s.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(o||u)&&(m+=" (found",o&&(m+=` in field ${s}`),u&&(m+=` in document ${a}`),m+=")"),new Ee(oe.INVALID_ARGUMENT,f+r+m)}function nA(r,e){return r.some((t=>t.isEqual(e)))}class rA{constructor(e,t,s,a,o){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class SO extends rA{data(){return super.data()}}function Yd(r,e){return typeof e=="string"?g0(r,e):e instanceof Gd?e._internalPath:e._delegate._internalPath}function NO(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ee(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class p0{}class sA extends p0{}function ti(r,e,...t){let s=[];e instanceof p0&&s.push(e),s=s.concat(t),(function(o){const u=o.filter((m=>m instanceof y0)).length,f=o.filter((m=>m instanceof Xd)).length;if(u>1||u>0&&f>0)throw new Ee(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)r=a._apply(r);return r}class Xd extends sA{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Xd(e,t,s)}_apply(e){const t=this._parse(e);return aA(e._query,t),new uo(e.firestore,e.converter,Qp(e._query,t))}_parse(e){const t=Kd(e.firestore);return(function(o,u,f,m,g,v,x){let T;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ee(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Vx(x,v);const C=[];for(const j of x)C.push(Mx(m,o,j));T={arrayValue:{values:C}}}else T=Mx(m,o,x)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Vx(x,v),T=wO(f,u,x,v==="in"||v==="not-in");return En.create(g,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function iA(r,e,t){const s=e,a=Yd("where",r);return Xd._create(a,s,t)}class y0 extends p0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new y0(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Js.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,o){let u=a;const f=o.getFlattenedFilters();for(const m of f)aA(u,m),u=Qp(u,m)})(e._query,t),new uo(e.firestore,e.converter,Qp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class v0 extends sA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new v0(e,t)}_apply(e){const t=(function(a,o,u){if(a.startAt!==null)throw new Ee(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ee(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $u(o,u)})(e._query,this._field,this._direction);return new uo(e.firestore,e.converter,(function(a,o){const u=a.explicitOrderBy.concat([o]);return new Rc(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function _a(r,e="asc"){const t=e,s=Yd("orderBy",r);return v0._create(s,t)}function Mx(r,e,t){if(typeof(t=Xn(t))=="string"){if(t==="")throw new Ee(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ew(e)&&t.indexOf("/")!==-1)throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(jt.fromString(t));if(!ke.isDocumentKey(s))throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return J_(r,new ke(s))}if(t instanceof mn)return J_(r,t._key);throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dd(t)}.`)}function Vx(r,e){if(!Array.isArray(r)||r.length===0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aA(r,e){const t=(function(a,o){for(const u of a)for(const f of u.getFlattenedFilters())if(o.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ee(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class CO{convertValue(e,t="none"){switch(pl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return xl(e,((a,o)=>{s[a]=this.convertValue(o,t)})),s}convertVectorValue(e){const t=e.fields?.[hd].arrayValue?.values?.map((s=>dn(s.doubleValue)));return new Ai(t)}convertGeoPoint(e){return new wi(dn(e.latitude),dn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=kd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Hu(e));default:return null}}convertTimestamp(e){const t=ml(e);return new Bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=jt.fromString(e);pt(ww(s),9688,{name:e});const a=new Fu(s.get(1),s.get(3)),o=new ke(s.popFirst(5));return a.isEqual(t)||ma(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function lA(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}function RO(){return new yO("count")}class Cu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xl extends rA{constructor(e,t,s,a,o,u){super(e,t,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ad(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Yd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Xl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Xl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xl._jsonSchema={type:Tn("string",Xl._jsonSchemaVersion),bundleSource:Tn("string","DocumentSnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class ad extends Xl{data(e={}){return super.data(e)}}class sc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Cu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new ad(this._firestore,this._userDataWriter,s.key,s,new Cu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,o){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((f=>{const m=new ad(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Cu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>o||f.type!==3)).map((f=>{const m=new ad(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Cu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return f.type!==0&&(g=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:IO(f.type),doc:m,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Uy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),s.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function IO(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:r})}}function ss(r){r=Ws(r,mn);const e=Ws(r.firestore,Tl);return fO(Fd(e),r._key).then((t=>OO(e,r,t)))}sc._jsonSchemaVersion="firestore/querySnapshot/1.0",sc._jsonSchema={type:Tn("string",sc._jsonSchemaVersion),bundleSource:Tn("string","QuerySnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class b0 extends CO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ns(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}function Cn(r){r=Ws(r,uo);const e=Ws(r.firestore,Tl),t=Fd(e),s=new b0(e);return NO(r._query),dO(t,r._query).then((a=>new sc(e,s,r,a)))}function vc(r,e,t){r=Ws(r,mn);const s=Ws(r.firestore,Tl),a=lA(r.converter,e,t);return Zd(s,[Jw(Kd(s),"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,Is.none())])}function fh(r,e,t,...s){r=Ws(r,mn);const a=Ws(r.firestore,Tl),o=Kd(a);let u;return u=typeof(e=Xn(e))=="string"||e instanceof Gd?TO(o,"updateDoc",r._key,e,t,s):EO(o,"updateDoc",r._key,e),Zd(a,[u.toMutation(r._key,Is.exists(!0))])}function dh(r){return Zd(Ws(r.firestore,Tl),[new Ky(r._key,Is.none())])}function mh(r,e){const t=Ws(r.firestore,Tl),s=yt(r),a=lA(r.converter,e);return Zd(t,[Jw(Kd(r.firestore),"addDoc",s._key,a,r.converter!==null,{}).toMutation(s._key,Is.exists(!1))]).then((()=>s))}function Zd(r,e){return(function(s,a){const o=new xi;return s.asyncQueue.enqueueAndForget((async()=>J3(await uO(s),a,o))),o.promise})(Fd(r),e)}function OO(r,e,t){const s=t.docs.get(e._key),a=new b0(r);return new Xl(r,a,e._key,s,new Cu(t.hasPendingWrites,t.fromCache),e.converter)}function qf(r){return DO(r,{count:RO()})}function DO(r,e){const t=Ws(r.firestore,Tl),s=Fd(t),a=k4(e,((o,u)=>new yI(u,o.aggregateType,o._internalFieldPath)));return mO(s,r._query,a).then((o=>(function(f,m,g){const v=new b0(f);return new vO(m,v,g)})(t,r,o)))}function bc(){return new d0("serverTimestamp")}(function(e,t=!0){(function(a){Sc=a})(Od),fc(new hc("firestore",((s,{instanceIdentifier:a,options:o})=>{const u=s.getProvider("app").getImmediate(),f=new Tl(new y4(s.getProvider("auth-internal")),new _4(u,s.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ee(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fu(g.options.projectId,v)})(u,a),u);return o={useFetchStreams:t,...o},f._setSettings(o),f}),"PUBLIC").setMultipleInstances(!0)),Yl(q_,B_,e),Yl(q_,B_,"esm2020")})();function oA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jO=oA,cA=new ih("auth","Firebase",oA());const bd=new ky("@firebase/auth");function LO(r,...e){bd.logLevel<=st.WARN&&bd.warn(`Auth (${Od}): ${r}`,...e)}function ld(r,...e){bd.logLevel<=st.ERROR&&bd.error(`Auth (${Od}): ${r}`,...e)}function pa(r,...e){throw x0(r,...e)}function Zl(r,...e){return x0(r,...e)}function _0(r,e,t){const s={...jO(),[e]:t};return new ih("auth","Firebase",s).create(e,{appName:r.name})}function ul(r){return _0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kO(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&pa(r,"argument-error"),_0(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function x0(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return cA.create(r,...e)}function Ke(r,e,...t){if(!r)throw x0(e,...t)}function ua(r){const e="INTERNAL ASSERTION FAILED: "+r;throw ld(e),new Error(e)}function eo(r,e){r||ua(e)}function MO(){return Px()==="http:"||Px()==="https:"}function Px(){return typeof self<"u"&&self.location?.protocol||null}function VO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MO()||eR()||"connection"in navigator)?navigator.onLine:!0}function PO(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class gh{constructor(e,t){this.shortDelay=e,this.longDelay=t,eo(t>e,"Short delay should be less than long delay!"),this.isMobile=ZC()||tR()}get(){return VO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function UO(r,e){eo(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class uA{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ua("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ua("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ua("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const BO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zO=new gh(3e4,6e4);function wl(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Al(r,e,t,s,a={}){return hA(r,a,async()=>{let o={},u={};s&&(e==="GET"?u=s:o={body:JSON.stringify(s)});const f=Ly({key:r.config.apiKey,...u}).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:m,...o};return JC()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&jy(r.emulatorConfig.host)&&(g.credentials="include"),uA.fetch()(await fA(r,r.config.apiHost,t,f),g)})}async function hA(r,e,t){r._canInitEmulator=!1;const s={...qO,...e};try{const a=new FO(r),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Bf(r,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const f=o.ok?u.errorMessage:u.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bf(r,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Bf(r,"email-already-in-use",u);if(m==="USER_DISABLED")throw Bf(r,"user-disabled",u);const v=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw _0(r,v,g);pa(r,v)}}catch(a){if(a instanceof ba)throw a;pa(r,"network-request-failed",{message:String(a)})}}async function ph(r,e,t,s,a={}){const o=await Al(r,e,t,s,a);return"mfaPendingCredential"in o&&pa(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function fA(r,e,t,s){const a=`${e}${t}?${s}`,o=r,u=o.config.emulator?UO(r.config,a):`${r.config.apiScheme}://${a}`;return BO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function HO(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Zl(this.auth,"network-request-failed")),zO.get())})}}function Bf(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Zl(r,e,s);return a.customData._tokenResponse=t,a}function Ux(r){return r!==void 0&&r.enterprise!==void 0}class GO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return HO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $O(r,e){return Al(r,"GET","/v2/recaptchaConfig",wl(r,e))}async function KO(r,e){return Al(r,"POST","/v1/accounts:delete",e)}async function _d(r,e){return Al(r,"POST","/v1/accounts:lookup",e)}function Mu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QO(r,e=!1){const t=Xn(r),s=await t.getIdToken(e),a=E0(s);Ke(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,u=o?.sign_in_provider;return{claims:a,token:s,authTime:Mu(vp(a.auth_time)),issuedAtTime:Mu(vp(a.iat)),expirationTime:Mu(vp(a.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function vp(r){return Number(r)*1e3}function E0(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return ld("JWT malformed, contained fewer than 3 sections"),null;try{const a=TT(t);return a?JSON.parse(a):(ld("Failed to decode base64 JWT payload"),null)}catch(a){return ld("Caught error parsing JWT payload as JSON",a?.toString()),null}}function qx(r){const e=E0(r);return Ke(e,"internal-error"),Ke(typeof e.exp<"u","internal-error"),Ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function _c(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ba&&YO(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function YO({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class XO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ay{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mu(this.lastLoginAt),this.creationTime=Mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function xd(r){const e=r.auth,t=await r.getIdToken(),s=await _c(r,_d(e,{idToken:t}));Ke(s?.users.length,e,"internal-error");const a=s.users[0];r._notifyReloadListener(a);const o=a.providerUserInfo?.length?dA(a.providerUserInfo):[],u=WO(r.providerData,o),f=r.isAnonymous,m=!(r.email&&a.passwordHash)&&!u?.length,g=f?m:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new ay(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(r,v)}async function ZO(r){const e=Xn(r);await xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WO(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function dA(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function JO(r,e){const t=await hA(r,{},async()=>{const s=Ly({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=r.config,u=await fA(r,a,"/v1/token",`key=${o}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:s};return r.emulatorConfig&&jy(r.emulatorConfig.host)&&(m.credentials="include"),uA.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function e5(r,e){return Al(r,"POST","/v2/accounts:revokeToken",wl(r,e))}class ic{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ke(e.idToken,"internal-error"),Ke(typeof e.idToken<"u","internal-error"),Ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ke(e.length!==0,"internal-error");const t=qx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:o}=await JO(e,t);this.updateTokensAndExpiration(s,a,Number(o))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:o}=t,u=new ic;return s&&(Ke(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(Ke(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),o&&(Ke(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ic,this.toJSON())}_performRefresh(){return ua("not implemented")}}function Za(r,e){Ke(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ys{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new XO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ay(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await _c(this,this.stsTokenManager.getToken(this.auth,e));return Ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return QO(this,e)}reload(){return ZO(this)}_assign(e){this!==e&&(Ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ys({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await xd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ss(this.auth.app))return Promise.reject(ul(this.auth));const e=await this.getIdToken();return await _c(this,KO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,o=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:x,emailVerified:T,isAnonymous:A,providerData:C,stsTokenManager:j}=t;Ke(x&&j,e,"internal-error");const I=ic.fromJSON(this.name,j);Ke(typeof x=="string",e,"internal-error"),Za(s,e.name),Za(a,e.name),Ke(typeof T=="boolean",e,"internal-error"),Ke(typeof A=="boolean",e,"internal-error"),Za(o,e.name),Za(u,e.name),Za(f,e.name),Za(m,e.name),Za(g,e.name),Za(v,e.name);const H=new Ys({uid:x,auth:e,email:a,emailVerified:T,displayName:s,isAnonymous:A,photoURL:u,phoneNumber:o,tenantId:f,stsTokenManager:I,createdAt:g,lastLoginAt:v});return C&&Array.isArray(C)&&(H.providerData=C.map($=>({...$}))),m&&(H._redirectEventId=m),H}static async _fromIdTokenResponse(e,t,s=!1){const a=new ic;a.updateFromServerResponse(t);const o=new Ys({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await xd(o),o}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Ke(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?dA(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!o?.length,f=new ic;f.updateFromIdToken(s);const m=new Ys({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new ay(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!o?.length};return Object.assign(m,g),m}}const Bx=new Map;function Kl(r){eo(r instanceof Function,"Expected a class definition");let e=Bx.get(r);return e?(eo(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Bx.set(r,e),e)}class mA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mA.type="NONE";const zx=mA;function bp(r,e,t){return`firebase:${r}:${e}:${t}`}class ac{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:o}=this.auth;this.fullUserKey=bp(this.userKey,a.apiKey,o),this.fullPersistenceKey=bp("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await _d(this.auth,{idToken:e}).catch(()=>{});return t?Ys._fromGetAccountInfoResponse(this.auth,t,e):null}return Ys._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ac(Kl(zx),e,s);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=a[0]||Kl(zx);const u=bp(s,e.config.apiKey,e.name);let f=null;for(const g of t)try{const v=await g._get(u);if(v){let x;if(typeof v=="string"){const T=await _d(e,{idToken:v}).catch(()=>{});if(!T)break;x=await Ys._fromGetAccountInfoResponse(e,T,v)}else x=Ys._fromJSON(e,v);g!==o&&(f=x),o=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new ac(o,e,s):(o=m[0],f&&await o._set(u,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==o)try{await g._remove(u)}catch{}})),new ac(o,e,s))}}function Hx(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(s5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(t5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(a5(e))return"Blackberry";if(l5(e))return"Webos";if(n5(e))return"Safari";if((e.includes("chrome/")||r5(e))&&!e.includes("edge/"))return"Chrome";if(i5(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function t5(r=Zs()){return/firefox\//i.test(r)}function n5(r=Zs()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function r5(r=Zs()){return/crios\//i.test(r)}function s5(r=Zs()){return/iemobile/i.test(r)}function i5(r=Zs()){return/android/i.test(r)}function a5(r=Zs()){return/blackberry/i.test(r)}function l5(r=Zs()){return/webos/i.test(r)}function gA(r,e=[]){let t;switch(r){case"Browser":t=Hx(Zs());break;case"Worker":t=`${Hx(Zs())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Od}/${s}`}class o5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=o=>new Promise((u,f)=>{try{const m=e(o);u(m)}catch(m){f(m)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function c5(r,e={}){return Al(r,"GET","/v2/passwordPolicy",wl(r,e))}const u5=6;class h5{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??u5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class f5{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fx(this),this.idTokenSubscription=new Fx(this),this.beforeStateQueue=new o5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kl(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ac.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await _d(this,{idToken:e}),s=await Ys._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ss(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,u=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!o||o===u)&&f?.user&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ss(this.app))return Promise.reject(ul(this));const t=e?Xn(e):null;return t&&Ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ss(this.app)?Promise.reject(ul(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ss(this.app)?Promise.reject(ul(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await c5(this),t=new h5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ih("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await e5(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Kl(e)||this._popupRedirectResolver;Ke(t,this,"argument-error"),this.redirectPersistenceManager=await ac.create(this,[Kl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ke(f,this,"internal-error"),f.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Ss(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&LO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Oc(r){return Xn(r)}class Fx{constructor(e){this.auth=e,this.observer=null,this.addObserver=oR(t=>this.observer=t)}get next(){return Ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let T0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function d5(r){T0=r}function m5(r){return T0.loadJS(r)}function g5(){return T0.recaptchaEnterpriseScript}class p5{constructor(){this.enterprise=new y5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class y5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const v5="recaptcha-enterprise",pA="NO_RECAPTCHA";class b5{constructor(e){this.type=v5,this.auth=Oc(e)}async verify(e="verify",t=!1){async function s(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,f)=>{$O(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new GO(m);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,u(g.siteKey)}}).catch(m=>{f(m)})})}function a(o,u,f){const m=window.grecaptcha;Ux(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:e}).then(g=>{u(g)}).catch(()=>{u(pA)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new p5().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{s(this.auth).then(f=>{if(!t&&Ux(window.grecaptcha))a(f,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=g5();m.length!==0&&(m+=f),m5(m).then(()=>{a(f,o,u)}).catch(g=>{u(g)})}}).catch(f=>{u(f)})})}}async function Gx(r,e,t,s=!1,a=!1){const o=new b5(r);let u;if(a)u=pA;else try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function ly(r,e,t,s,a){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Gx(r,e,t,t==="getOobCode");return s(r,o)}else return s(r,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Gx(r,e,t,t==="getOobCode");return s(r,u)}else return Promise.reject(o)})}function _5(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Kl);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}class w0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ua("not implemented")}_getIdTokenResponse(e){return ua("not implemented")}_linkToIdToken(e,t){return ua("not implemented")}_getReauthenticationResolver(e){return ua("not implemented")}}async function x5(r,e){return Al(r,"POST","/v1/accounts:signUp",e)}async function E5(r,e){return ph(r,"POST","/v1/accounts:signInWithPassword",wl(r,e))}async function T5(r,e){return ph(r,"POST","/v1/accounts:signInWithEmailLink",wl(r,e))}async function w5(r,e){return ph(r,"POST","/v1/accounts:signInWithEmailLink",wl(r,e))}class Xu extends w0{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Xu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Xu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ly(e,t,"signInWithPassword",E5);case"emailLink":return T5(e,{email:this._email,oobCode:this._password});default:pa(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ly(e,s,"signUpPassword",x5);case"emailLink":return w5(e,{idToken:t,email:this._email,oobCode:this._password});default:pa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function lc(r,e){return ph(r,"POST","/v1/accounts:signInWithIdp",wl(r,e))}const A5="http://localhost";class to extends w0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new to(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pa("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...o}=t;if(!s||!a)return null;const u=new to(s,a);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return lc(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,lc(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,lc(e,t)}buildRequest(){const e={requestUri:A5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ly(t)}return e}}function S5(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function N5(r){const e=Tu(wu(r)).link,t=e?Tu(wu(e)).deep_link_id:null,s=Tu(wu(r)).deep_link_id;return(s?Tu(wu(s)).link:null)||s||t||e||r}class A0{constructor(e){const t=Tu(wu(e)),s=t.apiKey??null,a=t.oobCode??null,o=S5(t.mode??null);Ke(s&&a&&o,"argument-error"),this.apiKey=s,this.operation=o,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=N5(e);try{return new A0(t)}catch{return null}}}class Dc{constructor(){this.providerId=Dc.PROVIDER_ID}static credential(e,t){return Xu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=A0.parseLink(t);return Ke(s,"argument-error"),Xu._fromEmailAndCode(e,s.code,s.tenantId)}}Dc.PROVIDER_ID="password";Dc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class yA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Wd extends yA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class el extends Wd{constructor(){super("facebook.com")}static credential(e){return to._fromParams({providerId:el.PROVIDER_ID,signInMethod:el.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return el.credentialFromTaggedObject(e)}static credentialFromError(e){return el.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return el.credential(e.oauthAccessToken)}catch{return null}}}el.FACEBOOK_SIGN_IN_METHOD="facebook.com";el.PROVIDER_ID="facebook.com";class _i extends Wd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return to._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return _i.credential(t,s)}catch{return null}}}_i.GOOGLE_SIGN_IN_METHOD="google.com";_i.PROVIDER_ID="google.com";class tl extends Wd{constructor(){super("github.com")}static credential(e){return to._fromParams({providerId:tl.PROVIDER_ID,signInMethod:tl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tl.credentialFromTaggedObject(e)}static credentialFromError(e){return tl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tl.credential(e.oauthAccessToken)}catch{return null}}}tl.GITHUB_SIGN_IN_METHOD="github.com";tl.PROVIDER_ID="github.com";class nl extends Wd{constructor(){super("twitter.com")}static credential(e,t){return to._fromParams({providerId:nl.PROVIDER_ID,signInMethod:nl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nl.credentialFromTaggedObject(e)}static credentialFromError(e){return nl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return nl.credential(t,s)}catch{return null}}}nl.TWITTER_SIGN_IN_METHOD="twitter.com";nl.PROVIDER_ID="twitter.com";async function C5(r,e){return ph(r,"POST","/v1/accounts:signUp",wl(r,e))}class no{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const o=await Ys._fromIdTokenResponse(e,s,a),u=$x(s);return new no({user:o,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=$x(s);return new no({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function $x(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Ed extends ba{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Ed.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Ed(e,t,s,a)}}function vA(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ed._fromErrorAndOperation(r,o,e,s):o})}async function R5(r,e,t=!1){const s=await _c(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return no._forOperation(r,"link",s)}async function I5(r,e,t=!1){const{auth:s}=r;if(Ss(s.app))return Promise.reject(ul(s));const a="reauthenticate";try{const o=await _c(r,vA(s,a,e,r),t);Ke(o.idToken,s,"internal-error");const u=E0(o.idToken);Ke(u,s,"internal-error");const{sub:f}=u;return Ke(r.uid===f,s,"user-mismatch"),no._forOperation(r,a,o)}catch(o){throw o?.code==="auth/user-not-found"&&pa(s,"user-mismatch"),o}}async function bA(r,e,t=!1){if(Ss(r.app))return Promise.reject(ul(r));const s="signIn",a=await vA(r,s,e),o=await no._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(o.user),o}async function O5(r,e){return bA(Oc(r),e)}async function _A(r){const e=Oc(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function D5(r,e,t){if(Ss(r.app))return Promise.reject(ul(r));const s=Oc(r),u=await ly(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",C5).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&_A(r),m}),f=await no._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(f.user),f}function j5(r,e,t){return Ss(r.app)?Promise.reject(ul(r)):O5(Xn(r),Dc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&_A(r),s})}async function L5(r,e){return Al(r,"POST","/v1/accounts:update",e)}async function k5(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=Xn(r),o={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await _c(s,L5(s.auth,o));s.displayName=u.displayName||null,s.photoURL=u.photoUrl||null;const f=s.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=s.displayName,f.photoURL=s.photoURL),await s._updateTokensIfNecessary(u)}function yh(r,e,t,s){return Xn(r).onAuthStateChanged(e,t,s)}function M5(r){return Xn(r).signOut()}function V5(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}new gh(3e4,6e4);function P5(r,e){return Ke(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver}class S0 extends w0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return lc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return lc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function U5(r){return bA(r.auth,new S0(r),r.bypassAuthState)}function q5(r){const{auth:e,user:t}=r;return Ke(t,e,"internal-error"),I5(t,new S0(r),r.bypassAuthState)}async function B5(r){const{auth:e,user:t}=r;return Ke(t,e,"internal-error"),R5(t,new S0(r),r.bypassAuthState)}class z5{constructor(e,t,s,a,o=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:o,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U5;case"linkViaPopup":case"linkViaRedirect":return B5;case"reauthViaPopup":case"reauthViaRedirect":return q5;default:pa(this.auth,"internal-error")}}resolve(e){eo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){eo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const H5=new gh(2e3,1e4);async function xA(r,e,t){if(Ss(r.app))return Promise.reject(Zl(r,"operation-not-supported-in-this-environment"));const s=Oc(r);kO(r,e,yA);const a=P5(s);return new Ql(s,"signInViaPopup",e,a).executeNotNull()}class Ql extends z5{constructor(e,t,s,a,o){super(e,t,a,o),this.provider=s,this.authWindow=null,this.pollId=null,Ql.currentPopupAction&&Ql.currentPopupAction.cancel(),Ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ke(e,this.auth,"internal-error"),e}async onExecution(){eo(this.filter.length===1,"Popup operations only handle one event");const e=V5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,H5.get())};e()}}Ql.currentPopupAction=null;new gh(3e4,6e4);new gh(5e3,15e3);var Kx="@firebase/auth",Qx="1.11.1";class F5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function G5(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $5(r){fc(new hc("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=s.options;Ke(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:u,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gA(r)},g=new f5(s,a,o,m);return _5(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),fc(new hc("auth-internal",e=>{const t=Oc(e.getProvider("auth").getImmediate());return(s=>new F5(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yl(Kx,Qx,G5(r)),Yl(Kx,Qx,"esm2020")}const K5=300;XC("authIdTokenMaxAge");function Q5(){return document.getElementsByTagName("head")?.[0]??document}d5({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const o=Zl("internal-error");o.customData=a,t(o)},s.type="text/javascript",s.charset="UTF-8",Q5().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$5("Browser");const Y5=()=>{const[r,e]=U.useState(null),[t,s]=U.useState(!1),a=Ri();U.useEffect(()=>{const u=yh(zt,async f=>{if(e(f),f)try{const m=await ss(yt(Ve,"users",f.uid));m.exists()&&m.data().role==="admin"?s(!0):s(!1)}catch(m){console.error("Error checking admin role:",m),s(!1)}else s(!1)});return()=>u()},[]);const o=async()=>{try{await M5(zt),a("/")}catch(u){console.error("Error logging out",u)}};return p.jsx("nav",{className:"bg-surface border-b border-gray-800 sticky top-0 z-50",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex items-center justify-between h-16",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(At,{to:"/",className:"flex-shrink-0",children:p.jsxs("span",{className:"text-secondary text-2xl font-bold tracking-tighter",children:["Forex",p.jsx("span",{className:"text-accent",children:"Volcano"})]})}),p.jsx("div",{className:"hidden md:block",children:p.jsxs("div",{className:"ml-10 flex items-baseline space-x-4",children:[p.jsx(At,{to:"/analysis",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Analysis"}),p.jsx(At,{to:"/academy",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Academy"}),p.jsx(At,{to:"/news",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"News"})]})})]}),p.jsx("div",{className:"hidden md:block",children:p.jsx("div",{className:"ml-4 flex items-center md:ml-6",children:r?p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(At,{to:"/dashboard",className:"text-primary hover:text-green-400 font-medium px-3 py-2",children:"Dashboard"}),t&&p.jsx(At,{to:"/admin",className:"text-accent hover:text-orange-400 font-medium px-3 py-2",children:"Admin Panel"}),p.jsx("button",{onClick:o,className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-md text-sm font-medium",children:"Logout"})]}):p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(At,{to:"/login",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Login"}),p.jsx(At,{to:"/register",className:"bg-primary hover:bg-green-600 text-white px-3 py-2 rounded-md text-sm font-medium",children:"Get Started"})]})})}),p.jsx("div",{className:"-mr-2 flex md:hidden",children:p.jsxs("button",{type:"button",className:"bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none","aria-controls":"mobile-menu","aria-expanded":"false",children:[p.jsx("span",{className:"sr-only",children:"Open main menu"}),p.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})})})},X5=()=>p.jsx("footer",{className:"bg-[#05080f] border-t border-gray-800/50 py-12",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[p.jsxs("div",{className:"mb-6 md:mb-0 text-center md:text-left",children:[p.jsxs(At,{to:"/",className:"text-2xl font-bold tracking-tighter text-secondary",children:["Forex",p.jsx("span",{className:"text-accent",children:"Volcano"})]}),p.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[" ",new Date().getFullYear()," ForexVolcano. All rights reserved."]})]}),p.jsxs("div",{className:"flex space-x-8",children:[p.jsx(At,{to:"/analysis",className:"text-gray-400 hover:text-white transition-colors",children:"Analysis"}),p.jsx(At,{to:"/news",className:"text-gray-400 hover:text-white transition-colors",children:"News"}),p.jsx(At,{to:"/login",className:"text-gray-400 hover:text-white transition-colors",children:"Login"})]})]})})}),Yx={primary:"bg-primary hover:bg-green-500 text-white shadow-lg shadow-green-900/20",secondary:"bg-secondary hover:bg-red-500 text-white shadow-lg shadow-red-900/20",accent:"bg-accent hover:bg-orange-500 text-white shadow-lg shadow-orange-900/20",outline:"border-2 border-slate-700 hover:border-slate-500 text-slate-300 hover:text-white bg-transparent",ghost:"text-slate-400 hover:text-white hover:bg-white/5"},Xx={sm:"px-3 py-1.5 text-sm",md:"px-6 py-3 text-base font-semibold",lg:"px-8 py-4 text-lg font-bold"},Lt=({children:r,variant:e="primary",size:t="md",to:s=null,onClick:a,className:o="",...u})=>{const f="inline-flex items-center justify-center rounded-lg transition-all duration-300 transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0a0e17] focus:ring-slate-400",m=Yx[e]||Yx.primary,g=Xx[t]||Xx.md,v=`${f} ${m} ${g} ${o}`;return s?p.jsx(At,{to:s,className:v,...u,children:r}):p.jsx("button",{onClick:a,className:v,...u,children:r})},Z5=()=>p.jsxs("div",{className:"relative overflow-hidden bg-background pt-16 pb-32 lg:pt-32 lg:pb-40",children:[p.jsxs("div",{className:"absolute top-0 left-1/2 w-full -translate-x-1/2 h-full z-0 pointer-events-none",children:[p.jsx("div",{className:"absolute top-[-10%] left-[20%] w-[500px] h-[500px] bg-secondary/10 rounded-full blur-[100px] animate-pulse"}),p.jsx("div",{className:"absolute top-[10%] right-[20%] w-[400px] h-[400px] bg-accent/10 rounded-full blur-[80px]"})]}),p.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[p.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold tracking-tight text-white mb-6",children:["Predict the ",p.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-secondary to-accent",children:"Eruption"})]}),p.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-xl text-gray-400 mb-10",children:"Professional Forex education and institutional-grade analysis. Stop guessing. Start trading with the precision of a geologist."}),p.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[p.jsx(Lt,{to:"/register",variant:"primary",size:"lg",children:"Start Learning Free"}),p.jsx(Lt,{to:"/analysis",variant:"outline",size:"lg",children:"View Daily Analysis"})]}),p.jsxs("div",{className:"mt-16 relative",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background to-transparent z-10 h-20 bottom-0 pointer-events-none"}),p.jsxs("div",{className:"inline-flex items-center gap-8 py-3 px-8 rounded-full bg-white/5 border border-white/10 backdrop-blur-sm shadow-2xl",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"font-bold text-white",children:"EUR/USD"}),p.jsx("span",{className:"text-primary text-sm",children:" 1.0842"})]}),p.jsx("div",{className:"w-px h-4 bg-gray-700"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"font-bold text-white",children:"GBP/USD"}),p.jsx("span",{className:"text-secondary text-sm",children:" 1.2615"})]}),p.jsx("div",{className:"w-px h-4 bg-gray-700"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"font-bold text-white",children:"XAU/USD"}),p.jsx("span",{className:"text-accent text-sm",children:" 2045.50"})]})]})]})]})]}),W5=[{title:"Structured Learning Path",description:'From "What is a Pip?" to institutional order flow. Our curriculum guides you step-by-step through the chaos.',icon:p.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),borderColor:"border-primary/20",iconBg:"bg-primary/10"},{title:"Daily Market Analysis",description:`Don't trade alone. Get daily "Volcano Watch" reports identifying high-probability setups before they erupt.`,icon:p.jsx("svg",{className:"w-6 h-6 text-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),borderColor:"border-secondary/20",iconBg:"bg-secondary/10"},{title:"Risk Management",description:"The volcano is dangerous. Learn how to survive. Our strict risk protocols are the core of our philosophy.",icon:p.jsx("svg",{className:"w-6 h-6 text-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),borderColor:"border-accent/20",iconBg:"bg-accent/10"}],J5=()=>p.jsx("div",{className:"py-24 bg-surface",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-base text-accent font-semibold tracking-wide uppercase",children:"Why Choose Us"}),p.jsx("p",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl",children:"A Better Way to Trade"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:W5.map((r,e)=>p.jsxs("div",{className:`p-8 bg-background/50 border ${r.borderColor} rounded-2xl hover:bg-background transition-all duration-300`,children:[p.jsx("div",{className:`w-12 h-12 ${r.iconBg} rounded-lg flex items-center justify-center mb-6`,children:r.icon}),p.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:r.title}),p.jsx("p",{className:"text-gray-400 leading-relaxed",children:r.description})]},e))})]})}),eD=()=>p.jsxs("div",{className:"flex flex-col min-h-screen",children:[p.jsx(Z5,{}),p.jsx(J5,{})]}),EA=({title:r,subtitle:e,image:t,content:s,footer:a,badges:o=[],className:u=""})=>p.jsxs("div",{className:`group relative flex flex-col overflow-hidden rounded-2xl bg-surface border border-gray-800 transition-all duration-300 hover:border-gray-700 hover:shadow-2xl hover:shadow-primary/5 ${u}`,children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent opacity-0 transition-opacity duration-500 group-hover:opacity-100 pointer-events-none"}),t&&p.jsxs("div",{className:"relative h-48 w-full overflow-hidden bg-gray-900",children:[p.jsx("img",{src:t,alt:r,className:"h-full w-full object-cover transition-transform duration-700 group-hover:scale-105",onError:f=>{f.target.style.display="none",f.target.parentElement.classList.add("flex","items-center","justify-center","bg-gray-800"),f.target.parentElement.innerHTML='<span class="text-4xl"></span>'}}),o.length>0&&p.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2",children:o.map((f,m)=>p.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded uppercase tracking-wider ${f.color||"bg-gray-800 text-white"}`,children:f.text},m))})]}),p.jsxs("div",{className:"flex flex-1 flex-col p-6 z-10",children:[e&&p.jsx("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-400",children:e}),p.jsx("h3",{className:"mb-3 text-xl font-bold text-white group-hover:text-primary transition-colors",children:r}),p.jsx("p",{className:"flex-1 text-gray-400 line-clamp-3 mb-6",children:s}),a&&p.jsx("div",{className:"mt-auto border-t border-gray-800 pt-4",children:a})]})]}),Zx=[{id:"1",pair:"EUR/USD",direction:"Bearish",title:"EUR/USD Forming Head and Shoulders on 4H",content:"Price has failed to break the 1.0900 resistance level multiple times. We are observing a clear H&S pattern formation. If the neckline at 1.0820 breaks, we expect a sharp decline towards the 1.0750 liquidity zone.",author:"Volcano Chief",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=1000&auto=format&fit=crop"},{id:"2",pair:"XAU/USD",direction:"Bullish",title:"Gold Preparing for Eruption Above 2050",content:"Geopolitical tensions and a weakening dollar suggest Gold is accumulating for a massive leg up. Watch for a retest of 2035 as a potential entry point for long positions targeting new highs.",author:"Analyst Sarah",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1000&auto=format&fit=crop"},{id:"3",pair:"GBP/JPY",direction:"Bullish",title:"The Dragon is Waking Up",content:"GJ is respecting the ascending trendline perfectly. The recent pullback to 182.00 was rejected strongly. We are looking for continuation towards 185.00 level.",author:"Volcano Chief",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1526304640151-b59310398691?q=80&w=1000&auto=format&fit=crop"}],tD=()=>{const[r,e]=U.useState([]),[t,s]=U.useState(!0),[a,o]=U.useState("All");U.useEffect(()=>{(async()=>{try{const v=ti(St(Ve,"analysis"),_a("timestamp","desc"));let T=(await Cn(v)).docs.map(A=>({id:A.id,...A.data()}));if(zt.currentUser){const A=await ss(yt(Ve,"users",zt.currentUser.uid));if(A.exists()){const C=A.data().preferences;C&&C.analysisCurrencies&&C.analysisCurrencies.length>0&&(T=T.filter(j=>C.analysisCurrencies.includes(j.pair)))}}T.length>0?e(T):zt.currentUser?e([]):e(Zx)}catch(v){console.error("Error fetching analysis:",v),e(Zx)}finally{s(!1)}})()},[]);const u=a==="All"?r:r.filter(g=>g.pair===a),f=["All",...new Set(r.map(g=>g.pair))],m=g=>{if(!g)return"";const v=g.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),x=document.createElement("DIV");return x.innerHTML=v,(x.textContent||x.innerText||"").trim()};return p.jsx("div",{className:"bg-background min-h-screen py-12",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center mb-12",children:[p.jsxs("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl tracking-tight",children:["Market ",p.jsx("span",{className:"text-primary",children:"Analysis"})]}),p.jsx("p",{className:"mt-4 text-xl text-gray-400",children:"Daily technical breakdowns and trade setups from our experts."})]}),p.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-12",children:f.map(g=>p.jsx("button",{onClick:()=>o(g),className:`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-200 ${a===g?"bg-primary text-white shadow-lg shadow-primary/25":"bg-surface text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:g},g))}),t?p.jsx("div",{className:"text-center text-white py-20",children:"Loading Volcano Data..."}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map(g=>{const v=g.direction==="Bullish"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary";return p.jsx(At,{to:`/analysis/${g.id}`,className:"block group",children:p.jsx(EA,{title:g.title,image:g.image||g.chart_image_url,content:m(g.content),subtitle:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-gray-500 text-xs",children:g.timestamp?.seconds?new Date(g.timestamp.seconds*1e3).toLocaleDateString():g.timestamp||new Date().toLocaleDateString()}),p.jsx("span",{className:"text-gray-600",children:""}),p.jsxs("span",{className:"text-gray-500 text-xs text-accent",children:["By ",g.analystName||g.author||"Admin"]})]}),badges:[{text:g.pair,color:"bg-surface border border-gray-700 text-white"},{text:g.direction,color:v}],footer:p.jsxs(Lt,{variant:"ghost",size:"sm",className:"w-full justify-between group-hover:text-white",children:["Read Full Breakdown",p.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})},g.id)})})]})})},nD=()=>{const{id:r}=Ac(),e=Ri(),[t,s]=U.useState(null),[a,o]=U.useState(!0);if(U.useEffect(()=>{(async()=>{try{const g=yt(Ve,"analysis",r),v=await ss(g);v.exists()?s({id:v.id,...v.data()}):(console.log("No such document!"),e("/analysis"))}catch(g){console.error("Error fetching analysis detail:",g)}finally{o(!1)}})()},[r,e]),a)return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:"Loading..."});if(!t)return null;const u=t.timestamp?.seconds?new Date(t.timestamp.seconds*1e3).toLocaleDateString():t.timestamp||new Date().toLocaleDateString(),f=t.direction==="Bullish"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary";return p.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"max-w-4xl mx-auto",children:[p.jsx(Lt,{variant:"ghost",onClick:()=>e("/analysis"),className:"mb-6 text-gray-400 hover:text-white",children:" Back to Analysis"}),p.jsxs("article",{className:"bg-surface rounded-2xl overflow-hidden border border-gray-800 shadow-2xl",children:[(t.image||t.chart_image_url)&&p.jsxs("div",{className:"w-full h-64 sm:h-96 relative",children:[p.jsx("img",{src:t.image||t.chart_image_url,alt:t.title,className:"w-full h-full object-cover"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent"})]}),p.jsxs("div",{className:"p-8 sm:p-12",children:[p.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[p.jsx("span",{className:"text-gray-400 text-sm",children:u}),p.jsx("span",{className:"text-gray-600",children:""}),p.jsx("span",{className:"text-accent text-sm uppercase tracking-wider font-bold",children:t.analysisType||"Technical Analysis"})]}),p.jsxs("div",{className:"flex gap-3 mb-6",children:[p.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide bg-surface border border-gray-700 text-white",children:t.pair}),p.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${f}`,children:t.direction})]}),p.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-white mb-8 leading-tight",children:t.title}),p.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300 mb-16",dangerouslySetInnerHTML:{__html:t.content}}),(t.analystName||t.analystBio)&&p.jsxs("div",{className:"border-t border-gray-800 pt-12 mt-12 mb-8",children:[p.jsx("h3",{className:"text-2xl font-bold text-white mb-8",children:"Meet Your Analyst"}),p.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-8 bg-black/20 p-8 rounded-2xl border border-gray-800/50",children:[p.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 shrink-0 rounded-full overflow-hidden ring-4 ring-primary/20",children:p.jsx("img",{src:t.analystImage||"https://images.unsplash.com/photo-1633332755192-727a05c4013d?w=400&auto=format&fit=crop&q=60",alt:t.analystName||"Analyst",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"text-center sm:text-left",children:[p.jsx("h4",{className:"text-xl font-bold text-white mb-2",children:t.analystName||"Volcano Analyst"}),p.jsx("p",{className:"text-gray-400 leading-relaxed mb-4 whitespace-pre-wrap",children:t.analystBio||"Professional market analyst at Forex Volcano."}),p.jsxs("div",{className:"flex gap-4",children:[t.twitter&&p.jsx("a",{href:t.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:p.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:p.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),t.linkedin&&p.jsx("a",{href:t.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:p.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:p.jsx("path",{fillRule:"evenodd",d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z",clipRule:"evenodd"})})}),t.telegram&&p.jsx("a",{href:t.telegram,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:p.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:p.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]})]})]})]})]})]})]})})},Wx=[{id:"1",title:"NFP Smashes Expectations: 350k Jobs Added",impact:"High",affectedCurrencies:["USD","XAU","JPY"],content:"The Non-Farm Payrolls report showed a surprise surge in job creation, sending the Dollar Index (DXY) rocketing past 104.50. Traders should watch for pullbacks on Gold.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=1000&auto=format&fit=crop"},{id:"2",title:"ECB Signals Rate Cuts in June",impact:"Medium",affectedCurrencies:["EUR","GBP"],content:"Lagarde hinted that inflation is under control, opening the door for a 25bps cut. Euro is showing weakness against the Pound.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1526304640151-b59310398691?q=80&w=1000&auto=format&fit=crop"},{id:"3",title:"BoJ Maintains Ultra-Loose Policy",impact:"Low",affectedCurrencies:["JPY"],content:"No surprises from the Bank of Japan. Yield Curve Control remains in place. USD/JPY is drifting sideways in a tight range.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1000&auto=format&fit=crop"}],rD={High:"bg-red-500/20 text-red-500 border border-red-500/50",Medium:"bg-orange-500/20 text-orange-500 border border-orange-500/50",Low:"bg-yellow-500/20 text-yellow-500 border border-yellow-500/50"},sD=()=>{const[r,e]=U.useState([]),[t,s]=U.useState(!0),a=o=>{if(!o)return"";const u=o.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),f=document.createElement("DIV");return f.innerHTML=u,(f.textContent||f.innerText||"").trim()};return U.useEffect(()=>{(async()=>{try{const u=ti(St(Ve,"news"),_a("timestamp","desc"));let m=(await Cn(u)).docs.map(g=>({id:g.id,...g.data()}));if(zt.currentUser){const g=await ss(yt(Ve,"users",zt.currentUser.uid));if(g.exists()){const v=g.data().preferences;v&&v.newsImpacts&&v.newsImpacts.length>0&&(m=m.filter(x=>v.newsImpacts.includes(x.impact)))}}m.length>0?e(m):zt.currentUser?e([]):e(Wx)}catch(u){console.error("Error fetching news:",u),e(Wx)}finally{s(!1)}})()},[]),p.jsx("div",{className:"bg-background min-h-screen py-12",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center mb-12",children:[p.jsxs("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl tracking-tight",children:["Market ",p.jsx("span",{className:"text-accent",children:"News"})]}),p.jsx("p",{className:"mt-4 text-xl text-gray-400",children:"Stay ahead of the volatility with real-time economic updates."})]}),t?p.jsx("div",{className:"text-center text-white py-20",children:"Loading Earth-shaking Events..."}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(o=>p.jsx(At,{to:`/news/${o.id}`,className:"block group",children:p.jsx(EA,{title:o.title,image:o.image,content:a(o.content),subtitle:p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("span",{className:"text-gray-500 text-xs",children:o.timestamp?.seconds?new Date(o.timestamp.seconds*1e3).toLocaleDateString():o.timestamp||new Date().toLocaleDateString()})}),badges:[{text:o.impact,color:rD[o.impact]||"bg-gray-800 text-white"},...(o.affectedCurrencies||[]).map(u=>({text:u,color:"bg-surface border border-gray-700 text-white"}))]})},o.id))})]})})},iD=()=>{const{id:r}=Ac(),e=Ri(),[t,s]=U.useState(null),[a,o]=U.useState(!0);if(U.useEffect(()=>{(async()=>{try{const m=yt(Ve,"news",r),g=await ss(m);g.exists()?s({id:g.id,...g.data()}):(console.log("No such document!"),e("/news"))}catch(m){console.error("Error fetching news detail:",m)}finally{o(!1)}})()},[r,e]),a)return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:"Loading..."});if(!t)return null;const u=t.timestamp?.seconds?new Date(t.timestamp.seconds*1e3).toLocaleDateString():t.timestamp||new Date().toLocaleDateString();return p.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"max-w-4xl mx-auto",children:[p.jsx(Lt,{variant:"ghost",onClick:()=>e("/news"),className:"mb-6 text-gray-400 hover:text-white",children:" Back to News"}),p.jsxs("article",{className:"bg-surface rounded-2xl overflow-hidden border border-gray-800 shadow-2xl",children:[t.image&&p.jsxs("div",{className:"w-full h-64 sm:h-96 relative",children:[p.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent"})]}),p.jsxs("div",{className:"p-8 sm:p-12",children:[p.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[p.jsx("span",{className:"text-gray-400 text-sm",children:u}),p.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide
                                ${t.impact==="High"?"bg-red-500/20 text-red-400":t.impact==="Medium"?"bg-orange-500/20 text-orange-400":"bg-green-500/20 text-green-400"}`,children:[t.impact," Impact"]}),t.affectedCurrencies&&t.affectedCurrencies.map&&t.affectedCurrencies.map(f=>p.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gray-800 text-gray-300 border border-gray-700",children:f},f))]}),p.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-white mb-8 leading-tight",children:t.title}),p.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300",dangerouslySetInnerHTML:{__html:t.content}})]})]})]})})},aD=()=>{const[r,e]=U.useState(""),[t,s]=U.useState(""),[a,o]=U.useState(""),[u,f]=U.useState(!1),m=Ri(),g=async T=>{try{const A=await ss(yt(Ve,"users",T));A.exists()&&A.data().role==="admin"?m("/admin"):m("/dashboard")}catch(A){console.error("Error checking role:",A),m("/dashboard")}},v=async T=>{T.preventDefault(),o(""),f(!0);try{const A=await j5(zt,r,t);await g(A.user.uid)}catch(A){console.error(A),o("Failed to login. Please check your credentials.")}finally{f(!1)}},x=async()=>{try{const T=new _i,A=await xA(zt,T);await g(A.user.uid)}catch(T){console.error(T),o("Failed to sign in with Google")}};return p.jsxs("div",{className:"min-h-screen bg-background flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[p.jsxs("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:["Sign in to ",p.jsx("span",{className:"text-secondary",children:"Volcano"})]}),p.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Or"," ",p.jsx(At,{to:"/register",className:"font-medium text-primary hover:text-green-400",children:"start your 14-day free trial"})]})]}),p.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:p.jsxs("div",{className:"bg-surface py-8 px-4 shadow sm:rounded-lg sm:px-10 border border-gray-800",children:[p.jsxs("form",{className:"space-y-6",onSubmit:v,children:[a&&p.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 p-3 rounded text-sm text-center",children:a}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:T=>e(T.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:T=>s(T.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),p.jsx("div",{children:p.jsx(Lt,{type:"submit",variant:"primary",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",disabled:u,children:u?"Signing in...":"Sign in"})})]}),p.jsxs("div",{className:"mt-6",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-700"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-surface text-gray-400",children:"Or continue with"})})]}),p.jsx("div",{className:"mt-6 grid grid-cols-1 gap-3",children:p.jsx("div",{children:p.jsxs("button",{type:"button",onClick:x,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-700 rounded-md shadow-sm bg-gray-800 text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[p.jsx("span",{className:"sr-only",children:"Sign in with Google"}),p.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:p.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 0.507 5.387 0 12s5.36 12 12 12c3.627 0 6.627-1.2 8.52-3.387 1.947-2.207 2.48-5.747 2.48-6.173 0-.613-.053-1.12-.133-1.507H12.48z"})})]})})})]})]})})]})},lD=()=>{const[r,e]=U.useState(""),[t,s]=U.useState(""),[a,o]=U.useState(""),[u,f]=U.useState(""),[m,g]=U.useState(!1),v=Ri(),x=async A=>{A.preventDefault(),f(""),g(!0);try{const j=(await D5(zt,t,a)).user;await k5(j,{displayName:r}),await vc(yt(Ve,"users",j.uid),{uid:j.uid,username:r,email:t,role:"user",createdAt:new Date().toISOString(),avatar_url:`https://ui-avatars.com/api/?name=${encodeURIComponent(r)}&background=random`}),v("/dashboard")}catch(C){console.error(C),C.code==="auth/email-already-in-use"?f("Email already in use."):f("Failed to create account. Please try again.")}finally{g(!1)}},T=async()=>{try{const A=new _i,j=(await xA(zt,A)).user;await vc(yt(Ve,"users",j.uid),{uid:j.uid,username:j.displayName,email:j.email,role:"user",createdAt:new Date().toISOString(),avatar_url:j.photoURL},{merge:!0}),v("/dashboard")}catch(A){console.error(A),f("Failed to sign up with Google")}};return p.jsxs("div",{className:"min-h-screen bg-background flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[p.jsxs("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:["Join the ",p.jsx("span",{className:"text-secondary",children:"Eruption"})]}),p.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Already have an account?"," ",p.jsx(At,{to:"/login",className:"font-medium text-primary hover:text-green-400",children:"Sign in"})]})]}),p.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[p.jsx("div",{className:"bg-surface py-8 px-4 shadow sm:rounded-lg sm:px-10 border border-gray-800",children:p.jsxs("form",{className:"space-y-6",onSubmit:x,children:[u&&p.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 p-3 rounded text-sm text-center",children:u}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300",children:"Full Name"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:r,onChange:A=>e(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:A=>s(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,minLength:6,value:a,onChange:A=>o(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),p.jsx("div",{children:p.jsx(Lt,{type:"submit",variant:"primary",className:"w-full justify-center",disabled:m,children:m?"Creating Account...":"Sign up"})})]})}),p.jsxs("div",{className:"mt-6",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-700"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-surface text-gray-400",children:"Or continue with"})})]}),p.jsx("div",{className:"mt-6 grid grid-cols-1 gap-3",children:p.jsx("div",{children:p.jsxs("button",{type:"button",onClick:T,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-700 rounded-md shadow-sm bg-gray-800 text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[p.jsx("span",{className:"sr-only",children:"Sign up with Google"}),p.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:p.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 0.507 5.387 0 12s5.36 12 12 12c3.627 0 6.627-1.2 8.52-3.387 1.947-2.207 2.48-5.747 2.48-6.173 0-.613-.053-1.12-.133-1.507H12.48z"})})]})})})]})]})]})},oD=({userProfile:r,setUserProfile:e})=>{const[t,s]=U.useState(r?.preferences||{newsImpacts:["High","Medium","Low"],analysisCurrencies:["XAUUSD","EURUSD","GBPUSD","BTCUSD","US30"],analysisTypes:["Technical","Fundamental"]}),[a,o]=U.useState(!1),u=async()=>{o(!0);try{await vc(yt(Ve,"users",zt.currentUser.uid),{preferences:t},{merge:!0}),e({...r,preferences:t}),alert("Preferences saved!")}catch(m){console.error("Error saving preferences:",m),alert("Failed to save.")}finally{o(!1)}},f=(m,g)=>{s(v=>{const x=v[m]||[];return x.includes(g)?{...v,[m]:x.filter(T=>T!==g)}:{...v,[m]:[...x,g]}})};return p.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 animate-fade-in",children:[p.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Dashboard Customization"}),p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"News Notifications"}),p.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select which news impacts you want to see."}),p.jsx("div",{className:"flex gap-4",children:["High","Medium","Low"].map(m=>p.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:t.newsImpacts?.includes(m),onChange:()=>f("newsImpacts",m),className:"form-checkbox text-primary rounded bg-gray-900 border-gray-700"}),p.jsxs("span",{className:"text-gray-300",children:[m," Impact"]})]},m))})]}),p.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[p.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Analysis Filters"}),p.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Choose your favorite pairs to track."}),p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["XAUUSD","EURUSD","GBPUSD","USDJPY","BTCUSD","ETHUSD","US30","NAS100"].map(m=>p.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:t.analysisCurrencies?.includes(m),onChange:()=>f("analysisCurrencies",m),className:"form-checkbox text-primary rounded bg-gray-900 border-gray-700"}),p.jsx("span",{className:"text-gray-300",children:m})]},m))})]})]}),p.jsx("div",{className:"mt-8",children:p.jsx(Lt,{onClick:u,disabled:a,children:a?"Saving...":"Save Preferences"})})]})},cD=({userProfile:r,setUserProfile:e})=>{const[t,s]=U.useState(r?.username||""),[a,o]=U.useState(r?.bio||""),[u,f]=U.useState(!1),[m,g]=U.useState(!1),v=A=>new Promise((C,j)=>{const I=new FileReader;I.readAsDataURL(A),I.onload=H=>{const $=new Image;$.src=H.target.result,$.onload=()=>{const Z=document.createElement("canvas"),te=300,de=300;let xe=$.width,M=$.height;xe>M?xe>te&&(M*=te/xe,xe=te):M>de&&(xe*=de/M,M=de),Z.width=xe,Z.height=M,Z.getContext("2d").drawImage($,0,0,xe,M);const V=Z.toDataURL("image/jpeg",.7);C(V)},$.onerror=Z=>j(Z)},I.onerror=H=>j(H)}),x=async A=>{const C=A.target.files[0];if(C){C.size>5*1024*1024&&console.log("Large file detected, compression will be applied."),f(!0);try{const j=await v(C);j.length>5e5&&console.warn("Image might be too large for smooth database performance"),await vc(yt(Ve,"users",zt.currentUser.uid),{avatar_url:j},{merge:!0}),e({...r,avatar_url:j})}catch(j){console.error("Error processing image:",j),alert("Failed to process image.")}finally{f(!1)}}},T=async()=>{g(!0);try{if(t!==r?.username){const A=ti(St(Ve,"users"),iA("username","==",t));if(!(await Cn(A)).empty){alert("Username is already taken. Please choose another."),g(!1);return}}await vc(yt(Ve,"users",zt.currentUser.uid),{username:t,bio:a},{merge:!0}),e({...r,username:t,bio:a}),alert("Profile updated!")}catch(A){console.error("Error saving profile:",A),alert("Failed to save profile.")}finally{g(!1)}};return p.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 animate-fade-in",children:[p.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Profile Settings"}),p.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsxs("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-800 relative group",children:[p.jsx("img",{src:r?.avatar_url||`https://ui-avatars.com/api/?name=${r?.username||"User"}`,alt:"Avatar",className:"w-full h-full object-cover"}),p.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:p.jsx("span",{className:"text-xs text-white",children:"Change"})}),p.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"absolute inset-0 opacity-0 cursor-pointer"})]}),u&&p.jsx("span",{className:"text-xs text-primary",children:"Compressing & Saving..."})]}),p.jsxs("div",{className:"flex-1 space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Username (Public)"}),p.jsx("input",{type:"text",value:t,onChange:A=>s(A.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g. CryptoKing"}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique handle for your public profile."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bio"}),p.jsx("textarea",{value:a,onChange:A=>o(A.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:outline-none h-24 resize-none",placeholder:"Tell us about your trading journey..."})]}),p.jsx("div",{children:p.jsx(Lt,{onClick:T,disabled:m,children:m?"Saving...":"Save Changes"})}),r?.username&&p.jsxs("div",{className:"mt-4 p-4 bg-gray-900/50 rounded-lg border border-gray-800 flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-gray-400",children:"Your Public Profile:"}),p.jsx(At,{to:`/profile/${r.username}`,className:"text-primary hover:underline text-sm font-medium",children:"View Public Page "})]})]})]})]})},uD=()=>{const[r,e]=U.useState(null),[t,s]=U.useState(!0),[a,o]=U.useState("overview"),[u,f]=U.useState([]),[m,g]=U.useState({totalProgress:0,completed:0,avgQuiz:0});U.useEffect(()=>{(async()=>{if(zt.currentUser)try{const T=yt(Ve,"users",zt.currentUser.uid),A=await ss(T);A.exists()&&e(A.data());const C=await Cn(St(Ve,"users",zt.currentUser.uid,"course_progress")),j={};if(C.docs.forEach(I=>{j[I.id]=I.data()}),Object.keys(j).length>0){const $=(await Cn(St(Ve,"courses"))).docs.map(te=>({id:te.id,...te.data()})).filter(te=>j[te.id]).map(te=>{const de=j[te.id],xe=de.completedLessonIds?.length||0;return{...te,completedCount:xe,lastAccessed:de.lastAccessed}});f($);const Z=$.reduce((te,de)=>te+de.completedCount,0);g({totalProgress:Z,completed:$.length,avgQuiz:0})}}catch(T){console.error("Error fetching user data:",T)}finally{s(!1)}})()},[]);const v=r?.username||zt.currentUser?.displayName||"Trader";return p.jsxs("div",{className:"min-h-screen bg-background text-white animate-fade-in",children:[p.jsx("div",{className:"bg-surface border-b border-gray-800",children:p.jsx("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-primary to-secondary p-[2px]",children:p.jsx("img",{src:r?.avatar_url||`https://ui-avatars.com/api/?name=${v}`,alt:"Profile",className:"h-full w-full rounded-full bg-background object-cover"})}),p.jsxs("div",{children:[p.jsxs("h1",{className:"text-3xl font-bold text-white",children:["Welcome back, ",p.jsx("span",{className:"text-primary",children:v})]}),p.jsx("p",{className:"mt-1 text-gray-400",children:"Ready to dominate the markets today?"})]})]})})}),p.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"flex space-x-6 mb-8 border-b border-gray-800",children:[p.jsx("button",{onClick:()=>o("overview"),className:`pb-4 px-2 font-medium transition-colors ${a==="overview"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"My Learning"}),p.jsx("button",{onClick:()=>o("settings"),className:`pb-4 px-2 font-medium transition-colors ${a==="settings"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Settings & Preferences"}),p.jsx("button",{onClick:()=>o("profile"),className:`pb-4 px-2 font-medium transition-colors ${a==="profile"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Profile"})]}),a==="overview"?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3 mb-12",children:[p.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:p.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[p.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Lessons Completed"}),p.jsx("dd",{className:"mt-1 text-3xl font-semibold text-white",children:m.totalProgress})]})}),p.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:p.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[p.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Active Courses"}),p.jsx("dd",{className:"mt-1 text-3xl font-semibold text-primary",children:m.completed})]})}),p.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:p.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[p.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Quiz Score Avg"}),p.jsx("dd",{className:"mt-1 text-3xl font-semibold text-secondary",children:"N/A"})]})})]}),p.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Your Courses"}),u.length>0?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map(x=>p.jsxs("div",{className:"bg-surface rounded-xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-colors group",children:[p.jsxs("div",{className:"h-48 overflow-hidden relative",children:[p.jsx("img",{src:x.image,alt:x.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),p.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(At,{to:`/academy/${x.path||"General"}/${x.id}`,children:p.jsx(Lt,{variant:"primary",size:"sm",children:"Continue Learning"})})})]}),p.jsxs("div",{className:"p-6",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:x.title}),p.jsxs("div",{className:"mt-4",children:[p.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[p.jsx("span",{children:"Lessons Completed"}),p.jsx("span",{children:x.completedCount})]}),p.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:p.jsx("div",{className:"h-2 rounded-full bg-secondary",style:{width:`${Math.min(x.completedCount/10*100,100)}%`}})})]})]})]},x.id))}):p.jsxs("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:[p.jsx("p",{className:"text-gray-400 mb-4",children:"You haven't started any courses yet."}),p.jsx(At,{to:"/academy",children:p.jsx(Lt,{children:"Explore Academy"})})]})]}):a==="settings"?p.jsx(oD,{userProfile:r,setUserProfile:e}):p.jsx(cD,{userProfile:r,setUserProfile:e})]})]})},hD=()=>{const[r,e]=U.useState(!1),[t,s]=U.useState(!0),a=Ri();return U.useEffect(()=>{const o=yh(zt,async u=>{if(u)try{const f=await ss(yt(Ve,"users",u.uid));f.exists()&&f.data().role==="admin"?e(!0):a("/dashboard")}catch(f){console.error("Admin check failed",f),a("/dashboard")}else a("/login");s(!1)});return()=>o()},[a]),t?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-2xl font-bold mb-2",children:"Verifying Clearance..."}),p.jsx("div",{className:"text-gray-400",children:"Please wait."})]})}):r?p.jsxs("div",{className:"min-h-screen bg-background flex",children:[p.jsxs("aside",{className:"w-64 bg-surface border-r border-gray-800 flex-shrink-0 hidden md:flex flex-col",children:[p.jsx("div",{className:"p-6 border-b border-gray-800",children:p.jsxs("span",{className:"text-xl font-bold text-white tracking-wider",children:["VOLCANO ",p.jsx("span",{className:"text-secondary text-base",children:"ADMIN"})]})}),p.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[p.jsx(_u,{to:"/admin",end:!0,children:"Dashboard"}),p.jsx(_u,{to:"/admin/news",children:"Manage News"}),p.jsx(_u,{to:"/admin/analysis",children:"Manage Analysis"}),p.jsx(_u,{to:"/admin/courses",children:"Manage Courses"}),p.jsx(_u,{to:"/admin/profile",children:"Analyst Profile"})]}),p.jsxs("div",{className:"p-4 border-t border-gray-800",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold",children:"A"}),p.jsxs("div",{className:"text-sm",children:[p.jsx("div",{className:"text-white font-medium",children:"Administrator"}),p.jsx("div",{className:"text-gray-500 text-xs",children:"Super User"})]})]}),p.jsx(Lt,{variant:"outline",size:"sm",className:"w-full",onClick:()=>a("/"),children:"Exit to Site"})]})]}),p.jsxs("div",{className:"md:hidden absolute top-0 left-0 right-0 h-16 bg-surface border-b border-gray-800 flex items-center px-4 justify-between z-20",children:[p.jsx("span",{className:"font-bold text-white",children:"Admin Panel"}),p.jsx(Lt,{size:"sm",onClick:()=>a("/"),children:"Exit"})]}),p.jsx("main",{className:"flex-1 overflow-auto p-8 pt-24 md:pt-8",children:p.jsx(lC,{})})]}):null},_u=({to:r,children:e,end:t=!1})=>p.jsx(yT,{to:r,end:t,className:({isActive:s})=>`block px-4 py-3 rounded-lg text-sm font-medium transition-colors ${s?"bg-primary/10 text-primary border border-primary/20":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:e}),fD=()=>{const[r,e]=U.useState({users:0,courses:0,analysis:0,news:0}),[t,s]=U.useState(!0);return U.useEffect(()=>{(async()=>{try{const o=await qf(St(Ve,"users")),u=await qf(St(Ve,"courses")),f=await qf(St(Ve,"analysis")),m=await qf(St(Ve,"news"));e({users:o.data().count,courses:u.data().count,analysis:f.data().count,news:m.data().count})}catch(o){console.error("Error fetching stats:",o)}finally{s(!1)}})()},[]),p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"System Overview"}),p.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[p.jsx(zf,{title:"Total Users",value:t?"...":r.users,change:"Registered",color:"primary"}),p.jsx(zf,{title:"Active Courses",value:t?"...":r.courses,change:"Live",color:"white"}),p.jsx(zf,{title:"Analysis Posts",value:t?"...":r.analysis,change:"Market Updates",color:"secondary"}),p.jsx(zf,{title:"News Alerts",value:t?"...":r.news,change:"Published",color:"accent"})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[p.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Quick Actions"}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(_p,{label:"Post New Analysis",to:"/admin/analysis"}),p.jsx(_p,{label:"Broadcast News Alert",to:"/admin/news"}),p.jsx(_p,{label:"Review New User Signups",to:"#"})]})]}),p.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[p.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"System Status"}),p.jsxs("div",{className:"space-y-4",children:[p.jsx(xp,{label:"Database Connection",status:"Healthy"}),p.jsx(xp,{label:"Auth Service",status:"Healthy"}),p.jsx(xp,{label:"API Latency",status:"24ms"})]})]})]})]})},zf=({title:r,value:e,change:t,color:s})=>{const a={primary:"text-primary",secondary:"text-secondary",accent:"text-accent",white:"text-white"};return p.jsxs("div",{className:"bg-surface rounded-xl p-6 border border-gray-800",children:[p.jsx("p",{className:"text-sm font-medium text-gray-400",children:r}),p.jsxs("div",{className:"mt-2 flex items-baseline",children:[p.jsx("p",{className:`text-3xl font-semibold ${a[s]||"text-white"}`,children:e}),p.jsx("p",{className:"ml-2 text-sm text-gray-500",children:t})]})]})},_p=({label:r,to:e})=>p.jsxs(At,{to:e,className:"flex items-center justify-between p-3 bg-background rounded-lg hover:bg-gray-800 cursor-pointer transition-colors",children:[p.jsx("span",{className:"text-gray-300",children:r}),p.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),xp=({label:r,status:e})=>p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-400",children:r}),p.jsxs("span",{className:"flex items-center text-primary text-sm font-medium",children:[p.jsx("span",{className:"w-2 h-2 bg-primary rounded-full mr-2"}),e]})]});var TA=typeof global=="object"&&global&&global.Object===Object&&global,dD=typeof self=="object"&&self&&self.Object===Object&&self,Ii=TA||dD||Function("return this")(),bl=Ii.Symbol,wA=Object.prototype,mD=wA.hasOwnProperty,gD=wA.toString,xu=bl?bl.toStringTag:void 0;function pD(r){var e=mD.call(r,xu),t=r[xu];try{r[xu]=void 0;var s=!0}catch{}var a=gD.call(r);return s&&(e?r[xu]=t:delete r[xu]),a}var yD=Object.prototype,vD=yD.toString;function bD(r){return vD.call(r)}var _D="[object Null]",xD="[object Undefined]",Jx=bl?bl.toStringTag:void 0;function jc(r){return r==null?r===void 0?xD:_D:Jx&&Jx in Object(r)?pD(r):bD(r)}function ya(r){return r!=null&&typeof r=="object"}var ro=Array.isArray;function Sl(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}function AA(r){return r}var ED="[object AsyncFunction]",TD="[object Function]",wD="[object GeneratorFunction]",AD="[object Proxy]";function N0(r){if(!Sl(r))return!1;var e=jc(r);return e==TD||e==wD||e==ED||e==AD}var Ep=Ii["__core-js_shared__"],eE=(function(){var r=/[^.]+$/.exec(Ep&&Ep.keys&&Ep.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function SD(r){return!!eE&&eE in r}var ND=Function.prototype,CD=ND.toString;function ho(r){if(r!=null){try{return CD.call(r)}catch{}try{return r+""}catch{}}return""}var RD=/[\\^$.*+?()[\]{}|]/g,ID=/^\[object .+?Constructor\]$/,OD=Function.prototype,DD=Object.prototype,jD=OD.toString,LD=DD.hasOwnProperty,kD=RegExp("^"+jD.call(LD).replace(RD,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function MD(r){if(!Sl(r)||SD(r))return!1;var e=N0(r)?kD:ID;return e.test(ho(r))}function VD(r,e){return r?.[e]}function fo(r,e){var t=VD(r,e);return MD(t)?t:void 0}var oy=fo(Ii,"WeakMap"),tE=Object.create,PD=(function(){function r(){}return function(e){if(!Sl(e))return{};if(tE)return tE(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}})();function UD(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function qD(r,e){var t=-1,s=r.length;for(e||(e=Array(s));++t<s;)e[t]=r[t];return e}var BD=800,zD=16,HD=Date.now;function FD(r){var e=0,t=0;return function(){var s=HD(),a=zD-(s-t);if(t=s,a>0){if(++e>=BD)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function GD(r){return function(){return r}}var Td=(function(){try{var r=fo(Object,"defineProperty");return r({},"",{}),r}catch{}})(),$D=Td?function(r,e){return Td(r,"toString",{configurable:!0,enumerable:!1,value:GD(e),writable:!0})}:AA,KD=FD($D);function QD(r,e){for(var t=-1,s=r==null?0:r.length;++t<s&&e(r[t],t,r)!==!1;);return r}var YD=9007199254740991,XD=/^(?:0|[1-9]\d*)$/;function SA(r,e){var t=typeof r;return e=e??YD,!!e&&(t=="number"||t!="symbol"&&XD.test(r))&&r>-1&&r%1==0&&r<e}function C0(r,e,t){e=="__proto__"&&Td?Td(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function vh(r,e){return r===e||r!==r&&e!==e}var ZD=Object.prototype,WD=ZD.hasOwnProperty;function NA(r,e,t){var s=r[e];(!(WD.call(r,e)&&vh(s,t))||t===void 0&&!(e in r))&&C0(r,e,t)}function JD(r,e,t,s){var a=!t;t||(t={});for(var o=-1,u=e.length;++o<u;){var f=e[o],m=void 0;m===void 0&&(m=r[f]),a?C0(t,f,m):NA(t,f,m)}return t}var nE=Math.max;function ej(r,e,t){return e=nE(e===void 0?r.length-1:e,0),function(){for(var s=arguments,a=-1,o=nE(s.length-e,0),u=Array(o);++a<o;)u[a]=s[e+a];a=-1;for(var f=Array(e+1);++a<e;)f[a]=s[a];return f[e]=t(u),UD(r,this,f)}}function tj(r,e){return KD(ej(r,e,AA),r+"")}var nj=9007199254740991;function CA(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=nj}function Jd(r){return r!=null&&CA(r.length)&&!N0(r)}function rj(r,e,t){if(!Sl(t))return!1;var s=typeof e;return(s=="number"?Jd(t)&&SA(e,t.length):s=="string"&&e in t)?vh(t[e],r):!1}function sj(r){return tj(function(e,t){var s=-1,a=t.length,o=a>1?t[a-1]:void 0,u=a>2?t[2]:void 0;for(o=r.length>3&&typeof o=="function"?(a--,o):void 0,u&&rj(t[0],t[1],u)&&(o=a<3?void 0:o,a=1),e=Object(e);++s<a;){var f=t[s];f&&r(e,f,s,o)}return e})}var ij=Object.prototype;function R0(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||ij;return r===t}function aj(r,e){for(var t=-1,s=Array(r);++t<r;)s[t]=e(t);return s}var lj="[object Arguments]";function rE(r){return ya(r)&&jc(r)==lj}var RA=Object.prototype,oj=RA.hasOwnProperty,cj=RA.propertyIsEnumerable,cy=rE((function(){return arguments})())?rE:function(r){return ya(r)&&oj.call(r,"callee")&&!cj.call(r,"callee")};function uj(){return!1}var IA=typeof ts=="object"&&ts&&!ts.nodeType&&ts,sE=IA&&typeof ns=="object"&&ns&&!ns.nodeType&&ns,hj=sE&&sE.exports===IA,iE=hj?Ii.Buffer:void 0,fj=iE?iE.isBuffer:void 0,Zu=fj||uj,dj="[object Arguments]",mj="[object Array]",gj="[object Boolean]",pj="[object Date]",yj="[object Error]",vj="[object Function]",bj="[object Map]",_j="[object Number]",xj="[object Object]",Ej="[object RegExp]",Tj="[object Set]",wj="[object String]",Aj="[object WeakMap]",Sj="[object ArrayBuffer]",Nj="[object DataView]",Cj="[object Float32Array]",Rj="[object Float64Array]",Ij="[object Int8Array]",Oj="[object Int16Array]",Dj="[object Int32Array]",jj="[object Uint8Array]",Lj="[object Uint8ClampedArray]",kj="[object Uint16Array]",Mj="[object Uint32Array]",qt={};qt[Cj]=qt[Rj]=qt[Ij]=qt[Oj]=qt[Dj]=qt[jj]=qt[Lj]=qt[kj]=qt[Mj]=!0;qt[dj]=qt[mj]=qt[Sj]=qt[gj]=qt[Nj]=qt[pj]=qt[yj]=qt[vj]=qt[bj]=qt[_j]=qt[xj]=qt[Ej]=qt[Tj]=qt[wj]=qt[Aj]=!1;function Vj(r){return ya(r)&&CA(r.length)&&!!qt[jc(r)]}function I0(r){return function(e){return r(e)}}var OA=typeof ts=="object"&&ts&&!ts.nodeType&&ts,Vu=OA&&typeof ns=="object"&&ns&&!ns.nodeType&&ns,Pj=Vu&&Vu.exports===OA,Tp=Pj&&TA.process,xc=(function(){try{var r=Vu&&Vu.require&&Vu.require("util").types;return r||Tp&&Tp.binding&&Tp.binding("util")}catch{}})(),aE=xc&&xc.isTypedArray,O0=aE?I0(aE):Vj,Uj=Object.prototype,qj=Uj.hasOwnProperty;function DA(r,e){var t=ro(r),s=!t&&cy(r),a=!t&&!s&&Zu(r),o=!t&&!s&&!a&&O0(r),u=t||s||a||o,f=u?aj(r.length,String):[],m=f.length;for(var g in r)(e||qj.call(r,g))&&!(u&&(g=="length"||a&&(g=="offset"||g=="parent")||o&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||SA(g,m)))&&f.push(g);return f}function jA(r,e){return function(t){return r(e(t))}}var Bj=jA(Object.keys,Object),zj=Object.prototype,Hj=zj.hasOwnProperty;function Fj(r){if(!R0(r))return Bj(r);var e=[];for(var t in Object(r))Hj.call(r,t)&&t!="constructor"&&e.push(t);return e}function Gj(r){return Jd(r)?DA(r):Fj(r)}function $j(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var Kj=Object.prototype,Qj=Kj.hasOwnProperty;function Yj(r){if(!Sl(r))return $j(r);var e=R0(r),t=[];for(var s in r)s=="constructor"&&(e||!Qj.call(r,s))||t.push(s);return t}function LA(r){return Jd(r)?DA(r,!0):Yj(r)}var Wu=fo(Object,"create");function Xj(){this.__data__=Wu?Wu(null):{},this.size=0}function Zj(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var Wj="__lodash_hash_undefined__",Jj=Object.prototype,e6=Jj.hasOwnProperty;function t6(r){var e=this.__data__;if(Wu){var t=e[r];return t===Wj?void 0:t}return e6.call(e,r)?e[r]:void 0}var n6=Object.prototype,r6=n6.hasOwnProperty;function s6(r){var e=this.__data__;return Wu?e[r]!==void 0:r6.call(e,r)}var i6="__lodash_hash_undefined__";function a6(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Wu&&e===void 0?i6:e,this}function so(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}so.prototype.clear=Xj;so.prototype.delete=Zj;so.prototype.get=t6;so.prototype.has=s6;so.prototype.set=a6;function l6(){this.__data__=[],this.size=0}function em(r,e){for(var t=r.length;t--;)if(vh(r[t][0],e))return t;return-1}var o6=Array.prototype,c6=o6.splice;function u6(r){var e=this.__data__,t=em(e,r);if(t<0)return!1;var s=e.length-1;return t==s?e.pop():c6.call(e,t,1),--this.size,!0}function h6(r){var e=this.__data__,t=em(e,r);return t<0?void 0:e[t][1]}function f6(r){return em(this.__data__,r)>-1}function d6(r,e){var t=this.__data__,s=em(t,r);return s<0?(++this.size,t.push([r,e])):t[s][1]=e,this}function xa(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}xa.prototype.clear=l6;xa.prototype.delete=u6;xa.prototype.get=h6;xa.prototype.has=f6;xa.prototype.set=d6;var Ju=fo(Ii,"Map");function m6(){this.size=0,this.__data__={hash:new so,map:new(Ju||xa),string:new so}}function g6(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function tm(r,e){var t=r.__data__;return g6(e)?t[typeof e=="string"?"string":"hash"]:t.map}function p6(r){var e=tm(this,r).delete(r);return this.size-=e?1:0,e}function y6(r){return tm(this,r).get(r)}function v6(r){return tm(this,r).has(r)}function b6(r,e){var t=tm(this,r),s=t.size;return t.set(r,e),this.size+=t.size==s?0:1,this}function mo(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}mo.prototype.clear=m6;mo.prototype.delete=p6;mo.prototype.get=y6;mo.prototype.has=v6;mo.prototype.set=b6;function _6(r,e){for(var t=-1,s=e.length,a=r.length;++t<s;)r[a+t]=e[t];return r}var kA=jA(Object.getPrototypeOf,Object),x6="[object Object]",E6=Function.prototype,T6=Object.prototype,MA=E6.toString,w6=T6.hasOwnProperty,A6=MA.call(Object);function S6(r){if(!ya(r)||jc(r)!=x6)return!1;var e=kA(r);if(e===null)return!0;var t=w6.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&MA.call(t)==A6}function N6(){this.__data__=new xa,this.size=0}function C6(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function R6(r){return this.__data__.get(r)}function I6(r){return this.__data__.has(r)}var O6=200;function D6(r,e){var t=this.__data__;if(t instanceof xa){var s=t.__data__;if(!Ju||s.length<O6-1)return s.push([r,e]),this.size=++t.size,this;t=this.__data__=new mo(s)}return t.set(r,e),this.size=t.size,this}function Si(r){var e=this.__data__=new xa(r);this.size=e.size}Si.prototype.clear=N6;Si.prototype.delete=C6;Si.prototype.get=R6;Si.prototype.has=I6;Si.prototype.set=D6;var VA=typeof ts=="object"&&ts&&!ts.nodeType&&ts,lE=VA&&typeof ns=="object"&&ns&&!ns.nodeType&&ns,j6=lE&&lE.exports===VA,oE=j6?Ii.Buffer:void 0,cE=oE?oE.allocUnsafe:void 0;function PA(r,e){if(e)return r.slice();var t=r.length,s=cE?cE(t):new r.constructor(t);return r.copy(s),s}function L6(r,e){for(var t=-1,s=r==null?0:r.length,a=0,o=[];++t<s;){var u=r[t];e(u,t,r)&&(o[a++]=u)}return o}function k6(){return[]}var M6=Object.prototype,V6=M6.propertyIsEnumerable,uE=Object.getOwnPropertySymbols,P6=uE?function(r){return r==null?[]:(r=Object(r),L6(uE(r),function(e){return V6.call(r,e)}))}:k6;function U6(r,e,t){var s=e(r);return ro(r)?s:_6(s,t(r))}function uy(r){return U6(r,Gj,P6)}var hy=fo(Ii,"DataView"),fy=fo(Ii,"Promise"),dy=fo(Ii,"Set"),hE="[object Map]",q6="[object Object]",fE="[object Promise]",dE="[object Set]",mE="[object WeakMap]",gE="[object DataView]",B6=ho(hy),z6=ho(Ju),H6=ho(fy),F6=ho(dy),G6=ho(oy),$s=jc;(hy&&$s(new hy(new ArrayBuffer(1)))!=gE||Ju&&$s(new Ju)!=hE||fy&&$s(fy.resolve())!=fE||dy&&$s(new dy)!=dE||oy&&$s(new oy)!=mE)&&($s=function(r){var e=jc(r),t=e==q6?r.constructor:void 0,s=t?ho(t):"";if(s)switch(s){case B6:return gE;case z6:return hE;case H6:return fE;case F6:return dE;case G6:return mE}return e});var $6=Object.prototype,K6=$6.hasOwnProperty;function Q6(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&K6.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var wd=Ii.Uint8Array;function D0(r){var e=new r.constructor(r.byteLength);return new wd(e).set(new wd(r)),e}function Y6(r,e){var t=D0(r.buffer);return new r.constructor(t,r.byteOffset,r.byteLength)}var X6=/\w*$/;function Z6(r){var e=new r.constructor(r.source,X6.exec(r));return e.lastIndex=r.lastIndex,e}var pE=bl?bl.prototype:void 0,yE=pE?pE.valueOf:void 0;function W6(r){return yE?Object(yE.call(r)):{}}function UA(r,e){var t=e?D0(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var J6="[object Boolean]",eL="[object Date]",tL="[object Map]",nL="[object Number]",rL="[object RegExp]",sL="[object Set]",iL="[object String]",aL="[object Symbol]",lL="[object ArrayBuffer]",oL="[object DataView]",cL="[object Float32Array]",uL="[object Float64Array]",hL="[object Int8Array]",fL="[object Int16Array]",dL="[object Int32Array]",mL="[object Uint8Array]",gL="[object Uint8ClampedArray]",pL="[object Uint16Array]",yL="[object Uint32Array]";function vL(r,e,t){var s=r.constructor;switch(e){case lL:return D0(r);case J6:case eL:return new s(+r);case oL:return Y6(r);case cL:case uL:case hL:case fL:case dL:case mL:case gL:case pL:case yL:return UA(r,t);case tL:return new s;case nL:case iL:return new s(r);case rL:return Z6(r);case sL:return new s;case aL:return W6(r)}}function qA(r){return typeof r.constructor=="function"&&!R0(r)?PD(kA(r)):{}}var bL="[object Map]";function _L(r){return ya(r)&&$s(r)==bL}var vE=xc&&xc.isMap,xL=vE?I0(vE):_L,EL="[object Set]";function TL(r){return ya(r)&&$s(r)==EL}var bE=xc&&xc.isSet,wL=bE?I0(bE):TL,AL=1,BA="[object Arguments]",SL="[object Array]",NL="[object Boolean]",CL="[object Date]",RL="[object Error]",zA="[object Function]",IL="[object GeneratorFunction]",OL="[object Map]",DL="[object Number]",HA="[object Object]",jL="[object RegExp]",LL="[object Set]",kL="[object String]",ML="[object Symbol]",VL="[object WeakMap]",PL="[object ArrayBuffer]",UL="[object DataView]",qL="[object Float32Array]",BL="[object Float64Array]",zL="[object Int8Array]",HL="[object Int16Array]",FL="[object Int32Array]",GL="[object Uint8Array]",$L="[object Uint8ClampedArray]",KL="[object Uint16Array]",QL="[object Uint32Array]",Dt={};Dt[BA]=Dt[SL]=Dt[PL]=Dt[UL]=Dt[NL]=Dt[CL]=Dt[qL]=Dt[BL]=Dt[zL]=Dt[HL]=Dt[FL]=Dt[OL]=Dt[DL]=Dt[HA]=Dt[jL]=Dt[LL]=Dt[kL]=Dt[ML]=Dt[GL]=Dt[$L]=Dt[KL]=Dt[QL]=!0;Dt[RL]=Dt[zA]=Dt[VL]=!1;function od(r,e,t,s,a,o){var u,f=e&AL;if(u!==void 0)return u;if(!Sl(r))return r;var m=ro(r);if(m)u=Q6(r);else{var g=$s(r),v=g==zA||g==IL;if(Zu(r))return PA(r,f);if(g==HA||g==BA||v&&!a)u=v?{}:qA(r);else{if(!Dt[g])return a?r:{};u=vL(r,g,f)}}o||(o=new Si);var x=o.get(r);if(x)return x;o.set(r,u),wL(r)?r.forEach(function(C){u.add(od(C,e,t,C,r,o))}):xL(r)&&r.forEach(function(C,j){u.set(j,od(C,e,t,j,r,o))});var T=uy,A=m?void 0:T(r);return QD(A||r,function(C,j){A&&(j=C,C=r[j]),NA(u,j,od(C,e,t,j,r,o))}),u}var YL=1,XL=4;function oc(r){return od(r,YL|XL)}var ZL="__lodash_hash_undefined__";function WL(r){return this.__data__.set(r,ZL),this}function JL(r){return this.__data__.has(r)}function Ad(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new mo;++e<t;)this.add(r[e])}Ad.prototype.add=Ad.prototype.push=WL;Ad.prototype.has=JL;function ek(r,e){for(var t=-1,s=r==null?0:r.length;++t<s;)if(e(r[t],t,r))return!0;return!1}function tk(r,e){return r.has(e)}var nk=1,rk=2;function FA(r,e,t,s,a,o){var u=t&nk,f=r.length,m=e.length;if(f!=m&&!(u&&m>f))return!1;var g=o.get(r),v=o.get(e);if(g&&v)return g==e&&v==r;var x=-1,T=!0,A=t&rk?new Ad:void 0;for(o.set(r,e),o.set(e,r);++x<f;){var C=r[x],j=e[x];if(s)var I=u?s(j,C,x,e,r,o):s(C,j,x,r,e,o);if(I!==void 0){if(I)continue;T=!1;break}if(A){if(!ek(e,function(H,$){if(!tk(A,$)&&(C===H||a(C,H,t,s,o)))return A.push($)})){T=!1;break}}else if(!(C===j||a(C,j,t,s,o))){T=!1;break}}return o.delete(r),o.delete(e),T}function sk(r){var e=-1,t=Array(r.size);return r.forEach(function(s,a){t[++e]=[a,s]}),t}function ik(r){var e=-1,t=Array(r.size);return r.forEach(function(s){t[++e]=s}),t}var ak=1,lk=2,ok="[object Boolean]",ck="[object Date]",uk="[object Error]",hk="[object Map]",fk="[object Number]",dk="[object RegExp]",mk="[object Set]",gk="[object String]",pk="[object Symbol]",yk="[object ArrayBuffer]",vk="[object DataView]",_E=bl?bl.prototype:void 0,wp=_E?_E.valueOf:void 0;function bk(r,e,t,s,a,o,u){switch(t){case vk:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case yk:return!(r.byteLength!=e.byteLength||!o(new wd(r),new wd(e)));case ok:case ck:case fk:return vh(+r,+e);case uk:return r.name==e.name&&r.message==e.message;case dk:case gk:return r==e+"";case hk:var f=sk;case mk:var m=s&ak;if(f||(f=ik),r.size!=e.size&&!m)return!1;var g=u.get(r);if(g)return g==e;s|=lk,u.set(r,e);var v=FA(f(r),f(e),s,a,o,u);return u.delete(r),v;case pk:if(wp)return wp.call(r)==wp.call(e)}return!1}var _k=1,xk=Object.prototype,Ek=xk.hasOwnProperty;function Tk(r,e,t,s,a,o){var u=t&_k,f=uy(r),m=f.length,g=uy(e),v=g.length;if(m!=v&&!u)return!1;for(var x=m;x--;){var T=f[x];if(!(u?T in e:Ek.call(e,T)))return!1}var A=o.get(r),C=o.get(e);if(A&&C)return A==e&&C==r;var j=!0;o.set(r,e),o.set(e,r);for(var I=u;++x<m;){T=f[x];var H=r[T],$=e[T];if(s)var Z=u?s($,H,T,e,r,o):s(H,$,T,r,e,o);if(!(Z===void 0?H===$||a(H,$,t,s,o):Z)){j=!1;break}I||(I=T=="constructor")}if(j&&!I){var te=r.constructor,de=e.constructor;te!=de&&"constructor"in r&&"constructor"in e&&!(typeof te=="function"&&te instanceof te&&typeof de=="function"&&de instanceof de)&&(j=!1)}return o.delete(r),o.delete(e),j}var wk=1,xE="[object Arguments]",EE="[object Array]",Hf="[object Object]",Ak=Object.prototype,TE=Ak.hasOwnProperty;function Sk(r,e,t,s,a,o){var u=ro(r),f=ro(e),m=u?EE:$s(r),g=f?EE:$s(e);m=m==xE?Hf:m,g=g==xE?Hf:g;var v=m==Hf,x=g==Hf,T=m==g;if(T&&Zu(r)){if(!Zu(e))return!1;u=!0,v=!1}if(T&&!v)return o||(o=new Si),u||O0(r)?FA(r,e,t,s,a,o):bk(r,e,m,t,s,a,o);if(!(t&wk)){var A=v&&TE.call(r,"__wrapped__"),C=x&&TE.call(e,"__wrapped__");if(A||C){var j=A?r.value():r,I=C?e.value():e;return o||(o=new Si),a(j,I,t,s,o)}}return T?(o||(o=new Si),Tk(r,e,t,s,a,o)):!1}function GA(r,e,t,s,a){return r===e?!0:r==null||e==null||!ya(r)&&!ya(e)?r!==r&&e!==e:Sk(r,e,t,s,GA,a)}function Nk(r){return function(e,t,s){for(var a=-1,o=Object(e),u=s(e),f=u.length;f--;){var m=u[++a];if(t(o[m],m,o)===!1)break}return e}}var Ck=Nk();function my(r,e,t){(t!==void 0&&!vh(r[e],t)||t===void 0&&!(e in r))&&C0(r,e,t)}function Rk(r){return ya(r)&&Jd(r)}function gy(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}function Ik(r){return JD(r,LA(r))}function Ok(r,e,t,s,a,o,u){var f=gy(r,t),m=gy(e,t),g=u.get(m);if(g){my(r,t,g);return}var v=o?o(f,m,t+"",r,e,u):void 0,x=v===void 0;if(x){var T=ro(m),A=!T&&Zu(m),C=!T&&!A&&O0(m);v=m,T||A||C?ro(f)?v=f:Rk(f)?v=qD(f):A?(x=!1,v=PA(m,!0)):C?(x=!1,v=UA(m,!0)):v=[]:S6(m)||cy(m)?(v=f,cy(f)?v=Ik(f):(!Sl(f)||N0(f))&&(v=qA(m))):x=!1}x&&(u.set(m,v),a(v,m,s,o,u),u.delete(m)),my(r,t,v)}function $A(r,e,t,s,a){r!==e&&Ck(e,function(o,u){if(a||(a=new Si),Sl(o))Ok(r,e,u,t,$A,s,a);else{var f=s?s(gy(r,u),o,u+"",r,e,a):void 0;f===void 0&&(f=o),my(r,u,f)}},LA)}function rl(r,e){return GA(r,e)}var hl=sj(function(r,e,t){$A(r,e,t)}),Oe=(r=>(r[r.TYPE=3]="TYPE",r[r.LEVEL=12]="LEVEL",r[r.ATTRIBUTE=13]="ATTRIBUTE",r[r.BLOT=14]="BLOT",r[r.INLINE=7]="INLINE",r[r.BLOCK=11]="BLOCK",r[r.BLOCK_BLOT=10]="BLOCK_BLOT",r[r.INLINE_BLOT=6]="INLINE_BLOT",r[r.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",r[r.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",r[r.ANY=15]="ANY",r))(Oe||{});class Ci{constructor(e,t,s={}){this.attrName=e,this.keyName=t;const a=Oe.TYPE&Oe.ATTRIBUTE;this.scope=s.scope!=null?s.scope&Oe.LEVEL|a:Oe.ATTRIBUTE,s.whitelist!=null&&(this.whitelist=s.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}}class cc extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const KA=class py{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let s=null;try{s=e.parentNode}catch{return null}return this.find(s,t)}return null}create(e,t,s){const a=this.query(t);if(a==null)throw new cc(`Unable to create ${t} blot`);const o=a,u=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:o.create(s),f=new o(e,u,s);return py.blots.set(f.domNode,f),f}find(e,t=!1){return py.find(e,t)}query(e,t=Oe.ANY){let s;return typeof e=="string"?s=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?s=this.types.text:typeof e=="number"?e&Oe.LEVEL&Oe.BLOCK?s=this.types.block:e&Oe.LEVEL&Oe.INLINE&&(s=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(a=>(s=this.classes[a],!!s)),s=s||this.tags[e.tagName]),s==null?null:"scope"in s&&t&Oe.LEVEL&s.scope&&t&Oe.TYPE&s.scope?s:null}register(...e){return e.map(t=>{const s="blotName"in t,a="attrName"in t;if(!s&&!a)throw new cc("Invalid definition");if(s&&t.blotName==="abstract")throw new cc("Cannot register abstract class");const o=s?t.blotName:a?t.attrName:void 0;return this.types[o]=t,a?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):s&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(u=>u.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(u=>{(this.tags[u]==null||t.className==null)&&(this.tags[u]=t)}))),t})}};KA.blots=new WeakMap;let Ec=KA;function wE(r,e){return(r.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}class Dk extends Ci{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){wE(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const t=(wE(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}}const ni=Dk;function Ap(r){const e=r.split("-"),t=e.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("");return e[0]+t}class jk extends Ci{static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[Ap(this.keyName)]=t,!0):!1}remove(e){e.style[Ap(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const t=e.style[Ap(this.keyName)];return this.canAdd(e,t)?t:""}}const Nl=jk;class Lk{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Ec.find(this.domNode);if(e==null)return;const t=Ci.keys(this.domNode),s=ni.keys(this.domNode),a=Nl.keys(this.domNode);t.concat(s).concat(a).forEach(o=>{const u=e.scroll.query(o,Oe.ATTRIBUTE);u instanceof Ci&&(this.attributes[u.attrName]=u)})}copy(e){Object.keys(this.attributes).forEach(t=>{const s=this.attributes[t].value(this.domNode);e.format(t,s)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}}const nm=Lk,QA=class{constructor(e,t){this.scroll=e,this.domNode=t,Ec.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new cc("Blot definition missing tagName");let t,s;return Array.isArray(this.tagName)?(typeof e=="string"?(s=e.toUpperCase(),parseInt(s,10).toString()===s&&(s=parseInt(s,10))):typeof e=="number"&&(s=e),typeof s=="number"?t=document.createElement(this.tagName[s-1]):s&&this.tagName.indexOf(s)>-1?t=document.createElement(s):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Ec.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,s,a){const o=this.isolate(e,t);if(this.scroll.query(s,Oe.BLOT)!=null&&a)o.wrap(s,a);else if(this.scroll.query(s,Oe.ATTRIBUTE)!=null){const u=this.scroll.create(this.statics.scope);o.wrap(u),u.format(s,a)}}insertAt(e,t,s){const a=s==null?this.scroll.create("text",t):this.scroll.create(t,s),o=this.split(e);this.parent.insertBefore(a,o||void 0)}isolate(e,t){const s=this.split(e);if(s==null)throw new Error("Attempt to isolate at end");return s.split(t),s}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const s=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const s=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(s,this.next||void 0),typeof s.appendChild!="function")throw new cc(`Cannot wrap ${e}`);return s.appendChild(this),s}};QA.blotName="abstract";let YA=QA;const XA=class extends YA{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};XA.scope=Oe.INLINE_BLOT;let kk=XA;const or=kk;class Mk{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const t=e.slice(1);this.append(...t)}}at(e){const t=this.iterator();let s=t();for(;s&&e>0;)e-=1,s=t();return s}contains(e){const t=this.iterator();let s=t();for(;s;){if(s===e)return!0;s=t()}return!1}indexOf(e){const t=this.iterator();let s=t(),a=0;for(;s;){if(s===e)return a;a+=1,s=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,s=this.head;for(;s!=null;){if(s===e)return t;t+=s.length(),s=s.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){const s=this.iterator();let a=s();for(;a;){const o=a.length();if(e<o||t&&e===o&&(a.next==null||a.next.length()!==0))return[a,e];e-=o,a=s()}return[null,0]}forEach(e){const t=this.iterator();let s=t();for(;s;)e(s),s=t()}forEachAt(e,t,s){if(t<=0)return;const[a,o]=this.find(e);let u=e-o;const f=this.iterator(a);let m=f();for(;m&&u<e+t;){const g=m.length();e>u?s(m,e-u,Math.min(t,u+g-e)):s(m,0,Math.min(g,e+t-u)),u+=g,m=f()}}map(e){return this.reduce((t,s)=>(t.push(e(s)),t),[])}reduce(e,t){const s=this.iterator();let a=s();for(;a;)t=e(t,a),a=s();return t}}function AE(r,e){const t=e.find(r);if(t)return t;try{return e.create(r)}catch{const s=e.create(Oe.INLINE);return Array.from(r.childNodes).forEach(a=>{s.domNode.appendChild(a)}),r.parentNode&&r.parentNode.replaceChild(s.domNode,r),s.attach(),s}}const ZA=class Wa extends YA{constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Wa.uiClass&&this.uiNode.classList.add(Wa.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Mk,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const t=AE(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof cc)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(s,a,o)=>{s.deleteAt(a,o)})}descendant(e,t=0){const[s,a]=this.children.find(t);return e.blotName==null&&e(s)||e.blotName!=null&&s instanceof e?[s,a]:s instanceof Wa?s.descendant(e,a):[null,-1]}descendants(e,t=0,s=Number.MAX_VALUE){let a=[],o=s;return this.children.forEachAt(t,s,(u,f,m)=>{(e.blotName==null&&e(u)||e.blotName!=null&&u instanceof e)&&a.push(u),u instanceof Wa&&(a=a.concat(u.descendants(e,f,o))),o-=m}),a}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(s=>t instanceof s)||(t.statics.scope===Oe.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof Wa?t.unwrap():t.remove())})}formatAt(e,t,s,a){this.children.forEachAt(e,t,(o,u,f)=>{o.formatAt(u,f,s,a)})}insertAt(e,t,s){const[a,o]=this.children.find(e);if(a)a.insertAt(o,t,s);else{const u=s==null?this.scroll.create("text",t):this.scroll.create(t,s);this.appendChild(u)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let s=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(s=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(e.domNode,s),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(s=>{e.insertBefore(s,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){const[s,a]=this.children.find(e,t),o=[[this,e]];return s instanceof Wa?o.concat(s.path(a,t)):(s!=null&&o.push([s,a]),o)}removeChild(e){this.children.remove(e)}replaceWith(e,t){const s=typeof e=="string"?this.scroll.create(e,t):e;return s instanceof Wa&&this.moveChildren(s),super.replaceWith(s)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(e,this.length(),(a,o,u)=>{const f=a.split(o,t);f!=null&&s.appendChild(f)}),s}splitAfter(e){const t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){const s=[],a=[];e.forEach(o=>{o.target===this.domNode&&o.type==="childList"&&(s.push(...o.addedNodes),a.push(...o.removedNodes))}),a.forEach(o=>{if(o.parentNode!=null&&o.tagName!=="IFRAME"&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const u=this.scroll.find(o);u!=null&&(u.domNode.parentNode==null||u.domNode.parentNode===this.domNode)&&u.detach()}),s.filter(o=>o.parentNode===this.domNode&&o!==this.uiNode).sort((o,u)=>o===u?0:o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(o=>{let u=null;o.nextSibling!=null&&(u=this.scroll.find(o.nextSibling));const f=AE(o,this.scroll);(f.next!==u||f.next==null)&&(f.parent!=null&&f.parent.removeChild(this),this.insertBefore(f,u||void 0))}),this.enforceAllowedChildren()}};ZA.uiClass="";let Vk=ZA;const Xs=Vk;function Pk(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}const Wo=class Jo extends Xs{static create(e){return super.create(e)}static formats(e,t){const s=t.query(Jo.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new nm(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(s=>{s instanceof Jo||(s=s.wrap(Jo.blotName,!0)),this.attributes.copy(s)}),this.unwrap();else{const s=this.scroll.query(e,Oe.INLINE);if(s==null)return;s instanceof Ci?this.attributes.attribute(s,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,s,a){this.formats()[s]!=null||this.scroll.query(s,Oe.ATTRIBUTE)?this.isolate(e,t).format(s,a):super.formatAt(e,t,s,a)}optimize(e){super.optimize(e);const t=this.formats();if(Object.keys(t).length===0)return this.unwrap();const s=this.next;s instanceof Jo&&s.prev===this&&Pk(t,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(e,t){const s=super.replaceWith(e,t);return this.attributes.copy(s),s}update(e,t){super.update(e,t),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}wrap(e,t){const s=super.wrap(e,t);return s instanceof Jo&&this.attributes.move(s),s}};Wo.allowedChildren=[Wo,or],Wo.blotName="inline",Wo.scope=Oe.INLINE_BLOT,Wo.tagName="SPAN";let Uk=Wo;const j0=Uk,ec=class yy extends Xs{static create(e){return super.create(e)}static formats(e,t){const s=t.query(yy.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new nm(this.domNode)}format(e,t){const s=this.scroll.query(e,Oe.BLOCK);s!=null&&(s instanceof Ci?this.attributes.attribute(s,t):e===this.statics.blotName&&!t?this.replaceWith(yy.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,s,a){this.scroll.query(s,Oe.BLOCK)!=null?this.format(s,a):super.formatAt(e,t,s,a)}insertAt(e,t,s){if(s==null||this.scroll.query(t,Oe.INLINE)!=null)super.insertAt(e,t,s);else{const a=this.split(e);if(a!=null){const o=this.scroll.create(t,s);a.parent.insertBefore(o,a)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){const s=super.replaceWith(e,t);return this.attributes.copy(s),s}update(e,t){super.update(e,t),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}};ec.blotName="block",ec.scope=Oe.BLOCK_BLOT,ec.tagName="P",ec.allowedChildren=[j0,ec,or];let qk=ec;const eh=qk,vy=class extends Xs{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,s,a){super.formatAt(e,t,s,a),this.enforceAllowedChildren()}insertAt(e,t,s){super.insertAt(e,t,s),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};vy.blotName="container",vy.scope=Oe.BLOCK_BLOT;let Bk=vy;const rm=Bk;class zk extends or{static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,s,a){e===0&&t===this.length()?this.format(s,a):super.formatAt(e,t,s,a)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const is=zk,Hk={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Fk=100,tc=class extends Xs{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(s=>{this.update(s)}),this.observer.observe(this.domNode,Hk),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const s=this.registry.find(e,t);return s?s.scroll===this?s:t?this.find(s.scroll.domNode.parentNode,!0):null:null}query(e,t=Oe.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(s=>{s.remove()}):super.deleteAt(e,t)}formatAt(e,t,s,a){this.update(),super.formatAt(e,t,s,a)}insertAt(e,t,s){this.update(),super.insertAt(e,t,s)}optimize(e=[],t={}){super.optimize(t);const s=t.mutationsMap||new WeakMap;let a=Array.from(this.observer.takeRecords());for(;a.length>0;)e.push(a.pop());const o=(m,g=!0)=>{m==null||m===this||m.domNode.parentNode!=null&&(s.has(m.domNode)||s.set(m.domNode,[]),g&&o(m.parent))},u=m=>{s.has(m.domNode)&&(m instanceof Xs&&m.children.forEach(u),s.delete(m.domNode),m.optimize(t))};let f=e;for(let m=0;f.length>0;m+=1){if(m>=Fk)throw new Error("[Parchment] Maximum optimize iterations reached");for(f.forEach(g=>{const v=this.find(g.target,!0);v!=null&&(v.domNode===g.target&&(g.type==="childList"?(o(this.find(g.previousSibling,!1)),Array.from(g.addedNodes).forEach(x=>{const T=this.find(x,!1);o(T,!1),T instanceof Xs&&T.children.forEach(A=>{o(A,!1)})})):g.type==="attributes"&&o(v.prev)),o(v))}),this.children.forEach(u),f=Array.from(this.observer.takeRecords()),a=f.slice();a.length>0;)e.push(a.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const s=new WeakMap;e.map(a=>{const o=this.find(a.target,!0);return o==null?null:s.has(o.domNode)?(s.get(o.domNode).push(a),null):(s.set(o.domNode,[a]),o)}).forEach(a=>{a!=null&&a!==this&&s.has(a.domNode)&&a.update(s.get(a.domNode)||[],t)}),t.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),t),this.optimize(e,t)}};tc.blotName="scroll",tc.defaultChild=eh,tc.allowedChildren=[eh,rm],tc.scope=Oe.BLOCK_BLOT,tc.tagName="DIV";let Gk=tc;const L0=Gk,by=class WA extends or{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,s){s==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,s)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof WA&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(e,t){e.some(s=>s.type==="characterData"&&s.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};by.blotName="text",by.scope=Oe.INLINE_BLOT;let $k=by;const Sd=$k,Kk=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Ci,AttributorStore:nm,BlockBlot:eh,ClassAttributor:ni,ContainerBlot:rm,EmbedBlot:is,InlineBlot:j0,LeafBlot:or,ParentBlot:Xs,Registry:Ec,Scope:Oe,ScrollBlot:L0,StyleAttributor:Nl,TextBlot:Sd},Symbol.toStringTag,{value:"Module"}));var Ff={exports:{}},Sp,SE;function Qk(){if(SE)return Sp;SE=1;var r=-1,e=1,t=0;function s(S,k,N,pe,ge){if(S===k)return S?[[t,S]]:[];if(N!=null){var z=V(S,k,N);if(z)return z}var J=f(S,k),ce=S.substring(0,J);S=S.substring(J),k=k.substring(J),J=g(S,k);var be=S.substring(S.length-J);S=S.substring(0,S.length-J),k=k.substring(0,k.length-J);var ve=a(S,k);return ce&&ve.unshift([t,ce]),be&&ve.push([t,be]),$(ve,ge),pe&&x(ve),ve}function a(S,k){var N;if(!S)return[[e,k]];if(!k)return[[r,S]];var pe=S.length>k.length?S:k,ge=S.length>k.length?k:S,z=pe.indexOf(ge);if(z!==-1)return N=[[e,pe.substring(0,z)],[t,ge],[e,pe.substring(z+ge.length)]],S.length>k.length&&(N[0][0]=N[2][0]=r),N;if(ge.length===1)return[[r,S],[e,k]];var J=v(S,k);if(J){var ce=J[0],be=J[1],ve=J[2],P=J[3],Y=J[4],he=s(ce,ve),me=s(be,P);return he.concat([[t,Y]],me)}return o(S,k)}function o(S,k){for(var N=S.length,pe=k.length,ge=Math.ceil((N+pe)/2),z=ge,J=2*ge,ce=new Array(J),be=new Array(J),ve=0;ve<J;ve++)ce[ve]=-1,be[ve]=-1;ce[z+1]=0,be[z+1]=0;for(var P=N-pe,Y=P%2!==0,he=0,me=0,ye=0,we=0,De=0;De<ge;De++){for(var Ie=-De+he;Ie<=De-me;Ie+=2){var je=z+Ie,Qe;Ie===-De||Ie!==De&&ce[je-1]<ce[je+1]?Qe=ce[je+1]:Qe=ce[je-1]+1;for(var Ze=Qe-Ie;Qe<N&&Ze<pe&&S.charAt(Qe)===k.charAt(Ze);)Qe++,Ze++;if(ce[je]=Qe,Qe>N)me+=2;else if(Ze>pe)he+=2;else if(Y){var tt=z+P-Ie;if(tt>=0&&tt<J&&be[tt]!==-1){var lt=N-be[tt];if(Qe>=lt)return u(S,k,Qe,Ze)}}}for(var dt=-De+ye;dt<=De-we;dt+=2){var tt=z+dt,lt;dt===-De||dt!==De&&be[tt-1]<be[tt+1]?lt=be[tt+1]:lt=be[tt-1]+1;for(var tn=lt-dt;lt<N&&tn<pe&&S.charAt(N-lt-1)===k.charAt(pe-tn-1);)lt++,tn++;if(be[tt]=lt,lt>N)we+=2;else if(tn>pe)ye+=2;else if(!Y){var je=z+P-dt;if(je>=0&&je<J&&ce[je]!==-1){var Qe=ce[je],Ze=z+Qe-je;if(lt=N-lt,Qe>=lt)return u(S,k,Qe,Ze)}}}}return[[r,S],[e,k]]}function u(S,k,N,pe){var ge=S.substring(0,N),z=k.substring(0,pe),J=S.substring(N),ce=k.substring(pe),be=s(ge,z),ve=s(J,ce);return be.concat(ve)}function f(S,k){if(!S||!k||S.charAt(0)!==k.charAt(0))return 0;for(var N=0,pe=Math.min(S.length,k.length),ge=pe,z=0;N<ge;)S.substring(z,ge)==k.substring(z,ge)?(N=ge,z=N):pe=ge,ge=Math.floor((pe-N)/2+N);return Z(S.charCodeAt(ge-1))&&ge--,ge}function m(S,k){var N=S.length,pe=k.length;if(N==0||pe==0)return 0;N>pe?S=S.substring(N-pe):N<pe&&(k=k.substring(0,N));var ge=Math.min(N,pe);if(S==k)return ge;for(var z=0,J=1;;){var ce=S.substring(ge-J),be=k.indexOf(ce);if(be==-1)return z;J+=be,(be==0||S.substring(ge-J)==k.substring(0,J))&&(z=J,J++)}}function g(S,k){if(!S||!k||S.slice(-1)!==k.slice(-1))return 0;for(var N=0,pe=Math.min(S.length,k.length),ge=pe,z=0;N<ge;)S.substring(S.length-ge,S.length-z)==k.substring(k.length-ge,k.length-z)?(N=ge,z=N):pe=ge,ge=Math.floor((pe-N)/2+N);return te(S.charCodeAt(S.length-ge))&&ge--,ge}function v(S,k){var N=S.length>k.length?S:k,pe=S.length>k.length?k:S;if(N.length<4||pe.length*2<N.length)return null;function ge(me,ye,we){for(var De=me.substring(we,we+Math.floor(me.length/4)),Ie=-1,je="",Qe,Ze,tt,lt;(Ie=ye.indexOf(De,Ie+1))!==-1;){var dt=f(me.substring(we),ye.substring(Ie)),tn=g(me.substring(0,we),ye.substring(0,Ie));je.length<tn+dt&&(je=ye.substring(Ie-tn,Ie)+ye.substring(Ie,Ie+dt),Qe=me.substring(0,we-tn),Ze=me.substring(we+dt),tt=ye.substring(0,Ie-tn),lt=ye.substring(Ie+dt))}return je.length*2>=me.length?[Qe,Ze,tt,lt,je]:null}var z=ge(N,pe,Math.ceil(N.length/4)),J=ge(N,pe,Math.ceil(N.length/2)),ce;if(!z&&!J)return null;J?z?ce=z[4].length>J[4].length?z:J:ce=J:ce=z;var be,ve,P,Y;S.length>k.length?(be=ce[0],ve=ce[1],P=ce[2],Y=ce[3]):(P=ce[0],Y=ce[1],be=ce[2],ve=ce[3]);var he=ce[4];return[be,ve,P,Y,he]}function x(S){for(var k=!1,N=[],pe=0,ge=null,z=0,J=0,ce=0,be=0,ve=0;z<S.length;)S[z][0]==t?(N[pe++]=z,J=be,ce=ve,be=0,ve=0,ge=S[z][1]):(S[z][0]==e?be+=S[z][1].length:ve+=S[z][1].length,ge&&ge.length<=Math.max(J,ce)&&ge.length<=Math.max(be,ve)&&(S.splice(N[pe-1],0,[r,ge]),S[N[pe-1]+1][0]=e,pe--,pe--,z=pe>0?N[pe-1]:-1,J=0,ce=0,be=0,ve=0,ge=null,k=!0)),z++;for(k&&$(S),H(S),z=1;z<S.length;){if(S[z-1][0]==r&&S[z][0]==e){var P=S[z-1][1],Y=S[z][1],he=m(P,Y),me=m(Y,P);he>=me?(he>=P.length/2||he>=Y.length/2)&&(S.splice(z,0,[t,Y.substring(0,he)]),S[z-1][1]=P.substring(0,P.length-he),S[z+1][1]=Y.substring(he),z++):(me>=P.length/2||me>=Y.length/2)&&(S.splice(z,0,[t,P.substring(0,me)]),S[z-1][0]=e,S[z-1][1]=Y.substring(0,Y.length-me),S[z+1][0]=r,S[z+1][1]=P.substring(me),z++),z++}z++}}var T=/[^a-zA-Z0-9]/,A=/\s/,C=/[\r\n]/,j=/\n\r?\n$/,I=/^\r?\n\r?\n/;function H(S){function k(me,ye){if(!me||!ye)return 6;var we=me.charAt(me.length-1),De=ye.charAt(0),Ie=we.match(T),je=De.match(T),Qe=Ie&&we.match(A),Ze=je&&De.match(A),tt=Qe&&we.match(C),lt=Ze&&De.match(C),dt=tt&&me.match(j),tn=lt&&ye.match(I);return dt||tn?5:tt||lt?4:Ie&&!Qe&&Ze?3:Qe||Ze?2:Ie||je?1:0}for(var N=1;N<S.length-1;){if(S[N-1][0]==t&&S[N+1][0]==t){var pe=S[N-1][1],ge=S[N][1],z=S[N+1][1],J=g(pe,ge);if(J){var ce=ge.substring(ge.length-J);pe=pe.substring(0,pe.length-J),ge=ce+ge.substring(0,ge.length-J),z=ce+z}for(var be=pe,ve=ge,P=z,Y=k(pe,ge)+k(ge,z);ge.charAt(0)===z.charAt(0);){pe+=ge.charAt(0),ge=ge.substring(1)+z.charAt(0),z=z.substring(1);var he=k(pe,ge)+k(ge,z);he>=Y&&(Y=he,be=pe,ve=ge,P=z)}S[N-1][1]!=be&&(be?S[N-1][1]=be:(S.splice(N-1,1),N--),S[N][1]=ve,P?S[N+1][1]=P:(S.splice(N+1,1),N--))}N++}}function $(S,k){S.push([t,""]);for(var N=0,pe=0,ge=0,z="",J="",ce;N<S.length;){if(N<S.length-1&&!S[N][1]){S.splice(N,1);continue}switch(S[N][0]){case e:ge++,J+=S[N][1],N++;break;case r:pe++,z+=S[N][1],N++;break;case t:var be=N-ge-pe-1;if(k){if(be>=0&&xe(S[be][1])){var ve=S[be][1].slice(-1);if(S[be][1]=S[be][1].slice(0,-1),z=ve+z,J=ve+J,!S[be][1]){S.splice(be,1),N--;var P=be-1;S[P]&&S[P][0]===e&&(ge++,J=S[P][1]+J,P--),S[P]&&S[P][0]===r&&(pe++,z=S[P][1]+z,P--),be=P}}if(de(S[N][1])){var ve=S[N][1].charAt(0);S[N][1]=S[N][1].slice(1),z+=ve,J+=ve}}if(N<S.length-1&&!S[N][1]){S.splice(N,1);break}if(z.length>0||J.length>0){z.length>0&&J.length>0&&(ce=f(J,z),ce!==0&&(be>=0?S[be][1]+=J.substring(0,ce):(S.splice(0,0,[t,J.substring(0,ce)]),N++),J=J.substring(ce),z=z.substring(ce)),ce=g(J,z),ce!==0&&(S[N][1]=J.substring(J.length-ce)+S[N][1],J=J.substring(0,J.length-ce),z=z.substring(0,z.length-ce)));var Y=ge+pe;z.length===0&&J.length===0?(S.splice(N-Y,Y),N=N-Y):z.length===0?(S.splice(N-Y,Y,[e,J]),N=N-Y+1):J.length===0?(S.splice(N-Y,Y,[r,z]),N=N-Y+1):(S.splice(N-Y,Y,[r,z],[e,J]),N=N-Y+2)}N!==0&&S[N-1][0]===t?(S[N-1][1]+=S[N][1],S.splice(N,1)):N++,ge=0,pe=0,z="",J="";break}}S[S.length-1][1]===""&&S.pop();var he=!1;for(N=1;N<S.length-1;)S[N-1][0]===t&&S[N+1][0]===t&&(S[N][1].substring(S[N][1].length-S[N-1][1].length)===S[N-1][1]?(S[N][1]=S[N-1][1]+S[N][1].substring(0,S[N][1].length-S[N-1][1].length),S[N+1][1]=S[N-1][1]+S[N+1][1],S.splice(N-1,1),he=!0):S[N][1].substring(0,S[N+1][1].length)==S[N+1][1]&&(S[N-1][1]+=S[N+1][1],S[N][1]=S[N][1].substring(S[N+1][1].length)+S[N+1][1],S.splice(N+1,1),he=!0)),N++;he&&$(S,k)}function Z(S){return S>=55296&&S<=56319}function te(S){return S>=56320&&S<=57343}function de(S){return te(S.charCodeAt(0))}function xe(S){return Z(S.charCodeAt(S.length-1))}function M(S){for(var k=[],N=0;N<S.length;N++)S[N][1].length>0&&k.push(S[N]);return k}function L(S,k,N,pe){return xe(S)||de(pe)?null:M([[t,S],[r,k],[e,N],[t,pe]])}function V(S,k,N){var pe=typeof N=="number"?{index:N,length:0}:N.oldRange,ge=typeof N=="number"?null:N.newRange,z=S.length,J=k.length;if(pe.length===0&&(ge===null||ge.length===0)){var ce=pe.index,be=S.slice(0,ce),ve=S.slice(ce),P=ge?ge.index:null;e:{var Y=ce+J-z;if(P!==null&&P!==Y||Y<0||Y>J)break e;var he=k.slice(0,Y),me=k.slice(Y);if(me!==ve)break e;var ye=Math.min(ce,Y),we=be.slice(0,ye),De=he.slice(0,ye);if(we!==De)break e;var Ie=be.slice(ye),je=he.slice(ye);return L(we,Ie,je,ve)}e:{if(P!==null&&P!==ce)break e;var Qe=ce,he=k.slice(0,Qe),me=k.slice(Qe);if(he!==be)break e;var Ze=Math.min(z-Qe,J-Qe),tt=ve.slice(ve.length-Ze),lt=me.slice(me.length-Ze);if(tt!==lt)break e;var Ie=ve.slice(0,ve.length-Ze),je=me.slice(0,me.length-Ze);return L(be,Ie,je,tt)}}if(pe.length>0&&ge&&ge.length===0)e:{var we=S.slice(0,pe.index),tt=S.slice(pe.index+pe.length),ye=we.length,Ze=tt.length;if(J<ye+Ze)break e;var De=k.slice(0,ye),lt=k.slice(J-Ze);if(we!==De||tt!==lt)break e;var Ie=S.slice(ye,z-Ze),je=k.slice(ye,J-Ze);return L(we,Ie,je,tt)}return null}function F(S,k,N,pe){return s(S,k,N,pe,!0)}return F.INSERT=e,F.DELETE=r,F.EQUAL=t,Sp=F,Sp}var Ru={exports:{}};Ru.exports;var NE;function JA(){return NE||(NE=1,(function(r,e){var t=200,s="__lodash_hash_undefined__",a=9007199254740991,o="[object Arguments]",u="[object Array]",f="[object Boolean]",m="[object Date]",g="[object Error]",v="[object Function]",x="[object GeneratorFunction]",T="[object Map]",A="[object Number]",C="[object Object]",j="[object Promise]",I="[object RegExp]",H="[object Set]",$="[object String]",Z="[object Symbol]",te="[object WeakMap]",de="[object ArrayBuffer]",xe="[object DataView]",M="[object Float32Array]",L="[object Float64Array]",V="[object Int8Array]",F="[object Int16Array]",S="[object Int32Array]",k="[object Uint8Array]",N="[object Uint8ClampedArray]",pe="[object Uint16Array]",ge="[object Uint32Array]",z=/[\\^$.*+?()[\]{}|]/g,J=/\w*$/,ce=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,ve={};ve[o]=ve[u]=ve[de]=ve[xe]=ve[f]=ve[m]=ve[M]=ve[L]=ve[V]=ve[F]=ve[S]=ve[T]=ve[A]=ve[C]=ve[I]=ve[H]=ve[$]=ve[Z]=ve[k]=ve[N]=ve[pe]=ve[ge]=!0,ve[g]=ve[v]=ve[te]=!1;var P=typeof sl=="object"&&sl&&sl.Object===Object&&sl,Y=typeof self=="object"&&self&&self.Object===Object&&self,he=P||Y||Function("return this")(),me=e&&!e.nodeType&&e,ye=me&&!0&&r&&!r.nodeType&&r,we=ye&&ye.exports===me;function De(_,O){return _.set(O[0],O[1]),_}function Ie(_,O){return _.add(O),_}function je(_,O){for(var q=-1,ne=_?_.length:0;++q<ne&&O(_[q],q,_)!==!1;);return _}function Qe(_,O){for(var q=-1,ne=O.length,Me=_.length;++q<ne;)_[Me+q]=O[q];return _}function Ze(_,O,q,ne){for(var Me=-1,Ae=_?_.length:0;++Me<Ae;)q=O(q,_[Me],Me,_);return q}function tt(_,O){for(var q=-1,ne=Array(_);++q<_;)ne[q]=O(q);return ne}function lt(_,O){return _?.[O]}function dt(_){var O=!1;if(_!=null&&typeof _.toString!="function")try{O=!!(_+"")}catch{}return O}function tn(_){var O=-1,q=Array(_.size);return _.forEach(function(ne,Me){q[++O]=[Me,ne]}),q}function Vr(_,O){return function(q){return _(O(q))}}function si(_){var O=-1,q=Array(_.size);return _.forEach(function(ne){q[++O]=ne}),q}var Di=Array.prototype,Ht=Function.prototype,Rt=Object.prototype,_r=he["__core-js_shared__"],Ta=(function(){var _=/[^.]+$/.exec(_r&&_r.keys&&_r.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""})(),ji=Ht.toString,It=Rt.hasOwnProperty,xr=Rt.toString,Li=RegExp("^"+ji.call(It).replace(z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pr=we?he.Buffer:void 0,cr=he.Symbol,ki=he.Uint8Array,Ln=Vr(Object.getPrototypeOf,Object),Mi=Object.create,Vi=Rt.propertyIsEnumerable,ur=Di.splice,Wt=Object.getOwnPropertySymbols,wn=Pr?Pr.isBuffer:void 0,Ot=Vr(Object.keys,Object),js=gn(he,"DataView"),Er=gn(he,"Map"),Wn=gn(he,"Promise"),kn=gn(he,"Set"),Ur=gn(he,"WeakMap"),xt=gn(Object,"create"),Jn=on(js),Rn=on(Er),Mn=on(Wn),Pi=on(kn),ii=on(Ur),An=cr?cr.prototype:void 0,as=An?An.valueOf:void 0;function qr(_){var O=-1,q=_?_.length:0;for(this.clear();++O<q;){var ne=_[O];this.set(ne[0],ne[1])}}function Ls(){this.__data__=xt?xt(null):{}}function Ui(_){return this.has(_)&&delete this.__data__[_]}function qi(_){var O=this.__data__;if(xt){var q=O[_];return q===s?void 0:q}return It.call(O,_)?O[_]:void 0}function ls(_){var O=this.__data__;return xt?O[_]!==void 0:It.call(O,_)}function hr(_,O){var q=this.__data__;return q[_]=xt&&O===void 0?s:O,this}qr.prototype.clear=Ls,qr.prototype.delete=Ui,qr.prototype.get=qi,qr.prototype.has=ls,qr.prototype.set=hr;function nn(_){var O=-1,q=_?_.length:0;for(this.clear();++O<q;){var ne=_[O];this.set(ne[0],ne[1])}}function fr(){this.__data__=[]}function dr(_){var O=this.__data__,q=Pn(O,_);if(q<0)return!1;var ne=O.length-1;return q==ne?O.pop():ur.call(O,q,1),!0}function Ft(_){var O=this.__data__,q=Pn(O,_);return q<0?void 0:O[q][1]}function rn(_){return Pn(this.__data__,_)>-1}function Tr(_,O){var q=this.__data__,ne=Pn(q,_);return ne<0?q.push([_,O]):q[ne][1]=O,this}nn.prototype.clear=fr,nn.prototype.delete=dr,nn.prototype.get=Ft,nn.prototype.has=rn,nn.prototype.set=Tr;function Jt(_){var O=-1,q=_?_.length:0;for(this.clear();++O<q;){var ne=_[O];this.set(ne[0],ne[1])}}function Cl(){this.__data__={hash:new qr,map:new(Er||nn),string:new qr}}function wa(_){return hs(this,_).delete(_)}function Aa(_){return hs(this,_).get(_)}function wr(_){return hs(this,_).has(_)}function ai(_,O){return hs(this,_).set(_,O),this}Jt.prototype.clear=Cl,Jt.prototype.delete=wa,Jt.prototype.get=Aa,Jt.prototype.has=wr,Jt.prototype.set=ai;function kt(_){this.__data__=new nn(_)}function er(){this.__data__=new nn}function Vn(_){return this.__data__.delete(_)}function Ar(_){return this.__data__.get(_)}function Gt(_){return this.__data__.has(_)}function Bi(_,O){var q=this.__data__;if(q instanceof nn){var ne=q.__data__;if(!Er||ne.length<t-1)return ne.push([_,O]),this;q=this.__data__=new Jt(ne)}return q.set(_,O),this}kt.prototype.clear=er,kt.prototype.delete=Vn,kt.prototype.get=Ar,kt.prototype.has=Gt,kt.prototype.set=Bi;function os(_,O){var q=Hr(_)||Bn(_)?tt(_.length,String):[],ne=q.length,Me=!!ne;for(var Ae in _)It.call(_,Ae)&&!(Me&&(Ae=="length"||Na(Ae,ne)))&&q.push(Ae);return q}function mr(_,O,q){var ne=_[O];(!(It.call(_,O)&&zr(ne,q))||q===void 0&&!(O in _))&&(_[O]=q)}function Pn(_,O){for(var q=_.length;q--;)if(zr(_[q][0],O))return q;return-1}function tr(_,O){return _&&ci(O,Vs(O),_)}function ks(_,O,q,ne,Me,Ae,Ge){var Xe;if(ne&&(Xe=Ae?ne(_,Me,Ae,Ge):ne(_)),Xe!==void 0)return Xe;if(!Ye(_))return _;var vt=Hr(_);if(vt){if(Xe=Fi(_),!O)return oi(_,Xe)}else{var We=Cr(_),Nt=We==v||We==x;if(sr(_))return Mt(_,O);if(We==C||We==o||Nt&&!Ae){if(dt(_))return Ae?_:{};if(Xe=nr(Nt?{}:_),!O)return Hi(_,tr(Xe,_))}else{if(!ve[We])return Ae?_:{};Xe=ui(_,We,ks,O)}}Ge||(Ge=new kt);var cn=Ge.get(_);if(cn)return cn;if(Ge.set(_,Xe),!vt)var Vt=q?us(_):Vs(_);return je(Vt||_,function(Qt,sn){Vt&&(sn=Qt,Qt=_[sn]),mr(Xe,sn,ks(Qt,O,q,ne,sn,_,Ge))}),Xe}function zi(_){return Ye(_)?Mi(_):{}}function Sa(_,O,q){var ne=O(_);return Hr(_)?ne:Qe(ne,q(_))}function li(_){return xr.call(_)}function Un(_){if(!Ye(_)||hi(_))return!1;var O=On(_)||dt(_)?Li:ce;return O.test(on(_))}function $t(_){if(!rr(_))return Ot(_);var O=[];for(var q in Object(_))It.call(_,q)&&q!="constructor"&&O.push(q);return O}function Mt(_,O){if(O)return _.slice();var q=new _.constructor(_.length);return _.copy(q),q}function Sr(_){var O=new _.constructor(_.byteLength);return new ki(O).set(new ki(_)),O}function Br(_,O){var q=O?Sr(_.buffer):_.buffer;return new _.constructor(q,_.byteOffset,_.byteLength)}function ct(_,O,q){var ne=O?q(tn(_),!0):tn(_);return Ze(ne,De,new _.constructor)}function cs(_){var O=new _.constructor(_.source,J.exec(_));return O.lastIndex=_.lastIndex,O}function Nr(_,O,q){var ne=O?q(si(_),!0):si(_);return Ze(ne,Ie,new _.constructor)}function Ms(_){return as?Object(as.call(_)):{}}function In(_,O){var q=O?Sr(_.buffer):_.buffer;return new _.constructor(q,_.byteOffset,_.length)}function oi(_,O){var q=-1,ne=_.length;for(O||(O=Array(ne));++q<ne;)O[q]=_[q];return O}function ci(_,O,q,ne){q||(q={});for(var Me=-1,Ae=O.length;++Me<Ae;){var Ge=O[Me],Xe=void 0;mr(q,Ge,Xe===void 0?_[Ge]:Xe)}return q}function Hi(_,O){return ci(_,Kt(_),O)}function us(_){return Sa(_,Vs,Kt)}function hs(_,O){var q=_.__data__;return fs(O)?q[typeof O=="string"?"string":"hash"]:q.map}function gn(_,O){var q=lt(_,O);return Un(q)?q:void 0}var Kt=Wt?Vr(Wt,Object):Ps,Cr=li;(js&&Cr(new js(new ArrayBuffer(1)))!=xe||Er&&Cr(new Er)!=T||Wn&&Cr(Wn.resolve())!=j||kn&&Cr(new kn)!=H||Ur&&Cr(new Ur)!=te)&&(Cr=function(_){var O=xr.call(_),q=O==C?_.constructor:void 0,ne=q?on(q):void 0;if(ne)switch(ne){case Jn:return xe;case Rn:return T;case Mn:return j;case Pi:return H;case ii:return te}return O});function Fi(_){var O=_.length,q=_.constructor(O);return O&&typeof _[0]=="string"&&It.call(_,"index")&&(q.index=_.index,q.input=_.input),q}function nr(_){return typeof _.constructor=="function"&&!rr(_)?zi(Ln(_)):{}}function ui(_,O,q,ne){var Me=_.constructor;switch(O){case de:return Sr(_);case f:case m:return new Me(+_);case xe:return Br(_,ne);case M:case L:case V:case F:case S:case k:case N:case pe:case ge:return In(_,ne);case T:return ct(_,ne,q);case A:case $:return new Me(_);case I:return cs(_);case H:return Nr(_,ne,q);case Z:return Ms(_)}}function Na(_,O){return O=O??a,!!O&&(typeof _=="number"||be.test(_))&&_>-1&&_%1==0&&_<O}function fs(_){var O=typeof _;return O=="string"||O=="number"||O=="symbol"||O=="boolean"?_!=="__proto__":_===null}function hi(_){return!!Ta&&Ta in _}function rr(_){var O=_&&_.constructor,q=typeof O=="function"&&O.prototype||Rt;return _===q}function on(_){if(_!=null){try{return ji.call(_)}catch{}try{return _+""}catch{}}return""}function qn(_){return ks(_,!0,!0)}function zr(_,O){return _===O||_!==_&&O!==O}function Bn(_){return ds(_)&&It.call(_,"callee")&&(!Vi.call(_,"callee")||xr.call(_)==o)}var Hr=Array.isArray;function Fr(_){return _!=null&&ms(_.length)&&!On(_)}function ds(_){return gr(_)&&Fr(_)}var sr=wn||Gi;function On(_){var O=Ye(_)?xr.call(_):"";return O==v||O==x}function ms(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=a}function Ye(_){var O=typeof _;return!!_&&(O=="object"||O=="function")}function gr(_){return!!_&&typeof _=="object"}function Vs(_){return Fr(_)?os(_):$t(_)}function Ps(){return[]}function Gi(){return!1}r.exports=qn})(Ru,Ru.exports)),Ru.exports}var Iu={exports:{}};Iu.exports;var CE;function eS(){return CE||(CE=1,(function(r,e){var t=200,s="__lodash_hash_undefined__",a=1,o=2,u=9007199254740991,f="[object Arguments]",m="[object Array]",g="[object AsyncFunction]",v="[object Boolean]",x="[object Date]",T="[object Error]",A="[object Function]",C="[object GeneratorFunction]",j="[object Map]",I="[object Number]",H="[object Null]",$="[object Object]",Z="[object Promise]",te="[object Proxy]",de="[object RegExp]",xe="[object Set]",M="[object String]",L="[object Symbol]",V="[object Undefined]",F="[object WeakMap]",S="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",pe="[object Float64Array]",ge="[object Int8Array]",z="[object Int16Array]",J="[object Int32Array]",ce="[object Uint8Array]",be="[object Uint8ClampedArray]",ve="[object Uint16Array]",P="[object Uint32Array]",Y=/[\\^$.*+?()[\]{}|]/g,he=/^\[object .+?Constructor\]$/,me=/^(?:0|[1-9]\d*)$/,ye={};ye[N]=ye[pe]=ye[ge]=ye[z]=ye[J]=ye[ce]=ye[be]=ye[ve]=ye[P]=!0,ye[f]=ye[m]=ye[S]=ye[v]=ye[k]=ye[x]=ye[T]=ye[A]=ye[j]=ye[I]=ye[$]=ye[de]=ye[xe]=ye[M]=ye[F]=!1;var we=typeof sl=="object"&&sl&&sl.Object===Object&&sl,De=typeof self=="object"&&self&&self.Object===Object&&self,Ie=we||De||Function("return this")(),je=e&&!e.nodeType&&e,Qe=je&&!0&&r&&!r.nodeType&&r,Ze=Qe&&Qe.exports===je,tt=Ze&&we.process,lt=(function(){try{return tt&&tt.binding&&tt.binding("util")}catch{}})(),dt=lt&&lt.isTypedArray;function tn(_,O){for(var q=-1,ne=_==null?0:_.length,Me=0,Ae=[];++q<ne;){var Ge=_[q];O(Ge,q,_)&&(Ae[Me++]=Ge)}return Ae}function Vr(_,O){for(var q=-1,ne=O.length,Me=_.length;++q<ne;)_[Me+q]=O[q];return _}function si(_,O){for(var q=-1,ne=_==null?0:_.length;++q<ne;)if(O(_[q],q,_))return!0;return!1}function Di(_,O){for(var q=-1,ne=Array(_);++q<_;)ne[q]=O(q);return ne}function Ht(_){return function(O){return _(O)}}function Rt(_,O){return _.has(O)}function _r(_,O){return _?.[O]}function Ta(_){var O=-1,q=Array(_.size);return _.forEach(function(ne,Me){q[++O]=[Me,ne]}),q}function ji(_,O){return function(q){return _(O(q))}}function It(_){var O=-1,q=Array(_.size);return _.forEach(function(ne){q[++O]=ne}),q}var xr=Array.prototype,Li=Function.prototype,Pr=Object.prototype,cr=Ie["__core-js_shared__"],ki=Li.toString,Ln=Pr.hasOwnProperty,Mi=(function(){var _=/[^.]+$/.exec(cr&&cr.keys&&cr.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""})(),Vi=Pr.toString,ur=RegExp("^"+ki.call(Ln).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt=Ze?Ie.Buffer:void 0,wn=Ie.Symbol,Ot=Ie.Uint8Array,js=Pr.propertyIsEnumerable,Er=xr.splice,Wn=wn?wn.toStringTag:void 0,kn=Object.getOwnPropertySymbols,Ur=Wt?Wt.isBuffer:void 0,xt=ji(Object.keys,Object),Jn=Kt(Ie,"DataView"),Rn=Kt(Ie,"Map"),Mn=Kt(Ie,"Promise"),Pi=Kt(Ie,"Set"),ii=Kt(Ie,"WeakMap"),An=Kt(Object,"create"),as=on(Jn),qr=on(Rn),Ls=on(Mn),Ui=on(Pi),qi=on(ii),ls=wn?wn.prototype:void 0,hr=ls?ls.valueOf:void 0;function nn(_){var O=-1,q=_==null?0:_.length;for(this.clear();++O<q;){var ne=_[O];this.set(ne[0],ne[1])}}function fr(){this.__data__=An?An(null):{},this.size=0}function dr(_){var O=this.has(_)&&delete this.__data__[_];return this.size-=O?1:0,O}function Ft(_){var O=this.__data__;if(An){var q=O[_];return q===s?void 0:q}return Ln.call(O,_)?O[_]:void 0}function rn(_){var O=this.__data__;return An?O[_]!==void 0:Ln.call(O,_)}function Tr(_,O){var q=this.__data__;return this.size+=this.has(_)?0:1,q[_]=An&&O===void 0?s:O,this}nn.prototype.clear=fr,nn.prototype.delete=dr,nn.prototype.get=Ft,nn.prototype.has=rn,nn.prototype.set=Tr;function Jt(_){var O=-1,q=_==null?0:_.length;for(this.clear();++O<q;){var ne=_[O];this.set(ne[0],ne[1])}}function Cl(){this.__data__=[],this.size=0}function wa(_){var O=this.__data__,q=Mt(O,_);if(q<0)return!1;var ne=O.length-1;return q==ne?O.pop():Er.call(O,q,1),--this.size,!0}function Aa(_){var O=this.__data__,q=Mt(O,_);return q<0?void 0:O[q][1]}function wr(_){return Mt(this.__data__,_)>-1}function ai(_,O){var q=this.__data__,ne=Mt(q,_);return ne<0?(++this.size,q.push([_,O])):q[ne][1]=O,this}Jt.prototype.clear=Cl,Jt.prototype.delete=wa,Jt.prototype.get=Aa,Jt.prototype.has=wr,Jt.prototype.set=ai;function kt(_){var O=-1,q=_==null?0:_.length;for(this.clear();++O<q;){var ne=_[O];this.set(ne[0],ne[1])}}function er(){this.size=0,this.__data__={hash:new nn,map:new(Rn||Jt),string:new nn}}function Vn(_){var O=gn(this,_).delete(_);return this.size-=O?1:0,O}function Ar(_){return gn(this,_).get(_)}function Gt(_){return gn(this,_).has(_)}function Bi(_,O){var q=gn(this,_),ne=q.size;return q.set(_,O),this.size+=q.size==ne?0:1,this}kt.prototype.clear=er,kt.prototype.delete=Vn,kt.prototype.get=Ar,kt.prototype.has=Gt,kt.prototype.set=Bi;function os(_){var O=-1,q=_==null?0:_.length;for(this.__data__=new kt;++O<q;)this.add(_[O])}function mr(_){return this.__data__.set(_,s),this}function Pn(_){return this.__data__.has(_)}os.prototype.add=os.prototype.push=mr,os.prototype.has=Pn;function tr(_){var O=this.__data__=new Jt(_);this.size=O.size}function ks(){this.__data__=new Jt,this.size=0}function zi(_){var O=this.__data__,q=O.delete(_);return this.size=O.size,q}function Sa(_){return this.__data__.get(_)}function li(_){return this.__data__.has(_)}function Un(_,O){var q=this.__data__;if(q instanceof Jt){var ne=q.__data__;if(!Rn||ne.length<t-1)return ne.push([_,O]),this.size=++q.size,this;q=this.__data__=new kt(ne)}return q.set(_,O),this.size=q.size,this}tr.prototype.clear=ks,tr.prototype.delete=zi,tr.prototype.get=Sa,tr.prototype.has=li,tr.prototype.set=Un;function $t(_,O){var q=Bn(_),ne=!q&&zr(_),Me=!q&&!ne&&Fr(_),Ae=!q&&!ne&&!Me&&gr(_),Ge=q||ne||Me||Ae,Xe=Ge?Di(_.length,String):[],vt=Xe.length;for(var We in _)Ln.call(_,We)&&!(Ge&&(We=="length"||Me&&(We=="offset"||We=="parent")||Ae&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||ui(We,vt)))&&Xe.push(We);return Xe}function Mt(_,O){for(var q=_.length;q--;)if(qn(_[q][0],O))return q;return-1}function Sr(_,O,q){var ne=O(_);return Bn(_)?ne:Vr(ne,q(_))}function Br(_){return _==null?_===void 0?V:H:Wn&&Wn in Object(_)?Cr(_):rr(_)}function ct(_){return Ye(_)&&Br(_)==f}function cs(_,O,q,ne,Me){return _===O?!0:_==null||O==null||!Ye(_)&&!Ye(O)?_!==_&&O!==O:Nr(_,O,q,ne,cs,Me)}function Nr(_,O,q,ne,Me,Ae){var Ge=Bn(_),Xe=Bn(O),vt=Ge?m:nr(_),We=Xe?m:nr(O);vt=vt==f?$:vt,We=We==f?$:We;var Nt=vt==$,cn=We==$,Vt=vt==We;if(Vt&&Fr(_)){if(!Fr(O))return!1;Ge=!0,Nt=!1}if(Vt&&!Nt)return Ae||(Ae=new tr),Ge||gr(_)?ci(_,O,q,ne,Me,Ae):Hi(_,O,vt,q,ne,Me,Ae);if(!(q&a)){var Qt=Nt&&Ln.call(_,"__wrapped__"),sn=cn&&Ln.call(O,"__wrapped__");if(Qt||sn){var Gr=Qt?_.value():_,zn=sn?O.value():O;return Ae||(Ae=new tr),Me(Gr,zn,q,ne,Ae)}}return Vt?(Ae||(Ae=new tr),us(_,O,q,ne,Me,Ae)):!1}function Ms(_){if(!ms(_)||fs(_))return!1;var O=sr(_)?ur:he;return O.test(on(_))}function In(_){return Ye(_)&&On(_.length)&&!!ye[Br(_)]}function oi(_){if(!hi(_))return xt(_);var O=[];for(var q in Object(_))Ln.call(_,q)&&q!="constructor"&&O.push(q);return O}function ci(_,O,q,ne,Me,Ae){var Ge=q&a,Xe=_.length,vt=O.length;if(Xe!=vt&&!(Ge&&vt>Xe))return!1;var We=Ae.get(_);if(We&&Ae.get(O))return We==O;var Nt=-1,cn=!0,Vt=q&o?new os:void 0;for(Ae.set(_,O),Ae.set(O,_);++Nt<Xe;){var Qt=_[Nt],sn=O[Nt];if(ne)var Gr=Ge?ne(sn,Qt,Nt,O,_,Ae):ne(Qt,sn,Nt,_,O,Ae);if(Gr!==void 0){if(Gr)continue;cn=!1;break}if(Vt){if(!si(O,function(zn,$r){if(!Rt(Vt,$r)&&(Qt===zn||Me(Qt,zn,q,ne,Ae)))return Vt.push($r)})){cn=!1;break}}else if(!(Qt===sn||Me(Qt,sn,q,ne,Ae))){cn=!1;break}}return Ae.delete(_),Ae.delete(O),cn}function Hi(_,O,q,ne,Me,Ae,Ge){switch(q){case k:if(_.byteLength!=O.byteLength||_.byteOffset!=O.byteOffset)return!1;_=_.buffer,O=O.buffer;case S:return!(_.byteLength!=O.byteLength||!Ae(new Ot(_),new Ot(O)));case v:case x:case I:return qn(+_,+O);case T:return _.name==O.name&&_.message==O.message;case de:case M:return _==O+"";case j:var Xe=Ta;case xe:var vt=ne&a;if(Xe||(Xe=It),_.size!=O.size&&!vt)return!1;var We=Ge.get(_);if(We)return We==O;ne|=o,Ge.set(_,O);var Nt=ci(Xe(_),Xe(O),ne,Me,Ae,Ge);return Ge.delete(_),Nt;case L:if(hr)return hr.call(_)==hr.call(O)}return!1}function us(_,O,q,ne,Me,Ae){var Ge=q&a,Xe=hs(_),vt=Xe.length,We=hs(O),Nt=We.length;if(vt!=Nt&&!Ge)return!1;for(var cn=vt;cn--;){var Vt=Xe[cn];if(!(Ge?Vt in O:Ln.call(O,Vt)))return!1}var Qt=Ae.get(_);if(Qt&&Ae.get(O))return Qt==O;var sn=!0;Ae.set(_,O),Ae.set(O,_);for(var Gr=Ge;++cn<vt;){Vt=Xe[cn];var zn=_[Vt],$r=O[Vt];if(ne)var Rl=Ge?ne($r,zn,Vt,O,_,Ae):ne(zn,$r,Vt,_,O,Ae);if(!(Rl===void 0?zn===$r||Me(zn,$r,q,ne,Ae):Rl)){sn=!1;break}Gr||(Gr=Vt=="constructor")}if(sn&&!Gr){var Us=_.constructor,$i=O.constructor;Us!=$i&&"constructor"in _&&"constructor"in O&&!(typeof Us=="function"&&Us instanceof Us&&typeof $i=="function"&&$i instanceof $i)&&(sn=!1)}return Ae.delete(_),Ae.delete(O),sn}function hs(_){return Sr(_,Vs,Fi)}function gn(_,O){var q=_.__data__;return Na(O)?q[typeof O=="string"?"string":"hash"]:q.map}function Kt(_,O){var q=_r(_,O);return Ms(q)?q:void 0}function Cr(_){var O=Ln.call(_,Wn),q=_[Wn];try{_[Wn]=void 0;var ne=!0}catch{}var Me=Vi.call(_);return ne&&(O?_[Wn]=q:delete _[Wn]),Me}var Fi=kn?function(_){return _==null?[]:(_=Object(_),tn(kn(_),function(O){return js.call(_,O)}))}:Ps,nr=Br;(Jn&&nr(new Jn(new ArrayBuffer(1)))!=k||Rn&&nr(new Rn)!=j||Mn&&nr(Mn.resolve())!=Z||Pi&&nr(new Pi)!=xe||ii&&nr(new ii)!=F)&&(nr=function(_){var O=Br(_),q=O==$?_.constructor:void 0,ne=q?on(q):"";if(ne)switch(ne){case as:return k;case qr:return j;case Ls:return Z;case Ui:return xe;case qi:return F}return O});function ui(_,O){return O=O??u,!!O&&(typeof _=="number"||me.test(_))&&_>-1&&_%1==0&&_<O}function Na(_){var O=typeof _;return O=="string"||O=="number"||O=="symbol"||O=="boolean"?_!=="__proto__":_===null}function fs(_){return!!Mi&&Mi in _}function hi(_){var O=_&&_.constructor,q=typeof O=="function"&&O.prototype||Pr;return _===q}function rr(_){return Vi.call(_)}function on(_){if(_!=null){try{return ki.call(_)}catch{}try{return _+""}catch{}}return""}function qn(_,O){return _===O||_!==_&&O!==O}var zr=ct((function(){return arguments})())?ct:function(_){return Ye(_)&&Ln.call(_,"callee")&&!js.call(_,"callee")},Bn=Array.isArray;function Hr(_){return _!=null&&On(_.length)&&!sr(_)}var Fr=Ur||Gi;function ds(_,O){return cs(_,O)}function sr(_){if(!ms(_))return!1;var O=Br(_);return O==A||O==C||O==g||O==te}function On(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=u}function ms(_){var O=typeof _;return _!=null&&(O=="object"||O=="function")}function Ye(_){return _!=null&&typeof _=="object"}var gr=dt?Ht(dt):In;function Vs(_){return Hr(_)?$t(_):oi(_)}function Ps(){return[]}function Gi(){return!1}r.exports=ds})(Iu,Iu.exports)),Iu.exports}var Gf={},RE;function Yk(){if(RE)return Gf;RE=1,Object.defineProperty(Gf,"__esModule",{value:!0});const r=JA(),e=eS();var t;return(function(s){function a(m={},g={},v=!1){typeof m!="object"&&(m={}),typeof g!="object"&&(g={});let x=r(g);v||(x=Object.keys(x).reduce((T,A)=>(x[A]!=null&&(T[A]=x[A]),T),{}));for(const T in m)m[T]!==void 0&&g[T]===void 0&&(x[T]=m[T]);return Object.keys(x).length>0?x:void 0}s.compose=a;function o(m={},g={}){typeof m!="object"&&(m={}),typeof g!="object"&&(g={});const v=Object.keys(m).concat(Object.keys(g)).reduce((x,T)=>(e(m[T],g[T])||(x[T]=g[T]===void 0?null:g[T]),x),{});return Object.keys(v).length>0?v:void 0}s.diff=o;function u(m={},g={}){m=m||{};const v=Object.keys(g).reduce((x,T)=>(g[T]!==m[T]&&m[T]!==void 0&&(x[T]=g[T]),x),{});return Object.keys(m).reduce((x,T)=>(m[T]!==g[T]&&g[T]===void 0&&(x[T]=null),x),v)}s.invert=u;function f(m,g,v=!1){if(typeof m!="object")return g;if(typeof g!="object")return;if(!v)return g;const x=Object.keys(g).reduce((T,A)=>(m[A]===void 0&&(T[A]=g[A]),T),{});return Object.keys(x).length>0?x:void 0}s.transform=f})(t||(t={})),Gf.default=t,Gf}var $f={},IE;function tS(){if(IE)return $f;IE=1,Object.defineProperty($f,"__esModule",{value:!0});var r;return(function(e){function t(s){return typeof s.delete=="number"?s.delete:typeof s.retain=="number"?s.retain:typeof s.retain=="object"&&s.retain!==null?1:typeof s.insert=="string"?s.insert.length:1}e.length=t})(r||(r={})),$f.default=r,$f}var Kf={},OE;function Xk(){if(OE)return Kf;OE=1,Object.defineProperty(Kf,"__esModule",{value:!0});const r=tS();class e{constructor(s){this.ops=s,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(s){s||(s=1/0);const a=this.ops[this.index];if(a){const o=this.offset,u=r.default.length(a);if(s>=u-o?(s=u-o,this.index+=1,this.offset=0):this.offset+=s,typeof a.delete=="number")return{delete:s};{const f={};return a.attributes&&(f.attributes=a.attributes),typeof a.retain=="number"?f.retain=s:typeof a.retain=="object"&&a.retain!==null?f.retain=a.retain:typeof a.insert=="string"?f.insert=a.insert.substr(o,s):f.insert=a.insert,f}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?r.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const s=this.ops[this.index];return s?typeof s.delete=="number"?"delete":typeof s.retain=="number"||typeof s.retain=="object"&&s.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const s=this.offset,a=this.index,o=this.next(),u=this.ops.slice(this.index);return this.offset=s,this.index=a,[o].concat(u)}}else return[]}}return Kf.default=e,Kf}var DE;function Zk(){return DE||(DE=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const t=Qk(),s=JA(),a=eS(),o=Yk();e.AttributeMap=o.default;const u=tS();e.Op=u.default;const f=Xk();e.OpIterator=f.default;const m="\0",g=(x,T)=>{if(typeof x!="object"||x===null)throw new Error(`cannot retain a ${typeof x}`);if(typeof T!="object"||T===null)throw new Error(`cannot retain a ${typeof T}`);const A=Object.keys(x)[0];if(!A||A!==Object.keys(T)[0])throw new Error(`embed types not matched: ${A} != ${Object.keys(T)[0]}`);return[A,x[A],T[A]]};class v{constructor(T){Array.isArray(T)?this.ops=T:T!=null&&Array.isArray(T.ops)?this.ops=T.ops:this.ops=[]}static registerEmbed(T,A){this.handlers[T]=A}static unregisterEmbed(T){delete this.handlers[T]}static getHandler(T){const A=this.handlers[T];if(!A)throw new Error(`no handlers for embed type "${T}"`);return A}insert(T,A){const C={};return typeof T=="string"&&T.length===0?this:(C.insert=T,A!=null&&typeof A=="object"&&Object.keys(A).length>0&&(C.attributes=A),this.push(C))}delete(T){return T<=0?this:this.push({delete:T})}retain(T,A){if(typeof T=="number"&&T<=0)return this;const C={retain:T};return A!=null&&typeof A=="object"&&Object.keys(A).length>0&&(C.attributes=A),this.push(C)}push(T){let A=this.ops.length,C=this.ops[A-1];if(T=s(T),typeof C=="object"){if(typeof T.delete=="number"&&typeof C.delete=="number")return this.ops[A-1]={delete:C.delete+T.delete},this;if(typeof C.delete=="number"&&T.insert!=null&&(A-=1,C=this.ops[A-1],typeof C!="object"))return this.ops.unshift(T),this;if(a(T.attributes,C.attributes)){if(typeof T.insert=="string"&&typeof C.insert=="string")return this.ops[A-1]={insert:C.insert+T.insert},typeof T.attributes=="object"&&(this.ops[A-1].attributes=T.attributes),this;if(typeof T.retain=="number"&&typeof C.retain=="number")return this.ops[A-1]={retain:C.retain+T.retain},typeof T.attributes=="object"&&(this.ops[A-1].attributes=T.attributes),this}}return A===this.ops.length?this.ops.push(T):this.ops.splice(A,0,T),this}chop(){const T=this.ops[this.ops.length-1];return T&&typeof T.retain=="number"&&!T.attributes&&this.ops.pop(),this}filter(T){return this.ops.filter(T)}forEach(T){this.ops.forEach(T)}map(T){return this.ops.map(T)}partition(T){const A=[],C=[];return this.forEach(j=>{(T(j)?A:C).push(j)}),[A,C]}reduce(T,A){return this.ops.reduce(T,A)}changeLength(){return this.reduce((T,A)=>A.insert?T+u.default.length(A):A.delete?T-A.delete:T,0)}length(){return this.reduce((T,A)=>T+u.default.length(A),0)}slice(T=0,A=1/0){const C=[],j=new f.default(this.ops);let I=0;for(;I<A&&j.hasNext();){let H;I<T?H=j.next(T-I):(H=j.next(A-I),C.push(H)),I+=u.default.length(H)}return new v(C)}compose(T){const A=new f.default(this.ops),C=new f.default(T.ops),j=[],I=C.peek();if(I!=null&&typeof I.retain=="number"&&I.attributes==null){let $=I.retain;for(;A.peekType()==="insert"&&A.peekLength()<=$;)$-=A.peekLength(),j.push(A.next());I.retain-$>0&&C.next(I.retain-$)}const H=new v(j);for(;A.hasNext()||C.hasNext();)if(C.peekType()==="insert")H.push(C.next());else if(A.peekType()==="delete")H.push(A.next());else{const $=Math.min(A.peekLength(),C.peekLength()),Z=A.next($),te=C.next($);if(te.retain){const de={};if(typeof Z.retain=="number")de.retain=typeof te.retain=="number"?$:te.retain;else if(typeof te.retain=="number")Z.retain==null?de.insert=Z.insert:de.retain=Z.retain;else{const M=Z.retain==null?"insert":"retain",[L,V,F]=g(Z[M],te.retain),S=v.getHandler(L);de[M]={[L]:S.compose(V,F,M==="retain")}}const xe=o.default.compose(Z.attributes,te.attributes,typeof Z.retain=="number");if(xe&&(de.attributes=xe),H.push(de),!C.hasNext()&&a(H.ops[H.ops.length-1],de)){const M=new v(A.rest());return H.concat(M).chop()}}else typeof te.delete=="number"&&(typeof Z.retain=="number"||typeof Z.retain=="object"&&Z.retain!==null)&&H.push(te)}return H.chop()}concat(T){const A=new v(this.ops.slice());return T.ops.length>0&&(A.push(T.ops[0]),A.ops=A.ops.concat(T.ops.slice(1))),A}diff(T,A){if(this.ops===T.ops)return new v;const C=[this,T].map(Z=>Z.map(te=>{if(te.insert!=null)return typeof te.insert=="string"?te.insert:m;const de=Z===T?"on":"with";throw new Error("diff() called "+de+" non-document")}).join("")),j=new v,I=t(C[0],C[1],A,!0),H=new f.default(this.ops),$=new f.default(T.ops);return I.forEach(Z=>{let te=Z[1].length;for(;te>0;){let de=0;switch(Z[0]){case t.INSERT:de=Math.min($.peekLength(),te),j.push($.next(de));break;case t.DELETE:de=Math.min(te,H.peekLength()),H.next(de),j.delete(de);break;case t.EQUAL:de=Math.min(H.peekLength(),$.peekLength(),te);const xe=H.next(de),M=$.next(de);a(xe.insert,M.insert)?j.retain(de,o.default.diff(xe.attributes,M.attributes)):j.push(M).delete(de);break}te-=de}}),j.chop()}eachLine(T,A=`
`){const C=new f.default(this.ops);let j=new v,I=0;for(;C.hasNext();){if(C.peekType()!=="insert")return;const H=C.peek(),$=u.default.length(H)-C.peekLength(),Z=typeof H.insert=="string"?H.insert.indexOf(A,$)-$:-1;if(Z<0)j.push(C.next());else if(Z>0)j.push(C.next(Z));else{if(T(j,C.next(1).attributes||{},I)===!1)return;I+=1,j=new v}}j.length()>0&&T(j,{},I)}invert(T){const A=new v;return this.reduce((C,j)=>{if(j.insert)A.delete(u.default.length(j));else{if(typeof j.retain=="number"&&j.attributes==null)return A.retain(j.retain),C+j.retain;if(j.delete||typeof j.retain=="number"){const I=j.delete||j.retain;return T.slice(C,C+I).forEach($=>{j.delete?A.push($):j.retain&&j.attributes&&A.retain(u.default.length($),o.default.invert(j.attributes,$.attributes))}),C+I}else if(typeof j.retain=="object"&&j.retain!==null){const I=T.slice(C,C+1),H=new f.default(I.ops).next(),[$,Z,te]=g(j.retain,H.insert),de=v.getHandler($);return A.retain({[$]:de.invert(Z,te)},o.default.invert(j.attributes,H.attributes)),C+1}}return C},0),A.chop()}transform(T,A=!1){if(A=!!A,typeof T=="number")return this.transformPosition(T,A);const C=T,j=new f.default(this.ops),I=new f.default(C.ops),H=new v;for(;j.hasNext()||I.hasNext();)if(j.peekType()==="insert"&&(A||I.peekType()!=="insert"))H.retain(u.default.length(j.next()));else if(I.peekType()==="insert")H.push(I.next());else{const $=Math.min(j.peekLength(),I.peekLength()),Z=j.next($),te=I.next($);if(Z.delete)continue;if(te.delete)H.push(te);else{const de=Z.retain,xe=te.retain;let M=typeof xe=="object"&&xe!==null?xe:$;if(typeof de=="object"&&de!==null&&typeof xe=="object"&&xe!==null){const L=Object.keys(de)[0];if(L===Object.keys(xe)[0]){const V=v.getHandler(L);V&&(M={[L]:V.transform(de[L],xe[L],A)})}}H.retain(M,o.default.transform(Z.attributes,te.attributes,A))}}return H.chop()}transformPosition(T,A=!1){A=!!A;const C=new f.default(this.ops);let j=0;for(;C.hasNext()&&j<=T;){const I=C.peekLength(),H=C.peekType();if(C.next(),H==="delete"){T-=Math.min(I,T-j);continue}else H==="insert"&&(j<T||!A)&&(T+=I);j+=I}return T}}v.Op=u.default,v.OpIterator=f.default,v.AttributeMap=o.default,v.handlers={},e.default=v,r.exports=v,r.exports.default=v})(Ff,Ff.exports)),Ff.exports}var Rs=Zk();const Re=wy(Rs);class ri extends is{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}ri.blotName="break";ri.tagName="BR";let ei=class extends Sd{};const Wk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function sm(r){return r.replace(/[&<>"']/g,e=>Wk[e])}class vr extends j0{static allowedChildren=[vr,ri,is,ei];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,t){const s=vr.order.indexOf(e),a=vr.order.indexOf(t);return s>=0||a>=0?s-a:e===t?0:e<t?-1:1}formatAt(e,t,s,a){if(vr.compare(this.statics.blotName,s)<0&&this.scroll.query(s,Oe.BLOT)){const o=this.isolate(e,t);a&&o.wrap(s,a)}else super.formatAt(e,t,s,a)}optimize(e){if(super.optimize(e),this.parent instanceof vr&&vr.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}const jE=1;class Yn extends eh{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=nS(this)),this.cache.delta}deleteAt(e,t){super.deleteAt(e,t),this.cache={}}formatAt(e,t,s,a){t<=0||(this.scroll.query(s,Oe.BLOCK)?e+t===this.length()&&this.format(s,a):super.formatAt(e,Math.min(t,this.length()-e-1),s,a),this.cache={})}insertAt(e,t,s){if(s!=null){super.insertAt(e,t,s),this.cache={};return}if(t.length===0)return;const a=t.split(`
`),o=a.shift();o.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let u=this;a.reduce((f,m)=>(u=u.split(f,!0),u.insertAt(0,m),m.length),e+o.length)}insertBefore(e,t){const{head:s}=this.children;super.insertBefore(e,t),s instanceof ri&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+jE),this.cache.length}moveChildren(e,t){super.moveChildren(e,t),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t&&(e===0||e>=this.length()-jE)){const a=this.clone();return e===0?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}const s=super.split(e,t);return this.cache={},s}}Yn.blotName="block";Yn.tagName="P";Yn.defaultChild=ri;Yn.allowedChildren=[ri,vr,is,ei];class Cs extends is{attach(){super.attach(),this.attributes=new nm(this.domNode)}delta(){return new Re().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){const s=this.scroll.query(e,Oe.BLOCK_ATTRIBUTE);s!=null&&this.attributes.attribute(s,t)}formatAt(e,t,s,a){this.format(s,a)}insertAt(e,t,s){if(s!=null){super.insertAt(e,t,s);return}const a=t.split(`
`),o=a.pop(),u=a.map(m=>{const g=this.scroll.create(Yn.blotName);return g.insertAt(0,m),g}),f=this.split(e);u.forEach(m=>{this.parent.insertBefore(m,f)}),o&&this.parent.insertBefore(this.scroll.create("text",o),f)}}Cs.scope=Oe.BLOCK_BLOT;function nS(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r.descendants(or).reduce((t,s)=>s.length()===0?t:t.insert(s.value(),ws(s,{},e)),new Re).insert(`
`,ws(r))}function ws(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return r==null||("formats"in r&&typeof r.formats=="function"&&(e={...e,...r.formats()},t&&delete e["code-token"]),r.parent==null||r.parent.statics.blotName==="scroll"||r.parent.statics.scope!==r.statics.scope)?e:ws(r.parent,e,t)}class Ks extends is{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,t,s){super(e,t),this.selection=s,this.textNode=document.createTextNode(Ks.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let s=this,a=0;for(;s!=null&&s.statics.scope!==Oe.BLOCK_BLOT;)a+=s.offset(s.parent),s=s.parent;s!=null&&(this.savedLength=Ks.CONTENTS.length,s.optimize(),s.formatAt(a,Ks.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const t=this.prev instanceof ei?this.prev:null,s=t?t.length():0,a=this.next instanceof ei?this.next:null,o=a?a.text:"",{textNode:u}=this,f=u.data.split(Ks.CONTENTS).join("");u.data=Ks.CONTENTS;let m;if(t)m=t,(f||a)&&(t.insertAt(t.length(),f+o),a&&a.remove());else if(a)m=a,a.insertAt(0,f);else{const g=document.createTextNode(f);m=this.scroll.create(g),this.parent.insertBefore(m,this)}if(this.remove(),e){const g=(T,A)=>t&&T===t.domNode?A:T===u?s+A-1:a&&T===a.domNode?s+f.length+A:null,v=g(e.start.node,e.start.offset),x=g(e.end.node,e.end.offset);if(v!==null&&x!==null)return{startNode:m.domNode,startOffset:v,endNode:m.domNode,endOffset:x}}return null}update(e,t){if(e.some(s=>s.type==="characterData"&&s.target===this.textNode)){const s=this.restore();s&&(t.range=s)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=Ks.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}}var Np={exports:{}},LE;function Jk(){return LE||(LE=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function a(m,g,v){this.fn=m,this.context=g,this.once=v||!1}function o(m,g,v,x,T){if(typeof v!="function")throw new TypeError("The listener must be a function");var A=new a(v,x||m,T),C=t?t+g:g;return m._events[C]?m._events[C].fn?m._events[C]=[m._events[C],A]:m._events[C].push(A):(m._events[C]=A,m._eventsCount++),m}function u(m,g){--m._eventsCount===0?m._events=new s:delete m._events[g]}function f(){this._events=new s,this._eventsCount=0}f.prototype.eventNames=function(){var g=[],v,x;if(this._eventsCount===0)return g;for(x in v=this._events)e.call(v,x)&&g.push(t?x.slice(1):x);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(v)):g},f.prototype.listeners=function(g){var v=t?t+g:g,x=this._events[v];if(!x)return[];if(x.fn)return[x.fn];for(var T=0,A=x.length,C=new Array(A);T<A;T++)C[T]=x[T].fn;return C},f.prototype.listenerCount=function(g){var v=t?t+g:g,x=this._events[v];return x?x.fn?1:x.length:0},f.prototype.emit=function(g,v,x,T,A,C){var j=t?t+g:g;if(!this._events[j])return!1;var I=this._events[j],H=arguments.length,$,Z;if(I.fn){switch(I.once&&this.removeListener(g,I.fn,void 0,!0),H){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,v),!0;case 3:return I.fn.call(I.context,v,x),!0;case 4:return I.fn.call(I.context,v,x,T),!0;case 5:return I.fn.call(I.context,v,x,T,A),!0;case 6:return I.fn.call(I.context,v,x,T,A,C),!0}for(Z=1,$=new Array(H-1);Z<H;Z++)$[Z-1]=arguments[Z];I.fn.apply(I.context,$)}else{var te=I.length,de;for(Z=0;Z<te;Z++)switch(I[Z].once&&this.removeListener(g,I[Z].fn,void 0,!0),H){case 1:I[Z].fn.call(I[Z].context);break;case 2:I[Z].fn.call(I[Z].context,v);break;case 3:I[Z].fn.call(I[Z].context,v,x);break;case 4:I[Z].fn.call(I[Z].context,v,x,T);break;default:if(!$)for(de=1,$=new Array(H-1);de<H;de++)$[de-1]=arguments[de];I[Z].fn.apply(I[Z].context,$)}}return!0},f.prototype.on=function(g,v,x){return o(this,g,v,x,!1)},f.prototype.once=function(g,v,x){return o(this,g,v,x,!0)},f.prototype.removeListener=function(g,v,x,T){var A=t?t+g:g;if(!this._events[A])return this;if(!v)return u(this,A),this;var C=this._events[A];if(C.fn)C.fn===v&&(!T||C.once)&&(!x||C.context===x)&&u(this,A);else{for(var j=0,I=[],H=C.length;j<H;j++)(C[j].fn!==v||T&&!C[j].once||x&&C[j].context!==x)&&I.push(C[j]);I.length?this._events[A]=I.length===1?I[0]:I:u(this,A)}return this},f.prototype.removeAllListeners=function(g){var v;return g?(v=t?t+g:g,this._events[v]&&u(this,v)):(this._events=new s,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=t,f.EventEmitter=f,r.exports=f})(Np)),Np.exports}var eM=Jk();const tM=wy(eM),_y=new WeakMap,xy=["error","warn","log","info"];let Ey="warn";function rS(r){if(Ey&&xy.indexOf(r)<=xy.indexOf(Ey)){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];console[r](...t)}}function Ea(r){return xy.reduce((e,t)=>(e[t]=rS.bind(console,t,r),e),{})}Ea.level=r=>{Ey=r};rS.level=Ea.level;const Cp=Ea("quill:events"),nM=["selectionchange","mousedown","mouseup","click"];nM.forEach(r=>{document.addEventListener(r,function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];Array.from(document.querySelectorAll(".ql-container")).forEach(a=>{const o=_y.get(a);o&&o.emitter&&o.emitter.handleDOM(...t)})})});class Ne extends tM{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Cp.error)}emit(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Cp.log.call(Cp,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];(this.domListeners[e.type]||[]).forEach(o=>{let{node:u,handler:f}=o;(e.target===u||u.contains(e.target))&&f(e,...s)})}listenDOM(e,t,s){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:s})}}const Rp=Ea("quill:selection");class io{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}}class rM{constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new io(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Ne.sources.USER),1)}),this.emitter.on(Ne.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const s=this.getNativeRange();s!=null&&s.start.node!==this.cursor.textNode&&this.emitter.once(Ne.events.SCROLL_UPDATE,(a,o)=>{try{this.root.contains(s.start.node)&&this.root.contains(s.end.node)&&this.setNativeRange(s.start.node,s.start.offset,s.end.node,s.end.offset);const u=o.some(f=>f.type==="characterData"||f.type==="childList"||f.type==="attributes"&&f.target===this.root);this.update(u?Ne.sources.SILENT:a)}catch{}})}),this.emitter.on(Ne.events.SCROLL_OPTIMIZE,(s,a)=>{if(a.range){const{startNode:o,startOffset:u,endNode:f,endOffset:m}=a.range;this.setNativeRange(o,u,f,m),this.update(Ne.sources.SILENT)}}),this.update(Ne.sources.SILENT)}handleComposition(){this.emitter.on(Ne.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Ne.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Ne.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();const s=this.getNativeRange();if(!(s==null||!s.native.collapsed||this.scroll.query(e,Oe.BLOCK))){if(s.start.node!==this.cursor.textNode){const a=this.scroll.find(s.start.node,!1);if(a==null)return;if(a instanceof or){const o=a.split(s.start.offset);a.parent.insertBefore(this.cursor,o)}else a.insertBefore(this.cursor,s.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=this.scroll.length();e=Math.min(e,s-1),t=Math.min(e+t,s-1)-e;let a,[o,u]=this.scroll.leaf(e);if(o==null)return null;if(t>0&&u===o.length()){const[v]=this.scroll.leaf(e+1);if(v){const[x]=this.scroll.line(e),[T]=this.scroll.line(e+1);x===T&&(o=v,u=0)}}[a,u]=o.position(u,!0);const f=document.createRange();if(t>0)return f.setStart(a,u),[o,u]=this.scroll.leaf(e+t),o==null?null:([a,u]=o.position(u,!0),f.setEnd(a,u),f.getBoundingClientRect());let m="left",g;if(a instanceof Text){if(!a.data.length)return null;u<a.data.length?(f.setStart(a,u),f.setEnd(a,u+1)):(f.setStart(a,u-1),f.setEnd(a,u),m="right"),g=f.getBoundingClientRect()}else{if(!(o.domNode instanceof Element))return null;g=o.domNode.getBoundingClientRect(),u>0&&(m="right")}return{bottom:g.top+g.height,height:g.height,left:g[m],right:g[m],top:g.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const t=e.getRangeAt(0);if(t==null)return null;const s=this.normalizeNative(t);return Rp.info("getNativeRange",s),s}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Ip(this.root,document.activeElement)}normalizedToRange(e){const t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);const s=t.map(u=>{const[f,m]=u,g=this.scroll.find(f,!0),v=g.offset(this.scroll);return m===0?v:g instanceof or?v+g.index(f,m):v+g.length()}),a=Math.min(Math.max(...s),this.scroll.length()-1),o=Math.min(a,...s);return new io(o,a-o)}normalizeNative(e){if(!Ip(this.root,e.startContainer)||!e.collapsed&&!Ip(this.root,e.endContainer))return null;const t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(s=>{let{node:a,offset:o}=s;for(;!(a instanceof Text)&&a.childNodes.length>0;)if(a.childNodes.length>o)a=a.childNodes[o],o=0;else if(a.childNodes.length===o)a=a.lastChild,a instanceof Text?o=a.data.length:a.childNodes.length>0?o=a.childNodes.length:o=a.childNodes.length+1;else break;s.node=a,s.offset=o}),t}rangeToNative(e){const t=this.scroll.length(),s=(a,o)=>{a=Math.min(t-1,a);const[u,f]=this.scroll.leaf(a);return u?u.position(f,o):[null,-1]};return[...s(e.index,!1),...s(e.index+e.length,!0)]}setNativeRange(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Rp.info("setNativeRange",e,t,s,a),e!=null&&(this.root.parentNode==null||e.parentNode==null||s.parentNode==null))return;const u=document.getSelection();if(u!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:f}=this.getNativeRange()||{};if(f==null||o||e!==f.startContainer||t!==f.startOffset||s!==f.endContainer||a!==f.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),s instanceof Element&&s.tagName==="BR"&&(a=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode);const m=document.createRange();m.setStart(e,t),m.setEnd(s,a),u.removeAllRanges(),u.addRange(m)}}else u.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ne.sources.API;if(typeof t=="string"&&(s=t,t=!1),Rp.info("setRange",e),e!=null){const a=this.rangeToNative(e);this.setNativeRange(...a,t)}else this.setNativeRange(null);this.update(s)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ne.sources.USER;const t=this.lastRange,[s,a]=this.getRange();if(this.lastRange=s,this.lastNative=a,this.lastRange!=null&&(this.savedRange=this.lastRange),!rl(t,this.lastRange)){if(!this.composing&&a!=null&&a.native.collapsed&&a.start.node!==this.cursor.textNode){const u=this.cursor.restore();u&&this.setNativeRange(u.startNode,u.startOffset,u.endNode,u.endOffset)}const o=[Ne.events.SELECTION_CHANGE,oc(this.lastRange),oc(t),e];this.emitter.emit(Ne.events.EDITOR_CHANGE,...o),e!==Ne.sources.SILENT&&this.emitter.emit(...o)}}}function Ip(r,e){try{e.parentNode}catch{return!1}return r.contains(e)}const sM=/^[ -~]*$/;class iM{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();const s=kE(e),a=new Re;return lM(s.ops.slice()).reduce((u,f)=>{const m=Rs.Op.length(f);let g=f.attributes||{},v=!1,x=!1;if(f.insert!=null){if(a.retain(m),typeof f.insert=="string"){const C=f.insert;x=!C.endsWith(`
`)&&(t<=u||!!this.scroll.descendant(Cs,u)[0]),this.scroll.insertAt(u,C);const[j,I]=this.scroll.line(u);let H=hl({},ws(j));if(j instanceof Yn){const[$]=j.descendant(or,I);$&&(H=hl(H,ws($)))}g=Rs.AttributeMap.diff(H,g)||{}}else if(typeof f.insert=="object"){const C=Object.keys(f.insert)[0];if(C==null)return u;const j=this.scroll.query(C,Oe.INLINE)!=null;if(j)(t<=u||this.scroll.descendant(Cs,u)[0])&&(x=!0);else if(u>0){const[I,H]=this.scroll.descendant(or,u-1);I instanceof ei?I.value()[H]!==`
`&&(v=!0):I instanceof is&&I.statics.scope===Oe.INLINE_BLOT&&(v=!0)}if(this.scroll.insertAt(u,C,f.insert[C]),j){const[I]=this.scroll.descendant(or,u);if(I){const H=hl({},ws(I));g=Rs.AttributeMap.diff(H,g)||{}}}}t+=m}else if(a.push(f),f.retain!==null&&typeof f.retain=="object"){const C=Object.keys(f.retain)[0];if(C==null)return u;this.scroll.updateEmbedAt(u,C,f.retain[C])}Object.keys(g).forEach(C=>{this.scroll.formatAt(u,m,C,g[C])});const T=v?1:0,A=x?1:0;return t+=T+A,a.retain(T),a.delete(A),u+m+T+A},0),a.reduce((u,f)=>typeof f.delete=="number"?(this.scroll.deleteAt(u,f.delete),u):u+Rs.Op.length(f),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new Re().retain(e).delete(t))}formatLine(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(s).forEach(o=>{this.scroll.lines(e,Math.max(t,1)).forEach(u=>{u.format(o,s[o])})}),this.scroll.optimize();const a=new Re().retain(e).retain(t,oc(s));return this.update(a)}formatText(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(s).forEach(o=>{this.scroll.formatAt(e,t,o,s[o])});const a=new Re().retain(e).retain(t,oc(s));return this.update(a)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new Re)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],a=[];t===0?this.scroll.path(e).forEach(f=>{const[m]=f;m instanceof Yn?s.push(m):m instanceof or&&a.push(m)}):(s=this.scroll.lines(e,t),a=this.scroll.descendants(or,e,t));const[o,u]=[s,a].map(f=>{const m=f.shift();if(m==null)return{};let g=ws(m);for(;Object.keys(g).length>0;){const v=f.shift();if(v==null)return g;g=aM(ws(v),g)}return g});return{...o,...u}}getHTML(e,t){const[s,a]=this.scroll.line(e);if(s){const o=s.length();return s.length()>=a+t&&!(a===0&&t===o)?th(s,a,t,!0):th(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(s=>typeof s.insert=="string").map(s=>s.insert).join("")}insertContents(e,t){const s=kE(t),a=new Re().retain(e).concat(s);return this.scroll.insertContents(e,s),this.update(a)}insertEmbed(e,t,s){return this.scroll.insertAt(e,t,s),this.update(new Re().retain(e).insert({[t]:s}))}insertText(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(s).forEach(a=>{this.scroll.formatAt(e,t.length,a,s[a])}),this.update(new Re().retain(e).insert(t,oc(s)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==Yn.blotName)return!1;const t=e;return t.children.length>1?!1:t.children.head instanceof ri}removeFormat(e,t){const s=this.getText(e,t),[a,o]=this.scroll.line(e+t);let u=0,f=new Re;a!=null&&(u=a.length()-o,f=a.delta().slice(o,o+u-1).insert(`
`));const g=this.getContents(e,t+u).diff(new Re().insert(s).concat(f)),v=new Re().retain(e).concat(g);return this.applyDelta(v)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const a=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(sM)&&this.scroll.find(t[0].target)){const o=this.scroll.find(t[0].target),u=ws(o),f=o.offset(this.scroll),m=t[0].oldValue.replace(Ks.CONTENTS,""),g=new Re().insert(m),v=new Re().insert(o.value()),x=s&&{oldRange:ME(s.oldRange,-f),newRange:ME(s.newRange,-f)};e=new Re().retain(f).concat(g.diff(v,x)).reduce((A,C)=>C.insert?A.insert(C.insert,u):A.push(C),new Re),this.delta=a.compose(e)}else this.delta=this.getDelta(),(!e||!rl(a.compose(e),this.delta))&&(e=a.diff(this.delta,s));return e}}function nc(r,e,t){if(r.length===0){const[A]=Op(t.pop());return e<=0?`</li></${A}>`:`</li></${A}>${nc([],e-1,t)}`}const[{child:s,offset:a,length:o,indent:u,type:f},...m]=r,[g,v]=Op(f);if(u>e)return t.push(f),u===e+1?`<${g}><li${v}>${th(s,a,o)}${nc(m,u,t)}`:`<${g}><li>${nc(r,e+1,t)}`;const x=t[t.length-1];if(u===e&&f===x)return`</li><li${v}>${th(s,a,o)}${nc(m,u,t)}`;const[T]=Op(t.pop());return`</li></${T}>${nc(r,e-1,t)}`}function th(r,e,t){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in r&&typeof r.html=="function")return r.html(e,t);if(r instanceof ei)return sm(r.value().slice(e,e+t)).replaceAll(" ","&nbsp;");if(r instanceof Xs){if(r.statics.blotName==="list-container"){const g=[];return r.children.forEachAt(e,t,(v,x,T)=>{const A="formats"in v&&typeof v.formats=="function"?v.formats():{};g.push({child:v,offset:x,length:T,indent:A.indent||0,type:A.list})}),nc(g,-1,[])}const a=[];if(r.children.forEachAt(e,t,(g,v,x)=>{a.push(th(g,v,x))}),s||r.statics.blotName==="list")return a.join("");const{outerHTML:o,innerHTML:u}=r.domNode,[f,m]=o.split(`>${u}<`);return f==="<table"?`<table style="border: 1px solid #000;">${a.join("")}<${m}`:`${f}>${a.join("")}<${m}`}return r.domNode instanceof Element?r.domNode.outerHTML:""}function aM(r,e){return Object.keys(e).reduce((t,s)=>{if(r[s]==null)return t;const a=e[s];return a===r[s]?t[s]=a:Array.isArray(a)?a.indexOf(r[s])<0?t[s]=a.concat([r[s]]):t[s]=a:t[s]=[a,r[s]],t},{})}function Op(r){const e=r==="ordered"?"ol":"ul";switch(r){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function kE(r){return r.reduce((e,t)=>{if(typeof t.insert=="string"){const s=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(s,t.attributes)}return e.push(t)},new Re)}function ME(r,e){let{index:t,length:s}=r;return new io(t+e,s)}function lM(r){const e=[];return r.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((a,o)=>{o&&e.push({insert:`
`,attributes:t.attributes}),a&&e.push({insert:a,attributes:t.attributes})}):e.push(t)}),e}class Oi{static DEFAULTS={};constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}}const Qf="\uFEFF";class k0 extends is{constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(s=>{this.contentNode.appendChild(s)}),this.leftGuard=document.createTextNode(Qf),this.rightGuard=document.createTextNode(Qf),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,s;const a=e.data.split(Qf).join("");if(e===this.leftGuard)if(this.prev instanceof ei){const o=this.prev.length();this.prev.insertAt(o,a),t={startNode:this.prev.domNode,startOffset:o+a.length}}else s=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(s),this),t={startNode:s,startOffset:a.length};else e===this.rightGuard&&(this.next instanceof ei?(this.next.insertAt(0,a),t={startNode:this.next.domNode,startOffset:a.length}):(s=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(s),this.next),t={startNode:s,startOffset:a.length}));return e.data=Qf,t}update(e,t){e.forEach(s=>{if(s.type==="characterData"&&(s.target===this.leftGuard||s.target===this.rightGuard)){const a=this.restore(s.target);a&&(t.range=a)}})}}class oM{isComposing=!1;constructor(e,t){this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof k0)&&(this.emitter.emit(Ne.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(Ne.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(Ne.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(Ne.events.COMPOSITION_END,e),this.isComposing=!1}}class Lc{static DEFAULTS={modules:{}};static themes={default:Lc};modules={};constructor(e,t){this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}const cM=r=>r.parentElement||r.getRootNode().host||null,uM=r=>{const e=r.getBoundingClientRect(),t="offsetWidth"in r&&Math.abs(e.width)/r.offsetWidth||1,s="offsetHeight"in r&&Math.abs(e.height)/r.offsetHeight||1;return{top:e.top,right:e.left+r.clientWidth*t,bottom:e.top+r.clientHeight*s,left:e.left}},Yf=r=>{const e=parseInt(r,10);return Number.isNaN(e)?0:e},VE=(r,e,t,s,a,o)=>r<t&&e>s?0:r<t?-(t-r+a):e>s?e-r>s-t?r+a-t:e-s+o:0,hM=(r,e)=>{const t=r.ownerDocument;let s=e,a=r;for(;a;){const o=a===t.body,u=o?{top:0,right:window.visualViewport?.width??t.documentElement.clientWidth,bottom:window.visualViewport?.height??t.documentElement.clientHeight,left:0}:uM(a),f=getComputedStyle(a),m=VE(s.left,s.right,u.left,u.right,Yf(f.scrollPaddingLeft),Yf(f.scrollPaddingRight)),g=VE(s.top,s.bottom,u.top,u.bottom,Yf(f.scrollPaddingTop),Yf(f.scrollPaddingBottom));if(m||g)if(o)t.defaultView?.scrollBy(m,g);else{const{scrollLeft:v,scrollTop:x}=a;g&&(a.scrollTop+=g),m&&(a.scrollLeft+=m);const T=a.scrollLeft-v,A=a.scrollTop-x;s={left:s.left-T,top:s.top-A,right:s.right-T,bottom:s.bottom-A}}a=o||f.position==="fixed"?null:cM(a)}},fM=100,dM=["block","break","cursor","inline","scroll","text"],mM=(r,e,t)=>{const s=new Ec;return dM.forEach(a=>{const o=e.query(a);o&&s.register(o)}),r.forEach(a=>{let o=e.query(a);o||t.error(`Cannot register "${a}" specified in "formats" config. Are you sure it was registered?`);let u=0;for(;o;)if(s.register(o),o="blotName"in o?o.requiredContainer??null:null,u+=1,u>fM){t.error(`Cycle detected in registering blot requiredContainer: "${a}"`);break}}),s},uc=Ea("quill"),Xf=new Ec;Xs.uiClass="ql-ui";class le{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Xf,theme:"default"};static events=Ne.events;static sources=Ne.sources;static version="2.0.3";static imports={delta:Re,parchment:Kk,"core/module":Oi,"core/theme":Lc};static debug(e){e===!0&&(e="log"),Ea.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return _y.get(e)||Xf.find(e,t)}static import(e){return this.imports[e]==null&&uc.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],t=!!(!(arguments.length<=1)&&arguments[1]),s="attrName"in e?e.attrName:e.blotName;typeof s=="string"?this.register(`formats/${s}`,e,t):Object.keys(e).forEach(a=>{this.register(a,e[a],t)})}else{const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],s=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!s&&uc.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&Xf.register(t),typeof t.register=="function"&&t.register(Xf)}}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=gM(e,t),this.container=this.options.container,this.container==null){uc.error("Invalid Quill container",e);return}this.options.debug&&le.debug(this.options.debug);const s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",_y.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Ne;const a=L0.blotName,o=this.options.registry.query(a);if(!o||!("blotName"in o))throw new Error(`Cannot initialize Quill without "${a}" blot`);if(this.scroll=new o(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new iM(this.scroll),this.selection=new rM(this.scroll,this.emitter),this.composition=new oM(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Ne.events.EDITOR_CHANGE,u=>{u===Ne.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Ne.events.SCROLL_UPDATE,(u,f)=>{const m=this.selection.lastRange,[g]=this.selection.getRange(),v=m&&g?{oldRange:m,newRange:g}:void 0;Gs.call(this,()=>this.editor.update(null,f,v),u)}),this.emitter.on(Ne.events.SCROLL_EMBED_UPDATE,(u,f)=>{const m=this.selection.lastRange,[g]=this.selection.getRange(),v=m&&g?{oldRange:m,newRange:g}:void 0;Gs.call(this,()=>{const x=new Re().retain(u.offset(this)).retain({[u.statics.blotName]:f});return this.editor.update(x,[],v)},le.sources.USER)}),s){const u=this.clipboard.convert({html:`${s}<p><br></p>`,text:`
`});this.setContents(u)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const s=e;e=document.createElement("div"),e.classList.add(s)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,s){return[e,t,,s]=ca(e,t,s),Gs.call(this,()=>this.editor.deleteText(e,t),s,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ne.sources.API;return Gs.call(this,()=>{const a=this.getSelection(!0);let o=new Re;if(a==null)return o;if(this.scroll.query(e,Oe.BLOCK))o=this.editor.formatLine(a.index,a.length,{[e]:t});else{if(a.length===0)return this.selection.format(e,t),o;o=this.editor.formatText(a.index,a.length,{[e]:t})}return this.setSelection(a,Ne.sources.SILENT),o},s)}formatLine(e,t,s,a,o){let u;return[e,t,u,o]=ca(e,t,s,a,o),Gs.call(this,()=>this.editor.formatLine(e,t,u),o,e,0)}formatText(e,t,s,a,o){let u;return[e,t,u,o]=ca(e,t,s,a,o),Gs.call(this,()=>this.editor.formatText(e,t,u),o,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=null;if(typeof e=="number"?s=this.selection.getBounds(e,t):s=this.selection.getBounds(e.index,e.length),!s)return null;const a=this.container.getBoundingClientRect();return{bottom:s.bottom-a.top,height:s.height,left:s.left-a.left,right:s.right-a.left,top:s.top-a.top,width:s.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=ca(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=ca(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=ca(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,s){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:le.sources.API;return Gs.call(this,()=>this.editor.insertEmbed(e,t,s),a,e)}insertText(e,t,s,a,o){let u;return[e,,u,o]=ca(e,0,s,a,o),Gs.call(this,()=>this.editor.insertText(e,t,u),o,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,s){return[e,t,,s]=ca(e,t,s),Gs.call(this,()=>this.editor.removeFormat(e,t),s,e)}scrollRectIntoView(e){hM(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne.sources.API;return Gs.call(this,()=>{e=new Re(e);const s=this.getLength(),a=this.editor.deleteText(0,s),o=this.editor.insertContents(0,e),u=this.editor.deleteText(this.getLength()-1,1);return a.compose(o).compose(u)},t)}setSelection(e,t,s){e==null?this.selection.setRange(null,t||le.sources.API):([e,t,,s]=ca(e,t,s),this.selection.setRange(new io(Math.max(0,e),t),s),s!==Ne.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne.sources.API;const s=new Re().insert(e);return this.setContents(s,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ne.sources.USER;const t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne.sources.API;return Gs.call(this,()=>(e=new Re(e),this.editor.applyDelta(e)),t,!0)}}function PE(r){return typeof r=="string"?document.querySelector(r):r}function Dp(r){return Object.entries(r??{}).reduce((e,t)=>{let[s,a]=t;return{...e,[s]:a===!0?{}:a}},{})}function UE(r){return Object.fromEntries(Object.entries(r).filter(e=>e[1]!==void 0))}function gM(r,e){const t=PE(r);if(!t)throw new Error("Invalid Quill container");const a=!e.theme||e.theme===le.DEFAULTS.theme?Lc:le.import(`themes/${e.theme}`);if(!a)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:o,...u}=le.DEFAULTS,{modules:f,...m}=a.DEFAULTS;let g=Dp(e.modules);g!=null&&g.toolbar&&g.toolbar.constructor!==Object&&(g={...g,toolbar:{container:g.toolbar}});const v=hl({},Dp(o),Dp(f),g),x={...u,...UE(m),...UE(e)};let T=e.registry;return T?e.formats&&uc.warn('Ignoring "formats" option because "registry" is specified'):T=e.formats?mM(e.formats,x.registry,uc):x.registry,{...x,registry:T,container:t,theme:a,modules:Object.entries(v).reduce((A,C)=>{let[j,I]=C;if(!I)return A;const H=le.import(`modules/${j}`);return H==null?(uc.error(`Cannot load ${j} module. Are you sure you registered it?`),A):{...A,[j]:hl({},H.DEFAULTS||{},I)}},{}),bounds:PE(x.bounds)}}function Gs(r,e,t,s){if(!this.isEnabled()&&e===Ne.sources.USER&&!this.allowReadOnlyEdits)return new Re;let a=t==null?null:this.getSelection();const o=this.editor.delta,u=r();if(a!=null&&(t===!0&&(t=a.index),s==null?a=qE(a,u,e):s!==0&&(a=qE(a,t,s,e)),this.setSelection(a,Ne.sources.SILENT)),u.length()>0){const f=[Ne.events.TEXT_CHANGE,u,o,e];this.emitter.emit(Ne.events.EDITOR_CHANGE,...f),e!==Ne.sources.SILENT&&this.emitter.emit(...f)}return u}function ca(r,e,t,s,a){let o={};return typeof r.index=="number"&&typeof r.length=="number"?typeof e!="number"?(a=s,s=t,t=e,e=r.length,r=r.index):(e=r.length,r=r.index):typeof e!="number"&&(a=s,s=t,t=e,e=0),typeof t=="object"?(o=t,a=s):typeof t=="string"&&(s!=null?o[t]=s:a=t),a=a||Ne.sources.API,[r,e,o,a]}function qE(r,e,t,s){const a=typeof t=="number"?t:0;if(r==null)return null;let o,u;return e&&typeof e.transformPosition=="function"?[o,u]=[r.index,r.index+r.length].map(f=>e.transformPosition(f,s!==Ne.sources.USER)):[o,u]=[r.index,r.index+r.length].map(f=>f<e||f===e&&s===Ne.sources.USER?f:a>=0?f+a:Math.max(e,f+a)),new io(o,u-o)}class go extends rm{}function BE(r){return r instanceof Yn||r instanceof Cs}function zE(r){return typeof r.updateContent=="function"}class pM extends L0{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Yn;static allowedChildren=[Yn,Cs,go];constructor(e,t,s){let{emitter:a}=s;super(e,t),this.emitter=a,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(Ne.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(Ne.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(Ne.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){const[s,a]=this.line(e),[o]=this.line(e+t);if(super.deleteAt(e,t),o!=null&&s!==o&&a>0){if(s instanceof Cs||o instanceof Cs){this.optimize();return}const u=o.children.head instanceof ri?null:o.children.head;s.moveChildren(o,u),s.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,s,a){super.formatAt(e,t,s,a),this.optimize()}insertAt(e,t,s){if(e>=this.length())if(s==null||this.scroll.query(t,Oe.BLOCK)==null){const a=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(a),s==null&&t.endsWith(`
`)?a.insertAt(0,t.slice(0,-1),s):a.insertAt(0,t,s)}else{const a=this.scroll.create(t,s);this.appendChild(a)}else super.insertAt(e,t,s);this.optimize()}insertBefore(e,t){if(e.statics.scope===Oe.INLINE_BLOT){const s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(e),super.insertBefore(s,t)}else super.insertBefore(e,t)}insertContents(e,t){const s=this.deltaToRenderBlocks(t.concat(new Re().insert(`
`))),a=s.pop();if(a==null)return;this.batchStart();const o=s.shift();if(o){const m=o.type==="block"&&(o.delta.length()===0||!this.descendant(Cs,e)[0]&&e<this.length()),g=o.type==="block"?o.delta:new Re().insert({[o.key]:o.value});jp(this,e,g);const v=o.type==="block"?1:0,x=e+g.length()+v;m&&this.insertAt(x-1,`
`);const T=ws(this.line(e)[0]),A=Rs.AttributeMap.diff(T,o.attributes)||{};Object.keys(A).forEach(C=>{this.formatAt(x-1,1,C,A[C])}),e=x}let[u,f]=this.children.find(e);if(s.length&&(u&&(u=u.split(f),f=0),s.forEach(m=>{if(m.type==="block"){const g=this.createBlock(m.attributes,u||void 0);jp(g,0,m.delta)}else{const g=this.create(m.key,m.value);this.insertBefore(g,u||void 0),Object.keys(m.attributes).forEach(v=>{g.format(v,m.attributes[v])})}})),a.type==="block"&&a.delta.length()){const m=u?u.offset(u.scroll)+f:this.length();jp(this,m,a.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const t=this.path(e).pop();if(!t)return[null,-1];const[s,a]=t;return s instanceof or?[s,a]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(BE,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const s=(a,o,u)=>{let f=[],m=u;return a.children.forEachAt(o,u,(g,v,x)=>{BE(g)?f.push(g):g instanceof rm&&(f=f.concat(s(g,v,m))),m-=x}),f};return s(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(Ne.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=Ne.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(s=>{let{target:a}=s;const o=this.find(a,!0);return o&&!zE(o)}),e.length>0&&this.emitter.emit(Ne.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(Ne.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,s){const[a]=this.descendant(o=>o instanceof Cs,e);a&&a.statics.blotName===t&&zE(a)&&a.updateContent(s)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const t=[];let s=new Re;return e.forEach(a=>{const o=a?.insert;if(o)if(typeof o=="string"){const u=o.split(`
`);u.slice(0,-1).forEach(m=>{s.insert(m,a.attributes),t.push({type:"block",delta:s,attributes:a.attributes??{}}),s=new Re});const f=u[u.length-1];f&&s.insert(f,a.attributes)}else{const u=Object.keys(o)[0];if(!u)return;this.query(u,Oe.INLINE)?s.push(a):(s.length()&&t.push({type:"block",delta:s,attributes:{}}),s=new Re,t.push({type:"blockEmbed",key:u,value:o[u],attributes:a.attributes??{}}))}}),s.length()&&t.push({type:"block",delta:s,attributes:{}}),t}createBlock(e,t){let s;const a={};Object.entries(e).forEach(f=>{let[m,g]=f;this.query(m,Oe.BLOCK&Oe.BLOT)!=null?s=m:a[m]=g});const o=this.create(s||this.statics.defaultChild.blotName,s?e[s]:void 0);this.insertBefore(o,t||void 0);const u=o.length();return Object.entries(a).forEach(f=>{let[m,g]=f;o.formatAt(0,u,m,g)}),o}}function jp(r,e,t){t.reduce((s,a)=>{const o=Rs.Op.length(a);let u=a.attributes||{};if(a.insert!=null){if(typeof a.insert=="string"){const f=a.insert;r.insertAt(s,f);const[m]=r.descendant(or,s),g=ws(m);u=Rs.AttributeMap.diff(g,u)||{}}else if(typeof a.insert=="object"){const f=Object.keys(a.insert)[0];if(f==null)return s;if(r.insertAt(s,f,a.insert[f]),r.scroll.query(f,Oe.INLINE)!=null){const[g]=r.descendant(or,s),v=ws(g);u=Rs.AttributeMap.diff(v,u)||{}}}}return Object.keys(u).forEach(f=>{r.formatAt(s,o,f,u[f])}),s+o},e)}const M0={scope:Oe.BLOCK,whitelist:["right","center","justify"]},yM=new Ci("align","align",M0),sS=new ni("align","ql-align",M0),iS=new Nl("align","text-align",M0);class aS extends Nl{value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(a=>`00${parseInt(a,10).toString(16)}`.slice(-2)).join("")}`):t}}const vM=new ni("color","ql-color",{scope:Oe.INLINE}),V0=new aS("color","color",{scope:Oe.INLINE}),bM=new ni("background","ql-bg",{scope:Oe.INLINE}),P0=new aS("background","background-color",{scope:Oe.INLINE});class po extends go{static create(e){const t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(s=>s.length()<=1?"":s.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${sm(this.code(e,t))}
</pre>`}}class br extends Yn{static TAB="  ";static register(){le.register(po)}}class U0 extends vr{}U0.blotName="code";U0.tagName="CODE";br.blotName="code-block";br.className="ql-code-block";br.tagName="DIV";po.blotName="code-block-container";po.className="ql-code-block-container";po.tagName="DIV";po.allowedChildren=[br];br.allowedChildren=[ei,ri,Ks];br.requiredContainer=po;const q0={scope:Oe.BLOCK,whitelist:["rtl"]},lS=new Ci("direction","dir",q0),oS=new ni("direction","ql-direction",q0),cS=new Nl("direction","direction",q0),uS={scope:Oe.INLINE,whitelist:["serif","monospace"]},hS=new ni("font","ql-font",uS);class _M extends Nl{value(e){return super.value(e).replace(/["']/g,"")}}const fS=new _M("font","font-family",uS),dS=new ni("size","ql-size",{scope:Oe.INLINE,whitelist:["small","large","huge"]}),mS=new Nl("size","font-size",{scope:Oe.INLINE,whitelist:["10px","18px","32px"]}),xM=Ea("quill:keyboard"),EM=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class im extends Oi{static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(s=>!!t[s]!==e[s]&&t[s]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(s=>{this.options.bindings[s]&&this.addBinding(this.options.bindings[s])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=wM(e);if(a==null){xM.warn("Attempted to add invalid keyboard binding",a);return}typeof t=="function"&&(t={handler:t}),typeof s=="function"&&(s={handler:s}),(Array.isArray(a.key)?a.key:[a.key]).forEach(u=>{const f={...a,key:u,...t,...s};this.bindings[f.key]=this.bindings[f.key]||[],this.bindings[f.key].push(f)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const a=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(H=>im.match(e,H));if(a.length===0)return;const o=le.find(e.target,!0);if(o&&o.scroll!==this.quill.scroll)return;const u=this.quill.getSelection();if(u==null||!this.quill.hasFocus())return;const[f,m]=this.quill.getLine(u.index),[g,v]=this.quill.getLeaf(u.index),[x,T]=u.length===0?[g,v]:this.quill.getLeaf(u.index+u.length),A=g instanceof Sd?g.value().slice(0,v):"",C=x instanceof Sd?x.value().slice(T):"",j={collapsed:u.length===0,empty:u.length===0&&f.length()<=1,format:this.quill.getFormat(u),line:f,offset:m,prefix:A,suffix:C,event:e};a.some(H=>{if(H.collapsed!=null&&H.collapsed!==j.collapsed||H.empty!=null&&H.empty!==j.empty||H.offset!=null&&H.offset!==j.offset)return!1;if(Array.isArray(H.format)){if(H.format.every($=>j.format[$]==null))return!1}else if(typeof H.format=="object"&&!Object.keys(H.format).every($=>H.format[$]===!0?j.format[$]!=null:H.format[$]===!1?j.format[$]==null:rl(H.format[$],j.format[$])))return!1;return H.prefix!=null&&!H.prefix.test(j.prefix)||H.suffix!=null&&!H.suffix.test(j.suffix)?!1:H.handler.call(this,u,j,H)!==!0})&&e.preventDefault()})}handleBackspace(e,t){const s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let a={};const[o]=this.quill.getLine(e.index);let u=new Re().retain(e.index-s).delete(s);if(t.offset===0){const[f]=this.quill.getLine(e.index-1);if(f&&!(f.statics.blotName==="block"&&f.length()<=1)){const g=o.formats(),v=this.quill.getFormat(e.index-1,1);if(a=Rs.AttributeMap.diff(g,v)||{},Object.keys(a).length>0){const x=new Re().retain(e.index+o.length()-2).retain(1,a);u=u.compose(x)}}}this.quill.updateContents(u,le.sources.USER),this.quill.focus()}handleDelete(e,t){const s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-s)return;let a={};const[o]=this.quill.getLine(e.index);let u=new Re().retain(e.index).delete(s);if(t.offset>=o.length()-1){const[f]=this.quill.getLine(e.index+1);if(f){const m=o.formats(),g=this.quill.getFormat(e.index,1);a=Rs.AttributeMap.diff(m,g)||{},Object.keys(a).length>0&&(u=u.retain(f.length()-1).retain(1,a))}}this.quill.updateContents(u,le.sources.USER),this.quill.focus()}handleDeleteRange(e){B0({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){const s=Object.keys(t.format).reduce((o,u)=>(this.quill.scroll.query(u,Oe.BLOCK)&&!Array.isArray(t.format[u])&&(o[u]=t.format[u]),o),{}),a=new Re().retain(e.index).delete(e.length).insert(`
`,s);this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(e.index+1,le.sources.SILENT),this.quill.focus()}}const TM={bindings:{bold:Lp("bold"),italic:Lp("italic"),underline:Lp("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(r,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",le.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(r,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",le.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(r,e){e.format.indent!=null?this.quill.format("indent","-1",le.sources.USER):e.format.list!=null&&this.quill.format("list",!1,le.sources.USER)}},"indent code-block":HE(!0),"outdent code-block":HE(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(r){this.quill.deleteText(r.index-1,1,le.sources.USER)}},tab:{key:"Tab",handler(r,e){if(e.format.table)return!0;this.quill.history.cutoff();const t=new Re().retain(r.index).delete(r.length).insert("	");return this.quill.updateContents(t,le.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index+1,le.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,le.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(r,e){const t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(r.index,r.length,t,le.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(r){const[e,t]=this.quill.getLine(r.index),s={...e.formats(),list:"checked"},a=new Re().retain(r.index).insert(`
`,s).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(r.index+1,le.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(r,e){const[t,s]=this.quill.getLine(r.index),a=new Re().retain(r.index).insert(`
`,e.format).retain(t.length()-s-1).retain(1,{header:null});this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(r.index+1,le.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(r){const e=this.quill.getModule("table");if(e){const[t,s,a,o]=e.getTable(r),u=AM(t,s,a,o);if(u==null)return;let f=t.offset();if(u<0){const m=new Re().retain(f).insert(`
`);this.quill.updateContents(m,le.sources.USER),this.quill.setSelection(r.index+1,r.length,le.sources.SILENT)}else if(u>0){f+=t.length();const m=new Re().retain(f).insert(`
`);this.quill.updateContents(m,le.sources.USER),this.quill.setSelection(f,le.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(r,e){const{event:t,line:s}=e,a=s.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(a-1,le.sources.USER):this.quill.setSelection(a+s.length(),le.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(r,e){if(this.quill.scroll.query("list")==null)return!0;const{length:t}=e.prefix,[s,a]=this.quill.getLine(r.index);if(a>t)return!0;let o;switch(e.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(r.index," ",le.sources.USER),this.quill.history.cutoff();const u=new Re().retain(r.index-a).delete(t+1).retain(s.length()-2-a).retain(1,{list:o});return this.quill.updateContents(u,le.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index-t,le.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(r){const[e,t]=this.quill.getLine(r.index);let s=2,a=e;for(;a!=null&&a.length()<=1&&a.formats()["code-block"];)if(a=a.prev,s-=1,s<=0){const o=new Re().retain(r.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(o,le.sources.USER),this.quill.setSelection(r.index-1,le.sources.SILENT),!1}return!0}},"embed left":Zf("ArrowLeft",!1),"embed left shift":Zf("ArrowLeft",!0),"embed right":Zf("ArrowRight",!1),"embed right shift":Zf("ArrowRight",!0),"table down":FE(!1),"table up":FE(!0)}};im.DEFAULTS=TM;function HE(r){return{key:"Tab",shiftKey:!r,format:{"code-block":!0},handler(e,t){let{event:s}=t;const a=this.quill.scroll.query("code-block"),{TAB:o}=a;if(e.length===0&&!s.shiftKey){this.quill.insertText(e.index,o,le.sources.USER),this.quill.setSelection(e.index+o.length,le.sources.SILENT);return}const u=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:f,length:m}=e;u.forEach((g,v)=>{r?(g.insertAt(0,o),v===0?f+=o.length:m+=o.length):g.domNode.textContent.startsWith(o)&&(g.deleteAt(0,o.length),v===0?f-=o.length:m-=o.length)}),this.quill.update(le.sources.USER),this.quill.setSelection(f,m,le.sources.SILENT)}}}function Zf(r,e){return{key:r,shiftKey:e,altKey:null,[r==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(s){let{index:a}=s;r==="ArrowRight"&&(a+=s.length+1);const[o]=this.quill.getLeaf(a);return o instanceof is?(r==="ArrowLeft"?e?this.quill.setSelection(s.index-1,s.length+1,le.sources.USER):this.quill.setSelection(s.index-1,le.sources.USER):e?this.quill.setSelection(s.index,s.length+1,le.sources.USER):this.quill.setSelection(s.index+s.length+1,le.sources.USER),!1):!0}}}function Lp(r){return{key:r[0],shortKey:!0,handler(e,t){this.quill.format(r,!t.format[r],le.sources.USER)}}}function FE(r){return{key:r?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){const s=r?"prev":"next",a=t.line,o=a.parent[s];if(o!=null){if(o.statics.blotName==="table-row"){let u=o.children.head,f=a;for(;f.prev!=null;)f=f.prev,u=u.next;const m=u.offset(this.quill.scroll)+Math.min(t.offset,u.length()-1);this.quill.setSelection(m,0,le.sources.USER)}}else{const u=a.table()[s];u!=null&&(r?this.quill.setSelection(u.offset(this.quill.scroll)+u.length()-1,0,le.sources.USER):this.quill.setSelection(u.offset(this.quill.scroll),0,le.sources.USER))}return!1}}}function wM(r){if(typeof r=="string"||typeof r=="number")r={key:r};else if(typeof r=="object")r=oc(r);else return null;return r.shortKey&&(r[EM]=r.shortKey,delete r.shortKey),r}function B0(r){let{quill:e,range:t}=r;const s=e.getLines(t);let a={};if(s.length>1){const o=s[0].formats(),u=s[s.length-1].formats();a=Rs.AttributeMap.diff(u,o)||{}}e.deleteText(t,le.sources.USER),Object.keys(a).length>0&&e.formatLine(t.index,1,a,le.sources.USER),e.setSelection(t.index,le.sources.SILENT)}function AM(r,e,t,s){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?s===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const SM=/font-weight:\s*normal/,NM=["P","OL","UL"],GE=r=>r&&NM.includes(r.tagName),CM=r=>{Array.from(r.querySelectorAll("br")).filter(e=>GE(e.previousElementSibling)&&GE(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},RM=r=>{Array.from(r.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(SM)).forEach(e=>{const t=r.createDocumentFragment();t.append(...e.childNodes),e.parentNode?.replaceChild(t,e)})};function IM(r){r.querySelector('[id^="docs-internal-guid-"]')&&(RM(r),CM(r))}const OM=/\bmso-list:[^;]*ignore/i,DM=/\bmso-list:[^;]*\bl(\d+)/i,jM=/\bmso-list:[^;]*\blevel(\d+)/i,LM=(r,e)=>{const t=r.getAttribute("style"),s=t?.match(DM);if(!s)return null;const a=Number(s[1]),o=t?.match(jM),u=o?Number(o[1]):1,f=new RegExp(`@list l${a}:level${u}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),m=e.match(f),g=m&&m[1]==="bullet"?"bullet":"ordered";return{id:a,indent:u,type:g,element:r}},kM=r=>{const e=Array.from(r.querySelectorAll("[style*=mso-list]")),t=[],s=[];e.forEach(u=>{(u.getAttribute("style")||"").match(OM)?t.push(u):s.push(u)}),t.forEach(u=>u.parentNode?.removeChild(u));const a=r.documentElement.innerHTML,o=s.map(u=>LM(u,a)).filter(u=>u);for(;o.length;){const u=[];let f=o.shift();for(;f;)u.push(f),f=o.length&&o[0]?.element===f.element.nextElementSibling&&o[0].id===f.id?o.shift():null;const m=document.createElement("ul");u.forEach(x=>{const T=document.createElement("li");T.setAttribute("data-list",x.type),x.indent>1&&T.setAttribute("class",`ql-indent-${x.indent-1}`),T.innerHTML=x.element.innerHTML,m.appendChild(T)});const g=u[0]?.element,{parentNode:v}=g??{};g&&v?.replaceChild(m,g),u.slice(1).forEach(x=>{let{element:T}=x;v?.removeChild(T)})}};function MM(r){r.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&kM(r)}const VM=[MM,IM],PM=r=>{r.documentElement&&VM.forEach(e=>{e(r)})},UM=Ea("quill:clipboard"),qM=[[Node.TEXT_NODE,JM],[Node.TEXT_NODE,KE],["br",$M],[Node.ELEMENT_NODE,KE],[Node.ELEMENT_NODE,GM],[Node.ELEMENT_NODE,FM],[Node.ELEMENT_NODE,ZM],["li",YM],["ol, ul",XM],["pre",KM],["tr",WM],["b",kp("bold")],["i",kp("italic")],["strike",kp("strike")],["style",QM]],BM=[yM,lS].reduce((r,e)=>(r[e.keyName]=e,r),{}),$E=[iS,P0,V0,cS,fS,mS].reduce((r,e)=>(r[e.keyName]=e,r),{});class zM extends Oi{static DEFAULTS={matchers:[]};constructor(e,t){super(e,t),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],qM.concat(this.options.matchers??[]).forEach(s=>{let[a,o]=s;this.addMatcher(a,o)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:s}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a[br.blotName])return new Re().insert(s||"",{[br.blotName]:a[br.blotName]});if(!t)return new Re().insert(s||"",a);const o=this.convertHTML(t);return bh(o,`
`)&&(o.ops[o.ops.length-1].attributes==null||a.table)?o.compose(new Re().retain(o.length()-1).delete(1)):o}normalizeHTML(e){PM(e)}convertHTML(e){const t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);const s=t.body,a=new WeakMap,[o,u]=this.prepareMatching(s,a);return z0(this.quill.scroll,s,o,u,a)}dangerouslyPasteHTML(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:le.sources.API;if(typeof e=="string"){const a=this.convert({html:e,text:""});this.quill.setContents(a,t),this.quill.setSelection(0,le.sources.SILENT)}else{const a=this.convert({html:t,text:""});this.quill.updateContents(new Re().retain(e).concat(a),s),this.quill.setSelection(e+a.length(),le.sources.SILENT)}}onCaptureCopy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[s]=this.quill.selection.getRange();if(s==null)return;const{html:a,text:o}=this.onCopy(s,t);e.clipboardData?.setData("text/plain",o),e.clipboardData?.setData("text/html",a),t&&B0({range:s,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const t=this.quill.getSelection(!0);if(t==null)return;const s=e.clipboardData?.getData("text/html");let a=e.clipboardData?.getData("text/plain");if(!s&&!a){const u=e.clipboardData?.getData("text/uri-list");u&&(a=this.normalizeURIList(u))}const o=Array.from(e.clipboardData?.files||[]);if(!s&&o.length>0){this.quill.uploader.upload(t,o);return}if(s&&o.length>0){const u=new DOMParser().parseFromString(s,"text/html");if(u.body.childElementCount===1&&u.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(t,o);return}}this.onPaste(t,{html:s,text:a})}onCopy(e){const t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:s,html:a}=t;const o=this.quill.getFormat(e.index),u=this.convert({text:s,html:a},o);UM.log("onPaste",u,{text:s,html:a});const f=new Re().retain(e.index).delete(e.length).concat(u);this.quill.updateContents(f,le.sources.USER),this.quill.setSelection(f.length()-e.length,le.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){const s=[],a=[];return this.matchers.forEach(o=>{const[u,f]=o;switch(u){case Node.TEXT_NODE:a.push(f);break;case Node.ELEMENT_NODE:s.push(f);break;default:Array.from(e.querySelectorAll(u)).forEach(m=>{t.has(m)?t.get(m)?.push(f):t.set(m,[f])});break}}),[s,a]}}function yo(r,e,t,s){return s.query(e)?r.reduce((a,o)=>{if(!o.insert)return a;if(o.attributes&&o.attributes[e])return a.push(o);const u=t?{[e]:t}:{};return a.insert(o.insert,{...u,...o.attributes})},new Re):r}function bh(r,e){let t="";for(let s=r.ops.length-1;s>=0&&t.length<e.length;--s){const a=r.ops[s];if(typeof a.insert!="string")break;t=a.insert+t}return t.slice(-1*e.length)===e}function al(r,e){if(!(r instanceof Element))return!1;const t=e.query(r);return t&&t.prototype instanceof is?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(r.tagName.toLowerCase())}function HM(r,e){return r.previousElementSibling&&r.nextElementSibling&&!al(r.previousElementSibling,e)&&!al(r.nextElementSibling,e)}const Wf=new WeakMap;function gS(r){return r==null?!1:(Wf.has(r)||(r.tagName==="PRE"?Wf.set(r,!0):Wf.set(r,gS(r.parentNode))),Wf.get(r))}function z0(r,e,t,s,a){return e.nodeType===e.TEXT_NODE?s.reduce((o,u)=>u(e,o,r),new Re):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((o,u)=>{let f=z0(r,u,t,s,a);return u.nodeType===e.ELEMENT_NODE&&(f=t.reduce((m,g)=>g(u,m,r),f),f=(a.get(u)||[]).reduce((m,g)=>g(u,m,r),f)),o.concat(f)},new Re):new Re}function kp(r){return(e,t,s)=>yo(t,r,!0,s)}function FM(r,e,t){const s=Ci.keys(r),a=ni.keys(r),o=Nl.keys(r),u={};return s.concat(a).concat(o).forEach(f=>{let m=t.query(f,Oe.ATTRIBUTE);m!=null&&(u[m.attrName]=m.value(r),u[m.attrName])||(m=BM[f],m!=null&&(m.attrName===f||m.keyName===f)&&(u[m.attrName]=m.value(r)||void 0),m=$E[f],m!=null&&(m.attrName===f||m.keyName===f)&&(m=$E[f],u[m.attrName]=m.value(r)||void 0))}),Object.entries(u).reduce((f,m)=>{let[g,v]=m;return yo(f,g,v,t)},e)}function GM(r,e,t){const s=t.query(r);if(s==null)return e;if(s.prototype instanceof is){const a={},o=s.value(r);if(o!=null)return a[s.blotName]=o,new Re().insert(a,s.formats(r,t))}else if(s.prototype instanceof eh&&!bh(e,`
`)&&e.insert(`
`),"blotName"in s&&"formats"in s&&typeof s.formats=="function")return yo(e,s.blotName,s.formats(r,t),t);return e}function $M(r,e){return bh(e,`
`)||e.insert(`
`),e}function KM(r,e,t){const s=t.query("code-block"),a=s&&"formats"in s&&typeof s.formats=="function"?s.formats(r,t):!0;return yo(e,"code-block",a,t)}function QM(){return new Re}function YM(r,e,t){const s=t.query(r);if(s==null||s.blotName!=="list"||!bh(e,`
`))return e;let a=-1,o=r.parentNode;for(;o!=null;)["OL","UL"].includes(o.tagName)&&(a+=1),o=o.parentNode;return a<=0?e:e.reduce((u,f)=>f.insert?f.attributes&&typeof f.attributes.indent=="number"?u.push(f):u.insert(f.insert,{indent:a,...f.attributes||{}}):u,new Re)}function XM(r,e,t){const s=r;let a=s.tagName==="OL"?"ordered":"bullet";const o=s.getAttribute("data-checked");return o&&(a=o==="true"?"checked":"unchecked"),yo(e,"list",a,t)}function KE(r,e,t){if(!bh(e,`
`)){if(al(r,t)&&(r.childNodes.length>0||r instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&r.nextSibling){let s=r.nextSibling;for(;s!=null;){if(al(s,t))return e.insert(`
`);const a=t.query(s);if(a&&a.prototype instanceof Cs)return e.insert(`
`);s=s.firstChild}}}return e}function ZM(r,e,t){const s={},a=r.style||{};return a.fontStyle==="italic"&&(s.italic=!0),a.textDecoration==="underline"&&(s.underline=!0),a.textDecoration==="line-through"&&(s.strike=!0),(a.fontWeight?.startsWith("bold")||parseInt(a.fontWeight,10)>=700)&&(s.bold=!0),e=Object.entries(s).reduce((o,u)=>{let[f,m]=u;return yo(o,f,m,t)},e),parseFloat(a.textIndent||0)>0?new Re().insert("	").concat(e):e}function WM(r,e,t){const s=r.parentElement?.tagName==="TABLE"?r.parentElement:r.parentElement?.parentElement;if(s!=null){const o=Array.from(s.querySelectorAll("tr")).indexOf(r)+1;return yo(e,"table",o,t)}return e}function JM(r,e,t){let s=r.data;if(r.parentElement?.tagName==="O:P")return e.insert(s.trim());if(!gS(r)){if(s.trim().length===0&&s.includes(`
`)&&!HM(r,t))return e;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(r.previousSibling==null&&r.parentElement!=null&&al(r.parentElement,t)||r.previousSibling instanceof Element&&al(r.previousSibling,t))&&(s=s.replace(/^ /,"")),(r.nextSibling==null&&r.parentElement!=null&&al(r.parentElement,t)||r.nextSibling instanceof Element&&al(r.nextSibling,t))&&(s=s.replace(/ $/,"")),s=s.replaceAll(""," ")}return e.insert(s)}class e9 extends Oi{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,t){super(e,t),this.quill.on(le.events.EDITOR_CHANGE,(s,a,o,u)=>{s===le.events.SELECTION_CHANGE?a&&u!==le.sources.SILENT&&(this.currentRange=a):s===le.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||u===le.sources.USER?this.record(a,o):this.transform(a)),this.currentRange=Ty(this.currentRange,a))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(e,t){if(this.stack[e].length===0)return;const s=this.stack[e].pop();if(!s)return;const a=this.quill.getContents(),o=s.delta.invert(a);this.stack[t].push({delta:o,range:Ty(s.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,le.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,t){if(e.ops.length===0)return;this.stack.redo=[];let s=e.invert(t),a=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const u=this.stack.undo.pop();u&&(s=s.compose(u.delta),a=u.range)}else this.lastRecorded=o;s.length()!==0&&(this.stack.undo.push({delta:s,range:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){QE(this.stack.undo,e),QE(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,le.sources.USER);else{const t=n9(this.quill.scroll,e.delta);this.quill.setSelection(t,le.sources.USER)}}}function QE(r,e){let t=e;for(let s=r.length-1;s>=0;s-=1){const a=r[s];r[s]={delta:t.transform(a.delta,!0),range:a.range&&Ty(a.range,t)},t=a.delta.transform(t),r[s].delta.length()===0&&r.splice(s,1)}}function t9(r,e){const t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(s=>r.query(s,Oe.BLOCK)!=null):!1}function n9(r,e){const t=e.reduce((a,o)=>a+(o.delete||0),0);let s=e.length()-t;return t9(r,e)&&(s-=1),s}function Ty(r,e){if(!r)return r;const t=e.transformPosition(r.index),s=e.transformPosition(r.index+r.length);return{index:t,length:s-t}}class pS extends Oi{constructor(e,t){super(e,t),e.root.addEventListener("drop",s=>{s.preventDefault();let a=null;if(document.caretRangeFromPoint)a=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){const u=document.caretPositionFromPoint(s.clientX,s.clientY);a=document.createRange(),a.setStart(u.offsetNode,u.offset),a.setEnd(u.offsetNode,u.offset)}const o=a&&e.selection.normalizeNative(a);if(o){const u=e.selection.normalizedToRange(o);s.dataTransfer?.files&&this.upload(u,s.dataTransfer.files)}})}upload(e,t){const s=[];Array.from(t).forEach(a=>{a&&this.options.mimetypes?.includes(a.type)&&s.push(a)}),s.length>0&&this.options.handler.call(this,e,s)}}pS.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(r,e){if(!this.quill.scroll.query("image"))return;const t=e.map(s=>new Promise(a=>{const o=new FileReader;o.onload=()=>{a(o.result)},o.readAsDataURL(s)}));Promise.all(t).then(s=>{const a=s.reduce((o,u)=>o.insert({image:u}),new Re().retain(r.index).delete(r.length));this.quill.updateContents(a,Ne.sources.USER),this.quill.setSelection(r.index+s.length,Ne.sources.SILENT)})}};const r9=["insertText","insertReplacementText"];class s9 extends Oi{constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",s=>{this.handleBeforeInput(s)}),/Android/i.test(navigator.userAgent)||e.on(le.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){B0({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){const s=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Re().retain(e.index).insert(t,s),le.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,le.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!r9.includes(e.inputType))return;const t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;const s=i9(e);if(s==null)return;const a=this.quill.selection.normalizeNative(t),o=a?this.quill.selection.normalizedToRange(a):null;o&&this.replaceText(o,s)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function i9(r){return typeof r.data=="string"?r.data:r.dataTransfer?.types.includes("text/plain")?r.dataTransfer.getData("text/plain"):null}const a9=/Mac/i.test(navigator.platform),l9=100,o9=r=>!!(r.key==="ArrowLeft"||r.key==="ArrowRight"||r.key==="ArrowUp"||r.key==="ArrowDown"||r.key==="Home"||a9&&r.key==="a"&&r.ctrlKey===!0);class c9 extends Oi{isListening=!1;selectionChangeDeadline=0;constructor(e,t){super(e,t),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,t){let{line:s,event:a}=t;if(!(s instanceof Xs)||!s.uiNode)return!0;const o=getComputedStyle(s.domNode).direction==="rtl";return o&&a.key!=="ArrowRight"||!o&&a.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(a.shiftKey?1:0),le.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&o9(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+l9,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const t=e.getRangeAt(0);if(t.collapsed!==!0||t.startOffset!==0)return;const s=this.quill.scroll.find(t.startContainer);if(!(s instanceof Xs)||!s.uiNode)return;const a=document.createRange();a.setStartAfter(s.uiNode),a.setEndAfter(s.uiNode),e.removeAllRanges(),e.addRange(a)}}le.register({"blots/block":Yn,"blots/block/embed":Cs,"blots/break":ri,"blots/container":go,"blots/cursor":Ks,"blots/embed":k0,"blots/inline":vr,"blots/scroll":pM,"blots/text":ei,"modules/clipboard":zM,"modules/history":e9,"modules/keyboard":im,"modules/uploader":pS,"modules/input":s9,"modules/uiNode":c9});class u9 extends ni{add(e,t){let s=0;if(t==="+1"||t==="-1"){const a=this.value(e)||0;s=t==="+1"?a+1:a-1}else typeof t=="number"&&(s=t);return s===0?(this.remove(e),!0):super.add(e,s.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}}const h9=new u9("indent","ql-indent",{scope:Oe.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class f9 extends Yn{static blotName="blockquote";static tagName="blockquote"}class d9 extends Yn{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class _h extends go{}_h.blotName="list-container";_h.tagName="OL";class xh extends Yn{static create(e){const t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){le.register(_h)}constructor(e,t){super(e,t);const s=t.ownerDocument.createElement("span"),a=o=>{if(!e.isEnabled())return;const u=this.statics.formats(t,e);u==="checked"?(this.format("list","unchecked"),o.preventDefault()):u==="unchecked"&&(this.format("list","checked"),o.preventDefault())};s.addEventListener("mousedown",a),s.addEventListener("touchstart",a),this.attachUI(s)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}}xh.blotName="list";xh.tagName="LI";_h.allowedChildren=[xh];xh.requiredContainer=_h;class H0 extends vr{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class m9 extends H0{static blotName="italic";static tagName=["EM","I"]}class Nd extends vr{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return yS(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}}function yS(r,e){const t=document.createElement("a");t.href=r;const s=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(s)>-1}class g9 extends vr{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class p9 extends H0{static blotName="strike";static tagName=["S","STRIKE"]}class y9 extends vr{static blotName="underline";static tagName="U"}class v9 extends k0{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const YE=["alt","height","width"];let b9=class extends is{static blotName="image";static tagName="IMG";static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return YE.reduce((t,s)=>(e.hasAttribute(s)&&(t[s]=e.getAttribute(s)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return yS(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){YE.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}};const XE=["height","width"];class _9 extends Cs{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return XE.reduce((t,s)=>(e.hasAttribute(s)&&(t[s]=e.getAttribute(s)),t),{})}static sanitize(e){return Nd.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){XE.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const Ou=new ni("code-token","hljs",{scope:Oe.INLINE});class va extends vr{static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(br.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,s){super(e,t,s),Ou.add(this.domNode,s)}format(e,t){e!==va.blotName?super.format(e,t):t?Ou.add(this.domNode,t):(Ou.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Ou.value(this.domNode)||this.unwrap()}}va.blotName="code-token";va.className="ql-token";class As extends br{static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),va.blotName,!1),super.replaceWith(e,t)}}class Pu extends po{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===As.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(e,t)}))}formatAt(e,t,s,a){s===As.blotName&&(this.forceNext=!0),super.formatAt(e,t,s,a)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const a=`${Array.from(this.domNode.childNodes).filter(u=>u!==this.uiNode).map(u=>u.textContent).join(`
`)}
`,o=As.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==a){if(a.trim().length>0||this.cachedText==null){const u=this.children.reduce((m,g)=>m.concat(nS(g,!1)),new Re),f=e(a,o);u.diff(f).reduce((m,g)=>{let{retain:v,attributes:x}=g;return v?(x&&Object.keys(x).forEach(T=>{[As.blotName,va.blotName].includes(T)&&this.formatAt(m,v,T,x[T])}),m+v):m},0)}this.cachedText=a,this.forceNext=!1}}html(e,t){const[s]=this.children.find(e);return`<pre data-language="${s?As.formats(s.domNode):"plain"}">
${sm(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const t=As.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}Pu.allowedChildren=[As];As.requiredContainer=Pu;As.allowedChildren=[va,Ks,ei,ri];const x9=(r,e,t)=>{if(typeof r.versionString=="string"){const s=r.versionString.split(".")[0];if(parseInt(s,10)>=11)return r.highlight(t,{language:e}).value}return r.highlight(e,t).value};class vS extends Oi{static register(){le.register(va,!0),le.register(As,!0),le.register(Pu,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((s,a)=>{let{key:o}=a;return s[o]=!0,s},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(le.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof Pu))return;const t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(s=>{let{key:a,label:o}=s;const u=t.ownerDocument.createElement("option");u.textContent=o,u.setAttribute("value",a),t.appendChild(u)}),t.addEventListener("change",()=>{e.format(As.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=As.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(le.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(le.sources.USER);const s=this.quill.getSelection();(e==null?this.quill.scroll.descendants(Pu):[e]).forEach(o=>{o.highlight(this.highlightBlot,t)}),this.quill.update(le.sources.SILENT),s!=null&&this.quill.setSelection(s,le.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return sm(e).split(`
`).reduce((a,o,u)=>(u!==0&&a.insert(`
`,{[br.blotName]:t}),a.insert(o)),new Re);const s=this.quill.root.ownerDocument.createElement("div");return s.classList.add(br.className),s.innerHTML=x9(this.options.hljs,t,e),z0(this.quill.scroll,s,[(a,o)=>{const u=Ou.value(a);return u?o.compose(new Re().retain(o.length(),{[va.blotName]:u})):o}],[(a,o)=>a.data.split(`
`).reduce((u,f,m)=>(m!==0&&u.insert(`
`,{[br.blotName]:t}),u.insert(f)),o)],new WeakMap)}}vS.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Qs extends Yn{static blotName="table";static tagName="TD";static create(e){const t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",F0()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===Qs.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class ao extends go{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),t=this.children.tail.formats(),s=this.next.children.head.formats(),a=this.next.children.tail.formats();return e.table===t.table&&e.table===s.table&&e.table===a.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;const s=t.formats(),a=t.next.formats();if(s.table!==a.table){const o=this.splitAfter(t);o&&o.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class fl extends go{static blotName="table-body";static tagName="TBODY"}class Cd extends go{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(ao),t=e.reduce((s,a)=>Math.max(a.children.length,s),0);e.forEach(s=>{new Array(t-s.children.length).fill(0).forEach(()=>{let a;s.children.head!=null&&(a=Qs.formats(s.children.head.domNode));const o=this.scroll.create(Qs.blotName,a);s.appendChild(o),o.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){const[t]=this.descendant(fl);t==null||t.children.head==null||t.children.forEach(s=>{const a=s.children.at(e);a?.remove()})}insertColumn(e){const[t]=this.descendant(fl);t==null||t.children.head==null||t.children.forEach(s=>{const a=s.children.at(e),o=Qs.formats(s.children.head.domNode),u=this.scroll.create(Qs.blotName,o);s.insertBefore(u,a)})}insertRow(e){const[t]=this.descendant(fl);if(t==null||t.children.head==null)return;const s=F0(),a=this.scroll.create(ao.blotName);t.children.head.children.forEach(()=>{const u=this.scroll.create(Qs.blotName,s);a.appendChild(u)});const o=t.children.at(e);t.insertBefore(a,o)}rows(){const e=this.children.head;return e==null?[]:e.children.map(t=>t)}}Cd.allowedChildren=[fl];fl.requiredContainer=Cd;fl.allowedChildren=[ao];ao.requiredContainer=fl;ao.allowedChildren=[Qs];Qs.requiredContainer=ao;function F0(){return`row-${Math.random().toString(36).slice(2,6)}`}class E9 extends Oi{static register(){le.register(Qs),le.register(ao),le.register(fl),le.register(Cd)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Cd).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(le.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(le.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const t=e.offset();e.remove(),this.quill.update(le.sources.USER),this.quill.setSelection(t,le.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[t,s]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==Qs.blotName)return[null,null,null,-1];const a=t.parent;return[a.parent.parent,a,t,s]}insertColumn(e){const t=this.quill.getSelection();if(!t)return;const[s,a,o]=this.getTable(t);if(o==null)return;const u=o.cellOffset();s.insertColumn(u+e),this.quill.update(le.sources.USER);let f=a.rowOffset();e===0&&(f+=1),this.quill.setSelection(t.index+f,t.length,le.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const t=this.quill.getSelection();if(!t)return;const[s,a,o]=this.getTable(t);if(o==null)return;const u=a.rowOffset();s.insertRow(u+e),this.quill.update(le.sources.USER),e>0?this.quill.setSelection(t,le.sources.SILENT):this.quill.setSelection(t.index+a.children.length,t.length,le.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){const s=this.quill.getSelection();if(s==null)return;const a=new Array(e).fill(0).reduce(o=>{const u=new Array(t).fill(`
`).join("");return o.insert(u,{table:F0()})},new Re().retain(s.index));this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(s.index,le.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(le.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(le.events.TEXT_CHANGE,(s,a,o)=>{o===le.sources.USER&&this.balanceTables()}),!0):!1)})}}const ZE=Ea("quill:toolbar");class G0 extends Oi{constructor(e,t){if(super(e,t),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),T9(s,this.options.container),e.container?.parentNode?.insertBefore(s,e.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){ZE.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{const a=this.options.handlers?.[s];a&&this.addHandler(s,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(le.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(a=>a.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){ZE.warn("ignoring attaching to nonexistent format",t,e);return}const s=e.tagName==="SELECT"?"change":"click";e.addEventListener(s,a=>{let o;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const f=e.options[e.selectedIndex];f.hasAttribute("selected")?o=!1:o=f.value||!1}else e.classList.contains("ql-active")?o=!1:o=e.value||!e.hasAttribute("value"),a.preventDefault();this.quill.focus();const[u]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,o);else if(this.quill.scroll.query(t).prototype instanceof is){if(o=prompt(`Enter ${t}`),!o)return;this.quill.updateContents(new Re().retain(u.index).delete(u.length).insert({[t]:o}),le.sources.USER)}else this.quill.format(t,o,le.sources.USER);this.update(u)}),this.controls.push([t,e])}update(e){const t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(s=>{const[a,o]=s;if(o.tagName==="SELECT"){let u=null;if(e==null)u=null;else if(t[a]==null)u=o.querySelector("option[selected]");else if(!Array.isArray(t[a])){let f=t[a];typeof f=="string"&&(f=f.replace(/"/g,'\\"')),u=o.querySelector(`option[value="${f}"]`)}u==null?(o.value="",o.selectedIndex=-1):u.selected=!0}else if(e==null)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){const u=t[a],f=u===o.getAttribute("value")||u!=null&&u.toString()===o.getAttribute("value")||u==null&&!o.getAttribute("value");o.classList.toggle("ql-active",f),o.setAttribute("aria-pressed",f.toString())}else{const u=t[a]!=null;o.classList.toggle("ql-active",u),o.setAttribute("aria-pressed",u.toString())}})}}G0.DEFAULTS={};function WE(r,e,t){const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${e}`),s.setAttribute("aria-pressed","false"),t!=null?(s.value=t,s.setAttribute("aria-label",`${e}: ${t}`)):s.setAttribute("aria-label",e),r.appendChild(s)}function T9(r,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{const s=document.createElement("span");s.classList.add("ql-formats"),t.forEach(a=>{if(typeof a=="string")WE(s,a);else{const o=Object.keys(a)[0],u=a[o];Array.isArray(u)?w9(s,o,u):WE(s,o,u)}}),r.appendChild(s)})}function w9(r,e,t){const s=document.createElement("select");s.classList.add(`ql-${e}`),t.forEach(a=>{const o=document.createElement("option");a!==!1?o.setAttribute("value",String(a)):o.setAttribute("selected","selected"),s.appendChild(o)}),r.appendChild(s)}G0.DEFAULTS={container:null,handlers:{clean(){const r=this.quill.getSelection();if(r!=null)if(r.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,Oe.INLINE)!=null&&this.quill.format(t,!1,le.sources.USER)})}else this.quill.removeFormat(r.index,r.length,le.sources.USER)},direction(r){const{align:e}=this.quill.getFormat();r==="rtl"&&e==null?this.quill.format("align","right",le.sources.USER):!r&&e==="right"&&this.quill.format("align",!1,le.sources.USER),this.quill.format("direction",r,le.sources.USER)},indent(r){const e=this.quill.getSelection(),t=this.quill.getFormat(e),s=parseInt(t.indent||0,10);if(r==="+1"||r==="-1"){let a=r==="+1"?1:-1;t.direction==="rtl"&&(a*=-1),this.quill.format("indent",s+a,le.sources.USER)}},link(r){r===!0&&(r=prompt("Enter link URL:")),this.quill.format("link",r,le.sources.USER)},list(r){const e=this.quill.getSelection(),t=this.quill.getFormat(e);r==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,le.sources.USER):this.quill.format("list","unchecked",le.sources.USER):this.quill.format("list",r,le.sources.USER)}}};const A9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',S9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',N9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',C9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',R9='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',I9='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',O9='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',D9='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',JE='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',j9='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',L9='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',k9='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',M9='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',V9='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',P9='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',U9='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',q9='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',B9='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',z9='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',H9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',F9='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',G9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',$9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',K9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',Q9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',Y9='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',X9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Z9='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',W9='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',J9='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',e8='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',t8='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',n8='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',nh={align:{"":A9,center:S9,right:N9,justify:C9},background:R9,blockquote:I9,bold:O9,clean:D9,code:JE,"code-block":JE,color:j9,direction:{"":L9,rtl:k9},formula:M9,header:{1:V9,2:P9,3:U9,4:q9,5:B9,6:z9},italic:H9,image:F9,indent:{"+1":G9,"-1":$9},link:K9,list:{bullet:Q9,check:Y9,ordered:X9},script:{sub:Z9,super:W9},strike:J9,table:e8,underline:t8,video:n8},r8='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let eT=0;function tT(r,e){r.setAttribute(e,`${r.getAttribute(e)!=="true"}`)}class am{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),tT(this.label,"aria-expanded"),tT(this.options,"aria-hidden")}buildItem(e){const t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");const s=e.getAttribute("value");return s&&t.setAttribute("data-value",s),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",a=>{switch(a.key){case"Enter":this.selectItem(t,!0),a.preventDefault();break;case"Escape":this.escape(),a.preventDefault();break}}),t}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=r8,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${eT}`,eT+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{const s=this.buildItem(t);e.appendChild(s),t.selected===!0&&this.selectItem(s)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const s=this.container.querySelector(".ql-selected");e!==s&&(s?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const s=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(s)}else this.selectItem(null);const t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}}class bS extends am{constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(s=>{s.classList.add("ql-primary")})}buildItem(e){const t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);const s=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";s&&(s.tagName==="line"?s.style.stroke=a:s.style.fill=a)}}class _S extends am{constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(s=>{s.innerHTML=t[s.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);const s=e||this.defaultItem;if(s!=null){if(this.label.innerHTML===s.innerHTML)return;this.label.innerHTML=s.innerHTML}}}const s8=r=>{const{overflowY:e}=getComputedStyle(r,null);return e!=="visible"&&e!=="clip"};class xS{constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,s8(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const t=e.left+e.width/2-this.root.offsetWidth/2,s=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");const a=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect();let u=0;if(o.right>a.right&&(u=a.right-o.right,this.root.style.left=`${t+u}px`),o.left<a.left&&(u=a.left-o.left,this.root.style.left=`${t+u}px`),o.bottom>a.bottom){const f=o.bottom-o.top,m=e.bottom-e.top+f;this.root.style.top=`${s-m}px`,this.root.classList.add("ql-flip")}return u}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const i8=[!1,"center","right","justify"],a8=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],l8=[!1,"serif","monospace"],o8=["1","2","3",!1],c8=["small",!1,"large","huge"];class Eh extends Lc{constructor(e,t){super(e,t);const s=a=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",s);return}this.tooltip!=null&&!this.tooltip.root.contains(a.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(o=>{o.container.contains(a.target)||o.close()})};e.emitter.listenDOM("click",document.body,s)}addModule(e){const t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(s=>{(s.getAttribute("class")||"").split(/\s+/).forEach(o=>{if(o.startsWith("ql-")&&(o=o.slice(3),t[o]!=null))if(o==="direction")s.innerHTML=t[o][""]+t[o].rtl;else if(typeof t[o]=="string")s.innerHTML=t[o];else{const u=s.value||"";u!=null&&t[o][u]&&(s.innerHTML=t[o][u])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(a=>{if(a.classList.contains("ql-align")&&(a.querySelector("option")==null&&Eu(a,i8),typeof t.align=="object"))return new _S(a,t.align);if(a.classList.contains("ql-background")||a.classList.contains("ql-color")){const o=a.classList.contains("ql-background")?"background":"color";return a.querySelector("option")==null&&Eu(a,a8,o==="background"?"#ffffff":"#000000"),new bS(a,t[o])}return a.querySelector("option")==null&&(a.classList.contains("ql-font")?Eu(a,l8):a.classList.contains("ql-header")?Eu(a,o8):a.classList.contains("ql-size")&&Eu(a,c8)),new am(a)});const s=()=>{this.pickers.forEach(a=>{a.update()})};this.quill.on(Ne.events.EDITOR_CHANGE,s)}}Eh.DEFAULTS=hl({},Lc.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let r=this.container.querySelector("input.ql-image[type=file]");r==null&&(r=document.createElement("input"),r.setAttribute("type","file"),r.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),r.classList.add("ql-image"),r.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,r.files),r.value=""}),this.container.appendChild(r)),r.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class ES extends xS{constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const s=this.quill.getBounds(this.quill.selection.savedRange);s!=null&&this.position(s),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,Ne.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,Ne.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=u8(e);case"formula":{if(!e)break;const t=this.quill.getSelection(!0);if(t!=null){const s=t.index+t.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),e,Ne.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(s+1," ",Ne.sources.USER),this.quill.setSelection(s+2,Ne.sources.USER)}break}}this.textbox.value="",this.hide()}}function u8(r){let e=r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=r.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:r}function Eu(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(s=>{const a=document.createElement("option");s===t?a.setAttribute("selected","selected"):a.setAttribute("value",String(s)),r.appendChild(a)})}const h8=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class f8 extends ES{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,t){super(e,t),this.quill.on(Ne.events.EDITOR_CHANGE,(s,a,o,u)=>{if(s===Ne.events.SELECTION_CHANGE)if(a!=null&&a.length>0&&u===Ne.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const f=this.quill.getLines(a.index,a.length);if(f.length===1){const m=this.quill.getBounds(a);m!=null&&this.position(m)}else{const m=f[f.length-1],g=this.quill.getIndex(m),v=Math.min(m.length()-1,a.index+a.length-g),x=this.quill.getBounds(new io(g,v));x!=null&&this.position(x)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Ne.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){const t=super.position(e),s=this.root.querySelector(".ql-tooltip-arrow");return s.style.marginLeft="",t!==0&&(s.style.marginLeft=`${-1*t-s.offsetWidth/2}px`),t}}class TS extends Eh{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=h8),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new f8(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),nh),this.buildPickers(e.container.querySelectorAll("select"),nh))}}TS.DEFAULTS=hl({},Eh.DEFAULTS,{modules:{toolbar:{handlers:{link(r){r?this.quill.theme.tooltip.edit():this.quill.format("link",!1,le.sources.USER)}}}}});const d8=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class m8 extends ES{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,Ne.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(Ne.events.SELECTION_CHANGE,(e,t,s)=>{if(e!=null){if(e.length===0&&s===Ne.sources.USER){const[a,o]=this.quill.scroll.descendant(Nd,e.index);if(a!=null){this.linkRange=new io(e.index-o,a.length());const u=Nd.formats(a.domNode);this.preview.textContent=u,this.preview.setAttribute("href",u),this.show();const f=this.quill.getBounds(this.linkRange);f!=null&&this.position(f);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class wS extends Eh{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=d8),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),nh),this.buildPickers(e.container.querySelectorAll("select"),nh),this.tooltip=new m8(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,s)=>{e.handlers.link.call(e,!s.format.link)}))}}wS.DEFAULTS=hl({},Eh.DEFAULTS,{modules:{toolbar:{handlers:{link(r){if(r){const e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);const{tooltip:s}=this.quill.theme;s.edit("link",t)}else this.quill.format("link",!1,le.sources.USER)}}}}});le.register({"attributors/attribute/direction":lS,"attributors/class/align":sS,"attributors/class/background":bM,"attributors/class/color":vM,"attributors/class/direction":oS,"attributors/class/font":hS,"attributors/class/size":dS,"attributors/style/align":iS,"attributors/style/background":P0,"attributors/style/color":V0,"attributors/style/direction":cS,"attributors/style/font":fS,"attributors/style/size":mS},!0);le.register({"formats/align":sS,"formats/direction":oS,"formats/indent":h9,"formats/background":P0,"formats/color":V0,"formats/font":hS,"formats/size":dS,"formats/blockquote":f9,"formats/code-block":br,"formats/header":d9,"formats/list":xh,"formats/bold":H0,"formats/code":U0,"formats/italic":m9,"formats/link":Nd,"formats/script":g9,"formats/strike":p9,"formats/underline":y9,"formats/formula":v9,"formats/image":b9,"formats/video":_9,"modules/syntax":vS,"modules/table":E9,"modules/toolbar":G0,"themes/bubble":TS,"themes/snow":wS,"ui/icons":nh,"ui/picker":am,"ui/icon-picker":_S,"ui/color-picker":bS,"ui/tooltip":xS},!0);class vo extends vi.Component{constructor(e){super(e),this.editingAreaRef=U.createRef(),this.containerRef=U.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(s,a,o,u)=>{s==="text-change"?this.onEditorChangeText?.(this.editor.root.innerHTML,a,u,this.unprivilegedEditor):s==="selection-change"&&this.onEditorChangeSelection?.(a,u,this.unprivilegedEditor)};const t=this.isControlled()?e.value:e.defaultValue;this.value=t??""}validateProps(e){if(vi.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(vi.Children.count(e.children)&&vi.Children.only(e.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,t){if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){const s=this.getEditorContents(),a=e.value??"";this.isEqualValue(a,s)||this.setEditorContents(this.editor,a)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(s=>!rl(e[s],this.props[s]))}shouldComponentRegenerate(e){return this.dirtyProps.some(t=>!rl(e[t],this.props[t]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,t){if(this.editor&&this.shouldComponentRegenerate(e)){const s=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){const{delta:s,selection:a}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const o=this.editor;o.setContents(s),nT(()=>this.setEditorSelection(o,a))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const e=this.props.modules?.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const s=this.containerRef.current?.querySelector(".ql-toolbar");s&&s.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,t){const s=new le(e,t);return t.tabIndex!=null&&this.setEditorTabIndex(s,t.tabIndex),this.hookEditor(s),s}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,t){return this.isDelta(e)&&this.isDelta(t)?rl(e.ops,t.ops):rl(e,t)}setEditorContents(e,t){this.value=t;const s=this.getEditorSelection();typeof t=="string"?e.setContents(e.clipboard.convert({html:t})):e.setContents(t),nT(()=>this.setEditorSelection(e,s))}setEditorSelection(e,t){if(this.selection=t,t){const s=e.getLength();t.index=Math.max(0,Math.min(t.index,s-1)),t.length=Math.max(0,Math.min(t.length,s-1-t.index)),e.setSelection(t)}}setEditorTabIndex(e,t){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=t)}setEditorReadOnly(e,t){t?e.disable():e.enable()}makeUnprivilegedEditor(e){const t=e;return{getHTML:()=>t.root.innerHTML,getSemanticHTML:t.getSemanticHTML.bind(t),getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:t}=this.props,{generation:s}=this.state,a={key:s,ref:this.editingAreaRef};return vi.Children.count(e)?vi.cloneElement(vi.Children.only(e),a):t?vi.createElement("pre",{...a}):vi.createElement("div",{...a})}render(){return vi.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,t,s,a){if(!this.editor)return;const o=this.isDelta(this.value)?a.getContents():a.getHTML();o!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=o,this.props.onChange?.(e,t,s,a))}onEditorChangeSelection(e,t,s){if(!this.editor)return;const a=this.getEditorSelection(),o=!a&&e,u=a&&!e;rl(e,a)||(this.selection=e,this.props.onChangeSelection?.(e,t,s),o?this.props.onFocus?.(e,t,s):u&&this.props.onBlur?.(a,t,s))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}vo.displayName="React Quill";vo.Quill=le;vo.defaultProps={theme:"snow",modules:{},readOnly:!1};function nT(r){Promise.resolve().then(r)}const g8={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},p8=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],y8=()=>{const[r,e]=U.useState([]),[t,s]=U.useState(!0),[a,o]=U.useState(!1),[u,f]=U.useState(null),[m,g]=U.useState({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""});U.useEffect(()=>{v()},[]);const v=async()=>{s(!0);try{const C=ti(St(Ve,"news"),_a("timestamp","desc")),I=(await Cn(C)).docs.map(H=>({id:H.id,...H.data()}));e(I)}catch(C){console.error("Error fetching news:",C)}finally{s(!1)}},x=async C=>{if(window.confirm("Are you sure you want to delete this news item?"))try{await dh(yt(Ve,"news",C)),v()}catch(j){console.error("Error deleting news:",j),alert("Failed to delete news item.")}},T=async C=>{C.preventDefault();try{const j=m.affectedCurrencies.split(",").map(I=>I.trim().toUpperCase()).filter(I=>I);u?await fh(yt(Ve,"news",u),{title:m.title,impact:m.impact,content:m.content,image:m.image,affectedCurrencies:j,timestamp:bc()}):await mh(St(Ve,"news"),{title:m.title,impact:m.impact,content:m.content,image:m.image,affectedCurrencies:j,timestamp:bc()}),o(!1),f(null),g({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""}),v()}catch(j){console.error("Error saving news:",j),alert("Failed to save news item.")}},A=C=>{g({title:C.title,impact:C.impact,content:C.content,image:C.image,affectedCurrencies:C.affectedCurrencies?C.affectedCurrencies.join(", "):""}),f(C.id),o(!0)};return p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage News"}),p.jsx(Lt,{onClick:()=>{o(!a),a&&(f(null),g({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""}))},children:a?"Cancel":"Post New Alert"})]}),a&&p.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:[p.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:u?"Edit Market Update":"New Market Update"}),p.jsxs("form",{onSubmit:T,className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),p.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:C=>g({...m,title:C.target.value}),placeholder:"e.g., NFP Beats Expectations"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Impact Level"}),p.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.impact,onChange:C=>g({...m,impact:C.target.value}),children:[p.jsx("option",{value:"Low",children:"Low (Yellow)"}),p.jsx("option",{value:"Medium",children:"Medium (Orange)"}),p.jsx("option",{value:"High",children:"High (Red)"})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Content/Summary"}),p.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:p.jsx(vo,{theme:"snow",value:m.content,onChange:C=>g({...m,content:C}),modules:g8,formats:p8,className:"h-96 mb-12"})})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Image URL (Optional)"}),p.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.image,onChange:C=>g({...m,image:C.target.value}),placeholder:"https://..."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Affected Currencies (comma separated)"}),p.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.affectedCurrencies,onChange:C=>g({...m,affectedCurrencies:C.target.value}),placeholder:"USD, EUR, JPY"})]})]}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsx(Lt,{type:"submit",variant:"primary",children:u?"Update News":"Publish News"})})]})]}),p.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-800",children:[p.jsx("thead",{className:"bg-gray-900/50",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Title"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Impact"}),p.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-800",children:t?p.jsx("tr",{children:p.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-400",children:"Loading data..."})}):r.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-400",children:"No news posted yet."})}):r.map(C=>p.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.timestamp?.seconds?new Date(C.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-medium",children:C.title}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${C.impact==="High"?"bg-red-500/20 text-red-400":C.impact==="Medium"?"bg-orange-500/20 text-orange-400":"bg-green-500/20 text-green-400"}`,children:C.impact})}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[p.jsx("button",{onClick:()=>A(C),className:"text-primary hover:text-primary/80 transition-colors mr-4",children:"Edit"}),p.jsx("button",{onClick:()=>x(C.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Delete"})]})]},C.id))})]})})})]})},v8={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},b8=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],_8=()=>{const[r,e]=U.useState([]),[t,s]=U.useState(!0),[a,o]=U.useState(!1),[u,f]=U.useState(null),[m,g]=U.useState({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}),[v,x]=U.useState({});U.useEffect(()=>{T();const I=yh(zt,async H=>{if(H)try{const $=yt(Ve,"users",H.uid),Z=await ss($);Z.exists()&&x(Z.data())}catch($){console.error("Error fetching profile:",$)}});return()=>I()},[]);const T=async()=>{s(!0);try{const I=ti(St(Ve,"analysis"),_a("timestamp","desc")),$=(await Cn(I)).docs.map(Z=>({id:Z.id,...Z.data()}));e($)}catch(I){console.error("Error fetching analysis:",I)}finally{s(!1)}},A=async I=>{if(window.confirm("Are you sure you want to delete this analysis?"))try{await dh(yt(Ve,"analysis",I)),T()}catch(H){console.error("Error deleting post:",H),alert("Failed to delete post.")}},C=async I=>{I.preventDefault();const H={...m,...v,timestamp:bc()};try{u?await fh(yt(Ve,"analysis",u),H):await mh(St(Ve,"analysis"),H),o(!1),f(null),g({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}),T()}catch($){console.error("Error saving post:",$),alert("Failed to save analysis.")}},j=I=>{g({title:I.title,pair:I.pair,direction:I.direction,content:I.content,image:I.image,analysisType:I.analysisType||"Technical Analysis"}),f(I.id),o(!0)};return p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage Analysis"}),p.jsx(Lt,{onClick:()=>{o(!a),a&&(f(null),g({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}))},children:a?"Cancel":"New Analysis"})]}),a&&p.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:[p.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:u?"Edit Analysis":"Post Technical Breakdown"}),p.jsxs("form",{onSubmit:C,className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Pair / Asset"}),p.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none uppercase",value:m.pair,onChange:I=>g({...m,pair:I.target.value}),placeholder:"e.g. GBP/JPY"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Direction"}),p.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.direction,onChange:I=>g({...m,direction:I.target.value}),children:[p.jsx("option",{value:"Neutral",children:"Neutral (Gray)"}),p.jsx("option",{value:"Bullish",children:"Bullish (Green)"}),p.jsx("option",{value:"Bearish",children:"Bearish (Red)"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analysis Type"}),p.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.analysisType,onChange:I=>g({...m,analysisType:I.target.value}),children:[p.jsx("option",{value:"Technical Analysis",children:"Technical Analysis"}),p.jsx("option",{value:"Fundamental Analysis",children:"Fundamental Analysis"}),p.jsx("option",{value:"Sentiment Analysis",children:"Sentiment Analysis"})]})]})]}),p.jsx("div",{className:"grid grid-cols-1 gap-4",children:p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Image URL (Chart)"}),p.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.image,onChange:I=>g({...m,image:I.target.value}),placeholder:"https://..."})]})}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),p.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:I=>g({...m,title:I.target.value}),placeholder:"e.g. Double Top formation on 4H"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analysis Content"}),p.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:p.jsx(vo,{theme:"snow",value:m.content,onChange:I=>g({...m,content:I}),modules:v8,formats:b8,className:"h-96 mb-12"})})]}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsx(Lt,{type:"submit",variant:"primary",children:u?"Update Analysis":"Post Analysis"})})]})]}),p.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-800",children:[p.jsx("thead",{className:"bg-gray-900/50",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Pair"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Direction"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Title"}),p.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-800",children:t?p.jsx("tr",{children:p.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-400",children:"Loading data..."})}):r.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-400",children:"No analysis posted yet."})}):r.map(I=>p.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.timestamp?.seconds?new Date(I.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-bold",children:I.pair}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${I.direction==="Bullish"?"bg-green-500/20 text-green-400":I.direction==="Bearish"?"bg-red-500/20 text-red-400":"bg-gray-700 text-gray-300"}`,children:I.direction})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white max-w-xs truncate",children:I.title}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[p.jsx("button",{onClick:()=>j(I),className:"text-primary hover:text-primary/80 transition-colors mr-4",children:"Edit"}),p.jsx("button",{onClick:()=>A(I.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Delete"})]})]},I.id))})]})})})]})},AS={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},SS=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],x8=()=>{const[r,e]=U.useState([]),[t,s]=U.useState(!1),[a,o]=U.useState({name:"",description:"",image:""}),[u,f]=U.useState(null),[m,g]=U.useState(!0);U.useEffect(()=>{v()},[]);const v=async()=>{g(!0);try{const A=await Cn(St(Ve,"paths"));e(A.docs.map(C=>({id:C.id,...C.data()})))}catch(A){console.error("Error fetching paths:",A)}finally{g(!1)}},x=async A=>{A.preventDefault();try{u?await fh(yt(Ve,"paths",u),a):await mh(St(Ve,"paths"),{...a,createdAt:bc()}),s(!1),f(null),o({name:"",description:"",image:""}),v()}catch(C){console.error("Error saving path:",C),alert("Failed to save path")}},T=async A=>{if(window.confirm("Delete this path?"))try{await dh(yt(Ve,"paths",A)),v()}catch(C){console.error("Error deleting path:",C)}};return p.jsxs("div",{className:"animate-fade-in",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-white",children:"Academy Paths"}),p.jsx(Lt,{onClick:()=>{s(!t),t&&(f(null),o({name:"",description:"",image:""}))},children:t?"Cancel":"New Path"})]}),t&&p.jsx("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8",children:p.jsxs("form",{onSubmit:x,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Path Name"}),p.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.name,onChange:A=>o({...a,name:A.target.value}),placeholder:"e.g. Technical Analysis"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),p.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-24",value:a.description,onChange:A=>o({...a,description:A.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Cover Image URL"}),p.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.image,onChange:A=>o({...a,image:A.target.value})})]}),p.jsx("div",{className:"flex justify-end",children:p.jsx(Lt,{type:"submit",variant:"primary",children:u?"Update Path":"Create Path"})})]})}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(A=>p.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden group",children:[p.jsxs("div",{className:"h-40 bg-gray-900 relative",children:[A.image&&p.jsx("img",{src:A.image,alt:A.name,className:"w-full h-full object-cover"}),p.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx("button",{onClick:()=>{o(A),f(A.id),s(!0)},className:"bg-primary/80 p-1 rounded text-white hover:bg-primary",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),p.jsx("button",{onClick:()=>T(A.id),className:"bg-red-500/80 p-1 rounded text-white hover:bg-red-600",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"font-bold text-white text-lg",children:A.name}),p.jsx("p",{className:"text-gray-400 text-sm mt-1 line-clamp-2",children:A.description})]})]},A.id))})]})},E8=()=>{const[r,e]=U.useState("paths"),[t,s]=U.useState([]),[a,o]=U.useState([]),[u,f]=U.useState(null),[m,g]=U.useState(!0),[v,x]=U.useState(!1),[T,A]=U.useState(null),[C,j]=U.useState({title:"",path:"",description:"",image:"",level:"Beginner",instructorName:"Forex Volcano",instructorBio:"",instructorImage:""});U.useEffect(()=>{I()},[]);const I=async()=>{g(!0);try{const de=(await Cn(St(Ve,"paths"))).docs.map(L=>L.data().name);o(de);const xe=ti(St(Ve,"courses"),_a("order","asc")),M=await Cn(xe);s(M.docs.map(L=>({id:L.id,...L.data()})))}catch(te){console.error("Error fetching data:",te)}finally{g(!1)}},H=async te=>{te.preventDefault();try{T?await fh(yt(Ve,"courses",T),C):await mh(St(Ve,"courses"),{...C,order:t.length+1,createdAt:bc()}),x(!1),A(null),j({title:"",path:"",description:"",image:"",level:"Beginner",instructorName:"Forex Volcano",instructorBio:"",instructorImage:""}),I()}catch(de){console.error("Error saving course:",de),alert("Failed to save course")}},$=te=>{j({title:te.title,description:te.description,path:te.path||"",image:te.image,level:te.level||"Beginner",instructorName:te.instructorName||"Forex Volcano",instructorBio:te.instructorBio||"",instructorImage:te.instructorImage||""}),A(te.id),x(!0)},Z=async te=>{if(window.confirm("Delete this course? All lessons inside it might become orphaned."))try{await dh(yt(Ve,"courses",te)),I(),u?.id===te&&f(null)}catch(de){console.error("Error deleting course:",de)}};return u?p.jsx(T8,{course:u,onBack:()=>f(null)}):p.jsxs("div",{children:[p.jsxs("div",{className:"flex space-x-6 mb-8 border-b border-gray-800",children:[p.jsx("button",{onClick:()=>e("paths"),className:`pb-4 px-2 font-medium transition-colors ${r==="paths"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"1. Manage Paths"}),p.jsx("button",{onClick:()=>e("courses"),className:`pb-4 px-2 font-medium transition-colors ${r==="courses"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"2. Manage Courses"})]}),r==="paths"?p.jsx(x8,{}):p.jsxs("div",{className:"animate-fade-in",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage Courses"}),p.jsx(Lt,{onClick:()=>{x(!v),v&&A(null)},children:v?"Cancel":"New Course"})]}),v&&p.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8",children:[p.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:T?"Edit Course":"Create New Course"}),p.jsxs("form",{onSubmit:H,className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Course Title"}),p.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.title,onChange:te=>j({...C,title:te.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Path / Category"}),p.jsxs("select",{required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.path,onChange:te=>j({...C,path:te.target.value}),children:[p.jsx("option",{value:"",children:"Select Path..."}),a.map(te=>p.jsx("option",{value:te,children:te},te))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Level"}),p.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.level,onChange:te=>j({...C,level:te.target.value}),children:[p.jsx("option",{children:"Beginner"}),p.jsx("option",{children:"Intermediate"}),p.jsx("option",{children:"Advanced"})]})]})]}),p.jsxs("div",{className:"border-t border-gray-800 pt-4 mt-4",children:[p.jsx("h3",{className:"text-sm font-bold text-primary mb-3",children:"Instructor Details"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Name"}),p.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.instructorName,onChange:te=>j({...C,instructorName:te.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Image URL"}),p.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.instructorImage,onChange:te=>j({...C,instructorImage:te.target.value})})]}),p.jsxs("div",{className:"md:col-span-2",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Bio"}),p.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-20",value:C.instructorBio,onChange:te=>j({...C,instructorBio:te.target.value})})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),p.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:p.jsx(vo,{theme:"snow",value:C.description,onChange:te=>j({...C,description:te}),modules:AS,formats:SS,className:"h-48 mb-12"})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Cover Image URL"}),p.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.image,onChange:te=>j({...C,image:te.target.value})})]}),p.jsx("div",{className:"flex justify-end",children:p.jsx(Lt,{type:"submit",variant:"primary",children:T?"Update Course":"Create Course"})})]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m?p.jsx("div",{className:"text-gray-400",children:"Loading courses..."}):t.map(te=>p.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden group hover:border-gray-600 transition-all",children:[p.jsxs("div",{className:"h-40 bg-gray-900 relative",children:[te.image&&p.jsx("img",{src:te.image,alt:te.title,className:"w-full h-full object-cover"}),p.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[p.jsx("button",{onClick:de=>{de.stopPropagation(),$(te)},className:"bg-primary/80 p-1 rounded text-white hover:bg-primary",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),p.jsx("button",{onClick:de=>{de.stopPropagation(),Z(te.id)},className:"bg-red-500/80 p-1 rounded text-white hover:bg-red-600",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),p.jsxs("div",{className:"p-5",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:te.title}),te.path&&p.jsx("span",{className:"bg-gray-800 text-xs text-gray-300 px-2 py-1 rounded",children:te.path})]}),p.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:te.description}),p.jsx(Lt,{variant:"outline",size:"sm",className:"w-full",onClick:()=>f(te),children:"Manage Lessons"})]})]},te.id))})]})]})},T8=({course:r,onBack:e})=>{const[t,s]=U.useState([]),[a,o]=U.useState(!1),[u,f]=U.useState(null),[m,g]=U.useState({title:"",videoUrl:"",content:"",duration:"10 min"}),[v,x]=U.useState(!0);U.useEffect(()=>{T()},[r]);const T=async()=>{x(!0);try{const I=ti(St(Ve,"courses",r.id,"lessons"),_a("order","asc")),H=await Cn(I);s(H.docs.map($=>({id:$.id,...$.data()})))}catch(I){console.error("Error fetching lessons:",I);const H=await Cn(St(Ve,"courses",r.id,"lessons"));s(H.docs.map($=>({id:$.id,...$.data()})))}finally{x(!1)}},A=async I=>{I.preventDefault();try{u?await fh(yt(Ve,"courses",r.id,"lessons",u),{...m}):await mh(St(Ve,"courses",r.id,"lessons"),{...m,order:t.length+1,createdAt:bc()}),o(!1),f(null),g({title:"",videoUrl:"",content:"",duration:"10 min"}),T()}catch(H){console.error("Error saving lesson:",H),alert("Failed to save lesson")}},C=I=>{g({title:I.title,videoUrl:I.videoUrl,content:I.content,duration:I.duration}),f(I.id),o(!0)},j=async I=>{if(window.confirm("Delete this lesson?"))try{await dh(yt(Ve,"courses",r.id,"lessons",I)),T()}catch(H){console.error("Error deleting lesson:",H)}};return p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[p.jsxs("button",{onClick:e,className:"text-gray-400 hover:text-white flex items-center gap-1",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),p.jsxs("h1",{className:"text-2xl font-bold text-white",children:[p.jsx("span",{className:"text-gray-500 font-normal",children:"Edit Course:"})," ",r.title]})]}),p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("h2",{className:"text-xl font-bold text-white",children:["Lessons (",t.length,")"]}),p.jsx(Lt,{onClick:()=>{o(!a),a&&(f(null),g({title:"",videoUrl:"",content:"",duration:"10 min"}))},variant:"secondary",children:a?"Cancel":"Add Lesson"})]}),a&&p.jsx("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:p.jsxs("form",{onSubmit:A,className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Lesson Title"}),p.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:I=>g({...m,title:I.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Duration"}),p.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.duration,onChange:I=>g({...m,duration:I.target.value}),placeholder:"e.g. 15 min"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Video Embed URL (YouTube/Vimeo)"}),p.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.videoUrl,onChange:I=>g({...m,videoUrl:I.target.value}),placeholder:"https://www.youtube.com/embed/..."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Lesson Content / Notes"}),p.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:p.jsx(vo,{theme:"snow",value:m.content,onChange:I=>g({...m,content:I}),modules:AS,formats:SS,className:"h-72 mb-12"})})]}),p.jsx("div",{className:"flex justify-end",children:p.jsx(Lt,{type:"submit",variant:"primary",children:u?"Update Lesson":"Save Lesson"})})]})}),p.jsxs("div",{className:"space-y-3",children:[v?p.jsx("div",{className:"text-gray-400",children:"Loading lessons..."}):t.map((I,H)=>p.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-gray-800 flex justify-between items-center group hover:border-gray-600",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-800 text-gray-400 font-bold text-sm",children:H+1}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-medium text-white",children:I.title}),p.jsx("div",{className:"text-xs text-gray-500",children:I.duration})]})]}),p.jsxs("div",{className:"flex items-center gap-3 opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx("button",{onClick:()=>C(I),className:"text-primary hover:text-primary/80 text-sm",children:"Edit"}),p.jsx("button",{onClick:()=>j(I.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Delete"})]})]},I.id)),t.length===0&&!v&&p.jsx("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:"No lessons yet. Start teaching!"})]})]})},w8=()=>{const[r,e]=U.useState(!0),[t,s]=U.useState(!1),[a,o]=U.useState(null),[u,f]=U.useState({analystName:"",analystImage:"",analystBio:"",twitter:"",linkedin:"",telegram:""});U.useEffect(()=>{const g=yh(zt,async v=>{if(v){o(v);try{const x=yt(Ve,"users",v.uid),T=await ss(x);if(T.exists()){const A=T.data();f(C=>({...C,analystName:A.analystName||"",analystImage:A.analystImage||"",analystBio:A.analystBio||"",twitter:A.twitter||"",linkedin:A.linkedin||"",telegram:A.telegram||""}))}}catch(x){console.error("Error fetching profile:",x)}}e(!1)});return()=>g()},[]);const m=async g=>{if(g.preventDefault(),!!a){s(!0);try{await vc(yt(Ve,"users",a.uid),u,{merge:!0}),alert("Profile updated successfully!")}catch(v){console.error("Error saving profile:",v),alert("Failed to save profile.")}finally{s(!1)}}};return r?p.jsx("div",{className:"text-white",children:"Loading Profile..."}):p.jsxs("div",{className:"max-w-4xl mx-auto",children:[p.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"Analyst Profile Settings"}),p.jsx("div",{className:"bg-surface p-8 rounded-xl border border-gray-800",children:p.jsxs("form",{onSubmit:m,className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsx("div",{className:"md:col-span-2",children:p.jsx("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-800 pb-2",children:"Personal Details"})}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analyst Name"}),p.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:u.analystName,onChange:g=>f({...u,analystName:g.target.value}),placeholder:"e.g. John Doe"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Profile Image URL"}),p.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:u.analystImage,onChange:g=>f({...u,analystImage:g.target.value}),placeholder:"https://..."})]}),p.jsxs("div",{className:"md:col-span-2",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bio"}),p.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-32 resize-none",value:u.analystBio,onChange:g=>f({...u,analystBio:g.target.value}),placeholder:"Tell us about yourself..."})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pt-6",children:[p.jsx("div",{className:"md:col-span-3",children:p.jsx("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-800 pb-2",children:"Social Connections"})}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Twitter (X) URL"}),p.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:u.twitter,onChange:g=>f({...u,twitter:g.target.value}),placeholder:"https://twitter.com/..."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"LinkedIn URL"}),p.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:u.linkedin,onChange:g=>f({...u,linkedin:g.target.value}),placeholder:"https://linkedin.com/in/..."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Telegram URL"}),p.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:u.telegram,onChange:g=>f({...u,telegram:g.target.value}),placeholder:"https://t.me/..."})]})]}),p.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-800",children:p.jsx(Lt,{type:"submit",variant:"primary",contentClassName:"px-8",children:t?"Saving...":"Save Profile"})})]})})]})},A8=()=>{const{courseId:r}=Ac(),e=Ri(),[t,s]=U.useState(null),[a,o]=U.useState([]),[u,f]=U.useState(null),[m,g]=U.useState(!0),[v,x]=U.useState(!0);return U.useEffect(()=>{(async()=>{try{g(!0);const A=await ss(yt(Ve,"courses",r));if(!A.exists()){alert("Course not found"),e("/dashboard");return}s({id:A.id,...A.data()});const C=ti(St(Ve,"courses",r,"lessons"),_a("order","asc")),j=await Cn(C);let I=[];j.empty?I=(await Cn(St(Ve,"courses",r,"lessons"))).docs.map($=>({id:$.id,...$.data()})):I=j.docs.map(H=>({id:H.id,...H.data()})),o(I),I.length>0&&f(I[0])}catch(A){console.error("Error loading course:",A)}finally{g(!1)}})()},[r,e]),m?p.jsx("div",{className:"p-10 text-center text-white",children:"Loading class..."}):t?p.jsxs("div",{className:"flex h-screen bg-background overflow-hidden animate-fade-in",children:[p.jsxs("div",{className:`${v?"w-80":"w-0"} bg-surface border-r border-gray-800 transition-all duration-300 flex flex-col flex-shrink-0 relative`,children:[p.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center",children:[p.jsx("h2",{className:"font-bold text-white truncate max-w-[200px]",children:t.title}),p.jsx("button",{onClick:()=>x(!1),className:"md:hidden text-gray-400",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a.map((T,A)=>p.jsxs("div",{onClick:()=>f(T),className:`p-4 border-b border-gray-800 cursor-pointer transition-colors hover:bg-gray-800/50 flex items-start gap-3
                   ${u?.id===T.id?"bg-primary/10 border-l-4 border-l-primary":"border-l-4 border-l-transparent"}
                 `,children:[p.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-800 text-gray-400 text-xs flex items-center justify-center mt-0.5",children:A+1}),p.jsxs("div",{children:[p.jsx("h4",{className:`text-sm font-medium ${u?.id===T.id?"text-primary":"text-gray-300"}`,children:T.title}),p.jsx("span",{className:"text-xs text-gray-500",children:T.duration||"10 min"})]})]},T.id)),a.length===0&&p.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No lessons available yet."})]}),p.jsx("div",{className:"p-4 border-t border-gray-800",children:p.jsx(At,{to:"/dashboard",children:p.jsx(Lt,{variant:"outline",size:"sm",className:"w-full",children:"Back to Dashboard"})})})]}),p.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[p.jsx("div",{className:"absolute top-4 left-4 z-10",children:p.jsx("button",{onClick:()=>x(!v),className:"bg-surface/80 p-2 rounded-full text-white hover:bg-surface backdrop-blur border border-gray-700 shadow-lg",children:v?p.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):p.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),u?p.jsxs("div",{className:"flex-1 overflow-y-auto",children:[p.jsx("div",{className:"bg-black aspect-video w-full max-h-[70vh] flex items-center justify-center",children:u.videoUrl?p.jsx("iframe",{src:u.videoUrl,title:u.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):p.jsxs("div",{className:"text-gray-500 text-center",children:[p.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),p.jsx("p",{children:"No video content for this lesson."})]})}),p.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[p.jsx("div",{className:"flex justify-between items-start mb-6",children:p.jsx("h1",{className:"text-2xl font-bold text-white",children:u.title})}),p.jsx("div",{className:"prose prose-invert max-w-none",children:p.jsx("p",{className:"text-gray-300 whitespace-pre-line",children:u.content})})]})]}):p.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"Select a lesson from the sidebar to start."})]})]}):null},S8=()=>{const[r,e]=U.useState([]),[t,s]=U.useState(!0);return U.useEffect(()=>{(async()=>{try{const u=(await Cn(St(Ve,"courses"))).docs.map(m=>m.data()),f={};u.forEach(m=>{const g=m.path||"General";f[g]||(f[g]={name:g,count:0,image:m.image}),f[g].count+=1}),e(Object.values(f))}catch(o){console.error("Error fetching paths:",o)}finally{s(!1)}})()},[]),t?p.jsx("div",{className:"p-10 text-center text-white",children:"Loading Academy..."}):p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 animate-fade-in",children:[p.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"My Academy"}),p.jsx("p",{className:"text-gray-400 mb-10",children:"Choose a learning path to start your journey."}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(a=>p.jsx(At,{to:`/academy/${encodeURIComponent(a.name)}`,className:"group",children:p.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden hover:border-primary transition-all h-full flex flex-col",children:[p.jsxs("div",{className:"h-48 bg-gray-900 relative overflow-hidden",children:[a.image?p.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:p.jsx("svg",{className:"w-12 h-12 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent opacity-80"}),p.jsx("div",{className:"absolute bottom-4 left-4",children:p.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-primary transition-colors",children:a.name})})]}),p.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-between",children:[p.jsxs("p",{className:"text-gray-400",children:[a.count," Course",a.count!==1&&"s"," available"]}),p.jsxs("span",{className:"text-primary mt-4 inline-flex items-center text-sm font-medium",children:["Explore Path ",p.jsx("svg",{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]})]})},a.name))}),r.length===0&&p.jsx("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:p.jsx("p",{className:"text-gray-500",children:"No academy paths available yet."})})]})},N8=()=>{const{path:r}=Ac(),e=decodeURIComponent(r),[t,s]=U.useState([]),[a,o]=U.useState(!0);return U.useEffect(()=>{(async()=>{try{const f=ti(St(Ve,"courses"),_a("order","asc")),v=(await Cn(f)).docs.map(x=>({id:x.id,...x.data()})).filter(x=>(x.path||"General")===e);s(v)}catch(f){console.error("Error loading courses:",f)}finally{o(!1)}})()},[e]),a?p.jsx("div",{className:"p-10 text-center text-white",children:"Loading Path..."}):p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 animate-fade-in",children:[p.jsxs("div",{className:"mb-8",children:[p.jsx(At,{to:"/academy",className:"text-gray-500 hover:text-white mb-4 inline-block",children:" Back to Academy"}),p.jsxs("h1",{className:"text-3xl font-bold text-white",children:[p.jsx("span",{className:"text-primary",children:e})," Courses"]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(u=>p.jsx(At,{to:`/academy/${encodeURIComponent(e)}/${u.id}`,className:"group",children:p.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden hover:border-gray-600 transition-all h-full",children:[p.jsxs("div",{className:"h-48 bg-gray-900 relative",children:[u.image&&p.jsx("img",{src:u.image,alt:u.title,className:"w-full h-full object-cover"}),p.jsx("div",{className:"absolute top-2 right-2 bg-black/60 backdrop-blur px-2 py-1 rounded text-xs text-white border border-gray-700",children:u.level})]}),p.jsxs("div",{className:"p-5",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-2 group-hover:text-primary transition-colors",children:u.title}),p.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:u.description}),p.jsx("span",{className:"text-sm font-medium text-white group-hover:underline",children:"Start Learning "})]})]})},u.id))}),t.length===0&&p.jsx("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:p.jsx("p",{className:"text-gray-500",children:"No courses found in this path."})})]})},C8=()=>{const{path:r,courseId:e}=Ac(),t=Ri(),[s,a]=U.useState(null),[o,u]=U.useState([]),[f,m]=U.useState(null),[g,v]=U.useState(!0),[x,T]=U.useState(!0),[A,C]=U.useState([]);return U.useEffect(()=>{(async()=>{if(zt.currentUser&&e){const I=yt(db,"users",zt.currentUser.uid,"course_progress",e),H=await ss(I);H.exists()&&C(H.data().completedLessonIds||[])}})()},[e]),U.useEffect(()=>{(async()=>{try{v(!0);const I=await ss(yt(db,"courses",e));if(!I.exists()){alert("Course not found"),t(`/academy/${r}`);return}a({id:I.id,...I.data()});const H=ti(St(db,"courses",e,"lessons"),_a("order","asc")),$=await Cn(H);let Z=[];$.empty?Z=(await Cn(St(db,"courses",e,"lessons"))).docs.map(de=>({id:de.id,...de.data()})):Z=$.docs.map(te=>({id:te.id,...te.data()})),u(Z),Z.length>0&&m(Z[0])}catch(I){console.error("Error loading course:",I)}finally{v(!1)}})()},[e,t,r]),g?p.jsx("div",{className:"p-10 text-center text-white",children:"Loading class..."}):s?p.jsxs("div",{className:"flex bg-background overflow-hidden animate-fade-in",style:{height:"calc(100vh - 64px)"},children:[p.jsxs("div",{className:`${x?"w-80":"w-0"} bg-surface border-r border-gray-800 transition-all duration-300 flex flex-col flex-shrink-0 relative`,children:[p.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50",children:[p.jsx("h2",{className:"font-bold text-white truncate max-w-[200px]",children:s.title}),p.jsx("button",{onClick:()=>T(!1),className:"md:hidden text-gray-400",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto",children:[o.map((j,I)=>p.jsxs("div",{onClick:()=>m(j),className:`p-4 border-b border-gray-800 cursor-pointer transition-colors hover:bg-gray-800/50 flex items-start gap-3
                   ${f?.id===j.id?"bg-primary/10 border-l-4 border-l-primary":"border-l-4 border-l-transparent"}
                 `,children:[p.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-800 text-gray-400 text-xs flex items-center justify-center mt-0.5",children:I+1}),p.jsxs("div",{children:[p.jsx("h4",{className:`text-sm font-medium ${f?.id===j.id?"text-primary":"text-gray-300"}`,children:j.title}),p.jsx("span",{className:"text-xs text-gray-500",children:j.duration||"10 min"})]})]},j.id)),o.length===0&&p.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No lessons available yet."})]}),p.jsx("div",{className:"p-4 border-t border-gray-800",children:p.jsx(At,{to:`/academy/${r}`,children:p.jsx(Button,{variant:"outline",size:"sm",className:"w-full",children:" Back to Path"})})})]}),p.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[p.jsx("div",{className:"absolute top-4 left-4 z-10",children:p.jsx("button",{onClick:()=>T(!x),className:"bg-surface/80 p-2 rounded-full text-white hover:bg-surface backdrop-blur border border-gray-700 shadow-lg",children:x?p.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):p.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),f?p.jsxs("div",{className:"flex-1 overflow-y-auto",children:[p.jsx("div",{className:"bg-black aspect-video w-full max-h-[60vh] flex items-center justify-center",children:f.videoUrl?p.jsx("iframe",{src:f.videoUrl,title:f.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):p.jsxs("div",{className:"text-gray-500 text-center",children:[p.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),p.jsx("p",{children:"No video content."})]})}),p.jsxs("div",{className:"max-w-4xl mx-auto p-8 pb-20",children:[p.jsx("div",{className:"flex justify-between items-start mb-6",children:p.jsx("h1",{className:"text-2xl font-bold text-white",children:f.title})}),p.jsx("div",{className:"prose prose-invert max-w-none",children:p.jsx("div",{dangerouslySetInnerHTML:{__html:f.content}})}),(s.instructorName||s.instructorBio)&&p.jsxs("div",{className:"mt-12 border-t border-gray-800 pt-8",children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Meet Your Instructor"}),p.jsxs("div",{className:"flex items-start gap-6 bg-surface p-6 rounded-xl border border-gray-800",children:[s.instructorImage?p.jsx("img",{src:s.instructorImage,alt:s.instructorName,className:"w-20 h-20 rounded-full object-cover border-2 border-primary"}):p.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-700 flex items-center justify-center text-2xl font-bold text-gray-400",children:s.instructorName?s.instructorName.charAt(0):"I"}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-lg font-bold text-white",children:s.instructorName}),p.jsx("p",{className:"text-gray-400 text-sm whitespace-pre-wrap mt-2",children:s.instructorBio})]})]})]})]})]}):p.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:p.jsx("p",{children:"Select a lesson from the list to start learning."})})]})]}):null},R8=()=>{const{username:r}=Ac(),[e,t]=U.useState(null),[s,a]=U.useState(!0);return U.useEffect(()=>{r&&(async()=>{try{a(!0);const u=ti(St(Ve,"users"),iA("username","==",r)),f=await Cn(u);if(f.empty)t(null);else{const m=f.docs[0].data();t(m)}}catch(u){console.error("Error fetching profile:",u)}finally{a(!1)}})()},[r]),s?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsx("p",{className:"text-white text-lg",children:"Loading Profile..."})}):e?p.jsx("div",{className:"min-h-screen bg-background py-20 px-4 sm:px-6 lg:px-8 animate-fade-in",children:p.jsx("div",{className:"max-w-3xl mx-auto",children:p.jsxs("div",{className:"bg-surface rounded-2xl border border-gray-800 p-8 md:p-12 text-center relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-32 bg-gradient-to-r from-primary/10 to-secondary/10"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"w-40 h-40 mx-auto rounded-full p-1 bg-gradient-to-br from-primary to-secondary mb-6",children:p.jsx("img",{src:e.avatar_url||`https://ui-avatars.com/api/?name=${e.username}`,alt:e.username,className:"w-full h-full rounded-full object-cover bg-black border-4 border-black"})}),p.jsx("h1",{className:"text-4xl font-extrabold text-white mb-2",children:e.username}),p.jsx("p",{className:"text-primary font-medium tracking-wide text-sm uppercase mb-8",children:"Volcano Member"}),p.jsx("div",{className:"max-w-xl mx-auto",children:p.jsx("p",{className:"text-gray-300 text-lg leading-relaxed whitespace-pre-wrap",children:e.bio||"This user hasn't written a bio yet."})}),p.jsxs("div",{className:"mt-10 pt-10 border-t border-gray-800 grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"p-4 bg-gray-900/50 rounded-xl",children:[p.jsx("span",{className:"block text-gray-500 text-xs uppercase mb-1",children:"Joined"}),p.jsx("span",{className:"text-white font-mono",children:e.createdAt?.seconds?new Date(e.createdAt.seconds*1e3).getFullYear():"Unknown"})]}),p.jsxs("div",{className:"p-4 bg-gray-900/50 rounded-xl",children:[p.jsx("span",{className:"block text-gray-500 text-xs uppercase mb-1",children:"Role"}),p.jsx("span",{className:"text-white font-mono capitalize",children:e.role||"Trader"})]})]})]})]})})}):p.jsxs("div",{className:"min-h-screen bg-background flex flex-col items-center justify-center text-center p-4",children:[p.jsx("div",{className:"w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mb-4",children:p.jsx("span",{className:"text-4xl",children:"?"})}),p.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Not Found"}),p.jsxs("p",{className:"text-gray-400",children:['The user "',r,'" does not exist or has changed their name.']})]})},rT=({children:r,adminOnly:e=!1})=>{const[t,s]=U.useState(null),[a,o]=U.useState(!0);return U.useEffect(()=>{const u=yh(zt,f=>{s(f),o(!1)});return()=>u()},[]),a?p.jsx("div",{className:"text-center p-10 pt-32 text-white",children:"Loading..."}):t?r:p.jsx(aC,{to:"/login",replace:!0})};function I8(){return p.jsx(DC,{children:p.jsxs("div",{className:"min-h-screen bg-background text-text font-sans flex flex-col",children:[p.jsx(Y5,{}),p.jsx("main",{className:"flex-grow",children:p.jsxs(cC,{children:[p.jsx(_n,{path:"/",element:p.jsx(eD,{})}),p.jsx(_n,{path:"/analysis",element:p.jsx(tD,{})}),p.jsx(_n,{path:"/analysis/:id",element:p.jsx(nD,{})}),p.jsx(_n,{path:"/news",element:p.jsx(sD,{})}),p.jsx(_n,{path:"/news/:id",element:p.jsx(iD,{})}),p.jsx(_n,{path:"/login",element:p.jsx(aD,{})}),p.jsx(_n,{path:"/register",element:p.jsx(lD,{})}),p.jsx(_n,{path:"/academy",element:p.jsx(S8,{})}),p.jsx(_n,{path:"/academy/:path",element:p.jsx(N8,{})}),p.jsx(_n,{path:"/academy/:path/:courseId",element:p.jsx(C8,{})}),p.jsx(_n,{path:"/profile/:username",element:p.jsx(R8,{})}),p.jsx(_n,{path:"/dashboard",element:p.jsx(rT,{children:p.jsx(uD,{})})}),p.jsx(_n,{path:"/dashboard/course/:courseId",element:p.jsx(rT,{children:p.jsx(A8,{})})}),p.jsxs(_n,{path:"/admin",element:p.jsx(hD,{}),children:[p.jsx(_n,{index:!0,element:p.jsx(fD,{})}),p.jsx(_n,{path:"news",element:p.jsx(y8,{})}),p.jsx(_n,{path:"analysis",element:p.jsx(_8,{})}),p.jsx(_n,{path:"courses",element:p.jsx(E8,{})}),p.jsx(_n,{path:"profile",element:p.jsx(w8,{})})]})]})}),p.jsx(X5,{})]})})}d2.createRoot(document.getElementById("root")).render(p.jsx(U.StrictMode,{children:p.jsx(I8,{})}))});export default O8();
