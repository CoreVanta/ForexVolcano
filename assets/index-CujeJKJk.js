var cC=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var XP=cC((rs,ss)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var uo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xg={exports:{}},Tu={};var P_;function uC(){if(P_)return Tu;P_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:u,ref:a!==void 0?a:null,props:l}}return Tu.Fragment=e,Tu.jsx=t,Tu.jsxs=t,Tu}var V_;function hC(){return V_||(V_=1,xg.exports=uC()),xg.exports}var g=hC(),Eg={exports:{}},He={};var U_;function dC(){if(U_)return He;U_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),E=Symbol.iterator;function A(V){return V===null||typeof V!="object"?null:(V=E&&V[E]||V["@@iterator"],typeof V=="function"?V:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,I={};function B(V,X,he){this.props=V,this.context=X,this.refs=I,this.updater=he||C}B.prototype.isReactComponent={},B.prototype.setState=function(V,X){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,X,"setState")},B.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function $(){}$.prototype=B.prototype;function Y(V,X,he){this.props=V,this.context=X,this.refs=I,this.updater=he||C}var ee=Y.prototype=new $;ee.constructor=Y,L(ee,B.prototype),ee.isPureReactComponent=!0;var fe=Array.isArray;function xe(){}var M={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function P(V,X,he){var me=he.ref;return{$$typeof:n,type:V,key:X,ref:me!==void 0?me:null,props:he}}function F(V,X){return P(V.type,X,V.props)}function S(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function k(V){var X={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(he){return X[he]})}var N=/\/+/g;function ge(V,X){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):X.toString(36)}function pe(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(xe,xe):(V.status="pending",V.then(function(X){V.status==="pending"&&(V.status="fulfilled",V.value=X)},function(X){V.status==="pending"&&(V.status="rejected",V.reason=X)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function H(V,X,he,me,ye){var Te=typeof V;(Te==="undefined"||Te==="boolean")&&(V=null);var De=!1;if(V===null)De=!0;else switch(Te){case"bigint":case"string":case"number":De=!0;break;case"object":switch(V.$$typeof){case n:case e:De=!0;break;case v:return De=V._init,H(De(V._payload),X,he,me,ye)}}if(De)return ye=ye(V),De=me===""?"."+ge(V,0):me,fe(ye)?(he="",De!=null&&(he=De.replace(N,"$&/")+"/"),H(ye,X,he,"",function(Qe){return Qe})):ye!=null&&(S(ye)&&(ye=F(ye,he+(ye.key==null||V&&V.key===ye.key?"":(""+ye.key).replace(N,"$&/")+"/")+De)),X.push(ye)),1;De=0;var Ie=me===""?".":me+":";if(fe(V))for(var Le=0;Le<V.length;Le++)me=V[Le],Te=Ie+ge(me,Le),De+=H(me,X,he,Te,ye);else if(Le=A(V),typeof Le=="function")for(V=Le.call(V),Le=0;!(me=V.next()).done;)me=me.value,Te=Ie+ge(me,Le++),De+=H(me,X,he,Te,ye);else if(Te==="object"){if(typeof V.then=="function")return H(pe(V),X,he,me,ye);throw X=String(V),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return De}function J(V,X,he){if(V==null)return V;var me=[],ye=0;return H(V,me,"","",function(Te){return X.call(he,Te,ye++)}),me}function ce(V){if(V._status===-1){var X=V._result;X=X(),X.then(function(he){(V._status===0||V._status===-1)&&(V._status=1,V._result=he)},function(he){(V._status===0||V._status===-1)&&(V._status=2,V._result=he)}),V._status===-1&&(V._status=0,V._result=X)}if(V._status===1)return V._result.default;throw V._result}var be=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},ve={map:J,forEach:function(V,X,he){J(V,function(){X.apply(this,arguments)},he)},count:function(V){var X=0;return J(V,function(){X++}),X},toArray:function(V){return J(V,function(X){return X})||[]},only:function(V){if(!S(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return He.Activity=x,He.Children=ve,He.Component=B,He.Fragment=t,He.Profiler=a,He.PureComponent=Y,He.StrictMode=r,He.Suspense=m,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,He.__COMPILER_RUNTIME={__proto__:null,c:function(V){return M.H.useMemoCache(V)}},He.cache=function(V){return function(){return V.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(V,X,he){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var me=L({},V.props),ye=V.key;if(X!=null)for(Te in X.key!==void 0&&(ye=""+X.key),X)!j.call(X,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&X.ref===void 0||(me[Te]=X[Te]);var Te=arguments.length-2;if(Te===1)me.children=he;else if(1<Te){for(var De=Array(Te),Ie=0;Ie<Te;Ie++)De[Ie]=arguments[Ie+2];me.children=De}return P(V.type,ye,me)},He.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},He.createElement=function(V,X,he){var me,ye={},Te=null;if(X!=null)for(me in X.key!==void 0&&(Te=""+X.key),X)j.call(X,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ye[me]=X[me]);var De=arguments.length-2;if(De===1)ye.children=he;else if(1<De){for(var Ie=Array(De),Le=0;Le<De;Le++)Ie[Le]=arguments[Le+2];ye.children=Ie}if(V&&V.defaultProps)for(me in De=V.defaultProps,De)ye[me]===void 0&&(ye[me]=De[me]);return P(V,Te,ye)},He.createRef=function(){return{current:null}},He.forwardRef=function(V){return{$$typeof:d,render:V}},He.isValidElement=S,He.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:ce}},He.memo=function(V,X){return{$$typeof:p,type:V,compare:X===void 0?null:X}},He.startTransition=function(V){var X=M.T,he={};M.T=he;try{var me=V(),ye=M.S;ye!==null&&ye(he,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(xe,be)}catch(Te){be(Te)}finally{X!==null&&he.types!==null&&(X.types=he.types),M.T=X}},He.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},He.use=function(V){return M.H.use(V)},He.useActionState=function(V,X,he){return M.H.useActionState(V,X,he)},He.useCallback=function(V,X){return M.H.useCallback(V,X)},He.useContext=function(V){return M.H.useContext(V)},He.useDebugValue=function(){},He.useDeferredValue=function(V,X){return M.H.useDeferredValue(V,X)},He.useEffect=function(V,X){return M.H.useEffect(V,X)},He.useEffectEvent=function(V){return M.H.useEffectEvent(V)},He.useId=function(){return M.H.useId()},He.useImperativeHandle=function(V,X,he){return M.H.useImperativeHandle(V,X,he)},He.useInsertionEffect=function(V,X){return M.H.useInsertionEffect(V,X)},He.useLayoutEffect=function(V,X){return M.H.useLayoutEffect(V,X)},He.useMemo=function(V,X){return M.H.useMemo(V,X)},He.useOptimistic=function(V,X){return M.H.useOptimistic(V,X)},He.useReducer=function(V,X,he){return M.H.useReducer(V,X,he)},He.useRef=function(V){return M.H.useRef(V)},He.useState=function(V){return M.H.useState(V)},He.useSyncExternalStore=function(V,X,he){return M.H.useSyncExternalStore(V,X,he)},He.useTransition=function(){return M.H.useTransition()},He.version="19.2.1",He}var q_;function Yy(){return q_||(q_=1,Eg.exports=dC()),Eg.exports}var U=Yy();const _i=Qy(U);var wg={exports:{}},Au={},Tg={exports:{}},Ag={};var B_;function fC(){return B_||(B_=1,(function(n){function e(H,J){var ce=H.length;H.push(J);e:for(;0<ce;){var be=ce-1>>>1,ve=H[be];if(0<a(ve,J))H[be]=J,H[ce]=ve,ce=be;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var J=H[0],ce=H.pop();if(ce!==J){H[0]=ce;e:for(var be=0,ve=H.length,V=ve>>>1;be<V;){var X=2*(be+1)-1,he=H[X],me=X+1,ye=H[me];if(0>a(he,ce))me<ve&&0>a(ye,he)?(H[be]=ye,H[me]=ce,be=me):(H[be]=he,H[X]=ce,be=X);else if(me<ve&&0>a(ye,ce))H[be]=ye,H[me]=ce,be=me;else break e}}return J}function a(H,J){var ce=H.sortIndex-J.sortIndex;return ce!==0?ce:H.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var m=[],p=[],v=1,x=null,E=3,A=!1,C=!1,L=!1,I=!1,B=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function ee(H){for(var J=t(p);J!==null;){if(J.callback===null)r(p);else if(J.startTime<=H)r(p),J.sortIndex=J.expirationTime,e(m,J);else break;J=t(p)}}function fe(H){if(L=!1,ee(H),!C)if(t(m)!==null)C=!0,xe||(xe=!0,k());else{var J=t(p);J!==null&&pe(fe,J.startTime-H)}}var xe=!1,M=-1,j=5,P=-1;function F(){return I?!0:!(n.unstable_now()-P<j)}function S(){if(I=!1,xe){var H=n.unstable_now();P=H;var J=!0;try{e:{C=!1,L&&(L=!1,$(M),M=-1),A=!0;var ce=E;try{t:{for(ee(H),x=t(m);x!==null&&!(x.expirationTime>H&&F());){var be=x.callback;if(typeof be=="function"){x.callback=null,E=x.priorityLevel;var ve=be(x.expirationTime<=H);if(H=n.unstable_now(),typeof ve=="function"){x.callback=ve,ee(H),J=!0;break t}x===t(m)&&r(m),ee(H)}else r(m);x=t(m)}if(x!==null)J=!0;else{var V=t(p);V!==null&&pe(fe,V.startTime-H),J=!1}}break e}finally{x=null,E=ce,A=!1}J=void 0}}finally{J?k():xe=!1}}}var k;if(typeof Y=="function")k=function(){Y(S)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ge=N.port2;N.port1.onmessage=S,k=function(){ge.postMessage(null)}}else k=function(){B(S,0)};function pe(H,J){M=B(function(){H(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(H){switch(E){case 1:case 2:case 3:var J=3;break;default:J=E}var ce=E;E=J;try{return H()}finally{E=ce}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ce=E;E=H;try{return J()}finally{E=ce}},n.unstable_scheduleCallback=function(H,J,ce){var be=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?be+ce:be):ce=be,H){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=ce+ve,H={id:v++,callback:J,priorityLevel:H,startTime:ce,expirationTime:ve,sortIndex:-1},ce>be?(H.sortIndex=ce,e(p,H),t(m)===null&&H===t(p)&&(L?($(M),M=-1):L=!0,pe(fe,ce-be))):(H.sortIndex=ve,e(m,H),C||A||(C=!0,xe||(xe=!0,k()))),H},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(H){var J=E;return function(){var ce=E;E=J;try{return H.apply(this,arguments)}finally{E=ce}}}})(Ag)),Ag}var z_;function mC(){return z_||(z_=1,Tg.exports=fC()),Tg.exports}var Sg={exports:{}},ir={};var H_;function pC(){if(H_)return ir;H_=1;var n=Yy();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:m,containerInfo:p,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ir.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ir.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,v)},ir.flushSync=function(m){var p=u.T,v=r.p;try{if(u.T=null,r.p=2,m)return m()}finally{u.T=p,r.p=v,r.d.f()}},ir.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},ir.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},ir.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,x=d(v,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:E,fetchPriority:A}):v==="script"&&r.d.X(m,{crossOrigin:x,integrity:E,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ir.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},ir.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,x=d(v,p.crossOrigin);r.d.L(m,v,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ir.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=d(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},ir.requestFormReset=function(m){r.d.r(m)},ir.unstable_batchedUpdates=function(m,p){return m(p)},ir.useFormState=function(m,p,v){return u.H.useFormState(m,p,v)},ir.useFormStatus=function(){return u.H.useHostTransitionStatus()},ir.version="19.2.1",ir}var F_;function gC(){if(F_)return Sg.exports;F_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sg.exports=pC(),Sg.exports}var G_;function yC(){if(G_)return Au;G_=1;var n=mC(),e=Yy(),t=gC();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function u(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function d(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function m(s){if(l(s)!==s)throw Error(r(188))}function p(s){var i=s.alternate;if(!i){if(i=l(s),i===null)throw Error(r(188));return i!==s?null:s}for(var o=s,c=i;;){var f=o.return;if(f===null)break;var y=f.alternate;if(y===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===o)return m(f),s;if(y===c)return m(f),i;y=y.sibling}throw Error(r(188))}if(o.return!==c.return)o=f,c=y;else{for(var w=!1,R=f.child;R;){if(R===o){w=!0,o=f,c=y;break}if(R===c){w=!0,c=f,o=y;break}R=R.sibling}if(!w){for(R=y.child;R;){if(R===o){w=!0,o=y,c=f;break}if(R===c){w=!0,c=y,o=f;break}R=R.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:i}function v(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=v(s),i!==null)return i;s=s.sibling}return null}var x=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),S=Symbol.iterator;function k(s){return s===null||typeof s!="object"?null:(s=S&&s[S]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function ge(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case L:return"Fragment";case B:return"Profiler";case I:return"StrictMode";case fe:return"Suspense";case xe:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case C:return"Portal";case Y:return s.displayName||"Context";case $:return(s._context.displayName||"Context")+".Consumer";case ee:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return i=s.displayName||null,i!==null?i:ge(s.type)||"Memo";case j:i=s._payload,s=s._init;try{return ge(s(i))}catch{}}return null}var pe=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},be=[],ve=-1;function V(s){return{current:s}}function X(s){0>ve||(s.current=be[ve],be[ve]=null,ve--)}function he(s,i){ve++,be[ve]=s.current,s.current=i}var me=V(null),ye=V(null),Te=V(null),De=V(null);function Ie(s,i){switch(he(Te,i),he(ye,s),he(me,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?a_(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=a_(i),s=o_(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}X(me),he(me,s)}function Le(){X(me),X(ye),X(Te)}function Qe(s){s.memoizedState!==null&&he(De,s);var i=me.current,o=o_(i,s.type);i!==o&&(he(ye,s),he(me,o))}function We(s){ye.current===s&&(X(me),X(ye)),De.current===s&&(X(De),_u._currentValue=ce)}var tt,ot;function ft(s){if(tt===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);tt=i&&i[1]||"",ot=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tt+s+ot}var tn=!1;function Vr(s,i){if(!s||tn)return"";tn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(se){var te=se}Reflect.construct(s,[],ue)}else{try{ue.call()}catch(se){te=se}s.call(ue.prototype)}}else{try{throw Error()}catch(se){te=se}(ue=s())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(se){if(se&&te&&typeof se.stack=="string")return[se.stack,te.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),w=y[0],R=y[1];if(w&&R){var z=w.split(`
`),Z=R.split(`
`);for(f=c=0;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(c===z.length||f===Z.length)for(c=z.length-1,f=Z.length-1;1<=c&&0<=f&&z[c]!==Z[f];)f--;for(;1<=c&&0<=f;c--,f--)if(z[c]!==Z[f]){if(c!==1||f!==1)do if(c--,f--,0>f||z[c]!==Z[f]){var ie=`
`+z[c].replace(" at new "," at ");return s.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",s.displayName)),ie}while(1<=c&&0<=f);break}}}finally{tn=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?ft(o):""}function ai(s,i){switch(s.tag){case 26:case 27:case 5:return ft(s.type);case 16:return ft("Lazy");case 13:return s.child!==i&&i!==null?ft("Suspense Fallback"):ft("Suspense");case 19:return ft("SuspenseList");case 0:case 15:return Vr(s.type,!1);case 11:return Vr(s.type.render,!1);case 1:return Vr(s.type,!0);case 31:return ft("Activity");default:return""}}function ki(s){try{var i="",o=null;do i+=ai(s,o),o=s,s=s.return;while(s);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ht=Object.prototype.hasOwnProperty,It=n.unstable_scheduleCallback,Er=n.unstable_cancelCallback,Ra=n.unstable_shouldYield,Mi=n.unstable_requestPaint,Ot=n.unstable_now,wr=n.unstable_getCurrentPriorityLevel,Pi=n.unstable_ImmediatePriority,Ur=n.unstable_UserBlockingPriority,hr=n.unstable_NormalPriority,Vi=n.unstable_LowPriority,kn=n.unstable_IdlePriority,Ui=n.log,qi=n.unstable_setDisableYieldValue,dr=null,Zt=null;function Tn(s){if(typeof Ui=="function"&&qi(s),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(dr,s)}catch{}}var Dt=Math.clz32?Math.clz32:Zn,Ms=Math.log,Tr=Math.LN2;function Zn(s){return s>>>=0,s===0?32:31-(Ms(s)/Tr|0)|0}var Mn=256,qr=262144,Et=4194304;function Jn(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function In(s,i,o){var c=s.pendingLanes;if(c===0)return 0;var f=0,y=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var R=c&134217727;return R!==0?(c=R&~y,c!==0?f=Jn(c):(w&=R,w!==0?f=Jn(w):o||(o=R&~s,o!==0&&(f=Jn(o))))):(R=c&~y,R!==0?f=Jn(R):w!==0?f=Jn(w):o||(o=c&~s,o!==0&&(f=Jn(o)))),f===0?0:i!==0&&i!==f&&(i&y)===0&&(y=f&-f,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:f}function Pn(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function Bi(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oi(){var s=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),s}function An(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function ls(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Br(s,i,o,c,f,y){var w=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var R=s.entanglements,z=s.expirationTimes,Z=s.hiddenUpdates;for(o=w&~o;0<o;){var ie=31-Dt(o),ue=1<<ie;R[ie]=0,z[ie]=-1;var te=Z[ie];if(te!==null)for(Z[ie]=null,ie=0;ie<te.length;ie++){var se=te[ie];se!==null&&(se.lane&=-536870913)}o&=~ue}c!==0&&Ps(s,c,0),y!==0&&f===0&&s.tag!==0&&(s.suspendedLanes|=y&~(w&~i))}function Ps(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var c=31-Dt(i);s.entangledLanes|=i,s.entanglements[c]=s.entanglements[c]|1073741824|o&261930}function zi(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var c=31-Dt(o),f=1<<c;f&i|s[c]&i&&(s[c]|=i),o&=~f}}function Hi(s,i){var o=i&-i;return o=(o&42)!==0?1:cs(o),(o&(s.suspendedLanes|i))!==0?0:o}function cs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function fr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function nn(){var s=J.p;return s!==0?s:(s=window.event,s===void 0?32:I_(s.type))}function mr(s,i){var o=J.p;try{return J.p=s,i()}finally{J.p=o}}var pr=Math.random().toString(36).slice(2),Ft="__reactFiber$"+pr,rn="__reactProps$"+pr,Ar="__reactContainer$"+pr,Jt="__reactEvents$"+pr,Mo="__reactListeners$"+pr,Ia="__reactHandles$"+pr,Oa="__reactResources$"+pr,Sr="__reactMarker$"+pr;function li(s){delete s[Ft],delete s[rn],delete s[Jt],delete s[Mo],delete s[Ia]}function kt(s){var i=s[Ft];if(i)return i;for(var o=s.parentNode;o;){if(i=o[Ar]||o[Ft]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=m_(s);s!==null;){if(o=s[Ft])return o;s=m_(s)}return i}s=o,o=s.parentNode}return null}function er(s){if(s=s[Ft]||s[Ar]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function Vn(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function Nr(s){var i=s[Oa];return i||(i=s[Oa]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Gt(s){s[Sr]=!0}var Fi=new Set,us={};function gr(s,i){Un(s,i),Un(s+"Capture",i)}function Un(s,i){for(us[s]=i,s=0;s<i.length;s++)Fi.add(i[s])}var tr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vs={},Gi={};function Da(s){return Ht.call(Gi,s)?!0:Ht.call(Vs,s)?!1:tr.test(s)?Gi[s]=!0:(Vs[s]=!0,!1)}function ci(s,i,o){if(Da(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function qn(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function $t(s,i,o,c){if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+c)}}function Mt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Cr(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function zr(s,i,o){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,y=c.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return f.call(this)},set:function(w){o=""+w,y.call(this,w)}}),Object.defineProperty(s,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function ct(s){if(!s._valueTracker){var i=Cr(s)?"checked":"value";s._valueTracker=zr(s,i,""+s[i])}}function hs(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return s&&(c=Cr(s)?s.checked?"true":"false":s.value),s=c,s!==o?(i.setValue(s),!0):!1}function Rr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Us=/[\n"\\]/g;function On(s){return s.replace(Us,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ui(s,i,o,c,f,y,w,R){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),i!=null?w==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+Mt(i)):s.value!==""+Mt(i)&&(s.value=""+Mt(i)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),i!=null?$i(s,w,Mt(i)):o!=null?$i(s,w,Mt(o)):c!=null&&s.removeAttribute("value"),f==null&&y!=null&&(s.defaultChecked=!!y),f!=null&&(s.checked=f&&typeof f!="function"&&typeof f!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+Mt(R):s.removeAttribute("name")}function hi(s,i,o,c,f,y,w,R){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){ct(s);return}o=o!=null?""+Mt(o):"",i=i!=null?""+Mt(i):o,R||i===s.value||(s.value=i),s.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=R?s.checked:!!c,s.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w),ct(s)}function $i(s,i,o){i==="number"&&Rr(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function ds(s,i,o,c){if(s=s.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<s.length;o++)f=i.hasOwnProperty("$"+s[o].value),s[o].selected!==f&&(s[o].selected=f),f&&c&&(s[o].defaultSelected=!0)}else{for(o=""+Mt(o),i=null,f=0;f<s.length;f++){if(s[f].value===o){s[f].selected=!0,c&&(s[f].defaultSelected=!0);return}i!==null||s[f].disabled||(i=s[f])}i!==null&&(i.selected=!0)}}function fs(s,i,o){if(i!=null&&(i=""+Mt(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+Mt(o):""}function pn(s,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(r(92));if(pe(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=Mt(i),s.defaultValue=o,c=s.textContent,c===o&&c!==""&&c!==null&&(s.value=c),ct(s)}function Kt(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var Ir=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ki(s,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":c?s.setProperty(i,o):typeof o!="number"||o===0||Ir.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function nr(s,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&o[f]!==c&&Ki(s,f,c)}else for(var y in i)i.hasOwnProperty(y)&&Ki(s,y,i[y])}function di(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var La=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ms=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fi(s){return ms.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function rr(){}var ln=null;function Bn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Hr=null,zn=null;function Fr(s){var i=er(s);if(i&&(s=i.stateNode)){var o=s[rn]||null;e:switch(s=i.stateNode,i.type){case"input":if(ui(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+On(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==s&&c.form===s.form){var f=c[rn]||null;if(!f)throw Error(r(90));ui(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===s.form&&hs(c)}break e;case"textarea":fs(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&ds(s,!!o.multiple,i,!1)}}}var Gr=!1;function ps(s,i,o){if(Gr)return s(i,o);Gr=!0;try{var c=s(i);return c}finally{if(Gr=!1,(Hr!==null||zn!==null)&&(xd(),Hr&&(i=Hr,s=zn,zn=Hr=null,Fr(i),s)))for(i=0;i<s.length;i++)Fr(s[i])}}function sr(s,i){var o=s.stateNode;if(o===null)return null;var c=o[rn]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gs=!1;if(Dn)try{var Ye={};Object.defineProperty(Ye,"passive",{get:function(){gs=!0}}),window.addEventListener("test",Ye,Ye),window.removeEventListener("test",Ye,Ye)}catch{gs=!1}var yr=null,qs=null,Bs=null;function Qi(){if(Bs)return Bs;var s,i=qs,o=i.length,c,f="value"in yr?yr.value:yr.textContent,y=f.length;for(s=0;s<o&&i[s]===f[s];s++);var w=o-s;for(c=1;c<=w&&i[o-c]===f[y-c];c++);return Bs=f.slice(s,1<c?1-c:void 0)}function _(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function O(){return!0}function q(){return!1}function ne(s){function i(o,c,f,y,w){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(o=s[R],this[R]=o?o(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?O:q,this.isPropagationStopped=q,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=O)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=O)},persist:function(){},isPersistent:O}),i}var Me={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ae=ne(Me),$e=x({},Me,{view:0,detail:0}),Xe=ne($e),bt,Ze,Nt,cn=x({},$e,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ja,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Nt&&(Nt&&s.type==="mousemove"?(bt=s.screenX-Nt.screenX,Ze=s.screenY-Nt.screenY):Ze=bt=0,Nt=s),bt)},movementY:function(s){return"movementY"in s?s.movementY:Ze}}),Pt=ne(cn),Qt=x({},cn,{dataTransfer:0}),sn=ne(Qt),$r=x({},$e,{relatedTarget:0}),Hn=ne($r),Kr=x({},Me,{animationName:0,elapsedTime:0,pseudoElement:0}),Po=ne(Kr),zs=x({},Me,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Yi=ne(zs),Lh=x({},Me,{data:0}),mi=ne(Lh),jh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ph(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Mh[s])?!!i[s]:!1}function ja(){return Ph}var vr=x({},$e,{key:function(s){if(s.key){var i=jh[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=_(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?kh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ja,charCode:function(s){return s.type==="keypress"?_(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?_(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Vh=ne(vr),Uh=x({},cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xi=ne(Uh),h=x({},$e,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ja}),b=ne(h),T=x({},Me,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=ne(T),Q=x({},cn,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),re=ne(Q),_e=x({},Me,{newState:0,oldState:0}),Fe=ne(_e),un=[9,13,27,32],mt=Dn&&"CompositionEvent"in window,Yt=null;Dn&&"documentMode"in document&&(Yt=document.documentMode);var ys=Dn&&"TextEvent"in window&&!Yt,pi=Dn&&(!mt||Yt&&8<Yt&&11>=Yt),Hs=" ",Fs=!1;function Vo(s,i){switch(s){case"keyup":return un.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Al(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Sl=!1;function LN(s,i){switch(s){case"compositionend":return Al(i);case"keypress":return i.which!==32?null:(Fs=!0,Hs);case"textInput":return s=i.data,s===Hs&&Fs?null:s;default:return null}}function jN(s,i){if(Sl)return s==="compositionend"||!mt&&Vo(s,i)?(s=Qi(),Bs=qs=yr=null,Sl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return pi&&i.locale!=="ko"?null:i.data;default:return null}}var kN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gv(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!kN[s.type]:i==="textarea"}function yv(s,i,o,c){Hr?zn?zn.push(c):zn=[c]:Hr=c,i=Cd(i,"onChange"),0<i.length&&(o=new Ae("onChange","change",null,o,c),s.push({event:o,listeners:i}))}var zc=null,Hc=null;function MN(s){e_(s,0)}function qh(s){var i=Vn(s);if(hs(i))return s}function vv(s,i){if(s==="change")return i}var bv=!1;if(Dn){var Cm;if(Dn){var Rm="oninput"in document;if(!Rm){var _v=document.createElement("div");_v.setAttribute("oninput","return;"),Rm=typeof _v.oninput=="function"}Cm=Rm}else Cm=!1;bv=Cm&&(!document.documentMode||9<document.documentMode)}function xv(){zc&&(zc.detachEvent("onpropertychange",Ev),Hc=zc=null)}function Ev(s){if(s.propertyName==="value"&&qh(Hc)){var i=[];yv(i,Hc,s,Bn(s)),ps(MN,i)}}function PN(s,i,o){s==="focusin"?(xv(),zc=i,Hc=o,zc.attachEvent("onpropertychange",Ev)):s==="focusout"&&xv()}function VN(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return qh(Hc)}function UN(s,i){if(s==="click")return qh(i)}function qN(s,i){if(s==="input"||s==="change")return qh(i)}function BN(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Qr=typeof Object.is=="function"?Object.is:BN;function Fc(s,i){if(Qr(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!Ht.call(i,f)||!Qr(s[f],i[f]))return!1}return!0}function wv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Tv(s,i){var o=wv(s);s=0;for(var c;o;){if(o.nodeType===3){if(c=s+o.textContent.length,s<=i&&c>=i)return{node:o,offset:i-s};s=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=wv(o)}}function Av(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Av(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function Sv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=Rr(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=Rr(s.document)}return i}function Im(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var zN=Dn&&"documentMode"in document&&11>=document.documentMode,Nl=null,Om=null,Gc=null,Dm=!1;function Nv(s,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Dm||Nl==null||Nl!==Rr(c)||(c=Nl,"selectionStart"in c&&Im(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Gc&&Fc(Gc,c)||(Gc=c,c=Cd(Om,"onSelect"),0<c.length&&(i=new Ae("onSelect","select",null,i,o),s.push({event:i,listeners:c}),i.target=Nl)))}function Uo(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var Cl={animationend:Uo("Animation","AnimationEnd"),animationiteration:Uo("Animation","AnimationIteration"),animationstart:Uo("Animation","AnimationStart"),transitionrun:Uo("Transition","TransitionRun"),transitionstart:Uo("Transition","TransitionStart"),transitioncancel:Uo("Transition","TransitionCancel"),transitionend:Uo("Transition","TransitionEnd")},Lm={},Cv={};Dn&&(Cv=document.createElement("div").style,"AnimationEvent"in window||(delete Cl.animationend.animation,delete Cl.animationiteration.animation,delete Cl.animationstart.animation),"TransitionEvent"in window||delete Cl.transitionend.transition);function qo(s){if(Lm[s])return Lm[s];if(!Cl[s])return s;var i=Cl[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in Cv)return Lm[s]=i[o];return s}var Rv=qo("animationend"),Iv=qo("animationiteration"),Ov=qo("animationstart"),HN=qo("transitionrun"),FN=qo("transitionstart"),GN=qo("transitioncancel"),Dv=qo("transitionend"),Lv=new Map,jm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jm.push("scrollEnd");function Gs(s,i){Lv.set(s,i),gr(i,[s])}var Bh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},vs=[],Rl=0,km=0;function zh(){for(var s=Rl,i=km=Rl=0;i<s;){var o=vs[i];vs[i++]=null;var c=vs[i];vs[i++]=null;var f=vs[i];vs[i++]=null;var y=vs[i];if(vs[i++]=null,c!==null&&f!==null){var w=c.pending;w===null?f.next=f:(f.next=w.next,w.next=f),c.pending=f}y!==0&&jv(o,f,y)}}function Hh(s,i,o,c){vs[Rl++]=s,vs[Rl++]=i,vs[Rl++]=o,vs[Rl++]=c,km|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Mm(s,i,o,c){return Hh(s,i,o,c),Fh(s)}function Bo(s,i){return Hh(s,null,null,i),Fh(s)}function jv(s,i,o){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o);for(var f=!1,y=s.return;y!==null;)y.childLanes|=o,c=y.alternate,c!==null&&(c.childLanes|=o),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(f=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,f&&i!==null&&(f=31-Dt(o),s=y.hiddenUpdates,c=s[f],c===null?s[f]=[i]:c.push(i),i.lane=o|536870912),y):null}function Fh(s){if(50<fu)throw fu=0,Gp=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Il={};function $N(s,i,o,c){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(s,i,o,c){return new $N(s,i,o,c)}function Pm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Wi(s,i){var o=s.alternate;return o===null?(o=Yr(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function kv(s,i){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function Gh(s,i,o,c,f,y){var w=0;if(c=s,typeof s=="function")Pm(s)&&(w=1);else if(typeof s=="string")w=W2(s,o,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=Yr(31,o,i,f),s.elementType=P,s.lanes=y,s;case L:return zo(o.children,f,y,i);case I:w=8,f|=24;break;case B:return s=Yr(12,o,i,f|2),s.elementType=B,s.lanes=y,s;case fe:return s=Yr(13,o,i,f),s.elementType=fe,s.lanes=y,s;case xe:return s=Yr(19,o,i,f),s.elementType=xe,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Y:w=10;break e;case $:w=9;break e;case ee:w=11;break e;case M:w=14;break e;case j:w=16,c=null;break e}w=29,o=Error(r(130,s===null?"null":typeof s,"")),c=null}return i=Yr(w,o,i,f),i.elementType=s,i.type=c,i.lanes=y,i}function zo(s,i,o,c){return s=Yr(7,s,c,i),s.lanes=o,s}function Vm(s,i,o){return s=Yr(6,s,null,i),s.lanes=o,s}function Mv(s){var i=Yr(18,null,null,0);return i.stateNode=s,i}function Um(s,i,o){return i=Yr(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var Pv=new WeakMap;function bs(s,i){if(typeof s=="object"&&s!==null){var o=Pv.get(s);return o!==void 0?o:(i={value:s,source:i,stack:ki(i)},Pv.set(s,i),i)}return{value:s,source:i,stack:ki(i)}}var Ol=[],Dl=0,$h=null,$c=0,_s=[],xs=0,ka=null,gi=1,yi="";function Zi(s,i){Ol[Dl++]=$c,Ol[Dl++]=$h,$h=s,$c=i}function Vv(s,i,o){_s[xs++]=gi,_s[xs++]=yi,_s[xs++]=ka,ka=s;var c=gi;s=yi;var f=32-Dt(c)-1;c&=~(1<<f),o+=1;var y=32-Dt(i)+f;if(30<y){var w=f-f%5;y=(c&(1<<w)-1).toString(32),c>>=w,f-=w,gi=1<<32-Dt(i)+f|o<<f|c,yi=y+s}else gi=1<<y|o<<f|c,yi=s}function qm(s){s.return!==null&&(Zi(s,1),Vv(s,1,0))}function Bm(s){for(;s===$h;)$h=Ol[--Dl],Ol[Dl]=null,$c=Ol[--Dl],Ol[Dl]=null;for(;s===ka;)ka=_s[--xs],_s[xs]=null,yi=_s[--xs],_s[xs]=null,gi=_s[--xs],_s[xs]=null}function Uv(s,i){_s[xs++]=gi,_s[xs++]=yi,_s[xs++]=ka,gi=i.id,yi=i.overflow,ka=s}var Fn=null,Vt=null,lt=!1,Ma=null,Es=!1,zm=Error(r(519));function Pa(s){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kc(bs(i,s)),zm}function qv(s){var i=s.stateNode,o=s.type,c=s.memoizedProps;switch(i[Ft]=s,i[rn]=c,o){case"dialog":et("cancel",i),et("close",i);break;case"iframe":case"object":case"embed":et("load",i);break;case"video":case"audio":for(o=0;o<pu.length;o++)et(pu[o],i);break;case"source":et("error",i);break;case"img":case"image":case"link":et("error",i),et("load",i);break;case"details":et("toggle",i);break;case"input":et("invalid",i),hi(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":et("invalid",i);break;case"textarea":et("invalid",i),pn(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||s_(i.textContent,o)?(c.popover!=null&&(et("beforetoggle",i),et("toggle",i)),c.onScroll!=null&&et("scroll",i),c.onScrollEnd!=null&&et("scrollend",i),c.onClick!=null&&(i.onclick=rr),i=!0):i=!1,i||Pa(s,!0)}function Bv(s){for(Fn=s.return;Fn;)switch(Fn.tag){case 5:case 31:case 13:Es=!1;return;case 27:case 3:Es=!0;return;default:Fn=Fn.return}}function Ll(s){if(s!==Fn)return!1;if(!lt)return Bv(s),lt=!0,!1;var i=s.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||ag(s.type,s.memoizedProps)),o=!o),o&&Vt&&Pa(s),Bv(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Vt=f_(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Vt=f_(s)}else i===27?(i=Vt,Wa(s.type)?(s=hg,hg=null,Vt=s):Vt=i):Vt=Fn?Ts(s.stateNode.nextSibling):null;return!0}function Ho(){Vt=Fn=null,lt=!1}function Hm(){var s=Ma;return s!==null&&(jr===null?jr=s:jr.push.apply(jr,s),Ma=null),s}function Kc(s){Ma===null?Ma=[s]:Ma.push(s)}var Fm=V(null),Fo=null,Ji=null;function Va(s,i,o){he(Fm,i._currentValue),i._currentValue=o}function ea(s){s._currentValue=Fm.current,X(Fm)}function Gm(s,i,o){for(;s!==null;){var c=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),s===o)break;s=s.return}}function $m(s,i,o,c){var f=s.child;for(f!==null&&(f.return=s);f!==null;){var y=f.dependencies;if(y!==null){var w=f.child;y=y.firstContext;e:for(;y!==null;){var R=y;y=f;for(var z=0;z<i.length;z++)if(R.context===i[z]){y.lanes|=o,R=y.alternate,R!==null&&(R.lanes|=o),Gm(y.return,o,s),c||(w=null);break e}y=R.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(r(341));w.lanes|=o,y=w.alternate,y!==null&&(y.lanes|=o),Gm(w,o,s),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===s){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function jl(s,i,o,c){s=null;for(var f=i,y=!1;f!==null;){if(!y){if((f.flags&524288)!==0)y=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var R=f.type;Qr(f.pendingProps.value,w.value)||(s!==null?s.push(R):s=[R])}}else if(f===De.current){if(w=f.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(s!==null?s.push(_u):s=[_u])}f=f.return}s!==null&&$m(i,s,o,c),i.flags|=262144}function Kh(s){for(s=s.firstContext;s!==null;){if(!Qr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Go(s){Fo=s,Ji=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Gn(s){return zv(Fo,s)}function Qh(s,i){return Fo===null&&Go(s),zv(s,i)}function zv(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Ji===null){if(s===null)throw Error(r(308));Ji=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else Ji=Ji.next=i;return o}var KN=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,c){s.push(c)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},QN=n.unstable_scheduleCallback,YN=n.unstable_NormalPriority,gn={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Km(){return{controller:new KN,data:new Map,refCount:0}}function Qc(s){s.refCount--,s.refCount===0&&QN(YN,function(){s.controller.abort()})}var Yc=null,Qm=0,kl=0,Ml=null;function XN(s,i){if(Yc===null){var o=Yc=[];Qm=0,kl=Wp(),Ml={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Qm++,i.then(Hv,Hv),i}function Hv(){if(--Qm===0&&Yc!==null){Ml!==null&&(Ml.status="fulfilled");var s=Yc;Yc=null,kl=0,Ml=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function WN(s,i){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return s.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var Fv=H.S;H.S=function(s,i){Cb=Ot(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&XN(s,i),Fv!==null&&Fv(s,i)};var $o=V(null);function Ym(){var s=$o.current;return s!==null?s:Ct.pooledCache}function Yh(s,i){i===null?he($o,$o.current):he($o,i.pool)}function Gv(){var s=Ym();return s===null?null:{parent:gn._currentValue,pool:s}}var Pl=Error(r(460)),Xm=Error(r(474)),Xh=Error(r(542)),Wh={then:function(){}};function $v(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Kv(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(rr,rr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Yv(s),s;default:if(typeof i.status=="string")i.then(rr,rr);else{if(s=Ct,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Yv(s),s}throw Qo=i,Pl}}function Ko(s){try{var i=s._init;return i(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Qo=o,Pl):o}}var Qo=null;function Qv(){if(Qo===null)throw Error(r(459));var s=Qo;return Qo=null,s}function Yv(s){if(s===Pl||s===Xh)throw Error(r(483))}var Vl=null,Xc=0;function Zh(s){var i=Xc;return Xc+=1,Vl===null&&(Vl=[]),Kv(Vl,s,i)}function Wc(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function Jh(s,i){throw i.$$typeof===E?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function Xv(s){function i(K,G){if(s){var W=K.deletions;W===null?(K.deletions=[G],K.flags|=16):W.push(G)}}function o(K,G){if(!s)return null;for(;G!==null;)i(K,G),G=G.sibling;return null}function c(K){for(var G=new Map;K!==null;)K.key!==null?G.set(K.key,K):G.set(K.index,K),K=K.sibling;return G}function f(K,G){return K=Wi(K,G),K.index=0,K.sibling=null,K}function y(K,G,W){return K.index=W,s?(W=K.alternate,W!==null?(W=W.index,W<G?(K.flags|=67108866,G):W):(K.flags|=67108866,G)):(K.flags|=1048576,G)}function w(K){return s&&K.alternate===null&&(K.flags|=67108866),K}function R(K,G,W,ae){return G===null||G.tag!==6?(G=Vm(W,K.mode,ae),G.return=K,G):(G=f(G,W),G.return=K,G)}function z(K,G,W,ae){var je=W.type;return je===L?ie(K,G,W.props.children,ae,W.key):G!==null&&(G.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===j&&Ko(je)===G.type)?(G=f(G,W.props),Wc(G,W),G.return=K,G):(G=Gh(W.type,W.key,W.props,null,K.mode,ae),Wc(G,W),G.return=K,G)}function Z(K,G,W,ae){return G===null||G.tag!==4||G.stateNode.containerInfo!==W.containerInfo||G.stateNode.implementation!==W.implementation?(G=Um(W,K.mode,ae),G.return=K,G):(G=f(G,W.children||[]),G.return=K,G)}function ie(K,G,W,ae,je){return G===null||G.tag!==7?(G=zo(W,K.mode,ae,je),G.return=K,G):(G=f(G,W),G.return=K,G)}function ue(K,G,W){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Vm(""+G,K.mode,W),G.return=K,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case A:return W=Gh(G.type,G.key,G.props,null,K.mode,W),Wc(W,G),W.return=K,W;case C:return G=Um(G,K.mode,W),G.return=K,G;case j:return G=Ko(G),ue(K,G,W)}if(pe(G)||k(G))return G=zo(G,K.mode,W,null),G.return=K,G;if(typeof G.then=="function")return ue(K,Zh(G),W);if(G.$$typeof===Y)return ue(K,Qh(K,G),W);Jh(K,G)}return null}function te(K,G,W,ae){var je=G!==null?G.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return je!==null?null:R(K,G,""+W,ae);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case A:return W.key===je?z(K,G,W,ae):null;case C:return W.key===je?Z(K,G,W,ae):null;case j:return W=Ko(W),te(K,G,W,ae)}if(pe(W)||k(W))return je!==null?null:ie(K,G,W,ae,null);if(typeof W.then=="function")return te(K,G,Zh(W),ae);if(W.$$typeof===Y)return te(K,G,Qh(K,W),ae);Jh(K,W)}return null}function se(K,G,W,ae,je){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return K=K.get(W)||null,R(G,K,""+ae,je);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case A:return K=K.get(ae.key===null?W:ae.key)||null,z(G,K,ae,je);case C:return K=K.get(ae.key===null?W:ae.key)||null,Z(G,K,ae,je);case j:return ae=Ko(ae),se(K,G,W,ae,je)}if(pe(ae)||k(ae))return K=K.get(W)||null,ie(G,K,ae,je,null);if(typeof ae.then=="function")return se(K,G,W,Zh(ae),je);if(ae.$$typeof===Y)return se(K,G,W,Qh(G,ae),je);Jh(G,ae)}return null}function Se(K,G,W,ae){for(var je=null,ht=null,Ce=G,Ke=G=0,rt=null;Ce!==null&&Ke<W.length;Ke++){Ce.index>Ke?(rt=Ce,Ce=null):rt=Ce.sibling;var dt=te(K,Ce,W[Ke],ae);if(dt===null){Ce===null&&(Ce=rt);break}s&&Ce&&dt.alternate===null&&i(K,Ce),G=y(dt,G,Ke),ht===null?je=dt:ht.sibling=dt,ht=dt,Ce=rt}if(Ke===W.length)return o(K,Ce),lt&&Zi(K,Ke),je;if(Ce===null){for(;Ke<W.length;Ke++)Ce=ue(K,W[Ke],ae),Ce!==null&&(G=y(Ce,G,Ke),ht===null?je=Ce:ht.sibling=Ce,ht=Ce);return lt&&Zi(K,Ke),je}for(Ce=c(Ce);Ke<W.length;Ke++)rt=se(Ce,K,Ke,W[Ke],ae),rt!==null&&(s&&rt.alternate!==null&&Ce.delete(rt.key===null?Ke:rt.key),G=y(rt,G,Ke),ht===null?je=rt:ht.sibling=rt,ht=rt);return s&&Ce.forEach(function(no){return i(K,no)}),lt&&Zi(K,Ke),je}function Ve(K,G,W,ae){if(W==null)throw Error(r(151));for(var je=null,ht=null,Ce=G,Ke=G=0,rt=null,dt=W.next();Ce!==null&&!dt.done;Ke++,dt=W.next()){Ce.index>Ke?(rt=Ce,Ce=null):rt=Ce.sibling;var no=te(K,Ce,dt.value,ae);if(no===null){Ce===null&&(Ce=rt);break}s&&Ce&&no.alternate===null&&i(K,Ce),G=y(no,G,Ke),ht===null?je=no:ht.sibling=no,ht=no,Ce=rt}if(dt.done)return o(K,Ce),lt&&Zi(K,Ke),je;if(Ce===null){for(;!dt.done;Ke++,dt=W.next())dt=ue(K,dt.value,ae),dt!==null&&(G=y(dt,G,Ke),ht===null?je=dt:ht.sibling=dt,ht=dt);return lt&&Zi(K,Ke),je}for(Ce=c(Ce);!dt.done;Ke++,dt=W.next())dt=se(Ce,K,Ke,dt.value,ae),dt!==null&&(s&&dt.alternate!==null&&Ce.delete(dt.key===null?Ke:dt.key),G=y(dt,G,Ke),ht===null?je=dt:ht.sibling=dt,ht=dt);return s&&Ce.forEach(function(lC){return i(K,lC)}),lt&&Zi(K,Ke),je}function At(K,G,W,ae){if(typeof W=="object"&&W!==null&&W.type===L&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case A:e:{for(var je=W.key;G!==null;){if(G.key===je){if(je=W.type,je===L){if(G.tag===7){o(K,G.sibling),ae=f(G,W.props.children),ae.return=K,K=ae;break e}}else if(G.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===j&&Ko(je)===G.type){o(K,G.sibling),ae=f(G,W.props),Wc(ae,W),ae.return=K,K=ae;break e}o(K,G);break}else i(K,G);G=G.sibling}W.type===L?(ae=zo(W.props.children,K.mode,ae,W.key),ae.return=K,K=ae):(ae=Gh(W.type,W.key,W.props,null,K.mode,ae),Wc(ae,W),ae.return=K,K=ae)}return w(K);case C:e:{for(je=W.key;G!==null;){if(G.key===je)if(G.tag===4&&G.stateNode.containerInfo===W.containerInfo&&G.stateNode.implementation===W.implementation){o(K,G.sibling),ae=f(G,W.children||[]),ae.return=K,K=ae;break e}else{o(K,G);break}else i(K,G);G=G.sibling}ae=Um(W,K.mode,ae),ae.return=K,K=ae}return w(K);case j:return W=Ko(W),At(K,G,W,ae)}if(pe(W))return Se(K,G,W,ae);if(k(W)){if(je=k(W),typeof je!="function")throw Error(r(150));return W=je.call(W),Ve(K,G,W,ae)}if(typeof W.then=="function")return At(K,G,Zh(W),ae);if(W.$$typeof===Y)return At(K,G,Qh(K,W),ae);Jh(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,G!==null&&G.tag===6?(o(K,G.sibling),ae=f(G,W),ae.return=K,K=ae):(o(K,G),ae=Vm(W,K.mode,ae),ae.return=K,K=ae),w(K)):o(K,G)}return function(K,G,W,ae){try{Xc=0;var je=At(K,G,W,ae);return Vl=null,je}catch(Ce){if(Ce===Pl||Ce===Xh)throw Ce;var ht=Yr(29,Ce,null,K.mode);return ht.lanes=ae,ht.return=K,ht}finally{}}}var Yo=Xv(!0),Wv=Xv(!1),Ua=!1;function Wm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zm(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function qa(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ba(s,i,o){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(pt&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=Fh(s),jv(s,null,o),i}return Hh(s,c,i,o),Fh(s)}function Zc(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=s.pendingLanes,o|=c,i.lanes=o,zi(s,o)}}function Jm(s,i){var o=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?f=y=w:y=y.next=w,o=o.next}while(o!==null);y===null?f=y=i:y=y.next=i}else f=y=i;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var ep=!1;function Jc(){if(ep){var s=Ml;if(s!==null)throw s}}function eu(s,i,o,c){ep=!1;var f=s.updateQueue;Ua=!1;var y=f.firstBaseUpdate,w=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var z=R,Z=z.next;z.next=null,w===null?y=Z:w.next=Z,w=z;var ie=s.alternate;ie!==null&&(ie=ie.updateQueue,R=ie.lastBaseUpdate,R!==w&&(R===null?ie.firstBaseUpdate=Z:R.next=Z,ie.lastBaseUpdate=z))}if(y!==null){var ue=f.baseState;w=0,ie=Z=z=null,R=y;do{var te=R.lane&-536870913,se=te!==R.lane;if(se?(nt&te)===te:(c&te)===te){te!==0&&te===kl&&(ep=!0),ie!==null&&(ie=ie.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Se=s,Ve=R;te=i;var At=o;switch(Ve.tag){case 1:if(Se=Ve.payload,typeof Se=="function"){ue=Se.call(At,ue,te);break e}ue=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ve.payload,te=typeof Se=="function"?Se.call(At,ue,te):Se,te==null)break e;ue=x({},ue,te);break e;case 2:Ua=!0}}te=R.callback,te!==null&&(s.flags|=64,se&&(s.flags|=8192),se=f.callbacks,se===null?f.callbacks=[te]:se.push(te))}else se={lane:te,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ie===null?(Z=ie=se,z=ue):ie=ie.next=se,w|=te;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;se=R,R=se.next,se.next=null,f.lastBaseUpdate=se,f.shared.pending=null}}while(!0);ie===null&&(z=ue),f.baseState=z,f.firstBaseUpdate=Z,f.lastBaseUpdate=ie,y===null&&(f.shared.lanes=0),$a|=w,s.lanes=w,s.memoizedState=ue}}function Zv(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function Jv(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)Zv(o[s],i)}var Ul=V(null),ed=V(0);function e1(s,i){s=ca,he(ed,s),he(Ul,i),ca=s|i.baseLanes}function tp(){he(ed,ca),he(Ul,Ul.current)}function np(){ca=ed.current,X(Ul),X(ed)}var Xr=V(null),ws=null;function za(s){var i=s.alternate;he(hn,hn.current&1),he(Xr,s),ws===null&&(i===null||Ul.current!==null||i.memoizedState!==null)&&(ws=s)}function rp(s){he(hn,hn.current),he(Xr,s),ws===null&&(ws=s)}function t1(s){s.tag===22?(he(hn,hn.current),he(Xr,s),ws===null&&(ws=s)):Ha()}function Ha(){he(hn,hn.current),he(Xr,Xr.current)}function Wr(s){X(Xr),ws===s&&(ws=null),X(hn)}var hn=V(0);function td(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||cg(o)||ug(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ta=0,Ge=null,wt=null,yn=null,nd=!1,ql=!1,Xo=!1,rd=0,tu=0,Bl=null,ZN=0;function an(){throw Error(r(321))}function sp(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!Qr(s[o],i[o]))return!1;return!0}function ip(s,i,o,c,f,y){return ta=y,Ge=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=s===null||s.memoizedState===null?V1:_p,Xo=!1,y=o(c,f),Xo=!1,ql&&(y=r1(i,o,c,f)),n1(s),y}function n1(s){H.H=su;var i=wt!==null&&wt.next!==null;if(ta=0,yn=wt=Ge=null,nd=!1,tu=0,Bl=null,i)throw Error(r(300));s===null||vn||(s=s.dependencies,s!==null&&Kh(s)&&(vn=!0))}function r1(s,i,o,c){Ge=s;var f=0;do{if(ql&&(Bl=null),tu=0,ql=!1,25<=f)throw Error(r(301));if(f+=1,yn=wt=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=U1,y=i(o,c)}while(ql);return y}function JN(){var s=H.H,i=s.useState()[0];return i=typeof i.then=="function"?nu(i):i,s=s.useState()[0],(wt!==null?wt.memoizedState:null)!==s&&(Ge.flags|=1024),i}function ap(){var s=rd!==0;return rd=0,s}function op(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function lp(s){if(nd){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}nd=!1}ta=0,yn=wt=Ge=null,ql=!1,tu=rd=0,Bl=null}function br(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Ge.memoizedState=yn=s:yn=yn.next=s,yn}function dn(){if(wt===null){var s=Ge.alternate;s=s!==null?s.memoizedState:null}else s=wt.next;var i=yn===null?Ge.memoizedState:yn.next;if(i!==null)yn=i,wt=s;else{if(s===null)throw Ge.alternate===null?Error(r(467)):Error(r(310));wt=s,s={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},yn===null?Ge.memoizedState=yn=s:yn=yn.next=s}return yn}function sd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nu(s){var i=tu;return tu+=1,Bl===null&&(Bl=[]),s=Kv(Bl,s,i),i=Ge,(yn===null?i.memoizedState:yn.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?V1:_p),s}function id(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return nu(s);if(s.$$typeof===Y)return Gn(s)}throw Error(r(438,String(s)))}function cp(s){var i=null,o=Ge.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=Ge.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=sd(),Ge.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),c=0;c<s;c++)o[c]=F;return i.index++,o}function na(s,i){return typeof i=="function"?i(s):i}function ad(s){var i=dn();return up(i,wt,s)}function up(s,i,o){var c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var f=s.baseQueue,y=c.pending;if(y!==null){if(f!==null){var w=f.next;f.next=y.next,y.next=w}i.baseQueue=f=y,c.pending=null}if(y=s.baseState,f===null)s.memoizedState=y;else{i=f.next;var R=w=null,z=null,Z=i,ie=!1;do{var ue=Z.lane&-536870913;if(ue!==Z.lane?(nt&ue)===ue:(ta&ue)===ue){var te=Z.revertLane;if(te===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ue===kl&&(ie=!0);else if((ta&te)===te){Z=Z.next,te===kl&&(ie=!0);continue}else ue={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(R=z=ue,w=y):z=z.next=ue,Ge.lanes|=te,$a|=te;ue=Z.action,Xo&&o(y,ue),y=Z.hasEagerState?Z.eagerState:o(y,ue)}else te={lane:ue,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(R=z=te,w=y):z=z.next=te,Ge.lanes|=ue,$a|=ue;Z=Z.next}while(Z!==null&&Z!==i);if(z===null?w=y:z.next=R,!Qr(y,s.memoizedState)&&(vn=!0,ie&&(o=Ml,o!==null)))throw o;s.memoizedState=y,s.baseState=w,s.baseQueue=z,c.lastRenderedState=y}return f===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function hp(s){var i=dn(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var c=o.dispatch,f=o.pending,y=i.memoizedState;if(f!==null){o.pending=null;var w=f=f.next;do y=s(y,w.action),w=w.next;while(w!==f);Qr(y,i.memoizedState)||(vn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,c]}function s1(s,i,o){var c=Ge,f=dn(),y=lt;if(y){if(o===void 0)throw Error(r(407));o=o()}else o=i();var w=!Qr((wt||f).memoizedState,o);if(w&&(f.memoizedState=o,vn=!0),f=f.queue,mp(o1.bind(null,c,f,s),[s]),f.getSnapshot!==i||w||yn!==null&&yn.memoizedState.tag&1){if(c.flags|=2048,zl(9,{destroy:void 0},a1.bind(null,c,f,o,i),null),Ct===null)throw Error(r(349));y||(ta&127)!==0||i1(c,i,o)}return o}function i1(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=Ge.updateQueue,i===null?(i=sd(),Ge.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function a1(s,i,o,c){i.value=o,i.getSnapshot=c,l1(i)&&c1(s)}function o1(s,i,o){return o(function(){l1(i)&&c1(s)})}function l1(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!Qr(s,o)}catch{return!0}}function c1(s){var i=Bo(s,2);i!==null&&kr(i,s,2)}function dp(s){var i=br();if(typeof s=="function"){var o=s;if(s=o(),Xo){Tn(!0);try{o()}finally{Tn(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:s},i}function u1(s,i,o,c){return s.baseState=o,up(s,wt,typeof c=="function"?c:na)}function e2(s,i,o,c,f){if(cd(s))throw Error(r(485));if(s=i.action,s!==null){var y={payload:f,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};H.T!==null?o(!0):y.isTransition=!1,c(y),o=i.pending,o===null?(y.next=i.pending=y,h1(i,y)):(y.next=o.next,i.pending=o.next=y)}}function h1(s,i){var o=i.action,c=i.payload,f=s.state;if(i.isTransition){var y=H.T,w={};H.T=w;try{var R=o(f,c),z=H.S;z!==null&&z(w,R),d1(s,i,R)}catch(Z){fp(s,i,Z)}finally{y!==null&&w.types!==null&&(y.types=w.types),H.T=y}}else try{y=o(f,c),d1(s,i,y)}catch(Z){fp(s,i,Z)}}function d1(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){f1(s,i,c)},function(c){return fp(s,i,c)}):f1(s,i,o)}function f1(s,i,o){i.status="fulfilled",i.value=o,m1(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,h1(s,o)))}function fp(s,i,o){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,m1(i),i=i.next;while(i!==c)}s.action=null}function m1(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function p1(s,i){return i}function g1(s,i){if(lt){var o=Ct.formState;if(o!==null){e:{var c=Ge;if(lt){if(Vt){t:{for(var f=Vt,y=Es;f.nodeType!==8;){if(!y){f=null;break t}if(f=Ts(f.nextSibling),f===null){f=null;break t}}y=f.data,f=y==="F!"||y==="F"?f:null}if(f){Vt=Ts(f.nextSibling),c=f.data==="F!";break e}}Pa(c)}c=!1}c&&(i=o[0])}}return o=br(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p1,lastRenderedState:i},o.queue=c,o=k1.bind(null,Ge,c),c.dispatch=o,c=dp(!1),y=bp.bind(null,Ge,!1,c.queue),c=br(),f={state:i,dispatch:null,action:s,pending:null},c.queue=f,o=e2.bind(null,Ge,f,y,o),f.dispatch=o,c.memoizedState=s,[i,o,!1]}function y1(s){var i=dn();return v1(i,wt,s)}function v1(s,i,o){if(i=up(s,i,p1)[0],s=ad(na)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=nu(i)}catch(w){throw w===Pl?Xh:w}else c=i;i=dn();var f=i.queue,y=f.dispatch;return o!==i.memoizedState&&(Ge.flags|=2048,zl(9,{destroy:void 0},t2.bind(null,f,o),null)),[c,y,s]}function t2(s,i){s.action=i}function b1(s){var i=dn(),o=wt;if(o!==null)return v1(i,o,s);dn(),i=i.memoizedState,o=dn();var c=o.queue.dispatch;return o.memoizedState=s,[i,c,!1]}function zl(s,i,o,c){return s={tag:s,create:o,deps:c,inst:i,next:null},i=Ge.updateQueue,i===null&&(i=sd(),Ge.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(c=o.next,o.next=s,s.next=c,i.lastEffect=s),s}function _1(){return dn().memoizedState}function od(s,i,o,c){var f=br();Ge.flags|=s,f.memoizedState=zl(1|i,{destroy:void 0},o,c===void 0?null:c)}function ld(s,i,o,c){var f=dn();c=c===void 0?null:c;var y=f.memoizedState.inst;wt!==null&&c!==null&&sp(c,wt.memoizedState.deps)?f.memoizedState=zl(i,y,o,c):(Ge.flags|=s,f.memoizedState=zl(1|i,y,o,c))}function x1(s,i){od(8390656,8,s,i)}function mp(s,i){ld(2048,8,s,i)}function n2(s){Ge.flags|=4;var i=Ge.updateQueue;if(i===null)i=sd(),Ge.updateQueue=i,i.events=[s];else{var o=i.events;o===null?i.events=[s]:o.push(s)}}function E1(s){var i=dn().memoizedState;return n2({ref:i,nextImpl:s}),function(){if((pt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function w1(s,i){return ld(4,2,s,i)}function T1(s,i){return ld(4,4,s,i)}function A1(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function S1(s,i,o){o=o!=null?o.concat([s]):null,ld(4,4,A1.bind(null,i,s),o)}function pp(){}function N1(s,i){var o=dn();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&sp(i,c[1])?c[0]:(o.memoizedState=[s,i],s)}function C1(s,i){var o=dn();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&sp(i,c[1]))return c[0];if(c=s(),Xo){Tn(!0);try{s()}finally{Tn(!1)}}return o.memoizedState=[c,i],c}function gp(s,i,o){return o===void 0||(ta&1073741824)!==0&&(nt&261930)===0?s.memoizedState=i:(s.memoizedState=o,s=Ib(),Ge.lanes|=s,$a|=s,o)}function R1(s,i,o,c){return Qr(o,i)?o:Ul.current!==null?(s=gp(s,o,c),Qr(s,i)||(vn=!0),s):(ta&42)===0||(ta&1073741824)!==0&&(nt&261930)===0?(vn=!0,s.memoizedState=o):(s=Ib(),Ge.lanes|=s,$a|=s,i)}function I1(s,i,o,c,f){var y=J.p;J.p=y!==0&&8>y?y:8;var w=H.T,R={};H.T=R,bp(s,!1,i,o);try{var z=f(),Z=H.S;if(Z!==null&&Z(R,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ie=WN(z,c);ru(s,i,ie,es(s))}else ru(s,i,c,es(s))}catch(ue){ru(s,i,{then:function(){},status:"rejected",reason:ue},es())}finally{J.p=y,w!==null&&R.types!==null&&(w.types=R.types),H.T=w}}function r2(){}function yp(s,i,o,c){if(s.tag!==5)throw Error(r(476));var f=O1(s).queue;I1(s,f,i,ce,o===null?r2:function(){return D1(s),o(c)})}function O1(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:ce},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function D1(s){var i=O1(s);i.next===null&&(i=s.alternate.memoizedState),ru(s,i.next.queue,{},es())}function vp(){return Gn(_u)}function L1(){return dn().memoizedState}function j1(){return dn().memoizedState}function s2(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=es();s=qa(o);var c=Ba(i,s,o);c!==null&&(kr(c,i,o),Zc(c,i,o)),i={cache:Km()},s.payload=i;return}i=i.return}}function i2(s,i,o){var c=es();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},cd(s)?M1(i,o):(o=Mm(s,i,o,c),o!==null&&(kr(o,s,c),P1(o,i,c)))}function k1(s,i,o){var c=es();ru(s,i,o,c)}function ru(s,i,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(cd(s))M1(i,f);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var w=i.lastRenderedState,R=y(w,o);if(f.hasEagerState=!0,f.eagerState=R,Qr(R,w))return Hh(s,i,f,0),Ct===null&&zh(),!1}catch{}finally{}if(o=Mm(s,i,f,c),o!==null)return kr(o,s,c),P1(o,i,c),!0}return!1}function bp(s,i,o,c){if(c={lane:2,revertLane:Wp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},cd(s)){if(i)throw Error(r(479))}else i=Mm(s,o,c,2),i!==null&&kr(i,s,2)}function cd(s){var i=s.alternate;return s===Ge||i!==null&&i===Ge}function M1(s,i){ql=nd=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function P1(s,i,o){if((o&4194048)!==0){var c=i.lanes;c&=s.pendingLanes,o|=c,i.lanes=o,zi(s,o)}}var su={readContext:Gn,use:id,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};su.useEffectEvent=an;var V1={readContext:Gn,use:id,useCallback:function(s,i){return br().memoizedState=[s,i===void 0?null:i],s},useContext:Gn,useEffect:x1,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,od(4194308,4,A1.bind(null,i,s),o)},useLayoutEffect:function(s,i){return od(4194308,4,s,i)},useInsertionEffect:function(s,i){od(4,2,s,i)},useMemo:function(s,i){var o=br();i=i===void 0?null:i;var c=s();if(Xo){Tn(!0);try{s()}finally{Tn(!1)}}return o.memoizedState=[c,i],c},useReducer:function(s,i,o){var c=br();if(o!==void 0){var f=o(i);if(Xo){Tn(!0);try{o(i)}finally{Tn(!1)}}}else f=i;return c.memoizedState=c.baseState=f,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:f},c.queue=s,s=s.dispatch=i2.bind(null,Ge,s),[c.memoizedState,s]},useRef:function(s){var i=br();return s={current:s},i.memoizedState=s},useState:function(s){s=dp(s);var i=s.queue,o=k1.bind(null,Ge,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:pp,useDeferredValue:function(s,i){var o=br();return gp(o,s,i)},useTransition:function(){var s=dp(!1);return s=I1.bind(null,Ge,s.queue,!0,!1),br().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var c=Ge,f=br();if(lt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),Ct===null)throw Error(r(349));(nt&127)!==0||i1(c,i,o)}f.memoizedState=o;var y={value:o,getSnapshot:i};return f.queue=y,x1(o1.bind(null,c,y,s),[s]),c.flags|=2048,zl(9,{destroy:void 0},a1.bind(null,c,y,o,i),null),o},useId:function(){var s=br(),i=Ct.identifierPrefix;if(lt){var o=yi,c=gi;o=(c&~(1<<32-Dt(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=rd++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=ZN++,i="_"+i+"r_"+o.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:vp,useFormState:g1,useActionState:g1,useOptimistic:function(s){var i=br();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=bp.bind(null,Ge,!0,o),o.dispatch=i,[s,i]},useMemoCache:cp,useCacheRefresh:function(){return br().memoizedState=s2.bind(null,Ge)},useEffectEvent:function(s){var i=br(),o={impl:s};return i.memoizedState=o,function(){if((pt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},_p={readContext:Gn,use:id,useCallback:N1,useContext:Gn,useEffect:mp,useImperativeHandle:S1,useInsertionEffect:w1,useLayoutEffect:T1,useMemo:C1,useReducer:ad,useRef:_1,useState:function(){return ad(na)},useDebugValue:pp,useDeferredValue:function(s,i){var o=dn();return R1(o,wt.memoizedState,s,i)},useTransition:function(){var s=ad(na)[0],i=dn().memoizedState;return[typeof s=="boolean"?s:nu(s),i]},useSyncExternalStore:s1,useId:L1,useHostTransitionStatus:vp,useFormState:y1,useActionState:y1,useOptimistic:function(s,i){var o=dn();return u1(o,wt,s,i)},useMemoCache:cp,useCacheRefresh:j1};_p.useEffectEvent=E1;var U1={readContext:Gn,use:id,useCallback:N1,useContext:Gn,useEffect:mp,useImperativeHandle:S1,useInsertionEffect:w1,useLayoutEffect:T1,useMemo:C1,useReducer:hp,useRef:_1,useState:function(){return hp(na)},useDebugValue:pp,useDeferredValue:function(s,i){var o=dn();return wt===null?gp(o,s,i):R1(o,wt.memoizedState,s,i)},useTransition:function(){var s=hp(na)[0],i=dn().memoizedState;return[typeof s=="boolean"?s:nu(s),i]},useSyncExternalStore:s1,useId:L1,useHostTransitionStatus:vp,useFormState:b1,useActionState:b1,useOptimistic:function(s,i){var o=dn();return wt!==null?u1(o,wt,s,i):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:cp,useCacheRefresh:j1};U1.useEffectEvent=E1;function xp(s,i,o,c){i=s.memoizedState,o=o(c,i),o=o==null?i:x({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Ep={enqueueSetState:function(s,i,o){s=s._reactInternals;var c=es(),f=qa(c);f.payload=i,o!=null&&(f.callback=o),i=Ba(s,f,c),i!==null&&(kr(i,s,c),Zc(i,s,c))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var c=es(),f=qa(c);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Ba(s,f,c),i!==null&&(kr(i,s,c),Zc(i,s,c))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=es(),c=qa(o);c.tag=2,i!=null&&(c.callback=i),i=Ba(s,c,o),i!==null&&(kr(i,s,o),Zc(i,s,o))}};function q1(s,i,o,c,f,y,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,y,w):i.prototype&&i.prototype.isPureReactComponent?!Fc(o,c)||!Fc(f,y):!0}function B1(s,i,o,c){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==s&&Ep.enqueueReplaceState(i,i.state,null)}function Wo(s,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(s=s.defaultProps){o===i&&(o=x({},o));for(var f in s)o[f]===void 0&&(o[f]=s[f])}return o}function z1(s){Bh(s)}function H1(s){console.error(s)}function F1(s){Bh(s)}function ud(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function G1(s,i,o){try{var c=s.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function wp(s,i,o){return o=qa(o),o.tag=3,o.payload={element:null},o.callback=function(){ud(s,i)},o}function $1(s){return s=qa(s),s.tag=3,s}function K1(s,i,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var y=c.value;s.payload=function(){return f(y)},s.callback=function(){G1(i,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){G1(i,o,c),typeof f!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function a2(s,i,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&jl(i,o,f,!0),o=Xr.current,o!==null){switch(o.tag){case 31:case 13:return ws===null?Ed():o.alternate===null&&on===0&&(on=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Wh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),Qp(s,c,f)),!1;case 22:return o.flags|=65536,c===Wh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),Qp(s,c,f)),!1}throw Error(r(435,o.tag))}return Qp(s,c,f),Ed(),!1}if(lt)return i=Xr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==zm&&(s=Error(r(422),{cause:c}),Kc(bs(s,o)))):(c!==zm&&(i=Error(r(423),{cause:c}),Kc(bs(i,o))),s=s.current.alternate,s.flags|=65536,f&=-f,s.lanes|=f,c=bs(c,o),f=wp(s.stateNode,c,f),Jm(s,f),on!==4&&(on=2)),!1;var y=Error(r(520),{cause:c});if(y=bs(y,o),du===null?du=[y]:du.push(y),on!==4&&(on=2),i===null)return!0;c=bs(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=f&-f,o.lanes|=s,s=wp(o.stateNode,c,s),Jm(o,s),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ka===null||!Ka.has(y))))return o.flags|=65536,f&=-f,o.lanes|=f,f=$1(f),K1(f,s,o,c),Jm(o,f),!1}o=o.return}while(o!==null);return!1}var Tp=Error(r(461)),vn=!1;function $n(s,i,o,c){i.child=s===null?Wv(i,null,o,c):Yo(i,s.child,o,c)}function Q1(s,i,o,c,f){o=o.render;var y=i.ref;if("ref"in c){var w={};for(var R in c)R!=="ref"&&(w[R]=c[R])}else w=c;return Go(i),c=ip(s,i,o,w,y,f),R=ap(),s!==null&&!vn?(op(s,i,f),ra(s,i,f)):(lt&&R&&qm(i),i.flags|=1,$n(s,i,c,f),i.child)}function Y1(s,i,o,c,f){if(s===null){var y=o.type;return typeof y=="function"&&!Pm(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,X1(s,i,y,c,f)):(s=Gh(o.type,null,c,i,i.mode,f),s.ref=i.ref,s.return=i,i.child=s)}if(y=s.child,!Dp(s,f)){var w=y.memoizedProps;if(o=o.compare,o=o!==null?o:Fc,o(w,c)&&s.ref===i.ref)return ra(s,i,f)}return i.flags|=1,s=Wi(y,c),s.ref=i.ref,s.return=i,i.child=s}function X1(s,i,o,c,f){if(s!==null){var y=s.memoizedProps;if(Fc(y,c)&&s.ref===i.ref)if(vn=!1,i.pendingProps=c=y,Dp(s,f))(s.flags&131072)!==0&&(vn=!0);else return i.lanes=s.lanes,ra(s,i,f)}return Ap(s,i,o,c,f)}function W1(s,i,o,c){var f=c.children,y=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,s!==null){for(c=i.child=s.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~y}else c=0,i.child=null;return Z1(s,i,y,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&Yh(i,y!==null?y.cachePool:null),y!==null?e1(i,y):tp(),t1(i);else return c=i.lanes=536870912,Z1(s,i,y!==null?y.baseLanes|o:o,o,c)}else y!==null?(Yh(i,y.cachePool),e1(i,y),Ha(),i.memoizedState=null):(s!==null&&Yh(i,null),tp(),Ha());return $n(s,i,f,o),i.child}function iu(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Z1(s,i,o,c,f){var y=Ym();return y=y===null?null:{parent:gn._currentValue,pool:y},i.memoizedState={baseLanes:o,cachePool:y},s!==null&&Yh(i,null),tp(),t1(i),s!==null&&jl(s,i,c,!0),i.childLanes=f,null}function hd(s,i){return i=fd({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function J1(s,i,o){return Yo(i,s.child,null,o),s=hd(i,i.pendingProps),s.flags|=2,Wr(i),i.memoizedState=null,s}function o2(s,i,o){var c=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(lt){if(c.mode==="hidden")return s=hd(i,c),i.lanes=536870912,iu(null,s);if(rp(i),(s=Vt)?(s=d_(s,Es),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:ka!==null?{id:gi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},o=Mv(s),o.return=i,i.child=o,Fn=i,Vt=null)):s=null,s===null)throw Pa(i);return i.lanes=536870912,null}return hd(i,c)}var y=s.memoizedState;if(y!==null){var w=y.dehydrated;if(rp(i),f)if(i.flags&256)i.flags&=-257,i=J1(s,i,o);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(r(558));else if(vn||jl(s,i,o,!1),f=(o&s.childLanes)!==0,vn||f){if(c=Ct,c!==null&&(w=Hi(c,o),w!==0&&w!==y.retryLane))throw y.retryLane=w,Bo(s,w),kr(c,s,w),Tp;Ed(),i=J1(s,i,o)}else s=y.treeContext,Vt=Ts(w.nextSibling),Fn=i,lt=!0,Ma=null,Es=!1,s!==null&&Uv(i,s),i=hd(i,c),i.flags|=4096;return i}return s=Wi(s.child,{mode:c.mode,children:c.children}),s.ref=i.ref,i.child=s,s.return=i,s}function dd(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(i.flags|=4194816)}}function Ap(s,i,o,c,f){return Go(i),o=ip(s,i,o,c,void 0,f),c=ap(),s!==null&&!vn?(op(s,i,f),ra(s,i,f)):(lt&&c&&qm(i),i.flags|=1,$n(s,i,o,f),i.child)}function eb(s,i,o,c,f,y){return Go(i),i.updateQueue=null,o=r1(i,c,o,f),n1(s),c=ap(),s!==null&&!vn?(op(s,i,y),ra(s,i,y)):(lt&&c&&qm(i),i.flags|=1,$n(s,i,o,y),i.child)}function tb(s,i,o,c,f){if(Go(i),i.stateNode===null){var y=Il,w=o.contextType;typeof w=="object"&&w!==null&&(y=Gn(w)),y=new o(c,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ep,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=c,y.state=i.memoizedState,y.refs={},Wm(i),w=o.contextType,y.context=typeof w=="object"&&w!==null?Gn(w):Il,y.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(xp(i,o,w,c),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&Ep.enqueueReplaceState(y,y.state,null),eu(i,c,y,f),Jc(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(s===null){y=i.stateNode;var R=i.memoizedProps,z=Wo(o,R);y.props=z;var Z=y.context,ie=o.contextType;w=Il,typeof ie=="object"&&ie!==null&&(w=Gn(ie));var ue=o.getDerivedStateFromProps;ie=typeof ue=="function"||typeof y.getSnapshotBeforeUpdate=="function",R=i.pendingProps!==R,ie||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(R||Z!==w)&&B1(i,y,c,w),Ua=!1;var te=i.memoizedState;y.state=te,eu(i,c,y,f),Jc(),Z=i.memoizedState,R||te!==Z||Ua?(typeof ue=="function"&&(xp(i,o,ue,c),Z=i.memoizedState),(z=Ua||q1(i,o,z,c,te,Z,w))?(ie||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=Z),y.props=c,y.state=Z,y.context=w,c=z):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{y=i.stateNode,Zm(s,i),w=i.memoizedProps,ie=Wo(o,w),y.props=ie,ue=i.pendingProps,te=y.context,Z=o.contextType,z=Il,typeof Z=="object"&&Z!==null&&(z=Gn(Z)),R=o.getDerivedStateFromProps,(Z=typeof R=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==ue||te!==z)&&B1(i,y,c,z),Ua=!1,te=i.memoizedState,y.state=te,eu(i,c,y,f),Jc();var se=i.memoizedState;w!==ue||te!==se||Ua||s!==null&&s.dependencies!==null&&Kh(s.dependencies)?(typeof R=="function"&&(xp(i,o,R,c),se=i.memoizedState),(ie=Ua||q1(i,o,ie,c,te,se,z)||s!==null&&s.dependencies!==null&&Kh(s.dependencies))?(Z||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,se,z),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,se,z)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=se),y.props=c,y.state=se,y.context=z,c=ie):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),c=!1)}return y=c,dd(s,i),c=(i.flags&128)!==0,y||c?(y=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,s!==null&&c?(i.child=Yo(i,s.child,null,f),i.child=Yo(i,null,o,f)):$n(s,i,o,f),i.memoizedState=y.state,s=i.child):s=ra(s,i,f),s}function nb(s,i,o,c){return Ho(),i.flags|=256,$n(s,i,o,c),i.child}var Sp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Np(s){return{baseLanes:s,cachePool:Gv()}}function Cp(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=Jr),s}function rb(s,i,o){var c=i.pendingProps,f=!1,y=(i.flags&128)!==0,w;if((w=y)||(w=s!==null&&s.memoizedState===null?!1:(hn.current&2)!==0),w&&(f=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,s===null){if(lt){if(f?za(i):Ha(),(s=Vt)?(s=d_(s,Es),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:ka!==null?{id:gi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},o=Mv(s),o.return=i,i.child=o,Fn=i,Vt=null)):s=null,s===null)throw Pa(i);return ug(s)?i.lanes=32:i.lanes=536870912,null}var R=c.children;return c=c.fallback,f?(Ha(),f=i.mode,R=fd({mode:"hidden",children:R},f),c=zo(c,f,o,null),R.return=i,c.return=i,R.sibling=c,i.child=R,c=i.child,c.memoizedState=Np(o),c.childLanes=Cp(s,w,o),i.memoizedState=Sp,iu(null,c)):(za(i),Rp(i,R))}var z=s.memoizedState;if(z!==null&&(R=z.dehydrated,R!==null)){if(y)i.flags&256?(za(i),i.flags&=-257,i=Ip(s,i,o)):i.memoizedState!==null?(Ha(),i.child=s.child,i.flags|=128,i=null):(Ha(),R=c.fallback,f=i.mode,c=fd({mode:"visible",children:c.children},f),R=zo(R,f,o,null),R.flags|=2,c.return=i,R.return=i,c.sibling=R,i.child=c,Yo(i,s.child,null,o),c=i.child,c.memoizedState=Np(o),c.childLanes=Cp(s,w,o),i.memoizedState=Sp,i=iu(null,c));else if(za(i),ug(R)){if(w=R.nextSibling&&R.nextSibling.dataset,w)var Z=w.dgst;w=Z,c=Error(r(419)),c.stack="",c.digest=w,Kc({value:c,source:null,stack:null}),i=Ip(s,i,o)}else if(vn||jl(s,i,o,!1),w=(o&s.childLanes)!==0,vn||w){if(w=Ct,w!==null&&(c=Hi(w,o),c!==0&&c!==z.retryLane))throw z.retryLane=c,Bo(s,c),kr(w,s,c),Tp;cg(R)||Ed(),i=Ip(s,i,o)}else cg(R)?(i.flags|=192,i.child=s.child,i=null):(s=z.treeContext,Vt=Ts(R.nextSibling),Fn=i,lt=!0,Ma=null,Es=!1,s!==null&&Uv(i,s),i=Rp(i,c.children),i.flags|=4096);return i}return f?(Ha(),R=c.fallback,f=i.mode,z=s.child,Z=z.sibling,c=Wi(z,{mode:"hidden",children:c.children}),c.subtreeFlags=z.subtreeFlags&65011712,Z!==null?R=Wi(Z,R):(R=zo(R,f,o,null),R.flags|=2),R.return=i,c.return=i,c.sibling=R,i.child=c,iu(null,c),c=i.child,R=s.child.memoizedState,R===null?R=Np(o):(f=R.cachePool,f!==null?(z=gn._currentValue,f=f.parent!==z?{parent:z,pool:z}:f):f=Gv(),R={baseLanes:R.baseLanes|o,cachePool:f}),c.memoizedState=R,c.childLanes=Cp(s,w,o),i.memoizedState=Sp,iu(s.child,c)):(za(i),o=s.child,s=o.sibling,o=Wi(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,s!==null&&(w=i.deletions,w===null?(i.deletions=[s],i.flags|=16):w.push(s)),i.child=o,i.memoizedState=null,o)}function Rp(s,i){return i=fd({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function fd(s,i){return s=Yr(22,s,null,i),s.lanes=0,s}function Ip(s,i,o){return Yo(i,s.child,null,o),s=Rp(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function sb(s,i,o){s.lanes|=i;var c=s.alternate;c!==null&&(c.lanes|=i),Gm(s.return,i,o)}function Op(s,i,o,c,f,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:y}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=o,w.tailMode=f,w.treeForkCount=y)}function ib(s,i,o){var c=i.pendingProps,f=c.revealOrder,y=c.tail;c=c.children;var w=hn.current,R=(w&2)!==0;if(R?(w=w&1|2,i.flags|=128):w&=1,he(hn,w),$n(s,i,c,o),c=lt?$c:0,!R&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&sb(s,o,i);else if(s.tag===19)sb(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)s=o.alternate,s!==null&&td(s)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Op(i,!1,f,o,y,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(s=f.alternate,s!==null&&td(s)===null){i.child=f;break}s=f.sibling,f.sibling=o,o=f,f=s}Op(i,!0,o,null,y,c);break;case"together":Op(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function ra(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),$a|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(jl(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,o=Wi(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=Wi(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function Dp(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&Kh(s)))}function l2(s,i,o){switch(i.tag){case 3:Ie(i,i.stateNode.containerInfo),Va(i,gn,s.memoizedState.cache),Ho();break;case 27:case 5:Qe(i);break;case 4:Ie(i,i.stateNode.containerInfo);break;case 10:Va(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,rp(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(za(i),i.flags|=128,null):(o&i.child.childLanes)!==0?rb(s,i,o):(za(i),s=ra(s,i,o),s!==null?s.sibling:null);za(i);break;case 19:var f=(s.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(jl(s,i,o,!1),c=(o&i.childLanes)!==0),f){if(c)return ib(s,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),he(hn,hn.current),c)break;return null;case 22:return i.lanes=0,W1(s,i,o,i.pendingProps);case 24:Va(i,gn,s.memoizedState.cache)}return ra(s,i,o)}function ab(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)vn=!0;else{if(!Dp(s,o)&&(i.flags&128)===0)return vn=!1,l2(s,i,o);vn=(s.flags&131072)!==0}else vn=!1,lt&&(i.flags&1048576)!==0&&Vv(i,$c,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(s=Ko(i.elementType),i.type=s,typeof s=="function")Pm(s)?(c=Wo(s,c),i.tag=1,i=tb(null,i,s,c,o)):(i.tag=0,i=Ap(null,i,s,c,o));else{if(s!=null){var f=s.$$typeof;if(f===ee){i.tag=11,i=Q1(null,i,s,c,o);break e}else if(f===M){i.tag=14,i=Y1(null,i,s,c,o);break e}}throw i=ge(s)||s,Error(r(306,i,""))}}return i;case 0:return Ap(s,i,i.type,i.pendingProps,o);case 1:return c=i.type,f=Wo(c,i.pendingProps),tb(s,i,c,f,o);case 3:e:{if(Ie(i,i.stateNode.containerInfo),s===null)throw Error(r(387));c=i.pendingProps;var y=i.memoizedState;f=y.element,Zm(s,i),eu(i,c,null,o);var w=i.memoizedState;if(c=w.cache,Va(i,gn,c),c!==y.cache&&$m(i,[gn],o,!0),Jc(),c=w.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=nb(s,i,c,o);break e}else if(c!==f){f=bs(Error(r(424)),i),Kc(f),i=nb(s,i,c,o);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Vt=Ts(s.firstChild),Fn=i,lt=!0,Ma=null,Es=!0,o=Wv(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ho(),c===f){i=ra(s,i,o);break e}$n(s,i,c,o)}i=i.child}return i;case 26:return dd(s,i),s===null?(o=v_(i.type,null,i.pendingProps,null))?i.memoizedState=o:lt||(o=i.type,s=i.pendingProps,c=Rd(Te.current).createElement(o),c[Ft]=i,c[rn]=s,Kn(c,o,s),Gt(c),i.stateNode=c):i.memoizedState=v_(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return Qe(i),s===null&&lt&&(c=i.stateNode=p_(i.type,i.pendingProps,Te.current),Fn=i,Es=!0,f=Vt,Wa(i.type)?(hg=f,Vt=Ts(c.firstChild)):Vt=f),$n(s,i,i.pendingProps.children,o),dd(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&lt&&((f=c=Vt)&&(c=V2(c,i.type,i.pendingProps,Es),c!==null?(i.stateNode=c,Fn=i,Vt=Ts(c.firstChild),Es=!1,f=!0):f=!1),f||Pa(i)),Qe(i),f=i.type,y=i.pendingProps,w=s!==null?s.memoizedProps:null,c=y.children,ag(f,y)?c=null:w!==null&&ag(f,w)&&(i.flags|=32),i.memoizedState!==null&&(f=ip(s,i,JN,null,null,o),_u._currentValue=f),dd(s,i),$n(s,i,c,o),i.child;case 6:return s===null&&lt&&((s=o=Vt)&&(o=U2(o,i.pendingProps,Es),o!==null?(i.stateNode=o,Fn=i,Vt=null,s=!0):s=!1),s||Pa(i)),null;case 13:return rb(s,i,o);case 4:return Ie(i,i.stateNode.containerInfo),c=i.pendingProps,s===null?i.child=Yo(i,null,c,o):$n(s,i,c,o),i.child;case 11:return Q1(s,i,i.type,i.pendingProps,o);case 7:return $n(s,i,i.pendingProps,o),i.child;case 8:return $n(s,i,i.pendingProps.children,o),i.child;case 12:return $n(s,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Va(i,i.type,c.value),$n(s,i,c.children,o),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,Go(i),f=Gn(f),c=c(f),i.flags|=1,$n(s,i,c,o),i.child;case 14:return Y1(s,i,i.type,i.pendingProps,o);case 15:return X1(s,i,i.type,i.pendingProps,o);case 19:return ib(s,i,o);case 31:return o2(s,i,o);case 22:return W1(s,i,o,i.pendingProps);case 24:return Go(i),c=Gn(gn),s===null?(f=Ym(),f===null&&(f=Ct,y=Km(),f.pooledCache=y,y.refCount++,y!==null&&(f.pooledCacheLanes|=o),f=y),i.memoizedState={parent:c,cache:f},Wm(i),Va(i,gn,f)):((s.lanes&o)!==0&&(Zm(s,i),eu(i,null,null,o),Jc()),f=s.memoizedState,y=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Va(i,gn,c)):(c=y.cache,Va(i,gn,c),c!==f.cache&&$m(i,[gn],o,!0))),$n(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function sa(s){s.flags|=4}function Lp(s,i,o,c,f){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(f&335544128)===f)if(s.stateNode.complete)s.flags|=8192;else if(jb())s.flags|=8192;else throw Qo=Wh,Xm}else s.flags&=-16777217}function ob(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!w_(i))if(jb())s.flags|=8192;else throw Qo=Wh,Xm}function md(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?oi():536870912,s.lanes|=i,$l|=i)}function au(s,i){if(!lt)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function Ut(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,c=0;if(i)for(var f=s.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=s,f=f.sibling;else for(f=s.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=s,f=f.sibling;return s.subtreeFlags|=c,s.childLanes=o,i}function c2(s,i,o){var c=i.pendingProps;switch(Bm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(i),null;case 1:return Ut(i),null;case 3:return o=i.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),ea(gn),Le(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(Ll(i)?sa(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Hm())),Ut(i),null;case 26:var f=i.type,y=i.memoizedState;return s===null?(sa(i),y!==null?(Ut(i),ob(i,y)):(Ut(i),Lp(i,f,null,c,o))):y?y!==s.memoizedState?(sa(i),Ut(i),ob(i,y)):(Ut(i),i.flags&=-16777217):(s=s.memoizedProps,s!==c&&sa(i),Ut(i),Lp(i,f,s,c,o)),null;case 27:if(We(i),o=Te.current,f=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==c&&sa(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return Ut(i),null}s=me.current,Ll(i)?qv(i):(s=p_(f,c,o),i.stateNode=s,sa(i))}return Ut(i),null;case 5:if(We(i),f=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==c&&sa(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return Ut(i),null}if(y=me.current,Ll(i))qv(i);else{var w=Rd(Te.current);switch(y){case 1:y=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:y=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":y=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":y=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":y=w.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?w.createElement(f,{is:c.is}):w.createElement(f)}}y[Ft]=i,y[rn]=c;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)y.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=y;e:switch(Kn(y,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&sa(i)}}return Ut(i),Lp(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,o),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==c&&sa(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(s=Te.current,Ll(i)){if(s=i.stateNode,o=i.memoizedProps,c=null,f=Fn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}s[Ft]=i,s=!!(s.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||s_(s.nodeValue,o)),s||Pa(i,!0)}else s=Rd(s).createTextNode(c),s[Ft]=i,i.stateNode=s}return Ut(i),null;case 31:if(o=i.memoizedState,s===null||s.memoizedState!==null){if(c=Ll(i),o!==null){if(s===null){if(!c)throw Error(r(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Ft]=i}else Ho(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ut(i),s=!1}else o=Hm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return i.flags&256?(Wr(i),i):(Wr(i),null);if((i.flags&128)!==0)throw Error(r(558))}return Ut(i),null;case 13:if(c=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(f=Ll(i),c!==null&&c.dehydrated!==null){if(s===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ft]=i}else Ho(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ut(i),f=!1}else f=Hm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Wr(i),i):(Wr(i),null)}return Wr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,s=s!==null&&s.memoizedState!==null,o&&(c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==f&&(c.flags|=2048)),o!==s&&o&&(i.child.flags|=8192),md(i,i.updateQueue),Ut(i),null);case 4:return Le(),s===null&&tg(i.stateNode.containerInfo),Ut(i),null;case 10:return ea(i.type),Ut(i),null;case 19:if(X(hn),c=i.memoizedState,c===null)return Ut(i),null;if(f=(i.flags&128)!==0,y=c.rendering,y===null)if(f)au(c,!1);else{if(on!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(y=td(s),y!==null){for(i.flags|=128,au(c,!1),s=y.updateQueue,i.updateQueue=s,md(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)kv(o,s),o=o.sibling;return he(hn,hn.current&1|2),lt&&Zi(i,c.treeForkCount),i.child}s=s.sibling}c.tail!==null&&Ot()>bd&&(i.flags|=128,f=!0,au(c,!1),i.lanes=4194304)}else{if(!f)if(s=td(y),s!==null){if(i.flags|=128,f=!0,s=s.updateQueue,i.updateQueue=s,md(i,s),au(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!lt)return Ut(i),null}else 2*Ot()-c.renderingStartTime>bd&&o!==536870912&&(i.flags|=128,f=!0,au(c,!1),i.lanes=4194304);c.isBackwards?(y.sibling=i.child,i.child=y):(s=c.last,s!==null?s.sibling=y:i.child=y,c.last=y)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Ot(),s.sibling=null,o=hn.current,he(hn,f?o&1|2:o&1),lt&&Zi(i,c.treeForkCount),s):(Ut(i),null);case 22:case 23:return Wr(i),np(),c=i.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(Ut(i),i.subtreeFlags&6&&(i.flags|=8192)):Ut(i),o=i.updateQueue,o!==null&&md(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),s!==null&&X($o),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ea(gn),Ut(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function u2(s,i){switch(Bm(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return ea(gn),Le(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return We(i),null;case 31:if(i.memoizedState!==null){if(Wr(i),i.alternate===null)throw Error(r(340));Ho()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(Wr(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ho()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return X(hn),null;case 4:return Le(),null;case 10:return ea(i.type),null;case 22:case 23:return Wr(i),np(),s!==null&&X($o),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return ea(gn),null;case 25:return null;default:return null}}function lb(s,i){switch(Bm(i),i.tag){case 3:ea(gn),Le();break;case 26:case 27:case 5:We(i);break;case 4:Le();break;case 31:i.memoizedState!==null&&Wr(i);break;case 13:Wr(i);break;case 19:X(hn);break;case 10:ea(i.type);break;case 22:case 23:Wr(i),np(),s!==null&&X($o);break;case 24:ea(gn)}}function ou(s,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&s)===s){c=void 0;var y=o.create,w=o.inst;c=y(),w.destroy=c}o=o.next}while(o!==f)}}catch(R){xt(i,i.return,R)}}function Fa(s,i,o){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var y=f.next;c=y;do{if((c.tag&s)===s){var w=c.inst,R=w.destroy;if(R!==void 0){w.destroy=void 0,f=i;var z=o,Z=R;try{Z()}catch(ie){xt(f,z,ie)}}}c=c.next}while(c!==y)}}catch(ie){xt(i,i.return,ie)}}function cb(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{Jv(i,o)}catch(c){xt(s,s.return,c)}}}function ub(s,i,o){o.props=Wo(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(c){xt(s,i,c)}}function lu(s,i){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof o=="function"?s.refCleanup=o(c):o.current=c}}catch(f){xt(s,i,f)}}function vi(s,i){var o=s.ref,c=s.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){xt(s,i,f)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){xt(s,i,f)}else o.current=null}function hb(s){var i=s.type,o=s.memoizedProps,c=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){xt(s,s.return,f)}}function jp(s,i,o){try{var c=s.stateNode;D2(c,s.type,o,i),c[rn]=i}catch(f){xt(s,s.return,f)}}function fb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Wa(s.type)||s.tag===4}function kp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||fb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Wa(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Mp(s,i,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(s),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=rr));else if(c!==4&&(c===27&&Wa(s.type)&&(o=s.stateNode,i=null),s=s.child,s!==null))for(Mp(s,i,o),s=s.sibling;s!==null;)Mp(s,i,o),s=s.sibling}function pd(s,i,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(c!==4&&(c===27&&Wa(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(pd(s,i,o),s=s.sibling;s!==null;)pd(s,i,o),s=s.sibling}function mb(s){var i=s.stateNode,o=s.memoizedProps;try{for(var c=s.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Kn(i,c,o),i[Ft]=s,i[rn]=o}catch(y){xt(s,s.return,y)}}var ia=!1,bn=!1,Pp=!1,pb=typeof WeakSet=="function"?WeakSet:Set,Ln=null;function h2(s,i){if(s=s.containerInfo,sg=Md,s=Sv(s),Im(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var w=0,R=-1,z=-1,Z=0,ie=0,ue=s,te=null;t:for(;;){for(var se;ue!==o||f!==0&&ue.nodeType!==3||(R=w+f),ue!==y||c!==0&&ue.nodeType!==3||(z=w+c),ue.nodeType===3&&(w+=ue.nodeValue.length),(se=ue.firstChild)!==null;)te=ue,ue=se;for(;;){if(ue===s)break t;if(te===o&&++Z===f&&(R=w),te===y&&++ie===c&&(z=w),(se=ue.nextSibling)!==null)break;ue=te,te=ue.parentNode}ue=se}o=R===-1||z===-1?null:{start:R,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(ig={focusedElem:s,selectionRange:o},Md=!1,Ln=i;Ln!==null;)if(i=Ln,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Ln=s;else for(;Ln!==null;){switch(i=Ln,y=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)f=s[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,o=i,f=y.memoizedProps,y=y.memoizedState,c=o.stateNode;try{var Se=Wo(o.type,f);s=c.getSnapshotBeforeUpdate(Se,y),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ve){xt(o,o.return,Ve)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)lg(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":lg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Ln=s;break}Ln=i.return}}function gb(s,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:oa(s,o),c&4&&ou(5,o);break;case 1:if(oa(s,o),c&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(w){xt(o,o.return,w)}else{var f=Wo(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(f,i,s.__reactInternalSnapshotBeforeUpdate)}catch(w){xt(o,o.return,w)}}c&64&&cb(o),c&512&&lu(o,o.return);break;case 3:if(oa(s,o),c&64&&(s=o.updateQueue,s!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Jv(s,i)}catch(w){xt(o,o.return,w)}}break;case 27:i===null&&c&4&&mb(o);case 26:case 5:oa(s,o),i===null&&c&4&&hb(o),c&512&&lu(o,o.return);break;case 12:oa(s,o);break;case 31:oa(s,o),c&4&&bb(s,o);break;case 13:oa(s,o),c&4&&_b(s,o),c&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=_2.bind(null,o),q2(s,o))));break;case 22:if(c=o.memoizedState!==null||ia,!c){i=i!==null&&i.memoizedState!==null||bn,f=ia;var y=bn;ia=c,(bn=i)&&!y?la(s,o,(o.subtreeFlags&8772)!==0):oa(s,o),ia=f,bn=y}break;case 30:break;default:oa(s,o)}}function yb(s){var i=s.alternate;i!==null&&(s.alternate=null,yb(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&li(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Xt=null,Or=!1;function aa(s,i,o){for(o=o.child;o!==null;)vb(s,i,o),o=o.sibling}function vb(s,i,o){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(dr,o)}catch{}switch(o.tag){case 26:bn||vi(o,i),aa(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:bn||vi(o,i);var c=Xt,f=Or;Wa(o.type)&&(Xt=o.stateNode,Or=!1),aa(s,i,o),yu(o.stateNode),Xt=c,Or=f;break;case 5:bn||vi(o,i);case 6:if(c=Xt,f=Or,Xt=null,aa(s,i,o),Xt=c,Or=f,Xt!==null)if(Or)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(o.stateNode)}catch(y){xt(o,i,y)}else try{Xt.removeChild(o.stateNode)}catch(y){xt(o,i,y)}break;case 18:Xt!==null&&(Or?(s=Xt,u_(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),ec(s)):u_(Xt,o.stateNode));break;case 4:c=Xt,f=Or,Xt=o.stateNode.containerInfo,Or=!0,aa(s,i,o),Xt=c,Or=f;break;case 0:case 11:case 14:case 15:Fa(2,o,i),bn||Fa(4,o,i),aa(s,i,o);break;case 1:bn||(vi(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&ub(o,i,c)),aa(s,i,o);break;case 21:aa(s,i,o);break;case 22:bn=(c=bn)||o.memoizedState!==null,aa(s,i,o),bn=c;break;default:aa(s,i,o)}}function bb(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ec(s)}catch(o){xt(i,i.return,o)}}}function _b(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ec(s)}catch(o){xt(i,i.return,o)}}function d2(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new pb),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new pb),i;default:throw Error(r(435,s.tag))}}function gd(s,i){var o=d2(s);i.forEach(function(c){if(!o.has(c)){o.add(c);var f=x2.bind(null,s,c);c.then(f,f)}})}function Dr(s,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],y=s,w=i,R=w;e:for(;R!==null;){switch(R.tag){case 27:if(Wa(R.type)){Xt=R.stateNode,Or=!1;break e}break;case 5:Xt=R.stateNode,Or=!1;break e;case 3:case 4:Xt=R.stateNode.containerInfo,Or=!0;break e}R=R.return}if(Xt===null)throw Error(r(160));vb(y,w,f),Xt=null,Or=!1,y=f.alternate,y!==null&&(y.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)xb(i,s),i=i.sibling}var $s=null;function xb(s,i){var o=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Dr(i,s),Lr(s),c&4&&(Fa(3,s,s.return),ou(3,s),Fa(5,s,s.return));break;case 1:Dr(i,s),Lr(s),c&512&&(bn||o===null||vi(o,o.return)),c&64&&ia&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=$s;if(Dr(i,s),Lr(s),c&512&&(bn||o===null||vi(o,o.return)),c&4){var y=o!==null?o.memoizedState:null;if(c=s.memoizedState,o===null)if(c===null)if(s.stateNode===null){e:{c=s.type,o=s.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":y=f.getElementsByTagName("title")[0],(!y||y[Sr]||y[Ft]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=f.createElement(c),f.head.insertBefore(y,f.querySelector("head > title"))),Kn(y,c,o),y[Ft]=s,Gt(y),c=y;break e;case"link":var w=x_("link","href",f).get(c+(o.href||""));if(w){for(var R=0;R<w.length;R++)if(y=w[R],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(R,1);break t}}y=f.createElement(c),Kn(y,c,o),f.head.appendChild(y);break;case"meta":if(w=x_("meta","content",f).get(c+(o.content||""))){for(R=0;R<w.length;R++)if(y=w[R],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(R,1);break t}}y=f.createElement(c),Kn(y,c,o),f.head.appendChild(y);break;default:throw Error(r(468,c))}y[Ft]=s,Gt(y),c=y}s.stateNode=c}else E_(f,s.type,s.stateNode);else s.stateNode=__(f,c,s.memoizedProps);else y!==c?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,c===null?E_(f,s.type,s.stateNode):__(f,c,s.memoizedProps)):c===null&&s.stateNode!==null&&jp(s,s.memoizedProps,o.memoizedProps)}break;case 27:Dr(i,s),Lr(s),c&512&&(bn||o===null||vi(o,o.return)),o!==null&&c&4&&jp(s,s.memoizedProps,o.memoizedProps);break;case 5:if(Dr(i,s),Lr(s),c&512&&(bn||o===null||vi(o,o.return)),s.flags&32){f=s.stateNode;try{Kt(f,"")}catch(Se){xt(s,s.return,Se)}}c&4&&s.stateNode!=null&&(f=s.memoizedProps,jp(s,f,o!==null?o.memoizedProps:f)),c&1024&&(Pp=!0);break;case 6:if(Dr(i,s),Lr(s),c&4){if(s.stateNode===null)throw Error(r(162));c=s.memoizedProps,o=s.stateNode;try{o.nodeValue=c}catch(Se){xt(s,s.return,Se)}}break;case 3:if(Dd=null,f=$s,$s=Id(i.containerInfo),Dr(i,s),$s=f,Lr(s),c&4&&o!==null&&o.memoizedState.isDehydrated)try{ec(i.containerInfo)}catch(Se){xt(s,s.return,Se)}Pp&&(Pp=!1,Eb(s));break;case 4:c=$s,$s=Id(s.stateNode.containerInfo),Dr(i,s),Lr(s),$s=c;break;case 12:Dr(i,s),Lr(s);break;case 31:Dr(i,s),Lr(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,gd(s,c)));break;case 13:Dr(i,s),Lr(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(vd=Ot()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,gd(s,c)));break;case 22:f=s.memoizedState!==null;var z=o!==null&&o.memoizedState!==null,Z=ia,ie=bn;if(ia=Z||f,bn=ie||z,Dr(i,s),bn=ie,ia=Z,Lr(s),c&8192)e:for(i=s.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||z||ia||bn||Zo(s)),o=null,i=s;;){if(i.tag===5||i.tag===26){if(o===null){z=o=i;try{if(y=z.stateNode,f)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{R=z.stateNode;var ue=z.memoizedProps.style,te=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;R.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Se){xt(z,z.return,Se)}}}else if(i.tag===6){if(o===null){z=i;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(Se){xt(z,z.return,Se)}}}else if(i.tag===18){if(o===null){z=i;try{var se=z.stateNode;f?h_(se,!0):h_(z.stateNode,!1)}catch(Se){xt(z,z.return,Se)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=s.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,gd(s,o))));break;case 19:Dr(i,s),Lr(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,gd(s,c)));break;case 30:break;case 21:break;default:Dr(i,s),Lr(s)}}function Lr(s){var i=s.flags;if(i&2){try{for(var o,c=s.return;c!==null;){if(fb(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,y=kp(s);pd(s,y,f);break;case 5:var w=o.stateNode;o.flags&32&&(Kt(w,""),o.flags&=-33);var R=kp(s);pd(s,R,w);break;case 3:case 4:var z=o.stateNode.containerInfo,Z=kp(s);Mp(s,Z,z);break;default:throw Error(r(161))}}catch(ie){xt(s,s.return,ie)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Eb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;Eb(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function oa(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)gb(s,i.alternate,i),i=i.sibling}function Zo(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Fa(4,i,i.return),Zo(i);break;case 1:vi(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&ub(i,i.return,o),Zo(i);break;case 27:yu(i.stateNode);case 26:case 5:vi(i,i.return),Zo(i);break;case 22:i.memoizedState===null&&Zo(i);break;case 30:Zo(i);break;default:Zo(i)}s=s.sibling}}function la(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=s,y=i,w=y.flags;switch(y.tag){case 0:case 11:case 15:la(f,y,o),ou(4,y);break;case 1:if(la(f,y,o),c=y,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){xt(c,c.return,Z)}if(c=y,f=c.updateQueue,f!==null){var R=c.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)Zv(z[f],R)}catch(Z){xt(c,c.return,Z)}}o&&w&64&&cb(y),lu(y,y.return);break;case 27:mb(y);case 26:case 5:la(f,y,o),o&&c===null&&w&4&&hb(y),lu(y,y.return);break;case 12:la(f,y,o);break;case 31:la(f,y,o),o&&w&4&&bb(f,y);break;case 13:la(f,y,o),o&&w&4&&_b(f,y);break;case 22:y.memoizedState===null&&la(f,y,o),lu(y,y.return);break;case 30:break;default:la(f,y,o)}i=i.sibling}}function Vp(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&Qc(o))}function Up(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Qc(s))}function Ks(s,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)wb(s,i,o,c),i=i.sibling}function wb(s,i,o,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ks(s,i,o,c),f&2048&&ou(9,i);break;case 1:Ks(s,i,o,c);break;case 3:Ks(s,i,o,c),f&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Qc(s)));break;case 12:if(f&2048){Ks(s,i,o,c),s=i.stateNode;try{var y=i.memoizedProps,w=y.id,R=y.onPostCommit;typeof R=="function"&&R(w,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(z){xt(i,i.return,z)}}else Ks(s,i,o,c);break;case 31:Ks(s,i,o,c);break;case 13:Ks(s,i,o,c);break;case 23:break;case 22:y=i.stateNode,w=i.alternate,i.memoizedState!==null?y._visibility&2?Ks(s,i,o,c):cu(s,i):y._visibility&2?Ks(s,i,o,c):(y._visibility|=2,Hl(s,i,o,c,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Vp(w,i);break;case 24:Ks(s,i,o,c),f&2048&&Up(i.alternate,i);break;default:Ks(s,i,o,c)}}function Hl(s,i,o,c,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=s,w=i,R=o,z=c,Z=w.flags;switch(w.tag){case 0:case 11:case 15:Hl(y,w,R,z,f),ou(8,w);break;case 23:break;case 22:var ie=w.stateNode;w.memoizedState!==null?ie._visibility&2?Hl(y,w,R,z,f):cu(y,w):(ie._visibility|=2,Hl(y,w,R,z,f)),f&&Z&2048&&Vp(w.alternate,w);break;case 24:Hl(y,w,R,z,f),f&&Z&2048&&Up(w.alternate,w);break;default:Hl(y,w,R,z,f)}i=i.sibling}}function cu(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,c=i,f=c.flags;switch(c.tag){case 22:cu(o,c),f&2048&&Vp(c.alternate,c);break;case 24:cu(o,c),f&2048&&Up(c.alternate,c);break;default:cu(o,c)}i=i.sibling}}var uu=8192;function Fl(s,i,o){if(s.subtreeFlags&uu)for(s=s.child;s!==null;)Tb(s,i,o),s=s.sibling}function Tb(s,i,o){switch(s.tag){case 26:Fl(s,i,o),s.flags&uu&&s.memoizedState!==null&&Z2(o,$s,s.memoizedState,s.memoizedProps);break;case 5:Fl(s,i,o);break;case 3:case 4:var c=$s;$s=Id(s.stateNode.containerInfo),Fl(s,i,o),$s=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=uu,uu=16777216,Fl(s,i,o),uu=c):Fl(s,i,o));break;default:Fl(s,i,o)}}function Ab(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function hu(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Ln=c,Nb(c,s)}Ab(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Sb(s),s=s.sibling}function Sb(s){switch(s.tag){case 0:case 11:case 15:hu(s),s.flags&2048&&Fa(9,s,s.return);break;case 3:hu(s);break;case 12:hu(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,yd(s)):hu(s);break;default:hu(s)}}function yd(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Ln=c,Nb(c,s)}Ab(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Fa(8,i,i.return),yd(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,yd(i));break;default:yd(i)}s=s.sibling}}function Nb(s,i){for(;Ln!==null;){var o=Ln;switch(o.tag){case 0:case 11:case 15:Fa(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Qc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Ln=c;else e:for(o=s;Ln!==null;){c=Ln;var f=c.sibling,y=c.return;if(yb(c),c===o){Ln=null;break e}if(f!==null){f.return=y,Ln=f;break e}Ln=y}}}var f2={getCacheForType:function(s){var i=Gn(gn),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o},cacheSignal:function(){return Gn(gn).controller.signal}},m2=typeof WeakMap=="function"?WeakMap:Map,pt=0,Ct=null,Je=null,nt=0,_t=0,Zr=null,Ga=!1,Gl=!1,qp=!1,ca=0,on=0,$a=0,Jo=0,Bp=0,Jr=0,$l=0,du=null,jr=null,zp=!1,vd=0,Cb=0,bd=1/0,_d=null,Ka=null,Sn=0,Qa=null,Kl=null,ua=0,Hp=0,Fp=null,Rb=null,fu=0,Gp=null;function es(){return(pt&2)!==0&&nt!==0?nt&-nt:H.T!==null?Wp():nn()}function Ib(){if(Jr===0)if((nt&536870912)===0||lt){var s=qr;qr<<=1,(qr&3932160)===0&&(qr=262144),Jr=s}else Jr=536870912;return s=Xr.current,s!==null&&(s.flags|=32),Jr}function kr(s,i,o){(s===Ct&&(_t===2||_t===9)||s.cancelPendingCommit!==null)&&(Ql(s,0),Ya(s,nt,Jr,!1)),ls(s,o),((pt&2)===0||s!==Ct)&&(s===Ct&&((pt&2)===0&&(Jo|=o),on===4&&Ya(s,nt,Jr,!1)),bi(s))}function Ob(s,i,o){if((pt&6)!==0)throw Error(r(327));var c=!o&&(i&127)===0&&(i&s.expiredLanes)===0||Pn(s,i),f=c?y2(s,i):Kp(s,i,!0),y=c;do{if(f===0){Gl&&!c&&Ya(s,i,0,!1);break}else{if(o=s.current.alternate,y&&!p2(o)){f=Kp(s,i,!1),y=!1;continue}if(f===2){if(y=i,s.errorRecoveryDisabledLanes&y)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var R=s;f=du;var z=R.current.memoizedState.isDehydrated;if(z&&(Ql(R,w).flags|=256),w=Kp(R,w,!1),w!==2){if(qp&&!z){R.errorRecoveryDisabledLanes|=y,Jo|=y,f=4;break e}y=jr,jr=f,y!==null&&(jr===null?jr=y:jr.push.apply(jr,y))}f=w}if(y=!1,f!==2)continue}}if(f===1){Ql(s,0),Ya(s,i,0,!0);break}e:{switch(c=s,y=f,y){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ya(c,i,Jr,!Ga);break e;case 2:jr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=vd+300-Ot(),10<f)){if(Ya(c,i,Jr,!Ga),In(c,0,!0)!==0)break e;ua=i,c.timeoutHandle=l_(Db.bind(null,c,o,jr,_d,zp,i,Jr,Jo,$l,Ga,y,"Throttled",-0,0),f);break e}Db(c,o,jr,_d,zp,i,Jr,Jo,$l,Ga,y,null,-0,0)}}break}while(!0);bi(s)}function Db(s,i,o,c,f,y,w,R,z,Z,ie,ue,te,se){if(s.timeoutHandle=-1,ue=i.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rr},Tb(i,y,ue);var Se=(y&62914560)===y?vd-Ot():(y&4194048)===y?Cb-Ot():0;if(Se=J2(ue,Se),Se!==null){ua=y,s.cancelPendingCommit=Se(qb.bind(null,s,i,y,o,c,f,w,R,z,ie,ue,null,te,se)),Ya(s,y,w,!Z);return}}qb(s,i,y,o,c,f,w,R,z)}function p2(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],y=f.getSnapshot;f=f.value;try{if(!Qr(y(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ya(s,i,o,c){i&=~Bp,i&=~Jo,s.suspendedLanes|=i,s.pingedLanes&=~i,c&&(s.warmLanes|=i),c=s.expirationTimes;for(var f=i;0<f;){var y=31-Dt(f),w=1<<y;c[y]=-1,f&=~w}o!==0&&Ps(s,o,i)}function xd(){return(pt&6)===0?(mu(0),!1):!0}function $p(){if(Je!==null){if(_t===0)var s=Je.return;else s=Je,Ji=Fo=null,lp(s),Vl=null,Xc=0,s=Je;for(;s!==null;)lb(s.alternate,s),s=s.return;Je=null}}function Ql(s,i){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,k2(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),ua=0,$p(),Ct=s,Je=o=Wi(s.current,null),nt=i,_t=0,Zr=null,Ga=!1,Gl=Pn(s,i),qp=!1,$l=Jr=Bp=Jo=$a=on=0,jr=du=null,zp=!1,(i&8)!==0&&(i|=i&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=i;0<c;){var f=31-Dt(c),y=1<<f;i|=s[f],c&=~y}return ca=i,zh(),o}function Lb(s,i){Ge=null,H.H=su,i===Pl||i===Xh?(i=Qv(),_t=3):i===Xm?(i=Qv(),_t=4):_t=i===Tp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Zr=i,Je===null&&(on=1,ud(s,bs(i,s.current)))}function jb(){var s=Xr.current;return s===null?!0:(nt&4194048)===nt?ws===null:(nt&62914560)===nt||(nt&536870912)!==0?s===ws:!1}function kb(){var s=H.H;return H.H=su,s===null?su:s}function Mb(){var s=H.A;return H.A=f2,s}function Ed(){on=4,Ga||(nt&4194048)!==nt&&Xr.current!==null||(Gl=!0),($a&134217727)===0&&(Jo&134217727)===0||Ct===null||Ya(Ct,nt,Jr,!1)}function Kp(s,i,o){var c=pt;pt|=2;var f=kb(),y=Mb();(Ct!==s||nt!==i)&&(_d=null,Ql(s,i)),i=!1;var w=on;e:do try{if(_t!==0&&Je!==null){var R=Je,z=Zr;switch(_t){case 8:$p(),w=6;break e;case 3:case 2:case 9:case 6:Xr.current===null&&(i=!0);var Z=_t;if(_t=0,Zr=null,Yl(s,R,z,Z),o&&Gl){w=0;break e}break;default:Z=_t,_t=0,Zr=null,Yl(s,R,z,Z)}}g2(),w=on;break}catch(ie){Lb(s,ie)}while(!0);return i&&s.shellSuspendCounter++,Ji=Fo=null,pt=c,H.H=f,H.A=y,Je===null&&(Ct=null,nt=0,zh()),w}function g2(){for(;Je!==null;)Pb(Je)}function y2(s,i){var o=pt;pt|=2;var c=kb(),f=Mb();Ct!==s||nt!==i?(_d=null,bd=Ot()+500,Ql(s,i)):Gl=Pn(s,i);e:do try{if(_t!==0&&Je!==null){i=Je;var y=Zr;t:switch(_t){case 1:_t=0,Zr=null,Yl(s,i,y,1);break;case 2:case 9:if($v(y)){_t=0,Zr=null,Vb(i);break}i=function(){_t!==2&&_t!==9||Ct!==s||(_t=7),bi(s)},y.then(i,i);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:$v(y)?(_t=0,Zr=null,Vb(i)):(_t=0,Zr=null,Yl(s,i,y,7));break;case 5:var w=null;switch(Je.tag){case 26:w=Je.memoizedState;case 5:case 27:var R=Je;if(w?w_(w):R.stateNode.complete){_t=0,Zr=null;var z=R.sibling;if(z!==null)Je=z;else{var Z=R.return;Z!==null?(Je=Z,wd(Z)):Je=null}break t}}_t=0,Zr=null,Yl(s,i,y,5);break;case 6:_t=0,Zr=null,Yl(s,i,y,6);break;case 8:$p(),on=6;break e;default:throw Error(r(462))}}v2();break}catch(ie){Lb(s,ie)}while(!0);return Ji=Fo=null,H.H=c,H.A=f,pt=o,Je!==null?0:(Ct=null,nt=0,zh(),on)}function v2(){for(;Je!==null&&!Ra();)Pb(Je)}function Pb(s){var i=ab(s.alternate,s,ca);s.memoizedProps=s.pendingProps,i===null?wd(s):Je=i}function Vb(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=eb(o,i,i.pendingProps,i.type,void 0,nt);break;case 11:i=eb(o,i,i.pendingProps,i.type.render,i.ref,nt);break;case 5:lp(i);default:lb(o,i),i=Je=kv(i,ca),i=ab(o,i,ca)}s.memoizedProps=s.pendingProps,i===null?wd(s):Je=i}function Yl(s,i,o,c){Ji=Fo=null,lp(i),Vl=null,Xc=0;var f=i.return;try{if(a2(s,f,i,o,nt)){on=1,ud(s,bs(o,s.current)),Je=null;return}}catch(y){if(f!==null)throw Je=f,y;on=1,ud(s,bs(o,s.current)),Je=null;return}i.flags&32768?(lt||c===1?s=!0:Gl||(nt&536870912)!==0?s=!1:(Ga=s=!0,(c===2||c===9||c===3||c===6)&&(c=Xr.current,c!==null&&c.tag===13&&(c.flags|=16384))),Ub(i,s)):wd(i)}function wd(s){var i=s;do{if((i.flags&32768)!==0){Ub(i,Ga);return}s=i.return;var o=c2(i.alternate,i,ca);if(o!==null){Je=o;return}if(i=i.sibling,i!==null){Je=i;return}Je=i=s}while(i!==null);on===0&&(on=5)}function Ub(s,i){do{var o=u2(s.alternate,s);if(o!==null){o.flags&=32767,Je=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){Je=s;return}Je=s=o}while(s!==null);on=6,Je=null}function qb(s,i,o,c,f,y,w,R,z){s.cancelPendingCommit=null;do Td();while(Sn!==0);if((pt&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(y=i.lanes|i.childLanes,y|=km,Br(s,o,y,w,R,z),s===Ct&&(Je=Ct=null,nt=0),Kl=i,Qa=s,ua=o,Hp=y,Fp=f,Rb=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,E2(hr,function(){return Gb(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=H.T,H.T=null,f=J.p,J.p=2,w=pt,pt|=4;try{h2(s,i,o)}finally{pt=w,J.p=f,H.T=c}}Sn=1,Bb(),zb(),Hb()}}function Bb(){if(Sn===1){Sn=0;var s=Qa,i=Kl,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null;var c=J.p;J.p=2;var f=pt;pt|=4;try{xb(i,s);var y=ig,w=Sv(s.containerInfo),R=y.focusedElem,z=y.selectionRange;if(w!==R&&R&&R.ownerDocument&&Av(R.ownerDocument.documentElement,R)){if(z!==null&&Im(R)){var Z=z.start,ie=z.end;if(ie===void 0&&(ie=Z),"selectionStart"in R)R.selectionStart=Z,R.selectionEnd=Math.min(ie,R.value.length);else{var ue=R.ownerDocument||document,te=ue&&ue.defaultView||window;if(te.getSelection){var se=te.getSelection(),Se=R.textContent.length,Ve=Math.min(z.start,Se),At=z.end===void 0?Ve:Math.min(z.end,Se);!se.extend&&Ve>At&&(w=At,At=Ve,Ve=w);var K=Tv(R,Ve),G=Tv(R,At);if(K&&G&&(se.rangeCount!==1||se.anchorNode!==K.node||se.anchorOffset!==K.offset||se.focusNode!==G.node||se.focusOffset!==G.offset)){var W=ue.createRange();W.setStart(K.node,K.offset),se.removeAllRanges(),Ve>At?(se.addRange(W),se.extend(G.node,G.offset)):(W.setEnd(G.node,G.offset),se.addRange(W))}}}}for(ue=[],se=R;se=se.parentNode;)se.nodeType===1&&ue.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ue.length;R++){var ae=ue[R];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Md=!!sg,ig=sg=null}finally{pt=f,J.p=c,H.T=o}}s.current=i,Sn=2}}function zb(){if(Sn===2){Sn=0;var s=Qa,i=Kl,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=H.T,H.T=null;var c=J.p;J.p=2;var f=pt;pt|=4;try{gb(s,i.alternate,i)}finally{pt=f,J.p=c,H.T=o}}Sn=3}}function Hb(){if(Sn===4||Sn===3){Sn=0,Mi();var s=Qa,i=Kl,o=ua,c=Rb;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Sn=5:(Sn=0,Kl=Qa=null,Fb(s,s.pendingLanes));var f=s.pendingLanes;if(f===0&&(Ka=null),fr(o),i=i.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(dr,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=H.T,f=J.p,J.p=2,H.T=null;try{for(var y=s.onRecoverableError,w=0;w<c.length;w++){var R=c[w];y(R.value,{componentStack:R.stack})}}finally{H.T=i,J.p=f}}(ua&3)!==0&&Td(),bi(s),f=s.pendingLanes,(o&261930)!==0&&(f&42)!==0?s===Gp?fu++:(fu=0,Gp=s):fu=0,mu(0)}}function Fb(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,Qc(i)))}function Td(){return Bb(),zb(),Hb(),Gb()}function Gb(){if(Sn!==5)return!1;var s=Qa,i=Hp;Hp=0;var o=fr(ua),c=H.T,f=J.p;try{J.p=32>o?32:o,H.T=null,o=Fp,Fp=null;var y=Qa,w=ua;if(Sn=0,Kl=Qa=null,ua=0,(pt&6)!==0)throw Error(r(331));var R=pt;if(pt|=4,Sb(y.current),wb(y,y.current,w,o),pt=R,mu(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(dr,y)}catch{}return!0}finally{J.p=f,H.T=c,Fb(s,i)}}function $b(s,i,o){i=bs(o,i),i=wp(s.stateNode,i,2),s=Ba(s,i,2),s!==null&&(ls(s,2),bi(s))}function xt(s,i,o){if(s.tag===3)$b(s,s,o);else for(;i!==null;){if(i.tag===3){$b(i,s,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ka===null||!Ka.has(c))){s=bs(o,s),o=$1(2),c=Ba(i,o,2),c!==null&&(K1(o,c,i,s),ls(c,2),bi(c));break}}i=i.return}}function Qp(s,i,o){var c=s.pingCache;if(c===null){c=s.pingCache=new m2;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(o)||(qp=!0,f.add(o),s=b2.bind(null,s,i,o),i.then(s,s))}function b2(s,i,o){var c=s.pingCache;c!==null&&c.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,Ct===s&&(nt&o)===o&&(on===4||on===3&&(nt&62914560)===nt&&300>Ot()-vd?(pt&2)===0&&Ql(s,0):Bp|=o,$l===nt&&($l=0)),bi(s)}function Kb(s,i){i===0&&(i=oi()),s=Bo(s,i),s!==null&&(ls(s,i),bi(s))}function _2(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),Kb(s,o)}function x2(s,i){var o=0;switch(s.tag){case 31:case 13:var c=s.stateNode,f=s.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(i),Kb(s,o)}function E2(s,i){return It(s,i)}var Ad=null,Xl=null,Yp=!1,Sd=!1,Xp=!1,Xa=0;function bi(s){s!==Xl&&s.next===null&&(Xl===null?Ad=Xl=s:Xl=Xl.next=s),Sd=!0,Yp||(Yp=!0,T2())}function mu(s,i){if(!Xp&&Sd){Xp=!0;do for(var o=!1,c=Ad;c!==null;){if(s!==0){var f=c.pendingLanes;if(f===0)var y=0;else{var w=c.suspendedLanes,R=c.pingedLanes;y=(1<<31-Dt(42|s)+1)-1,y&=f&~(w&~R),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,Wb(c,y))}else y=nt,y=In(c,c===Ct?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Pn(c,y)||(o=!0,Wb(c,y));c=c.next}while(o);Xp=!1}}function w2(){Qb()}function Qb(){Sd=Yp=!1;var s=0;Xa!==0&&j2()&&(s=Xa);for(var i=Ot(),o=null,c=Ad;c!==null;){var f=c.next,y=Yb(c,i);y===0?(c.next=null,o===null?Ad=f:o.next=f,f===null&&(Xl=o)):(o=c,(s!==0||(y&3)!==0)&&(Sd=!0)),c=f}Sn!==0&&Sn!==5||mu(s),Xa!==0&&(Xa=0)}function Yb(s,i){for(var o=s.suspendedLanes,c=s.pingedLanes,f=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var w=31-Dt(y),R=1<<w,z=f[w];z===-1?((R&o)===0||(R&c)!==0)&&(f[w]=Bi(R,i)):z<=i&&(s.expiredLanes|=R),y&=~R}if(i=Ct,o=nt,o=In(s,s===i?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,o===0||s===i&&(_t===2||_t===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Er(c),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Pn(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(c!==null&&Er(c),fr(o)){case 2:case 8:o=Ur;break;case 32:o=hr;break;case 268435456:o=kn;break;default:o=hr}return c=Xb.bind(null,s),o=It(o,c),s.callbackPriority=i,s.callbackNode=o,i}return c!==null&&c!==null&&Er(c),s.callbackPriority=2,s.callbackNode=null,2}function Xb(s,i){if(Sn!==0&&Sn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Td()&&s.callbackNode!==o)return null;var c=nt;return c=In(s,s===Ct?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Ob(s,c,i),Yb(s,Ot()),s.callbackNode!=null&&s.callbackNode===o?Xb.bind(null,s):null)}function Wb(s,i){if(Td())return null;Ob(s,i,!0)}function T2(){M2(function(){(pt&6)!==0?It(Pi,w2):Qb()})}function Wp(){if(Xa===0){var s=kl;s===0&&(s=Mn,Mn<<=1,(Mn&261888)===0&&(Mn=256)),Xa=s}return Xa}function Zb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:fi(""+s)}function Jb(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function A2(s,i,o,c,f){if(i==="submit"&&o&&o.stateNode===f){var y=Zb((f[rn]||null).action),w=c.submitter;w&&(i=(i=w[rn]||null)?Zb(i.formAction):w.getAttribute("formAction"),i!==null&&(y=i,w=null));var R=new Ae("action","action",null,c,f);s.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Xa!==0){var z=w?Jb(f,w):new FormData(f);yp(o,{pending:!0,data:z,method:f.method,action:y},null,z)}}else typeof y=="function"&&(R.preventDefault(),z=w?Jb(f,w):new FormData(f),yp(o,{pending:!0,data:z,method:f.method,action:y},y,z))},currentTarget:f}]})}}for(var Zp=0;Zp<jm.length;Zp++){var Jp=jm[Zp],S2=Jp.toLowerCase(),N2=Jp[0].toUpperCase()+Jp.slice(1);Gs(S2,"on"+N2)}Gs(Rv,"onAnimationEnd"),Gs(Iv,"onAnimationIteration"),Gs(Ov,"onAnimationStart"),Gs("dblclick","onDoubleClick"),Gs("focusin","onFocus"),Gs("focusout","onBlur"),Gs(HN,"onTransitionRun"),Gs(FN,"onTransitionStart"),Gs(GN,"onTransitionCancel"),Gs(Dv,"onTransitionEnd"),Un("onMouseEnter",["mouseout","mouseover"]),Un("onMouseLeave",["mouseout","mouseover"]),Un("onPointerEnter",["pointerout","pointerover"]),Un("onPointerLeave",["pointerout","pointerover"]),gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gr("onBeforeInput",["compositionend","keypress","textInput","paste"]),gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pu));function e_(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var c=s[o],f=c.event;c=c.listeners;e:{var y=void 0;if(i)for(var w=c.length-1;0<=w;w--){var R=c[w],z=R.instance,Z=R.currentTarget;if(R=R.listener,z!==y&&f.isPropagationStopped())break e;y=R,f.currentTarget=Z;try{y(f)}catch(ie){Bh(ie)}f.currentTarget=null,y=z}else for(w=0;w<c.length;w++){if(R=c[w],z=R.instance,Z=R.currentTarget,R=R.listener,z!==y&&f.isPropagationStopped())break e;y=R,f.currentTarget=Z;try{y(f)}catch(ie){Bh(ie)}f.currentTarget=null,y=z}}}}function et(s,i){var o=i[Jt];o===void 0&&(o=i[Jt]=new Set);var c=s+"__bubble";o.has(c)||(t_(i,s,2,!1),o.add(c))}function eg(s,i,o){var c=0;i&&(c|=4),t_(o,s,c,i)}var Nd="_reactListening"+Math.random().toString(36).slice(2);function tg(s){if(!s[Nd]){s[Nd]=!0,Fi.forEach(function(o){o!=="selectionchange"&&(C2.has(o)||eg(o,!1,s),eg(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Nd]||(i[Nd]=!0,eg("selectionchange",!1,i))}}function t_(s,i,o,c){switch(I_(i)){case 2:var f=nC;break;case 8:f=rC;break;default:f=gg}o=f.bind(null,i,o,s),f=void 0,!gs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?s.addEventListener(i,o,{capture:!0,passive:f}):s.addEventListener(i,o,!0):f!==void 0?s.addEventListener(i,o,{passive:f}):s.addEventListener(i,o,!1)}function ng(s,i,o,c,f){var y=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var R=c.stateNode.containerInfo;if(R===f)break;if(w===4)for(w=c.return;w!==null;){var z=w.tag;if((z===3||z===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;R!==null;){if(w=kt(R),w===null)return;if(z=w.tag,z===5||z===6||z===26||z===27){c=y=w;continue e}R=R.parentNode}}c=c.return}ps(function(){var Z=y,ie=Bn(o),ue=[];e:{var te=Lv.get(s);if(te!==void 0){var se=Ae,Se=s;switch(s){case"keypress":if(_(o)===0)break e;case"keydown":case"keyup":se=Vh;break;case"focusin":Se="focus",se=Hn;break;case"focusout":Se="blur",se=Hn;break;case"beforeblur":case"afterblur":se=Hn;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Pt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=b;break;case Rv:case Iv:case Ov:se=Po;break;case Dv:se=D;break;case"scroll":case"scrollend":se=Xe;break;case"wheel":se=re;break;case"copy":case"cut":case"paste":se=Yi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Xi;break;case"toggle":case"beforetoggle":se=Fe}var Ve=(i&4)!==0,At=!Ve&&(s==="scroll"||s==="scrollend"),K=Ve?te!==null?te+"Capture":null:te;Ve=[];for(var G=Z,W;G!==null;){var ae=G;if(W=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||W===null||K===null||(ae=sr(G,K),ae!=null&&Ve.push(gu(G,ae,W))),At)break;G=G.return}0<Ve.length&&(te=new se(te,Se,null,o,ie),ue.push({event:te,listeners:Ve}))}}if((i&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",se=s==="mouseout"||s==="pointerout",te&&o!==ln&&(Se=o.relatedTarget||o.fromElement)&&(kt(Se)||Se[Ar]))break e;if((se||te)&&(te=ie.window===ie?ie:(te=ie.ownerDocument)?te.defaultView||te.parentWindow:window,se?(Se=o.relatedTarget||o.toElement,se=Z,Se=Se?kt(Se):null,Se!==null&&(At=l(Se),Ve=Se.tag,Se!==At||Ve!==5&&Ve!==27&&Ve!==6)&&(Se=null)):(se=null,Se=Z),se!==Se)){if(Ve=Pt,ae="onMouseLeave",K="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Ve=Xi,ae="onPointerLeave",K="onPointerEnter",G="pointer"),At=se==null?te:Vn(se),W=Se==null?te:Vn(Se),te=new Ve(ae,G+"leave",se,o,ie),te.target=At,te.relatedTarget=W,ae=null,kt(ie)===Z&&(Ve=new Ve(K,G+"enter",Se,o,ie),Ve.target=W,Ve.relatedTarget=At,ae=Ve),At=ae,se&&Se)t:{for(Ve=R2,K=se,G=Se,W=0,ae=K;ae;ae=Ve(ae))W++;ae=0;for(var je=G;je;je=Ve(je))ae++;for(;0<W-ae;)K=Ve(K),W--;for(;0<ae-W;)G=Ve(G),ae--;for(;W--;){if(K===G||G!==null&&K===G.alternate){Ve=K;break t}K=Ve(K),G=Ve(G)}Ve=null}else Ve=null;se!==null&&n_(ue,te,se,Ve,!1),Se!==null&&At!==null&&n_(ue,At,Se,Ve,!0)}}e:{if(te=Z?Vn(Z):window,se=te.nodeName&&te.nodeName.toLowerCase(),se==="select"||se==="input"&&te.type==="file")var ht=vv;else if(gv(te))if(bv)ht=qN;else{ht=VN;var Ce=PN}else se=te.nodeName,!se||se.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&di(Z.elementType)&&(ht=vv):ht=UN;if(ht&&(ht=ht(s,Z))){yv(ue,ht,o,ie);break e}Ce&&Ce(s,te,Z),s==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&$i(te,"number",te.value)}switch(Ce=Z?Vn(Z):window,s){case"focusin":(gv(Ce)||Ce.contentEditable==="true")&&(Nl=Ce,Om=Z,Gc=null);break;case"focusout":Gc=Om=Nl=null;break;case"mousedown":Dm=!0;break;case"contextmenu":case"mouseup":case"dragend":Dm=!1,Nv(ue,o,ie);break;case"selectionchange":if(zN)break;case"keydown":case"keyup":Nv(ue,o,ie)}var Ke;if(mt)e:{switch(s){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else Sl?Vo(s,o)&&(rt="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(rt="onCompositionStart");rt&&(pi&&o.locale!=="ko"&&(Sl||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&Sl&&(Ke=Qi()):(yr=ie,qs="value"in yr?yr.value:yr.textContent,Sl=!0)),Ce=Cd(Z,rt),0<Ce.length&&(rt=new mi(rt,s,null,o,ie),ue.push({event:rt,listeners:Ce}),Ke?rt.data=Ke:(Ke=Al(o),Ke!==null&&(rt.data=Ke)))),(Ke=ys?LN(s,o):jN(s,o))&&(rt=Cd(Z,"onBeforeInput"),0<rt.length&&(Ce=new mi("onBeforeInput","beforeinput",null,o,ie),ue.push({event:Ce,listeners:rt}),Ce.data=Ke)),A2(ue,s,Z,o,ie)}e_(ue,i)})}function gu(s,i,o){return{instance:s,listener:i,currentTarget:o}}function Cd(s,i){for(var o=i+"Capture",c=[];s!==null;){var f=s,y=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||y===null||(f=sr(s,o),f!=null&&c.unshift(gu(s,f,y)),f=sr(s,i),f!=null&&c.push(gu(s,f,y))),s.tag===3)return c;s=s.return}return[]}function R2(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function n_(s,i,o,c,f){for(var y=i._reactName,w=[];o!==null&&o!==c;){var R=o,z=R.alternate,Z=R.stateNode;if(R=R.tag,z!==null&&z===c)break;R!==5&&R!==26&&R!==27||Z===null||(z=Z,f?(Z=sr(o,y),Z!=null&&w.unshift(gu(o,Z,z))):f||(Z=sr(o,y),Z!=null&&w.push(gu(o,Z,z)))),o=o.return}w.length!==0&&s.push({event:i,listeners:w})}var I2=/\r\n?/g,O2=/\u0000|\uFFFD/g;function r_(s){return(typeof s=="string"?s:""+s).replace(I2,`
`).replace(O2,"")}function s_(s,i){return i=r_(i),r_(s)===i}function Tt(s,i,o,c,f,y){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Kt(s,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Kt(s,""+c);break;case"className":qn(s,"class",c);break;case"tabIndex":qn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":qn(s,o,c);break;case"style":nr(s,c,y);break;case"data":if(i!=="object"){qn(s,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(o);break}c=fi(""+c),s.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&Tt(s,i,"name",f.name,f,null),Tt(s,i,"formEncType",f.formEncType,f,null),Tt(s,i,"formMethod",f.formMethod,f,null),Tt(s,i,"formTarget",f.formTarget,f,null)):(Tt(s,i,"encType",f.encType,f,null),Tt(s,i,"method",f.method,f,null),Tt(s,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(o);break}c=fi(""+c),s.setAttribute(o,c);break;case"onClick":c!=null&&(s.onclick=rr);break;case"onScroll":c!=null&&et("scroll",s);break;case"onScrollEnd":c!=null&&et("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}o=fi(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,""+c):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":c===!0?s.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,c):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(o,c):s.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(o):s.setAttribute(o,c);break;case"popover":et("beforetoggle",s),et("toggle",s),ci(s,"popover",c);break;case"xlinkActuate":$t(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":$t(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":$t(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":$t(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":$t(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":$t(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":$t(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":$t(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":$t(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ci(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=La.get(o)||o,ci(s,o,c))}}function rg(s,i,o,c,f,y){switch(o){case"style":nr(s,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof c=="string"?Kt(s,c):(typeof c=="number"||typeof c=="bigint")&&Kt(s,""+c);break;case"onScroll":c!=null&&et("scroll",s);break;case"onScrollEnd":c!=null&&et("scrollend",s);break;case"onClick":c!=null&&(s.onclick=rr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!us.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),y=s[rn]||null,y=y!=null?y[o]:null,typeof y=="function"&&s.removeEventListener(i,y,f),typeof c=="function")){typeof y!="function"&&y!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,c,f);break e}o in s?s[o]=c:c===!0?s.setAttribute(o,""):ci(s,o,c)}}}function Kn(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",s),et("load",s);var c=!1,f=!1,y;for(y in o)if(o.hasOwnProperty(y)){var w=o[y];if(w!=null)switch(y){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Tt(s,i,y,w,o,null)}}f&&Tt(s,i,"srcSet",o.srcSet,o,null),c&&Tt(s,i,"src",o.src,o,null);return;case"input":et("invalid",s);var R=y=w=f=null,z=null,Z=null;for(c in o)if(o.hasOwnProperty(c)){var ie=o[c];if(ie!=null)switch(c){case"name":f=ie;break;case"type":w=ie;break;case"checked":z=ie;break;case"defaultChecked":Z=ie;break;case"value":y=ie;break;case"defaultValue":R=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,i));break;default:Tt(s,i,c,ie,o,null)}}hi(s,y,R,z,Z,w,f,!1);return;case"select":et("invalid",s),c=w=y=null;for(f in o)if(o.hasOwnProperty(f)&&(R=o[f],R!=null))switch(f){case"value":y=R;break;case"defaultValue":w=R;break;case"multiple":c=R;default:Tt(s,i,f,R,o,null)}i=y,o=w,s.multiple=!!c,i!=null?ds(s,!!c,i,!1):o!=null&&ds(s,!!c,o,!0);return;case"textarea":et("invalid",s),y=f=c=null;for(w in o)if(o.hasOwnProperty(w)&&(R=o[w],R!=null))switch(w){case"value":c=R;break;case"defaultValue":f=R;break;case"children":y=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:Tt(s,i,w,R,o,null)}pn(s,c,f,y);return;case"option":for(z in o)if(o.hasOwnProperty(z)&&(c=o[z],c!=null))switch(z){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Tt(s,i,z,c,o,null)}return;case"dialog":et("beforetoggle",s),et("toggle",s),et("cancel",s),et("close",s);break;case"iframe":case"object":et("load",s);break;case"video":case"audio":for(c=0;c<pu.length;c++)et(pu[c],s);break;case"image":et("error",s),et("load",s);break;case"details":et("toggle",s);break;case"embed":case"source":case"link":et("error",s),et("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(c=o[Z],c!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Tt(s,i,Z,c,o,null)}return;default:if(di(i)){for(ie in o)o.hasOwnProperty(ie)&&(c=o[ie],c!==void 0&&rg(s,i,ie,c,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(c=o[R],c!=null&&Tt(s,i,R,c,o,null))}function D2(s,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,y=null,w=null,R=null,z=null,Z=null,ie=null;for(se in o){var ue=o[se];if(o.hasOwnProperty(se)&&ue!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":z=ue;default:c.hasOwnProperty(se)||Tt(s,i,se,null,c,ue)}}for(var te in c){var se=c[te];if(ue=o[te],c.hasOwnProperty(te)&&(se!=null||ue!=null))switch(te){case"type":y=se;break;case"name":f=se;break;case"checked":Z=se;break;case"defaultChecked":ie=se;break;case"value":w=se;break;case"defaultValue":R=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,i));break;default:se!==ue&&Tt(s,i,te,se,c,ue)}}ui(s,w,R,z,Z,ie,y,f);return;case"select":se=w=R=te=null;for(y in o)if(z=o[y],o.hasOwnProperty(y)&&z!=null)switch(y){case"value":break;case"multiple":se=z;default:c.hasOwnProperty(y)||Tt(s,i,y,null,c,z)}for(f in c)if(y=c[f],z=o[f],c.hasOwnProperty(f)&&(y!=null||z!=null))switch(f){case"value":te=y;break;case"defaultValue":R=y;break;case"multiple":w=y;default:y!==z&&Tt(s,i,f,y,c,z)}i=R,o=w,c=se,te!=null?ds(s,!!o,te,!1):!!c!=!!o&&(i!=null?ds(s,!!o,i,!0):ds(s,!!o,o?[]:"",!1));return;case"textarea":se=te=null;for(R in o)if(f=o[R],o.hasOwnProperty(R)&&f!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Tt(s,i,R,null,c,f)}for(w in c)if(f=c[w],y=o[w],c.hasOwnProperty(w)&&(f!=null||y!=null))switch(w){case"value":te=f;break;case"defaultValue":se=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==y&&Tt(s,i,w,f,c,y)}fs(s,te,se);return;case"option":for(var Se in o)if(te=o[Se],o.hasOwnProperty(Se)&&te!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":s.selected=!1;break;default:Tt(s,i,Se,null,c,te)}for(z in c)if(te=c[z],se=o[z],c.hasOwnProperty(z)&&te!==se&&(te!=null||se!=null))switch(z){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Tt(s,i,z,te,c,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in o)te=o[Ve],o.hasOwnProperty(Ve)&&te!=null&&!c.hasOwnProperty(Ve)&&Tt(s,i,Ve,null,c,te);for(Z in c)if(te=c[Z],se=o[Z],c.hasOwnProperty(Z)&&te!==se&&(te!=null||se!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,i));break;default:Tt(s,i,Z,te,c,se)}return;default:if(di(i)){for(var At in o)te=o[At],o.hasOwnProperty(At)&&te!==void 0&&!c.hasOwnProperty(At)&&rg(s,i,At,void 0,c,te);for(ie in c)te=c[ie],se=o[ie],!c.hasOwnProperty(ie)||te===se||te===void 0&&se===void 0||rg(s,i,ie,te,c,se);return}}for(var K in o)te=o[K],o.hasOwnProperty(K)&&te!=null&&!c.hasOwnProperty(K)&&Tt(s,i,K,null,c,te);for(ue in c)te=c[ue],se=o[ue],!c.hasOwnProperty(ue)||te===se||te==null&&se==null||Tt(s,i,ue,te,c,se)}function i_(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function L2(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],y=f.transferSize,w=f.initiatorType,R=f.duration;if(y&&R&&i_(w)){for(w=0,R=f.responseEnd,c+=1;c<o.length;c++){var z=o[c],Z=z.startTime;if(Z>R)break;var ie=z.transferSize,ue=z.initiatorType;ie&&i_(ue)&&(z=z.responseEnd,w+=ie*(z<R?1:(R-Z)/(z-Z)))}if(--c,i+=8*(y+w)/(f.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var sg=null,ig=null;function Rd(s){return s.nodeType===9?s:s.ownerDocument}function a_(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o_(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function ag(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var og=null;function j2(){var s=window.event;return s&&s.type==="popstate"?s===og?!1:(og=s,!0):(og=null,!1)}var l_=typeof setTimeout=="function"?setTimeout:void 0,k2=typeof clearTimeout=="function"?clearTimeout:void 0,c_=typeof Promise=="function"?Promise:void 0,M2=typeof queueMicrotask=="function"?queueMicrotask:typeof c_<"u"?function(s){return c_.resolve(null).then(s).catch(P2)}:l_;function P2(s){setTimeout(function(){throw s})}function Wa(s){return s==="head"}function u_(s,i){var o=i,c=0;do{var f=o.nextSibling;if(s.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){s.removeChild(f),ec(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")yu(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,yu(o);for(var y=o.firstChild;y;){var w=y.nextSibling,R=y.nodeName;y[Sr]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=w}}else o==="body"&&yu(s.ownerDocument.body);o=f}while(o);ec(i)}function h_(s,i){var o=s;s=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=c}while(o)}function lg(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":lg(o),li(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function V2(s,i,o,c){for(;s.nodeType===1;){var f=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Sr])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==f.rel||s.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||s.getAttribute("title")!==(f.title==null?null:f.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(f.src==null?null:f.src)||s.getAttribute("type")!==(f.type==null?null:f.type)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var y=f.name==null?null:""+f.name;if(f.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Ts(s.nextSibling),s===null)break}return null}function U2(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Ts(s.nextSibling),s===null))return null;return s}function d_(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=Ts(s.nextSibling),s===null))return null;return s}function cg(s){return s.data==="$?"||s.data==="$~"}function ug(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function q2(s,i){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Ts(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var hg=null;function f_(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(i===0)return Ts(s.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}s=s.nextSibling}return null}function m_(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return s;i--}else o!=="/$"&&o!=="/&"||i++}s=s.previousSibling}return null}function p_(s,i,o){switch(i=Rd(o),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function yu(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);li(s)}var As=new Map,g_=new Set;function Id(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ha=J.d;J.d={f:B2,r:z2,D:H2,C:F2,L:G2,m:$2,X:Q2,S:K2,M:Y2};function B2(){var s=ha.f(),i=xd();return s||i}function z2(s){var i=er(s);i!==null&&i.tag===5&&i.type==="form"?D1(i):ha.r(s)}var Wl=typeof document>"u"?null:document;function y_(s,i,o){var c=Wl;if(c&&typeof i=="string"&&i){var f=On(i);f='link[rel="'+s+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),g_.has(f)||(g_.add(f),s={rel:s,crossOrigin:o,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),Kn(i,"link",s),Gt(i),c.head.appendChild(i)))}}function H2(s){ha.D(s),y_("dns-prefetch",s,null)}function F2(s,i){ha.C(s,i),y_("preconnect",s,i)}function G2(s,i,o){ha.L(s,i,o);var c=Wl;if(c&&s&&i){var f='link[rel="preload"][as="'+On(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+On(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+On(o.imageSizes)+'"]')):f+='[href="'+On(s)+'"]';var y=f;switch(i){case"style":y=Zl(s);break;case"script":y=Jl(s)}As.has(y)||(s=x({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),As.set(y,s),c.querySelector(f)!==null||i==="style"&&c.querySelector(vu(y))||i==="script"&&c.querySelector(bu(y))||(i=c.createElement("link"),Kn(i,"link",s),Gt(i),c.head.appendChild(i)))}}function $2(s,i){ha.m(s,i);var o=Wl;if(o&&s){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+On(c)+'"][href="'+On(s)+'"]',y=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Jl(s)}if(!As.has(y)&&(s=x({rel:"modulepreload",href:s},i),As.set(y,s),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(bu(y)))return}c=o.createElement("link"),Kn(c,"link",s),Gt(c),o.head.appendChild(c)}}}function K2(s,i,o){ha.S(s,i,o);var c=Wl;if(c&&s){var f=Nr(c).hoistableStyles,y=Zl(s);i=i||"default";var w=f.get(y);if(!w){var R={loading:0,preload:null};if(w=c.querySelector(vu(y)))R.loading=5;else{s=x({rel:"stylesheet",href:s,"data-precedence":i},o),(o=As.get(y))&&dg(s,o);var z=w=c.createElement("link");Gt(z),Kn(z,"link",s),z._p=new Promise(function(Z,ie){z.onload=Z,z.onerror=ie}),z.addEventListener("load",function(){R.loading|=1}),z.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Od(w,i,c)}w={type:"stylesheet",instance:w,count:1,state:R},f.set(y,w)}}}function Q2(s,i){ha.X(s,i);var o=Wl;if(o&&s){var c=Nr(o).hoistableScripts,f=Jl(s),y=c.get(f);y||(y=o.querySelector(bu(f)),y||(s=x({src:s,async:!0},i),(i=As.get(f))&&fg(s,i),y=o.createElement("script"),Gt(y),Kn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(f,y))}}function Y2(s,i){ha.M(s,i);var o=Wl;if(o&&s){var c=Nr(o).hoistableScripts,f=Jl(s),y=c.get(f);y||(y=o.querySelector(bu(f)),y||(s=x({src:s,async:!0,type:"module"},i),(i=As.get(f))&&fg(s,i),y=o.createElement("script"),Gt(y),Kn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(f,y))}}function v_(s,i,o,c){var f=(f=Te.current)?Id(f):null;if(!f)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Zl(o.href),o=Nr(f).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=Zl(o.href);var y=Nr(f).hoistableStyles,w=y.get(s);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,w),(y=f.querySelector(vu(s)))&&!y._p&&(w.instance=y,w.state.loading=5),As.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},As.set(s,o),y||X2(f,s,o,w.state))),i&&c===null)throw Error(r(528,""));return w}if(i&&c!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Jl(o),o=Nr(f).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Zl(s){return'href="'+On(s)+'"'}function vu(s){return'link[rel="stylesheet"]['+s+"]"}function b_(s){return x({},s,{"data-precedence":s.precedence,precedence:null})}function X2(s,i,o,c){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=s.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Kn(i,"link",o),Gt(i),s.head.appendChild(i))}function Jl(s){return'[src="'+On(s)+'"]'}function bu(s){return"script[async]"+s}function __(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=s.querySelector('style[data-href~="'+On(o.href)+'"]');if(c)return i.instance=c,Gt(c),c;var f=x({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Gt(c),Kn(c,"style",f),Od(c,o.precedence,s),i.instance=c;case"stylesheet":f=Zl(o.href);var y=s.querySelector(vu(f));if(y)return i.state.loading|=4,i.instance=y,Gt(y),y;c=b_(o),(f=As.get(f))&&dg(c,f),y=(s.ownerDocument||s).createElement("link"),Gt(y);var w=y;return w._p=new Promise(function(R,z){w.onload=R,w.onerror=z}),Kn(y,"link",c),i.state.loading|=4,Od(y,o.precedence,s),i.instance=y;case"script":return y=Jl(o.src),(f=s.querySelector(bu(y)))?(i.instance=f,Gt(f),f):(c=o,(f=As.get(y))&&(c=x({},o),fg(c,f)),s=s.ownerDocument||s,f=s.createElement("script"),Gt(f),Kn(f,"link",c),s.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Od(c,o.precedence,s));return i.instance}function Od(s,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,y=f,w=0;w<c.length;w++){var R=c[w];if(R.dataset.precedence===i)y=R;else if(y!==f)break}y?y.parentNode.insertBefore(s,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function dg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function fg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Dd=null;function x_(s,i,o){if(Dd===null){var c=new Map,f=Dd=new Map;f.set(o,c)}else f=Dd,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(s))return c;for(c.set(s,null),o=o.getElementsByTagName(s),f=0;f<o.length;f++){var y=o[f];if(!(y[Sr]||y[Ft]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(i)||"";w=s+w;var R=c.get(w);R?R.push(y):c.set(w,[y])}}return c}function E_(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function W2(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function w_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Z2(s,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Zl(c.href),y=i.querySelector(vu(f));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=Ld.bind(s),i.then(s,s)),o.state.loading|=4,o.instance=y,Gt(y);return}y=i.ownerDocument||i,c=b_(c),(f=As.get(f))&&dg(c,f),y=y.createElement("link"),Gt(y);var w=y;w._p=new Promise(function(R,z){w.onload=R,w.onerror=z}),Kn(y,"link",c),o.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=Ld.bind(s),i.addEventListener("load",o),i.addEventListener("error",o))}}var mg=0;function J2(s,i){return s.stylesheets&&s.count===0&&kd(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var c=setTimeout(function(){if(s.stylesheets&&kd(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+i);0<s.imgBytes&&mg===0&&(mg=62500*L2());var f=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&kd(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>mg?50:800)+i);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Ld(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var jd=null;function kd(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,jd=new Map,i.forEach(eC,s),jd=null,Ld.call(s))}function eC(s,i){if(!(i.state.loading&4)){var o=jd.get(s);if(o)var c=o.get(null);else{o=new Map,jd.set(s,o);for(var f=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<f.length;y++){var w=f[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}f=i.instance,w=f.getAttribute("data-precedence"),y=o.get(w)||c,y===c&&o.set(null,f),o.set(w,f),this.count++,c=Ld.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),y?y.parentNode.insertBefore(f,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(f,s.firstChild)),i.state.loading|=4}}var _u={$$typeof:Y,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function tC(s,i,o,c,f,y,w,R,z){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=An(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=An(0),this.hiddenUpdates=An(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function T_(s,i,o,c,f,y,w,R,z,Z,ie,ue){return s=new tC(s,i,o,w,z,Z,ie,ue,R),i=1,y===!0&&(i|=24),y=Yr(3,null,null,i),s.current=y,y.stateNode=s,i=Km(),i.refCount++,s.pooledCache=i,i.refCount++,y.memoizedState={element:c,isDehydrated:o,cache:i},Wm(y),s}function A_(s){return s?(s=Il,s):Il}function S_(s,i,o,c,f,y){f=A_(f),c.context===null?c.context=f:c.pendingContext=f,c=qa(i),c.payload={element:o},y=y===void 0?null:y,y!==null&&(c.callback=y),o=Ba(s,c,i),o!==null&&(kr(o,s,i),Zc(o,s,i))}function N_(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function pg(s,i){N_(s,i),(s=s.alternate)&&N_(s,i)}function C_(s){if(s.tag===13||s.tag===31){var i=Bo(s,67108864);i!==null&&kr(i,s,67108864),pg(s,67108864)}}function R_(s){if(s.tag===13||s.tag===31){var i=es();i=cs(i);var o=Bo(s,i);o!==null&&kr(o,s,i),pg(s,i)}}var Md=!0;function nC(s,i,o,c){var f=H.T;H.T=null;var y=J.p;try{J.p=2,gg(s,i,o,c)}finally{J.p=y,H.T=f}}function rC(s,i,o,c){var f=H.T;H.T=null;var y=J.p;try{J.p=8,gg(s,i,o,c)}finally{J.p=y,H.T=f}}function gg(s,i,o,c){if(Md){var f=yg(c);if(f===null)ng(s,i,c,Pd,o),O_(s,c);else if(iC(f,s,i,o,c))c.stopPropagation();else if(O_(s,c),i&4&&-1<sC.indexOf(s)){for(;f!==null;){var y=er(f);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=Jn(y.pendingLanes);if(w!==0){var R=y;for(R.pendingLanes|=2,R.entangledLanes|=2;w;){var z=1<<31-Dt(w);R.entanglements[1]|=z,w&=~z}bi(y),(pt&6)===0&&(bd=Ot()+500,mu(0))}}break;case 31:case 13:R=Bo(y,2),R!==null&&kr(R,y,2),xd(),pg(y,2)}if(y=yg(c),y===null&&ng(s,i,c,Pd,o),y===f)break;f=y}f!==null&&c.stopPropagation()}else ng(s,i,c,null,o)}}function yg(s){return s=Bn(s),vg(s)}var Pd=null;function vg(s){if(Pd=null,s=kt(s),s!==null){var i=l(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=u(i),s!==null)return s;s=null}else if(o===31){if(s=d(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Pd=s,null}function I_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wr()){case Pi:return 2;case Ur:return 8;case hr:case Vi:return 32;case kn:return 268435456;default:return 32}default:return 32}}var bg=!1,Za=null,Ja=null,eo=null,xu=new Map,Eu=new Map,to=[],sC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O_(s,i){switch(s){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":eo=null;break;case"pointerover":case"pointerout":xu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(i.pointerId)}}function wu(s,i,o,c,f,y){return s===null||s.nativeEvent!==y?(s={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:y,targetContainers:[f]},i!==null&&(i=er(i),i!==null&&C_(i)),s):(s.eventSystemFlags|=c,i=s.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),s)}function iC(s,i,o,c,f){switch(i){case"focusin":return Za=wu(Za,s,i,o,c,f),!0;case"dragenter":return Ja=wu(Ja,s,i,o,c,f),!0;case"mouseover":return eo=wu(eo,s,i,o,c,f),!0;case"pointerover":var y=f.pointerId;return xu.set(y,wu(xu.get(y)||null,s,i,o,c,f)),!0;case"gotpointercapture":return y=f.pointerId,Eu.set(y,wu(Eu.get(y)||null,s,i,o,c,f)),!0}return!1}function D_(s){var i=kt(s.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){s.blockedOn=i,mr(s.priority,function(){R_(o)});return}}else if(i===31){if(i=d(o),i!==null){s.blockedOn=i,mr(s.priority,function(){R_(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Vd(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=yg(s.nativeEvent);if(o===null){o=s.nativeEvent;var c=new o.constructor(o.type,o);ln=c,o.target.dispatchEvent(c),ln=null}else return i=er(o),i!==null&&C_(i),s.blockedOn=o,!1;i.shift()}return!0}function L_(s,i,o){Vd(s)&&o.delete(i)}function aC(){bg=!1,Za!==null&&Vd(Za)&&(Za=null),Ja!==null&&Vd(Ja)&&(Ja=null),eo!==null&&Vd(eo)&&(eo=null),xu.forEach(L_),Eu.forEach(L_)}function Ud(s,i){s.blockedOn===i&&(s.blockedOn=null,bg||(bg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,aC)))}var qd=null;function j_(s){qd!==s&&(qd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){qd===s&&(qd=null);for(var i=0;i<s.length;i+=3){var o=s[i],c=s[i+1],f=s[i+2];if(typeof c!="function"){if(vg(c||o)===null)continue;break}var y=er(o);y!==null&&(s.splice(i,3),i-=3,yp(y,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function ec(s){function i(z){return Ud(z,s)}Za!==null&&Ud(Za,s),Ja!==null&&Ud(Ja,s),eo!==null&&Ud(eo,s),xu.forEach(i),Eu.forEach(i);for(var o=0;o<to.length;o++){var c=to[o];c.blockedOn===s&&(c.blockedOn=null)}for(;0<to.length&&(o=to[0],o.blockedOn===null);)D_(o),o.blockedOn===null&&to.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],y=o[c+1],w=f[rn]||null;if(typeof y=="function")w||j_(o);else if(w){var R=null;if(y&&y.hasAttribute("formAction")){if(f=y,w=y[rn]||null)R=w.formAction;else if(vg(f)!==null)continue}else R=w.action;typeof R=="function"?o[c+1]=R:(o.splice(c,3),c-=3),j_(o)}}}function k_(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(w){return f=w})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function _g(s){this._internalRoot=s}Bd.prototype.render=_g.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,c=es();S_(o,c,s,i,null,null)},Bd.prototype.unmount=_g.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;S_(s.current,2,null,s,null,null),xd(),i[Ar]=null}};function Bd(s){this._internalRoot=s}Bd.prototype.unstable_scheduleHydration=function(s){if(s){var i=nn();s={blockedOn:null,target:s,priority:i};for(var o=0;o<to.length&&i!==0&&i<to[o].priority;o++);to.splice(o,0,s),o===0&&D_(s)}};var M_=e.version;if(M_!=="19.2.1")throw Error(r(527,M_,"19.2.1"));J.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=p(i),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var oC={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zd.isDisabled&&zd.supportsFiber)try{dr=zd.inject(oC),Zt=zd}catch{}}return Au.createRoot=function(s,i){if(!a(s))throw Error(r(299));var o=!1,c="",f=z1,y=H1,w=F1;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=T_(s,1,!1,null,null,o,c,null,f,y,w,k_),s[Ar]=i.current,tg(s),new _g(i)},Au.hydrateRoot=function(s,i,o){if(!a(s))throw Error(r(299));var c=!1,f="",y=z1,w=H1,R=F1,z=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.formState!==void 0&&(z=o.formState)),i=T_(s,1,!0,i,o??null,c,f,z,y,w,R,k_),i.context=A_(null),o=i.current,c=es(),c=cs(c),f=qa(c),f.callback=null,Ba(o,f,c),o=c,i.current.lanes=o,ls(i,o),bi(i),s[Ar]=i.current,tg(s),new Bd(i)},Au.version="19.2.1",Au}var $_;function vC(){if($_)return wg.exports;$_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),wg.exports=yC(),wg.exports}var bC=vC();var K_="popstate";function _C(n={}){function e(a,l){let{pathname:u="/",search:d="",hash:m=""}=ml(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),ry("",{pathname:u,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let u=a.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let m=a.location.href,p=m.indexOf("#");d=p===-1?m:m.slice(0,p)}return d+"#"+(typeof l=="string"?l:Ku(l))}function r(a,l){is(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return EC(e,t,r,n)}function Wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function is(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xC(){return Math.random().toString(36).substring(2,10)}function Q_(n,e){return{usr:n.state,key:n.key,idx:e}}function ry(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ml(e):e,state:t,key:e&&e.key||r||xC()}}function Ku({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ml(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function EC(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,u=a.history,d="POP",m=null,p=v();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function v(){return(u.state||{idx:null}).idx}function x(){d="POP";let I=v(),B=I==null?null:I-p;p=I,m&&m({action:d,location:L.location,delta:B})}function E(I,B){d="PUSH";let $=ry(L.location,I,B);t&&t($,I),p=v()+1;let Y=Q_($,p),ee=L.createHref($);try{u.pushState(Y,"",ee)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;a.location.assign(ee)}l&&m&&m({action:d,location:L.location,delta:1})}function A(I,B){d="REPLACE";let $=ry(L.location,I,B);t&&t($,I),p=v();let Y=Q_($,p),ee=L.createHref($);u.replaceState(Y,"",ee),l&&m&&m({action:d,location:L.location,delta:0})}function C(I){return wC(I)}let L={get action(){return d},get location(){return n(a,u)},listen(I){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(K_,x),m=I,()=>{a.removeEventListener(K_,x),m=null}},createHref(I){return e(a,I)},createURL:C,encodeLocation(I){let B=C(I);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:E,replace:A,go(I){return u.go(I)}};return L}function wC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Ku(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Pw(n,e,t="/"){return TC(n,e,t,!1)}function TC(n,e,t,r){let a=typeof e=="string"?ml(e):e,l=ya(a.pathname||"/",t);if(l==null)return null;let u=Vw(n);AC(u);let d=null;for(let m=0;d==null&&m<u.length;++m){let p=MC(l);d=jC(u[m],p,r)}return d}function Vw(n,e=[],t=[],r="",a=!1){let l=(u,d,m=a,p)=>{let v={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&m)return;Wt(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let x=pa([r,v.relativePath]),E=t.concat(v);u.children&&u.children.length>0&&(Wt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Vw(u.children,e,E,x,m)),!(u.path==null&&!u.index)&&e.push({path:x,score:DC(x,u.index),routesMeta:E})};return n.forEach((u,d)=>{if(u.path===""||!u.path?.includes("?"))l(u,d);else for(let m of Uw(u.path))l(u,d,!0,m)}),e}function Uw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let u=Uw(r.join("/")),d=[];return d.push(...u.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...u),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function AC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:LC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var SC=/^:[\w-]+$/,NC=3,CC=2,RC=1,IC=10,OC=-2,Y_=n=>n==="*";function DC(n,e){let t=n.split("/"),r=t.length;return t.some(Y_)&&(r+=OC),e&&(r+=CC),t.filter(a=>!Y_(a)).reduce((a,l)=>a+(SC.test(l)?NC:l===""?RC:IC),r)}function LC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function jC(n,e,t=!1){let{routesMeta:r}=n,a={},l="/",u=[];for(let d=0;d<r.length;++d){let m=r[d],p=d===r.length-1,v=l==="/"?e:e.slice(l.length)||"/",x=Ef({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},v),E=m.route;if(!x&&p&&t&&!r[r.length-1].route.index&&(x=Ef({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!x)return null;Object.assign(a,x.params),u.push({params:a,pathname:pa([l,x.pathname]),pathnameBase:BC(pa([l,x.pathnameBase])),route:E}),x.pathnameBase!=="/"&&(l=pa([l,x.pathnameBase]))}return u}function Ef(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=kC(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((p,{paramName:v,isOptional:x},E)=>{if(v==="*"){let C=d[E]||"";u=l.slice(0,l.length-C.length).replace(/(.)\/+$/,"$1")}const A=d[E];return x&&!A?p[v]=void 0:p[v]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:u,pattern:n}}function kC(n,e=!1,t=!0){is(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function MC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return is(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ya(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var PC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VC=n=>PC.test(n);function UC(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?ml(n):n,l;if(t)if(VC(t))l=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),is(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${t}`)}t.startsWith("/")?l=X_(t.substring(1),"/"):l=X_(t,e)}else l=e;return{pathname:l,search:zC(r),hash:HC(a)}}function X_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Ng(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Xy(n){let e=qC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Wy(n,e,t,r=!1){let a;typeof n=="string"?a=ml(n):(a={...n},Wt(!a.pathname||!a.pathname.includes("?"),Ng("?","pathname","search",a)),Wt(!a.pathname||!a.pathname.includes("#"),Ng("#","pathname","hash",a)),Wt(!a.search||!a.search.includes("#"),Ng("#","search","hash",a)));let l=n===""||a.pathname==="",u=l?"/":a.pathname,d;if(u==null)d=t;else{let x=e.length-1;if(!r&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),x-=1;a.pathname=E.join("/")}d=x>=0?e[x]:"/"}let m=UC(a,d),p=u&&u!=="/"&&u.endsWith("/"),v=(l||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||v)&&(m.pathname+="/"),m}var pa=n=>n.join("/").replace(/\/\/+/g,"/"),BC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),zC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,HC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function FC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function GC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var qw=["POST","PUT","PATCH","DELETE"];new Set(qw);var $C=["GET",...qw];new Set($C);var Rc=U.createContext(null);Rc.displayName="DataRouter";var Kf=U.createContext(null);Kf.displayName="DataRouterState";U.createContext(!1);var Bw=U.createContext({isTransitioning:!1});Bw.displayName="ViewTransition";var KC=U.createContext(new Map);KC.displayName="Fetchers";var QC=U.createContext(null);QC.displayName="Await";var js=U.createContext(null);js.displayName="Navigation";var uh=U.createContext(null);uh.displayName="Location";var ks=U.createContext({outlet:null,matches:[],isDataRoute:!1});ks.displayName="Route";var Zy=U.createContext(null);Zy.displayName="RouteError";function YC(n,{relative:e}={}){Wt(Ic(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=U.useContext(js),{hash:a,pathname:l,search:u}=hh(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:pa([t,l])),r.createHref({pathname:d,search:u,hash:a})}function Ic(){return U.useContext(uh)!=null}function Co(){return Wt(Ic(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(uh).location}var zw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Hw(n){U.useContext(js).static||U.useLayoutEffect(n)}function Di(){let{isDataRoute:n}=U.useContext(ks);return n?uR():XC()}function XC(){Wt(Ic(),"useNavigate() may be used only in the context of a <Router> component.");let n=U.useContext(Rc),{basename:e,navigator:t}=U.useContext(js),{matches:r}=U.useContext(ks),{pathname:a}=Co(),l=JSON.stringify(Xy(r)),u=U.useRef(!1);return Hw(()=>{u.current=!0}),U.useCallback((m,p={})=>{if(is(u.current,zw),!u.current)return;if(typeof m=="number"){t.go(m);return}let v=Wy(m,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:pa([e,v.pathname])),(p.replace?t.replace:t.push)(v,p.state,p)},[e,t,l,a,n])}var WC=U.createContext(null);function ZC(n){let e=U.useContext(ks).outlet;return U.useMemo(()=>e&&U.createElement(WC.Provider,{value:n},e),[e,n])}function Oc(){let{matches:n}=U.useContext(ks),e=n[n.length-1];return e?e.params:{}}function hh(n,{relative:e}={}){let{matches:t}=U.useContext(ks),{pathname:r}=Co(),a=JSON.stringify(Xy(t));return U.useMemo(()=>Wy(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function JC(n,e){return Fw(n,e)}function Fw(n,e,t,r,a){Wt(Ic(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=U.useContext(js),{matches:u}=U.useContext(ks),d=u[u.length-1],m=d?d.params:{},p=d?d.pathname:"/",v=d?d.pathnameBase:"/",x=d&&d.route;{let $=x&&x.path||"";Gw(p,!x||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let E=Co(),A;if(e){let $=typeof e=="string"?ml(e):e;Wt(v==="/"||$.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${$.pathname}" was given in the \`location\` prop.`),A=$}else A=E;let C=A.pathname||"/",L=C;if(v!=="/"){let $=v.replace(/^\//,"").split("/");L="/"+C.replace(/^\//,"").split("/").slice($.length).join("/")}let I=Pw(n,{pathname:L});is(x||I!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),is(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=sR(I&&I.map($=>Object.assign({},$,{params:Object.assign({},m,$.params),pathname:pa([v,l.encodeLocation?l.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?v:pa([v,l.encodeLocation?l.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),u,t,r,a);return e&&B?U.createElement(uh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},B):B}function eR(){let n=cR(),e=FC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:l},"ErrorBoundary")," or"," ",U.createElement("code",{style:l},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),t?U.createElement("pre",{style:a},t):null,u)}var tR=U.createElement(eR,null),nR=class extends U.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?U.createElement(ks.Provider,{value:this.props.routeContext},U.createElement(Zy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rR({routeContext:n,match:e,children:t}){let r=U.useContext(Rc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(ks.Provider,{value:n},t)}function sR(n,e=[],t=null,r=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,u=t?.errors;if(u!=null){let v=l.findIndex(x=>x.route.id&&u?.[x.route.id]!==void 0);Wt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,m=-1;if(t)for(let v=0;v<l.length;v++){let x=l[v];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=v),x.route.id){let{loaderData:E,errors:A}=t,C=x.route.loader&&!E.hasOwnProperty(x.route.id)&&(!A||A[x.route.id]===void 0);if(x.route.lazy||C){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let p=t&&r?(v,x)=>{r(v,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:GC(t.matches),errorInfo:x})}:void 0;return l.reduceRight((v,x,E)=>{let A,C=!1,L=null,I=null;t&&(A=u&&x.route.id?u[x.route.id]:void 0,L=x.route.errorElement||tR,d&&(m<0&&E===0?(Gw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,I=null):m===E&&(C=!0,I=x.route.hydrateFallbackElement||null)));let B=e.concat(l.slice(0,E+1)),$=()=>{let Y;return A?Y=L:C?Y=I:x.route.Component?Y=U.createElement(x.route.Component,null):x.route.element?Y=x.route.element:Y=v,U.createElement(rR,{match:x,routeContext:{outlet:v,matches:B,isDataRoute:t!=null},children:Y})};return t&&(x.route.ErrorBoundary||x.route.errorElement||E===0)?U.createElement(nR,{location:t.location,revalidation:t.revalidation,component:L,error:A,children:$(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:p}):$()},null)}function Jy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iR(n){let e=U.useContext(Rc);return Wt(e,Jy(n)),e}function aR(n){let e=U.useContext(Kf);return Wt(e,Jy(n)),e}function oR(n){let e=U.useContext(ks);return Wt(e,Jy(n)),e}function e0(n){let e=oR(n),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function lR(){return e0("useRouteId")}function cR(){let n=U.useContext(Zy),e=aR("useRouteError"),t=e0("useRouteError");return n!==void 0?n:e.errors?.[t]}function uR(){let{router:n}=iR("useNavigate"),e=e0("useNavigate"),t=U.useRef(!1);return Hw(()=>{t.current=!0}),U.useCallback(async(a,l={})=>{is(t.current,zw),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var W_={};function Gw(n,e,t){!e&&!W_[n]&&(W_[n]=!0,is(!1,t))}U.memo(hR);function hR({routes:n,future:e,state:t,unstable_onError:r}){return Fw(n,void 0,t,r,e)}function dR({to:n,replace:e,state:t,relative:r}){Wt(Ic(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=U.useContext(js);is(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=U.useContext(ks),{pathname:u}=Co(),d=Di(),m=Wy(n,Xy(l),u,r==="path"),p=JSON.stringify(m);return U.useEffect(()=>{d(JSON.parse(p),{replace:e,state:t,relative:r})},[d,p,r,e,t]),null}function fR(n){return ZC(n.context)}function _n(n){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mR({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1,unstable_useTransitions:u}){Wt(!Ic(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=U.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:u,future:{}}),[d,a,l,u]);typeof t=="string"&&(t=ml(t));let{pathname:p="/",search:v="",hash:x="",state:E=null,key:A="default"}=t,C=U.useMemo(()=>{let L=ya(p,d);return L==null?null:{location:{pathname:L,search:v,hash:x,state:E,key:A},navigationType:r}},[d,p,v,x,E,A,r]);return is(C!=null,`<Router basename="${d}"> is not able to match the URL "${p}${v}${x}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:U.createElement(js.Provider,{value:m},U.createElement(uh.Provider,{children:e,value:C}))}function pR({children:n,location:e}){return JC(sy(n),e)}function sy(n,e=[]){let t=[];return U.Children.forEach(n,(r,a)=>{if(!U.isValidElement(r))return;let l=[...e,a];if(r.type===U.Fragment){t.push.apply(t,sy(r.props.children,l));return}Wt(r.type===_n,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=sy(r.props.children,l)),t.push(u)}),t}var cf="get",uf="application/x-www-form-urlencoded";function Qf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function gR(n){return Qf(n)&&n.tagName.toLowerCase()==="button"}function yR(n){return Qf(n)&&n.tagName.toLowerCase()==="form"}function vR(n){return Qf(n)&&n.tagName.toLowerCase()==="input"}function bR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function _R(n,e){return n.button===0&&(!e||e==="_self")&&!bR(n)}var Hd=null;function xR(){if(Hd===null)try{new FormData(document.createElement("form"),0),Hd=!1}catch{Hd=!0}return Hd}var ER=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Cg(n){return n!=null&&!ER.has(n)?(is(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uf}"`),null):n}function wR(n,e){let t,r,a,l,u;if(yR(n)){let d=n.getAttribute("action");r=d?ya(d,e):null,t=n.getAttribute("method")||cf,a=Cg(n.getAttribute("enctype"))||uf,l=new FormData(n)}else if(gR(n)||vR(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(r=m?ya(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||cf,a=Cg(n.getAttribute("formenctype"))||Cg(d.getAttribute("enctype"))||uf,l=new FormData(d,n),!xR()){let{name:p,type:v,value:x}=n;if(v==="image"){let E=p?`${p}.`:"";l.append(`${E}x`,"0"),l.append(`${E}y`,"0")}else p&&l.append(p,x)}}else{if(Qf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=cf,r=null,a=uf,u=n}return l&&a==="text/plain"&&(u=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function t0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function TR(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&ya(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function AR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function SR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function NR(n,e,t){let r=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await AR(l,t);return u.links?u.links():[]}return[]}));return OR(r.flat(1).filter(SR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Z_(n,e,t,r,a,l){let u=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>t[p].pathname!==m.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,p)=>u(m,p)||d(m,p)):l==="data"?e.filter((m,p)=>{let v=r.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(u(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let x=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function CR(n,e,{includeHydrateFallback:t}={}){return RR(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function RR(n){return[...new Set(n)]}function IR(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function OR(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let l=JSON.stringify(IR(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function $w(){let n=U.useContext(Rc);return t0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function DR(){let n=U.useContext(Kf);return t0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var n0=U.createContext(void 0);n0.displayName="FrameworkContext";function Kw(){let n=U.useContext(n0);return t0(n,"You must render this element inside a <HydratedRouter> element"),n}function LR(n,e){let t=U.useContext(n0),[r,a]=U.useState(!1),[l,u]=U.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:v,onTouchStart:x}=e,E=U.useRef(null);U.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let L=B=>{B.forEach($=>{u($.isIntersecting)})},I=new IntersectionObserver(L,{threshold:.5});return E.current&&I.observe(E.current),()=>{I.disconnect()}}},[n]),U.useEffect(()=>{if(r){let L=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(L)}}},[r]);let A=()=>{a(!0)},C=()=>{a(!1),u(!1)};return t?n!=="intent"?[l,E,{}]:[l,E,{onFocus:Su(d,A),onBlur:Su(m,C),onMouseEnter:Su(p,A),onMouseLeave:Su(v,C),onTouchStart:Su(x,A)}]:[!1,E,{}]}function Su(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function jR({page:n,...e}){let{router:t}=$w(),r=U.useMemo(()=>Pw(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?U.createElement(MR,{page:n,matches:r,...e}):null}function kR(n){let{manifest:e,routeModules:t}=Kw(),[r,a]=U.useState([]);return U.useEffect(()=>{let l=!1;return NR(n,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[n,e,t]),r}function MR({page:n,matches:e,...t}){let r=Co(),{manifest:a,routeModules:l}=Kw(),{basename:u}=$w(),{loaderData:d,matches:m}=DR(),p=U.useMemo(()=>Z_(n,e,m,a,r,"data"),[n,e,m,a,r]),v=U.useMemo(()=>Z_(n,e,m,a,r,"assets"),[n,e,m,a,r]),x=U.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let C=new Set,L=!1;if(e.forEach(B=>{let $=a.routes[B.route.id];!$||!$.hasLoader||(!p.some(Y=>Y.route.id===B.route.id)&&B.route.id in d&&l[B.route.id]?.shouldRevalidate||$.hasClientLoader?L=!0:C.add(B.route.id))}),C.size===0)return[];let I=TR(n,u,"data");return L&&C.size>0&&I.searchParams.set("_routes",e.filter(B=>C.has(B.route.id)).map(B=>B.route.id).join(",")),[I.pathname+I.search]},[u,d,r,a,p,e,n,l]),E=U.useMemo(()=>CR(v,a),[v,a]),A=kR(v);return U.createElement(U.Fragment,null,x.map(C=>U.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),E.map(C=>U.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),A.map(({key:C,link:L})=>U.createElement("link",{key:C,nonce:t.nonce,...L})))}function PR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Qw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Qw&&(window.__reactRouterVersion="7.10.1")}catch{}function VR({basename:n,children:e,unstable_useTransitions:t,window:r}){let a=U.useRef();a.current==null&&(a.current=_C({window:r,v5Compat:!0}));let l=a.current,[u,d]=U.useState({action:l.action,location:l.location}),m=U.useCallback(p=>{t===!1?d(p):U.startTransition(()=>d(p))},[t]);return U.useLayoutEffect(()=>l.listen(m),[l,m]),U.createElement(mR,{basename:n,children:e,location:u.location,navigationType:u.action,navigator:l,unstable_useTransitions:t===!0})}var Yw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yt=U.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:u,state:d,target:m,to:p,preventScrollReset:v,viewTransition:x,...E},A){let{basename:C,unstable_useTransitions:L}=U.useContext(js),I=typeof p=="string"&&Yw.test(p),B,$=!1;if(typeof p=="string"&&I&&(B=p,Qw))try{let F=new URL(window.location.href),S=p.startsWith("//")?new URL(F.protocol+p):new URL(p),k=ya(S.pathname,C);S.origin===F.origin&&k!=null?p=k+S.search+S.hash:$=!0}catch{is(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=YC(p,{relative:a}),[ee,fe,xe]=LR(r,E),M=BR(p,{replace:u,state:d,target:m,preventScrollReset:v,relative:a,viewTransition:x,unstable_useTransitions:L});function j(F){e&&e(F),F.defaultPrevented||M(F)}let P=U.createElement("a",{...E,...xe,href:B||Y,onClick:$||l?e:j,ref:PR(A,fe),target:m,"data-discover":!I&&t==="render"?"true":void 0});return ee&&!I?U.createElement(U.Fragment,null,P,U.createElement(jR,{page:Y})):P});yt.displayName="Link";var Xw=U.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:u,viewTransition:d,children:m,...p},v){let x=hh(u,{relative:p.relative}),E=Co(),A=U.useContext(Kf),{navigator:C,basename:L}=U.useContext(js),I=A!=null&&$R(x)&&d===!0,B=C.encodeLocation?C.encodeLocation(x).pathname:x.pathname,$=E.pathname,Y=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||($=$.toLowerCase(),Y=Y?Y.toLowerCase():null,B=B.toLowerCase()),Y&&L&&(Y=ya(Y,L)||Y);const ee=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let fe=$===B||!a&&$.startsWith(B)&&$.charAt(ee)==="/",xe=Y!=null&&(Y===B||!a&&Y.startsWith(B)&&Y.charAt(B.length)==="/"),M={isActive:fe,isPending:xe,isTransitioning:I},j=fe?e:void 0,P;typeof r=="function"?P=r(M):P=[r,fe?"active":null,xe?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let F=typeof l=="function"?l(M):l;return U.createElement(yt,{...p,"aria-current":j,className:P,ref:v,style:F,to:u,viewTransition:d},typeof m=="function"?m(M):m)});Xw.displayName="NavLink";var UR=U.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:u=cf,action:d,onSubmit:m,relative:p,preventScrollReset:v,viewTransition:x,...E},A)=>{let{unstable_useTransitions:C}=U.useContext(js),L=FR(),I=GR(d,{relative:p}),B=u.toLowerCase()==="get"?"get":"post",$=typeof d=="string"&&Yw.test(d),Y=ee=>{if(m&&m(ee),ee.defaultPrevented)return;ee.preventDefault();let fe=ee.nativeEvent.submitter,xe=fe?.getAttribute("formmethod")||u,M=()=>L(fe||ee.currentTarget,{fetcherKey:e,method:xe,navigate:t,replace:a,state:l,relative:p,preventScrollReset:v,viewTransition:x});C&&t!==!1?U.startTransition(()=>M()):M()};return U.createElement("form",{ref:A,method:B,action:I,onSubmit:r?m:Y,...E,"data-discover":!$&&n==="render"?"true":void 0})});UR.displayName="Form";function qR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ww(n){let e=U.useContext(Rc);return Wt(e,qR(n)),e}function BR(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:u,unstable_useTransitions:d}={}){let m=Di(),p=Co(),v=hh(n,{relative:l});return U.useCallback(x=>{if(_R(x,e)){x.preventDefault();let E=t!==void 0?t:Ku(p)===Ku(v),A=()=>m(n,{replace:E,state:r,preventScrollReset:a,relative:l,viewTransition:u});d?U.startTransition(()=>A()):A()}},[p,m,v,t,r,e,n,a,l,u,d])}var zR=0,HR=()=>`__${String(++zR)}__`;function FR(){let{router:n}=Ww("useSubmit"),{basename:e}=U.useContext(js),t=lR(),r=n.fetch,a=n.navigate;return U.useCallback(async(l,u={})=>{let{action:d,method:m,encType:p,formData:v,body:x}=wR(l,e);if(u.navigate===!1){let E=u.fetcherKey||HR();await r(E,t,u.action||d,{preventScrollReset:u.preventScrollReset,formData:v,body:x,formMethod:u.method||m,formEncType:u.encType||p,flushSync:u.flushSync})}else await a(u.action||d,{preventScrollReset:u.preventScrollReset,formData:v,body:x,formMethod:u.method||m,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,a,e,t])}function GR(n,{relative:e}={}){let{basename:t}=U.useContext(js),r=U.useContext(ks);Wt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...hh(n||".",{relative:e})},u=Co();if(n==null){l.search=u.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(v=>v==="")){d.delete("index"),m.filter(x=>x).forEach(x=>d.append("index",x));let v=d.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:pa([t,l.pathname])),Ku(l)}function $R(n,{relative:e}={}){let t=U.useContext(Bw);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ww("useViewTransitionState"),a=hh(n,{relative:e});if(!t.isTransitioning)return!1;let l=ya(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=ya(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ef(a.pathname,u)!=null||Ef(a.pathname,l)!=null}const KR=()=>{};var J_={};const Zw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},QR=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],u=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Jw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,d=u?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,v=l>>2,x=(l&3)<<4|d>>4;let E=(d&15)<<2|p>>6,A=p&63;m||(A=64,u||(E=64)),r.push(t[v],t[x],t[E],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Zw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):QR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const x=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||p==null||x==null)throw new YR;const E=l<<2|d>>4;if(r.push(E),p!==64){const A=d<<4&240|p>>2;if(r.push(A),x!==64){const C=p<<6&192|x;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class YR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XR=function(n){const e=Zw(n);return Jw.encodeByteArray(e,!0)},wf=function(n){return XR(n).replace(/\./g,"")},eT=function(n){try{return Jw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function WR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ZR=()=>WR().__FIREBASE_DEFAULTS__,JR=()=>{if(typeof process>"u"||typeof J_>"u")return;const n=J_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},e4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&eT(n[1]);return e&&JSON.parse(e)},Yf=()=>{try{return KR()||ZR()||JR()||e4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tT=n=>Yf()?.emulatorHosts?.[n],t4=n=>{const e=tT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},nT=()=>Yf()?.config,rT=n=>Yf()?.[`_${n}`];class n4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Dc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sT(n){return(await fetch(n,{credentials:"include"})).ok}function r4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[wf(JSON.stringify(t)),wf(JSON.stringify(u)),""].join(".")}const Uu={};function s4(){const n={prod:[],emulator:[]};for(const e of Object.keys(Uu))Uu[e]?n.emulator.push(e):n.prod.push(e);return n}function i4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ex=!1;function iT(n,e){if(typeof window>"u"||typeof document>"u"||!Dc(window.location.host)||Uu[n]===e||Uu[n]||ex)return;Uu[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",l=s4().prod.length>0;function u(){const E=document.getElementById(r);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function m(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{ex=!0,u()},E}function v(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function x(){const E=i4(r),A=t("text"),C=document.getElementById(A)||document.createElement("span"),L=t("learnmore"),I=document.getElementById(L)||document.createElement("a"),B=t("preprendIcon"),$=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Y=E.element;d(Y),v(I,L);const ee=p();m($,B),Y.append($,C,I,ee),document.body.appendChild(Y)}l?(C.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function ur(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ur())}function o4(){const n=Yf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function l4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function c4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function u4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function h4(){const n=ur();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function d4(){return!o4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function f4(){try{return typeof indexedDB=="object"}catch{return!1}}function m4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const p4="FirebaseError";class Ta extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=p4,Object.setPrototypeOf(this,Ta.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dh.prototype.create)}}class dh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?g4(l,r):"Error",d=`${this.serviceName}: ${u} (${a}).`;return new Ta(a,d,r)}}function g4(n,e){return n.replace(y4,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const y4=/\{\$([^}]+)}/g;function v4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function sl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],u=e[a];if(tx(l)&&tx(u)){if(!sl(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function tx(n){return n!==null&&typeof n=="object"}function fh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Iu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Ou(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function b4(n,e){const t=new _4(n,e);return t.subscribe.bind(t)}class _4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");x4(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Rg),a.error===void 0&&(a.error=Rg),a.complete===void 0&&(a.complete=Rg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function x4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Rg(){}function Cn(n){return n&&n._delegate?n._delegate:n}class il{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const el="[DEFAULT]";class E4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new n4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(T4(e))try{this.getOrInitializeService({instanceIdentifier:el})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=el){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=el){return this.instances.has(e)}getOptions(e=el){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&u.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:w4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=el){return this.component?this.component.multipleInstances?e:el:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function w4(n){return n===el?void 0:n}function T4(n){return n.instantiationMode==="EAGER"}class A4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new E4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var st;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(st||(st={}));const S4={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},N4=st.INFO,C4={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},R4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=C4[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class r0{constructor(e){this.name=e,this._logLevel=N4,this._logHandler=R4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?S4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const I4=(n,e)=>e.some(t=>n instanceof t);let nx,rx;function O4(){return nx||(nx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D4(){return rx||(rx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aT=new WeakMap,iy=new WeakMap,oT=new WeakMap,Ig=new WeakMap,s0=new WeakMap;function L4(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(mo(n.result)),a()},u=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&aT.set(t,n)}).catch(()=>{}),s0.set(e,n),e}function j4(n){if(iy.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});iy.set(n,e)}let ay={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return iy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||oT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function k4(n){ay=n(ay)}function M4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Og(this),e,...t);return oT.set(r,e.sort?e.sort():[e]),mo(r)}:D4().includes(n)?function(...e){return n.apply(Og(this),e),mo(aT.get(this))}:function(...e){return mo(n.apply(Og(this),e))}}function P4(n){return typeof n=="function"?M4(n):(n instanceof IDBTransaction&&j4(n),I4(n,O4())?new Proxy(n,ay):n)}function mo(n){if(n instanceof IDBRequest)return L4(n);if(Ig.has(n))return Ig.get(n);const e=P4(n);return e!==n&&(Ig.set(n,e),s0.set(e,n)),e}const Og=n=>s0.get(n);function V4(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),d=mo(u);return r&&u.addEventListener("upgradeneeded",m=>{r(mo(u.result),m.oldVersion,m.newVersion,mo(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const U4=["get","getKey","getAll","getAllKeys","count"],q4=["put","add","delete","clear"],Dg=new Map;function sx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Dg.get(e))return Dg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=q4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||U4.includes(t)))return;const l=async function(u,...d){const m=this.transaction(u,a?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&m.done]))[0]};return Dg.set(e,l),l}k4(n=>({...n,get:(e,t,r)=>sx(e,t)||n.get(e,t,r),has:(e,t)=>!!sx(e,t)||n.has(e,t)}));class B4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(z4(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function z4(n){return n.getComponent()?.type==="VERSION"}const oy="@firebase/app",ix="0.14.6";const va=new r0("@firebase/app"),H4="@firebase/app-compat",F4="@firebase/analytics-compat",G4="@firebase/analytics",$4="@firebase/app-check-compat",K4="@firebase/app-check",Q4="@firebase/auth",Y4="@firebase/auth-compat",X4="@firebase/database",W4="@firebase/data-connect",Z4="@firebase/database-compat",J4="@firebase/functions",eI="@firebase/functions-compat",tI="@firebase/installations",nI="@firebase/installations-compat",rI="@firebase/messaging",sI="@firebase/messaging-compat",iI="@firebase/performance",aI="@firebase/performance-compat",oI="@firebase/remote-config",lI="@firebase/remote-config-compat",cI="@firebase/storage",uI="@firebase/storage-compat",hI="@firebase/firestore",dI="@firebase/ai",fI="@firebase/firestore-compat",mI="firebase",pI="12.6.0";const ly="[DEFAULT]",gI={[oy]:"fire-core",[H4]:"fire-core-compat",[G4]:"fire-analytics",[F4]:"fire-analytics-compat",[K4]:"fire-app-check",[$4]:"fire-app-check-compat",[Q4]:"fire-auth",[Y4]:"fire-auth-compat",[X4]:"fire-rtdb",[W4]:"fire-data-connect",[Z4]:"fire-rtdb-compat",[J4]:"fire-fn",[eI]:"fire-fn-compat",[tI]:"fire-iid",[nI]:"fire-iid-compat",[rI]:"fire-fcm",[sI]:"fire-fcm-compat",[iI]:"fire-perf",[aI]:"fire-perf-compat",[oI]:"fire-rc",[lI]:"fire-rc-compat",[cI]:"fire-gcs",[uI]:"fire-gcs-compat",[hI]:"fire-fst",[fI]:"fire-fst-compat",[dI]:"fire-vertex","fire-js":"fire-js",[mI]:"fire-js-all"};const Tf=new Map,yI=new Map,cy=new Map;function ax(n,e){try{n.container.addComponent(e)}catch(t){va.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function yc(n){const e=n.name;if(cy.has(e))return va.debug(`There were multiple attempts to register component ${e}.`),!1;cy.set(e,n);for(const t of Tf.values())ax(t,n);for(const t of yI.values())ax(t,n);return!0}function i0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ts(n){return n==null?!1:n.settings!==void 0}const vI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},po=new dh("app","Firebase",vI);class bI{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new il("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw po.create("app-deleted",{appName:this._name})}}const Lc=pI;function lT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:ly,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw po.create("bad-app-name",{appName:String(a)});if(t||(t=nT()),!t)throw po.create("no-options");const l=Tf.get(a);if(l){if(sl(t,l.options)&&sl(r,l.config))return l;throw po.create("duplicate-app",{appName:a})}const u=new A4(a);for(const m of cy.values())u.addComponent(m);const d=new bI(t,r,u);return Tf.set(a,d),d}function cT(n=ly){const e=Tf.get(n);if(!e&&n===ly&&nT())return lT();if(!e)throw po.create("no-app",{appName:n});return e}function go(n,e,t){let r=gI[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${r}" with version "${e}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),va.warn(u.join(" "));return}yc(new il(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const _I="firebase-heartbeat-database",xI=1,Qu="firebase-heartbeat-store";let Lg=null;function uT(){return Lg||(Lg=V4(_I,xI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Qu)}catch(t){console.warn(t)}}}}).catch(n=>{throw po.create("idb-open",{originalErrorMessage:n.message})})),Lg}async function EI(n){try{const t=(await uT()).transaction(Qu),r=await t.objectStore(Qu).get(hT(n));return await t.done,r}catch(e){if(e instanceof Ta)va.warn(e.message);else{const t=po.create("idb-get",{originalErrorMessage:e?.message});va.warn(t.message)}}}async function ox(n,e){try{const r=(await uT()).transaction(Qu,"readwrite");await r.objectStore(Qu).put(e,hT(n)),await r.done}catch(t){if(t instanceof Ta)va.warn(t.message);else{const r=po.create("idb-set",{originalErrorMessage:t?.message});va.warn(r.message)}}}function hT(n){return`${n.name}!${n.options.appId}`}const wI=1024,TI=30;class AI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new NI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=lx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>TI){const a=CI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){va.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=lx(),{heartbeatsToSend:t,unsentEntries:r}=SI(this._heartbeatsCache.heartbeats),a=wf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return va.warn(e),""}}}function lx(){return new Date().toISOString().substring(0,10)}function SI(n,e=wI){const t=[];let r=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),cx(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),cx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class NI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return f4()?m4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await EI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ox(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ox(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function cx(n){return wf(JSON.stringify({version:2,heartbeats:n})).length}function CI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function RI(n){yc(new il("platform-logger",e=>new B4(e),"PRIVATE")),yc(new il("heartbeat",e=>new AI(e),"PRIVATE")),go(oy,ix,n),go(oy,ix,"esm2020"),go("fire-js","")}RI("");var II="firebase",OI="12.6.0";go(II,OI,"app");function dT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DI=dT,fT=new dh("auth","Firebase",dT());const Af=new r0("@firebase/auth");function LI(n,...e){Af.logLevel<=st.WARN&&Af.warn(`Auth (${Lc}): ${n}`,...e)}function hf(n,...e){Af.logLevel<=st.ERROR&&Af.error(`Auth (${Lc}): ${n}`,...e)}function Ds(n,...e){throw o0(n,...e)}function Js(n,...e){return o0(n,...e)}function a0(n,e,t){const r={...DI(),[e]:t};return new dh("auth","Firebase",r).create(e,{appName:n.name})}function ga(n){return a0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jI(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ds(n,"argument-error"),a0(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function o0(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return fT.create(n,...e)}function Ue(n,e,...t){if(!n)throw o0(e,...t)}function fa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw hf(e),new Error(e)}function ba(n,e){n||fa(e)}function uy(){return typeof self<"u"&&self.location?.href||""}function kI(){return ux()==="http:"||ux()==="https:"}function ux(){return typeof self<"u"&&self.location?.protocol||null}function MI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kI()||c4()||"connection"in navigator)?navigator.onLine:!0}function PI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class mh{constructor(e,t){this.shortDelay=e,this.longDelay=t,ba(t>e,"Short delay should be less than long delay!"),this.isMobile=a4()||u4()}get(){return MI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function l0(n,e){ba(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class mT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const VI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const UI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qI=new mh(3e4,6e4);function Ro(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Aa(n,e,t,r,a={}){return pT(n,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const d=fh({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...l};return l4()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Dc(n.emulatorConfig.host)&&(p.credentials="include"),mT.fetch()(await gT(n,n.config.apiHost,t,d),p)})}async function pT(n,e,t){n._canInitEmulator=!1;const r={...VI,...e};try{const a=new zI(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Fd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[m,p]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fd(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Fd(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw Fd(n,"user-disabled",u);const v=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw a0(n,v,p);Ds(n,v)}}catch(a){if(a instanceof Ta)throw a;Ds(n,"network-request-failed",{message:String(a)})}}async function ph(n,e,t,r,a={}){const l=await Aa(n,e,t,r,a);return"mfaPendingCredential"in l&&Ds(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function gT(n,e,t,r){const a=`${e}${t}?${r}`,l=n,u=l.config.emulator?l0(n.config,a):`${n.config.apiScheme}://${a}`;return UI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function BI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Js(this.auth,"network-request-failed")),qI.get())})}}function Fd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Js(n,e,r);return a.customData._tokenResponse=t,a}function hx(n){return n!==void 0&&n.enterprise!==void 0}class HI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return BI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function FI(n,e){return Aa(n,"GET","/v2/recaptchaConfig",Ro(n,e))}async function GI(n,e){return Aa(n,"POST","/v1/accounts:delete",e)}async function Sf(n,e){return Aa(n,"POST","/v1/accounts:lookup",e)}function qu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $I(n,e=!1){const t=Cn(n),r=await t.getIdToken(e),a=c0(r);Ue(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:r,authTime:qu(jg(a.auth_time)),issuedAtTime:qu(jg(a.iat)),expirationTime:qu(jg(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function jg(n){return Number(n)*1e3}function c0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return hf("JWT malformed, contained fewer than 3 sections"),null;try{const a=eT(t);return a?JSON.parse(a):(hf("Failed to decode base64 JWT payload"),null)}catch(a){return hf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function dx(n){const e=c0(n);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function vc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ta&&KI(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function KI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class QI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class hy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qu(this.lastLoginAt),this.creationTime=qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Nf(n){const e=n.auth,t=await n.getIdToken(),r=await vc(n,Sf(e,{idToken:t}));Ue(r?.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?yT(a.providerUserInfo):[],u=XI(n.providerData,l),d=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!u?.length,p=d?m:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new hy(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function YI(n){const e=Cn(n);await Nf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XI(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function yT(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function WI(n,e){const t=await pT(n,{},async()=>{const r=fh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await gT(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:r};return n.emulatorConfig&&Dc(n.emulatorConfig.host)&&(m.credentials="include"),mT.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZI(n,e){return Aa(n,"POST","/v2/accounts:revokeToken",Ro(n,e))}class cc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=dx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await WI(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,u=new cc;return r&&(Ue(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(Ue(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Ue(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cc,this.toJSON())}_performRefresh(){return fa("not implemented")}}function ro(n,e){Ue(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Zs{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new QI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new hy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await vc(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $I(this,e)}reload(){return YI(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Nf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ts(this.auth.app))return Promise.reject(ga(this.auth));const e=await this.getIdToken();return await vc(this,GI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:x,emailVerified:E,isAnonymous:A,providerData:C,stsTokenManager:L}=t;Ue(x&&L,e,"internal-error");const I=cc.fromJSON(this.name,L);Ue(typeof x=="string",e,"internal-error"),ro(r,e.name),ro(a,e.name),Ue(typeof E=="boolean",e,"internal-error"),Ue(typeof A=="boolean",e,"internal-error"),ro(l,e.name),ro(u,e.name),ro(d,e.name),ro(m,e.name),ro(p,e.name),ro(v,e.name);const B=new Zs({uid:x,auth:e,email:a,emailVerified:E,displayName:r,isAnonymous:A,photoURL:u,phoneNumber:l,tenantId:d,stsTokenManager:I,createdAt:p,lastLoginAt:v});return C&&Array.isArray(C)&&(B.providerData=C.map($=>({...$}))),m&&(B._redirectEventId=m),B}static async _fromIdTokenResponse(e,t,r=!1){const a=new cc;a.updateFromServerResponse(t);const l=new Zs({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Nf(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Ue(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?yT(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,d=new cc;d.updateFromIdToken(r);const m=new Zs({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new hy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,p),m}}const fx=new Map;function ma(n){ba(n instanceof Function,"Expected a class definition");let e=fx.get(n);return e?(ba(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fx.set(n,e),e)}class vT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vT.type="NONE";const mx=vT;function df(n,e,t){return`firebase:${n}:${e}:${t}`}class uc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=df(this.userKey,a.apiKey,l),this.fullPersistenceKey=df("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Sf(this.auth,{idToken:e}).catch(()=>{});return t?Zs._fromGetAccountInfoResponse(this.auth,t,e):null}return Zs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new uc(ma(mx),e,r);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||ma(mx);const u=df(r,e.config.apiKey,e.name);let d=null;for(const p of t)try{const v=await p._get(u);if(v){let x;if(typeof v=="string"){const E=await Sf(e,{idToken:v}).catch(()=>{});if(!E)break;x=await Zs._fromGetAccountInfoResponse(e,E,v)}else x=Zs._fromJSON(e,v);p!==l&&(d=x),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new uc(l,e,r):(l=m[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new uc(l,e,r))}}function px(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ET(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TT(e))return"Blackberry";if(AT(e))return"Webos";if(_T(e))return"Safari";if((e.includes("chrome/")||xT(e))&&!e.includes("edge/"))return"Chrome";if(wT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function bT(n=ur()){return/firefox\//i.test(n)}function _T(n=ur()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xT(n=ur()){return/crios\//i.test(n)}function ET(n=ur()){return/iemobile/i.test(n)}function wT(n=ur()){return/android/i.test(n)}function TT(n=ur()){return/blackberry/i.test(n)}function AT(n=ur()){return/webos/i.test(n)}function u0(n=ur()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function JI(n=ur()){return u0(n)&&!!window.navigator?.standalone}function e3(){return h4()&&document.documentMode===10}function ST(n=ur()){return u0(n)||wT(n)||AT(n)||TT(n)||/windows phone/i.test(n)||ET(n)}function NT(n,e=[]){let t;switch(n){case"Browser":t=px(ur());break;case"Worker":t=`${px(ur())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lc}/${r}`}class t3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,d)=>{try{const m=e(l);u(m)}catch(m){d(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function n3(n,e={}){return Aa(n,"GET","/v2/passwordPolicy",Ro(n,e))}const r3=6;class s3{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??r3,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class i3{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gx(this),this.idTokenSubscription=new gx(this),this.beforeStateQueue=new t3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ma(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await uc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Sf(this,{idToken:e}),r=await Zs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ts(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===u)&&d?.user&&(r=d.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ts(this.app))return Promise.reject(ga(this));const t=e?Cn(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ts(this.app)?Promise.reject(ga(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ts(this.app)?Promise.reject(ga(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ma(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await n3(this),t=new s3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZI(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ma(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await uc.create(this,[ma(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ts(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&LI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Io(n){return Cn(n)}class gx{constructor(e){this.auth=e,this.observer=null,this.addObserver=b4(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a3(n){Xf=n}function CT(n){return Xf.loadJS(n)}function o3(){return Xf.recaptchaEnterpriseScript}function l3(){return Xf.gapiScript}function c3(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class u3{constructor(){this.enterprise=new h3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class h3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const d3="recaptcha-enterprise",RT="NO_RECAPTCHA";class f3{constructor(e){this.type=d3,this.auth=Io(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,d)=>{FI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new HI(m);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,u(p.siteKey)}}).catch(m=>{d(m)})})}function a(l,u,d){const m=window.grecaptcha;hx(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(p=>{u(p)}).catch(()=>{u(RT)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new u3().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(d=>{if(!t&&hx(window.grecaptcha))a(d,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=o3();m.length!==0&&(m+=d),CT(m).then(()=>{a(d,l,u)}).catch(p=>{u(p)})}}).catch(d=>{u(d)})})}}async function yx(n,e,t,r=!1,a=!1){const l=new f3(n);let u;if(a)u=RT;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function dy(n,e,t,r,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await yx(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await yx(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(l)})}function m3(n,e){const t=i0(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(sl(l,e??{}))return a;Ds(a,"already-initialized")}return t.initialize({options:e})}function p3(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ma);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function g3(n,e,t){const r=Io(n);Ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=IT(e),{host:u,port:d}=y3(e),m=d===null?"":`:${d}`,p={url:`${l}//${u}${m}/`},v=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ue(sl(p,r.config.emulator)&&sl(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Dc(u)?(sT(`${l}//${u}${m}`),iT("Auth",!0)):v3()}function IT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function y3(n){const e=IT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:vx(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:vx(u)}}}function vx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function v3(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class h0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fa("not implemented")}_getIdTokenResponse(e){return fa("not implemented")}_linkToIdToken(e,t){return fa("not implemented")}_getReauthenticationResolver(e){return fa("not implemented")}}async function b3(n,e){return Aa(n,"POST","/v1/accounts:signUp",e)}async function _3(n,e){return ph(n,"POST","/v1/accounts:signInWithPassword",Ro(n,e))}async function x3(n,e){return ph(n,"POST","/v1/accounts:signInWithEmailLink",Ro(n,e))}async function E3(n,e){return ph(n,"POST","/v1/accounts:signInWithEmailLink",Ro(n,e))}class Yu extends h0{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Yu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Yu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dy(e,t,"signInWithPassword",_3);case"emailLink":return x3(e,{email:this._email,oobCode:this._password});default:Ds(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dy(e,r,"signUpPassword",b3);case"emailLink":return E3(e,{idToken:t,email:this._email,oobCode:this._password});default:Ds(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function hc(n,e){return ph(n,"POST","/v1/accounts:signInWithIdp",Ro(n,e))}const w3="http://localhost";class al extends h0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new al(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ds("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const u=new al(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return hc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,hc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hc(e,t)}buildRequest(){const e={requestUri:w3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fh(t)}return e}}function T3(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function A3(n){const e=Iu(Ou(n)).link,t=e?Iu(Ou(e)).deep_link_id:null,r=Iu(Ou(n)).deep_link_id;return(r?Iu(Ou(r)).link:null)||r||t||e||n}class d0{constructor(e){const t=Iu(Ou(e)),r=t.apiKey??null,a=t.oobCode??null,l=T3(t.mode??null);Ue(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=A3(e);try{return new d0(t)}catch{return null}}}class jc{constructor(){this.providerId=jc.PROVIDER_ID}static credential(e,t){return Yu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=d0.parseLink(t);return Ue(r,"argument-error"),Yu._fromEmailAndCode(e,r.code,r.tenantId)}}jc.PROVIDER_ID="password";jc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class f0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class gh extends f0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class io extends gh{constructor(){super("facebook.com")}static credential(e){return al._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.FACEBOOK_SIGN_IN_METHOD="facebook.com";io.PROVIDER_ID="facebook.com";class Ei extends gh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return al._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ei.credential(t,r)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";class ao extends gh{constructor(){super("github.com")}static credential(e){return al._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.GITHUB_SIGN_IN_METHOD="github.com";ao.PROVIDER_ID="github.com";class oo extends gh{constructor(){super("twitter.com")}static credential(e,t){return al._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return oo.credential(t,r)}catch{return null}}}oo.TWITTER_SIGN_IN_METHOD="twitter.com";oo.PROVIDER_ID="twitter.com";async function S3(n,e){return ph(n,"POST","/v1/accounts:signUp",Ro(n,e))}class ol{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await Zs._fromIdTokenResponse(e,r,a),u=bx(r);return new ol({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=bx(r);return new ol({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function bx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Cf extends Ta{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Cf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Cf(e,t,r,a)}}function OT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Cf._fromErrorAndOperation(n,l,e,r):l})}async function N3(n,e,t=!1){const r=await vc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ol._forOperation(n,"link",r)}async function C3(n,e,t=!1){const{auth:r}=n;if(ts(r.app))return Promise.reject(ga(r));const a="reauthenticate";try{const l=await vc(n,OT(r,a,e,n),t);Ue(l.idToken,r,"internal-error");const u=c0(l.idToken);Ue(u,r,"internal-error");const{sub:d}=u;return Ue(n.uid===d,r,"user-mismatch"),ol._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Ds(r,"user-mismatch"),l}}async function DT(n,e,t=!1){if(ts(n.app))return Promise.reject(ga(n));const r="signIn",a=await OT(n,r,e),l=await ol._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function R3(n,e){return DT(Io(n),e)}async function LT(n){const e=Io(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function I3(n,e,t){if(ts(n.app))return Promise.reject(ga(n));const r=Io(n),u=await dy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",S3).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&LT(n),m}),d=await ol._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(d.user),d}function O3(n,e,t){return ts(n.app)?Promise.reject(ga(n)):R3(Cn(n),jc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LT(n),r})}async function D3(n,e){return Aa(n,"POST","/v1/accounts:update",e)}async function L3(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Cn(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await vc(r,D3(r.auth,l));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const d=r.providerData.find(({providerId:m})=>m==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function j3(n,e,t,r){return Cn(n).onIdTokenChanged(e,t,r)}function k3(n,e,t){return Cn(n).beforeAuthStateChanged(e,t)}function yh(n,e,t,r){return Cn(n).onAuthStateChanged(e,t,r)}function M3(n){return Cn(n).signOut()}const Rf="__sak";class jT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rf,"1"),this.storage.removeItem(Rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const P3=1e3,V3=10;class kT extends jT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ST(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,m)=>{this.notifyListeners(u,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);e3()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,V3):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},P3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}kT.type="LOCAL";const U3=kT;class MT extends jT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}MT.type="SESSION";const PT=MT;function q3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Wf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(u).map(async p=>p(t.origin,l)),m=await q3(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wf.receivers=[];function m0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class B3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((d,m)=>{const p=m0("",20);a.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(x){const E=x;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(E.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function wi(){return window}function z3(n){wi().location.href=n}function VT(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}async function H3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F3(){return navigator?.serviceWorker?.controller||null}function G3(){return VT()?self:null}const UT="firebaseLocalStorageDb",$3=1,If="firebaseLocalStorage",qT="fbase_key";class vh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zf(n,e){return n.transaction([If],e?"readwrite":"readonly").objectStore(If)}function K3(){const n=indexedDB.deleteDatabase(UT);return new vh(n).toPromise()}function fy(){const n=indexedDB.open(UT,$3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(If,{keyPath:qT})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(If)?e(r):(r.close(),await K3(),e(await fy()))})})}async function _x(n,e,t){const r=Zf(n,!0).put({[qT]:e,value:t});return new vh(r).toPromise()}async function Q3(n,e){const t=Zf(n,!1).get(e),r=await new vh(t).toPromise();return r===void 0?null:r.value}function xx(n,e){const t=Zf(n,!0).delete(e);return new vh(t).toPromise()}const Y3=800,X3=3;class BT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>X3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wf._getInstance(G3()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await H3(),!this.activeServiceWorker)return;this.sender=new B3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fy();return await _x(e,Rf,"1"),await xx(e,Rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>_x(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Q3(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Zf(a,!1).getAll();return new vh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Y3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BT.type="LOCAL";const W3=BT;new mh(3e4,6e4);function zT(n,e){return e?ma(e):(Ue(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class p0 extends h0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Z3(n){return DT(n.auth,new p0(n),n.bypassAuthState)}function J3(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),C3(t,new p0(n),n.bypassAuthState)}async function eO(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),N3(t,new p0(n),n.bypassAuthState)}class HT{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z3;case"linkViaPopup":case"linkViaRedirect":return eO;case"reauthViaPopup":case"reauthViaRedirect":return J3;default:Ds(this.auth,"internal-error")}}resolve(e){ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const tO=new mh(2e3,1e4);async function FT(n,e,t){if(ts(n.app))return Promise.reject(Js(n,"operation-not-supported-in-this-environment"));const r=Io(n);jI(n,e,f0);const a=zT(r,t);return new tl(r,"signInViaPopup",e,a).executeNotNull()}class tl extends HT{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,tl.currentPopupAction&&tl.currentPopupAction.cancel(),tl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){ba(this.filter.length===1,"Popup operations only handle one event");const e=m0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Js(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Js(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Js(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tO.get())};e()}}tl.currentPopupAction=null;const nO="pendingRedirect",ff=new Map;class rO extends HT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ff.get(this.auth._key());if(!e){try{const r=await sO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ff.set(this.auth._key(),e)}return this.bypassAuthState||ff.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sO(n,e){const t=oO(e),r=aO(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function iO(n,e){ff.set(n._key(),e)}function aO(n){return ma(n._redirectPersistence)}function oO(n){return df(nO,n.config.apiKey,n.name)}async function lO(n,e,t=!1){if(ts(n.app))return Promise.reject(ga(n));const r=Io(n),a=zT(r,e),u=await new rO(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const cO=600*1e3;class uO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!GT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Js(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ex(e))}saveEventToCache(e){this.cachedEventUids.add(Ex(e)),this.lastProcessedEventTime=Date.now()}}function Ex(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function GT({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function hO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GT(n);default:return!1}}async function dO(n,e={}){return Aa(n,"GET","/v1/projects",e)}const fO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mO=/^https?/;async function pO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dO(n);for(const t of e)try{if(gO(t))return}catch{}Ds(n,"unauthorized-domain")}function gO(n){const e=uy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!mO.test(t))return!1;if(fO.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const yO=new mh(3e4,6e4);function wx(){const n=wi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vO(n){return new Promise((e,t)=>{function r(){wx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wx(),t(Js(n,"network-request-failed"))},timeout:yO.get()})}if(wi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wi().gapi?.load)r();else{const a=c3("iframefcb");return wi()[a]=()=>{gapi.load?r():t(Js(n,"network-request-failed"))},CT(`${l3()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw mf=null,e})}let mf=null;function bO(n){return mf=mf||vO(n),mf}const _O=new mh(5e3,15e3),xO="__/auth/iframe",EO="emulator/auth/iframe",wO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AO(n){const e=n.config;Ue(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?l0(e,EO):`https://${n.config.authDomain}/${xO}`,r={apiKey:e.apiKey,appName:n.name,v:Lc},a=TO.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${fh(r).slice(1)}`}async function SO(n){const e=await bO(n),t=wi().gapi;return Ue(t,n,"internal-error"),e.open({where:document.body,url:AO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wO,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=Js(n,"network-request-failed"),d=wi().setTimeout(()=>{l(u)},_O.get());function m(){wi().clearTimeout(d),a(r)}r.ping(m).then(m,()=>{l(u)})}))}const NO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CO=500,RO=600,IO="_blank",OO="http://localhost";class Tx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DO(n,e,t,r=CO,a=RO){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m={...NO,width:r.toString(),height:a.toString(),top:l,left:u},p=ur().toLowerCase();t&&(d=xT(p)?IO:t),bT(p)&&(e=e||OO,m.scrollbars="yes");const v=Object.entries(m).reduce((E,[A,C])=>`${E}${A}=${C},`,"");if(JI(p)&&d!=="_self")return LO(e||"",d),new Tx(null);const x=window.open(e||"",d,v);Ue(x,n,"popup-blocked");try{x.focus()}catch{}return new Tx(x)}function LO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const jO="__/auth/handler",kO="emulator/auth/handler",MO=encodeURIComponent("fac");async function Ax(n,e,t,r,a,l){Ue(n.config.authDomain,n,"auth-domain-config-required"),Ue(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Lc,eventId:a};if(e instanceof f0){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",v4(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,x]of Object.entries({}))u[v]=x}if(e instanceof gh){const v=e.getScopes().filter(x=>x!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const m=await n._getAppCheckToken(),p=m?`#${MO}=${encodeURIComponent(m)}`:"";return`${PO(n)}?${fh(d).slice(1)}${p}`}function PO({config:n}){return n.emulator?l0(n,kO):`https://${n.authDomain}/${jO}`}const kg="webStorageSupport";class VO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PT,this._completeRedirectFn=lO,this._overrideRedirectResult=iO}async _openPopup(e,t,r,a){ba(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Ax(e,t,r,uy(),a);return DO(e,l,m0())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await Ax(e,t,r,uy(),a);return z3(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ba(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await SO(e),r=new uO(e);return t.register("authEvent",a=>(Ue(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kg,{type:kg},a=>{const l=a?.[0]?.[kg];l!==void 0&&t(!!l),Ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ST()||_T()||u0()}}const UO=VO;var Sx="@firebase/auth",Nx="1.11.1";class qO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function BO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zO(n){yc(new il("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Ue(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NT(n)},p=new i3(r,a,l,m);return p3(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),yc(new il("auth-internal",e=>{const t=Io(e.getProvider("auth").getImmediate());return(r=>new qO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),go(Sx,Nx,BO(n)),go(Sx,Nx,"esm2020")}const HO=300,FO=rT("authIdTokenMaxAge")||HO;let Cx=null;const GO=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>FO)return;const a=t?.token;Cx!==a&&(Cx=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function $O(n=cT()){const e=i0(n,"auth");if(e.isInitialized())return e.getImmediate();const t=m3(n,{popupRedirectResolver:UO,persistence:[W3,U3,PT]}),r=rT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const u=GO(l.toString());k3(t,u,()=>u(t.currentUser)),j3(t,d=>u(d))}}const a=tT("auth");return a&&g3(t,`http://${a}`),t}function KO(){return document.getElementsByTagName("head")?.[0]??document}a3({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=Js("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",KO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zO("Browser");var Rx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var yo,$T;(function(){var n;function e(M,j){function P(){}P.prototype=j.prototype,M.F=j.prototype,M.prototype=new P,M.prototype.constructor=M,M.D=function(F,S,k){for(var N=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)N[ge-2]=arguments[ge];return j.prototype[S].apply(F,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(M,j,P){P||(P=0);const F=Array(16);if(typeof j=="string")for(var S=0;S<16;++S)F[S]=j.charCodeAt(P++)|j.charCodeAt(P++)<<8|j.charCodeAt(P++)<<16|j.charCodeAt(P++)<<24;else for(S=0;S<16;++S)F[S]=j[P++]|j[P++]<<8|j[P++]<<16|j[P++]<<24;j=M.g[0],P=M.g[1],S=M.g[2];let k=M.g[3],N;N=j+(k^P&(S^k))+F[0]+3614090360&4294967295,j=P+(N<<7&4294967295|N>>>25),N=k+(S^j&(P^S))+F[1]+3905402710&4294967295,k=j+(N<<12&4294967295|N>>>20),N=S+(P^k&(j^P))+F[2]+606105819&4294967295,S=k+(N<<17&4294967295|N>>>15),N=P+(j^S&(k^j))+F[3]+3250441966&4294967295,P=S+(N<<22&4294967295|N>>>10),N=j+(k^P&(S^k))+F[4]+4118548399&4294967295,j=P+(N<<7&4294967295|N>>>25),N=k+(S^j&(P^S))+F[5]+1200080426&4294967295,k=j+(N<<12&4294967295|N>>>20),N=S+(P^k&(j^P))+F[6]+2821735955&4294967295,S=k+(N<<17&4294967295|N>>>15),N=P+(j^S&(k^j))+F[7]+4249261313&4294967295,P=S+(N<<22&4294967295|N>>>10),N=j+(k^P&(S^k))+F[8]+1770035416&4294967295,j=P+(N<<7&4294967295|N>>>25),N=k+(S^j&(P^S))+F[9]+2336552879&4294967295,k=j+(N<<12&4294967295|N>>>20),N=S+(P^k&(j^P))+F[10]+4294925233&4294967295,S=k+(N<<17&4294967295|N>>>15),N=P+(j^S&(k^j))+F[11]+2304563134&4294967295,P=S+(N<<22&4294967295|N>>>10),N=j+(k^P&(S^k))+F[12]+1804603682&4294967295,j=P+(N<<7&4294967295|N>>>25),N=k+(S^j&(P^S))+F[13]+4254626195&4294967295,k=j+(N<<12&4294967295|N>>>20),N=S+(P^k&(j^P))+F[14]+2792965006&4294967295,S=k+(N<<17&4294967295|N>>>15),N=P+(j^S&(k^j))+F[15]+1236535329&4294967295,P=S+(N<<22&4294967295|N>>>10),N=j+(S^k&(P^S))+F[1]+4129170786&4294967295,j=P+(N<<5&4294967295|N>>>27),N=k+(P^S&(j^P))+F[6]+3225465664&4294967295,k=j+(N<<9&4294967295|N>>>23),N=S+(j^P&(k^j))+F[11]+643717713&4294967295,S=k+(N<<14&4294967295|N>>>18),N=P+(k^j&(S^k))+F[0]+3921069994&4294967295,P=S+(N<<20&4294967295|N>>>12),N=j+(S^k&(P^S))+F[5]+3593408605&4294967295,j=P+(N<<5&4294967295|N>>>27),N=k+(P^S&(j^P))+F[10]+38016083&4294967295,k=j+(N<<9&4294967295|N>>>23),N=S+(j^P&(k^j))+F[15]+3634488961&4294967295,S=k+(N<<14&4294967295|N>>>18),N=P+(k^j&(S^k))+F[4]+3889429448&4294967295,P=S+(N<<20&4294967295|N>>>12),N=j+(S^k&(P^S))+F[9]+568446438&4294967295,j=P+(N<<5&4294967295|N>>>27),N=k+(P^S&(j^P))+F[14]+3275163606&4294967295,k=j+(N<<9&4294967295|N>>>23),N=S+(j^P&(k^j))+F[3]+4107603335&4294967295,S=k+(N<<14&4294967295|N>>>18),N=P+(k^j&(S^k))+F[8]+1163531501&4294967295,P=S+(N<<20&4294967295|N>>>12),N=j+(S^k&(P^S))+F[13]+2850285829&4294967295,j=P+(N<<5&4294967295|N>>>27),N=k+(P^S&(j^P))+F[2]+4243563512&4294967295,k=j+(N<<9&4294967295|N>>>23),N=S+(j^P&(k^j))+F[7]+1735328473&4294967295,S=k+(N<<14&4294967295|N>>>18),N=P+(k^j&(S^k))+F[12]+2368359562&4294967295,P=S+(N<<20&4294967295|N>>>12),N=j+(P^S^k)+F[5]+4294588738&4294967295,j=P+(N<<4&4294967295|N>>>28),N=k+(j^P^S)+F[8]+2272392833&4294967295,k=j+(N<<11&4294967295|N>>>21),N=S+(k^j^P)+F[11]+1839030562&4294967295,S=k+(N<<16&4294967295|N>>>16),N=P+(S^k^j)+F[14]+4259657740&4294967295,P=S+(N<<23&4294967295|N>>>9),N=j+(P^S^k)+F[1]+2763975236&4294967295,j=P+(N<<4&4294967295|N>>>28),N=k+(j^P^S)+F[4]+1272893353&4294967295,k=j+(N<<11&4294967295|N>>>21),N=S+(k^j^P)+F[7]+4139469664&4294967295,S=k+(N<<16&4294967295|N>>>16),N=P+(S^k^j)+F[10]+3200236656&4294967295,P=S+(N<<23&4294967295|N>>>9),N=j+(P^S^k)+F[13]+681279174&4294967295,j=P+(N<<4&4294967295|N>>>28),N=k+(j^P^S)+F[0]+3936430074&4294967295,k=j+(N<<11&4294967295|N>>>21),N=S+(k^j^P)+F[3]+3572445317&4294967295,S=k+(N<<16&4294967295|N>>>16),N=P+(S^k^j)+F[6]+76029189&4294967295,P=S+(N<<23&4294967295|N>>>9),N=j+(P^S^k)+F[9]+3654602809&4294967295,j=P+(N<<4&4294967295|N>>>28),N=k+(j^P^S)+F[12]+3873151461&4294967295,k=j+(N<<11&4294967295|N>>>21),N=S+(k^j^P)+F[15]+530742520&4294967295,S=k+(N<<16&4294967295|N>>>16),N=P+(S^k^j)+F[2]+3299628645&4294967295,P=S+(N<<23&4294967295|N>>>9),N=j+(S^(P|~k))+F[0]+4096336452&4294967295,j=P+(N<<6&4294967295|N>>>26),N=k+(P^(j|~S))+F[7]+1126891415&4294967295,k=j+(N<<10&4294967295|N>>>22),N=S+(j^(k|~P))+F[14]+2878612391&4294967295,S=k+(N<<15&4294967295|N>>>17),N=P+(k^(S|~j))+F[5]+4237533241&4294967295,P=S+(N<<21&4294967295|N>>>11),N=j+(S^(P|~k))+F[12]+1700485571&4294967295,j=P+(N<<6&4294967295|N>>>26),N=k+(P^(j|~S))+F[3]+2399980690&4294967295,k=j+(N<<10&4294967295|N>>>22),N=S+(j^(k|~P))+F[10]+4293915773&4294967295,S=k+(N<<15&4294967295|N>>>17),N=P+(k^(S|~j))+F[1]+2240044497&4294967295,P=S+(N<<21&4294967295|N>>>11),N=j+(S^(P|~k))+F[8]+1873313359&4294967295,j=P+(N<<6&4294967295|N>>>26),N=k+(P^(j|~S))+F[15]+4264355552&4294967295,k=j+(N<<10&4294967295|N>>>22),N=S+(j^(k|~P))+F[6]+2734768916&4294967295,S=k+(N<<15&4294967295|N>>>17),N=P+(k^(S|~j))+F[13]+1309151649&4294967295,P=S+(N<<21&4294967295|N>>>11),N=j+(S^(P|~k))+F[4]+4149444226&4294967295,j=P+(N<<6&4294967295|N>>>26),N=k+(P^(j|~S))+F[11]+3174756917&4294967295,k=j+(N<<10&4294967295|N>>>22),N=S+(j^(k|~P))+F[2]+718787259&4294967295,S=k+(N<<15&4294967295|N>>>17),N=P+(k^(S|~j))+F[9]+3951481745&4294967295,M.g[0]=M.g[0]+j&4294967295,M.g[1]=M.g[1]+(S+(N<<21&4294967295|N>>>11))&4294967295,M.g[2]=M.g[2]+S&4294967295,M.g[3]=M.g[3]+k&4294967295}r.prototype.v=function(M,j){j===void 0&&(j=M.length);const P=j-this.blockSize,F=this.C;let S=this.h,k=0;for(;k<j;){if(S==0)for(;k<=P;)a(this,M,k),k+=this.blockSize;if(typeof M=="string"){for(;k<j;)if(F[S++]=M.charCodeAt(k++),S==this.blockSize){a(this,F),S=0;break}}else for(;k<j;)if(F[S++]=M[k++],S==this.blockSize){a(this,F),S=0;break}}this.h=S,this.o+=j},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var j=1;j<M.length-8;++j)M[j]=0;j=this.o*8;for(var P=M.length-8;P<M.length;++P)M[P]=j&255,j/=256;for(this.v(M),M=Array(16),j=0,P=0;P<4;++P)for(let F=0;F<32;F+=8)M[j++]=this.g[P]>>>F&255;return M};function l(M,j){var P=d;return Object.prototype.hasOwnProperty.call(P,M)?P[M]:P[M]=j(M)}function u(M,j){this.h=j;const P=[];let F=!0;for(let S=M.length-1;S>=0;S--){const k=M[S]|0;F&&k==j||(P[S]=k,F=!1)}this.g=P}var d={};function m(M){return-128<=M&&M<128?l(M,function(j){return new u([j|0],j<0?-1:0)}):new u([M|0],M<0?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return x;if(M<0)return I(p(-M));const j=[];let P=1;for(let F=0;M>=P;F++)j[F]=M/P|0,P*=4294967296;return new u(j,0)}function v(M,j){if(M.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(M.charAt(0)=="-")return I(v(M.substring(1),j));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=p(Math.pow(j,8));let F=x;for(let k=0;k<M.length;k+=8){var S=Math.min(8,M.length-k);const N=parseInt(M.substring(k,k+S),j);S<8?(S=p(Math.pow(j,S)),F=F.j(S).add(p(N))):(F=F.j(P),F=F.add(p(N)))}return F}var x=m(0),E=m(1),A=m(16777216);n=u.prototype,n.m=function(){if(L(this))return-I(this).m();let M=0,j=1;for(let P=0;P<this.g.length;P++){const F=this.i(P);M+=(F>=0?F:4294967296+F)*j,j*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(C(this))return"0";if(L(this))return"-"+I(this).toString(M);const j=p(Math.pow(M,6));var P=this;let F="";for(;;){const S=ee(P,j).g;P=B(P,S.j(j));let k=((P.g.length>0?P.g[0]:P.h)>>>0).toString(M);if(P=S,C(P))return k+F;for(;k.length<6;)k="0"+k;F=k+F}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function C(M){if(M.h!=0)return!1;for(let j=0;j<M.g.length;j++)if(M.g[j]!=0)return!1;return!0}function L(M){return M.h==-1}n.l=function(M){return M=B(this,M),L(M)?-1:C(M)?0:1};function I(M){const j=M.g.length,P=[];for(let F=0;F<j;F++)P[F]=~M.g[F];return new u(P,~M.h).add(E)}n.abs=function(){return L(this)?I(this):this},n.add=function(M){const j=Math.max(this.g.length,M.g.length),P=[];let F=0;for(let S=0;S<=j;S++){let k=F+(this.i(S)&65535)+(M.i(S)&65535),N=(k>>>16)+(this.i(S)>>>16)+(M.i(S)>>>16);F=N>>>16,k&=65535,N&=65535,P[S]=N<<16|k}return new u(P,P[P.length-1]&-2147483648?-1:0)};function B(M,j){return M.add(I(j))}n.j=function(M){if(C(this)||C(M))return x;if(L(this))return L(M)?I(this).j(I(M)):I(I(this).j(M));if(L(M))return I(this.j(I(M)));if(this.l(A)<0&&M.l(A)<0)return p(this.m()*M.m());const j=this.g.length+M.g.length,P=[];for(var F=0;F<2*j;F++)P[F]=0;for(F=0;F<this.g.length;F++)for(let S=0;S<M.g.length;S++){const k=this.i(F)>>>16,N=this.i(F)&65535,ge=M.i(S)>>>16,pe=M.i(S)&65535;P[2*F+2*S]+=N*pe,$(P,2*F+2*S),P[2*F+2*S+1]+=k*pe,$(P,2*F+2*S+1),P[2*F+2*S+1]+=N*ge,$(P,2*F+2*S+1),P[2*F+2*S+2]+=k*ge,$(P,2*F+2*S+2)}for(M=0;M<j;M++)P[M]=P[2*M+1]<<16|P[2*M];for(M=j;M<2*j;M++)P[M]=0;return new u(P,0)};function $(M,j){for(;(M[j]&65535)!=M[j];)M[j+1]+=M[j]>>>16,M[j]&=65535,j++}function Y(M,j){this.g=M,this.h=j}function ee(M,j){if(C(j))throw Error("division by zero");if(C(M))return new Y(x,x);if(L(M))return j=ee(I(M),j),new Y(I(j.g),I(j.h));if(L(j))return j=ee(M,I(j)),new Y(I(j.g),j.h);if(M.g.length>30){if(L(M)||L(j))throw Error("slowDivide_ only works with positive integers.");for(var P=E,F=j;F.l(M)<=0;)P=fe(P),F=fe(F);var S=xe(P,1),k=xe(F,1);for(F=xe(F,2),P=xe(P,2);!C(F);){var N=k.add(F);N.l(M)<=0&&(S=S.add(P),k=N),F=xe(F,1),P=xe(P,1)}return j=B(M,S.j(j)),new Y(S,j)}for(S=x;M.l(j)>=0;){for(P=Math.max(1,Math.floor(M.m()/j.m())),F=Math.ceil(Math.log(P)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),k=p(P),N=k.j(j);L(N)||N.l(M)>0;)P-=F,k=p(P),N=k.j(j);C(k)&&(k=E),S=S.add(k),M=B(M,N)}return new Y(S,M)}n.B=function(M){return ee(this,M).h},n.and=function(M){const j=Math.max(this.g.length,M.g.length),P=[];for(let F=0;F<j;F++)P[F]=this.i(F)&M.i(F);return new u(P,this.h&M.h)},n.or=function(M){const j=Math.max(this.g.length,M.g.length),P=[];for(let F=0;F<j;F++)P[F]=this.i(F)|M.i(F);return new u(P,this.h|M.h)},n.xor=function(M){const j=Math.max(this.g.length,M.g.length),P=[];for(let F=0;F<j;F++)P[F]=this.i(F)^M.i(F);return new u(P,this.h^M.h)};function fe(M){const j=M.g.length+1,P=[];for(let F=0;F<j;F++)P[F]=M.i(F)<<1|M.i(F-1)>>>31;return new u(P,M.h)}function xe(M,j){const P=j>>5;j%=32;const F=M.g.length-P,S=[];for(let k=0;k<F;k++)S[k]=j>0?M.i(k+P)>>>j|M.i(k+P+1)<<32-j:M.i(k+P);return new u(S,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,$T=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,yo=u}).apply(typeof Rx<"u"?Rx:typeof self<"u"?self:typeof window<"u"?window:{});var Gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var KT,Du,QT,pf,my,YT,XT,WT;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gd=="object"&&Gd];for(var b=0;b<h.length;++b){var T=h[b];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function a(h,b){if(b)e:{var T=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var Q=h[D];if(!(Q in T))break e;T=T[Q]}h=h[h.length-1],D=T[h],b=b(D),b!=D&&b!=null&&e(T,h,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(b){var T=[],D;for(D in b)Object.prototype.hasOwnProperty.call(b,D)&&T.push([D,b[D]]);return T}});var l=l||{},u=this||self;function d(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function m(h,b,T){return h.call.apply(h.bind,arguments)}function p(h,b,T){return p=m,p.apply(null,arguments)}function v(h,b){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function x(h,b){function T(){}T.prototype=b.prototype,h.Z=b.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(D,Q,re){for(var _e=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)_e[Fe-2]=arguments[Fe];return b.prototype[Q].apply(D,_e)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function A(h){const b=h.length;if(b>0){const T=Array(b);for(let D=0;D<b;D++)T[D]=h[D];return T}return[]}function C(h,b){for(let D=1;D<arguments.length;D++){const Q=arguments[D];var T=typeof Q;if(T=T!="object"?T:Q?Array.isArray(Q)?"array":T:"null",T=="array"||T=="object"&&typeof Q.length=="number"){T=h.length||0;const re=Q.length||0;h.length=T+re;for(let _e=0;_e<re;_e++)h[T+_e]=Q[_e]}else h.push(Q)}}class L{constructor(b,T){this.i=b,this.j=T,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function I(h){u.setTimeout(()=>{throw h},0)}function B(){var h=M;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class ${constructor(){this.h=this.g=null}add(b,T){const D=Y.get();D.set(b,T),this.h?this.h.next=D:this.g=D,this.h=D}}var Y=new L(()=>new ee,h=>h.reset());class ee{constructor(){this.next=this.g=this.h=null}set(b,T){this.h=b,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,xe=!1,M=new $,j=()=>{const h=Promise.resolve(void 0);fe=()=>{h.then(P)}};function P(){for(var h;h=B();){try{h.h.call(h.g)}catch(T){I(T)}var b=Y;b.j(h),b.h<100&&(b.h++,h.next=b.g,b.g=h)}xe=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};u.addEventListener("test",T,b),u.removeEventListener("test",T,b)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function ge(h,b){S.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,b)}x(ge,S),ge.prototype.init=function(h,b){const T=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget,b||(T=="mouseover"?b=h.fromElement:T=="mouseout"&&(b=h.toElement)),this.relatedTarget=b,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var pe="closure_listenable_"+(Math.random()*1e6|0),H=0;function J(h,b,T,D,Q){this.listener=h,this.proxy=null,this.src=b,this.type=T,this.capture=!!D,this.ha=Q,this.key=++H,this.da=this.fa=!1}function ce(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function be(h,b,T){for(const D in h)b.call(T,h[D],D,h)}function ve(h,b){for(const T in h)b.call(void 0,h[T],T,h)}function V(h){const b={};for(const T in h)b[T]=h[T];return b}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(h,b){let T,D;for(let Q=1;Q<arguments.length;Q++){D=arguments[Q];for(T in D)h[T]=D[T];for(let re=0;re<X.length;re++)T=X[re],Object.prototype.hasOwnProperty.call(D,T)&&(h[T]=D[T])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,b,T,D,Q){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const _e=Te(h,b,D,Q);return _e>-1?(b=h[_e],T||(b.fa=!1)):(b=new J(b,this.src,re,!!D,Q),b.fa=T,h.push(b)),b};function ye(h,b){const T=b.type;if(T in h.g){var D=h.g[T],Q=Array.prototype.indexOf.call(D,b,void 0),re;(re=Q>=0)&&Array.prototype.splice.call(D,Q,1),re&&(ce(b),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Te(h,b,T,D){for(let Q=0;Q<h.length;++Q){const re=h[Q];if(!re.da&&re.listener==b&&re.capture==!!T&&re.ha==D)return Q}return-1}var De="closure_lm_"+(Math.random()*1e6|0),Ie={};function Le(h,b,T,D,Q){if(Array.isArray(b)){for(let re=0;re<b.length;re++)Le(h,b[re],T,D,Q);return null}return T=ki(T),h&&h[pe]?h.J(b,T,d(D)?!!D.capture:!1,Q):Qe(h,b,T,!1,D,Q)}function Qe(h,b,T,D,Q,re){if(!b)throw Error("Invalid event type");const _e=d(Q)?!!Q.capture:!!Q;let Fe=Vr(h);if(Fe||(h[De]=Fe=new me(h)),T=Fe.add(b,T,D,_e,re),T.proxy)return T;if(D=We(),T.proxy=D,D.src=h,D.listener=T,h.addEventListener)k||(Q=_e),Q===void 0&&(Q=!1),h.addEventListener(b.toString(),D,Q);else if(h.attachEvent)h.attachEvent(ft(b.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function We(){function h(T){return b.call(h.src,h.listener,T)}const b=tn;return h}function tt(h,b,T,D,Q){if(Array.isArray(b))for(var re=0;re<b.length;re++)tt(h,b[re],T,D,Q);else D=d(D)?!!D.capture:!!D,T=ki(T),h&&h[pe]?(h=h.i,re=String(b).toString(),re in h.g&&(b=h.g[re],T=Te(b,T,D,Q),T>-1&&(ce(b[T]),Array.prototype.splice.call(b,T,1),b.length==0&&(delete h.g[re],h.h--)))):h&&(h=Vr(h))&&(b=h.g[b.toString()],h=-1,b&&(h=Te(b,T,D,Q)),(T=h>-1?b[h]:null)&&ot(T))}function ot(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[pe])ye(b.i,h);else{var T=h.type,D=h.proxy;b.removeEventListener?b.removeEventListener(T,D,h.capture):b.detachEvent?b.detachEvent(ft(T),D):b.addListener&&b.removeListener&&b.removeListener(D),(T=Vr(b))?(ye(T,h),T.h==0&&(T.src=null,b[De]=null)):ce(h)}}}function ft(h){return h in Ie?Ie[h]:Ie[h]="on"+h}function tn(h,b){if(h.da)h=!0;else{b=new ge(b,this);const T=h.listener,D=h.ha||h.src;h.fa&&ot(h),h=T.call(D,b)}return h}function Vr(h){return h=h[De],h instanceof me?h:null}var ai="__closure_events_fn_"+(Math.random()*1e9>>>0);function ki(h){return typeof h=="function"?h:(h[ai]||(h[ai]=function(b){return h.handleEvent(b)}),h[ai])}function Ht(){F.call(this),this.i=new me(this),this.M=this,this.G=null}x(Ht,F),Ht.prototype[pe]=!0,Ht.prototype.removeEventListener=function(h,b,T,D){tt(this,h,b,T,D)};function It(h,b){var T,D=h.G;if(D)for(T=[];D;D=D.G)T.push(D);if(h=h.M,D=b.type||b,typeof b=="string")b=new S(b,h);else if(b instanceof S)b.target=b.target||h;else{var Q=b;b=new S(D,h),he(b,Q)}Q=!0;let re,_e;if(T)for(_e=T.length-1;_e>=0;_e--)re=b.g=T[_e],Q=Er(re,D,!0,b)&&Q;if(re=b.g=h,Q=Er(re,D,!0,b)&&Q,Q=Er(re,D,!1,b)&&Q,T)for(_e=0;_e<T.length;_e++)re=b.g=T[_e],Q=Er(re,D,!1,b)&&Q}Ht.prototype.N=function(){if(Ht.Z.N.call(this),this.i){var h=this.i;for(const b in h.g){const T=h.g[b];for(let D=0;D<T.length;D++)ce(T[D]);delete h.g[b],h.h--}}this.G=null},Ht.prototype.J=function(h,b,T,D){return this.i.add(String(h),b,!1,T,D)},Ht.prototype.K=function(h,b,T,D){return this.i.add(String(h),b,!0,T,D)};function Er(h,b,T,D){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();let Q=!0;for(let re=0;re<b.length;++re){const _e=b[re];if(_e&&!_e.da&&_e.capture==T){const Fe=_e.listener,un=_e.ha||_e.src;_e.fa&&ye(h.i,_e),Q=Fe.call(un,D)!==!1&&Q}}return Q&&!D.defaultPrevented}function Ra(h,b){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:u.setTimeout(h,b||0)}function Mi(h){h.g=Ra(()=>{h.g=null,h.i&&(h.i=!1,Mi(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class Ot extends F{constructor(b,T){super(),this.m=b,this.l=T,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Mi(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wr(h){F.call(this),this.h=h,this.g={}}x(wr,F);var Pi=[];function Ur(h){be(h.g,function(b,T){this.g.hasOwnProperty(T)&&ot(b)},h),h.g={}}wr.prototype.N=function(){wr.Z.N.call(this),Ur(this)},wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hr=u.JSON.stringify,Vi=u.JSON.parse,kn=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Ui(){}function qi(){}var dr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){S.call(this,"d")}x(Zt,S);function Tn(){S.call(this,"c")}x(Tn,S);var Dt={},Ms=null;function Tr(){return Ms=Ms||new Ht}Dt.Ia="serverreachability";function Zn(h){S.call(this,Dt.Ia,h)}x(Zn,S);function Mn(h){const b=Tr();It(b,new Zn(b))}Dt.STAT_EVENT="statevent";function qr(h,b){S.call(this,Dt.STAT_EVENT,h),this.stat=b}x(qr,S);function Et(h){const b=Tr();It(b,new qr(b,h))}Dt.Ja="timingevent";function Jn(h,b){S.call(this,Dt.Ja,h),this.size=b}x(Jn,S);function In(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},b)}function Pn(){this.g=!0}Pn.prototype.ua=function(){this.g=!1};function Bi(h,b,T,D,Q,re){h.info(function(){if(h.g)if(re){var _e="",Fe=re.split("&");for(let mt=0;mt<Fe.length;mt++){var un=Fe[mt].split("=");if(un.length>1){const Yt=un[0];un=un[1];const ys=Yt.split("_");_e=ys.length>=2&&ys[1]=="type"?_e+(Yt+"="+un+"&"):_e+(Yt+"=redacted&")}}}else _e=null;else _e=re;return"XMLHTTP REQ ("+D+") [attempt "+Q+"]: "+b+`
`+T+`
`+_e})}function oi(h,b,T,D,Q,re,_e){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Q+"]: "+b+`
`+T+`
`+re+" "+_e})}function An(h,b,T,D){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+Br(h,T)+(D?" "+D:"")})}function ls(h,b){h.info(function(){return"TIMEOUT: "+b})}Pn.prototype.info=function(){};function Br(h,b){if(!h.g)return b;if(!b)return null;try{const re=JSON.parse(b);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var T=re[h];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var Q=D[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let _e=1;_e<D.length;_e++)D[_e]=""}}}}return hr(re)}catch{return b}}var Ps={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Hi;function cs(){}x(cs,Ui),cs.prototype.g=function(){return new XMLHttpRequest},Hi=new cs;function fr(h){return encodeURIComponent(String(h))}function nn(h){var b=1;h=h.split(":");const T=[];for(;b>0&&h.length;)T.push(h.shift()),b--;return h.length&&T.push(h.join(":")),T}function mr(h,b,T,D){this.j=h,this.i=b,this.l=T,this.S=D||1,this.V=new wr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pr}function pr(){this.i=null,this.g="",this.h=!1}var Ft={},rn={};function Ar(h,b,T){h.M=1,h.A=hs($t(b)),h.u=T,h.R=!0,Jt(h,null)}function Jt(h,b){h.F=Date.now(),Sr(h),h.B=$t(h.A);var T=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),di(T.i,"t",D),h.C=0,T=h.j.L,h.h=new pr,h.g=Mh(h.j,T?b:null,!h.u),h.P>0&&(h.O=new Ot(p(h.Y,h,h.g),h.P)),b=h.V,T=h.g,D=h.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Pi[0]=Q.toString()),Q=Pi);for(let re=0;re<Q.length;re++){const _e=Le(T,Q[re],D||b.handleEvent,!1,b.h||b);if(!_e)break;b.g[_e.key]=_e}b=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,b)):(h.v="GET",h.g.ea(h.B,h.v,null,b)),Mn(),Bi(h.i,h.v,h.B,h.l,h.S,h.u)}mr.prototype.ba=function(h){h=h.target;const b=this.O;b&&q(h)==3?b.j():this.Y(h)},mr.prototype.Y=function(h){try{if(h==this.g)e:{const Fe=q(this.g),un=this.g.ya(),mt=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||ne(this.g)))){this.K||Fe!=4||un==7||(un==8||mt<=0?Mn(3):Mn(2)),kt(this);var b=this.g.ca();this.X=b;var T=Mo(this);if(this.o=b==200,oi(this.i,this.v,this.B,this.l,this.S,Fe,b),this.o){if(this.U&&!this.L){t:{if(this.g){var D,Q=this.g;if((D=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(D)){var re=D;break t}}re=null}if(h=re)An(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Nr(this,h);else{this.o=!1,this.m=3,Et(12),Vn(this),er(this);break e}}if(this.R){h=!0;let Yt;for(;!this.K&&this.C<T.length;)if(Yt=Oa(this,T),Yt==rn){Fe==4&&(this.m=4,Et(14),h=!1),An(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Ft){this.m=4,Et(15),An(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else An(this.i,this.l,Yt,null),Nr(this,Yt);if(Ia(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||T.length!=0||this.h.h||(this.m=1,Et(16),h=!1),this.o=this.o&&h,!h)An(this.i,this.l,T,"[Invalid Chunked Response]"),Vn(this),er(this);else if(T.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Kr(_e),_e.P=!0,Et(11))}}else An(this.i,this.l,T,null),Nr(this,T);Fe==4&&Vn(this),this.o&&!this.K&&(Fe==4?Yi(this.j,this):(this.o=!1,Sr(this)))}else Me(this.g),b==400&&T.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),Vn(this),er(this)}}}catch{}finally{}};function Mo(h){if(!Ia(h))return h.g.la();const b=ne(h.g);if(b==="")return"";let T="";const D=b.length,Q=q(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Vn(h),er(h),"";h.h.i=new u.TextDecoder}for(let re=0;re<D;re++)h.h.h=!0,T+=h.h.i.decode(b[re],{stream:!(Q&&re==D-1)});return b.length=0,h.h.g+=T,h.C=0,h.h.g}function Ia(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Oa(h,b){var T=h.C,D=b.indexOf(`
`,T);return D==-1?rn:(T=Number(b.substring(T,D)),isNaN(T)?Ft:(D+=1,D+T>b.length?rn:(b=b.slice(D,D+T),h.C=D+T,b)))}mr.prototype.cancel=function(){this.K=!0,Vn(this)};function Sr(h){h.T=Date.now()+h.H,li(h,h.H)}function li(h,b){if(h.D!=null)throw Error("WatchDog timer not null");h.D=In(p(h.aa,h),b)}function kt(h){h.D&&(u.clearTimeout(h.D),h.D=null)}mr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ls(this.i,this.B),this.M!=2&&(Mn(),Et(17)),Vn(this),this.m=2,er(this)):li(this,this.T-h)};function er(h){h.j.I==0||h.K||Yi(h.j,h)}function Vn(h){kt(h);var b=h.O;b&&typeof b.dispose=="function"&&b.dispose(),h.O=null,Ur(h.V),h.g&&(b=h.g,h.g=null,b.abort(),b.dispose())}function Nr(h,b){try{var T=h.j;if(T.I!=0&&(T.g==h||Un(T.h,h))){if(!h.L&&Un(T.h,h)&&T.I==3){try{var D=T.Ba.g.parse(b)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Q=D;if(Q[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)zs(T),bt(T);else break e;Hn(T),Et(18)}}else T.xa=Q[1],0<T.xa-T.K&&Q[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=In(p(T.Va,T),6e3));gr(T.h)<=1&&T.ta&&(T.ta=void 0)}else mi(T,11)}else if((h.L||T.g==h)&&zs(T),!N(b))for(Q=T.Ba.g.parse(b),b=0;b<Q.length;b++){let mt=Q[b];const Yt=mt[0];if(!(Yt<=T.K))if(T.K=Yt,mt=mt[1],T.I==2)if(mt[0]=="c"){T.M=mt[1],T.ba=mt[2];const ys=mt[3];ys!=null&&(T.ka=ys,T.j.info("VER="+T.ka));const pi=mt[4];pi!=null&&(T.za=pi,T.j.info("SVER="+T.za));const Hs=mt[5];Hs!=null&&typeof Hs=="number"&&Hs>0&&(D=1.5*Hs,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const Fs=h.g;if(Fs){const Vo=Fs.g?Fs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vo){var re=D.h;re.g||Vo.indexOf("spdy")==-1&&Vo.indexOf("quic")==-1&&Vo.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(tr(re,re.h),re.h=null))}if(D.G){const Al=Fs.g?Fs.g.getResponseHeader("X-HTTP-Session-Id"):null;Al&&(D.wa=Al,ct(D.J,D.G,Al))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var _e=h;if(D.na=kh(D,D.L?D.ba:null,D.W),_e.L){Vs(D.h,_e);var Fe=_e,un=D.O;un&&(Fe.H=un),Fe.D&&(kt(Fe),Sr(Fe)),D.g=_e}else $r(D);T.i.length>0&&Nt(T)}else mt[0]!="stop"&&mt[0]!="close"||mi(T,7);else T.I==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?mi(T,7):Xe(T):mt[0]!="noop"&&T.l&&T.l.qa(mt),T.A=0)}}Mn(4)}catch{}}var Gt=class{constructor(h,b){this.g=h,this.map=b}};function Fi(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function us(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function gr(h){return h.h?1:h.g?h.g.size:0}function Un(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function tr(h,b){h.g?h.g.add(b):h.h=b}function Vs(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}Fi.prototype.cancel=function(){if(this.i=Gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Gi(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const T of h.g.values())b=b.concat(T.G);return b}return A(h.i)}var Da=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ci(h,b){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const D=h[T].indexOf("=");let Q,re=null;D>=0?(Q=h[T].substring(0,D),re=h[T].substring(D+1)):Q=h[T],b(Q,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function qn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;h instanceof qn?(this.l=h.l,Mt(this,h.j),this.o=h.o,this.g=h.g,Cr(this,h.u),this.h=h.h,zr(this,La(h.i)),this.m=h.m):h&&(b=String(h).match(Da))?(this.l=!1,Mt(this,b[1]||"",!0),this.o=Rr(b[2]||""),this.g=Rr(b[3]||"",!0),Cr(this,b[4]),this.h=Rr(b[5]||"",!0),zr(this,b[6]||"",!0),this.m=Rr(b[7]||"")):(this.l=!1,this.i=new pn(null,this.l))}qn.prototype.toString=function(){const h=[];var b=this.j;b&&h.push(Us(b,ui,!0),":");var T=this.g;return(T||b=="file")&&(h.push("//"),(b=this.o)&&h.push(Us(b,ui,!0),"@"),h.push(fr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Us(T,T.charAt(0)=="/"?$i:hi,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Us(T,fs)),h.join("")},qn.prototype.resolve=function(h){const b=$t(this);let T=!!h.j;T?Mt(b,h.j):T=!!h.o,T?b.o=h.o:T=!!h.g,T?b.g=h.g:T=h.u!=null;var D=h.h;if(T)Cr(b,h.u);else if(T=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var Q=b.h.lastIndexOf("/");Q!=-1&&(D=b.h.slice(0,Q+1)+D)}if(Q=D,Q==".."||Q==".")D="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){D=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const re=[];for(let _e=0;_e<Q.length;){const Fe=Q[_e++];Fe=="."?D&&_e==Q.length&&re.push(""):Fe==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),D&&_e==Q.length&&re.push("")):(re.push(Fe),D=!0)}D=re.join("/")}else D=Q}return T?b.h=D:T=h.i.toString()!=="",T?zr(b,La(h.i)):T=!!h.m,T&&(b.m=h.m),b};function $t(h){return new qn(h)}function Mt(h,b,T){h.j=T?Rr(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function Cr(h,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);h.u=b}else h.u=null}function zr(h,b,T){b instanceof pn?(h.i=b,fi(h.i,h.l)):(T||(b=Us(b,ds)),h.i=new pn(b,h.l))}function ct(h,b,T){h.i.set(b,T)}function hs(h){return ct(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Rr(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Us(h,b,T){return typeof h=="string"?(h=encodeURI(h).replace(b,On),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function On(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ui=/[#\/\?@]/g,hi=/[#\?:]/g,$i=/[#\?]/g,ds=/[#\?@]/g,fs=/#/g;function pn(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function Kt(h){h.g||(h.g=new Map,h.h=0,h.i&&ci(h.i,function(b,T){h.add(decodeURIComponent(b.replace(/\+/g," ")),T)}))}n=pn.prototype,n.add=function(h,b){Kt(this),this.i=null,h=ms(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(b),this.h+=1,this};function Ir(h,b){Kt(h),b=ms(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function Ki(h,b){return Kt(h),b=ms(h,b),h.g.has(b)}n.forEach=function(h,b){Kt(this),this.g.forEach(function(T,D){T.forEach(function(Q){h.call(b,Q,D,this)},this)},this)};function nr(h,b){Kt(h);let T=[];if(typeof b=="string")Ki(h,b)&&(T=T.concat(h.g.get(ms(h,b))));else for(h=Array.from(h.g.values()),b=0;b<h.length;b++)T=T.concat(h[b]);return T}n.set=function(h,b){return Kt(this),this.i=null,h=ms(this,h),Ki(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},n.get=function(h,b){return h?(h=nr(this,h),h.length>0?String(h[0]):b):b};function di(h,b,T){Ir(h,b),T.length>0&&(h.i=null,h.g.set(ms(h,b),A(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(let D=0;D<b.length;D++){var T=b[D];const Q=fr(T);T=nr(this,T);for(let re=0;re<T.length;re++){let _e=Q;T[re]!==""&&(_e+="="+fr(T[re])),h.push(_e)}}return this.i=h.join("&")};function La(h){const b=new pn;return b.i=h.i,h.g&&(b.g=new Map(h.g),b.h=h.h),b}function ms(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function fi(h,b){b&&!h.j&&(Kt(h),h.i=null,h.g.forEach(function(T,D){const Q=D.toLowerCase();D!=Q&&(Ir(this,D),di(this,Q,T))},h)),h.j=b}function rr(h,b){const T=new Pn;if(u.Image){const D=new Image;D.onload=v(Bn,T,"TestLoadImage: loaded",!0,b,D),D.onerror=v(Bn,T,"TestLoadImage: error",!1,b,D),D.onabort=v(Bn,T,"TestLoadImage: abort",!1,b,D),D.ontimeout=v(Bn,T,"TestLoadImage: timeout",!1,b,D),u.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else b(!1)}function ln(h,b){const T=new Pn,D=new AbortController,Q=setTimeout(()=>{D.abort(),Bn(T,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:D.signal}).then(re=>{clearTimeout(Q),re.ok?Bn(T,"TestPingServer: ok",!0,b):Bn(T,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Q),Bn(T,"TestPingServer: error",!1,b)})}function Bn(h,b,T,D,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),D(T)}catch{}}function Hr(){this.g=new kn}function zn(h){this.i=h.Sb||null,this.h=h.ab||!1}x(zn,Ui),zn.prototype.g=function(){return new Fr(this.i,this.h)};function Fr(h,b){Ht.call(this),this.H=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Fr,Ht),n=Fr.prototype,n.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=b,this.readyState=1,sr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(b.body=h),(this.H||u).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,sr(this)),this.g&&(this.readyState=3,sr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Gr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Gr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?ps(this):sr(this),this.readyState==3&&Gr(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,ps(this))},n.Na=function(h){this.g&&(this.response=h,ps(this))},n.ga=function(){this.g&&ps(this)};function ps(h){h.readyState=4,h.l=null,h.j=null,h.B=null,sr(h)}n.setRequestHeader=function(h,b){this.A.append(h,b)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var T=b.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=b.next();return h.join(`\r
`)};function sr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Fr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Dn(h){let b="";return be(h,function(T,D){b+=D,b+=":",b+=T,b+=`\r
`}),b}function gs(h,b,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=Dn(T),typeof h=="string"?T!=null&&fr(T):ct(h,b,T))}function Ye(h){Ht.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(Ye,Ht);var yr=/^https?$/i,qs=["POST","PUT"];n=Ye.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,b,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Hi.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(re){Bs(this,re);return}if(h=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Q in D)T.set(Q,D[Q]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const re of D.keys())T.set(re,D.get(re));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(re=>re.toLowerCase()=="content-type"),Q=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(qs,b,void 0)>=0)||D||Q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,_e]of T)this.g.setRequestHeader(re,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){Bs(this,re)}};function Bs(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.o=5,Qi(h),O(h)}function Qi(h){h.A||(h.A=!0,It(h,"complete"),It(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,It(this,"complete"),It(this,"abort"),O(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),O(this,!0)),Ye.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?_(this):this.Xa())},n.Xa=function(){_(this)};function _(h){if(h.h&&typeof l<"u"){if(h.v&&q(h)==4)setTimeout(h.Ca.bind(h),0);else if(It(h,"readystatechange"),q(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var T;if(!(T=b)){var D;if(D=re===0){let _e=String(h.D).match(Da)[1]||null;!_e&&u.self&&u.self.location&&(_e=u.self.location.protocol.slice(0,-1)),D=!yr.test(_e?_e.toLowerCase():"")}T=D}if(T)It(h,"complete"),It(h,"success");else{h.o=6;try{var Q=q(h)>2?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.ca()+"]",Qi(h)}}finally{O(h)}}}}function O(h,b){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,b||It(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function q(h){return h.g?h.g.readyState:0}n.ca=function(){try{return q(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),Vi(b)}};function ne(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Me(h){const b={};h=(h.g&&q(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(N(h[D]))continue;var T=nn(h[D]);const Q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const re=b[Q]||[];b[Q]=re,re.push(T)}ve(b,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ae(h,b,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||b}function $e(h){this.za=0,this.i=[],this.j=new Pn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ae("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ae("baseRetryDelayMs",5e3,h),this.Za=Ae("retryDelaySeedMs",1e4,h),this.Ta=Ae("forwardChannelMaxRetries",2,h),this.va=Ae("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Fi(h&&h.concurrentRequestLimit),this.Ba=new Hr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=$e.prototype,n.ka=8,n.I=1,n.connect=function(h,b,T,D){Et(0),this.W=h,this.H=b||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=kh(this,null,this.W),Nt(this)};function Xe(h){if(Ze(h),h.I==3){var b=h.V++,T=$t(h.J);if(ct(T,"SID",h.M),ct(T,"RID",b),ct(T,"TYPE","terminate"),Qt(h,T),b=new mr(h,h.j,b),b.M=2,b.A=hs($t(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(b.A.toString(),"")}catch{}!T&&u.Image&&(new Image().src=b.A,T=!0),T||(b.g=Mh(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Sr(b)}jh(h)}function bt(h){h.g&&(Kr(h),h.g.cancel(),h.g=null)}function Ze(h){bt(h),h.v&&(u.clearTimeout(h.v),h.v=null),zs(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function Nt(h){if(!us(h.h)&&!h.m){h.m=!0;var b=h.Ea;fe||j(),xe||(fe(),xe=!0),M.add(b,h),h.D=0}}function cn(h,b){return gr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=b.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=In(p(h.Ea,h,b),Lh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Q=new mr(this,this.j,h);let re=this.o;if(this.U&&(re?(re=V(re),he(re,this.U)):re=this.U),this.u!==null||this.R||(Q.J=re,re=null),this.S)e:{for(var b=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(b+=D,b>4096){b=T;break e}if(b===4096||T===this.i.length-1){b=T+1;break e}}b=1e3}else b=1e3;b=sn(this,Q,b),T=$t(this.J),ct(T,"RID",h),ct(T,"CVER",22),this.G&&ct(T,"X-HTTP-Session-Id",this.G),Qt(this,T),re&&(this.R?b="headers="+fr(Dn(re))+"&"+b:this.u&&gs(T,this.u,re)),tr(this.h,Q),this.Ra&&ct(T,"TYPE","init"),this.S?(ct(T,"$req",b),ct(T,"SID","null"),Q.U=!0,Ar(Q,T,null)):Ar(Q,T,b),this.I=2}}else this.I==3&&(h?Pt(this,h):this.i.length==0||us(this.h)||Pt(this))};function Pt(h,b){var T;b?T=b.l:T=h.V++;const D=$t(h.J);ct(D,"SID",h.M),ct(D,"RID",T),ct(D,"AID",h.K),Qt(h,D),h.u&&h.o&&gs(D,h.u,h.o),T=new mr(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),b&&(h.i=b.G.concat(h.i)),b=sn(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),tr(h.h,T),Ar(T,D,b)}function Qt(h,b){h.H&&be(h.H,function(T,D){ct(b,D,T)}),h.l&&be({},function(T,D){ct(b,D,T)})}function sn(h,b,T){T=Math.min(h.i.length,T);const D=h.l?p(h.l.Ka,h.l,h):null;e:{var Q=h.i;let Fe=-1;for(;;){const un=["count="+T];Fe==-1?T>0?(Fe=Q[0].g,un.push("ofs="+Fe)):Fe=0:un.push("ofs="+Fe);let mt=!0;for(let Yt=0;Yt<T;Yt++){var re=Q[Yt].g;const ys=Q[Yt].map;if(re-=Fe,re<0)Fe=Math.max(0,Q[Yt].g-100),mt=!1;else try{re="req"+re+"_"||"";try{var _e=ys instanceof Map?ys:Object.entries(ys);for(const[pi,Hs]of _e){let Fs=Hs;d(Hs)&&(Fs=hr(Hs)),un.push(re+pi+"="+encodeURIComponent(Fs))}}catch(pi){throw un.push(re+"type="+encodeURIComponent("_badmap")),pi}}catch{D&&D(ys)}}if(mt){_e=un.join("&");break e}}_e=void 0}return h=h.i.splice(0,T),b.G=h,_e}function $r(h){if(!h.g&&!h.v){h.Y=1;var b=h.Da;fe||j(),xe||(fe(),xe=!0),M.add(b,h),h.A=0}}function Hn(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=In(p(h.Da,h),Lh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Po(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=In(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),bt(this),Po(this))};function Kr(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function Po(h){h.g=new mr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var b=$t(h.na);ct(b,"RID","rpc"),ct(b,"SID",h.M),ct(b,"AID",h.K),ct(b,"CI",h.F?"0":"1"),!h.F&&h.ia&&ct(b,"TO",h.ia),ct(b,"TYPE","xmlhttp"),Qt(h,b),h.u&&h.o&&gs(b,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=hs($t(b)),T.u=null,T.R=!0,Jt(T,h)}n.Va=function(){this.C!=null&&(this.C=null,bt(this),Hn(this),Et(19))};function zs(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Yi(h,b){var T=null;if(h.g==b){zs(h),Kr(h),h.g=null;var D=2}else if(Un(h.h,b))T=b.G,Vs(h.h,b),D=1;else return;if(h.I!=0){if(b.o)if(D==1){T=b.u?b.u.length:0,b=Date.now()-b.F;var Q=h.D;D=Tr(),It(D,new Jn(D,T)),Nt(h)}else $r(h);else if(Q=b.m,Q==3||Q==0&&b.X>0||!(D==1&&cn(h,b)||D==2&&Hn(h)))switch(T&&T.length>0&&(b=h.h,b.i=b.i.concat(T)),Q){case 1:mi(h,5);break;case 4:mi(h,10);break;case 3:mi(h,6);break;default:mi(h,2)}}}function Lh(h,b){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*b}function mi(h,b){if(h.j.info("Error code "+b),b==2){var T=p(h.bb,h),D=h.Ua;const Q=!D;D=new qn(D||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Mt(D,"https"),hs(D),Q?rr(D.toString(),T):ln(D.toString(),T)}else Et(2);h.I=0,h.l&&h.l.pa(b),jh(h),Ze(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function jh(h){if(h.I=0,h.ja=[],h.l){const b=Gi(h.h);(b.length!=0||h.i.length!=0)&&(C(h.ja,b),C(h.ja,h.i),h.h.i.length=0,A(h.i),h.i.length=0),h.l.oa()}}function kh(h,b,T){var D=T instanceof qn?$t(T):new qn(T);if(D.g!="")b&&(D.g=b+"."+D.g),Cr(D,D.u);else{var Q=u.location;D=Q.protocol,b=b?b+"."+Q.hostname:Q.hostname,Q=+Q.port;const re=new qn(null);D&&Mt(re,D),b&&(re.g=b),Q&&Cr(re,Q),T&&(re.h=T),D=re}return T=h.G,b=h.wa,T&&b&&ct(D,T,b),ct(D,"VER",h.ka),Qt(h,D),D}function Mh(h,b,T){if(b&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Aa&&!h.ma?new Ye(new zn({ab:T})):new Ye(h.ma),b.Fa(h.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ph(){}n=Ph.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ja(){}ja.prototype.g=function(h,b){return new vr(h,b)};function vr(h,b){Ht.call(this),this.g=new $e(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(h?h["X-WebChannel-Client-Profile"]=b.sa:h={"X-WebChannel-Client-Profile":b.sa}),this.g.U=h,(h=b&&b.Qb)&&!N(h)&&(this.g.u=h),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!N(b)&&(this.g.G=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new Xi(this)}x(vr,Ht),vr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vr.prototype.close=function(){Xe(this.g)},vr.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=hr(h),h=T);b.i.push(new Gt(b.Ya++,h)),b.I==3&&Nt(b)},vr.prototype.N=function(){this.g.l=null,delete this.j,Xe(this.g),delete this.g,vr.Z.N.call(this)};function Vh(h){Zt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const T in b){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}x(Vh,Zt);function Uh(){Tn.call(this),this.status=1}x(Uh,Tn);function Xi(h){this.g=h}x(Xi,Ph),Xi.prototype.ra=function(){It(this.g,"a")},Xi.prototype.qa=function(h){It(this.g,new Vh(h))},Xi.prototype.pa=function(h){It(this.g,new Uh)},Xi.prototype.oa=function(){It(this.g,"b")},ja.prototype.createWebChannel=ja.prototype.g,vr.prototype.send=vr.prototype.o,vr.prototype.open=vr.prototype.m,vr.prototype.close=vr.prototype.close,WT=function(){return new ja},XT=function(){return Tr()},YT=Dt,my={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ps.NO_ERROR=0,Ps.TIMEOUT=8,Ps.HTTP_ERROR=6,pf=Ps,zi.COMPLETE="complete",QT=zi,qi.EventType=dr,dr.OPEN="a",dr.CLOSE="b",dr.ERROR="c",dr.MESSAGE="d",Ht.prototype.listen=Ht.prototype.J,Du=qi,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,KT=Ye}).apply(typeof Gd<"u"?Gd:typeof self<"u"?self:typeof window<"u"?window:{});const Ix="@firebase/firestore",Ox="4.9.2";class or{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}or.UNAUTHENTICATED=new or(null),or.GOOGLE_CREDENTIALS=new or("google-credentials-uid"),or.FIRST_PARTY=new or("first-party-uid"),or.MOCK_USER=new or("mock-user");let kc="12.3.0";const ll=new r0("@firebase/firestore");function tc(){return ll.logLevel}function we(n,...e){if(ll.logLevel<=st.DEBUG){const t=e.map(g0);ll.debug(`Firestore (${kc}): ${n}`,...t)}}function _a(n,...e){if(ll.logLevel<=st.ERROR){const t=e.map(g0);ll.error(`Firestore (${kc}): ${n}`,...t)}}function bc(n,...e){if(ll.logLevel<=st.WARN){const t=e.map(g0);ll.warn(`Firestore (${kc}): ${n}`,...t)}}function g0(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function qe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,ZT(n,r,t)}function ZT(n,e,t){let r=`FIRESTORE (${kc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw _a(r),new Error(r)}function gt(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||ZT(e,a,r)}function Be(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Ta{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ti{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class JT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(or.UNAUTHENTICATED)))}shutdown(){}}class YO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class XO{constructor(e){this.t=e,this.currentUser=or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){gt(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ti,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ti)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt(typeof r.accessToken=="string",31837,{l:r}),new JT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string",2055,{h:e}),new or(e)}}class WO{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=or.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZO{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new WO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(or.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Dx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ts(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){gt(this.o===void 0,3512);const r=l=>{l.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,we("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Dx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(gt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Dx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function e6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class y0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=e6(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function it(n,e){return n<e?-1:n>e?1:0}function py(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),l=e.charAt(r);if(a!==l)return Mg(a)===Mg(l)?it(a,l):Mg(a)?1:-1}return it(n.length,e.length)}const t6=55296,n6=57343;function Mg(n){const e=n.charCodeAt(0);return e>=t6&&e<=n6}function _c(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}const Lx="__name__";class xi{constructor(e,t,r){t===void 0?t=0:t>e.length&&qe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&qe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return xi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=xi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return it(e.length,t.length)}static compareSegments(e,t){const r=xi.isNumericId(e),a=xi.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?xi.extractNumericId(e).compare(xi.extractNumericId(t)):py(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yo.fromString(e.substring(4,e.length-2))}}class jt extends xi{construct(e,t,r){return new jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new jt(t)}static emptyPath(){return new jt([])}}const r6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yn extends xi{construct(e,t,r){return new Yn(e,t,r)}static isValidIdentifier(e){return r6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Lx}static keyField(){return new Yn([Lx])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new Ee(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ee(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(u=!u,a++):d!=="."||u?(r+=d,a++):(l(),a++)}if(l(),u)throw new Ee(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yn(t)}static emptyPath(){return new Yn([])}}class ke{constructor(e){this.path=e}static fromPath(e){return new ke(jt.fromString(e))}static fromName(e){return new ke(jt.fromString(e).popFirst(5))}static empty(){return new ke(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new jt(e.slice()))}}function eA(n,e,t){if(!t)throw new Ee(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function s6(n,e,t,r){if(e===!0&&r===!0)throw new Ee(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jx(n){if(!ke.isDocumentKey(n))throw new Ee(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function kx(n){if(ke.isDocumentKey(n))throw new Ee(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Jf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":qe(12329,{type:typeof n})}function Ls(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jf(n);throw new Ee(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wn(n,e){const t={typeString:n};return e&&(t.value=e),t}function bh(n,e){if(!tA(n))throw new Ee(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(a&&typeof u!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new Ee(le.INVALID_ARGUMENT,t);return!0}const Mx=-62135596800,Px=1e6;class Bt{static now(){return Bt.fromMillis(Date.now())}static fromDate(e){return Bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Px);return new Bt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Mx)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Px}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bh(e,Bt._jsonSchema))return new Bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Bt._jsonSchemaVersion="firestore/timestamp/1.0",Bt._jsonSchema={type:wn("string",Bt._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new Bt(0,0))}static max(){return new ze(new Bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Xu=-1;function i6(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=ze.fromTimestamp(r===1e9?new Bt(t+1,0):new Bt(t,r));return new xo(a,ke.empty(),e)}function a6(n){return new xo(n.readTime,n.key,Xu)}class xo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xo(ze.min(),ke.empty(),Xu)}static max(){return new xo(ze.max(),ke.empty(),Xu)}}function o6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(n.documentKey,e.documentKey),t!==0?t:it(n.largestBatchId,e.largestBatchId))}const l6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Mc(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==l6)throw n;we("LocalStore","Unexpectedly lost primary lease")}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):de.reject(t)}static resolve(e){return new de(((t,r)=>{t(e)}))}static reject(e){return new de(((t,r)=>{r(e)}))}static waitFor(e){return new de(((t,r)=>{let a=0,l=0,u=!1;e.forEach((d=>{++a,d.next((()=>{++l,u&&l===a&&t()}),(m=>r(m)))})),u=!0,l===a&&t()}))}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next((a=>a?de.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new de(((r,a)=>{const l=e.length,u=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((v=>{u[p]=v,++d,d===l&&r(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new de(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}function u6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Pc(n){return n.name==="IndexedDbTransactionError"}class em{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}em.ce=-1;const v0=-1;function tm(n){return n==null}function Of(n){return n===0&&1/n==-1/0}function h6(n){return typeof n=="number"&&Number.isInteger(n)&&!Of(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const nA="";function d6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Vx(e)),e=f6(n.get(t),e);return Vx(e)}function f6(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case nA:t+="";break;default:t+=l}}return t}function Vx(n){return n+nA+""}function Ux(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Oo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function m6(n,e){const t=[];for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.push(e(n[r],r,n));return t}function rA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class en{constructor(e,t){this.comparator=e,this.root=t||Qn.EMPTY}insert(e,t){return new en(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $d(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $d(this.root,e,this.comparator,!1)}getReverseIterator(){return new $d(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $d(this.root,e,this.comparator,!0)}}class $d{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Qn.RED,this.left=a??Qn.EMPTY,this.right=l??Qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Qn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Qn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qe(27949);return e+(this.isRed()?0:1)}}Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1;Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw qe(57766)}get value(){throw qe(16141)}get color(){throw qe(16727)}get left(){throw qe(29726)}get right(){throw qe(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qx(this.data.getIterator())}getIteratorFrom(e){return new qx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class qx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ns{constructor(e){this.fields=e,e.sort(Yn.comparator)}static empty(){return new ns([])}unionWith(e){let t=new Nn(Yn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ns(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _c(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class sA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new sA("Invalid base64 string: "+l):l}})(e);return new Wn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Wn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wn.EMPTY_BYTE_STRING=new Wn("");const p6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eo(n){if(gt(!!n,39018),typeof n=="string"){let e=0;const t=p6.exec(n);if(gt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fn(n.seconds),nanos:fn(n.nanos)}}function fn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wo(n){return typeof n=="string"?Wn.fromBase64String(n):Wn.fromUint8Array(n)}const iA="server_timestamp",aA="__type__",oA="__previous_value__",lA="__local_write_time__";function b0(n){return(n?.mapValue?.fields||{})[aA]?.stringValue===iA}function nm(n){const e=n.mapValue.fields[oA];return b0(e)?nm(e):e}function Wu(n){const e=Eo(n.mapValue.fields[lA].timestampValue);return new Bt(e.seconds,e.nanos)}class g6{constructor(e,t,r,a,l,u,d,m,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=v}}const Df="(default)";class Zu{constructor(e,t){this.projectId=e,this.database=t||Df}static empty(){return new Zu("","")}get isDefaultDatabase(){return this.database===Df}isEqual(e){return e instanceof Zu&&e.projectId===this.projectId&&e.database===this.database}}const cA="__type__",y6="__max__",Kd={mapValue:{}},uA="__vector__",Lf="value";function To(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?b0(n)?4:b6(n)?9007199254740991:v6(n)?10:11:qe(28295,{value:n})}function Ii(n,e){if(n===e)return!0;const t=To(n);if(t!==To(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wu(n).isEqual(Wu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Eo(a.timestampValue),d=Eo(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return wo(a.bytesValue).isEqual(wo(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return fn(a.geoPointValue.latitude)===fn(l.geoPointValue.latitude)&&fn(a.geoPointValue.longitude)===fn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return fn(a.integerValue)===fn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=fn(a.doubleValue),d=fn(l.doubleValue);return u===d?Of(u)===Of(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return _c(n.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},d=l.mapValue.fields||{};if(Ux(u)!==Ux(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(d[m]===void 0||!Ii(u[m],d[m])))return!1;return!0})(n,e);default:return qe(52216,{left:n})}}function Ju(n,e){return(n.values||[]).find((t=>Ii(t,e)))!==void 0}function xc(n,e){if(n===e)return 0;const t=To(n),r=To(e);if(t!==r)return it(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return it(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=fn(l.integerValue||l.doubleValue),m=fn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return Bx(n.timestampValue,e.timestampValue);case 4:return Bx(Wu(n),Wu(e));case 5:return py(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=wo(l),m=wo(u);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),m=u.split("/");for(let p=0;p<d.length&&p<m.length;p++){const v=it(d[p],m[p]);if(v!==0)return v}return it(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=it(fn(l.latitude),fn(u.latitude));return d!==0?d:it(fn(l.longitude),fn(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return zx(n.arrayValue,e.arrayValue);case 10:return(function(l,u){const d=l.fields||{},m=u.fields||{},p=d[Lf]?.arrayValue,v=m[Lf]?.arrayValue,x=it(p?.values?.length||0,v?.values?.length||0);return x!==0?x:zx(p,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Kd.mapValue&&u===Kd.mapValue)return 0;if(l===Kd.mapValue)return 1;if(u===Kd.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=u.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let x=0;x<m.length&&x<v.length;++x){const E=py(m[x],v[x]);if(E!==0)return E;const A=xc(d[m[x]],p[v[x]]);if(A!==0)return A}return it(m.length,v.length)})(n.mapValue,e.mapValue);default:throw qe(23264,{he:t})}}function Bx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return it(n,e);const t=Eo(n),r=Eo(e),a=it(t.seconds,r.seconds);return a!==0?a:it(t.nanos,r.nanos)}function zx(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=xc(t[a],r[a]);if(l)return l}return it(t.length,r.length)}function Ec(n){return gy(n)}function gy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Eo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return wo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ke.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=gy(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${gy(t.fields[u])}`;return a+"}"})(n.mapValue):qe(61005,{value:n})}function gf(n){switch(To(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nm(n);return e?16+gf(e):16;case 5:return 2*n.stringValue.length;case 6:return wo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+gf(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return Oo(r.fields,((l,u)=>{a+=l.length+gf(u)})),a})(n.mapValue);default:throw qe(13486,{value:n})}}function Hx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yy(n){return!!n&&"integerValue"in n}function _0(n){return!!n&&"arrayValue"in n}function Fx(n){return!!n&&"nullValue"in n}function Gx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yf(n){return!!n&&"mapValue"in n}function v6(n){return(n?.mapValue?.fields||{})[cA]?.stringValue===uA}function Bu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Oo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Bu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bu(n.arrayValue.values[t]);return e}return{...n}}function b6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===y6}class Pr{constructor(e){this.value=e}static empty(){return new Pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bu(t)}setAll(e){let t=Yn.emptyPath(),r={},a=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}u?r[d.lastSegment()]=Bu(u):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());yf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];yf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Oo(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Pr(Bu(this.value))}}function hA(n){const e=[];return Oo(n.fields,((t,r)=>{const a=new Yn([t]);if(yf(r)){const l=hA(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new ns(e)}class lr{constructor(e,t,r,a,l,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new lr(e,0,ze.min(),ze.min(),ze.min(),Pr.empty(),0)}static newFoundDocument(e,t,r,a){return new lr(e,1,t,ze.min(),r,a,0)}static newNoDocument(e,t){return new lr(e,2,t,ze.min(),ze.min(),Pr.empty(),0)}static newUnknownDocument(e,t){return new lr(e,3,t,ze.min(),ze.min(),Pr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jf{constructor(e,t){this.position=e,this.inclusive=t}}function $x(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?r=ke.comparator(ke.fromName(u.referenceValue),t.key):r=xc(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ii(n.position[t],e.position[t]))return!1;return!0}class eh{constructor(e,t="asc"){this.field=e,this.dir=t}}function _6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class dA{}class En extends dA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new E6(e,t,r):t==="array-contains"?new A6(e,r):t==="in"?new S6(e,r):t==="not-in"?new N6(e,r):t==="array-contains-any"?new C6(e,r):new En(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new w6(e,r):new T6(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xc(t,this.value)):t!==null&&To(this.value)===To(t)&&this.matchesComparison(xc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends dA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ti(e,t)}matches(e){return fA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fA(n){return n.op==="and"}function mA(n){return x6(n)&&fA(n)}function x6(n){for(const e of n.filters)if(e instanceof ti)return!1;return!0}function vy(n){if(n instanceof En)return n.field.canonicalString()+n.op.toString()+Ec(n.value);if(mA(n))return n.filters.map((e=>vy(e))).join(",");{const e=n.filters.map((t=>vy(t))).join(",");return`${n.op}(${e})`}}function pA(n,e){return n instanceof En?(function(r,a){return a instanceof En&&r.op===a.op&&r.field.isEqual(a.field)&&Ii(r.value,a.value)})(n,e):n instanceof ti?(function(r,a){return a instanceof ti&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,u,d)=>l&&pA(u,a.filters[d])),!0):!1})(n,e):void qe(19439)}function gA(n){return n instanceof En?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ec(t.value)}`})(n):n instanceof ti?(function(t){return t.op.toString()+" {"+t.getFilters().map(gA).join(" ,")+"}"})(n):"Filter"}class E6 extends En{constructor(e,t,r){super(e,t,r),this.key=ke.fromName(r.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class w6 extends En{constructor(e,t){super(e,"in",t),this.keys=yA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class T6 extends En{constructor(e,t){super(e,"not-in",t),this.keys=yA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yA(n,e){return(e.arrayValue?.values||[]).map((t=>ke.fromName(t.referenceValue)))}class A6 extends En{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _0(t)&&Ju(t.arrayValue,this.value)}}class S6 extends En{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ju(this.value.arrayValue,t)}}class N6 extends En{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ju(this.value.arrayValue,t)}}class C6 extends En{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Ju(this.value.arrayValue,r)))}}class R6{constructor(e,t=null,r=[],a=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=d,this.Te=null}}function Qx(n,e=null,t=[],r=[],a=null,l=null,u=null){return new R6(n,e,t,r,a,l,u)}function x0(n){const e=Be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>vy(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),tm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ec(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ec(r))).join(",")),e.Te=t}return e.Te}function E0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Kx(n.startAt,e.startAt)&&Kx(n.endAt,e.endAt)}function by(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Vc{constructor(e,t=null,r=[],a=[],l=null,u="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function I6(n,e,t,r,a,l,u,d){return new Vc(n,e,t,r,a,l,u,d)}function w0(n){return new Vc(n)}function Yx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vA(n){return n.collectionGroup!==null}function zu(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Nn(Yn.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new eh(l,r))})),t.has(Yn.keyField().canonicalString())||e.Ie.push(new eh(Yn.keyField(),r))}return e.Ie}function Ai(n){const e=Be(n);return e.Ee||(e.Ee=bA(e,zu(n))),e.Ee}function O6(n){const e=Be(n);return e.de||(e.de=bA(e,n.explicitOrderBy)),e.de}function bA(n,e){if(n.limitType==="F")return Qx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new eh(a.field,l)}));const t=n.endAt?new jf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new jf(n.startAt.position,n.startAt.inclusive):null;return Qx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function _y(n,e){const t=n.filters.concat([e]);return new Vc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xy(n,e,t){return new Vc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rm(n,e){return E0(Ai(n),Ai(e))&&n.limitType===e.limitType}function _A(n){return`${x0(Ai(n))}|lt:${n.limitType}`}function nc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>gA(a))).join(", ")}]`),tm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Ec(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Ec(a))).join(",")),`Target(${r})`})(Ai(n))}; limitType=${n.limitType})`}function sm(n,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ke.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,a){for(const l of zu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(u,d,m){const p=$x(u,d,m);return u.inclusive?p<=0:p<0})(r.startAt,zu(r),a)||r.endAt&&!(function(u,d,m){const p=$x(u,d,m);return u.inclusive?p>=0:p>0})(r.endAt,zu(r),a))})(n,e)}function D6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xA(n){return(e,t)=>{let r=!1;for(const a of zu(n)){const l=L6(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function L6(n,e,t){const r=n.field.isKeyField()?ke.comparator(e.key,t.key):(function(l,u,d){const m=u.data.field(l),p=d.data.field(l);return m!==null&&p!==null?xc(m,p):qe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return qe(19790,{direction:n.dir})}}class pl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Oo(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return rA(this.inner)}size(){return this.innerSize}}const j6=new en(ke.comparator);function xa(){return j6}const EA=new en(ke.comparator);function Lu(...n){let e=EA;for(const t of n)e=e.insert(t.key,t);return e}function wA(n){let e=EA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function nl(){return Hu()}function TA(){return Hu()}function Hu(){return new pl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const k6=new en(ke.comparator),M6=new Nn(ke.comparator);function at(...n){let e=M6;for(const t of n)e=e.add(t);return e}const P6=new Nn(it);function V6(){return P6}function T0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Of(e)?"-0":e}}function AA(n){return{integerValue:""+n}}function U6(n,e){return h6(e)?AA(e):T0(n,e)}class im{constructor(){this._=void 0}}function q6(n,e,t){return n instanceof th?(function(a,l){const u={fields:{[aA]:{stringValue:iA},[lA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&b0(l)&&(l=nm(l)),l&&(u.fields[oA]=l),{mapValue:u}})(t,e):n instanceof nh?NA(n,e):n instanceof rh?CA(n,e):(function(a,l){const u=SA(a,l),d=Xx(u)+Xx(a.Ae);return yy(u)&&yy(a.Ae)?AA(d):T0(a.serializer,d)})(n,e)}function B6(n,e,t){return n instanceof nh?NA(n,e):n instanceof rh?CA(n,e):t}function SA(n,e){return n instanceof kf?(function(r){return yy(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class th extends im{}class nh extends im{constructor(e){super(),this.elements=e}}function NA(n,e){const t=RA(e);for(const r of n.elements)t.some((a=>Ii(a,r)))||t.push(r);return{arrayValue:{values:t}}}class rh extends im{constructor(e){super(),this.elements=e}}function CA(n,e){let t=RA(e);for(const r of n.elements)t=t.filter((a=>!Ii(a,r)));return{arrayValue:{values:t}}}class kf extends im{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Xx(n){return fn(n.integerValue||n.doubleValue)}function RA(n){return _0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class z6{constructor(e,t){this.field=e,this.transform=t}}function H6(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof nh&&a instanceof nh||r instanceof rh&&a instanceof rh?_c(r.elements,a.elements,Ii):r instanceof kf&&a instanceof kf?Ii(r.Ae,a.Ae):r instanceof th&&a instanceof th})(n.transform,e.transform)}class F6{constructor(e,t){this.version=e,this.transformResults=t}}class Os{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Os}static exists(e){return new Os(void 0,e)}static updateTime(e){return new Os(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class am{}function IA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new A0(n.key,Os.none()):new _h(n.key,n.data,Os.none());{const t=n.data,r=Pr.empty();let a=new Nn(Yn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new Do(n.key,r,new ns(a.toArray()),Os.none())}}function G6(n,e,t){n instanceof _h?(function(a,l,u){const d=a.value.clone(),m=Zx(a.fieldTransforms,l,u.transformResults);d.setAll(m),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Do?(function(a,l,u){if(!vf(a.precondition,l))return void l.convertToUnknownDocument(u.version);const d=Zx(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(OA(a)),m.setAll(d),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Fu(n,e,t,r){return n instanceof _h?(function(l,u,d,m){if(!vf(l.precondition,u))return d;const p=l.value.clone(),v=Jx(l.fieldTransforms,m,u);return p.setAll(v),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Do?(function(l,u,d,m){if(!vf(l.precondition,u))return d;const p=Jx(l.fieldTransforms,m,u),v=u.data;return v.setAll(OA(l)),v.setAll(p),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((x=>x.field)))})(n,e,t,r):(function(l,u,d){return vf(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function $6(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=SA(r.transform,a||null);l!=null&&(t===null&&(t=Pr.empty()),t.set(r.field,l))}return t||null}function Wx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&_c(r,a,((l,u)=>H6(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _h extends am{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Do extends am{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function OA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Zx(n,e,t){const r=new Map;gt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,d=e.data.field(l.field);r.set(l.field,B6(u,d,t[a]))}return r}function Jx(n,e,t){const r=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);r.set(a.field,q6(l,u,e))}return r}class A0 extends am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class K6 extends am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Q6{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&G6(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=TA();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(a.key)?null:d;const m=IA(u,d);m!==null&&r.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(ze.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),at())}isEqual(e){return this.batchId===e.batchId&&_c(this.mutations,e.mutations,((t,r)=>Wx(t,r)))&&_c(this.baseMutations,e.baseMutations,((t,r)=>Wx(t,r)))}}class S0{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){gt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return k6})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new S0(e,t,r,a)}}class Y6{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class X6{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}class W6{constructor(e,t){this.count=e,this.unchangedNames=t}}var xn,ut;function Z6(n){switch(n){case le.OK:return qe(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return qe(15467,{code:n})}}function DA(n){if(n===void 0)return _a("GRPC error has no .code"),le.UNKNOWN;switch(n){case xn.OK:return le.OK;case xn.CANCELLED:return le.CANCELLED;case xn.UNKNOWN:return le.UNKNOWN;case xn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case xn.INTERNAL:return le.INTERNAL;case xn.UNAVAILABLE:return le.UNAVAILABLE;case xn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case xn.NOT_FOUND:return le.NOT_FOUND;case xn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case xn.ABORTED:return le.ABORTED;case xn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case xn.DATA_LOSS:return le.DATA_LOSS;default:return qe(39323,{code:n})}}(ut=xn||(xn={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";function J6(){return new TextEncoder}const e5=new yo([4294967295,4294967295],0);function eE(n){const e=J6().encode(n),t=new $T;return t.update(e),new Uint8Array(t.digest())}function tE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new yo([t,r],0),new yo([a,l],0)]}class N0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ju(`Invalid padding: ${t}`);if(r<0)throw new ju(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ju(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ju(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=yo.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(yo.fromNumber(r)));return a.compare(e5)===1&&(a=new yo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=eE(e),[r,a]=tE(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);if(!this.we(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new N0(l,a,t);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=eE(e),[r,a]=tE(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class om{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,xh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new om(ze.min(),a,new en(it),xa(),at())}}class xh{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new xh(r,t,at(),at(),at())}}class bf{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class LA{constructor(e,t){this.targetId=e,this.Ce=t}}class jA{constructor(e,t,r=Wn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class nE{constructor(){this.ve=0,this.Fe=rE(),this.Me=Wn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=at(),t=at(),r=at();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:qe(38017,{changeType:l})}})),new xh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=rE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class t5{constructor(e){this.Ge=e,this.ze=new Map,this.je=xa(),this.Je=Qd(),this.He=Qd(),this.Ye=new en(it)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:qe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(by(l))if(r===0){const u=new ke(l.path);this.et(t,u,lr.newNoDocument(u,ze.min()))}else gt(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const d=this.ut(e),m=d?this.ct(d,e,u):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let u,d;try{u=wo(r).toUint8Array()}catch(m){if(m instanceof sA)return bc("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new N0(u,a,l)}catch(m){return bc(m instanceof ju?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const d=this.ot(u);if(d){if(l.current&&by(d.target)){const m=new ke(d.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,lr.newNoDocument(m,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let r=at();this.He.forEach(((l,u)=>{let d=!0;u.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new om(e,t,this.Ye,this.je,r);return this.je=xa(),this.Je=Qd(),this.He=Qd(),this.Ye=new en(it),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new nE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Nn(it),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Nn(it),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Qd(){return new en(ke.comparator)}function rE(){return new en(ke.comparator)}const n5={asc:"ASCENDING",desc:"DESCENDING"},r5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},s5={and:"AND",or:"OR"};class i5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ey(n,e){return n.useProto3Json||tm(e)?e:{value:e}}function Mf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function a5(n,e){return Mf(n,e.toTimestamp())}function Si(n){return gt(!!n,49232),ze.fromTimestamp((function(t){const r=Eo(t);return new Bt(r.seconds,r.nanos)})(n))}function C0(n,e){return wy(n,e).canonicalString()}function wy(n,e){const t=(function(a){return new jt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function MA(n){const e=jt.fromString(n);return gt(zA(e),10190,{key:e.toString()}),e}function Ty(n,e){return C0(n.databaseId,e.path)}function Pg(n,e){const t=MA(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ke(VA(t))}function PA(n,e){return C0(n.databaseId,e)}function o5(n){const e=MA(n);return e.length===4?jt.emptyPath():VA(e)}function Ay(n){return new jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VA(n){return gt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function sE(n,e,t){return{name:Ty(n,e),fields:t.value.mapValue.fields}}function l5(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:qe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,v){return p.useProto3Json?(gt(v===void 0||typeof v=="string",58123),Wn.fromBase64String(v||"")):(gt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Wn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(p){const v=p.code===void 0?le.UNKNOWN:DA(p.code);return new Ee(v,p.message||"")})(u);t=new jA(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Pg(n,r.document.name),l=Si(r.document.updateTime),u=r.document.createTime?Si(r.document.createTime):ze.min(),d=new Pr({mapValue:{fields:r.document.fields}}),m=lr.newFoundDocument(a,l,u,d),p=r.targetIds||[],v=r.removedTargetIds||[];t=new bf(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Pg(n,r.document),l=r.readTime?Si(r.readTime):ze.min(),u=lr.newNoDocument(a,l),d=r.removedTargetIds||[];t=new bf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Pg(n,r.document),l=r.removedTargetIds||[];t=new bf([],l,a,null)}else{if(!("filter"in e))return qe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new W6(a,l),d=r.targetId;t=new LA(d,u)}}return t}function c5(n,e){let t;if(e instanceof _h)t={update:sE(n,e.key,e.value)};else if(e instanceof A0)t={delete:Ty(n,e.key)};else if(e instanceof Do)t={update:sE(n,e.key,e.data),updateMask:v5(e.fieldMask)};else{if(!(e instanceof K6))return qe(16599,{Vt:e.type});t={verify:Ty(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,u){const d=u.transform;if(d instanceof th)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof nh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof rh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof kf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw qe(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:a5(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:qe(27497)})(n,e.precondition)),t}function u5(n,e){return n&&n.length>0?(gt(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?Si(a.updateTime):Si(l);return u.isEqual(ze.min())&&(u=Si(l)),new F6(u,a.transformResults||[])})(t,e)))):[]}function h5(n,e){return{documents:[PA(n,e.path)]}}function UA(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=PA(n,a);const l=(function(p){if(p.length!==0)return BA(ti.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(p){if(p.length!==0)return p.map((v=>(function(E){return{field:lo(E.field),direction:p5(E.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Ey(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function d5(n,e,t,r){const{ft:a,parent:l}=UA(n,e),u={},d=[];let m=0;return t.forEach((p=>{const v="aggregate_"+m++;u[v]=p.alias,p.aggregateType==="count"?d.push({alias:v,count:{}}):p.aggregateType==="avg"?d.push({alias:v,avg:{field:lo(p.fieldPath)}}):p.aggregateType==="sum"&&d.push({alias:v,sum:{field:lo(p.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:d,structuredQuery:a.structuredQuery},parent:a.parent},gt:u,parent:l}}function f5(n){let e=o5(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){gt(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(x){const E=qA(x);return E instanceof ti&&mA(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(x){return x.map((E=>(function(C){return new eh(rc(C.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(E)))})(t.orderBy));let d=null;t.limit&&(d=(function(x){let E;return E=typeof x=="object"?x.value:x,tm(E)?null:E})(t.limit));let m=null;t.startAt&&(m=(function(x){const E=!!x.before,A=x.values||[];return new jf(A,E)})(t.startAt));let p=null;return t.endAt&&(p=(function(x){const E=!x.before,A=x.values||[];return new jf(A,E)})(t.endAt)),I6(e,a,u,l,d,"F",m,p)}function m5(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=rc(t.unaryFilter.field);return En.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=rc(t.unaryFilter.field);return En.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=rc(t.unaryFilter.field);return En.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=rc(t.unaryFilter.field);return En.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qe(61313);default:return qe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return En.create(rc(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qe(58110);default:return qe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ti.create(t.compositeFilter.filters.map((r=>qA(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return qe(1026)}})(t.compositeFilter.op))})(n):qe(30097,{filter:n})}function p5(n){return n5[n]}function g5(n){return r5[n]}function y5(n){return s5[n]}function lo(n){return{fieldPath:n.canonicalString()}}function rc(n){return Yn.fromServerFormat(n.fieldPath)}function BA(n){return n instanceof En?(function(t){if(t.op==="=="){if(Gx(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NAN"}};if(Fx(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Gx(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NOT_NAN"}};if(Fx(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lo(t.field),op:g5(t.op),value:t.value}}})(n):n instanceof ti?(function(t){const r=t.getFilters().map((a=>BA(a)));return r.length===1?r[0]:{compositeFilter:{op:y5(t.op),filters:r}}})(n):qe(54877,{filter:n})}function v5(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function zA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class ho{constructor(e,t,r,a,l=ze.min(),u=ze.min(),d=Wn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class b5{constructor(e){this.yt=e}}function _5(n){const e=f5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xy(e,e.limit,"L"):e}class x5{constructor(){this.Cn=new E5}addToCollectionParentIndex(e,t){return this.Cn.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(xo.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(xo.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class E5{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Nn(jt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Nn(jt.comparator)).toArray()}}const iE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HA=41943040;class Mr{static withCacheSize(e){return new Mr(e,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}Mr.DEFAULT_COLLECTION_PERCENTILE=10,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mr.DEFAULT=new Mr(HA,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mr.DISABLED=new Mr(-1,0,0);class wc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new wc(0)}static cr(){return new wc(-1)}}const aE="LruGarbageCollector",w5=1048576;function oE([n,e],[t,r]){const a=it(n,t);return a===0?it(e,r):a}class T5{constructor(e){this.Ir=e,this.buffer=new Nn(oE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();oE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class A5{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){we(aE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Pc(t)?we(aE,"Ignoring IndexedDB error during garbage collection: ",t):await Mc(t)}await this.Vr(3e5)}))}}class S5{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return de.resolve(em.ce);const r=new T5(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(iE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,u,d,m,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,u=Date.now(),this.nthSequenceNumber(e,a)))).next((x=>(r=x,d=Date.now(),this.removeTargets(e,r,t)))).next((x=>(l=x,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((x=>(p=Date.now(),tc()<=st.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(d-u)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${x} documents in `+(p-m)+`ms
Total Duration: ${p-v}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:x}))))}}function N5(n,e){return new S5(n,e)}class C5{constructor(){this.changes=new pl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,lr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class R5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class I5{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Fu(r.mutation,a,ns.empty(),Bt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,at()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=at()){const a=nl();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let u=Lu();return l.forEach(((d,m)=>{u=u.insert(d,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=nl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,at())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,r,a){let l=xa();const u=Hu(),d=(function(){return Hu()})();return t.forEach(((m,p)=>{const v=r.get(p.key);a.has(p.key)&&(v===void 0||v.mutation instanceof Do)?l=l.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),Fu(v.mutation,p,v.mutation.getFieldMask(),Bt.now())):u.set(p.key,ns.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,v)=>u.set(p,v))),t.forEach(((p,v)=>d.set(p,new R5(v,u.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Hu();let a=new en(((u,d)=>u-d)),l=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let v=r.get(m)||ns.empty();v=d.applyToLocalView(p,v),r.set(m,v);const x=(a.get(d.batchId)||at()).add(m);a=a.insert(d.batchId,x)}))})).next((()=>{const u=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,v=m.value,x=TA();v.forEach((E=>{if(!l.has(E)){const A=IA(t.get(E),r.get(E));A!==null&&x.set(E,A),l=l.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,x))}return de.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(u){return ke.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):de.resolve(nl());let d=Xu,m=l;return u.next((p=>de.forEach(p,((v,x)=>(d<x.largestBatchId&&(d=x.largestBatchId),l.get(v)?de.resolve():this.remoteDocumentCache.getEntry(e,v).next((E=>{m=m.insert(v,E)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,at()))).next((v=>({batchId:d,changes:wA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next((r=>{let a=Lu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let u=Lu();return this.indexManager.getCollectionParents(e,l).next((d=>de.forEach(d,(m=>{const p=(function(x,E){return new Vc(E,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next((v=>{v.forEach(((x,E)=>{u=u.insert(x,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((u=>{l.forEach(((m,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,lr.newInvalidDocument(v)))}));let d=Lu();return u.forEach(((m,p)=>{const v=l.get(m);v!==void 0&&Fu(v.mutation,p,ns.empty(),Bt.now()),sm(t,p)&&(d=d.insert(m,p))})),d}))}}class O5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return de.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Si(a.createTime)}})(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:_5(a.bundledQuery),readTime:Si(a.readTime)}})(t)),de.resolve()}}class D5{constructor(){this.overlays=new en(ke.comparator),this.qr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=nl();return de.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.St(e,t,l)})),de.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const a=nl(),l=t.length+1,u=new ke(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return de.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new en(((p,v)=>p-v));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=l.get(p.largestBatchId);v===null&&(v=nl(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=nl(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=a)););return de.resolve(d)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Y6(t,r));let l=this.qr.get(t);l===void 0&&(l=at(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}class L5{constructor(){this.sessionToken=Wn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}class R0{constructor(){this.Qr=new Nn(jn.$r),this.Ur=new Nn(jn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new jn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new jn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ke(new jt([])),r=new jn(t,e),a=new jn(t,e+1),l=[];return this.Ur.forEachInRange([r,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ke(new jt([])),r=new jn(t,e),a=new jn(t,e+1);let l=at();return this.Ur.forEachInRange([r,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new jn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class jn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ke.comparator(e.key,t.key)||it(e.Yr,t.Yr)}static Kr(e,t){return it(e.Yr,t.Yr)||ke.comparator(e.key,t.key)}}class j5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Nn(jn.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Q6(l,t,r,a);this.mutationQueue.push(u);for(const d of a)this.Zr=this.Zr.add(new jn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(u)}lookupMutationBatch(e,t){return de.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return de.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?v0:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new jn(t,0),a=new jn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(u=>{const d=this.Xr(u.Yr);l.push(d)})),de.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(it);return t.forEach((a=>{const l=new jn(a,0),u=new jn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(d=>{r=r.add(d.Yr)}))})),de.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ke.isDocumentKey(l)||(l=l.child(""));const u=new jn(new ke(l),0);let d=new Nn(it);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Yr)),!0)}),u),de.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){gt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return de.forEach(t.mutations,(a=>{const l=new jn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new jn(t,0),a=this.Zr.firstAfterOrEqual(r);return de.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class k5{constructor(e){this.ri=e,this.docs=(function(){return new en(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():lr.newInvalidDocument(t))}getEntries(e,t){let r=xa();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():lr.newInvalidDocument(a))})),de.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=xa();const u=t.path,d=new ke(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||o6(a6(v),r)<=0||(a.has(v.key)||sm(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return de.resolve(l)}getAllFromCollectionGroup(e,t,r,a){qe(9500)}ii(e,t){return de.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new M5(this)}getSize(e){return de.resolve(this.size)}}class M5 extends C5{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),de.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class P5{constructor(e){this.persistence=e,this.si=new pl((t=>x0(t)),E0),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.oi=0,this._i=new R0,this.targetCount=0,this.ai=wc.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),de.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new wc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Pr(t),de.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),de.waitFor(l).next((()=>a))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),de.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),de.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this._i.containsKey(t))}}class FA{constructor(e,t){this.ui={},this.overlays={},this.ci=new em(0),this.li=!1,this.li=!0,this.hi=new L5,this.referenceDelegate=e(this),this.Pi=new P5(this),this.indexManager=new x5,this.remoteDocumentCache=(function(a){return new k5(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new b5(t),this.Ii=new O5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new D5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new j5(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){we("MemoryPersistence","Starting transaction:",e);const a=new V5(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return de.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class V5 extends c6{constructor(e){super(),this.currentSequenceNumber=e}}class I0{constructor(e){this.persistence=e,this.Ri=new R0,this.Vi=null}static mi(e){return new I0(e)}get fi(){if(this.Vi)return this.Vi;throw qe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(r=>{const a=ke.fromPath(r);return this.gi(e,a).next((l=>{l||t.removeEntry(a,ze.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return de.or([()=>de.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Pf{constructor(e,t){this.persistence=e,this.pi=new pl((r=>d6(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=N5(this,t)}static mi(e,t){return new Pf(e,t)}Ei(){}di(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return de.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?de.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((d=>{d||(r++,l.removeEntry(u,ze.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gf(e.data.value)),t}br(e,t,r){return de.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return de.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class O0{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=at(),a=at();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new O0(e,t.fromCache,r,a)}}class U5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class q5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return d4()?8:u6(ur())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,r).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new U5;return this.Ss(e,t,u).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>l.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(tc()<=st.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",nc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(tc()<=st.DEBUG&&we("QueryEngine","Query:",nc(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(tc()<=st.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",nc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ai(t))):de.resolve())}ys(e,t){if(Yx(t))return de.resolve(null);let r=Ai(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=xy(t,null,"F"),r=Ai(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const u=at(...l);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((m=>{const p=this.Ds(t,d);return this.Cs(t,p,u,m.readTime)?this.ys(e,xy(t,null,"F")):this.vs(e,p,t,m)}))))})))))}ws(e,t,r,a){return Yx(t)||a.isEqual(ze.min())?de.resolve(null):this.ps.getDocuments(e,r).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,r,a)?de.resolve(null):(tc()<=st.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),nc(t)),this.vs(e,u,t,i6(a,Xu)).next((d=>d)))}))}Ds(e,t){let r=new Nn(xA(e));return t.forEach(((a,l)=>{sm(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return tc()<=st.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",nc(t)),this.ps.getDocumentsMatchingQuery(e,t,xo.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}const D0="LocalStore",B5=3e8;class z5{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new en(it),this.xs=new pl((l=>x0(l)),E0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function H5(n,e,t,r){return new z5(n,e,t,r)}async function GA(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const u=[],d=[];let m=at();for(const p of a){u.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of l){d.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(r,m).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:d})))}))}))}function F5(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,p,v){const x=p.batch,E=x.keys();let A=de.resolve();return E.forEach((C=>{A=A.next((()=>v.getEntry(m,C))).next((L=>{const I=p.docVersions.get(C);gt(I!==null,48541),L.version.compareTo(I)<0&&(x.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),v.addEntry(L)))}))})),A.next((()=>d.mutationQueue.removeMutationBatch(m,x)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let m=at();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function $A(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function G5(n,e){const t=Be(n),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((v,x)=>{const E=a.get(x);if(!E)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,x).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,x))));let A=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?A=A.withResumeToken(Wn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,r)),a=a.insert(x,A),(function(L,I,B){return L.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=B5?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(E,A,v)&&d.push(t.Pi.updateTargetData(l,A))}));let m=xa(),p=at();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push($5(l,u,e.documentUpdates).next((v=>{m=v.ks,p=v.qs}))),!r.isEqual(ze.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((x=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(v)}return de.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function $5(n,e,t){let r=at(),a=at();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let u=xa();return t.forEach(((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(ze.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):we(D0,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)})),{ks:u,qs:a}}))}function K5(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=v0),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Q5(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((l=>l?(a=l,de.resolve(a)):t.Pi.allocateTargetId(r).next((u=>(a=new ho(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Sy(n,e,t){const r=Be(n),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Pc(u))throw u;we(D0,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function lE(n,e,t){const r=Be(n);let a=ze.min(),l=at();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,p,v){const x=Be(m),E=x.xs.get(v);return E!==void 0?de.resolve(x.Ms.get(E)):x.Pi.getTargetData(p,v)})(r,u,Ai(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,d.targetId).next((m=>{l=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,t?a:ze.min(),t?l:at()))).next((d=>(Y5(r,D6(e),d),{documents:d,Qs:l})))))}function Y5(n,e,t){let r=n.Os.get(e)||ze.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Os.set(e,r)}class cE{constructor(){this.activeTargetIds=V6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class X5{constructor(){this.Mo=new cE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new cE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class W5{Oo(e){}shutdown(){}}const uE="ConnectivityMonitor";class hE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){we(uE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){we(uE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Yd=null;function Ny(){return Yd===null?Yd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yd++,"0x"+Yd.toString(16)}const Vg="RestConnection",Z5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class J5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===Df?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const u=Ny(),d=this.zo(e,t.toUriEncodedString());we(Vg,`Sending RPC '${e}' ${u}:`,d,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:p}=new URL(d),v=Dc(p);return this.Jo(e,d,m,r,v).then((x=>(we(Vg,`Received RPC '${e}' ${u}: `,x),x)),(x=>{throw bc(Vg,`RPC '${e}' ${u} failed with error: `,x,"url: ",d,"request:",r),x}))}Ho(e,t,r,a,l,u){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const r=Z5[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class eD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ar="WebChannelConnection";class tD extends J5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const u=Ny();return new Promise(((d,m)=>{const p=new KT;p.setWithCredentials(!0),p.listenOnce(QT.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case pf.NO_ERROR:const x=p.getResponseJson();we(ar,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),d(x);break;case pf.TIMEOUT:we(ar,`RPC '${e}' ${u} timed out`),m(new Ee(le.DEADLINE_EXCEEDED,"Request time out"));break;case pf.HTTP_ERROR:const E=p.getStatus();if(we(ar,`RPC '${e}' ${u} failed with status:`,E,"response text:",p.getResponseText()),E>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const C=A?.error;if(C&&C.status&&C.message){const L=(function(B){const $=B.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf($)>=0?$:le.UNKNOWN})(C.status);m(new Ee(L,C.message))}else m(new Ee(le.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new Ee(le.UNAVAILABLE,"Connection failed."));break;default:qe(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{we(ar,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);we(ar,`RPC '${e}' ${u} sending request:`,a),p.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=Ny(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=WT(),d=XT(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=l.join("");we(ar,`Creating RPC '${e}' stream ${a}: ${v}`,m);const x=u.createWebChannel(v,m);this.I_(x);let E=!1,A=!1;const C=new eD({Yo:I=>{A?we(ar,`Not sending because RPC '${e}' stream ${a} is closed:`,I):(E||(we(ar,`Opening RPC '${e}' stream ${a} transport.`),x.open(),E=!0),we(ar,`RPC '${e}' stream ${a} sending:`,I),x.send(I))},Zo:()=>x.close()}),L=(I,B,$)=>{I.listen(B,(Y=>{try{$(Y)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return L(x,Du.EventType.OPEN,(()=>{A||(we(ar,`RPC '${e}' stream ${a} transport opened.`),C.o_())})),L(x,Du.EventType.CLOSE,(()=>{A||(A=!0,we(ar,`RPC '${e}' stream ${a} transport closed`),C.a_(),this.E_(x))})),L(x,Du.EventType.ERROR,(I=>{A||(A=!0,bc(ar,`RPC '${e}' stream ${a} transport errored. Name:`,I.name,"Message:",I.message),C.a_(new Ee(le.UNAVAILABLE,"The operation could not be completed")))})),L(x,Du.EventType.MESSAGE,(I=>{if(!A){const B=I.data[0];gt(!!B,16349);const $=B,Y=$?.error||$[0]?.error;if(Y){we(ar,`RPC '${e}' stream ${a} received error:`,Y);const ee=Y.status;let fe=(function(j){const P=xn[j];if(P!==void 0)return DA(P)})(ee),xe=Y.message;fe===void 0&&(fe=le.INTERNAL,xe="Unknown error status: "+ee+" with message "+Y.message),A=!0,C.a_(new Ee(fe,xe)),x.close()}else we(ar,`RPC '${e}' stream ${a} received:`,B),C.u_(B)}})),L(d,YT.STAT_EVENT,(I=>{I.stat===my.PROXY?we(ar,`RPC '${e}' stream ${a} detected buffering proxy`):I.stat===my.NOPROXY&&we(ar,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ug(){return typeof document<"u"?document:null}function lm(n){return new i5(n,!0)}class KA{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&we("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const dE="PersistentStream";class QA{constructor(e,t,r,a,l,u,d,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new KA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(_a(t.toString()),_a("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new Ee(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(dE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(we(dE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nD extends QA{constructor(e,t,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=l5(this.serializer,e),r=(function(l){if(!("targetChange"in l))return ze.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?ze.min():u.readTime?Si(u.readTime):ze.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Ay(this.serializer),t.addTarget=(function(l,u){let d;const m=u.target;if(d=by(m)?{documents:h5(l,m)}:{query:UA(l,m).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=kA(l,u.resumeToken);const p=Ey(l,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(ze.min())>0){d.readTime=Mf(l,u.snapshotVersion.toTimestamp());const p=Ey(l,u.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const r=m5(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Ay(this.serializer),t.removeTarget=e,this.q_(t)}}class rD extends QA{constructor(e,t,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return gt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){gt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=u5(e.writeResults,e.commitTime),r=Si(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Ay(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>c5(this.serializer,r)))};this.q_(t)}}class sD{}class iD extends sD{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,wy(t,r),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ee(le.UNKNOWN,l.toString())}))}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,wy(t,r),a,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ee(le.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class aD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_a(t),this.aa=!1):we("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const cl="RemoteStore";class oD{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{gl(this)&&(we(cl,"Restarting streams for network reachability change."),await(async function(m){const p=Be(m);p.Ea.add(4),await Eh(p),p.Ra.set("Unknown"),p.Ea.delete(4),await cm(p)})(this))}))})),this.Ra=new aD(r,a)}}async function cm(n){if(gl(n))for(const e of n.da)await e(!0)}async function Eh(n){for(const e of n.da)await e(!1)}function YA(n,e){const t=Be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),M0(t)?k0(t):Uc(t).O_()&&j0(t,e))}function L0(n,e){const t=Be(n),r=Uc(t);t.Ia.delete(e),r.O_()&&XA(t,e),t.Ia.size===0&&(r.O_()?r.L_():gl(t)&&t.Ra.set("Unknown"))}function j0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uc(n).Y_(e)}function XA(n,e){n.Va.Ue(e),Uc(n).Z_(e)}function k0(n){n.Va=new t5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Uc(n).start(),n.Ra.ua()}function M0(n){return gl(n)&&!Uc(n).x_()&&n.Ia.size>0}function gl(n){return Be(n).Ea.size===0}function WA(n){n.Va=void 0}async function lD(n){n.Ra.set("Online")}async function cD(n){n.Ia.forEach(((e,t)=>{j0(n,e)}))}async function uD(n,e){WA(n),M0(n)?(n.Ra.ha(e),k0(n)):n.Ra.set("Unknown")}async function hD(n,e,t){if(n.Ra.set("Online"),e instanceof jA&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,u),a.Ia.delete(d),a.Va.removeTarget(d))})(n,e)}catch(r){we(cl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vf(n,r)}else if(e instanceof bf?n.Va.Ze(e):e instanceof LA?n.Va.st(e):n.Va.tt(e),!t.isEqual(ze.min()))try{const r=await $A(n.localStore);t.compareTo(r)>=0&&await(function(l,u){const d=l.Va.Tt(u);return d.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ia.get(p);v&&l.Ia.set(p,v.withResumeToken(m.resumeToken,u))}})),d.targetMismatches.forEach(((m,p)=>{const v=l.Ia.get(m);if(!v)return;l.Ia.set(m,v.withResumeToken(Wn.EMPTY_BYTE_STRING,v.snapshotVersion)),XA(l,m);const x=new ho(v.target,m,p,v.sequenceNumber);j0(l,x)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){we(cl,"Failed to raise snapshot:",r),await Vf(n,r)}}async function Vf(n,e,t){if(!Pc(e))throw e;n.Ea.add(1),await Eh(n),n.Ra.set("Offline"),t||(t=()=>$A(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{we(cl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await cm(n)}))}function ZA(n,e){return e().catch((t=>Vf(n,t,e)))}async function um(n){const e=Be(n),t=Ao(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:v0;for(;dD(e);)try{const a=await K5(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,fD(e,a)}catch(a){await Vf(e,a)}JA(e)&&eS(e)}function dD(n){return gl(n)&&n.Ta.length<10}function fD(n,e){n.Ta.push(e);const t=Ao(n);t.O_()&&t.X_&&t.ea(e.mutations)}function JA(n){return gl(n)&&!Ao(n).x_()&&n.Ta.length>0}function eS(n){Ao(n).start()}async function mD(n){Ao(n).ra()}async function pD(n){const e=Ao(n);for(const t of n.Ta)e.ea(t.mutations)}async function gD(n,e,t){const r=n.Ta.shift(),a=S0.from(r,e,t);await ZA(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await um(n)}async function yD(n,e){e&&Ao(n).X_&&await(async function(r,a){if((function(u){return Z6(u)&&u!==le.ABORTED})(a.code)){const l=r.Ta.shift();Ao(r).B_(),await ZA(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await um(r)}})(n,e),JA(n)&&eS(n)}async function fE(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),we(cl,"RemoteStore received new credentials");const r=gl(t);t.Ea.add(3),await Eh(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await cm(t)}async function vD(n,e){const t=Be(n);e?(t.Ea.delete(2),await cm(t)):e||(t.Ea.add(2),await Eh(t),t.Ra.set("Unknown"))}function Uc(n){return n.ma||(n.ma=(function(t,r,a){const l=Be(t);return l.sa(),new nD(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:lD.bind(null,n),t_:cD.bind(null,n),r_:uD.bind(null,n),H_:hD.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),M0(n)?k0(n):n.Ra.set("Unknown")):(await n.ma.stop(),WA(n))}))),n.ma}function Ao(n){return n.fa||(n.fa=(function(t,r,a){const l=Be(t);return l.sa(),new rD(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:mD.bind(null,n),r_:yD.bind(null,n),ta:pD.bind(null,n),na:gD.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await um(n)):(await n.fa.stop(),n.Ta.length>0&&(we(cl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class P0{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const u=Date.now()+r,d=new P0(e,t,u,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function V0(n,e){if(_a("AsyncQueue",`${e}: ${n}`),Pc(n))return new Ee(le.UNAVAILABLE,`${e}: ${n}`);throw n}class dc{static emptySet(e){return new dc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ke.comparator(t.key,r.key):(t,r)=>ke.comparator(t.key,r.key),this.keyedMap=Lu(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new dc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class mE{constructor(){this.ga=new en(ke.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):qe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Tc{constructor(e,t,r,a,l,u,d,m,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Tc(e,t,dc.emptySet(t),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class bD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class _D{constructor(){this.queries=pE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=Be(t),l=a.queries;a.queries=pE(),l.forEach(((u,d)=>{for(const m of d.Sa)m.onError(r)}))})(this,new Ee(le.ABORTED,"Firestore shutting down"))}}function pE(){return new pl((n=>_A(n)),rm)}async function tS(n,e){const t=Be(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new bD,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const d=V0(u,`Initialization of query '${nc(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&U0(t)}async function nS(n,e){const t=Be(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function xD(n,e){const t=Be(n);let r=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const d of u.Sa)d.Fa(a)&&(r=!0);u.wa=a}}r&&U0(t)}function ED(n,e,t){const r=Be(n),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function U0(n){n.Ca.forEach((e=>{e.next()}))}var Cy,gE;(gE=Cy||(Cy={})).Ma="default",gE.Cache="cache";class rS{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Tc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cy.Cache}}class sS{constructor(e){this.key=e}}class iS{constructor(e){this.key=e}}class wD{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=at(),this.mutatedKeys=at(),this.eu=xA(e),this.tu=new dc(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new mE,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,x)=>{const E=a.get(v),A=sm(this.query,x)?x:null,C=!!E&&this.mutatedKeys.has(E.key),L=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let I=!1;E&&A?E.data.isEqual(A.data)?C!==L&&(r.track({type:3,doc:A}),I=!0):this.su(E,A)||(r.track({type:2,doc:A}),I=!0,(m&&this.eu(A,m)>0||p&&this.eu(A,p)<0)&&(d=!0)):!E&&A?(r.track({type:0,doc:A}),I=!0):E&&!A&&(r.track({type:1,doc:E}),I=!0,(m||p)&&(d=!0)),I&&(A?(u=u.add(A),l=L?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:u,iu:r,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,x)=>(function(A,C){const L=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qe(20277,{Rt:I})}};return L(A)-L(C)})(v.type,x.type)||this.eu(v.doc,x.doc))),this.ou(r),a=a??!1;const d=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,p=m!==this.Za;return this.Za=m,u.length!==0||p?{snapshot:new Tc(this.query,e.tu,l,u,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=at(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new iS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new sS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=at();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Tc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const q0="SyncEngine";class TD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class AD{constructor(e){this.key=e,this.hu=!1}}class SD{constructor(e,t,r,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new pl((d=>_A(d)),rm),this.Iu=new Map,this.Eu=new Set,this.du=new en(ke.comparator),this.Au=new Map,this.Ru=new R0,this.Vu={},this.mu=new Map,this.fu=wc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ND(n,e,t=!0){const r=hS(n);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await aS(r,e,t,!0),a}async function CD(n,e){const t=hS(n);await aS(t,e,!0,!1)}async function aS(n,e,t,r){const a=await Q5(n.localStore,Ai(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await RD(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&YA(n.remoteStore,a),d}async function RD(n,e,t,r,a){n.pu=(x,E,A)=>(async function(L,I,B,$){let Y=I.view.ru(B);Y.Cs&&(Y=await lE(L.localStore,I.query,!1).then((({documents:M})=>I.view.ru(M,Y))));const ee=$&&$.targetChanges.get(I.targetId),fe=$&&$.targetMismatches.get(I.targetId)!=null,xe=I.view.applyChanges(Y,L.isPrimaryClient,ee,fe);return vE(L,I.targetId,xe.au),xe.snapshot})(n,x,E,A);const l=await lE(n.localStore,e,!0),u=new wD(e,l.Qs),d=u.ru(l.documents),m=xh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),p=u.applyChanges(d,n.isPrimaryClient,m);vE(n,t,p.au);const v=new TD(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function ID(n,e,t){const r=Be(n),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((u=>!rm(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Sy(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&L0(r.remoteStore,a.targetId),Ry(r,a.targetId)})).catch(Mc)):(Ry(r,a.targetId),await Sy(r.localStore,a.targetId,!0))}async function OD(n,e){const t=Be(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),L0(t.remoteStore,r.targetId))}async function DD(n,e,t){const r=UD(n);try{const a=await(function(u,d){const m=Be(u),p=Bt.now(),v=d.reduce(((A,C)=>A.add(C.key)),at());let x,E;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let C=xa(),L=at();return m.Ns.getEntries(A,v).next((I=>{C=I,C.forEach(((B,$)=>{$.isValidDocument()||(L=L.add(B))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,C))).next((I=>{x=I;const B=[];for(const $ of d){const Y=$6($,x.get($.key).overlayedDocument);Y!=null&&B.push(new Do($.key,Y,hA(Y.value.mapValue),Os.exists(!0)))}return m.mutationQueue.addMutationBatch(A,p,B,d)})).next((I=>{E=I;const B=I.applyToLocalDocumentSet(x,L);return m.documentOverlayCache.saveOverlays(A,I.batchId,B)}))})).then((()=>({batchId:E.batchId,changes:wA(x)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,d,m){let p=u.Vu[u.currentUser.toKey()];p||(p=new en(it)),p=p.insert(d,m),u.Vu[u.currentUser.toKey()]=p})(r,a.batchId,t),await wh(r,a.changes),await um(r.remoteStore)}catch(a){const l=V0(a,"Failed to persist write");t.reject(l)}}async function oS(n,e){const t=Be(n);try{const r=await G5(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(gt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?gt(u.hu,14607):a.removedDocuments.size>0&&(gt(u.hu,42227),u.hu=!1))})),await wh(t,r,e)}catch(r){await Mc(r)}}function yE(n,e,t){const r=Be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(u,d){const m=Be(u);m.onlineState=d;let p=!1;m.queries.forEach(((v,x)=>{for(const E of x.Sa)E.va(d)&&(p=!0)})),p&&U0(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function LD(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let u=new en(ke.comparator);u=u.insert(l,lr.newNoDocument(l,ze.min()));const d=at().add(l),m=new om(ze.min(),new Map,new en(it),u,d);await oS(r,m),r.du=r.du.remove(l),r.Au.delete(e),B0(r)}else await Sy(r.localStore,e,!1).then((()=>Ry(r,e,t))).catch(Mc)}async function jD(n,e){const t=Be(n),r=e.batch.batchId;try{const a=await F5(t.localStore,e);cS(t,r,null),lS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await wh(t,a)}catch(a){await Mc(a)}}async function kD(n,e,t){const r=Be(n);try{const a=await(function(u,d){const m=Be(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return m.mutationQueue.lookupMutationBatch(p,d).next((x=>(gt(x!==null,37113),v=x.keys(),m.mutationQueue.removeMutationBatch(p,x)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>m.localDocuments.getDocuments(p,v)))}))})(r.localStore,e);cS(r,e,t),lS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await wh(r,a)}catch(a){await Mc(a)}}function lS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function cS(n,e,t){const r=Be(n);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function Ry(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||uS(n,r)}))}function uS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(L0(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),B0(n))}function vE(n,e,t){for(const r of t)r instanceof sS?(n.Ru.addReference(r.key,e),MD(n,r)):r instanceof iS?(we(q0,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||uS(n,r.key)):qe(19791,{wu:r})}function MD(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(we(q0,"New document in limbo: "+t),n.Eu.add(r),B0(n))}function B0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ke(jt.fromString(e)),r=n.fu.next();n.Au.set(r,new AD(t)),n.du=n.du.insert(t,r),YA(n.remoteStore,new ho(Ai(w0(t.path)),r,"TargetPurposeLimboResolution",em.ce))}}async function wh(n,e,t){const r=Be(n),a=[],l=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,m)=>{u.push(r.pu(m,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){a.push(p);const v=O0.As(m.targetId,p);l.push(v)}})))})),await Promise.all(u),r.Pu.H_(a),await(async function(m,p){const v=Be(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>de.forEach(p,(E=>de.forEach(E.Es,(A=>v.persistence.referenceDelegate.addReference(x,E.targetId,A))).next((()=>de.forEach(E.ds,(A=>v.persistence.referenceDelegate.removeReference(x,E.targetId,A)))))))))}catch(x){if(!Pc(x))throw x;we(D0,"Failed to update sequence numbers: "+x)}for(const x of p){const E=x.targetId;if(!x.fromCache){const A=v.Ms.get(E),C=A.snapshotVersion,L=A.withLastLimboFreeSnapshotVersion(C);v.Ms=v.Ms.insert(E,L)}}})(r.localStore,l))}async function PD(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){we(q0,"User change. New user:",e.toKey());const r=await GA(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new Ee(le.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wh(t,r.Ls)}}function VD(n,e){const t=Be(n),r=t.Au.get(e);if(r&&r.hu)return at().add(r.key);{let a=at();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const d=t.Tu.get(u);a=a.unionWith(d.view.nu)}return a}}function hS(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LD.bind(null,e),e.Pu.H_=xD.bind(null,e.eventManager),e.Pu.yu=ED.bind(null,e.eventManager),e}function UD(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kD.bind(null,e),e}class Uf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return H5(this.persistence,new q5,e.initialUser,this.serializer)}Cu(e){return new FA(I0.mi,this.serializer)}Du(e){return new X5}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uf.provider={build:()=>new Uf};class qD extends Uf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){gt(this.persistence.referenceDelegate instanceof Pf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new A5(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Mr.withCacheSize(this.cacheSizeBytes):Mr.DEFAULT;return new FA((r=>Pf.mi(r,t)),this.serializer)}}class Iy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PD.bind(null,this.syncEngine),await vD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _D})()}createDatastore(e){const t=lm(e.databaseInfo.databaseId),r=(function(l){return new tD(l)})(e.databaseInfo);return(function(l,u,d,m){return new iD(l,u,d,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,u,d){return new oD(r,a,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>yE(this.syncEngine,t,0)),(function(){return hE.v()?new hE:new W5})())}createSyncEngine(e,t){return(function(a,l,u,d,m,p,v){const x=new SD(a,l,u,d,m,p);return v&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Be(t);we(cl,"RemoteStore shutting down."),r.Ea.add(5),await Eh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Iy.provider={build:()=>new Iy};class dS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_a("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const So="FirestoreClient";class BD{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=or.UNAUTHENTICATED,this.clientId=y0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async u=>{we(So,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(we(So,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=V0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function qg(n,e){n.asyncQueue.verifyOperationInProgress(),we(So,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await GA(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function bE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zD(n);we(So,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>fE(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>fE(e.remoteStore,a))),n._onlineComponents=e}async function zD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we(So,"Using user provided OfflineComponentProvider");try{await qg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===le.FAILED_PRECONDITION||a.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;bc("Error using user provided cache. Falling back to memory cache: "+t),await qg(n,new Uf)}}else we(So,"Using default OfflineComponentProvider"),await qg(n,new qD(void 0));return n._offlineComponents}async function z0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we(So,"Using user provided OnlineComponentProvider"),await bE(n,n._uninitializedComponentsProvider._online)):(we(So,"Using default OnlineComponentProvider"),await bE(n,new Iy))),n._onlineComponents}function HD(n){return z0(n).then((e=>e.syncEngine))}function FD(n){return z0(n).then((e=>e.datastore))}async function fS(n){const e=await z0(n),t=e.eventManager;return t.onListen=ND.bind(null,e.syncEngine),t.onUnlisten=ID.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=CD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=OD.bind(null,e.syncEngine),t}function GD(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,m,p){const v=new dS({next:E=>{v.Nu(),u.enqueueAndForget((()=>nS(l,x)));const A=E.docs.has(d);!A&&E.fromCache?p.reject(new Ee(le.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&m&&m.source==="server"?p.reject(new Ee(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),x=new rS(w0(d.path),v,{includeMetadataChanges:!0,qa:!0});return tS(l,x)})(await fS(n),n.asyncQueue,e,t,r))),r.promise}function $D(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,m,p){const v=new dS({next:E=>{v.Nu(),u.enqueueAndForget((()=>nS(l,x))),E.fromCache&&m.source==="server"?p.reject(new Ee(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),x=new rS(d,v,{includeMetadataChanges:!0,qa:!0});return tS(l,x)})(await fS(n),n.asyncQueue,e,t,r))),r.promise}function KD(n,e,t){const r=new Ti;return n.asyncQueue.enqueueAndForget((async()=>{try{const a=await FD(n);r.resolve((async function(u,d,m){const p=Be(u),{request:v,gt:x,parent:E}=d5(p.serializer,O6(d),m);p.connection.$o||delete v.parent;const A=(await p.Ho("RunAggregationQuery",p.serializer.databaseId,E,v,1)).filter((L=>!!L.result));gt(A.length===1,64727);const C=A[0].result?.aggregateFields;return Object.keys(C).reduce(((L,I)=>(L[x[I]]=C[I],L)),{})})(a,e,t))}catch(a){r.reject(a)}})),r.promise}function mS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const _E=new Map;const pS="firestore.googleapis.com",xE=!0;class EE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pS,this.ssl=xE}else this.host=e.host,this.ssl=e.ssl??xE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<w5)throw new Ee(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}s6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hm{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new QO;switch(r.type){case"firstParty":return new ZO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=_E.get(t);r&&(we("ComponentProvider","Removing Datastore"),_E.delete(t),r.terminate())})(this),Promise.resolve()}}function QD(n,e,t,r={}){n=Ls(n,hm);const a=Dc(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;a&&(sT(`https://${d}`),iT("Firestore",!0)),l.host!==pS&&l.host!==d&&bc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:a,emulatorOptions:r};if(!sl(m,u)&&(n._setSettings(m),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=or.MOCK_USER;else{p=r4(r.mockUserToken,n._app?.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new Ee(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new or(x)}n._authCredentials=new YO(new JT(p,v))}}class yl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yl(this.firestore,e,this._query)}}class mn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}toJSON(){return{type:mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(bh(t,mn._jsonSchema))return new mn(e,r||null,new ke(jt.fromString(t.referencePath)))}}mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:wn("string",mn._jsonSchemaVersion),referencePath:wn("string")};class vo extends yl{constructor(e,t,r){super(e,t,w0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new ke(e))}withConverter(e){return new vo(this.firestore,e,this._path)}}function St(n,e,...t){if(n=Cn(n),eA("collection","path",e),n instanceof hm){const r=jt.fromString(e,...t);return kx(r),new vo(n,null,r)}{if(!(n instanceof mn||n instanceof vo))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(jt.fromString(e,...t));return kx(r),new vo(n.firestore,null,r)}}function vt(n,e,...t){if(n=Cn(n),arguments.length===1&&(e=y0.newId()),eA("doc","path",e),n instanceof hm){const r=jt.fromString(e,...t);return jx(r),new mn(n,null,new ke(r))}{if(!(n instanceof mn||n instanceof vo))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(jt.fromString(e,...t));return jx(r),new mn(n.firestore,n instanceof vo?n.converter:null,new ke(r))}}const wE="AsyncQueue";class TE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new KA(this,"async_queue_retry"),this._c=()=>{const r=Ug();r&&we(wE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ug();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ug();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ti;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Pc(e))throw e;we(wE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,_a("INTERNAL UNHANDLED ERROR: ",AE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=P0.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&qe(47125,{Pc:AE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function AE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Lo extends hm{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new TE,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TE(e),this._firestoreClient=void 0,await e}}}function YD(n,e){const t=typeof n=="object"?n:cT(),r=typeof n=="string"?n:Df,a=i0(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=t4("firestore");l&&QD(a,...l)}return a}function dm(n){if(n._terminated)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||XD(n),n._firestoreClient}function XD(n){const e=n._freezeSettings(),t=(function(a,l,u,d){return new g6(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,mS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new BD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}class WD{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class ZD{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Cs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cs(Wn.fromBase64String(e))}catch(t){throw new Ee(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cs(Wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bh(e,Cs._jsonSchema))return Cs.fromBase64String(e.bytes)}}Cs._jsonSchemaVersion="firestore/bytes/1.0",Cs._jsonSchema={type:wn("string",Cs._jsonSchemaVersion),bytes:wn("string")};class fm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mm{constructor(e){this._methodName=e}}class Ni{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ni._jsonSchemaVersion}}static fromJSON(e){if(bh(e,Ni._jsonSchema))return new Ni(e.latitude,e.longitude)}}Ni._jsonSchemaVersion="firestore/geoPoint/1.0",Ni._jsonSchema={type:wn("string",Ni._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};class Ci{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bh(e,Ci._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ci(e.vectorValues);throw new Ee(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ci._jsonSchemaVersion="firestore/vectorValue/1.0",Ci._jsonSchema={type:wn("string",Ci._jsonSchemaVersion),vectorValues:wn("object")};const JD=/^__.*__$/;class eL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Do(e,this.data,this.fieldMask,t,this.fieldTransforms):new _h(e,this.data,t,this.fieldTransforms)}}class gS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Do(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qe(40011,{Ac:n})}}class H0{constructor(e,t,r,a,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new H0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(yS(this.Ac)&&JD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class tL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||lm(e)}Cc(e,t,r,a=!1){return new H0({Ac:e,methodName:t,Dc:r,path:Yn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pm(n){const e=n._freezeSettings(),t=lm(n._databaseId);return new tL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vS(n,e,t,r,a,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);G0("Data must be an object, but it was:",u,r);const d=bS(r,u);let m,p;if(l.merge)m=new ns(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const x of l.mergeFields){const E=Oy(e,x,t);if(!u.contains(E))throw new Ee(le.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);xS(v,E)||v.push(E)}m=new ns(v),p=u.fieldTransforms.filter((x=>m.covers(x.field)))}else m=null,p=u.fieldTransforms;return new eL(new Pr(d),m,p)}class gm extends mm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gm}}class F0 extends mm{_toFieldTransform(e){return new z6(e.path,new th)}isEqual(e){return e instanceof F0}}function nL(n,e,t,r){const a=n.Cc(1,e,t);G0("Data must be an object, but it was:",a,r);const l=[],u=Pr.empty();Oo(r,((m,p)=>{const v=$0(e,m,t);p=Cn(p);const x=a.yc(v);if(p instanceof gm)l.push(v);else{const E=Th(p,x);E!=null&&(l.push(v),u.set(v,E))}}));const d=new ns(l);return new gS(u,d,a.fieldTransforms)}function rL(n,e,t,r,a,l){const u=n.Cc(1,e,t),d=[Oy(e,r,t)],m=[a];if(l.length%2!=0)throw new Ee(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)d.push(Oy(e,l[E])),m.push(l[E+1]);const p=[],v=Pr.empty();for(let E=d.length-1;E>=0;--E)if(!xS(p,d[E])){const A=d[E];let C=m[E];C=Cn(C);const L=u.yc(A);if(C instanceof gm)p.push(A);else{const I=Th(C,L);I!=null&&(p.push(A),v.set(A,I))}}const x=new ns(p);return new gS(v,x,u.fieldTransforms)}function sL(n,e,t,r=!1){return Th(t,n.Cc(r?4:3,e))}function Th(n,e){if(_S(n=Cn(n)))return G0("Unsupported field value:",e,n),bS(n,e);if(n instanceof mm)return(function(r,a){if(!yS(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let u=0;for(const d of r){let m=Th(d,a.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}})(n,e)}return(function(r,a){if((r=Cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return U6(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Bt.fromDate(r);return{timestampValue:Mf(a.serializer,l)}}if(r instanceof Bt){const l=new Bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mf(a.serializer,l)}}if(r instanceof Ni)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cs)return{bytesValue:kA(a.serializer,r._byteString)};if(r instanceof mn){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:C0(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Ci)return(function(u,d){return{mapValue:{fields:{[cA]:{stringValue:uA},[Lf]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return T0(d.serializer,p)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${Jf(r)}`)})(n,e)}function bS(n,e){const t={};return rA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oo(n,((r,a)=>{const l=Th(a,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function _S(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Bt||n instanceof Ni||n instanceof Cs||n instanceof mn||n instanceof mm||n instanceof Ci)}function G0(n,e,t){if(!_S(t)||!tA(t)){const r=Jf(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Oy(n,e,t){if((e=Cn(e))instanceof fm)return e._internalPath;if(typeof e=="string")return $0(n,e);throw qf("Field path arguments must be of type string or ",n,!1,void 0,t)}const iL=new RegExp("[~\\*/\\[\\]]");function $0(n,e,t){if(e.search(iL)>=0)throw qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fm(...e.split("."))._internalPath}catch{throw qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qf(n,e,t,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${r}`),u&&(m+=` in document ${a}`),m+=")"),new Ee(le.INVALID_ARGUMENT,d+n+m)}function xS(n,e){return n.some((t=>t.isEqual(e)))}class ES{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ym("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class aL extends ES{data(){return super.data()}}function ym(n,e){return typeof e=="string"?$0(n,e):e instanceof fm?e._internalPath:e._delegate._internalPath}function oL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ee(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class K0{}class wS extends K0{}function ri(n,e,...t){let r=[];e instanceof K0&&r.push(e),r=r.concat(t),(function(l){const u=l.filter((m=>m instanceof Q0)).length,d=l.filter((m=>m instanceof vm)).length;if(u>1||u>0&&d>0)throw new Ee(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class vm extends wS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new vm(e,t,r)}_apply(e){const t=this._parse(e);return AS(e._query,t),new yl(e.firestore,e.converter,_y(e._query,t))}_parse(e){const t=pm(e.firestore);return(function(l,u,d,m,p,v,x){let E;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ee(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){NE(x,v);const C=[];for(const L of x)C.push(SE(m,l,L));E={arrayValue:{values:C}}}else E=SE(m,l,x)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||NE(x,v),E=sL(d,u,x,v==="in"||v==="not-in");return En.create(p,v,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function TS(n,e,t){const r=e,a=ym("where",n);return vm._create(a,r,t)}class Q0 extends K0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Q0(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ti.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const d=l.getFlattenedFilters();for(const m of d)AS(u,m),u=_y(u,m)})(e._query,t),new yl(e.firestore,e.converter,_y(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Y0 extends wS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Y0(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new Ee(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ee(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eh(l,u)})(e._query,this._field,this._direction);return new yl(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new Vc(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Sa(n,e="asc"){const t=e,r=ym("orderBy",n);return Y0._create(r,t)}function SE(n,e,t){if(typeof(t=Cn(t))=="string"){if(t==="")throw new Ee(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vA(e)&&t.indexOf("/")!==-1)throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(jt.fromString(t));if(!ke.isDocumentKey(r))throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hx(n,new ke(r))}if(t instanceof mn)return Hx(n,t._key);throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jf(t)}.`)}function NE(n,e){if(!Array.isArray(n)||n.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AS(n,e){const t=(function(a,l){for(const u of a)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ee(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lL{convertValue(e,t="none"){switch(To(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Oo(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[Lf].arrayValue?.values?.map((r=>fn(r.doubleValue)));return new Ci(t)}convertGeoPoint(e){return new Ni(fn(e.latitude),fn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const t=Eo(e);return new Bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=jt.fromString(e);gt(zA(r),9688,{name:e});const a=new Zu(r.get(1),r.get(3)),l=new ke(r.popFirst(5));return a.isEqual(t)||_a(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function SS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}function cL(){return new WD("count")}class ku{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rl extends ES{constructor(e,t,r,a,l,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ym("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=rl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}rl._jsonSchemaVersion="firestore/documentSnapshot/1.0",rl._jsonSchema={type:wn("string",rl._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class _f extends rl{data(e={}){return super.data(e)}}class fc{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ku(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new _f(this._firestore,this._userDataWriter,r.key,r,new ku(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((d=>{const m=new _f(a._firestore,a._userDataWriter,d.doc.key,d.doc,new ku(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new _f(a._firestore,a._userDataWriter,d.doc.key,d.doc,new ku(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,v=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:uL(d.type),doc:m,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=y0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qe(61501,{type:n})}}function as(n){n=Ls(n,mn);const e=Ls(n.firestore,Lo);return GD(dm(e),n._key).then((t=>hL(e,n,t)))}fc._jsonSchemaVersion="firestore/querySnapshot/1.0",fc._jsonSchema={type:wn("string",fc._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")};class X0 extends lL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}function Rn(n){n=Ls(n,yl);const e=Ls(n.firestore,Lo),t=dm(e),r=new X0(e);return oL(n._query),$D(t,n._query).then((a=>new fc(e,r,n,a)))}function Ac(n,e,t){n=Ls(n,mn);const r=Ls(n.firestore,Lo),a=SS(n.converter,e,t);return bm(r,[vS(pm(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Os.none())])}function Ah(n,e,t,...r){n=Ls(n,mn);const a=Ls(n.firestore,Lo),l=pm(a);let u;return u=typeof(e=Cn(e))=="string"||e instanceof fm?rL(l,"updateDoc",n._key,e,t,r):nL(l,"updateDoc",n._key,e),bm(a,[u.toMutation(n._key,Os.exists(!0))])}function Sh(n){return bm(Ls(n.firestore,Lo),[new A0(n._key,Os.none())])}function Nh(n,e){const t=Ls(n.firestore,Lo),r=vt(n),a=SS(n.converter,e);return bm(t,[vS(pm(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,Os.exists(!1))]).then((()=>r))}function bm(n,e){return(function(r,a){const l=new Ti;return r.asyncQueue.enqueueAndForget((async()=>DD(await HD(r),a,l))),l.promise})(dm(n),e)}function hL(n,e,t){const r=t.docs.get(e._key),a=new X0(n);return new rl(n,a,e._key,r,new ku(t.hasPendingWrites,t.fromCache),e.converter)}function Xd(n){return dL(n,{count:cL()})}function dL(n,e){const t=Ls(n.firestore,Lo),r=dm(t),a=m6(e,((l,u)=>new X6(u,l.aggregateType,l._internalFieldPath)));return KD(r,n._query,a).then((l=>(function(d,m,p){const v=new X0(d);return new ZD(m,v,p)})(t,n,l)))}function Sc(){return new F0("serverTimestamp")}(function(e,t=!0){(function(a){kc=a})(Lc),yc(new il("firestore",((r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),d=new Lo(new XO(r.getProvider("auth-internal")),new JO(u,r.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ee(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zu(p.options.projectId,v)})(u,a),u);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),go(Ix,Ox,e),go(Ix,Ox,"esm2020")})();const fL={apiKey:"AIzaSyB3nTJlyM3K-XpvEUrXyk3leiVeMxzkTiU",authDomain:"forexvolcano-21180.firebaseapp.com",projectId:"forexvolcano-21180",storageBucket:"forexvolcano-21180.firebasestorage.app",messagingSenderId:"264687169302",appId:"1:264687169302:web:83322d7adc303b1f0c2a37",measurementId:"G-XTB0D1TPS6"},NS=lT(fL),zt=$O(NS),Pe=YD(NS),mL=()=>{const[n,e]=U.useState(null),[t,r]=U.useState(!1),a=Di();U.useEffect(()=>{const u=yh(zt,async d=>{if(e(d),d)try{const m=await as(vt(Pe,"users",d.uid));m.exists()&&m.data().role==="admin"?r(!0):r(!1)}catch(m){console.error("Error checking admin role:",m),r(!1)}else r(!1)});return()=>u()},[]);const l=async()=>{try{await M3(zt),a("/")}catch(u){console.error("Error logging out",u)}};return g.jsx("nav",{className:"bg-surface border-b border-gray-800 sticky top-0 z-50",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex items-center justify-between h-16",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx(yt,{to:"/",className:"flex-shrink-0",children:g.jsxs("span",{className:"text-secondary text-2xl font-bold tracking-tighter",children:["Forex",g.jsx("span",{className:"text-accent",children:"Volcano"})]})}),g.jsx("div",{className:"hidden md:block",children:g.jsxs("div",{className:"ml-10 flex items-baseline space-x-4",children:[g.jsx(yt,{to:"/analysis",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Analysis"}),g.jsx(yt,{to:"/academy",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Academy"}),g.jsx(yt,{to:"/news",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"News"})]})})]}),g.jsx("div",{className:"hidden md:block",children:g.jsx("div",{className:"ml-4 flex items-center md:ml-6",children:n?g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx(yt,{to:"/dashboard",className:"text-primary hover:text-green-400 font-medium px-3 py-2",children:"Dashboard"}),t&&g.jsx(yt,{to:"/admin",className:"text-accent hover:text-orange-400 font-medium px-3 py-2",children:"Admin Panel"}),g.jsx("button",{onClick:l,className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-md text-sm font-medium",children:"Logout"})]}):g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx(yt,{to:"/login",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Login"}),g.jsx(yt,{to:"/register",className:"bg-primary hover:bg-green-600 text-white px-3 py-2 rounded-md text-sm font-medium",children:"Get Started"})]})})}),g.jsx("div",{className:"-mr-2 flex md:hidden",children:g.jsxs("button",{type:"button",className:"bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none","aria-controls":"mobile-menu","aria-expanded":"false",children:[g.jsx("span",{className:"sr-only",children:"Open main menu"}),g.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})})})},pL=()=>g.jsx("footer",{className:"bg-[#05080f] border-t border-gray-800/50 py-12",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[g.jsxs("div",{className:"mb-6 md:mb-0 text-center md:text-left",children:[g.jsxs(yt,{to:"/",className:"text-2xl font-bold tracking-tighter text-secondary",children:["Forex",g.jsx("span",{className:"text-accent",children:"Volcano"})]}),g.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[" ",new Date().getFullYear()," ForexVolcano. All rights reserved."]})]}),g.jsxs("div",{className:"flex space-x-8",children:[g.jsx(yt,{to:"/analysis",className:"text-gray-400 hover:text-white transition-colors",children:"Analysis"}),g.jsx(yt,{to:"/news",className:"text-gray-400 hover:text-white transition-colors",children:"News"}),g.jsx(yt,{to:"/login",className:"text-gray-400 hover:text-white transition-colors",children:"Login"})]})]})})}),CE={primary:"bg-primary hover:bg-green-500 text-white shadow-lg shadow-green-900/20",secondary:"bg-secondary hover:bg-red-500 text-white shadow-lg shadow-red-900/20",accent:"bg-accent hover:bg-orange-500 text-white shadow-lg shadow-orange-900/20",outline:"border-2 border-slate-700 hover:border-slate-500 text-slate-300 hover:text-white bg-transparent",ghost:"text-slate-400 hover:text-white hover:bg-white/5"},RE={sm:"px-3 py-1.5 text-sm",md:"px-6 py-3 text-base font-semibold",lg:"px-8 py-4 text-lg font-bold"},Rt=({children:n,variant:e="primary",size:t="md",to:r=null,onClick:a,className:l="",...u})=>{const d="inline-flex items-center justify-center rounded-lg transition-all duration-300 transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0a0e17] focus:ring-slate-400",m=CE[e]||CE.primary,p=RE[t]||RE.md,v=`${d} ${m} ${p} ${l}`;return r?g.jsx(yt,{to:r,className:v,...u,children:n}):g.jsx("button",{onClick:a,className:v,...u,children:n})},gL=()=>g.jsxs("div",{className:"relative overflow-hidden bg-background pt-16 pb-32 lg:pt-32 lg:pb-40",children:[g.jsxs("div",{className:"absolute top-0 left-1/2 w-full -translate-x-1/2 h-full z-0 pointer-events-none",children:[g.jsx("div",{className:"absolute top-[-10%] left-[20%] w-[500px] h-[500px] bg-secondary/10 rounded-full blur-[100px] animate-pulse"}),g.jsx("div",{className:"absolute top-[10%] right-[20%] w-[400px] h-[400px] bg-accent/10 rounded-full blur-[80px]"})]}),g.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[g.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold tracking-tight text-white mb-6",children:["Predict the ",g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-secondary to-accent",children:"Eruption"})]}),g.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-xl text-gray-400 mb-10",children:"Professional Forex education and institutional-grade analysis. Stop guessing. Start trading with the precision of a geologist."}),g.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[g.jsx(Rt,{to:"/register",variant:"primary",size:"lg",children:"Start Learning Free"}),g.jsx(Rt,{to:"/analysis",variant:"outline",size:"lg",children:"View Daily Analysis"})]}),g.jsxs("div",{className:"mt-16 relative",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background to-transparent z-10 h-20 bottom-0 pointer-events-none"}),g.jsxs("div",{className:"inline-flex items-center gap-8 py-3 px-8 rounded-full bg-white/5 border border-white/10 backdrop-blur-sm shadow-2xl",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-bold text-white",children:"EUR/USD"}),g.jsx("span",{className:"text-primary text-sm",children:" 1.0842"})]}),g.jsx("div",{className:"w-px h-4 bg-gray-700"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-bold text-white",children:"GBP/USD"}),g.jsx("span",{className:"text-secondary text-sm",children:" 1.2615"})]}),g.jsx("div",{className:"w-px h-4 bg-gray-700"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-bold text-white",children:"XAU/USD"}),g.jsx("span",{className:"text-accent text-sm",children:" 2045.50"})]})]})]})]})]}),yL=[{title:"Structured Learning Path",description:'From "What is a Pip?" to institutional order flow. Our curriculum guides you step-by-step through the chaos.',icon:g.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),borderColor:"border-primary/20",iconBg:"bg-primary/10"},{title:"Daily Market Analysis",description:`Don't trade alone. Get daily "Volcano Watch" reports identifying high-probability setups before they erupt.`,icon:g.jsx("svg",{className:"w-6 h-6 text-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),borderColor:"border-secondary/20",iconBg:"bg-secondary/10"},{title:"Risk Management",description:"The volcano is dangerous. Learn how to survive. Our strict risk protocols are the core of our philosophy.",icon:g.jsx("svg",{className:"w-6 h-6 text-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),borderColor:"border-accent/20",iconBg:"bg-accent/10"}],vL=()=>g.jsx("div",{className:"py-24 bg-surface",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("h2",{className:"text-base text-accent font-semibold tracking-wide uppercase",children:"Why Choose Us"}),g.jsx("p",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl",children:"A Better Way to Trade"})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:yL.map((n,e)=>g.jsxs("div",{className:`p-8 bg-background/50 border ${n.borderColor} rounded-2xl hover:bg-background transition-all duration-300`,children:[g.jsx("div",{className:`w-12 h-12 ${n.iconBg} rounded-lg flex items-center justify-center mb-6`,children:n.icon}),g.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:n.title}),g.jsx("p",{className:"text-gray-400 leading-relaxed",children:n.description})]},e))})]})}),bL=()=>g.jsxs("div",{className:"flex flex-col min-h-screen",children:[g.jsx(gL,{}),g.jsx(vL,{})]}),CS=({title:n,subtitle:e,image:t,content:r,footer:a,badges:l=[],className:u=""})=>g.jsxs("div",{className:`group relative flex flex-col overflow-hidden rounded-2xl bg-surface border border-gray-800 transition-all duration-300 hover:border-gray-700 hover:shadow-2xl hover:shadow-primary/5 ${u}`,children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent opacity-0 transition-opacity duration-500 group-hover:opacity-100 pointer-events-none"}),t&&g.jsxs("div",{className:"relative h-48 w-full overflow-hidden bg-gray-900",children:[g.jsx("img",{src:t,alt:n,className:"h-full w-full object-cover transition-transform duration-700 group-hover:scale-105",onError:d=>{d.target.style.display="none",d.target.parentElement.classList.add("flex","items-center","justify-center","bg-gray-800"),d.target.parentElement.innerHTML='<span class="text-4xl"></span>'}}),l.length>0&&g.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2",children:l.map((d,m)=>g.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded uppercase tracking-wider ${d.color||"bg-gray-800 text-white"}`,children:d.text},m))})]}),g.jsxs("div",{className:"flex flex-1 flex-col p-6 z-10",children:[e&&g.jsx("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-400",children:e}),g.jsx("h3",{className:"mb-3 text-xl font-bold text-white group-hover:text-primary transition-colors",children:n}),g.jsx("p",{className:"flex-1 text-gray-400 line-clamp-3 mb-6",children:r}),a&&g.jsx("div",{className:"mt-auto border-t border-gray-800 pt-4",children:a})]})]}),IE=[{id:"1",pair:"EUR/USD",direction:"Bearish",title:"EUR/USD Forming Head and Shoulders on 4H",content:"Price has failed to break the 1.0900 resistance level multiple times. We are observing a clear H&S pattern formation. If the neckline at 1.0820 breaks, we expect a sharp decline towards the 1.0750 liquidity zone.",author:"Volcano Chief",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=1000&auto=format&fit=crop"},{id:"2",pair:"XAU/USD",direction:"Bullish",title:"Gold Preparing for Eruption Above 2050",content:"Geopolitical tensions and a weakening dollar suggest Gold is accumulating for a massive leg up. Watch for a retest of 2035 as a potential entry point for long positions targeting new highs.",author:"Analyst Sarah",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1000&auto=format&fit=crop"},{id:"3",pair:"GBP/JPY",direction:"Bullish",title:"The Dragon is Waking Up",content:"GJ is respecting the ascending trendline perfectly. The recent pullback to 182.00 was rejected strongly. We are looking for continuation towards 185.00 level.",author:"Volcano Chief",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1526304640151-b59310398691?q=80&w=1000&auto=format&fit=crop"}],_L=()=>{const[n,e]=U.useState([]),[t,r]=U.useState(!0),[a,l]=U.useState("All");U.useEffect(()=>{(async()=>{try{const v=ri(St(Pe,"analysis"),Sa("timestamp","desc"));let E=(await Rn(v)).docs.map(A=>({id:A.id,...A.data()}));if(zt.currentUser){const A=await as(vt(Pe,"users",zt.currentUser.uid));if(A.exists()){const C=A.data().preferences;C&&C.analysisCurrencies&&C.analysisCurrencies.length>0&&(E=E.filter(L=>C.analysisCurrencies.includes(L.pair)))}}E.length>0?e(E):zt.currentUser?e([]):e(IE)}catch(v){console.error("Error fetching analysis:",v),e(IE)}finally{r(!1)}})()},[]);const u=a==="All"?n:n.filter(p=>p.pair===a),d=["All",...new Set(n.map(p=>p.pair))],m=p=>{if(!p)return"";const v=p.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),x=document.createElement("DIV");return x.innerHTML=v,(x.textContent||x.innerText||"").trim()};return g.jsx("div",{className:"bg-background min-h-screen py-12",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsxs("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl tracking-tight",children:["Market ",g.jsx("span",{className:"text-primary",children:"Analysis"})]}),g.jsx("p",{className:"mt-4 text-xl text-gray-400",children:"Daily technical breakdowns and trade setups from our experts."})]}),g.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-12",children:d.map(p=>g.jsx("button",{onClick:()=>l(p),className:`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-200 ${a===p?"bg-primary text-white shadow-lg shadow-primary/25":"bg-surface text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:p},p))}),t?g.jsx("div",{className:"text-center text-white py-20",children:"Loading Volcano Data..."}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map(p=>{const v=p.direction==="Bullish"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary";return g.jsx(yt,{to:`/analysis/${p.id}`,className:"block group",children:g.jsx(CS,{title:p.title,image:p.image||p.chart_image_url,content:m(p.content),subtitle:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"text-gray-500 text-xs",children:p.timestamp?.seconds?new Date(p.timestamp.seconds*1e3).toLocaleDateString():p.timestamp||new Date().toLocaleDateString()}),g.jsx("span",{className:"text-gray-600",children:""}),g.jsxs("span",{className:"text-gray-500 text-xs text-accent",children:["By ",p.analystName||p.author||"Admin"]})]}),badges:[{text:p.pair,color:"bg-surface border border-gray-700 text-white"},{text:p.direction,color:v}],footer:g.jsxs(Rt,{variant:"ghost",size:"sm",className:"w-full justify-between group-hover:text-white",children:["Read Full Breakdown",g.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})},p.id)})})]})})},xL=()=>{const{id:n}=Oc(),e=Di(),[t,r]=U.useState(null),[a,l]=U.useState(!0);if(U.useEffect(()=>{(async()=>{try{const p=vt(Pe,"analysis",n),v=await as(p);v.exists()?r({id:v.id,...v.data()}):(console.log("No such document!"),e("/analysis"))}catch(p){console.error("Error fetching analysis detail:",p)}finally{l(!1)}})()},[n,e]),a)return g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:"Loading..."});if(!t)return null;const u=t.timestamp?.seconds?new Date(t.timestamp.seconds*1e3).toLocaleDateString():t.timestamp||new Date().toLocaleDateString(),d=t.direction==="Bullish"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary";return g.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsx(Rt,{variant:"ghost",onClick:()=>e("/analysis"),className:"mb-6 text-gray-400 hover:text-white",children:" Back to Analysis"}),g.jsxs("article",{className:"bg-surface rounded-2xl overflow-hidden border border-gray-800 shadow-2xl",children:[(t.image||t.chart_image_url)&&g.jsxs("div",{className:"w-full h-64 sm:h-96 relative",children:[g.jsx("img",{src:t.image||t.chart_image_url,alt:t.title,className:"w-full h-full object-cover"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent"})]}),g.jsxs("div",{className:"p-8 sm:p-12",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[g.jsx("span",{className:"text-gray-400 text-sm",children:u}),g.jsx("span",{className:"text-gray-600",children:""}),g.jsx("span",{className:"text-accent text-sm uppercase tracking-wider font-bold",children:t.analysisType||"Technical Analysis"})]}),g.jsxs("div",{className:"flex gap-3 mb-6",children:[g.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide bg-surface border border-gray-700 text-white",children:t.pair}),g.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${d}`,children:t.direction})]}),g.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-white mb-8 leading-tight",children:t.title}),g.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300 mb-16",dangerouslySetInnerHTML:{__html:t.content}}),(t.analystName||t.analystBio)&&g.jsxs("div",{className:"border-t border-gray-800 pt-12 mt-12 mb-8",children:[g.jsx("h3",{className:"text-2xl font-bold text-white mb-8",children:"Meet Your Analyst"}),g.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-8 bg-black/20 p-8 rounded-2xl border border-gray-800/50",children:[g.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 shrink-0 rounded-full overflow-hidden ring-4 ring-primary/20",children:g.jsx("img",{src:t.analystImage||"https://images.unsplash.com/photo-1633332755192-727a05c4013d?w=400&auto=format&fit=crop&q=60",alt:t.analystName||"Analyst",className:"w-full h-full object-cover"})}),g.jsxs("div",{className:"text-center sm:text-left",children:[g.jsx("h4",{className:"text-xl font-bold text-white mb-2",children:t.analystName||"Volcano Analyst"}),g.jsx("p",{className:"text-gray-400 leading-relaxed mb-4 whitespace-pre-wrap",children:t.analystBio||"Professional market analyst at Forex Volcano."}),g.jsxs("div",{className:"flex gap-4",children:[t.twitter&&g.jsx("a",{href:t.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:g.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:g.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),t.linkedin&&g.jsx("a",{href:t.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:g.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:g.jsx("path",{fillRule:"evenodd",d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z",clipRule:"evenodd"})})}),t.telegram&&g.jsx("a",{href:t.telegram,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:g.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:g.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]})]})]})]})]})]})]})})},OE=[{id:"1",title:"NFP Smashes Expectations: 350k Jobs Added",impact:"High",affectedCurrencies:["USD","XAU","JPY"],content:"The Non-Farm Payrolls report showed a surprise surge in job creation, sending the Dollar Index (DXY) rocketing past 104.50. Traders should watch for pullbacks on Gold.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=1000&auto=format&fit=crop"},{id:"2",title:"ECB Signals Rate Cuts in June",impact:"Medium",affectedCurrencies:["EUR","GBP"],content:"Lagarde hinted that inflation is under control, opening the door for a 25bps cut. Euro is showing weakness against the Pound.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1526304640151-b59310398691?q=80&w=1000&auto=format&fit=crop"},{id:"3",title:"BoJ Maintains Ultra-Loose Policy",impact:"Low",affectedCurrencies:["JPY"],content:"No surprises from the Bank of Japan. Yield Curve Control remains in place. USD/JPY is drifting sideways in a tight range.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1000&auto=format&fit=crop"}],EL={High:"bg-red-500/20 text-red-500 border border-red-500/50",Medium:"bg-orange-500/20 text-orange-500 border border-orange-500/50",Low:"bg-yellow-500/20 text-yellow-500 border border-yellow-500/50"},wL=()=>{const[n,e]=U.useState([]),[t,r]=U.useState(!0),a=l=>{if(!l)return"";const u=l.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),d=document.createElement("DIV");return d.innerHTML=u,(d.textContent||d.innerText||"").trim()};return U.useEffect(()=>{(async()=>{try{const u=ri(St(Pe,"news"),Sa("timestamp","desc"));let m=(await Rn(u)).docs.map(p=>({id:p.id,...p.data()}));if(zt.currentUser){const p=await as(vt(Pe,"users",zt.currentUser.uid));if(p.exists()){const v=p.data().preferences;v&&v.newsImpacts&&v.newsImpacts.length>0&&(m=m.filter(x=>v.newsImpacts.includes(x.impact)))}}m.length>0?e(m):zt.currentUser?e([]):e(OE)}catch(u){console.error("Error fetching news:",u),e(OE)}finally{r(!1)}})()},[]),g.jsx("div",{className:"bg-background min-h-screen py-12",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsxs("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl tracking-tight",children:["Market ",g.jsx("span",{className:"text-accent",children:"News"})]}),g.jsx("p",{className:"mt-4 text-xl text-gray-400",children:"Stay ahead of the volatility with real-time economic updates."})]}),t?g.jsx("div",{className:"text-center text-white py-20",children:"Loading Earth-shaking Events..."}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(l=>g.jsx(yt,{to:`/news/${l.id}`,className:"block group",children:g.jsx(CS,{title:l.title,image:l.image,content:a(l.content),subtitle:g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("span",{className:"text-gray-500 text-xs",children:l.timestamp?.seconds?new Date(l.timestamp.seconds*1e3).toLocaleDateString():l.timestamp||new Date().toLocaleDateString()})}),badges:[{text:l.impact,color:EL[l.impact]||"bg-gray-800 text-white"},...(l.affectedCurrencies||[]).map(u=>({text:u,color:"bg-surface border border-gray-700 text-white"}))]})},l.id))})]})})},TL=()=>{const{id:n}=Oc(),e=Di(),[t,r]=U.useState(null),[a,l]=U.useState(!0);if(U.useEffect(()=>{(async()=>{try{const m=vt(Pe,"news",n),p=await as(m);p.exists()?r({id:p.id,...p.data()}):(console.log("No such document!"),e("/news"))}catch(m){console.error("Error fetching news detail:",m)}finally{l(!1)}})()},[n,e]),a)return g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:"Loading..."});if(!t)return null;const u=t.timestamp?.seconds?new Date(t.timestamp.seconds*1e3).toLocaleDateString():t.timestamp||new Date().toLocaleDateString();return g.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsx(Rt,{variant:"ghost",onClick:()=>e("/news"),className:"mb-6 text-gray-400 hover:text-white",children:" Back to News"}),g.jsxs("article",{className:"bg-surface rounded-2xl overflow-hidden border border-gray-800 shadow-2xl",children:[t.image&&g.jsxs("div",{className:"w-full h-64 sm:h-96 relative",children:[g.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent"})]}),g.jsxs("div",{className:"p-8 sm:p-12",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[g.jsx("span",{className:"text-gray-400 text-sm",children:u}),g.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide
                                ${t.impact==="High"?"bg-red-500/20 text-red-400":t.impact==="Medium"?"bg-orange-500/20 text-orange-400":"bg-green-500/20 text-green-400"}`,children:[t.impact," Impact"]}),t.affectedCurrencies&&t.affectedCurrencies.map&&t.affectedCurrencies.map(d=>g.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gray-800 text-gray-300 border border-gray-700",children:d},d))]}),g.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-white mb-8 leading-tight",children:t.title}),g.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300",dangerouslySetInnerHTML:{__html:t.content}})]})]})]})})},AL=()=>{const[n,e]=U.useState(""),[t,r]=U.useState(""),[a,l]=U.useState(""),[u,d]=U.useState(!1),m=Di(),p=async E=>{try{const A=await as(vt(Pe,"users",E));A.exists()&&A.data().role==="admin"?m("/admin"):m("/dashboard")}catch(A){console.error("Error checking role:",A),m("/dashboard")}},v=async E=>{E.preventDefault(),l(""),d(!0);try{const A=await O3(zt,n,t);await p(A.user.uid)}catch(A){console.error(A),l("Failed to login. Please check your credentials.")}finally{d(!1)}},x=async()=>{try{const E=new Ei,A=await FT(zt,E);await p(A.user.uid)}catch(E){console.error(E),l("Failed to sign in with Google")}};return g.jsxs("div",{className:"min-h-screen bg-background flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[g.jsxs("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:["Sign in to ",g.jsx("span",{className:"text-secondary",children:"Volcano"})]}),g.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Or"," ",g.jsx(yt,{to:"/register",className:"font-medium text-primary hover:text-green-400",children:"start your 14-day free trial"})]})]}),g.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:g.jsxs("div",{className:"bg-surface py-8 px-4 shadow sm:rounded-lg sm:px-10 border border-gray-800",children:[g.jsxs("form",{className:"space-y-6",onSubmit:v,children:[a&&g.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 p-3 rounded text-sm text-center",children:a}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),g.jsx("div",{className:"mt-1",children:g.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:E=>e(E.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),g.jsx("div",{className:"mt-1",children:g.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:E=>r(E.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),g.jsx("div",{children:g.jsx(Rt,{type:"submit",variant:"primary",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",disabled:u,children:u?"Signing in...":"Sign in"})})]}),g.jsxs("div",{className:"mt-6",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-0 flex items-center",children:g.jsx("div",{className:"w-full border-t border-gray-700"})}),g.jsx("div",{className:"relative flex justify-center text-sm",children:g.jsx("span",{className:"px-2 bg-surface text-gray-400",children:"Or continue with"})})]}),g.jsx("div",{className:"mt-6 grid grid-cols-1 gap-3",children:g.jsx("div",{children:g.jsxs("button",{type:"button",onClick:x,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-700 rounded-md shadow-sm bg-gray-800 text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[g.jsx("span",{className:"sr-only",children:"Sign in with Google"}),g.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:g.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 0.507 5.387 0 12s5.36 12 12 12c3.627 0 6.627-1.2 8.52-3.387 1.947-2.207 2.48-5.747 2.48-6.173 0-.613-.053-1.12-.133-1.507H12.48z"})})]})})})]})]})})]})},SL=()=>{const[n,e]=U.useState(""),[t,r]=U.useState(""),[a,l]=U.useState(""),[u,d]=U.useState(""),[m,p]=U.useState(!1),v=Di(),x=async A=>{A.preventDefault(),d(""),p(!0);try{const L=(await I3(zt,t,a)).user;await L3(L,{displayName:n}),await Ac(vt(Pe,"users",L.uid),{uid:L.uid,username:n,email:t,role:"user",createdAt:new Date().toISOString(),avatar_url:`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=random`}),v("/dashboard")}catch(C){console.error(C),C.code==="auth/email-already-in-use"?d("Email already in use."):d("Failed to create account. Please try again.")}finally{p(!1)}},E=async()=>{try{const A=new Ei,L=(await FT(zt,A)).user;await Ac(vt(Pe,"users",L.uid),{uid:L.uid,username:L.displayName,email:L.email,role:"user",createdAt:new Date().toISOString(),avatar_url:L.photoURL},{merge:!0}),v("/dashboard")}catch(A){console.error(A),d("Failed to sign up with Google")}};return g.jsxs("div",{className:"min-h-screen bg-background flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[g.jsxs("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:["Join the ",g.jsx("span",{className:"text-secondary",children:"Eruption"})]}),g.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Already have an account?"," ",g.jsx(yt,{to:"/login",className:"font-medium text-primary hover:text-green-400",children:"Sign in"})]})]}),g.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[g.jsx("div",{className:"bg-surface py-8 px-4 shadow sm:rounded-lg sm:px-10 border border-gray-800",children:g.jsxs("form",{className:"space-y-6",onSubmit:x,children:[u&&g.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 p-3 rounded text-sm text-center",children:u}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300",children:"Full Name"}),g.jsx("div",{className:"mt-1",children:g.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:n,onChange:A=>e(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),g.jsx("div",{className:"mt-1",children:g.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:A=>r(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),g.jsx("div",{className:"mt-1",children:g.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,minLength:6,value:a,onChange:A=>l(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),g.jsx("div",{children:g.jsx(Rt,{type:"submit",variant:"primary",className:"w-full justify-center",disabled:m,children:m?"Creating Account...":"Sign up"})})]})}),g.jsxs("div",{className:"mt-6",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-0 flex items-center",children:g.jsx("div",{className:"w-full border-t border-gray-700"})}),g.jsx("div",{className:"relative flex justify-center text-sm",children:g.jsx("span",{className:"px-2 bg-surface text-gray-400",children:"Or continue with"})})]}),g.jsx("div",{className:"mt-6 grid grid-cols-1 gap-3",children:g.jsx("div",{children:g.jsxs("button",{type:"button",onClick:E,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-700 rounded-md shadow-sm bg-gray-800 text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[g.jsx("span",{className:"sr-only",children:"Sign up with Google"}),g.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:g.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 0.507 5.387 0 12s5.36 12 12 12c3.627 0 6.627-1.2 8.52-3.387 1.947-2.207 2.48-5.747 2.48-6.173 0-.613-.053-1.12-.133-1.507H12.48z"})})]})})})]})]})]})},NL=({userProfile:n,setUserProfile:e})=>{const[t,r]=U.useState(n?.preferences||{newsImpacts:["High","Medium","Low"],analysisCurrencies:["XAUUSD","EURUSD","GBPUSD","BTCUSD","US30"],analysisTypes:["Technical","Fundamental"]}),[a,l]=U.useState(!1);U.useEffect(()=>{n?.preferences&&r(n.preferences)},[n]);const u=async()=>{l(!0);try{await Ac(vt(Pe,"users",zt.currentUser.uid),{preferences:t},{merge:!0}),e({...n,preferences:t}),alert("Preferences saved!")}catch(m){console.error("Error saving preferences:",m),alert("Failed to save.")}finally{l(!1)}},d=(m,p)=>{r(v=>{const x=v[m]||[];return x.includes(p)?{...v,[m]:x.filter(E=>E!==p)}:{...v,[m]:[...x,p]}})};return g.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 animate-fade-in",children:[g.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Dashboard Customization"}),g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"News Notifications"}),g.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select which news impacts you want to see."}),g.jsx("div",{className:"flex gap-4",children:["High","Medium","Low"].map(m=>g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:t.newsImpacts?.includes(m),onChange:()=>d("newsImpacts",m),className:"form-checkbox text-primary rounded bg-gray-900 border-gray-700"}),g.jsxs("span",{className:"text-gray-300",children:[m," Impact"]})]},m))})]}),g.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[g.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Analysis Filters"}),g.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Choose your favorite pairs to track."}),g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["XAUUSD","EURUSD","GBPUSD","USDJPY","BTCUSD","ETHUSD","US30","NAS100"].map(m=>g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:t.analysisCurrencies?.includes(m),onChange:()=>d("analysisCurrencies",m),className:"form-checkbox text-primary rounded bg-gray-900 border-gray-700"}),g.jsx("span",{className:"text-gray-300",children:m})]},m))})]})]}),g.jsx("div",{className:"mt-8",children:g.jsx(Rt,{onClick:u,disabled:a,children:a?"Saving...":"Save Preferences"})})]})},CL=({userProfile:n,setUserProfile:e})=>{const[t,r]=U.useState(n?.username||""),[a,l]=U.useState(n?.bio||""),[u,d]=U.useState(!1),[m,p]=U.useState(!1);U.useEffect(()=>{n&&(r(n.username||""),l(n.bio||""))},[n]);const v=A=>new Promise((C,L)=>{const I=new FileReader;I.readAsDataURL(A),I.onload=B=>{const $=new Image;$.src=B.target.result,$.onload=()=>{const Y=document.createElement("canvas"),ee=300,fe=300;let xe=$.width,M=$.height;xe>M?xe>ee&&(M*=ee/xe,xe=ee):M>fe&&(xe*=fe/M,M=fe),Y.width=xe,Y.height=M,Y.getContext("2d").drawImage($,0,0,xe,M);const P=Y.toDataURL("image/jpeg",.7);C(P)},$.onerror=Y=>L(Y)},I.onerror=B=>L(B)}),x=async A=>{const C=A.target.files[0];if(C){C.size>5*1024*1024&&console.log("Large file detected, compression will be applied."),d(!0);try{const L=await v(C);L.length>5e5&&console.warn("Image might be too large for smooth database performance"),await Ac(vt(Pe,"users",zt.currentUser.uid),{avatar_url:L},{merge:!0}),e({...n,avatar_url:L})}catch(L){console.error("Error processing image:",L),alert("Failed to process image.")}finally{d(!1)}}},E=async()=>{p(!0);try{if(t!==n?.username){if(!t.trim()){alert("Username cannot be empty"),p(!1);return}const A=ri(St(Pe,"users"),TS("username","==",t));if(!(await Rn(A)).empty){alert("Username is already taken. Please choose another."),p(!1);return}}await Ac(vt(Pe,"users",zt.currentUser.uid),{username:t,bio:a},{merge:!0}),e({...n,username:t,bio:a}),alert("Profile updated!")}catch(A){console.error("Error saving profile:",A),alert("Failed to save profile.")}finally{p(!1)}};return g.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 animate-fade-in",children:[g.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Profile Settings"}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[g.jsxs("div",{className:"flex flex-col items-center gap-4",children:[g.jsxs("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-800 relative group",children:[g.jsx("img",{src:n?.avatar_url||`https://ui-avatars.com/api/?name=${n?.username||"User"}`,alt:"Avatar",className:"w-full h-full object-cover"}),g.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:g.jsx("span",{className:"text-xs text-white",children:"Change"})}),g.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"absolute inset-0 opacity-0 cursor-pointer"})]}),u&&g.jsx("span",{className:"text-xs text-primary",children:"Compressing & Saving..."})]}),g.jsxs("div",{className:"flex-1 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Username (Public)"}),g.jsx("input",{type:"text",value:t,onChange:A=>r(A.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g. CryptoKing"}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique handle for your public profile."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bio"}),g.jsx("textarea",{value:a,onChange:A=>l(A.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:outline-none h-24 resize-none",placeholder:"Tell us about your trading journey..."})]}),g.jsx("div",{children:g.jsx(Rt,{onClick:E,disabled:m,children:m?"Saving...":"Save Changes"})}),n?.username&&g.jsxs("div",{className:"mt-4 p-4 bg-gray-900/50 rounded-lg border border-gray-800 flex items-center justify-between",children:[g.jsx("span",{className:"text-sm text-gray-400",children:"Your Public Profile:"}),g.jsx(yt,{to:`/profile/${n.username}`,className:"text-primary hover:underline text-sm font-medium",children:"View Public Page "})]})]})]})]})},RL=()=>{const[n,e]=U.useState(null),[t,r]=U.useState(!0),[a,l]=U.useState("overview"),[u,d]=U.useState([]),[m,p]=U.useState({totalProgress:0,completed:0,avgQuiz:0});U.useEffect(()=>{(async()=>{if(zt.currentUser)try{const E=vt(Pe,"users",zt.currentUser.uid),A=await as(E);A.exists()&&e(A.data());const C=await Rn(St(Pe,"users",zt.currentUser.uid,"course_progress")),L={};if(C.docs.forEach(I=>{L[I.id]=I.data()}),Object.keys(L).length>0){const $=(await Rn(St(Pe,"courses"))).docs.map(ee=>({id:ee.id,...ee.data()})).filter(ee=>L[ee.id]).map(ee=>{const fe=L[ee.id],xe=fe.completedLessonIds?.length||0;return{...ee,completedCount:xe,lastAccessed:fe.lastAccessed}});d($);const Y=$.reduce((ee,fe)=>ee+fe.completedCount,0);p({totalProgress:Y,completed:$.length,avgQuiz:0})}}catch(E){console.error("Error fetching user data:",E)}finally{r(!1)}})()},[]);const v=n?.username||zt.currentUser?.displayName||"Trader";return console.log("Dashboard Render",{loading:t,userProfile:n,activeTab:a}),g.jsxs("div",{className:"min-h-screen bg-background text-white animate-fade-in",children:[g.jsx("div",{className:"bg-surface border-b border-gray-800",children:g.jsx("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex items-center gap-6",children:[g.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-primary to-secondary p-[2px]",children:g.jsx("img",{src:n?.avatar_url||`https://ui-avatars.com/api/?name=${v}`,alt:"Profile",className:"h-full w-full rounded-full bg-background object-cover"})}),g.jsxs("div",{children:[g.jsxs("h1",{className:"text-3xl font-bold text-white",children:["Welcome back, ",g.jsx("span",{className:"text-primary",children:v})]}),g.jsx("p",{className:"mt-1 text-gray-400",children:"Ready to dominate the markets today?"})]})]})})}),g.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"flex space-x-6 mb-8 border-b border-gray-800 overflow-x-auto",children:[g.jsx("button",{onClick:()=>l("overview"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="overview"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Overview"}),g.jsx("button",{onClick:()=>l("profile"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="profile"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Profile"}),g.jsx("button",{onClick:()=>l("settings"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="settings"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Settings & Preferences"}),g.jsx("button",{onClick:()=>l("learning"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="learning"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"My Learning"})]}),a==="overview"&&g.jsxs("div",{className:"animate-fade-in",children:[g.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Account Overview"}),g.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3 mb-12",children:[g.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:g.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[g.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Lessons Completed"}),g.jsx("dd",{className:"mt-1 text-3xl font-semibold text-white",children:m.totalProgress})]})}),g.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:g.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[g.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Active Courses"}),g.jsx("dd",{className:"mt-1 text-3xl font-semibold text-primary",children:m.completed})]})}),g.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:g.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[g.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Quiz Score Avg"}),g.jsx("dd",{className:"mt-1 text-3xl font-semibold text-secondary",children:"N/A"})]})})]}),u.length>0&&g.jsxs("div",{className:"mb-8",children:[g.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Jump Back In"}),g.jsxs("div",{className:"bg-surface rounded-xl p-6 border border-gray-800 flex flex-col md:flex-row items-center gap-6",children:[g.jsx("div",{className:"w-full md:w-1/3 aspect-video rounded-lg overflow-hidden",children:g.jsx("img",{src:u[0].image,alt:u[0].title,className:"w-full h-full object-cover"})}),g.jsxs("div",{className:"flex-1 w-full text-center md:text-left",children:[g.jsx("h4",{className:"text-xl font-bold text-white",children:u[0].title}),g.jsx("p",{className:"text-gray-400 mt-2 mb-4",children:"Continue where you left off."}),g.jsx(yt,{to:`/academy/${u[0].path||"General"}/${u[0].id}`,children:g.jsx(Rt,{variant:"primary",children:"Continue Learning"})})]})]})]})]}),a==="profile"&&g.jsx(CL,{userProfile:n,setUserProfile:e}),a==="settings"&&g.jsx(NL,{userProfile:n,setUserProfile:e}),a==="learning"&&g.jsxs("div",{className:"animate-fade-in",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Courses"}),g.jsx(yt,{to:"/academy",className:"text-primary text-sm hover:underline",children:"Browse All Courses"})]}),u.length>0?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map(x=>g.jsxs("div",{className:"bg-surface rounded-xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-colors group",children:[g.jsxs("div",{className:"h-48 overflow-hidden relative",children:[g.jsx("img",{src:x.image,alt:x.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),g.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(yt,{to:`/academy/${x.path||"General"}/${x.id}`,children:g.jsx(Rt,{variant:"primary",size:"sm",children:"Continue Learning"})})})]}),g.jsxs("div",{className:"p-6",children:[g.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:x.title}),g.jsxs("div",{className:"mt-4",children:[g.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[g.jsx("span",{children:"Lessons Completed"}),g.jsx("span",{children:x.completedCount})]}),g.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:g.jsx("div",{className:"h-2 rounded-full bg-secondary",style:{width:`${Math.min(x.completedCount/10*100,100)}%`}})})]})]})]},x.id))}):g.jsxs("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:[g.jsx("p",{className:"text-gray-400 mb-4",children:"You haven't started any courses yet."}),g.jsx(yt,{to:"/academy",children:g.jsx(Rt,{children:"Explore Academy"})})]})]})]})]})},IL=()=>{const[n,e]=U.useState(!1),[t,r]=U.useState(!0),a=Di();return U.useEffect(()=>{const l=yh(zt,async u=>{if(u)try{const d=await as(vt(Pe,"users",u.uid));d.exists()&&d.data().role==="admin"?e(!0):a("/dashboard")}catch(d){console.error("Admin check failed",d),a("/dashboard")}else a("/login");r(!1)});return()=>l()},[a]),t?g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-2xl font-bold mb-2",children:"Verifying Clearance..."}),g.jsx("div",{className:"text-gray-400",children:"Please wait."})]})}):n?g.jsxs("div",{className:"min-h-screen bg-background flex",children:[g.jsxs("aside",{className:"w-64 bg-surface border-r border-gray-800 flex-shrink-0 hidden md:flex flex-col",children:[g.jsx("div",{className:"p-6 border-b border-gray-800",children:g.jsxs("span",{className:"text-xl font-bold text-white tracking-wider",children:["VOLCANO ",g.jsx("span",{className:"text-secondary text-base",children:"ADMIN"})]})}),g.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[g.jsx(Nu,{to:"/admin",end:!0,children:"Dashboard"}),g.jsx(Nu,{to:"/admin/news",children:"Manage News"}),g.jsx(Nu,{to:"/admin/analysis",children:"Manage Analysis"}),g.jsx(Nu,{to:"/admin/courses",children:"Manage Courses"}),g.jsx(Nu,{to:"/admin/profile",children:"Analyst Profile"})]}),g.jsxs("div",{className:"p-4 border-t border-gray-800",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[g.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold",children:"A"}),g.jsxs("div",{className:"text-sm",children:[g.jsx("div",{className:"text-white font-medium",children:"Administrator"}),g.jsx("div",{className:"text-gray-500 text-xs",children:"Super User"})]})]}),g.jsx(Rt,{variant:"outline",size:"sm",className:"w-full",onClick:()=>a("/"),children:"Exit to Site"})]})]}),g.jsxs("div",{className:"md:hidden absolute top-0 left-0 right-0 h-16 bg-surface border-b border-gray-800 flex items-center px-4 justify-between z-20",children:[g.jsx("span",{className:"font-bold text-white",children:"Admin Panel"}),g.jsx(Rt,{size:"sm",onClick:()=>a("/"),children:"Exit"})]}),g.jsx("main",{className:"flex-1 overflow-auto p-8 pt-24 md:pt-8",children:g.jsx(fR,{})})]}):null},Nu=({to:n,children:e,end:t=!1})=>g.jsx(Xw,{to:n,end:t,className:({isActive:r})=>`block px-4 py-3 rounded-lg text-sm font-medium transition-colors ${r?"bg-primary/10 text-primary border border-primary/20":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:e}),OL=()=>{const[n,e]=U.useState({users:0,courses:0,analysis:0,news:0}),[t,r]=U.useState(!0);return U.useEffect(()=>{(async()=>{try{const l=await Xd(St(Pe,"users")),u=await Xd(St(Pe,"courses")),d=await Xd(St(Pe,"analysis")),m=await Xd(St(Pe,"news"));e({users:l.data().count,courses:u.data().count,analysis:d.data().count,news:m.data().count})}catch(l){console.error("Error fetching stats:",l)}finally{r(!1)}})()},[]),g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"System Overview"}),g.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[g.jsx(Wd,{title:"Total Users",value:t?"...":n.users,change:"Registered",color:"primary"}),g.jsx(Wd,{title:"Active Courses",value:t?"...":n.courses,change:"Live",color:"white"}),g.jsx(Wd,{title:"Analysis Posts",value:t?"...":n.analysis,change:"Market Updates",color:"secondary"}),g.jsx(Wd,{title:"News Alerts",value:t?"...":n.news,change:"Published",color:"accent"})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[g.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[g.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Quick Actions"}),g.jsxs("div",{className:"space-y-3",children:[g.jsx(Bg,{label:"Post New Analysis",to:"/admin/analysis"}),g.jsx(Bg,{label:"Broadcast News Alert",to:"/admin/news"}),g.jsx(Bg,{label:"Review New User Signups",to:"#"})]})]}),g.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[g.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"System Status"}),g.jsxs("div",{className:"space-y-4",children:[g.jsx(zg,{label:"Database Connection",status:"Healthy"}),g.jsx(zg,{label:"Auth Service",status:"Healthy"}),g.jsx(zg,{label:"API Latency",status:"24ms"})]})]})]})]})},Wd=({title:n,value:e,change:t,color:r})=>{const a={primary:"text-primary",secondary:"text-secondary",accent:"text-accent",white:"text-white"};return g.jsxs("div",{className:"bg-surface rounded-xl p-6 border border-gray-800",children:[g.jsx("p",{className:"text-sm font-medium text-gray-400",children:n}),g.jsxs("div",{className:"mt-2 flex items-baseline",children:[g.jsx("p",{className:`text-3xl font-semibold ${a[r]||"text-white"}`,children:e}),g.jsx("p",{className:"ml-2 text-sm text-gray-500",children:t})]})]})},Bg=({label:n,to:e})=>g.jsxs(yt,{to:e,className:"flex items-center justify-between p-3 bg-background rounded-lg hover:bg-gray-800 cursor-pointer transition-colors",children:[g.jsx("span",{className:"text-gray-300",children:n}),g.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),zg=({label:n,status:e})=>g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-gray-400",children:n}),g.jsxs("span",{className:"flex items-center text-primary text-sm font-medium",children:[g.jsx("span",{className:"w-2 h-2 bg-primary rounded-full mr-2"}),e]})]});var RS=typeof global=="object"&&global&&global.Object===Object&&global,DL=typeof self=="object"&&self&&self.Object===Object&&self,Li=RS||DL||Function("return this")(),No=Li.Symbol,IS=Object.prototype,LL=IS.hasOwnProperty,jL=IS.toString,Cu=No?No.toStringTag:void 0;function kL(n){var e=LL.call(n,Cu),t=n[Cu];try{n[Cu]=void 0;var r=!0}catch{}var a=jL.call(n);return r&&(e?n[Cu]=t:delete n[Cu]),a}var ML=Object.prototype,PL=ML.toString;function VL(n){return PL.call(n)}var UL="[object Null]",qL="[object Undefined]",DE=No?No.toStringTag:void 0;function qc(n){return n==null?n===void 0?qL:UL:DE&&DE in Object(n)?kL(n):VL(n)}function Ea(n){return n!=null&&typeof n=="object"}var ul=Array.isArray;function jo(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}function OS(n){return n}var BL="[object AsyncFunction]",zL="[object Function]",HL="[object GeneratorFunction]",FL="[object Proxy]";function W0(n){if(!jo(n))return!1;var e=qc(n);return e==zL||e==HL||e==BL||e==FL}var Hg=Li["__core-js_shared__"],LE=(function(){var n=/[^.]+$/.exec(Hg&&Hg.keys&&Hg.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function GL(n){return!!LE&&LE in n}var $L=Function.prototype,KL=$L.toString;function vl(n){if(n!=null){try{return KL.call(n)}catch{}try{return n+""}catch{}}return""}var QL=/[\\^$.*+?()[\]{}|]/g,YL=/^\[object .+?Constructor\]$/,XL=Function.prototype,WL=Object.prototype,ZL=XL.toString,JL=WL.hasOwnProperty,ej=RegExp("^"+ZL.call(JL).replace(QL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function tj(n){if(!jo(n)||GL(n))return!1;var e=W0(n)?ej:YL;return e.test(vl(n))}function nj(n,e){return n?.[e]}function bl(n,e){var t=nj(n,e);return tj(t)?t:void 0}var Dy=bl(Li,"WeakMap"),jE=Object.create,rj=(function(){function n(){}return function(e){if(!jo(e))return{};if(jE)return jE(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}})();function sj(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function ij(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var aj=800,oj=16,lj=Date.now;function cj(n){var e=0,t=0;return function(){var r=lj(),a=oj-(r-t);if(t=r,a>0){if(++e>=aj)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function uj(n){return function(){return n}}var Bf=(function(){try{var n=bl(Object,"defineProperty");return n({},"",{}),n}catch{}})(),hj=Bf?function(n,e){return Bf(n,"toString",{configurable:!0,enumerable:!1,value:uj(e),writable:!0})}:OS,dj=cj(hj);function fj(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var mj=9007199254740991,pj=/^(?:0|[1-9]\d*)$/;function DS(n,e){var t=typeof n;return e=e??mj,!!e&&(t=="number"||t!="symbol"&&pj.test(n))&&n>-1&&n%1==0&&n<e}function Z0(n,e,t){e=="__proto__"&&Bf?Bf(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function Ch(n,e){return n===e||n!==n&&e!==e}var gj=Object.prototype,yj=gj.hasOwnProperty;function LS(n,e,t){var r=n[e];(!(yj.call(n,e)&&Ch(r,t))||t===void 0&&!(e in n))&&Z0(n,e,t)}function vj(n,e,t,r){var a=!t;t||(t={});for(var l=-1,u=e.length;++l<u;){var d=e[l],m=void 0;m===void 0&&(m=n[d]),a?Z0(t,d,m):LS(t,d,m)}return t}var kE=Math.max;function bj(n,e,t){return e=kE(e===void 0?n.length-1:e,0),function(){for(var r=arguments,a=-1,l=kE(r.length-e,0),u=Array(l);++a<l;)u[a]=r[e+a];a=-1;for(var d=Array(e+1);++a<e;)d[a]=r[a];return d[e]=t(u),sj(n,this,d)}}function _j(n,e){return dj(bj(n,e,OS),n+"")}var xj=9007199254740991;function jS(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=xj}function _m(n){return n!=null&&jS(n.length)&&!W0(n)}function Ej(n,e,t){if(!jo(t))return!1;var r=typeof e;return(r=="number"?_m(t)&&DS(e,t.length):r=="string"&&e in t)?Ch(t[e],n):!1}function wj(n){return _j(function(e,t){var r=-1,a=t.length,l=a>1?t[a-1]:void 0,u=a>2?t[2]:void 0;for(l=n.length>3&&typeof l=="function"?(a--,l):void 0,u&&Ej(t[0],t[1],u)&&(l=a<3?void 0:l,a=1),e=Object(e);++r<a;){var d=t[r];d&&n(e,d,r,l)}return e})}var Tj=Object.prototype;function J0(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Tj;return n===t}function Aj(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var Sj="[object Arguments]";function ME(n){return Ea(n)&&qc(n)==Sj}var kS=Object.prototype,Nj=kS.hasOwnProperty,Cj=kS.propertyIsEnumerable,Ly=ME((function(){return arguments})())?ME:function(n){return Ea(n)&&Nj.call(n,"callee")&&!Cj.call(n,"callee")};function Rj(){return!1}var MS=typeof rs=="object"&&rs&&!rs.nodeType&&rs,PE=MS&&typeof ss=="object"&&ss&&!ss.nodeType&&ss,Ij=PE&&PE.exports===MS,VE=Ij?Li.Buffer:void 0,Oj=VE?VE.isBuffer:void 0,sh=Oj||Rj,Dj="[object Arguments]",Lj="[object Array]",jj="[object Boolean]",kj="[object Date]",Mj="[object Error]",Pj="[object Function]",Vj="[object Map]",Uj="[object Number]",qj="[object Object]",Bj="[object RegExp]",zj="[object Set]",Hj="[object String]",Fj="[object WeakMap]",Gj="[object ArrayBuffer]",$j="[object DataView]",Kj="[object Float32Array]",Qj="[object Float64Array]",Yj="[object Int8Array]",Xj="[object Int16Array]",Wj="[object Int32Array]",Zj="[object Uint8Array]",Jj="[object Uint8ClampedArray]",ek="[object Uint16Array]",tk="[object Uint32Array]",qt={};qt[Kj]=qt[Qj]=qt[Yj]=qt[Xj]=qt[Wj]=qt[Zj]=qt[Jj]=qt[ek]=qt[tk]=!0;qt[Dj]=qt[Lj]=qt[Gj]=qt[jj]=qt[$j]=qt[kj]=qt[Mj]=qt[Pj]=qt[Vj]=qt[Uj]=qt[qj]=qt[Bj]=qt[zj]=qt[Hj]=qt[Fj]=!1;function nk(n){return Ea(n)&&jS(n.length)&&!!qt[qc(n)]}function ev(n){return function(e){return n(e)}}var PS=typeof rs=="object"&&rs&&!rs.nodeType&&rs,Gu=PS&&typeof ss=="object"&&ss&&!ss.nodeType&&ss,rk=Gu&&Gu.exports===PS,Fg=rk&&RS.process,Nc=(function(){try{var n=Gu&&Gu.require&&Gu.require("util").types;return n||Fg&&Fg.binding&&Fg.binding("util")}catch{}})(),UE=Nc&&Nc.isTypedArray,tv=UE?ev(UE):nk,sk=Object.prototype,ik=sk.hasOwnProperty;function VS(n,e){var t=ul(n),r=!t&&Ly(n),a=!t&&!r&&sh(n),l=!t&&!r&&!a&&tv(n),u=t||r||a||l,d=u?Aj(n.length,String):[],m=d.length;for(var p in n)(e||ik.call(n,p))&&!(u&&(p=="length"||a&&(p=="offset"||p=="parent")||l&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||DS(p,m)))&&d.push(p);return d}function US(n,e){return function(t){return n(e(t))}}var ak=US(Object.keys,Object),ok=Object.prototype,lk=ok.hasOwnProperty;function ck(n){if(!J0(n))return ak(n);var e=[];for(var t in Object(n))lk.call(n,t)&&t!="constructor"&&e.push(t);return e}function uk(n){return _m(n)?VS(n):ck(n)}function hk(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var dk=Object.prototype,fk=dk.hasOwnProperty;function mk(n){if(!jo(n))return hk(n);var e=J0(n),t=[];for(var r in n)r=="constructor"&&(e||!fk.call(n,r))||t.push(r);return t}function qS(n){return _m(n)?VS(n,!0):mk(n)}var ih=bl(Object,"create");function pk(){this.__data__=ih?ih(null):{},this.size=0}function gk(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var yk="__lodash_hash_undefined__",vk=Object.prototype,bk=vk.hasOwnProperty;function _k(n){var e=this.__data__;if(ih){var t=e[n];return t===yk?void 0:t}return bk.call(e,n)?e[n]:void 0}var xk=Object.prototype,Ek=xk.hasOwnProperty;function wk(n){var e=this.__data__;return ih?e[n]!==void 0:Ek.call(e,n)}var Tk="__lodash_hash_undefined__";function Ak(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=ih&&e===void 0?Tk:e,this}function hl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}hl.prototype.clear=pk;hl.prototype.delete=gk;hl.prototype.get=_k;hl.prototype.has=wk;hl.prototype.set=Ak;function Sk(){this.__data__=[],this.size=0}function xm(n,e){for(var t=n.length;t--;)if(Ch(n[t][0],e))return t;return-1}var Nk=Array.prototype,Ck=Nk.splice;function Rk(n){var e=this.__data__,t=xm(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():Ck.call(e,t,1),--this.size,!0}function Ik(n){var e=this.__data__,t=xm(e,n);return t<0?void 0:e[t][1]}function Ok(n){return xm(this.__data__,n)>-1}function Dk(n,e){var t=this.__data__,r=xm(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Na(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Na.prototype.clear=Sk;Na.prototype.delete=Rk;Na.prototype.get=Ik;Na.prototype.has=Ok;Na.prototype.set=Dk;var ah=bl(Li,"Map");function Lk(){this.size=0,this.__data__={hash:new hl,map:new(ah||Na),string:new hl}}function jk(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Em(n,e){var t=n.__data__;return jk(e)?t[typeof e=="string"?"string":"hash"]:t.map}function kk(n){var e=Em(this,n).delete(n);return this.size-=e?1:0,e}function Mk(n){return Em(this,n).get(n)}function Pk(n){return Em(this,n).has(n)}function Vk(n,e){var t=Em(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function _l(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}_l.prototype.clear=Lk;_l.prototype.delete=kk;_l.prototype.get=Mk;_l.prototype.has=Pk;_l.prototype.set=Vk;function Uk(n,e){for(var t=-1,r=e.length,a=n.length;++t<r;)n[a+t]=e[t];return n}var BS=US(Object.getPrototypeOf,Object),qk="[object Object]",Bk=Function.prototype,zk=Object.prototype,zS=Bk.toString,Hk=zk.hasOwnProperty,Fk=zS.call(Object);function Gk(n){if(!Ea(n)||qc(n)!=qk)return!1;var e=BS(n);if(e===null)return!0;var t=Hk.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&zS.call(t)==Fk}function $k(){this.__data__=new Na,this.size=0}function Kk(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function Qk(n){return this.__data__.get(n)}function Yk(n){return this.__data__.has(n)}var Xk=200;function Wk(n,e){var t=this.__data__;if(t instanceof Na){var r=t.__data__;if(!ah||r.length<Xk-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new _l(r)}return t.set(n,e),this.size=t.size,this}function Ri(n){var e=this.__data__=new Na(n);this.size=e.size}Ri.prototype.clear=$k;Ri.prototype.delete=Kk;Ri.prototype.get=Qk;Ri.prototype.has=Yk;Ri.prototype.set=Wk;var HS=typeof rs=="object"&&rs&&!rs.nodeType&&rs,qE=HS&&typeof ss=="object"&&ss&&!ss.nodeType&&ss,Zk=qE&&qE.exports===HS,BE=Zk?Li.Buffer:void 0,zE=BE?BE.allocUnsafe:void 0;function FS(n,e){if(e)return n.slice();var t=n.length,r=zE?zE(t):new n.constructor(t);return n.copy(r),r}function Jk(n,e){for(var t=-1,r=n==null?0:n.length,a=0,l=[];++t<r;){var u=n[t];e(u,t,n)&&(l[a++]=u)}return l}function eM(){return[]}var tM=Object.prototype,nM=tM.propertyIsEnumerable,HE=Object.getOwnPropertySymbols,rM=HE?function(n){return n==null?[]:(n=Object(n),Jk(HE(n),function(e){return nM.call(n,e)}))}:eM;function sM(n,e,t){var r=e(n);return ul(n)?r:Uk(r,t(n))}function jy(n){return sM(n,uk,rM)}var ky=bl(Li,"DataView"),My=bl(Li,"Promise"),Py=bl(Li,"Set"),FE="[object Map]",iM="[object Object]",GE="[object Promise]",$E="[object Set]",KE="[object WeakMap]",QE="[object DataView]",aM=vl(ky),oM=vl(ah),lM=vl(My),cM=vl(Py),uM=vl(Dy),Ys=qc;(ky&&Ys(new ky(new ArrayBuffer(1)))!=QE||ah&&Ys(new ah)!=FE||My&&Ys(My.resolve())!=GE||Py&&Ys(new Py)!=$E||Dy&&Ys(new Dy)!=KE)&&(Ys=function(n){var e=qc(n),t=e==iM?n.constructor:void 0,r=t?vl(t):"";if(r)switch(r){case aM:return QE;case oM:return FE;case lM:return GE;case cM:return $E;case uM:return KE}return e});var hM=Object.prototype,dM=hM.hasOwnProperty;function fM(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&dM.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var zf=Li.Uint8Array;function nv(n){var e=new n.constructor(n.byteLength);return new zf(e).set(new zf(n)),e}function mM(n,e){var t=nv(n.buffer);return new n.constructor(t,n.byteOffset,n.byteLength)}var pM=/\w*$/;function gM(n){var e=new n.constructor(n.source,pM.exec(n));return e.lastIndex=n.lastIndex,e}var YE=No?No.prototype:void 0,XE=YE?YE.valueOf:void 0;function yM(n){return XE?Object(XE.call(n)):{}}function GS(n,e){var t=e?nv(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var vM="[object Boolean]",bM="[object Date]",_M="[object Map]",xM="[object Number]",EM="[object RegExp]",wM="[object Set]",TM="[object String]",AM="[object Symbol]",SM="[object ArrayBuffer]",NM="[object DataView]",CM="[object Float32Array]",RM="[object Float64Array]",IM="[object Int8Array]",OM="[object Int16Array]",DM="[object Int32Array]",LM="[object Uint8Array]",jM="[object Uint8ClampedArray]",kM="[object Uint16Array]",MM="[object Uint32Array]";function PM(n,e,t){var r=n.constructor;switch(e){case SM:return nv(n);case vM:case bM:return new r(+n);case NM:return mM(n);case CM:case RM:case IM:case OM:case DM:case LM:case jM:case kM:case MM:return GS(n,t);case _M:return new r;case xM:case TM:return new r(n);case EM:return gM(n);case wM:return new r;case AM:return yM(n)}}function $S(n){return typeof n.constructor=="function"&&!J0(n)?rj(BS(n)):{}}var VM="[object Map]";function UM(n){return Ea(n)&&Ys(n)==VM}var WE=Nc&&Nc.isMap,qM=WE?ev(WE):UM,BM="[object Set]";function zM(n){return Ea(n)&&Ys(n)==BM}var ZE=Nc&&Nc.isSet,HM=ZE?ev(ZE):zM,FM=1,KS="[object Arguments]",GM="[object Array]",$M="[object Boolean]",KM="[object Date]",QM="[object Error]",QS="[object Function]",YM="[object GeneratorFunction]",XM="[object Map]",WM="[object Number]",YS="[object Object]",ZM="[object RegExp]",JM="[object Set]",e9="[object String]",t9="[object Symbol]",n9="[object WeakMap]",r9="[object ArrayBuffer]",s9="[object DataView]",i9="[object Float32Array]",a9="[object Float64Array]",o9="[object Int8Array]",l9="[object Int16Array]",c9="[object Int32Array]",u9="[object Uint8Array]",h9="[object Uint8ClampedArray]",d9="[object Uint16Array]",f9="[object Uint32Array]",Lt={};Lt[KS]=Lt[GM]=Lt[r9]=Lt[s9]=Lt[$M]=Lt[KM]=Lt[i9]=Lt[a9]=Lt[o9]=Lt[l9]=Lt[c9]=Lt[XM]=Lt[WM]=Lt[YS]=Lt[ZM]=Lt[JM]=Lt[e9]=Lt[t9]=Lt[u9]=Lt[h9]=Lt[d9]=Lt[f9]=!0;Lt[QM]=Lt[QS]=Lt[n9]=!1;function xf(n,e,t,r,a,l){var u,d=e&FM;if(u!==void 0)return u;if(!jo(n))return n;var m=ul(n);if(m)u=fM(n);else{var p=Ys(n),v=p==QS||p==YM;if(sh(n))return FS(n,d);if(p==YS||p==KS||v&&!a)u=v?{}:$S(n);else{if(!Lt[p])return a?n:{};u=PM(n,p,d)}}l||(l=new Ri);var x=l.get(n);if(x)return x;l.set(n,u),HM(n)?n.forEach(function(C){u.add(xf(C,e,t,C,n,l))}):qM(n)&&n.forEach(function(C,L){u.set(L,xf(C,e,t,L,n,l))});var E=jy,A=m?void 0:E(n);return fj(A||n,function(C,L){A&&(L=C,C=n[L]),LS(u,L,xf(C,e,t,L,n,l))}),u}var m9=1,p9=4;function mc(n){return xf(n,m9|p9)}var g9="__lodash_hash_undefined__";function y9(n){return this.__data__.set(n,g9),this}function v9(n){return this.__data__.has(n)}function Hf(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new _l;++e<t;)this.add(n[e])}Hf.prototype.add=Hf.prototype.push=y9;Hf.prototype.has=v9;function b9(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function _9(n,e){return n.has(e)}var x9=1,E9=2;function XS(n,e,t,r,a,l){var u=t&x9,d=n.length,m=e.length;if(d!=m&&!(u&&m>d))return!1;var p=l.get(n),v=l.get(e);if(p&&v)return p==e&&v==n;var x=-1,E=!0,A=t&E9?new Hf:void 0;for(l.set(n,e),l.set(e,n);++x<d;){var C=n[x],L=e[x];if(r)var I=u?r(L,C,x,e,n,l):r(C,L,x,n,e,l);if(I!==void 0){if(I)continue;E=!1;break}if(A){if(!b9(e,function(B,$){if(!_9(A,$)&&(C===B||a(C,B,t,r,l)))return A.push($)})){E=!1;break}}else if(!(C===L||a(C,L,t,r,l))){E=!1;break}}return l.delete(n),l.delete(e),E}function w9(n){var e=-1,t=Array(n.size);return n.forEach(function(r,a){t[++e]=[a,r]}),t}function T9(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var A9=1,S9=2,N9="[object Boolean]",C9="[object Date]",R9="[object Error]",I9="[object Map]",O9="[object Number]",D9="[object RegExp]",L9="[object Set]",j9="[object String]",k9="[object Symbol]",M9="[object ArrayBuffer]",P9="[object DataView]",JE=No?No.prototype:void 0,Gg=JE?JE.valueOf:void 0;function V9(n,e,t,r,a,l,u){switch(t){case P9:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case M9:return!(n.byteLength!=e.byteLength||!l(new zf(n),new zf(e)));case N9:case C9:case O9:return Ch(+n,+e);case R9:return n.name==e.name&&n.message==e.message;case D9:case j9:return n==e+"";case I9:var d=w9;case L9:var m=r&A9;if(d||(d=T9),n.size!=e.size&&!m)return!1;var p=u.get(n);if(p)return p==e;r|=S9,u.set(n,e);var v=XS(d(n),d(e),r,a,l,u);return u.delete(n),v;case k9:if(Gg)return Gg.call(n)==Gg.call(e)}return!1}var U9=1,q9=Object.prototype,B9=q9.hasOwnProperty;function z9(n,e,t,r,a,l){var u=t&U9,d=jy(n),m=d.length,p=jy(e),v=p.length;if(m!=v&&!u)return!1;for(var x=m;x--;){var E=d[x];if(!(u?E in e:B9.call(e,E)))return!1}var A=l.get(n),C=l.get(e);if(A&&C)return A==e&&C==n;var L=!0;l.set(n,e),l.set(e,n);for(var I=u;++x<m;){E=d[x];var B=n[E],$=e[E];if(r)var Y=u?r($,B,E,e,n,l):r(B,$,E,n,e,l);if(!(Y===void 0?B===$||a(B,$,t,r,l):Y)){L=!1;break}I||(I=E=="constructor")}if(L&&!I){var ee=n.constructor,fe=e.constructor;ee!=fe&&"constructor"in n&&"constructor"in e&&!(typeof ee=="function"&&ee instanceof ee&&typeof fe=="function"&&fe instanceof fe)&&(L=!1)}return l.delete(n),l.delete(e),L}var H9=1,ew="[object Arguments]",tw="[object Array]",Zd="[object Object]",F9=Object.prototype,nw=F9.hasOwnProperty;function G9(n,e,t,r,a,l){var u=ul(n),d=ul(e),m=u?tw:Ys(n),p=d?tw:Ys(e);m=m==ew?Zd:m,p=p==ew?Zd:p;var v=m==Zd,x=p==Zd,E=m==p;if(E&&sh(n)){if(!sh(e))return!1;u=!0,v=!1}if(E&&!v)return l||(l=new Ri),u||tv(n)?XS(n,e,t,r,a,l):V9(n,e,m,t,r,a,l);if(!(t&H9)){var A=v&&nw.call(n,"__wrapped__"),C=x&&nw.call(e,"__wrapped__");if(A||C){var L=A?n.value():n,I=C?e.value():e;return l||(l=new Ri),a(L,I,t,r,l)}}return E?(l||(l=new Ri),z9(n,e,t,r,a,l)):!1}function WS(n,e,t,r,a){return n===e?!0:n==null||e==null||!Ea(n)&&!Ea(e)?n!==n&&e!==e:G9(n,e,t,r,WS,a)}function $9(n){return function(e,t,r){for(var a=-1,l=Object(e),u=r(e),d=u.length;d--;){var m=u[++a];if(t(l[m],m,l)===!1)break}return e}}var K9=$9();function Vy(n,e,t){(t!==void 0&&!Ch(n[e],t)||t===void 0&&!(e in n))&&Z0(n,e,t)}function Q9(n){return Ea(n)&&_m(n)}function Uy(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function Y9(n){return vj(n,qS(n))}function X9(n,e,t,r,a,l,u){var d=Uy(n,t),m=Uy(e,t),p=u.get(m);if(p){Vy(n,t,p);return}var v=l?l(d,m,t+"",n,e,u):void 0,x=v===void 0;if(x){var E=ul(m),A=!E&&sh(m),C=!E&&!A&&tv(m);v=m,E||A||C?ul(d)?v=d:Q9(d)?v=ij(d):A?(x=!1,v=FS(m,!0)):C?(x=!1,v=GS(m,!0)):v=[]:Gk(m)||Ly(m)?(v=d,Ly(d)?v=Y9(d):(!jo(d)||W0(d))&&(v=$S(m))):x=!1}x&&(u.set(m,v),a(v,m,r,l,u),u.delete(m)),Vy(n,t,v)}function ZS(n,e,t,r,a){n!==e&&K9(e,function(l,u){if(a||(a=new Ri),jo(l))X9(n,e,u,t,ZS,r,a);else{var d=r?r(Uy(n,u),l,u+"",n,e,a):void 0;d===void 0&&(d=l),Vy(n,u,d)}},qS)}function co(n,e){return WS(n,e)}var bo=wj(function(n,e,t){ZS(n,e,t)}),Oe=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(Oe||{});class Oi{constructor(e,t,r={}){this.attrName=e,this.keyName=t;const a=Oe.TYPE&Oe.ATTRIBUTE;this.scope=r.scope!=null?r.scope&Oe.LEVEL|a:Oe.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}}class pc extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const JS=class qy{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,t)}return null}create(e,t,r){const a=this.query(t);if(a==null)throw new pc(`Unable to create ${t} blot`);const l=a,u=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:l.create(r),d=new l(e,u,r);return qy.blots.set(d.domNode,d),d}find(e,t=!1){return qy.find(e,t)}query(e,t=Oe.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&Oe.LEVEL&Oe.BLOCK?r=this.types.block:e&Oe.LEVEL&Oe.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(a=>(r=this.classes[a],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&t&Oe.LEVEL&r.scope&&t&Oe.TYPE&r.scope?r:null}register(...e){return e.map(t=>{const r="blotName"in t,a="attrName"in t;if(!r&&!a)throw new pc("Invalid definition");if(r&&t.blotName==="abstract")throw new pc("Cannot register abstract class");const l=r?t.blotName:a?t.attrName:void 0;return this.types[l]=t,a?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):r&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(u=>u.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(u=>{(this.tags[u]==null||t.className==null)&&(this.tags[u]=t)}))),t})}};JS.blots=new WeakMap;let Cc=JS;function rw(n,e){return(n.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}class W9 extends Oi{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){rw(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const t=(rw(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}}const si=W9;function $g(n){const e=n.split("-"),t=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+t}class Z9 extends Oi{static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[$g(this.keyName)]=t,!0):!1}remove(e){e.style[$g(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const t=e.style[$g(this.keyName)];return this.canAdd(e,t)?t:""}}const ko=Z9;class J9{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Cc.find(this.domNode);if(e==null)return;const t=Oi.keys(this.domNode),r=si.keys(this.domNode),a=ko.keys(this.domNode);t.concat(r).concat(a).forEach(l=>{const u=e.scroll.query(l,Oe.ATTRIBUTE);u instanceof Oi&&(this.attributes[u.attrName]=u)})}copy(e){Object.keys(this.attributes).forEach(t=>{const r=this.attributes[t].value(this.domNode);e.format(t,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}}const wm=J9,eN=class{constructor(e,t){this.scroll=e,this.domNode=t,Cc.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new pc("Blot definition missing tagName");let t,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?t=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?t=document.createElement(r):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Cc.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,r,a){const l=this.isolate(e,t);if(this.scroll.query(r,Oe.BLOT)!=null&&a)l.wrap(r,a);else if(this.scroll.query(r,Oe.ATTRIBUTE)!=null){const u=this.scroll.create(this.statics.scope);l.wrap(u),u.format(r,a)}}insertAt(e,t,r){const a=r==null?this.scroll.create("text",t):this.scroll.create(t,r),l=this.split(e);this.parent.insertBefore(a,l||void 0)}isolate(e,t){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(t),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new pc(`Cannot wrap ${e}`);return r.appendChild(this),r}};eN.blotName="abstract";let tN=eN;const nN=class extends tN{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};nN.scope=Oe.INLINE_BLOT;let e8=nN;const cr=e8;class t8{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const t=e.slice(1);this.append(...t)}}at(e){const t=this.iterator();let r=t();for(;r&&e>0;)e-=1,r=t();return r}contains(e){const t=this.iterator();let r=t();for(;r;){if(r===e)return!0;r=t()}return!1}indexOf(e){const t=this.iterator();let r=t(),a=0;for(;r;){if(r===e)return a;a+=1,r=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,r=this.head;for(;r!=null;){if(r===e)return t;t+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){const r=this.iterator();let a=r();for(;a;){const l=a.length();if(e<l||t&&e===l&&(a.next==null||a.next.length()!==0))return[a,e];e-=l,a=r()}return[null,0]}forEach(e){const t=this.iterator();let r=t();for(;r;)e(r),r=t()}forEachAt(e,t,r){if(t<=0)return;const[a,l]=this.find(e);let u=e-l;const d=this.iterator(a);let m=d();for(;m&&u<e+t;){const p=m.length();e>u?r(m,e-u,Math.min(t,u+p-e)):r(m,0,Math.min(p,e+t-u)),u+=p,m=d()}}map(e){return this.reduce((t,r)=>(t.push(e(r)),t),[])}reduce(e,t){const r=this.iterator();let a=r();for(;a;)t=e(t,a),a=r();return t}}function sw(n,e){const t=e.find(n);if(t)return t;try{return e.create(n)}catch{const r=e.create(Oe.INLINE);return Array.from(n.childNodes).forEach(a=>{r.domNode.appendChild(a)}),n.parentNode&&n.parentNode.replaceChild(r.domNode,n),r.attach(),r}}const rN=class so extends tN{constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,so.uiClass&&this.uiNode.classList.add(so.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new t8,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const t=sw(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof pc)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(r,a,l)=>{r.deleteAt(a,l)})}descendant(e,t=0){const[r,a]=this.children.find(t);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,a]:r instanceof so?r.descendant(e,a):[null,-1]}descendants(e,t=0,r=Number.MAX_VALUE){let a=[],l=r;return this.children.forEachAt(t,r,(u,d,m)=>{(e.blotName==null&&e(u)||e.blotName!=null&&u instanceof e)&&a.push(u),u instanceof so&&(a=a.concat(u.descendants(e,d,l))),l-=m}),a}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(r=>t instanceof r)||(t.statics.scope===Oe.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof so?t.unwrap():t.remove())})}formatAt(e,t,r,a){this.children.forEachAt(e,t,(l,u,d)=>{l.formatAt(u,d,r,a)})}insertAt(e,t,r){const[a,l]=this.children.find(e);if(a)a.insertAt(l,t,r);else{const u=r==null?this.scroll.create("text",t):this.scroll.create(t,r);this.appendChild(u)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(r=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(r=>{e.insertBefore(r,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){const[r,a]=this.children.find(e,t),l=[[this,e]];return r instanceof so?l.concat(r.path(a,t)):(r!=null&&l.push([r,a]),l)}removeChild(e){this.children.remove(e)}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return r instanceof so&&this.moveChildren(r),super.replaceWith(r)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(a,l,u)=>{const d=a.split(l,t);d!=null&&r.appendChild(d)}),r}splitAfter(e){const t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){const r=[],a=[];e.forEach(l=>{l.target===this.domNode&&l.type==="childList"&&(r.push(...l.addedNodes),a.push(...l.removedNodes))}),a.forEach(l=>{if(l.parentNode!=null&&l.tagName!=="IFRAME"&&document.body.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const u=this.scroll.find(l);u!=null&&(u.domNode.parentNode==null||u.domNode.parentNode===this.domNode)&&u.detach()}),r.filter(l=>l.parentNode===this.domNode&&l!==this.uiNode).sort((l,u)=>l===u?0:l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(l=>{let u=null;l.nextSibling!=null&&(u=this.scroll.find(l.nextSibling));const d=sw(l,this.scroll);(d.next!==u||d.next==null)&&(d.parent!=null&&d.parent.removeChild(this),this.insertBefore(d,u||void 0))}),this.enforceAllowedChildren()}};rN.uiClass="";let n8=rN;const ei=n8;function r8(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}const sc=class ic extends ei{static create(e){return super.create(e)}static formats(e,t){const r=t.query(ic.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new wm(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(r=>{r instanceof ic||(r=r.wrap(ic.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,Oe.INLINE);if(r==null)return;r instanceof Oi?this.attributes.attribute(r,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,a){this.formats()[r]!=null||this.scroll.query(r,Oe.ATTRIBUTE)?this.isolate(e,t).format(r,a):super.formatAt(e,t,r,a)}optimize(e){super.optimize(e);const t=this.formats();if(Object.keys(t).length===0)return this.unwrap();const r=this.next;r instanceof ic&&r.prev===this&&r8(t,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,t){const r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,t){const r=super.wrap(e,t);return r instanceof ic&&this.attributes.move(r),r}};sc.allowedChildren=[sc,cr],sc.blotName="inline",sc.scope=Oe.INLINE_BLOT,sc.tagName="SPAN";let s8=sc;const rv=s8,ac=class By extends ei{static create(e){return super.create(e)}static formats(e,t){const r=t.query(By.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new wm(this.domNode)}format(e,t){const r=this.scroll.query(e,Oe.BLOCK);r!=null&&(r instanceof Oi?this.attributes.attribute(r,t):e===this.statics.blotName&&!t?this.replaceWith(By.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,a){this.scroll.query(r,Oe.BLOCK)!=null?this.format(r,a):super.formatAt(e,t,r,a)}insertAt(e,t,r){if(r==null||this.scroll.query(t,Oe.INLINE)!=null)super.insertAt(e,t,r);else{const a=this.split(e);if(a!=null){const l=this.scroll.create(t,r);a.parent.insertBefore(l,a)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){const r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};ac.blotName="block",ac.scope=Oe.BLOCK_BLOT,ac.tagName="P",ac.allowedChildren=[rv,ac,cr];let i8=ac;const oh=i8,zy=class extends ei{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,r,a){super.formatAt(e,t,r,a),this.enforceAllowedChildren()}insertAt(e,t,r){super.insertAt(e,t,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};zy.blotName="container",zy.scope=Oe.BLOCK_BLOT;let a8=zy;const Tm=a8;class o8 extends cr{static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,r,a){e===0&&t===this.length()?this.format(r,a):super.formatAt(e,t,r,a)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const os=o8,l8={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},c8=100,oc=class extends ei{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,l8),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const r=this.registry.find(e,t);return r?r.scroll===this?r:t?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,t=Oe.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,t)}formatAt(e,t,r,a){this.update(),super.formatAt(e,t,r,a)}insertAt(e,t,r){this.update(),super.insertAt(e,t,r)}optimize(e=[],t={}){super.optimize(t);const r=t.mutationsMap||new WeakMap;let a=Array.from(this.observer.takeRecords());for(;a.length>0;)e.push(a.pop());const l=(m,p=!0)=>{m==null||m===this||m.domNode.parentNode!=null&&(r.has(m.domNode)||r.set(m.domNode,[]),p&&l(m.parent))},u=m=>{r.has(m.domNode)&&(m instanceof ei&&m.children.forEach(u),r.delete(m.domNode),m.optimize(t))};let d=e;for(let m=0;d.length>0;m+=1){if(m>=c8)throw new Error("[Parchment] Maximum optimize iterations reached");for(d.forEach(p=>{const v=this.find(p.target,!0);v!=null&&(v.domNode===p.target&&(p.type==="childList"?(l(this.find(p.previousSibling,!1)),Array.from(p.addedNodes).forEach(x=>{const E=this.find(x,!1);l(E,!1),E instanceof ei&&E.children.forEach(A=>{l(A,!1)})})):p.type==="attributes"&&l(v.prev)),l(v))}),this.children.forEach(u),d=Array.from(this.observer.takeRecords()),a=d.slice();a.length>0;)e.push(a.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(a=>{const l=this.find(a.target,!0);return l==null?null:r.has(l.domNode)?(r.get(l.domNode).push(a),null):(r.set(l.domNode,[a]),l)}).forEach(a=>{a!=null&&a!==this&&r.has(a.domNode)&&a.update(r.get(a.domNode)||[],t)}),t.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),t),this.optimize(e,t)}};oc.blotName="scroll",oc.defaultChild=oh,oc.allowedChildren=[oh,Tm],oc.scope=Oe.BLOCK_BLOT,oc.tagName="DIV";let u8=oc;const sv=u8,Hy=class sN extends cr{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,r){r==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof sN&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,t){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Hy.blotName="text",Hy.scope=Oe.INLINE_BLOT;let h8=Hy;const Ff=h8,d8=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Oi,AttributorStore:wm,BlockBlot:oh,ClassAttributor:si,ContainerBlot:Tm,EmbedBlot:os,InlineBlot:rv,LeafBlot:cr,ParentBlot:ei,Registry:Cc,Scope:Oe,ScrollBlot:sv,StyleAttributor:ko,TextBlot:Ff},Symbol.toStringTag,{value:"Module"}));var Jd={exports:{}},Kg,iw;function f8(){if(iw)return Kg;iw=1;var n=-1,e=1,t=0;function r(S,k,N,ge,pe){if(S===k)return S?[[t,S]]:[];if(N!=null){var H=P(S,k,N);if(H)return H}var J=d(S,k),ce=S.substring(0,J);S=S.substring(J),k=k.substring(J),J=p(S,k);var be=S.substring(S.length-J);S=S.substring(0,S.length-J),k=k.substring(0,k.length-J);var ve=a(S,k);return ce&&ve.unshift([t,ce]),be&&ve.push([t,be]),$(ve,pe),ge&&x(ve),ve}function a(S,k){var N;if(!S)return[[e,k]];if(!k)return[[n,S]];var ge=S.length>k.length?S:k,pe=S.length>k.length?k:S,H=ge.indexOf(pe);if(H!==-1)return N=[[e,ge.substring(0,H)],[t,pe],[e,ge.substring(H+pe.length)]],S.length>k.length&&(N[0][0]=N[2][0]=n),N;if(pe.length===1)return[[n,S],[e,k]];var J=v(S,k);if(J){var ce=J[0],be=J[1],ve=J[2],V=J[3],X=J[4],he=r(ce,ve),me=r(be,V);return he.concat([[t,X]],me)}return l(S,k)}function l(S,k){for(var N=S.length,ge=k.length,pe=Math.ceil((N+ge)/2),H=pe,J=2*pe,ce=new Array(J),be=new Array(J),ve=0;ve<J;ve++)ce[ve]=-1,be[ve]=-1;ce[H+1]=0,be[H+1]=0;for(var V=N-ge,X=V%2!==0,he=0,me=0,ye=0,Te=0,De=0;De<pe;De++){for(var Ie=-De+he;Ie<=De-me;Ie+=2){var Le=H+Ie,Qe;Ie===-De||Ie!==De&&ce[Le-1]<ce[Le+1]?Qe=ce[Le+1]:Qe=ce[Le-1]+1;for(var We=Qe-Ie;Qe<N&&We<ge&&S.charAt(Qe)===k.charAt(We);)Qe++,We++;if(ce[Le]=Qe,Qe>N)me+=2;else if(We>ge)he+=2;else if(X){var tt=H+V-Ie;if(tt>=0&&tt<J&&be[tt]!==-1){var ot=N-be[tt];if(Qe>=ot)return u(S,k,Qe,We)}}}for(var ft=-De+ye;ft<=De-Te;ft+=2){var tt=H+ft,ot;ft===-De||ft!==De&&be[tt-1]<be[tt+1]?ot=be[tt+1]:ot=be[tt-1]+1;for(var tn=ot-ft;ot<N&&tn<ge&&S.charAt(N-ot-1)===k.charAt(ge-tn-1);)ot++,tn++;if(be[tt]=ot,ot>N)Te+=2;else if(tn>ge)ye+=2;else if(!X){var Le=H+V-ft;if(Le>=0&&Le<J&&ce[Le]!==-1){var Qe=ce[Le],We=H+Qe-Le;if(ot=N-ot,Qe>=ot)return u(S,k,Qe,We)}}}}return[[n,S],[e,k]]}function u(S,k,N,ge){var pe=S.substring(0,N),H=k.substring(0,ge),J=S.substring(N),ce=k.substring(ge),be=r(pe,H),ve=r(J,ce);return be.concat(ve)}function d(S,k){if(!S||!k||S.charAt(0)!==k.charAt(0))return 0;for(var N=0,ge=Math.min(S.length,k.length),pe=ge,H=0;N<pe;)S.substring(H,pe)==k.substring(H,pe)?(N=pe,H=N):ge=pe,pe=Math.floor((ge-N)/2+N);return Y(S.charCodeAt(pe-1))&&pe--,pe}function m(S,k){var N=S.length,ge=k.length;if(N==0||ge==0)return 0;N>ge?S=S.substring(N-ge):N<ge&&(k=k.substring(0,N));var pe=Math.min(N,ge);if(S==k)return pe;for(var H=0,J=1;;){var ce=S.substring(pe-J),be=k.indexOf(ce);if(be==-1)return H;J+=be,(be==0||S.substring(pe-J)==k.substring(0,J))&&(H=J,J++)}}function p(S,k){if(!S||!k||S.slice(-1)!==k.slice(-1))return 0;for(var N=0,ge=Math.min(S.length,k.length),pe=ge,H=0;N<pe;)S.substring(S.length-pe,S.length-H)==k.substring(k.length-pe,k.length-H)?(N=pe,H=N):ge=pe,pe=Math.floor((ge-N)/2+N);return ee(S.charCodeAt(S.length-pe))&&pe--,pe}function v(S,k){var N=S.length>k.length?S:k,ge=S.length>k.length?k:S;if(N.length<4||ge.length*2<N.length)return null;function pe(me,ye,Te){for(var De=me.substring(Te,Te+Math.floor(me.length/4)),Ie=-1,Le="",Qe,We,tt,ot;(Ie=ye.indexOf(De,Ie+1))!==-1;){var ft=d(me.substring(Te),ye.substring(Ie)),tn=p(me.substring(0,Te),ye.substring(0,Ie));Le.length<tn+ft&&(Le=ye.substring(Ie-tn,Ie)+ye.substring(Ie,Ie+ft),Qe=me.substring(0,Te-tn),We=me.substring(Te+ft),tt=ye.substring(0,Ie-tn),ot=ye.substring(Ie+ft))}return Le.length*2>=me.length?[Qe,We,tt,ot,Le]:null}var H=pe(N,ge,Math.ceil(N.length/4)),J=pe(N,ge,Math.ceil(N.length/2)),ce;if(!H&&!J)return null;J?H?ce=H[4].length>J[4].length?H:J:ce=J:ce=H;var be,ve,V,X;S.length>k.length?(be=ce[0],ve=ce[1],V=ce[2],X=ce[3]):(V=ce[0],X=ce[1],be=ce[2],ve=ce[3]);var he=ce[4];return[be,ve,V,X,he]}function x(S){for(var k=!1,N=[],ge=0,pe=null,H=0,J=0,ce=0,be=0,ve=0;H<S.length;)S[H][0]==t?(N[ge++]=H,J=be,ce=ve,be=0,ve=0,pe=S[H][1]):(S[H][0]==e?be+=S[H][1].length:ve+=S[H][1].length,pe&&pe.length<=Math.max(J,ce)&&pe.length<=Math.max(be,ve)&&(S.splice(N[ge-1],0,[n,pe]),S[N[ge-1]+1][0]=e,ge--,ge--,H=ge>0?N[ge-1]:-1,J=0,ce=0,be=0,ve=0,pe=null,k=!0)),H++;for(k&&$(S),B(S),H=1;H<S.length;){if(S[H-1][0]==n&&S[H][0]==e){var V=S[H-1][1],X=S[H][1],he=m(V,X),me=m(X,V);he>=me?(he>=V.length/2||he>=X.length/2)&&(S.splice(H,0,[t,X.substring(0,he)]),S[H-1][1]=V.substring(0,V.length-he),S[H+1][1]=X.substring(he),H++):(me>=V.length/2||me>=X.length/2)&&(S.splice(H,0,[t,V.substring(0,me)]),S[H-1][0]=e,S[H-1][1]=X.substring(0,X.length-me),S[H+1][0]=n,S[H+1][1]=V.substring(me),H++),H++}H++}}var E=/[^a-zA-Z0-9]/,A=/\s/,C=/[\r\n]/,L=/\n\r?\n$/,I=/^\r?\n\r?\n/;function B(S){function k(me,ye){if(!me||!ye)return 6;var Te=me.charAt(me.length-1),De=ye.charAt(0),Ie=Te.match(E),Le=De.match(E),Qe=Ie&&Te.match(A),We=Le&&De.match(A),tt=Qe&&Te.match(C),ot=We&&De.match(C),ft=tt&&me.match(L),tn=ot&&ye.match(I);return ft||tn?5:tt||ot?4:Ie&&!Qe&&We?3:Qe||We?2:Ie||Le?1:0}for(var N=1;N<S.length-1;){if(S[N-1][0]==t&&S[N+1][0]==t){var ge=S[N-1][1],pe=S[N][1],H=S[N+1][1],J=p(ge,pe);if(J){var ce=pe.substring(pe.length-J);ge=ge.substring(0,ge.length-J),pe=ce+pe.substring(0,pe.length-J),H=ce+H}for(var be=ge,ve=pe,V=H,X=k(ge,pe)+k(pe,H);pe.charAt(0)===H.charAt(0);){ge+=pe.charAt(0),pe=pe.substring(1)+H.charAt(0),H=H.substring(1);var he=k(ge,pe)+k(pe,H);he>=X&&(X=he,be=ge,ve=pe,V=H)}S[N-1][1]!=be&&(be?S[N-1][1]=be:(S.splice(N-1,1),N--),S[N][1]=ve,V?S[N+1][1]=V:(S.splice(N+1,1),N--))}N++}}function $(S,k){S.push([t,""]);for(var N=0,ge=0,pe=0,H="",J="",ce;N<S.length;){if(N<S.length-1&&!S[N][1]){S.splice(N,1);continue}switch(S[N][0]){case e:pe++,J+=S[N][1],N++;break;case n:ge++,H+=S[N][1],N++;break;case t:var be=N-pe-ge-1;if(k){if(be>=0&&xe(S[be][1])){var ve=S[be][1].slice(-1);if(S[be][1]=S[be][1].slice(0,-1),H=ve+H,J=ve+J,!S[be][1]){S.splice(be,1),N--;var V=be-1;S[V]&&S[V][0]===e&&(pe++,J=S[V][1]+J,V--),S[V]&&S[V][0]===n&&(ge++,H=S[V][1]+H,V--),be=V}}if(fe(S[N][1])){var ve=S[N][1].charAt(0);S[N][1]=S[N][1].slice(1),H+=ve,J+=ve}}if(N<S.length-1&&!S[N][1]){S.splice(N,1);break}if(H.length>0||J.length>0){H.length>0&&J.length>0&&(ce=d(J,H),ce!==0&&(be>=0?S[be][1]+=J.substring(0,ce):(S.splice(0,0,[t,J.substring(0,ce)]),N++),J=J.substring(ce),H=H.substring(ce)),ce=p(J,H),ce!==0&&(S[N][1]=J.substring(J.length-ce)+S[N][1],J=J.substring(0,J.length-ce),H=H.substring(0,H.length-ce)));var X=pe+ge;H.length===0&&J.length===0?(S.splice(N-X,X),N=N-X):H.length===0?(S.splice(N-X,X,[e,J]),N=N-X+1):J.length===0?(S.splice(N-X,X,[n,H]),N=N-X+1):(S.splice(N-X,X,[n,H],[e,J]),N=N-X+2)}N!==0&&S[N-1][0]===t?(S[N-1][1]+=S[N][1],S.splice(N,1)):N++,pe=0,ge=0,H="",J="";break}}S[S.length-1][1]===""&&S.pop();var he=!1;for(N=1;N<S.length-1;)S[N-1][0]===t&&S[N+1][0]===t&&(S[N][1].substring(S[N][1].length-S[N-1][1].length)===S[N-1][1]?(S[N][1]=S[N-1][1]+S[N][1].substring(0,S[N][1].length-S[N-1][1].length),S[N+1][1]=S[N-1][1]+S[N+1][1],S.splice(N-1,1),he=!0):S[N][1].substring(0,S[N+1][1].length)==S[N+1][1]&&(S[N-1][1]+=S[N+1][1],S[N][1]=S[N][1].substring(S[N+1][1].length)+S[N+1][1],S.splice(N+1,1),he=!0)),N++;he&&$(S,k)}function Y(S){return S>=55296&&S<=56319}function ee(S){return S>=56320&&S<=57343}function fe(S){return ee(S.charCodeAt(0))}function xe(S){return Y(S.charCodeAt(S.length-1))}function M(S){for(var k=[],N=0;N<S.length;N++)S[N][1].length>0&&k.push(S[N]);return k}function j(S,k,N,ge){return xe(S)||fe(ge)?null:M([[t,S],[n,k],[e,N],[t,ge]])}function P(S,k,N){var ge=typeof N=="number"?{index:N,length:0}:N.oldRange,pe=typeof N=="number"?null:N.newRange,H=S.length,J=k.length;if(ge.length===0&&(pe===null||pe.length===0)){var ce=ge.index,be=S.slice(0,ce),ve=S.slice(ce),V=pe?pe.index:null;e:{var X=ce+J-H;if(V!==null&&V!==X||X<0||X>J)break e;var he=k.slice(0,X),me=k.slice(X);if(me!==ve)break e;var ye=Math.min(ce,X),Te=be.slice(0,ye),De=he.slice(0,ye);if(Te!==De)break e;var Ie=be.slice(ye),Le=he.slice(ye);return j(Te,Ie,Le,ve)}e:{if(V!==null&&V!==ce)break e;var Qe=ce,he=k.slice(0,Qe),me=k.slice(Qe);if(he!==be)break e;var We=Math.min(H-Qe,J-Qe),tt=ve.slice(ve.length-We),ot=me.slice(me.length-We);if(tt!==ot)break e;var Ie=ve.slice(0,ve.length-We),Le=me.slice(0,me.length-We);return j(be,Ie,Le,tt)}}if(ge.length>0&&pe&&pe.length===0)e:{var Te=S.slice(0,ge.index),tt=S.slice(ge.index+ge.length),ye=Te.length,We=tt.length;if(J<ye+We)break e;var De=k.slice(0,ye),ot=k.slice(J-We);if(Te!==De||tt!==ot)break e;var Ie=S.slice(ye,H-We),Le=k.slice(ye,J-We);return j(Te,Ie,Le,tt)}return null}function F(S,k,N,ge){return r(S,k,N,ge,!0)}return F.INSERT=e,F.DELETE=n,F.EQUAL=t,Kg=F,Kg}var Mu={exports:{}};Mu.exports;var aw;function iN(){return aw||(aw=1,(function(n,e){var t=200,r="__lodash_hash_undefined__",a=9007199254740991,l="[object Arguments]",u="[object Array]",d="[object Boolean]",m="[object Date]",p="[object Error]",v="[object Function]",x="[object GeneratorFunction]",E="[object Map]",A="[object Number]",C="[object Object]",L="[object Promise]",I="[object RegExp]",B="[object Set]",$="[object String]",Y="[object Symbol]",ee="[object WeakMap]",fe="[object ArrayBuffer]",xe="[object DataView]",M="[object Float32Array]",j="[object Float64Array]",P="[object Int8Array]",F="[object Int16Array]",S="[object Int32Array]",k="[object Uint8Array]",N="[object Uint8ClampedArray]",ge="[object Uint16Array]",pe="[object Uint32Array]",H=/[\\^$.*+?()[\]{}|]/g,J=/\w*$/,ce=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,ve={};ve[l]=ve[u]=ve[fe]=ve[xe]=ve[d]=ve[m]=ve[M]=ve[j]=ve[P]=ve[F]=ve[S]=ve[E]=ve[A]=ve[C]=ve[I]=ve[B]=ve[$]=ve[Y]=ve[k]=ve[N]=ve[ge]=ve[pe]=!0,ve[p]=ve[v]=ve[ee]=!1;var V=typeof uo=="object"&&uo&&uo.Object===Object&&uo,X=typeof self=="object"&&self&&self.Object===Object&&self,he=V||X||Function("return this")(),me=e&&!e.nodeType&&e,ye=me&&!0&&n&&!n.nodeType&&n,Te=ye&&ye.exports===me;function De(_,O){return _.set(O[0],O[1]),_}function Ie(_,O){return _.add(O),_}function Le(_,O){for(var q=-1,ne=_?_.length:0;++q<ne&&O(_[q],q,_)!==!1;);return _}function Qe(_,O){for(var q=-1,ne=O.length,Me=_.length;++q<ne;)_[Me+q]=O[q];return _}function We(_,O,q,ne){for(var Me=-1,Ae=_?_.length:0;++Me<Ae;)q=O(q,_[Me],Me,_);return q}function tt(_,O){for(var q=-1,ne=Array(_);++q<_;)ne[q]=O(q);return ne}function ot(_,O){return _?.[O]}function ft(_){var O=!1;if(_!=null&&typeof _.toString!="function")try{O=!!(_+"")}catch{}return O}function tn(_){var O=-1,q=Array(_.size);return _.forEach(function(ne,Me){q[++O]=[Me,ne]}),q}function Vr(_,O){return function(q){return _(O(q))}}function ai(_){var O=-1,q=Array(_.size);return _.forEach(function(ne){q[++O]=ne}),q}var ki=Array.prototype,Ht=Function.prototype,It=Object.prototype,Er=he["__core-js_shared__"],Ra=(function(){var _=/[^.]+$/.exec(Er&&Er.keys&&Er.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""})(),Mi=Ht.toString,Ot=It.hasOwnProperty,wr=It.toString,Pi=RegExp("^"+Mi.call(Ot).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ur=Te?he.Buffer:void 0,hr=he.Symbol,Vi=he.Uint8Array,kn=Vr(Object.getPrototypeOf,Object),Ui=Object.create,qi=It.propertyIsEnumerable,dr=ki.splice,Zt=Object.getOwnPropertySymbols,Tn=Ur?Ur.isBuffer:void 0,Dt=Vr(Object.keys,Object),Ms=pn(he,"DataView"),Tr=pn(he,"Map"),Zn=pn(he,"Promise"),Mn=pn(he,"Set"),qr=pn(he,"WeakMap"),Et=pn(Object,"create"),Jn=ln(Ms),In=ln(Tr),Pn=ln(Zn),Bi=ln(Mn),oi=ln(qr),An=hr?hr.prototype:void 0,ls=An?An.valueOf:void 0;function Br(_){var O=-1,q=_?_.length:0;for(this.clear();++O<q;){var ne=_[O];this.set(ne[0],ne[1])}}function Ps(){this.__data__=Et?Et(null):{}}function zi(_){return this.has(_)&&delete this.__data__[_]}function Hi(_){var O=this.__data__;if(Et){var q=O[_];return q===r?void 0:q}return Ot.call(O,_)?O[_]:void 0}function cs(_){var O=this.__data__;return Et?O[_]!==void 0:Ot.call(O,_)}function fr(_,O){var q=this.__data__;return q[_]=Et&&O===void 0?r:O,this}Br.prototype.clear=Ps,Br.prototype.delete=zi,Br.prototype.get=Hi,Br.prototype.has=cs,Br.prototype.set=fr;function nn(_){var O=-1,q=_?_.length:0;for(this.clear();++O<q;){var ne=_[O];this.set(ne[0],ne[1])}}function mr(){this.__data__=[]}function pr(_){var O=this.__data__,q=Un(O,_);if(q<0)return!1;var ne=O.length-1;return q==ne?O.pop():dr.call(O,q,1),!0}function Ft(_){var O=this.__data__,q=Un(O,_);return q<0?void 0:O[q][1]}function rn(_){return Un(this.__data__,_)>-1}function Ar(_,O){var q=this.__data__,ne=Un(q,_);return ne<0?q.push([_,O]):q[ne][1]=O,this}nn.prototype.clear=mr,nn.prototype.delete=pr,nn.prototype.get=Ft,nn.prototype.has=rn,nn.prototype.set=Ar;function Jt(_){var O=-1,q=_?_.length:0;for(this.clear();++O<q;){var ne=_[O];this.set(ne[0],ne[1])}}function Mo(){this.__data__={hash:new Br,map:new(Tr||nn),string:new Br}}function Ia(_){return fs(this,_).delete(_)}function Oa(_){return fs(this,_).get(_)}function Sr(_){return fs(this,_).has(_)}function li(_,O){return fs(this,_).set(_,O),this}Jt.prototype.clear=Mo,Jt.prototype.delete=Ia,Jt.prototype.get=Oa,Jt.prototype.has=Sr,Jt.prototype.set=li;function kt(_){this.__data__=new nn(_)}function er(){this.__data__=new nn}function Vn(_){return this.__data__.delete(_)}function Nr(_){return this.__data__.get(_)}function Gt(_){return this.__data__.has(_)}function Fi(_,O){var q=this.__data__;if(q instanceof nn){var ne=q.__data__;if(!Tr||ne.length<t-1)return ne.push([_,O]),this;q=this.__data__=new Jt(ne)}return q.set(_,O),this}kt.prototype.clear=er,kt.prototype.delete=Vn,kt.prototype.get=Nr,kt.prototype.has=Gt,kt.prototype.set=Fi;function us(_,O){var q=Fr(_)||zn(_)?tt(_.length,String):[],ne=q.length,Me=!!ne;for(var Ae in _)Ot.call(_,Ae)&&!(Me&&(Ae=="length"||La(Ae,ne)))&&q.push(Ae);return q}function gr(_,O,q){var ne=_[O];(!(Ot.call(_,O)&&Hr(ne,q))||q===void 0&&!(O in _))&&(_[O]=q)}function Un(_,O){for(var q=_.length;q--;)if(Hr(_[q][0],O))return q;return-1}function tr(_,O){return _&&hi(O,qs(O),_)}function Vs(_,O,q,ne,Me,Ae,$e){var Xe;if(ne&&(Xe=Ae?ne(_,Me,Ae,$e):ne(_)),Xe!==void 0)return Xe;if(!Ye(_))return _;var bt=Fr(_);if(bt){if(Xe=Ki(_),!O)return ui(_,Xe)}else{var Ze=Ir(_),Nt=Ze==v||Ze==x;if(sr(_))return Mt(_,O);if(Ze==C||Ze==l||Nt&&!Ae){if(ft(_))return Ae?_:{};if(Xe=nr(Nt?{}:_),!O)return $i(_,tr(Xe,_))}else{if(!ve[Ze])return Ae?_:{};Xe=di(_,Ze,Vs,O)}}$e||($e=new kt);var cn=$e.get(_);if(cn)return cn;if($e.set(_,Xe),!bt)var Pt=q?ds(_):qs(_);return Le(Pt||_,function(Qt,sn){Pt&&(sn=Qt,Qt=_[sn]),gr(Xe,sn,Vs(Qt,O,q,ne,sn,_,$e))}),Xe}function Gi(_){return Ye(_)?Ui(_):{}}function Da(_,O,q){var ne=O(_);return Fr(_)?ne:Qe(ne,q(_))}function ci(_){return wr.call(_)}function qn(_){if(!Ye(_)||fi(_))return!1;var O=Dn(_)||ft(_)?Pi:ce;return O.test(ln(_))}function $t(_){if(!rr(_))return Dt(_);var O=[];for(var q in Object(_))Ot.call(_,q)&&q!="constructor"&&O.push(q);return O}function Mt(_,O){if(O)return _.slice();var q=new _.constructor(_.length);return _.copy(q),q}function Cr(_){var O=new _.constructor(_.byteLength);return new Vi(O).set(new Vi(_)),O}function zr(_,O){var q=O?Cr(_.buffer):_.buffer;return new _.constructor(q,_.byteOffset,_.byteLength)}function ct(_,O,q){var ne=O?q(tn(_),!0):tn(_);return We(ne,De,new _.constructor)}function hs(_){var O=new _.constructor(_.source,J.exec(_));return O.lastIndex=_.lastIndex,O}function Rr(_,O,q){var ne=O?q(ai(_),!0):ai(_);return We(ne,Ie,new _.constructor)}function Us(_){return ls?Object(ls.call(_)):{}}function On(_,O){var q=O?Cr(_.buffer):_.buffer;return new _.constructor(q,_.byteOffset,_.length)}function ui(_,O){var q=-1,ne=_.length;for(O||(O=Array(ne));++q<ne;)O[q]=_[q];return O}function hi(_,O,q,ne){q||(q={});for(var Me=-1,Ae=O.length;++Me<Ae;){var $e=O[Me],Xe=void 0;gr(q,$e,Xe===void 0?_[$e]:Xe)}return q}function $i(_,O){return hi(_,Kt(_),O)}function ds(_){return Da(_,qs,Kt)}function fs(_,O){var q=_.__data__;return ms(O)?q[typeof O=="string"?"string":"hash"]:q.map}function pn(_,O){var q=ot(_,O);return qn(q)?q:void 0}var Kt=Zt?Vr(Zt,Object):Bs,Ir=ci;(Ms&&Ir(new Ms(new ArrayBuffer(1)))!=xe||Tr&&Ir(new Tr)!=E||Zn&&Ir(Zn.resolve())!=L||Mn&&Ir(new Mn)!=B||qr&&Ir(new qr)!=ee)&&(Ir=function(_){var O=wr.call(_),q=O==C?_.constructor:void 0,ne=q?ln(q):void 0;if(ne)switch(ne){case Jn:return xe;case In:return E;case Pn:return L;case Bi:return B;case oi:return ee}return O});function Ki(_){var O=_.length,q=_.constructor(O);return O&&typeof _[0]=="string"&&Ot.call(_,"index")&&(q.index=_.index,q.input=_.input),q}function nr(_){return typeof _.constructor=="function"&&!rr(_)?Gi(kn(_)):{}}function di(_,O,q,ne){var Me=_.constructor;switch(O){case fe:return Cr(_);case d:case m:return new Me(+_);case xe:return zr(_,ne);case M:case j:case P:case F:case S:case k:case N:case ge:case pe:return On(_,ne);case E:return ct(_,ne,q);case A:case $:return new Me(_);case I:return hs(_);case B:return Rr(_,ne,q);case Y:return Us(_)}}function La(_,O){return O=O??a,!!O&&(typeof _=="number"||be.test(_))&&_>-1&&_%1==0&&_<O}function ms(_){var O=typeof _;return O=="string"||O=="number"||O=="symbol"||O=="boolean"?_!=="__proto__":_===null}function fi(_){return!!Ra&&Ra in _}function rr(_){var O=_&&_.constructor,q=typeof O=="function"&&O.prototype||It;return _===q}function ln(_){if(_!=null){try{return Mi.call(_)}catch{}try{return _+""}catch{}}return""}function Bn(_){return Vs(_,!0,!0)}function Hr(_,O){return _===O||_!==_&&O!==O}function zn(_){return ps(_)&&Ot.call(_,"callee")&&(!qi.call(_,"callee")||wr.call(_)==l)}var Fr=Array.isArray;function Gr(_){return _!=null&&gs(_.length)&&!Dn(_)}function ps(_){return yr(_)&&Gr(_)}var sr=Tn||Qi;function Dn(_){var O=Ye(_)?wr.call(_):"";return O==v||O==x}function gs(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=a}function Ye(_){var O=typeof _;return!!_&&(O=="object"||O=="function")}function yr(_){return!!_&&typeof _=="object"}function qs(_){return Gr(_)?us(_):$t(_)}function Bs(){return[]}function Qi(){return!1}n.exports=Bn})(Mu,Mu.exports)),Mu.exports}var Pu={exports:{}};Pu.exports;var ow;function aN(){return ow||(ow=1,(function(n,e){var t=200,r="__lodash_hash_undefined__",a=1,l=2,u=9007199254740991,d="[object Arguments]",m="[object Array]",p="[object AsyncFunction]",v="[object Boolean]",x="[object Date]",E="[object Error]",A="[object Function]",C="[object GeneratorFunction]",L="[object Map]",I="[object Number]",B="[object Null]",$="[object Object]",Y="[object Promise]",ee="[object Proxy]",fe="[object RegExp]",xe="[object Set]",M="[object String]",j="[object Symbol]",P="[object Undefined]",F="[object WeakMap]",S="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",ge="[object Float64Array]",pe="[object Int8Array]",H="[object Int16Array]",J="[object Int32Array]",ce="[object Uint8Array]",be="[object Uint8ClampedArray]",ve="[object Uint16Array]",V="[object Uint32Array]",X=/[\\^$.*+?()[\]{}|]/g,he=/^\[object .+?Constructor\]$/,me=/^(?:0|[1-9]\d*)$/,ye={};ye[N]=ye[ge]=ye[pe]=ye[H]=ye[J]=ye[ce]=ye[be]=ye[ve]=ye[V]=!0,ye[d]=ye[m]=ye[S]=ye[v]=ye[k]=ye[x]=ye[E]=ye[A]=ye[L]=ye[I]=ye[$]=ye[fe]=ye[xe]=ye[M]=ye[F]=!1;var Te=typeof uo=="object"&&uo&&uo.Object===Object&&uo,De=typeof self=="object"&&self&&self.Object===Object&&self,Ie=Te||De||Function("return this")(),Le=e&&!e.nodeType&&e,Qe=Le&&!0&&n&&!n.nodeType&&n,We=Qe&&Qe.exports===Le,tt=We&&Te.process,ot=(function(){try{return tt&&tt.binding&&tt.binding("util")}catch{}})(),ft=ot&&ot.isTypedArray;function tn(_,O){for(var q=-1,ne=_==null?0:_.length,Me=0,Ae=[];++q<ne;){var $e=_[q];O($e,q,_)&&(Ae[Me++]=$e)}return Ae}function Vr(_,O){for(var q=-1,ne=O.length,Me=_.length;++q<ne;)_[Me+q]=O[q];return _}function ai(_,O){for(var q=-1,ne=_==null?0:_.length;++q<ne;)if(O(_[q],q,_))return!0;return!1}function ki(_,O){for(var q=-1,ne=Array(_);++q<_;)ne[q]=O(q);return ne}function Ht(_){return function(O){return _(O)}}function It(_,O){return _.has(O)}function Er(_,O){return _?.[O]}function Ra(_){var O=-1,q=Array(_.size);return _.forEach(function(ne,Me){q[++O]=[Me,ne]}),q}function Mi(_,O){return function(q){return _(O(q))}}function Ot(_){var O=-1,q=Array(_.size);return _.forEach(function(ne){q[++O]=ne}),q}var wr=Array.prototype,Pi=Function.prototype,Ur=Object.prototype,hr=Ie["__core-js_shared__"],Vi=Pi.toString,kn=Ur.hasOwnProperty,Ui=(function(){var _=/[^.]+$/.exec(hr&&hr.keys&&hr.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""})(),qi=Ur.toString,dr=RegExp("^"+Vi.call(kn).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zt=We?Ie.Buffer:void 0,Tn=Ie.Symbol,Dt=Ie.Uint8Array,Ms=Ur.propertyIsEnumerable,Tr=wr.splice,Zn=Tn?Tn.toStringTag:void 0,Mn=Object.getOwnPropertySymbols,qr=Zt?Zt.isBuffer:void 0,Et=Mi(Object.keys,Object),Jn=Kt(Ie,"DataView"),In=Kt(Ie,"Map"),Pn=Kt(Ie,"Promise"),Bi=Kt(Ie,"Set"),oi=Kt(Ie,"WeakMap"),An=Kt(Object,"create"),ls=ln(Jn),Br=ln(In),Ps=ln(Pn),zi=ln(Bi),Hi=ln(oi),cs=Tn?Tn.prototype:void 0,fr=cs?cs.valueOf:void 0;function nn(_){var O=-1,q=_==null?0:_.length;for(this.clear();++O<q;){var ne=_[O];this.set(ne[0],ne[1])}}function mr(){this.__data__=An?An(null):{},this.size=0}function pr(_){var O=this.has(_)&&delete this.__data__[_];return this.size-=O?1:0,O}function Ft(_){var O=this.__data__;if(An){var q=O[_];return q===r?void 0:q}return kn.call(O,_)?O[_]:void 0}function rn(_){var O=this.__data__;return An?O[_]!==void 0:kn.call(O,_)}function Ar(_,O){var q=this.__data__;return this.size+=this.has(_)?0:1,q[_]=An&&O===void 0?r:O,this}nn.prototype.clear=mr,nn.prototype.delete=pr,nn.prototype.get=Ft,nn.prototype.has=rn,nn.prototype.set=Ar;function Jt(_){var O=-1,q=_==null?0:_.length;for(this.clear();++O<q;){var ne=_[O];this.set(ne[0],ne[1])}}function Mo(){this.__data__=[],this.size=0}function Ia(_){var O=this.__data__,q=Mt(O,_);if(q<0)return!1;var ne=O.length-1;return q==ne?O.pop():Tr.call(O,q,1),--this.size,!0}function Oa(_){var O=this.__data__,q=Mt(O,_);return q<0?void 0:O[q][1]}function Sr(_){return Mt(this.__data__,_)>-1}function li(_,O){var q=this.__data__,ne=Mt(q,_);return ne<0?(++this.size,q.push([_,O])):q[ne][1]=O,this}Jt.prototype.clear=Mo,Jt.prototype.delete=Ia,Jt.prototype.get=Oa,Jt.prototype.has=Sr,Jt.prototype.set=li;function kt(_){var O=-1,q=_==null?0:_.length;for(this.clear();++O<q;){var ne=_[O];this.set(ne[0],ne[1])}}function er(){this.size=0,this.__data__={hash:new nn,map:new(In||Jt),string:new nn}}function Vn(_){var O=pn(this,_).delete(_);return this.size-=O?1:0,O}function Nr(_){return pn(this,_).get(_)}function Gt(_){return pn(this,_).has(_)}function Fi(_,O){var q=pn(this,_),ne=q.size;return q.set(_,O),this.size+=q.size==ne?0:1,this}kt.prototype.clear=er,kt.prototype.delete=Vn,kt.prototype.get=Nr,kt.prototype.has=Gt,kt.prototype.set=Fi;function us(_){var O=-1,q=_==null?0:_.length;for(this.__data__=new kt;++O<q;)this.add(_[O])}function gr(_){return this.__data__.set(_,r),this}function Un(_){return this.__data__.has(_)}us.prototype.add=us.prototype.push=gr,us.prototype.has=Un;function tr(_){var O=this.__data__=new Jt(_);this.size=O.size}function Vs(){this.__data__=new Jt,this.size=0}function Gi(_){var O=this.__data__,q=O.delete(_);return this.size=O.size,q}function Da(_){return this.__data__.get(_)}function ci(_){return this.__data__.has(_)}function qn(_,O){var q=this.__data__;if(q instanceof Jt){var ne=q.__data__;if(!In||ne.length<t-1)return ne.push([_,O]),this.size=++q.size,this;q=this.__data__=new kt(ne)}return q.set(_,O),this.size=q.size,this}tr.prototype.clear=Vs,tr.prototype.delete=Gi,tr.prototype.get=Da,tr.prototype.has=ci,tr.prototype.set=qn;function $t(_,O){var q=zn(_),ne=!q&&Hr(_),Me=!q&&!ne&&Gr(_),Ae=!q&&!ne&&!Me&&yr(_),$e=q||ne||Me||Ae,Xe=$e?ki(_.length,String):[],bt=Xe.length;for(var Ze in _)kn.call(_,Ze)&&!($e&&(Ze=="length"||Me&&(Ze=="offset"||Ze=="parent")||Ae&&(Ze=="buffer"||Ze=="byteLength"||Ze=="byteOffset")||di(Ze,bt)))&&Xe.push(Ze);return Xe}function Mt(_,O){for(var q=_.length;q--;)if(Bn(_[q][0],O))return q;return-1}function Cr(_,O,q){var ne=O(_);return zn(_)?ne:Vr(ne,q(_))}function zr(_){return _==null?_===void 0?P:B:Zn&&Zn in Object(_)?Ir(_):rr(_)}function ct(_){return Ye(_)&&zr(_)==d}function hs(_,O,q,ne,Me){return _===O?!0:_==null||O==null||!Ye(_)&&!Ye(O)?_!==_&&O!==O:Rr(_,O,q,ne,hs,Me)}function Rr(_,O,q,ne,Me,Ae){var $e=zn(_),Xe=zn(O),bt=$e?m:nr(_),Ze=Xe?m:nr(O);bt=bt==d?$:bt,Ze=Ze==d?$:Ze;var Nt=bt==$,cn=Ze==$,Pt=bt==Ze;if(Pt&&Gr(_)){if(!Gr(O))return!1;$e=!0,Nt=!1}if(Pt&&!Nt)return Ae||(Ae=new tr),$e||yr(_)?hi(_,O,q,ne,Me,Ae):$i(_,O,bt,q,ne,Me,Ae);if(!(q&a)){var Qt=Nt&&kn.call(_,"__wrapped__"),sn=cn&&kn.call(O,"__wrapped__");if(Qt||sn){var $r=Qt?_.value():_,Hn=sn?O.value():O;return Ae||(Ae=new tr),Me($r,Hn,q,ne,Ae)}}return Pt?(Ae||(Ae=new tr),ds(_,O,q,ne,Me,Ae)):!1}function Us(_){if(!gs(_)||ms(_))return!1;var O=sr(_)?dr:he;return O.test(ln(_))}function On(_){return Ye(_)&&Dn(_.length)&&!!ye[zr(_)]}function ui(_){if(!fi(_))return Et(_);var O=[];for(var q in Object(_))kn.call(_,q)&&q!="constructor"&&O.push(q);return O}function hi(_,O,q,ne,Me,Ae){var $e=q&a,Xe=_.length,bt=O.length;if(Xe!=bt&&!($e&&bt>Xe))return!1;var Ze=Ae.get(_);if(Ze&&Ae.get(O))return Ze==O;var Nt=-1,cn=!0,Pt=q&l?new us:void 0;for(Ae.set(_,O),Ae.set(O,_);++Nt<Xe;){var Qt=_[Nt],sn=O[Nt];if(ne)var $r=$e?ne(sn,Qt,Nt,O,_,Ae):ne(Qt,sn,Nt,_,O,Ae);if($r!==void 0){if($r)continue;cn=!1;break}if(Pt){if(!ai(O,function(Hn,Kr){if(!It(Pt,Kr)&&(Qt===Hn||Me(Qt,Hn,q,ne,Ae)))return Pt.push(Kr)})){cn=!1;break}}else if(!(Qt===sn||Me(Qt,sn,q,ne,Ae))){cn=!1;break}}return Ae.delete(_),Ae.delete(O),cn}function $i(_,O,q,ne,Me,Ae,$e){switch(q){case k:if(_.byteLength!=O.byteLength||_.byteOffset!=O.byteOffset)return!1;_=_.buffer,O=O.buffer;case S:return!(_.byteLength!=O.byteLength||!Ae(new Dt(_),new Dt(O)));case v:case x:case I:return Bn(+_,+O);case E:return _.name==O.name&&_.message==O.message;case fe:case M:return _==O+"";case L:var Xe=Ra;case xe:var bt=ne&a;if(Xe||(Xe=Ot),_.size!=O.size&&!bt)return!1;var Ze=$e.get(_);if(Ze)return Ze==O;ne|=l,$e.set(_,O);var Nt=hi(Xe(_),Xe(O),ne,Me,Ae,$e);return $e.delete(_),Nt;case j:if(fr)return fr.call(_)==fr.call(O)}return!1}function ds(_,O,q,ne,Me,Ae){var $e=q&a,Xe=fs(_),bt=Xe.length,Ze=fs(O),Nt=Ze.length;if(bt!=Nt&&!$e)return!1;for(var cn=bt;cn--;){var Pt=Xe[cn];if(!($e?Pt in O:kn.call(O,Pt)))return!1}var Qt=Ae.get(_);if(Qt&&Ae.get(O))return Qt==O;var sn=!0;Ae.set(_,O),Ae.set(O,_);for(var $r=$e;++cn<bt;){Pt=Xe[cn];var Hn=_[Pt],Kr=O[Pt];if(ne)var Po=$e?ne(Kr,Hn,Pt,O,_,Ae):ne(Hn,Kr,Pt,_,O,Ae);if(!(Po===void 0?Hn===Kr||Me(Hn,Kr,q,ne,Ae):Po)){sn=!1;break}$r||($r=Pt=="constructor")}if(sn&&!$r){var zs=_.constructor,Yi=O.constructor;zs!=Yi&&"constructor"in _&&"constructor"in O&&!(typeof zs=="function"&&zs instanceof zs&&typeof Yi=="function"&&Yi instanceof Yi)&&(sn=!1)}return Ae.delete(_),Ae.delete(O),sn}function fs(_){return Cr(_,qs,Ki)}function pn(_,O){var q=_.__data__;return La(O)?q[typeof O=="string"?"string":"hash"]:q.map}function Kt(_,O){var q=Er(_,O);return Us(q)?q:void 0}function Ir(_){var O=kn.call(_,Zn),q=_[Zn];try{_[Zn]=void 0;var ne=!0}catch{}var Me=qi.call(_);return ne&&(O?_[Zn]=q:delete _[Zn]),Me}var Ki=Mn?function(_){return _==null?[]:(_=Object(_),tn(Mn(_),function(O){return Ms.call(_,O)}))}:Bs,nr=zr;(Jn&&nr(new Jn(new ArrayBuffer(1)))!=k||In&&nr(new In)!=L||Pn&&nr(Pn.resolve())!=Y||Bi&&nr(new Bi)!=xe||oi&&nr(new oi)!=F)&&(nr=function(_){var O=zr(_),q=O==$?_.constructor:void 0,ne=q?ln(q):"";if(ne)switch(ne){case ls:return k;case Br:return L;case Ps:return Y;case zi:return xe;case Hi:return F}return O});function di(_,O){return O=O??u,!!O&&(typeof _=="number"||me.test(_))&&_>-1&&_%1==0&&_<O}function La(_){var O=typeof _;return O=="string"||O=="number"||O=="symbol"||O=="boolean"?_!=="__proto__":_===null}function ms(_){return!!Ui&&Ui in _}function fi(_){var O=_&&_.constructor,q=typeof O=="function"&&O.prototype||Ur;return _===q}function rr(_){return qi.call(_)}function ln(_){if(_!=null){try{return Vi.call(_)}catch{}try{return _+""}catch{}}return""}function Bn(_,O){return _===O||_!==_&&O!==O}var Hr=ct((function(){return arguments})())?ct:function(_){return Ye(_)&&kn.call(_,"callee")&&!Ms.call(_,"callee")},zn=Array.isArray;function Fr(_){return _!=null&&Dn(_.length)&&!sr(_)}var Gr=qr||Qi;function ps(_,O){return hs(_,O)}function sr(_){if(!gs(_))return!1;var O=zr(_);return O==A||O==C||O==p||O==ee}function Dn(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=u}function gs(_){var O=typeof _;return _!=null&&(O=="object"||O=="function")}function Ye(_){return _!=null&&typeof _=="object"}var yr=ft?Ht(ft):On;function qs(_){return Fr(_)?$t(_):ui(_)}function Bs(){return[]}function Qi(){return!1}n.exports=ps})(Pu,Pu.exports)),Pu.exports}var ef={},lw;function m8(){if(lw)return ef;lw=1,Object.defineProperty(ef,"__esModule",{value:!0});const n=iN(),e=aN();var t;return(function(r){function a(m={},p={},v=!1){typeof m!="object"&&(m={}),typeof p!="object"&&(p={});let x=n(p);v||(x=Object.keys(x).reduce((E,A)=>(x[A]!=null&&(E[A]=x[A]),E),{}));for(const E in m)m[E]!==void 0&&p[E]===void 0&&(x[E]=m[E]);return Object.keys(x).length>0?x:void 0}r.compose=a;function l(m={},p={}){typeof m!="object"&&(m={}),typeof p!="object"&&(p={});const v=Object.keys(m).concat(Object.keys(p)).reduce((x,E)=>(e(m[E],p[E])||(x[E]=p[E]===void 0?null:p[E]),x),{});return Object.keys(v).length>0?v:void 0}r.diff=l;function u(m={},p={}){m=m||{};const v=Object.keys(p).reduce((x,E)=>(p[E]!==m[E]&&m[E]!==void 0&&(x[E]=p[E]),x),{});return Object.keys(m).reduce((x,E)=>(m[E]!==p[E]&&p[E]===void 0&&(x[E]=null),x),v)}r.invert=u;function d(m,p,v=!1){if(typeof m!="object")return p;if(typeof p!="object")return;if(!v)return p;const x=Object.keys(p).reduce((E,A)=>(m[A]===void 0&&(E[A]=p[A]),E),{});return Object.keys(x).length>0?x:void 0}r.transform=d})(t||(t={})),ef.default=t,ef}var tf={},cw;function oN(){if(cw)return tf;cw=1,Object.defineProperty(tf,"__esModule",{value:!0});var n;return(function(e){function t(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=t})(n||(n={})),tf.default=n,tf}var nf={},uw;function p8(){if(uw)return nf;uw=1,Object.defineProperty(nf,"__esModule",{value:!0});const n=oN();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const a=this.ops[this.index];if(a){const l=this.offset,u=n.default.length(a);if(r>=u-l?(r=u-l,this.index+=1,this.offset=0):this.offset+=r,typeof a.delete=="number")return{delete:r};{const d={};return a.attributes&&(d.attributes=a.attributes),typeof a.retain=="number"?d.retain=r:typeof a.retain=="object"&&a.retain!==null?d.retain=a.retain:typeof a.insert=="string"?d.insert=a.insert.substr(l,r):d.insert=a.insert,d}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?n.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,a=this.index,l=this.next(),u=this.ops.slice(this.index);return this.offset=r,this.index=a,[l].concat(u)}}else return[]}}return nf.default=e,nf}var hw;function g8(){return hw||(hw=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const t=f8(),r=iN(),a=aN(),l=m8();e.AttributeMap=l.default;const u=oN();e.Op=u.default;const d=p8();e.OpIterator=d.default;const m="\0",p=(x,E)=>{if(typeof x!="object"||x===null)throw new Error(`cannot retain a ${typeof x}`);if(typeof E!="object"||E===null)throw new Error(`cannot retain a ${typeof E}`);const A=Object.keys(x)[0];if(!A||A!==Object.keys(E)[0])throw new Error(`embed types not matched: ${A} != ${Object.keys(E)[0]}`);return[A,x[A],E[A]]};class v{constructor(E){Array.isArray(E)?this.ops=E:E!=null&&Array.isArray(E.ops)?this.ops=E.ops:this.ops=[]}static registerEmbed(E,A){this.handlers[E]=A}static unregisterEmbed(E){delete this.handlers[E]}static getHandler(E){const A=this.handlers[E];if(!A)throw new Error(`no handlers for embed type "${E}"`);return A}insert(E,A){const C={};return typeof E=="string"&&E.length===0?this:(C.insert=E,A!=null&&typeof A=="object"&&Object.keys(A).length>0&&(C.attributes=A),this.push(C))}delete(E){return E<=0?this:this.push({delete:E})}retain(E,A){if(typeof E=="number"&&E<=0)return this;const C={retain:E};return A!=null&&typeof A=="object"&&Object.keys(A).length>0&&(C.attributes=A),this.push(C)}push(E){let A=this.ops.length,C=this.ops[A-1];if(E=r(E),typeof C=="object"){if(typeof E.delete=="number"&&typeof C.delete=="number")return this.ops[A-1]={delete:C.delete+E.delete},this;if(typeof C.delete=="number"&&E.insert!=null&&(A-=1,C=this.ops[A-1],typeof C!="object"))return this.ops.unshift(E),this;if(a(E.attributes,C.attributes)){if(typeof E.insert=="string"&&typeof C.insert=="string")return this.ops[A-1]={insert:C.insert+E.insert},typeof E.attributes=="object"&&(this.ops[A-1].attributes=E.attributes),this;if(typeof E.retain=="number"&&typeof C.retain=="number")return this.ops[A-1]={retain:C.retain+E.retain},typeof E.attributes=="object"&&(this.ops[A-1].attributes=E.attributes),this}}return A===this.ops.length?this.ops.push(E):this.ops.splice(A,0,E),this}chop(){const E=this.ops[this.ops.length-1];return E&&typeof E.retain=="number"&&!E.attributes&&this.ops.pop(),this}filter(E){return this.ops.filter(E)}forEach(E){this.ops.forEach(E)}map(E){return this.ops.map(E)}partition(E){const A=[],C=[];return this.forEach(L=>{(E(L)?A:C).push(L)}),[A,C]}reduce(E,A){return this.ops.reduce(E,A)}changeLength(){return this.reduce((E,A)=>A.insert?E+u.default.length(A):A.delete?E-A.delete:E,0)}length(){return this.reduce((E,A)=>E+u.default.length(A),0)}slice(E=0,A=1/0){const C=[],L=new d.default(this.ops);let I=0;for(;I<A&&L.hasNext();){let B;I<E?B=L.next(E-I):(B=L.next(A-I),C.push(B)),I+=u.default.length(B)}return new v(C)}compose(E){const A=new d.default(this.ops),C=new d.default(E.ops),L=[],I=C.peek();if(I!=null&&typeof I.retain=="number"&&I.attributes==null){let $=I.retain;for(;A.peekType()==="insert"&&A.peekLength()<=$;)$-=A.peekLength(),L.push(A.next());I.retain-$>0&&C.next(I.retain-$)}const B=new v(L);for(;A.hasNext()||C.hasNext();)if(C.peekType()==="insert")B.push(C.next());else if(A.peekType()==="delete")B.push(A.next());else{const $=Math.min(A.peekLength(),C.peekLength()),Y=A.next($),ee=C.next($);if(ee.retain){const fe={};if(typeof Y.retain=="number")fe.retain=typeof ee.retain=="number"?$:ee.retain;else if(typeof ee.retain=="number")Y.retain==null?fe.insert=Y.insert:fe.retain=Y.retain;else{const M=Y.retain==null?"insert":"retain",[j,P,F]=p(Y[M],ee.retain),S=v.getHandler(j);fe[M]={[j]:S.compose(P,F,M==="retain")}}const xe=l.default.compose(Y.attributes,ee.attributes,typeof Y.retain=="number");if(xe&&(fe.attributes=xe),B.push(fe),!C.hasNext()&&a(B.ops[B.ops.length-1],fe)){const M=new v(A.rest());return B.concat(M).chop()}}else typeof ee.delete=="number"&&(typeof Y.retain=="number"||typeof Y.retain=="object"&&Y.retain!==null)&&B.push(ee)}return B.chop()}concat(E){const A=new v(this.ops.slice());return E.ops.length>0&&(A.push(E.ops[0]),A.ops=A.ops.concat(E.ops.slice(1))),A}diff(E,A){if(this.ops===E.ops)return new v;const C=[this,E].map(Y=>Y.map(ee=>{if(ee.insert!=null)return typeof ee.insert=="string"?ee.insert:m;const fe=Y===E?"on":"with";throw new Error("diff() called "+fe+" non-document")}).join("")),L=new v,I=t(C[0],C[1],A,!0),B=new d.default(this.ops),$=new d.default(E.ops);return I.forEach(Y=>{let ee=Y[1].length;for(;ee>0;){let fe=0;switch(Y[0]){case t.INSERT:fe=Math.min($.peekLength(),ee),L.push($.next(fe));break;case t.DELETE:fe=Math.min(ee,B.peekLength()),B.next(fe),L.delete(fe);break;case t.EQUAL:fe=Math.min(B.peekLength(),$.peekLength(),ee);const xe=B.next(fe),M=$.next(fe);a(xe.insert,M.insert)?L.retain(fe,l.default.diff(xe.attributes,M.attributes)):L.push(M).delete(fe);break}ee-=fe}}),L.chop()}eachLine(E,A=`
`){const C=new d.default(this.ops);let L=new v,I=0;for(;C.hasNext();){if(C.peekType()!=="insert")return;const B=C.peek(),$=u.default.length(B)-C.peekLength(),Y=typeof B.insert=="string"?B.insert.indexOf(A,$)-$:-1;if(Y<0)L.push(C.next());else if(Y>0)L.push(C.next(Y));else{if(E(L,C.next(1).attributes||{},I)===!1)return;I+=1,L=new v}}L.length()>0&&E(L,{},I)}invert(E){const A=new v;return this.reduce((C,L)=>{if(L.insert)A.delete(u.default.length(L));else{if(typeof L.retain=="number"&&L.attributes==null)return A.retain(L.retain),C+L.retain;if(L.delete||typeof L.retain=="number"){const I=L.delete||L.retain;return E.slice(C,C+I).forEach($=>{L.delete?A.push($):L.retain&&L.attributes&&A.retain(u.default.length($),l.default.invert(L.attributes,$.attributes))}),C+I}else if(typeof L.retain=="object"&&L.retain!==null){const I=E.slice(C,C+1),B=new d.default(I.ops).next(),[$,Y,ee]=p(L.retain,B.insert),fe=v.getHandler($);return A.retain({[$]:fe.invert(Y,ee)},l.default.invert(L.attributes,B.attributes)),C+1}}return C},0),A.chop()}transform(E,A=!1){if(A=!!A,typeof E=="number")return this.transformPosition(E,A);const C=E,L=new d.default(this.ops),I=new d.default(C.ops),B=new v;for(;L.hasNext()||I.hasNext();)if(L.peekType()==="insert"&&(A||I.peekType()!=="insert"))B.retain(u.default.length(L.next()));else if(I.peekType()==="insert")B.push(I.next());else{const $=Math.min(L.peekLength(),I.peekLength()),Y=L.next($),ee=I.next($);if(Y.delete)continue;if(ee.delete)B.push(ee);else{const fe=Y.retain,xe=ee.retain;let M=typeof xe=="object"&&xe!==null?xe:$;if(typeof fe=="object"&&fe!==null&&typeof xe=="object"&&xe!==null){const j=Object.keys(fe)[0];if(j===Object.keys(xe)[0]){const P=v.getHandler(j);P&&(M={[j]:P.transform(fe[j],xe[j],A)})}}B.retain(M,l.default.transform(Y.attributes,ee.attributes,A))}}return B.chop()}transformPosition(E,A=!1){A=!!A;const C=new d.default(this.ops);let L=0;for(;C.hasNext()&&L<=E;){const I=C.peekLength(),B=C.peekType();if(C.next(),B==="delete"){E-=Math.min(I,E-L);continue}else B==="insert"&&(L<E||!A)&&(E+=I);L+=I}return E}}v.Op=u.default,v.OpIterator=d.default,v.AttributeMap=l.default,v.handlers={},e.default=v,n.exports=v,n.exports.default=v})(Jd,Jd.exports)),Jd.exports}var Is=g8();const Re=Qy(Is);class ii extends os{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}ii.blotName="break";ii.tagName="BR";let ni=class extends Ff{};const y8={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Am(n){return n.replace(/[&<>"']/g,e=>y8[e])}class _r extends rv{static allowedChildren=[_r,ii,os,ni];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,t){const r=_r.order.indexOf(e),a=_r.order.indexOf(t);return r>=0||a>=0?r-a:e===t?0:e<t?-1:1}formatAt(e,t,r,a){if(_r.compare(this.statics.blotName,r)<0&&this.scroll.query(r,Oe.BLOT)){const l=this.isolate(e,t);a&&l.wrap(r,a)}else super.formatAt(e,t,r,a)}optimize(e){if(super.optimize(e),this.parent instanceof _r&&_r.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}const dw=1;class Xn extends oh{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=lN(this)),this.cache.delta}deleteAt(e,t){super.deleteAt(e,t),this.cache={}}formatAt(e,t,r,a){t<=0||(this.scroll.query(r,Oe.BLOCK)?e+t===this.length()&&this.format(r,a):super.formatAt(e,Math.min(t,this.length()-e-1),r,a),this.cache={})}insertAt(e,t,r){if(r!=null){super.insertAt(e,t,r),this.cache={};return}if(t.length===0)return;const a=t.split(`
`),l=a.shift();l.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let u=this;a.reduce((d,m)=>(u=u.split(d,!0),u.insertAt(0,m),m.length),e+l.length)}insertBefore(e,t){const{head:r}=this.children;super.insertBefore(e,t),r instanceof ii&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+dw),this.cache.length}moveChildren(e,t){super.moveChildren(e,t),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t&&(e===0||e>=this.length()-dw)){const a=this.clone();return e===0?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}const r=super.split(e,t);return this.cache={},r}}Xn.blotName="block";Xn.tagName="P";Xn.defaultChild=ii;Xn.allowedChildren=[ii,_r,os,ni];class Rs extends os{attach(){super.attach(),this.attributes=new wm(this.domNode)}delta(){return new Re().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){const r=this.scroll.query(e,Oe.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,t)}formatAt(e,t,r,a){this.format(r,a)}insertAt(e,t,r){if(r!=null){super.insertAt(e,t,r);return}const a=t.split(`
`),l=a.pop(),u=a.map(m=>{const p=this.scroll.create(Xn.blotName);return p.insertAt(0,m),p}),d=this.split(e);u.forEach(m=>{this.parent.insertBefore(m,d)}),l&&this.parent.insertBefore(this.scroll.create("text",l),d)}}Rs.scope=Oe.BLOCK_BLOT;function lN(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(cr).reduce((t,r)=>r.length()===0?t:t.insert(r.value(),Ss(r,{},e)),new Re).insert(`
`,Ss(n))}function Ss(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(e={...e,...n.formats()},t&&delete e["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?e:Ss(n.parent,e,t)}class Xs extends os{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,t,r){super(e,t),this.selection=r,this.textNode=document.createTextNode(Xs.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let r=this,a=0;for(;r!=null&&r.statics.scope!==Oe.BLOCK_BLOT;)a+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Xs.CONTENTS.length,r.optimize(),r.formatAt(a,Xs.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const t=this.prev instanceof ni?this.prev:null,r=t?t.length():0,a=this.next instanceof ni?this.next:null,l=a?a.text:"",{textNode:u}=this,d=u.data.split(Xs.CONTENTS).join("");u.data=Xs.CONTENTS;let m;if(t)m=t,(d||a)&&(t.insertAt(t.length(),d+l),a&&a.remove());else if(a)m=a,a.insertAt(0,d);else{const p=document.createTextNode(d);m=this.scroll.create(p),this.parent.insertBefore(m,this)}if(this.remove(),e){const p=(E,A)=>t&&E===t.domNode?A:E===u?r+A-1:a&&E===a.domNode?r+d.length+A:null,v=p(e.start.node,e.start.offset),x=p(e.end.node,e.end.offset);if(v!==null&&x!==null)return{startNode:m.domNode,startOffset:v,endNode:m.domNode,endOffset:x}}return null}update(e,t){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(t.range=r)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=Xs.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}}var Qg={exports:{}},fw;function v8(){return fw||(fw=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function a(m,p,v){this.fn=m,this.context=p,this.once=v||!1}function l(m,p,v,x,E){if(typeof v!="function")throw new TypeError("The listener must be a function");var A=new a(v,x||m,E),C=t?t+p:p;return m._events[C]?m._events[C].fn?m._events[C]=[m._events[C],A]:m._events[C].push(A):(m._events[C]=A,m._eventsCount++),m}function u(m,p){--m._eventsCount===0?m._events=new r:delete m._events[p]}function d(){this._events=new r,this._eventsCount=0}d.prototype.eventNames=function(){var p=[],v,x;if(this._eventsCount===0)return p;for(x in v=this._events)e.call(v,x)&&p.push(t?x.slice(1):x);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(v)):p},d.prototype.listeners=function(p){var v=t?t+p:p,x=this._events[v];if(!x)return[];if(x.fn)return[x.fn];for(var E=0,A=x.length,C=new Array(A);E<A;E++)C[E]=x[E].fn;return C},d.prototype.listenerCount=function(p){var v=t?t+p:p,x=this._events[v];return x?x.fn?1:x.length:0},d.prototype.emit=function(p,v,x,E,A,C){var L=t?t+p:p;if(!this._events[L])return!1;var I=this._events[L],B=arguments.length,$,Y;if(I.fn){switch(I.once&&this.removeListener(p,I.fn,void 0,!0),B){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,v),!0;case 3:return I.fn.call(I.context,v,x),!0;case 4:return I.fn.call(I.context,v,x,E),!0;case 5:return I.fn.call(I.context,v,x,E,A),!0;case 6:return I.fn.call(I.context,v,x,E,A,C),!0}for(Y=1,$=new Array(B-1);Y<B;Y++)$[Y-1]=arguments[Y];I.fn.apply(I.context,$)}else{var ee=I.length,fe;for(Y=0;Y<ee;Y++)switch(I[Y].once&&this.removeListener(p,I[Y].fn,void 0,!0),B){case 1:I[Y].fn.call(I[Y].context);break;case 2:I[Y].fn.call(I[Y].context,v);break;case 3:I[Y].fn.call(I[Y].context,v,x);break;case 4:I[Y].fn.call(I[Y].context,v,x,E);break;default:if(!$)for(fe=1,$=new Array(B-1);fe<B;fe++)$[fe-1]=arguments[fe];I[Y].fn.apply(I[Y].context,$)}}return!0},d.prototype.on=function(p,v,x){return l(this,p,v,x,!1)},d.prototype.once=function(p,v,x){return l(this,p,v,x,!0)},d.prototype.removeListener=function(p,v,x,E){var A=t?t+p:p;if(!this._events[A])return this;if(!v)return u(this,A),this;var C=this._events[A];if(C.fn)C.fn===v&&(!E||C.once)&&(!x||C.context===x)&&u(this,A);else{for(var L=0,I=[],B=C.length;L<B;L++)(C[L].fn!==v||E&&!C[L].once||x&&C[L].context!==x)&&I.push(C[L]);I.length?this._events[A]=I.length===1?I[0]:I:u(this,A)}return this},d.prototype.removeAllListeners=function(p){var v;return p?(v=t?t+p:p,this._events[v]&&u(this,v)):(this._events=new r,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=t,d.EventEmitter=d,n.exports=d})(Qg)),Qg.exports}var b8=v8();const _8=Qy(b8),Fy=new WeakMap,Gy=["error","warn","log","info"];let $y="warn";function cN(n){if($y&&Gy.indexOf(n)<=Gy.indexOf($y)){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];console[n](...t)}}function Ca(n){return Gy.reduce((e,t)=>(e[t]=cN.bind(console,t,n),e),{})}Ca.level=n=>{$y=n};cN.level=Ca.level;const Yg=Ca("quill:events"),x8=["selectionchange","mousedown","mouseup","click"];x8.forEach(n=>{document.addEventListener(n,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(a=>{const l=Fy.get(a);l&&l.emitter&&l.emitter.handleDOM(...t)})})});class Ne extends _8{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Yg.error)}emit(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Yg.log.call(Yg,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];(this.domListeners[e.type]||[]).forEach(l=>{let{node:u,handler:d}=l;(e.target===u||u.contains(e.target))&&d(e,...r)})}listenDOM(e,t,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:r})}}const Xg=Ca("quill:selection");class dl{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}}class E8{constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new dl(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Ne.sources.USER),1)}),this.emitter.on(Ne.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(Ne.events.SCROLL_UPDATE,(a,l)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const u=l.some(d=>d.type==="characterData"||d.type==="childList"||d.type==="attributes"&&d.target===this.root);this.update(u?Ne.sources.SILENT:a)}catch{}})}),this.emitter.on(Ne.events.SCROLL_OPTIMIZE,(r,a)=>{if(a.range){const{startNode:l,startOffset:u,endNode:d,endOffset:m}=a.range;this.setNativeRange(l,u,d,m),this.update(Ne.sources.SILENT)}}),this.update(Ne.sources.SILENT)}handleComposition(){this.emitter.on(Ne.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Ne.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Ne.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,Oe.BLOCK))){if(r.start.node!==this.cursor.textNode){const a=this.scroll.find(r.start.node,!1);if(a==null)return;if(a instanceof cr){const l=a.split(r.start.offset);a.parent.insertBefore(this.cursor,l)}else a.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;let a,[l,u]=this.scroll.leaf(e);if(l==null)return null;if(t>0&&u===l.length()){const[v]=this.scroll.leaf(e+1);if(v){const[x]=this.scroll.line(e),[E]=this.scroll.line(e+1);x===E&&(l=v,u=0)}}[a,u]=l.position(u,!0);const d=document.createRange();if(t>0)return d.setStart(a,u),[l,u]=this.scroll.leaf(e+t),l==null?null:([a,u]=l.position(u,!0),d.setEnd(a,u),d.getBoundingClientRect());let m="left",p;if(a instanceof Text){if(!a.data.length)return null;u<a.data.length?(d.setStart(a,u),d.setEnd(a,u+1)):(d.setStart(a,u-1),d.setEnd(a,u),m="right"),p=d.getBoundingClientRect()}else{if(!(l.domNode instanceof Element))return null;p=l.domNode.getBoundingClientRect(),u>0&&(m="right")}return{bottom:p.top+p.height,height:p.height,left:p[m],right:p[m],top:p.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const t=e.getRangeAt(0);if(t==null)return null;const r=this.normalizeNative(t);return Xg.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Wg(this.root,document.activeElement)}normalizedToRange(e){const t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);const r=t.map(u=>{const[d,m]=u,p=this.scroll.find(d,!0),v=p.offset(this.scroll);return m===0?v:p instanceof cr?v+p.index(d,m):v+p.length()}),a=Math.min(Math.max(...r),this.scroll.length()-1),l=Math.min(a,...r);return new dl(l,a-l)}normalizeNative(e){if(!Wg(this.root,e.startContainer)||!e.collapsed&&!Wg(this.root,e.endContainer))return null;const t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(r=>{let{node:a,offset:l}=r;for(;!(a instanceof Text)&&a.childNodes.length>0;)if(a.childNodes.length>l)a=a.childNodes[l],l=0;else if(a.childNodes.length===l)a=a.lastChild,a instanceof Text?l=a.data.length:a.childNodes.length>0?l=a.childNodes.length:l=a.childNodes.length+1;else break;r.node=a,r.offset=l}),t}rangeToNative(e){const t=this.scroll.length(),r=(a,l)=>{a=Math.min(t-1,a);const[u,d]=this.scroll.leaf(a);return u?u.position(d,l):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Xg.info("setNativeRange",e,t,r,a),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const u=document.getSelection();if(u!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:d}=this.getNativeRange()||{};if(d==null||l||e!==d.startContainer||t!==d.startOffset||r!==d.endContainer||a!==d.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(a=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const m=document.createRange();m.setStart(e,t),m.setEnd(r,a),u.removeAllRanges(),u.addRange(m)}}else u.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ne.sources.API;if(typeof t=="string"&&(r=t,t=!1),Xg.info("setRange",e),e!=null){const a=this.rangeToNative(e);this.setNativeRange(...a,t)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ne.sources.USER;const t=this.lastRange,[r,a]=this.getRange();if(this.lastRange=r,this.lastNative=a,this.lastRange!=null&&(this.savedRange=this.lastRange),!co(t,this.lastRange)){if(!this.composing&&a!=null&&a.native.collapsed&&a.start.node!==this.cursor.textNode){const u=this.cursor.restore();u&&this.setNativeRange(u.startNode,u.startOffset,u.endNode,u.endOffset)}const l=[Ne.events.SELECTION_CHANGE,mc(this.lastRange),mc(t),e];this.emitter.emit(Ne.events.EDITOR_CHANGE,...l),e!==Ne.sources.SILENT&&this.emitter.emit(...l)}}}function Wg(n,e){try{e.parentNode}catch{return!1}return n.contains(e)}const w8=/^[ -~]*$/;class T8{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();const r=mw(e),a=new Re;return S8(r.ops.slice()).reduce((u,d)=>{const m=Is.Op.length(d);let p=d.attributes||{},v=!1,x=!1;if(d.insert!=null){if(a.retain(m),typeof d.insert=="string"){const C=d.insert;x=!C.endsWith(`
`)&&(t<=u||!!this.scroll.descendant(Rs,u)[0]),this.scroll.insertAt(u,C);const[L,I]=this.scroll.line(u);let B=bo({},Ss(L));if(L instanceof Xn){const[$]=L.descendant(cr,I);$&&(B=bo(B,Ss($)))}p=Is.AttributeMap.diff(B,p)||{}}else if(typeof d.insert=="object"){const C=Object.keys(d.insert)[0];if(C==null)return u;const L=this.scroll.query(C,Oe.INLINE)!=null;if(L)(t<=u||this.scroll.descendant(Rs,u)[0])&&(x=!0);else if(u>0){const[I,B]=this.scroll.descendant(cr,u-1);I instanceof ni?I.value()[B]!==`
`&&(v=!0):I instanceof os&&I.statics.scope===Oe.INLINE_BLOT&&(v=!0)}if(this.scroll.insertAt(u,C,d.insert[C]),L){const[I]=this.scroll.descendant(cr,u);if(I){const B=bo({},Ss(I));p=Is.AttributeMap.diff(B,p)||{}}}}t+=m}else if(a.push(d),d.retain!==null&&typeof d.retain=="object"){const C=Object.keys(d.retain)[0];if(C==null)return u;this.scroll.updateEmbedAt(u,C,d.retain[C])}Object.keys(p).forEach(C=>{this.scroll.formatAt(u,m,C,p[C])});const E=v?1:0,A=x?1:0;return t+=E+A,a.retain(E),a.delete(A),u+m+E+A},0),a.reduce((u,d)=>typeof d.delete=="number"?(this.scroll.deleteAt(u,d.delete),u):u+Is.Op.length(d),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new Re().retain(e).delete(t))}formatLine(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(l=>{this.scroll.lines(e,Math.max(t,1)).forEach(u=>{u.format(l,r[l])})}),this.scroll.optimize();const a=new Re().retain(e).retain(t,mc(r));return this.update(a)}formatText(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(l=>{this.scroll.formatAt(e,t,l,r[l])});const a=new Re().retain(e).retain(t,mc(r));return this.update(a)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new Re)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],a=[];t===0?this.scroll.path(e).forEach(d=>{const[m]=d;m instanceof Xn?r.push(m):m instanceof cr&&a.push(m)}):(r=this.scroll.lines(e,t),a=this.scroll.descendants(cr,e,t));const[l,u]=[r,a].map(d=>{const m=d.shift();if(m==null)return{};let p=Ss(m);for(;Object.keys(p).length>0;){const v=d.shift();if(v==null)return p;p=A8(Ss(v),p)}return p});return{...l,...u}}getHTML(e,t){const[r,a]=this.scroll.line(e);if(r){const l=r.length();return r.length()>=a+t&&!(a===0&&t===l)?lh(r,a,t,!0):lh(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,t){const r=mw(t),a=new Re().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(a)}insertEmbed(e,t,r){return this.scroll.insertAt(e,t,r),this.update(new Re().retain(e).insert({[t]:r}))}insertText(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(r).forEach(a=>{this.scroll.formatAt(e,t.length,a,r[a])}),this.update(new Re().retain(e).insert(t,mc(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==Xn.blotName)return!1;const t=e;return t.children.length>1?!1:t.children.head instanceof ii}removeFormat(e,t){const r=this.getText(e,t),[a,l]=this.scroll.line(e+t);let u=0,d=new Re;a!=null&&(u=a.length()-l,d=a.delta().slice(l,l+u-1).insert(`
`));const p=this.getContents(e,t+u).diff(new Re().insert(r).concat(d)),v=new Re().retain(e).concat(p);return this.applyDelta(v)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const a=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(w8)&&this.scroll.find(t[0].target)){const l=this.scroll.find(t[0].target),u=Ss(l),d=l.offset(this.scroll),m=t[0].oldValue.replace(Xs.CONTENTS,""),p=new Re().insert(m),v=new Re().insert(l.value()),x=r&&{oldRange:pw(r.oldRange,-d),newRange:pw(r.newRange,-d)};e=new Re().retain(d).concat(p.diff(v,x)).reduce((A,C)=>C.insert?A.insert(C.insert,u):A.push(C),new Re),this.delta=a.compose(e)}else this.delta=this.getDelta(),(!e||!co(a.compose(e),this.delta))&&(e=a.diff(this.delta,r));return e}}function lc(n,e,t){if(n.length===0){const[A]=Zg(t.pop());return e<=0?`</li></${A}>`:`</li></${A}>${lc([],e-1,t)}`}const[{child:r,offset:a,length:l,indent:u,type:d},...m]=n,[p,v]=Zg(d);if(u>e)return t.push(d),u===e+1?`<${p}><li${v}>${lh(r,a,l)}${lc(m,u,t)}`:`<${p}><li>${lc(n,e+1,t)}`;const x=t[t.length-1];if(u===e&&d===x)return`</li><li${v}>${lh(r,a,l)}${lc(m,u,t)}`;const[E]=Zg(t.pop());return`</li></${E}>${lc(n,e-1,t)}`}function lh(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(e,t);if(n instanceof ni)return Am(n.value().slice(e,e+t)).replaceAll(" ","&nbsp;");if(n instanceof ei){if(n.statics.blotName==="list-container"){const p=[];return n.children.forEachAt(e,t,(v,x,E)=>{const A="formats"in v&&typeof v.formats=="function"?v.formats():{};p.push({child:v,offset:x,length:E,indent:A.indent||0,type:A.list})}),lc(p,-1,[])}const a=[];if(n.children.forEachAt(e,t,(p,v,x)=>{a.push(lh(p,v,x))}),r||n.statics.blotName==="list")return a.join("");const{outerHTML:l,innerHTML:u}=n.domNode,[d,m]=l.split(`>${u}<`);return d==="<table"?`<table style="border: 1px solid #000;">${a.join("")}<${m}`:`${d}>${a.join("")}<${m}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}function A8(n,e){return Object.keys(e).reduce((t,r)=>{if(n[r]==null)return t;const a=e[r];return a===n[r]?t[r]=a:Array.isArray(a)?a.indexOf(n[r])<0?t[r]=a.concat([n[r]]):t[r]=a:t[r]=[a,n[r]],t},{})}function Zg(n){const e=n==="ordered"?"ol":"ul";switch(n){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function mw(n){return n.reduce((e,t)=>{if(typeof t.insert=="string"){const r=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,t.attributes)}return e.push(t)},new Re)}function pw(n,e){let{index:t,length:r}=n;return new dl(t+e,r)}function S8(n){const e=[];return n.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((a,l)=>{l&&e.push({insert:`
`,attributes:t.attributes}),a&&e.push({insert:a,attributes:t.attributes})}):e.push(t)}),e}class ji{static DEFAULTS={};constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}}const rf="\uFEFF";class iv extends os{constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(rf),this.rightGuard=document.createTextNode(rf),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,r;const a=e.data.split(rf).join("");if(e===this.leftGuard)if(this.prev instanceof ni){const l=this.prev.length();this.prev.insertAt(l,a),t={startNode:this.prev.domNode,startOffset:l+a.length}}else r=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(r),this),t={startNode:r,startOffset:a.length};else e===this.rightGuard&&(this.next instanceof ni?(this.next.insertAt(0,a),t={startNode:this.next.domNode,startOffset:a.length}):(r=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(r),this.next),t={startNode:r,startOffset:a.length}));return e.data=rf,t}update(e,t){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const a=this.restore(r.target);a&&(t.range=a)}})}}class N8{isComposing=!1;constructor(e,t){this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof iv)&&(this.emitter.emit(Ne.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(Ne.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(Ne.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(Ne.events.COMPOSITION_END,e),this.isComposing=!1}}class Bc{static DEFAULTS={modules:{}};static themes={default:Bc};modules={};constructor(e,t){this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}const C8=n=>n.parentElement||n.getRootNode().host||null,R8=n=>{const e=n.getBoundingClientRect(),t="offsetWidth"in n&&Math.abs(e.width)/n.offsetWidth||1,r="offsetHeight"in n&&Math.abs(e.height)/n.offsetHeight||1;return{top:e.top,right:e.left+n.clientWidth*t,bottom:e.top+n.clientHeight*r,left:e.left}},sf=n=>{const e=parseInt(n,10);return Number.isNaN(e)?0:e},gw=(n,e,t,r,a,l)=>n<t&&e>r?0:n<t?-(t-n+a):e>r?e-n>r-t?n+a-t:e-r+l:0,I8=(n,e)=>{const t=n.ownerDocument;let r=e,a=n;for(;a;){const l=a===t.body,u=l?{top:0,right:window.visualViewport?.width??t.documentElement.clientWidth,bottom:window.visualViewport?.height??t.documentElement.clientHeight,left:0}:R8(a),d=getComputedStyle(a),m=gw(r.left,r.right,u.left,u.right,sf(d.scrollPaddingLeft),sf(d.scrollPaddingRight)),p=gw(r.top,r.bottom,u.top,u.bottom,sf(d.scrollPaddingTop),sf(d.scrollPaddingBottom));if(m||p)if(l)t.defaultView?.scrollBy(m,p);else{const{scrollLeft:v,scrollTop:x}=a;p&&(a.scrollTop+=p),m&&(a.scrollLeft+=m);const E=a.scrollLeft-v,A=a.scrollTop-x;r={left:r.left-E,top:r.top-A,right:r.right-E,bottom:r.bottom-A}}a=l||d.position==="fixed"?null:C8(a)}},O8=100,D8=["block","break","cursor","inline","scroll","text"],L8=(n,e,t)=>{const r=new Cc;return D8.forEach(a=>{const l=e.query(a);l&&r.register(l)}),n.forEach(a=>{let l=e.query(a);l||t.error(`Cannot register "${a}" specified in "formats" config. Are you sure it was registered?`);let u=0;for(;l;)if(r.register(l),l="blotName"in l?l.requiredContainer??null:null,u+=1,u>O8){t.error(`Cycle detected in registering blot requiredContainer: "${a}"`);break}}),r},gc=Ca("quill"),af=new Cc;ei.uiClass="ql-ui";class oe{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:af,theme:"default"};static events=Ne.events;static sources=Ne.sources;static version="2.0.3";static imports={delta:Re,parchment:d8,"core/module":ji,"core/theme":Bc};static debug(e){e===!0&&(e="log"),Ca.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Fy.get(e)||af.find(e,t)}static import(e){return this.imports[e]==null&&gc.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],t=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,t):Object.keys(e).forEach(a=>{this.register(a,e[a],t)})}else{const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&gc.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&af.register(t),typeof t.register=="function"&&t.register(af)}}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=j8(e,t),this.container=this.options.container,this.container==null){gc.error("Invalid Quill container",e);return}this.options.debug&&oe.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Fy.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Ne;const a=sv.blotName,l=this.options.registry.query(a);if(!l||!("blotName"in l))throw new Error(`Cannot initialize Quill without "${a}" blot`);if(this.scroll=new l(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new T8(this.scroll),this.selection=new E8(this.scroll,this.emitter),this.composition=new N8(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Ne.events.EDITOR_CHANGE,u=>{u===Ne.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Ne.events.SCROLL_UPDATE,(u,d)=>{const m=this.selection.lastRange,[p]=this.selection.getRange(),v=m&&p?{oldRange:m,newRange:p}:void 0;Qs.call(this,()=>this.editor.update(null,d,v),u)}),this.emitter.on(Ne.events.SCROLL_EMBED_UPDATE,(u,d)=>{const m=this.selection.lastRange,[p]=this.selection.getRange(),v=m&&p?{oldRange:m,newRange:p}:void 0;Qs.call(this,()=>{const x=new Re().retain(u.offset(this)).retain({[u.statics.blotName]:d});return this.editor.update(x,[],v)},oe.sources.USER)}),r){const u=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(u)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,r){return[e,t,,r]=da(e,t,r),Qs.call(this,()=>this.editor.deleteText(e,t),r,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ne.sources.API;return Qs.call(this,()=>{const a=this.getSelection(!0);let l=new Re;if(a==null)return l;if(this.scroll.query(e,Oe.BLOCK))l=this.editor.formatLine(a.index,a.length,{[e]:t});else{if(a.length===0)return this.selection.format(e,t),l;l=this.editor.formatText(a.index,a.length,{[e]:t})}return this.setSelection(a,Ne.sources.SILENT),l},r)}formatLine(e,t,r,a,l){let u;return[e,t,u,l]=da(e,t,r,a,l),Qs.call(this,()=>this.editor.formatLine(e,t,u),l,e,0)}formatText(e,t,r,a,l){let u;return[e,t,u,l]=da(e,t,r,a,l),Qs.call(this,()=>this.editor.formatText(e,t,u),l,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,t):r=this.selection.getBounds(e.index,e.length),!r)return null;const a=this.container.getBoundingClientRect();return{bottom:r.bottom-a.top,height:r.height,left:r.left-a.left,right:r.right-a.left,top:r.top-a.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=da(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=da(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=da(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:oe.sources.API;return Qs.call(this,()=>this.editor.insertEmbed(e,t,r),a,e)}insertText(e,t,r,a,l){let u;return[e,,u,l]=da(e,0,r,a,l),Qs.call(this,()=>this.editor.insertText(e,t,u),l,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,r){return[e,t,,r]=da(e,t,r),Qs.call(this,()=>this.editor.removeFormat(e,t),r,e)}scrollRectIntoView(e){I8(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne.sources.API;return Qs.call(this,()=>{e=new Re(e);const r=this.getLength(),a=this.editor.deleteText(0,r),l=this.editor.insertContents(0,e),u=this.editor.deleteText(this.getLength()-1,1);return a.compose(l).compose(u)},t)}setSelection(e,t,r){e==null?this.selection.setRange(null,t||oe.sources.API):([e,t,,r]=da(e,t,r),this.selection.setRange(new dl(Math.max(0,e),t),r),r!==Ne.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne.sources.API;const r=new Re().insert(e);return this.setContents(r,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ne.sources.USER;const t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne.sources.API;return Qs.call(this,()=>(e=new Re(e),this.editor.applyDelta(e)),t,!0)}}function yw(n){return typeof n=="string"?document.querySelector(n):n}function Jg(n){return Object.entries(n??{}).reduce((e,t)=>{let[r,a]=t;return{...e,[r]:a===!0?{}:a}},{})}function vw(n){return Object.fromEntries(Object.entries(n).filter(e=>e[1]!==void 0))}function j8(n,e){const t=yw(n);if(!t)throw new Error("Invalid Quill container");const a=!e.theme||e.theme===oe.DEFAULTS.theme?Bc:oe.import(`themes/${e.theme}`);if(!a)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:l,...u}=oe.DEFAULTS,{modules:d,...m}=a.DEFAULTS;let p=Jg(e.modules);p!=null&&p.toolbar&&p.toolbar.constructor!==Object&&(p={...p,toolbar:{container:p.toolbar}});const v=bo({},Jg(l),Jg(d),p),x={...u,...vw(m),...vw(e)};let E=e.registry;return E?e.formats&&gc.warn('Ignoring "formats" option because "registry" is specified'):E=e.formats?L8(e.formats,x.registry,gc):x.registry,{...x,registry:E,container:t,theme:a,modules:Object.entries(v).reduce((A,C)=>{let[L,I]=C;if(!I)return A;const B=oe.import(`modules/${L}`);return B==null?(gc.error(`Cannot load ${L} module. Are you sure you registered it?`),A):{...A,[L]:bo({},B.DEFAULTS||{},I)}},{}),bounds:yw(x.bounds)}}function Qs(n,e,t,r){if(!this.isEnabled()&&e===Ne.sources.USER&&!this.allowReadOnlyEdits)return new Re;let a=t==null?null:this.getSelection();const l=this.editor.delta,u=n();if(a!=null&&(t===!0&&(t=a.index),r==null?a=bw(a,u,e):r!==0&&(a=bw(a,t,r,e)),this.setSelection(a,Ne.sources.SILENT)),u.length()>0){const d=[Ne.events.TEXT_CHANGE,u,l,e];this.emitter.emit(Ne.events.EDITOR_CHANGE,...d),e!==Ne.sources.SILENT&&this.emitter.emit(...d)}return u}function da(n,e,t,r,a){let l={};return typeof n.index=="number"&&typeof n.length=="number"?typeof e!="number"?(a=r,r=t,t=e,e=n.length,n=n.index):(e=n.length,n=n.index):typeof e!="number"&&(a=r,r=t,t=e,e=0),typeof t=="object"?(l=t,a=r):typeof t=="string"&&(r!=null?l[t]=r:a=t),a=a||Ne.sources.API,[n,e,l,a]}function bw(n,e,t,r){const a=typeof t=="number"?t:0;if(n==null)return null;let l,u;return e&&typeof e.transformPosition=="function"?[l,u]=[n.index,n.index+n.length].map(d=>e.transformPosition(d,r!==Ne.sources.USER)):[l,u]=[n.index,n.index+n.length].map(d=>d<e||d===e&&r===Ne.sources.USER?d:a>=0?d+a:Math.max(e,d+a)),new dl(l,u-l)}class xl extends Tm{}function _w(n){return n instanceof Xn||n instanceof Rs}function xw(n){return typeof n.updateContent=="function"}class k8 extends sv{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Xn;static allowedChildren=[Xn,Rs,xl];constructor(e,t,r){let{emitter:a}=r;super(e,t),this.emitter=a,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",l=>this.handleDragStart(l))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(Ne.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(Ne.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(Ne.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){const[r,a]=this.line(e),[l]=this.line(e+t);if(super.deleteAt(e,t),l!=null&&r!==l&&a>0){if(r instanceof Rs||l instanceof Rs){this.optimize();return}const u=l.children.head instanceof ii?null:l.children.head;r.moveChildren(l,u),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,r,a){super.formatAt(e,t,r,a),this.optimize()}insertAt(e,t,r){if(e>=this.length())if(r==null||this.scroll.query(t,Oe.BLOCK)==null){const a=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(a),r==null&&t.endsWith(`
`)?a.insertAt(0,t.slice(0,-1),r):a.insertAt(0,t,r)}else{const a=this.scroll.create(t,r);this.appendChild(a)}else super.insertAt(e,t,r);this.optimize()}insertBefore(e,t){if(e.statics.scope===Oe.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,t)}else super.insertBefore(e,t)}insertContents(e,t){const r=this.deltaToRenderBlocks(t.concat(new Re().insert(`
`))),a=r.pop();if(a==null)return;this.batchStart();const l=r.shift();if(l){const m=l.type==="block"&&(l.delta.length()===0||!this.descendant(Rs,e)[0]&&e<this.length()),p=l.type==="block"?l.delta:new Re().insert({[l.key]:l.value});ey(this,e,p);const v=l.type==="block"?1:0,x=e+p.length()+v;m&&this.insertAt(x-1,`
`);const E=Ss(this.line(e)[0]),A=Is.AttributeMap.diff(E,l.attributes)||{};Object.keys(A).forEach(C=>{this.formatAt(x-1,1,C,A[C])}),e=x}let[u,d]=this.children.find(e);if(r.length&&(u&&(u=u.split(d),d=0),r.forEach(m=>{if(m.type==="block"){const p=this.createBlock(m.attributes,u||void 0);ey(p,0,m.delta)}else{const p=this.create(m.key,m.value);this.insertBefore(p,u||void 0),Object.keys(m.attributes).forEach(v=>{p.format(v,m.attributes[v])})}})),a.type==="block"&&a.delta.length()){const m=u?u.offset(u.scroll)+d:this.length();ey(this,m,a.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const t=this.path(e).pop();if(!t)return[null,-1];const[r,a]=t;return r instanceof cr?[r,a]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(_w,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(a,l,u)=>{let d=[],m=u;return a.children.forEachAt(l,u,(p,v,x)=>{_w(p)?d.push(p):p instanceof Tm&&(d=d.concat(r(p,v,m))),m-=x}),d};return r(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(Ne.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=Ne.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:a}=r;const l=this.find(a,!0);return l&&!xw(l)}),e.length>0&&this.emitter.emit(Ne.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(Ne.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,r){const[a]=this.descendant(l=>l instanceof Rs,e);a&&a.statics.blotName===t&&xw(a)&&a.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const t=[];let r=new Re;return e.forEach(a=>{const l=a?.insert;if(l)if(typeof l=="string"){const u=l.split(`
`);u.slice(0,-1).forEach(m=>{r.insert(m,a.attributes),t.push({type:"block",delta:r,attributes:a.attributes??{}}),r=new Re});const d=u[u.length-1];d&&r.insert(d,a.attributes)}else{const u=Object.keys(l)[0];if(!u)return;this.query(u,Oe.INLINE)?r.push(a):(r.length()&&t.push({type:"block",delta:r,attributes:{}}),r=new Re,t.push({type:"blockEmbed",key:u,value:l[u],attributes:a.attributes??{}}))}}),r.length()&&t.push({type:"block",delta:r,attributes:{}}),t}createBlock(e,t){let r;const a={};Object.entries(e).forEach(d=>{let[m,p]=d;this.query(m,Oe.BLOCK&Oe.BLOT)!=null?r=m:a[m]=p});const l=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(l,t||void 0);const u=l.length();return Object.entries(a).forEach(d=>{let[m,p]=d;l.formatAt(0,u,m,p)}),l}}function ey(n,e,t){t.reduce((r,a)=>{const l=Is.Op.length(a);let u=a.attributes||{};if(a.insert!=null){if(typeof a.insert=="string"){const d=a.insert;n.insertAt(r,d);const[m]=n.descendant(cr,r),p=Ss(m);u=Is.AttributeMap.diff(p,u)||{}}else if(typeof a.insert=="object"){const d=Object.keys(a.insert)[0];if(d==null)return r;if(n.insertAt(r,d,a.insert[d]),n.scroll.query(d,Oe.INLINE)!=null){const[p]=n.descendant(cr,r),v=Ss(p);u=Is.AttributeMap.diff(v,u)||{}}}}return Object.keys(u).forEach(d=>{n.formatAt(r,l,d,u[d])}),r+l},e)}const av={scope:Oe.BLOCK,whitelist:["right","center","justify"]},M8=new Oi("align","align",av),uN=new si("align","ql-align",av),hN=new ko("align","text-align",av);class dN extends ko{value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(a=>`00${parseInt(a,10).toString(16)}`.slice(-2)).join("")}`):t}}const P8=new si("color","ql-color",{scope:Oe.INLINE}),ov=new dN("color","color",{scope:Oe.INLINE}),V8=new si("background","ql-bg",{scope:Oe.INLINE}),lv=new dN("background","background-color",{scope:Oe.INLINE});class El extends xl{static create(e){const t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${Am(this.code(e,t))}
</pre>`}}class xr extends Xn{static TAB="  ";static register(){oe.register(El)}}class cv extends _r{}cv.blotName="code";cv.tagName="CODE";xr.blotName="code-block";xr.className="ql-code-block";xr.tagName="DIV";El.blotName="code-block-container";El.className="ql-code-block-container";El.tagName="DIV";El.allowedChildren=[xr];xr.allowedChildren=[ni,ii,Xs];xr.requiredContainer=El;const uv={scope:Oe.BLOCK,whitelist:["rtl"]},fN=new Oi("direction","dir",uv),mN=new si("direction","ql-direction",uv),pN=new ko("direction","direction",uv),gN={scope:Oe.INLINE,whitelist:["serif","monospace"]},yN=new si("font","ql-font",gN);class U8 extends ko{value(e){return super.value(e).replace(/["']/g,"")}}const vN=new U8("font","font-family",gN),bN=new si("size","ql-size",{scope:Oe.INLINE,whitelist:["small","large","huge"]}),_N=new ko("size","font-size",{scope:Oe.INLINE,whitelist:["10px","18px","32px"]}),q8=Ca("quill:keyboard"),B8=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Sm extends ji{static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!t[r]!==e[r]&&t[r]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=H8(e);if(a==null){q8.warn("Attempted to add invalid keyboard binding",a);return}typeof t=="function"&&(t={handler:t}),typeof r=="function"&&(r={handler:r}),(Array.isArray(a.key)?a.key:[a.key]).forEach(u=>{const d={...a,key:u,...t,...r};this.bindings[d.key]=this.bindings[d.key]||[],this.bindings[d.key].push(d)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const a=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(B=>Sm.match(e,B));if(a.length===0)return;const l=oe.find(e.target,!0);if(l&&l.scroll!==this.quill.scroll)return;const u=this.quill.getSelection();if(u==null||!this.quill.hasFocus())return;const[d,m]=this.quill.getLine(u.index),[p,v]=this.quill.getLeaf(u.index),[x,E]=u.length===0?[p,v]:this.quill.getLeaf(u.index+u.length),A=p instanceof Ff?p.value().slice(0,v):"",C=x instanceof Ff?x.value().slice(E):"",L={collapsed:u.length===0,empty:u.length===0&&d.length()<=1,format:this.quill.getFormat(u),line:d,offset:m,prefix:A,suffix:C,event:e};a.some(B=>{if(B.collapsed!=null&&B.collapsed!==L.collapsed||B.empty!=null&&B.empty!==L.empty||B.offset!=null&&B.offset!==L.offset)return!1;if(Array.isArray(B.format)){if(B.format.every($=>L.format[$]==null))return!1}else if(typeof B.format=="object"&&!Object.keys(B.format).every($=>B.format[$]===!0?L.format[$]!=null:B.format[$]===!1?L.format[$]==null:co(B.format[$],L.format[$])))return!1;return B.prefix!=null&&!B.prefix.test(L.prefix)||B.suffix!=null&&!B.suffix.test(L.suffix)?!1:B.handler.call(this,u,L,B)!==!0})&&e.preventDefault()})}handleBackspace(e,t){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let a={};const[l]=this.quill.getLine(e.index);let u=new Re().retain(e.index-r).delete(r);if(t.offset===0){const[d]=this.quill.getLine(e.index-1);if(d&&!(d.statics.blotName==="block"&&d.length()<=1)){const p=l.formats(),v=this.quill.getFormat(e.index-1,1);if(a=Is.AttributeMap.diff(p,v)||{},Object.keys(a).length>0){const x=new Re().retain(e.index+l.length()-2).retain(1,a);u=u.compose(x)}}}this.quill.updateContents(u,oe.sources.USER),this.quill.focus()}handleDelete(e,t){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let a={};const[l]=this.quill.getLine(e.index);let u=new Re().retain(e.index).delete(r);if(t.offset>=l.length()-1){const[d]=this.quill.getLine(e.index+1);if(d){const m=l.formats(),p=this.quill.getFormat(e.index,1);a=Is.AttributeMap.diff(m,p)||{},Object.keys(a).length>0&&(u=u.retain(d.length()-1).retain(1,a))}}this.quill.updateContents(u,oe.sources.USER),this.quill.focus()}handleDeleteRange(e){hv({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){const r=Object.keys(t.format).reduce((l,u)=>(this.quill.scroll.query(u,Oe.BLOCK)&&!Array.isArray(t.format[u])&&(l[u]=t.format[u]),l),{}),a=new Re().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(a,oe.sources.USER),this.quill.setSelection(e.index+1,oe.sources.SILENT),this.quill.focus()}}const z8={bindings:{bold:ty("bold"),italic:ty("italic"),underline:ty("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",oe.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",oe.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,e){e.format.indent!=null?this.quill.format("indent","-1",oe.sources.USER):e.format.list!=null&&this.quill.format("list",!1,oe.sources.USER)}},"indent code-block":Ew(!0),"outdent code-block":Ew(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,oe.sources.USER)}},tab:{key:"Tab",handler(n,e){if(e.format.table)return!0;this.quill.history.cutoff();const t=new Re().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(t,oe.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,oe.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,oe.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,e){const t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(n.index,n.length,t,oe.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){const[e,t]=this.quill.getLine(n.index),r={...e.formats(),list:"checked"},a=new Re().retain(n.index).insert(`
`,r).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,oe.sources.USER),this.quill.setSelection(n.index+1,oe.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,e){const[t,r]=this.quill.getLine(n.index),a=new Re().retain(n.index).insert(`
`,e.format).retain(t.length()-r-1).retain(1,{header:null});this.quill.updateContents(a,oe.sources.USER),this.quill.setSelection(n.index+1,oe.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){const e=this.quill.getModule("table");if(e){const[t,r,a,l]=e.getTable(n),u=F8(t,r,a,l);if(u==null)return;let d=t.offset();if(u<0){const m=new Re().retain(d).insert(`
`);this.quill.updateContents(m,oe.sources.USER),this.quill.setSelection(n.index+1,n.length,oe.sources.SILENT)}else if(u>0){d+=t.length();const m=new Re().retain(d).insert(`
`);this.quill.updateContents(m,oe.sources.USER),this.quill.setSelection(d,oe.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,e){const{event:t,line:r}=e,a=r.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(a-1,oe.sources.USER):this.quill.setSelection(a+r.length(),oe.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,e){if(this.quill.scroll.query("list")==null)return!0;const{length:t}=e.prefix,[r,a]=this.quill.getLine(n.index);if(a>t)return!0;let l;switch(e.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(n.index," ",oe.sources.USER),this.quill.history.cutoff();const u=new Re().retain(n.index-a).delete(t+1).retain(r.length()-2-a).retain(1,{list:l});return this.quill.updateContents(u,oe.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-t,oe.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){const[e,t]=this.quill.getLine(n.index);let r=2,a=e;for(;a!=null&&a.length()<=1&&a.formats()["code-block"];)if(a=a.prev,r-=1,r<=0){const l=new Re().retain(n.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(l,oe.sources.USER),this.quill.setSelection(n.index-1,oe.sources.SILENT),!1}return!0}},"embed left":of("ArrowLeft",!1),"embed left shift":of("ArrowLeft",!0),"embed right":of("ArrowRight",!1),"embed right shift":of("ArrowRight",!0),"table down":ww(!1),"table up":ww(!0)}};Sm.DEFAULTS=z8;function Ew(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(e,t){let{event:r}=t;const a=this.quill.scroll.query("code-block"),{TAB:l}=a;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,l,oe.sources.USER),this.quill.setSelection(e.index+l.length,oe.sources.SILENT);return}const u=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:d,length:m}=e;u.forEach((p,v)=>{n?(p.insertAt(0,l),v===0?d+=l.length:m+=l.length):p.domNode.textContent.startsWith(l)&&(p.deleteAt(0,l.length),v===0?d-=l.length:m-=l.length)}),this.quill.update(oe.sources.USER),this.quill.setSelection(d,m,oe.sources.SILENT)}}}function of(n,e){return{key:n,shiftKey:e,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:a}=r;n==="ArrowRight"&&(a+=r.length+1);const[l]=this.quill.getLeaf(a);return l instanceof os?(n==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,oe.sources.USER):this.quill.setSelection(r.index-1,oe.sources.USER):e?this.quill.setSelection(r.index,r.length+1,oe.sources.USER):this.quill.setSelection(r.index+r.length+1,oe.sources.USER),!1):!0}}}function ty(n){return{key:n[0],shortKey:!0,handler(e,t){this.quill.format(n,!t.format[n],oe.sources.USER)}}}function ww(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){const r=n?"prev":"next",a=t.line,l=a.parent[r];if(l!=null){if(l.statics.blotName==="table-row"){let u=l.children.head,d=a;for(;d.prev!=null;)d=d.prev,u=u.next;const m=u.offset(this.quill.scroll)+Math.min(t.offset,u.length()-1);this.quill.setSelection(m,0,oe.sources.USER)}}else{const u=a.table()[r];u!=null&&(n?this.quill.setSelection(u.offset(this.quill.scroll)+u.length()-1,0,oe.sources.USER):this.quill.setSelection(u.offset(this.quill.scroll),0,oe.sources.USER))}return!1}}}function H8(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=mc(n);else return null;return n.shortKey&&(n[B8]=n.shortKey,delete n.shortKey),n}function hv(n){let{quill:e,range:t}=n;const r=e.getLines(t);let a={};if(r.length>1){const l=r[0].formats(),u=r[r.length-1].formats();a=Is.AttributeMap.diff(u,l)||{}}e.deleteText(t,oe.sources.USER),Object.keys(a).length>0&&e.formatLine(t.index,1,a,oe.sources.USER),e.setSelection(t.index,oe.sources.SILENT)}function F8(n,e,t,r){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?r===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const G8=/font-weight:\s*normal/,$8=["P","OL","UL"],Tw=n=>n&&$8.includes(n.tagName),K8=n=>{Array.from(n.querySelectorAll("br")).filter(e=>Tw(e.previousElementSibling)&&Tw(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},Q8=n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(G8)).forEach(e=>{const t=n.createDocumentFragment();t.append(...e.childNodes),e.parentNode?.replaceChild(t,e)})};function Y8(n){n.querySelector('[id^="docs-internal-guid-"]')&&(Q8(n),K8(n))}const X8=/\bmso-list:[^;]*ignore/i,W8=/\bmso-list:[^;]*\bl(\d+)/i,Z8=/\bmso-list:[^;]*\blevel(\d+)/i,J8=(n,e)=>{const t=n.getAttribute("style"),r=t?.match(W8);if(!r)return null;const a=Number(r[1]),l=t?.match(Z8),u=l?Number(l[1]):1,d=new RegExp(`@list l${a}:level${u}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),m=e.match(d),p=m&&m[1]==="bullet"?"bullet":"ordered";return{id:a,indent:u,type:p,element:n}},e7=n=>{const e=Array.from(n.querySelectorAll("[style*=mso-list]")),t=[],r=[];e.forEach(u=>{(u.getAttribute("style")||"").match(X8)?t.push(u):r.push(u)}),t.forEach(u=>u.parentNode?.removeChild(u));const a=n.documentElement.innerHTML,l=r.map(u=>J8(u,a)).filter(u=>u);for(;l.length;){const u=[];let d=l.shift();for(;d;)u.push(d),d=l.length&&l[0]?.element===d.element.nextElementSibling&&l[0].id===d.id?l.shift():null;const m=document.createElement("ul");u.forEach(x=>{const E=document.createElement("li");E.setAttribute("data-list",x.type),x.indent>1&&E.setAttribute("class",`ql-indent-${x.indent-1}`),E.innerHTML=x.element.innerHTML,m.appendChild(E)});const p=u[0]?.element,{parentNode:v}=p??{};p&&v?.replaceChild(m,p),u.slice(1).forEach(x=>{let{element:E}=x;v?.removeChild(E)})}};function t7(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&e7(n)}const n7=[t7,Y8],r7=n=>{n.documentElement&&n7.forEach(e=>{e(n)})},s7=Ca("quill:clipboard"),i7=[[Node.TEXT_NODE,v7],[Node.TEXT_NODE,Sw],["br",h7],[Node.ELEMENT_NODE,Sw],[Node.ELEMENT_NODE,u7],[Node.ELEMENT_NODE,c7],[Node.ELEMENT_NODE,g7],["li",m7],["ol, ul",p7],["pre",d7],["tr",y7],["b",ny("bold")],["i",ny("italic")],["strike",ny("strike")],["style",f7]],a7=[M8,fN].reduce((n,e)=>(n[e.keyName]=e,n),{}),Aw=[hN,lv,ov,pN,vN,_N].reduce((n,e)=>(n[e.keyName]=e,n),{});class o7 extends ji{static DEFAULTS={matchers:[]};constructor(e,t){super(e,t),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],i7.concat(this.options.matchers??[]).forEach(r=>{let[a,l]=r;this.addMatcher(a,l)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:r}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a[xr.blotName])return new Re().insert(r||"",{[xr.blotName]:a[xr.blotName]});if(!t)return new Re().insert(r||"",a);const l=this.convertHTML(t);return Rh(l,`
`)&&(l.ops[l.ops.length-1].attributes==null||a.table)?l.compose(new Re().retain(l.length()-1).delete(1)):l}normalizeHTML(e){r7(e)}convertHTML(e){const t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);const r=t.body,a=new WeakMap,[l,u]=this.prepareMatching(r,a);return dv(this.quill.scroll,r,l,u,a)}dangerouslyPasteHTML(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oe.sources.API;if(typeof e=="string"){const a=this.convert({html:e,text:""});this.quill.setContents(a,t),this.quill.setSelection(0,oe.sources.SILENT)}else{const a=this.convert({html:t,text:""});this.quill.updateContents(new Re().retain(e).concat(a),r),this.quill.setSelection(e+a.length(),oe.sources.SILENT)}}onCaptureCopy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:a,text:l}=this.onCopy(r,t);e.clipboardData?.setData("text/plain",l),e.clipboardData?.setData("text/html",a),t&&hv({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const t=this.quill.getSelection(!0);if(t==null)return;const r=e.clipboardData?.getData("text/html");let a=e.clipboardData?.getData("text/plain");if(!r&&!a){const u=e.clipboardData?.getData("text/uri-list");u&&(a=this.normalizeURIList(u))}const l=Array.from(e.clipboardData?.files||[]);if(!r&&l.length>0){this.quill.uploader.upload(t,l);return}if(r&&l.length>0){const u=new DOMParser().parseFromString(r,"text/html");if(u.body.childElementCount===1&&u.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(t,l);return}}this.onPaste(t,{html:r,text:a})}onCopy(e){const t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:r,html:a}=t;const l=this.quill.getFormat(e.index),u=this.convert({text:r,html:a},l);s7.log("onPaste",u,{text:r,html:a});const d=new Re().retain(e.index).delete(e.length).concat(u);this.quill.updateContents(d,oe.sources.USER),this.quill.setSelection(d.length()-e.length,oe.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){const r=[],a=[];return this.matchers.forEach(l=>{const[u,d]=l;switch(u){case Node.TEXT_NODE:a.push(d);break;case Node.ELEMENT_NODE:r.push(d);break;default:Array.from(e.querySelectorAll(u)).forEach(m=>{t.has(m)?t.get(m)?.push(d):t.set(m,[d])});break}}),[r,a]}}function wl(n,e,t,r){return r.query(e)?n.reduce((a,l)=>{if(!l.insert)return a;if(l.attributes&&l.attributes[e])return a.push(l);const u=t?{[e]:t}:{};return a.insert(l.insert,{...u,...l.attributes})},new Re):n}function Rh(n,e){let t="";for(let r=n.ops.length-1;r>=0&&t.length<e.length;--r){const a=n.ops[r];if(typeof a.insert!="string")break;t=a.insert+t}return t.slice(-1*e.length)===e}function fo(n,e){if(!(n instanceof Element))return!1;const t=e.query(n);return t&&t.prototype instanceof os?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}function l7(n,e){return n.previousElementSibling&&n.nextElementSibling&&!fo(n.previousElementSibling,e)&&!fo(n.nextElementSibling,e)}const lf=new WeakMap;function xN(n){return n==null?!1:(lf.has(n)||(n.tagName==="PRE"?lf.set(n,!0):lf.set(n,xN(n.parentNode))),lf.get(n))}function dv(n,e,t,r,a){return e.nodeType===e.TEXT_NODE?r.reduce((l,u)=>u(e,l,n),new Re):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((l,u)=>{let d=dv(n,u,t,r,a);return u.nodeType===e.ELEMENT_NODE&&(d=t.reduce((m,p)=>p(u,m,n),d),d=(a.get(u)||[]).reduce((m,p)=>p(u,m,n),d)),l.concat(d)},new Re):new Re}function ny(n){return(e,t,r)=>wl(t,n,!0,r)}function c7(n,e,t){const r=Oi.keys(n),a=si.keys(n),l=ko.keys(n),u={};return r.concat(a).concat(l).forEach(d=>{let m=t.query(d,Oe.ATTRIBUTE);m!=null&&(u[m.attrName]=m.value(n),u[m.attrName])||(m=a7[d],m!=null&&(m.attrName===d||m.keyName===d)&&(u[m.attrName]=m.value(n)||void 0),m=Aw[d],m!=null&&(m.attrName===d||m.keyName===d)&&(m=Aw[d],u[m.attrName]=m.value(n)||void 0))}),Object.entries(u).reduce((d,m)=>{let[p,v]=m;return wl(d,p,v,t)},e)}function u7(n,e,t){const r=t.query(n);if(r==null)return e;if(r.prototype instanceof os){const a={},l=r.value(n);if(l!=null)return a[r.blotName]=l,new Re().insert(a,r.formats(n,t))}else if(r.prototype instanceof oh&&!Rh(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return wl(e,r.blotName,r.formats(n,t),t);return e}function h7(n,e){return Rh(e,`
`)||e.insert(`
`),e}function d7(n,e,t){const r=t.query("code-block"),a=r&&"formats"in r&&typeof r.formats=="function"?r.formats(n,t):!0;return wl(e,"code-block",a,t)}function f7(){return new Re}function m7(n,e,t){const r=t.query(n);if(r==null||r.blotName!=="list"||!Rh(e,`
`))return e;let a=-1,l=n.parentNode;for(;l!=null;)["OL","UL"].includes(l.tagName)&&(a+=1),l=l.parentNode;return a<=0?e:e.reduce((u,d)=>d.insert?d.attributes&&typeof d.attributes.indent=="number"?u.push(d):u.insert(d.insert,{indent:a,...d.attributes||{}}):u,new Re)}function p7(n,e,t){const r=n;let a=r.tagName==="OL"?"ordered":"bullet";const l=r.getAttribute("data-checked");return l&&(a=l==="true"?"checked":"unchecked"),wl(e,"list",a,t)}function Sw(n,e,t){if(!Rh(e,`
`)){if(fo(n,t)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&n.nextSibling){let r=n.nextSibling;for(;r!=null;){if(fo(r,t))return e.insert(`
`);const a=t.query(r);if(a&&a.prototype instanceof Rs)return e.insert(`
`);r=r.firstChild}}}return e}function g7(n,e,t){const r={},a=n.style||{};return a.fontStyle==="italic"&&(r.italic=!0),a.textDecoration==="underline"&&(r.underline=!0),a.textDecoration==="line-through"&&(r.strike=!0),(a.fontWeight?.startsWith("bold")||parseInt(a.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((l,u)=>{let[d,m]=u;return wl(l,d,m,t)},e),parseFloat(a.textIndent||0)>0?new Re().insert("	").concat(e):e}function y7(n,e,t){const r=n.parentElement?.tagName==="TABLE"?n.parentElement:n.parentElement?.parentElement;if(r!=null){const l=Array.from(r.querySelectorAll("tr")).indexOf(n)+1;return wl(e,"table",l,t)}return e}function v7(n,e,t){let r=n.data;if(n.parentElement?.tagName==="O:P")return e.insert(r.trim());if(!xN(n)){if(r.trim().length===0&&r.includes(`
`)&&!l7(n,t))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(n.previousSibling==null&&n.parentElement!=null&&fo(n.parentElement,t)||n.previousSibling instanceof Element&&fo(n.previousSibling,t))&&(r=r.replace(/^ /,"")),(n.nextSibling==null&&n.parentElement!=null&&fo(n.parentElement,t)||n.nextSibling instanceof Element&&fo(n.nextSibling,t))&&(r=r.replace(/ $/,"")),r=r.replaceAll(""," ")}return e.insert(r)}class b7 extends ji{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,t){super(e,t),this.quill.on(oe.events.EDITOR_CHANGE,(r,a,l,u)=>{r===oe.events.SELECTION_CHANGE?a&&u!==oe.sources.SILENT&&(this.currentRange=a):r===oe.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||u===oe.sources.USER?this.record(a,l):this.transform(a)),this.currentRange=Ky(this.currentRange,a))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(e,t){if(this.stack[e].length===0)return;const r=this.stack[e].pop();if(!r)return;const a=this.quill.getContents(),l=r.delta.invert(a);this.stack[t].push({delta:l,range:Ky(r.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,oe.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,t){if(e.ops.length===0)return;this.stack.redo=[];let r=e.invert(t),a=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const u=this.stack.undo.pop();u&&(r=r.compose(u.delta),a=u.range)}else this.lastRecorded=l;r.length()!==0&&(this.stack.undo.push({delta:r,range:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){Nw(this.stack.undo,e),Nw(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,oe.sources.USER);else{const t=x7(this.quill.scroll,e.delta);this.quill.setSelection(t,oe.sources.USER)}}}function Nw(n,e){let t=e;for(let r=n.length-1;r>=0;r-=1){const a=n[r];n[r]={delta:t.transform(a.delta,!0),range:a.range&&Ky(a.range,t)},t=a.delta.transform(t),n[r].delta.length()===0&&n.splice(r,1)}}function _7(n,e){const t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(r=>n.query(r,Oe.BLOCK)!=null):!1}function x7(n,e){const t=e.reduce((a,l)=>a+(l.delete||0),0);let r=e.length()-t;return _7(n,e)&&(r-=1),r}function Ky(n,e){if(!n)return n;const t=e.transformPosition(n.index),r=e.transformPosition(n.index+n.length);return{index:t,length:r-t}}class EN extends ji{constructor(e,t){super(e,t),e.root.addEventListener("drop",r=>{r.preventDefault();let a=null;if(document.caretRangeFromPoint)a=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const u=document.caretPositionFromPoint(r.clientX,r.clientY);a=document.createRange(),a.setStart(u.offsetNode,u.offset),a.setEnd(u.offsetNode,u.offset)}const l=a&&e.selection.normalizeNative(a);if(l){const u=e.selection.normalizedToRange(l);r.dataTransfer?.files&&this.upload(u,r.dataTransfer.files)}})}upload(e,t){const r=[];Array.from(t).forEach(a=>{a&&this.options.mimetypes?.includes(a.type)&&r.push(a)}),r.length>0&&this.options.handler.call(this,e,r)}}EN.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,e){if(!this.quill.scroll.query("image"))return;const t=e.map(r=>new Promise(a=>{const l=new FileReader;l.onload=()=>{a(l.result)},l.readAsDataURL(r)}));Promise.all(t).then(r=>{const a=r.reduce((l,u)=>l.insert({image:u}),new Re().retain(n.index).delete(n.length));this.quill.updateContents(a,Ne.sources.USER),this.quill.setSelection(n.index+r.length,Ne.sources.SILENT)})}};const E7=["insertText","insertReplacementText"];class w7 extends ji{constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(oe.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){hv({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Re().retain(e.index).insert(t,r),oe.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,oe.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!E7.includes(e.inputType))return;const t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;const r=T7(e);if(r==null)return;const a=this.quill.selection.normalizeNative(t),l=a?this.quill.selection.normalizedToRange(a):null;l&&this.replaceText(l,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function T7(n){return typeof n.data=="string"?n.data:n.dataTransfer?.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}const A7=/Mac/i.test(navigator.platform),S7=100,N7=n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||A7&&n.key==="a"&&n.ctrlKey===!0);class C7 extends ji{isListening=!1;selectionChangeDeadline=0;constructor(e,t){super(e,t),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,t){let{line:r,event:a}=t;if(!(r instanceof ei)||!r.uiNode)return!0;const l=getComputedStyle(r.domNode).direction==="rtl";return l&&a.key!=="ArrowRight"||!l&&a.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(a.shiftKey?1:0),oe.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&N7(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+S7,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const t=e.getRangeAt(0);if(t.collapsed!==!0||t.startOffset!==0)return;const r=this.quill.scroll.find(t.startContainer);if(!(r instanceof ei)||!r.uiNode)return;const a=document.createRange();a.setStartAfter(r.uiNode),a.setEndAfter(r.uiNode),e.removeAllRanges(),e.addRange(a)}}oe.register({"blots/block":Xn,"blots/block/embed":Rs,"blots/break":ii,"blots/container":xl,"blots/cursor":Xs,"blots/embed":iv,"blots/inline":_r,"blots/scroll":k8,"blots/text":ni,"modules/clipboard":o7,"modules/history":b7,"modules/keyboard":Sm,"modules/uploader":EN,"modules/input":w7,"modules/uiNode":C7});class R7 extends si{add(e,t){let r=0;if(t==="+1"||t==="-1"){const a=this.value(e)||0;r=t==="+1"?a+1:a-1}else typeof t=="number"&&(r=t);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}}const I7=new R7("indent","ql-indent",{scope:Oe.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class O7 extends Xn{static blotName="blockquote";static tagName="blockquote"}class D7 extends Xn{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class Ih extends xl{}Ih.blotName="list-container";Ih.tagName="OL";class Oh extends Xn{static create(e){const t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){oe.register(Ih)}constructor(e,t){super(e,t);const r=t.ownerDocument.createElement("span"),a=l=>{if(!e.isEnabled())return;const u=this.statics.formats(t,e);u==="checked"?(this.format("list","unchecked"),l.preventDefault()):u==="unchecked"&&(this.format("list","checked"),l.preventDefault())};r.addEventListener("mousedown",a),r.addEventListener("touchstart",a),this.attachUI(r)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}}Oh.blotName="list";Oh.tagName="LI";Ih.allowedChildren=[Oh];Oh.requiredContainer=Ih;class fv extends _r{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class L7 extends fv{static blotName="italic";static tagName=["EM","I"]}class Gf extends _r{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return wN(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}}function wN(n,e){const t=document.createElement("a");t.href=n;const r=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(r)>-1}class j7 extends _r{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class k7 extends fv{static blotName="strike";static tagName=["S","STRIKE"]}class M7 extends _r{static blotName="underline";static tagName="U"}class P7 extends iv{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const Cw=["alt","height","width"];let V7=class extends os{static blotName="image";static tagName="IMG";static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return Cw.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return wN(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){Cw.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}};const Rw=["height","width"];class U7 extends Rs{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return Rw.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}static sanitize(e){return Gf.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){Rw.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const Vu=new si("code-token","hljs",{scope:Oe.INLINE});class wa extends _r{static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(xr.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,r){super(e,t,r),Vu.add(this.domNode,r)}format(e,t){e!==wa.blotName?super.format(e,t):t?Vu.add(this.domNode,t):(Vu.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Vu.value(this.domNode)||this.unwrap()}}wa.blotName="code-token";wa.className="ql-token";class Ns extends xr{static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),wa.blotName,!1),super.replaceWith(e,t)}}class $u extends El{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===Ns.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,t)}))}formatAt(e,t,r,a){r===Ns.blotName&&(this.forceNext=!0),super.formatAt(e,t,r,a)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const a=`${Array.from(this.domNode.childNodes).filter(u=>u!==this.uiNode).map(u=>u.textContent).join(`
`)}
`,l=Ns.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==a){if(a.trim().length>0||this.cachedText==null){const u=this.children.reduce((m,p)=>m.concat(lN(p,!1)),new Re),d=e(a,l);u.diff(d).reduce((m,p)=>{let{retain:v,attributes:x}=p;return v?(x&&Object.keys(x).forEach(E=>{[Ns.blotName,wa.blotName].includes(E)&&this.formatAt(m,v,E,x[E])}),m+v):m},0)}this.cachedText=a,this.forceNext=!1}}html(e,t){const[r]=this.children.find(e);return`<pre data-language="${r?Ns.formats(r.domNode):"plain"}">
${Am(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const t=Ns.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}$u.allowedChildren=[Ns];Ns.requiredContainer=$u;Ns.allowedChildren=[wa,Xs,ni,ii];const q7=(n,e,t)=>{if(typeof n.versionString=="string"){const r=n.versionString.split(".")[0];if(parseInt(r,10)>=11)return n.highlight(t,{language:e}).value}return n.highlight(e,t).value};class TN extends ji{static register(){oe.register(wa,!0),oe.register(Ns,!0),oe.register($u,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,a)=>{let{key:l}=a;return r[l]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(oe.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof $u))return;const t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:a,label:l}=r;const u=t.ownerDocument.createElement("option");u.textContent=l,u.setAttribute("value",a),t.appendChild(u)}),t.addEventListener("change",()=>{e.format(Ns.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=Ns.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(oe.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(oe.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants($u):[e]).forEach(l=>{l.highlight(this.highlightBlot,t)}),this.quill.update(oe.sources.SILENT),r!=null&&this.quill.setSelection(r,oe.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return Am(e).split(`
`).reduce((a,l,u)=>(u!==0&&a.insert(`
`,{[xr.blotName]:t}),a.insert(l)),new Re);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(xr.className),r.innerHTML=q7(this.options.hljs,t,e),dv(this.quill.scroll,r,[(a,l)=>{const u=Vu.value(a);return u?l.compose(new Re().retain(l.length(),{[wa.blotName]:u})):l}],[(a,l)=>a.data.split(`
`).reduce((u,d,m)=>(m!==0&&u.insert(`
`,{[xr.blotName]:t}),u.insert(d)),l)],new WeakMap)}}TN.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Ws extends Xn{static blotName="table";static tagName="TD";static create(e){const t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",mv()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===Ws.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class fl extends xl{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),t=this.children.tail.formats(),r=this.next.children.head.formats(),a=this.next.children.tail.formats();return e.table===t.table&&e.table===r.table&&e.table===a.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;const r=t.formats(),a=t.next.formats();if(r.table!==a.table){const l=this.splitAfter(t);l&&l.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class _o extends xl{static blotName="table-body";static tagName="TBODY"}class $f extends xl{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(fl),t=e.reduce((r,a)=>Math.max(a.children.length,r),0);e.forEach(r=>{new Array(t-r.children.length).fill(0).forEach(()=>{let a;r.children.head!=null&&(a=Ws.formats(r.children.head.domNode));const l=this.scroll.create(Ws.blotName,a);r.appendChild(l),l.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){const[t]=this.descendant(_o);t==null||t.children.head==null||t.children.forEach(r=>{const a=r.children.at(e);a?.remove()})}insertColumn(e){const[t]=this.descendant(_o);t==null||t.children.head==null||t.children.forEach(r=>{const a=r.children.at(e),l=Ws.formats(r.children.head.domNode),u=this.scroll.create(Ws.blotName,l);r.insertBefore(u,a)})}insertRow(e){const[t]=this.descendant(_o);if(t==null||t.children.head==null)return;const r=mv(),a=this.scroll.create(fl.blotName);t.children.head.children.forEach(()=>{const u=this.scroll.create(Ws.blotName,r);a.appendChild(u)});const l=t.children.at(e);t.insertBefore(a,l)}rows(){const e=this.children.head;return e==null?[]:e.children.map(t=>t)}}$f.allowedChildren=[_o];_o.requiredContainer=$f;_o.allowedChildren=[fl];fl.requiredContainer=_o;fl.allowedChildren=[Ws];Ws.requiredContainer=fl;function mv(){return`row-${Math.random().toString(36).slice(2,6)}`}class B7 extends ji{static register(){oe.register(Ws),oe.register(fl),oe.register(_o),oe.register($f)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants($f).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(oe.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(oe.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const t=e.offset();e.remove(),this.quill.update(oe.sources.USER),this.quill.setSelection(t,oe.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[t,r]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==Ws.blotName)return[null,null,null,-1];const a=t.parent;return[a.parent.parent,a,t,r]}insertColumn(e){const t=this.quill.getSelection();if(!t)return;const[r,a,l]=this.getTable(t);if(l==null)return;const u=l.cellOffset();r.insertColumn(u+e),this.quill.update(oe.sources.USER);let d=a.rowOffset();e===0&&(d+=1),this.quill.setSelection(t.index+d,t.length,oe.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const t=this.quill.getSelection();if(!t)return;const[r,a,l]=this.getTable(t);if(l==null)return;const u=a.rowOffset();r.insertRow(u+e),this.quill.update(oe.sources.USER),e>0?this.quill.setSelection(t,oe.sources.SILENT):this.quill.setSelection(t.index+a.children.length,t.length,oe.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){const r=this.quill.getSelection();if(r==null)return;const a=new Array(e).fill(0).reduce(l=>{const u=new Array(t).fill(`
`).join("");return l.insert(u,{table:mv()})},new Re().retain(r.index));this.quill.updateContents(a,oe.sources.USER),this.quill.setSelection(r.index,oe.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(oe.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(oe.events.TEXT_CHANGE,(r,a,l)=>{l===oe.sources.USER&&this.balanceTables()}),!0):!1)})}}const Iw=Ca("quill:toolbar");class pv extends ji{constructor(e,t){if(super(e,t),Array.isArray(this.options.container)){const r=document.createElement("div");r.setAttribute("role","toolbar"),z7(r,this.options.container),e.container?.parentNode?.insertBefore(r,e.container),this.container=r}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){Iw.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{const a=this.options.handlers?.[r];a&&this.addHandler(r,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(oe.events.EDITOR_CHANGE,()=>{const[r]=this.quill.selection.getRange();this.update(r)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(a=>a.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){Iw.warn("ignoring attaching to nonexistent format",t,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,a=>{let l;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const d=e.options[e.selectedIndex];d.hasAttribute("selected")?l=!1:l=d.value||!1}else e.classList.contains("ql-active")?l=!1:l=e.value||!e.hasAttribute("value"),a.preventDefault();this.quill.focus();const[u]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,l);else if(this.quill.scroll.query(t).prototype instanceof os){if(l=prompt(`Enter ${t}`),!l)return;this.quill.updateContents(new Re().retain(u.index).delete(u.length).insert({[t]:l}),oe.sources.USER)}else this.quill.format(t,l,oe.sources.USER);this.update(u)}),this.controls.push([t,e])}update(e){const t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[a,l]=r;if(l.tagName==="SELECT"){let u=null;if(e==null)u=null;else if(t[a]==null)u=l.querySelector("option[selected]");else if(!Array.isArray(t[a])){let d=t[a];typeof d=="string"&&(d=d.replace(/"/g,'\\"')),u=l.querySelector(`option[value="${d}"]`)}u==null?(l.value="",l.selectedIndex=-1):u.selected=!0}else if(e==null)l.classList.remove("ql-active"),l.setAttribute("aria-pressed","false");else if(l.hasAttribute("value")){const u=t[a],d=u===l.getAttribute("value")||u!=null&&u.toString()===l.getAttribute("value")||u==null&&!l.getAttribute("value");l.classList.toggle("ql-active",d),l.setAttribute("aria-pressed",d.toString())}else{const u=t[a]!=null;l.classList.toggle("ql-active",u),l.setAttribute("aria-pressed",u.toString())}})}}pv.DEFAULTS={};function Ow(n,e,t){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),t!=null?(r.value=t,r.setAttribute("aria-label",`${e}: ${t}`)):r.setAttribute("aria-label",e),n.appendChild(r)}function z7(n,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{const r=document.createElement("span");r.classList.add("ql-formats"),t.forEach(a=>{if(typeof a=="string")Ow(r,a);else{const l=Object.keys(a)[0],u=a[l];Array.isArray(u)?H7(r,l,u):Ow(r,l,u)}}),n.appendChild(r)})}function H7(n,e,t){const r=document.createElement("select");r.classList.add(`ql-${e}`),t.forEach(a=>{const l=document.createElement("option");a!==!1?l.setAttribute("value",String(a)):l.setAttribute("selected","selected"),r.appendChild(l)}),n.appendChild(r)}pv.DEFAULTS={container:null,handlers:{clean(){const n=this.quill.getSelection();if(n!=null)if(n.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,Oe.INLINE)!=null&&this.quill.format(t,!1,oe.sources.USER)})}else this.quill.removeFormat(n.index,n.length,oe.sources.USER)},direction(n){const{align:e}=this.quill.getFormat();n==="rtl"&&e==null?this.quill.format("align","right",oe.sources.USER):!n&&e==="right"&&this.quill.format("align",!1,oe.sources.USER),this.quill.format("direction",n,oe.sources.USER)},indent(n){const e=this.quill.getSelection(),t=this.quill.getFormat(e),r=parseInt(t.indent||0,10);if(n==="+1"||n==="-1"){let a=n==="+1"?1:-1;t.direction==="rtl"&&(a*=-1),this.quill.format("indent",r+a,oe.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,oe.sources.USER)},list(n){const e=this.quill.getSelection(),t=this.quill.getFormat(e);n==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,oe.sources.USER):this.quill.format("list","unchecked",oe.sources.USER):this.quill.format("list",n,oe.sources.USER)}}};const F7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',G7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',$7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',K7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',Q7='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',Y7='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',X7='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',W7='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Dw='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',Z7='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',J7='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',eP='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',tP='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',nP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',rP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',sP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',iP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',aP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',oP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',lP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',cP='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',uP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',hP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',dP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',fP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',mP='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',pP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',gP='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',yP='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',vP='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',bP='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',_P='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',xP='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',ch={align:{"":F7,center:G7,right:$7,justify:K7},background:Q7,blockquote:Y7,bold:X7,clean:W7,code:Dw,"code-block":Dw,color:Z7,direction:{"":J7,rtl:eP},formula:tP,header:{1:nP,2:rP,3:sP,4:iP,5:aP,6:oP},italic:lP,image:cP,indent:{"+1":uP,"-1":hP},link:dP,list:{bullet:fP,check:mP,ordered:pP},script:{sub:gP,super:yP},strike:vP,table:bP,underline:_P,video:xP},EP='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let Lw=0;function jw(n,e){n.setAttribute(e,`${n.getAttribute(e)!=="true"}`)}class Nm{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),jw(this.label,"aria-expanded"),jw(this.options,"aria-hidden")}buildItem(e){const t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&t.setAttribute("data-value",r),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",a=>{switch(a.key){case"Enter":this.selectItem(t,!0),a.preventDefault();break;case"Escape":this.escape(),a.preventDefault();break}}),t}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=EP,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${Lw}`,Lw+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{const r=this.buildItem(t);e.appendChild(r),t.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}}class AN extends Nm{constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);const r=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=a:r.style.fill=a)}}class SN extends Nm{constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=t[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const wP=n=>{const{overflowY:e}=getComputedStyle(n,null);return e!=="visible"&&e!=="clip"};class NN{constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,wP(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const a=this.boundsContainer.getBoundingClientRect(),l=this.root.getBoundingClientRect();let u=0;if(l.right>a.right&&(u=a.right-l.right,this.root.style.left=`${t+u}px`),l.left<a.left&&(u=a.left-l.left,this.root.style.left=`${t+u}px`),l.bottom>a.bottom){const d=l.bottom-l.top,m=e.bottom-e.top+d;this.root.style.top=`${r-m}px`,this.root.classList.add("ql-flip")}return u}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const TP=[!1,"center","right","justify"],AP=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],SP=[!1,"serif","monospace"],NP=["1","2","3",!1],CP=["small",!1,"large","huge"];class Dh extends Bc{constructor(e,t){super(e,t);const r=a=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(a.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(l=>{l.container.contains(a.target)||l.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(l=>{if(l.startsWith("ql-")&&(l=l.slice(3),t[l]!=null))if(l==="direction")r.innerHTML=t[l][""]+t[l].rtl;else if(typeof t[l]=="string")r.innerHTML=t[l];else{const u=r.value||"";u!=null&&t[l][u]&&(r.innerHTML=t[l][u])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(a=>{if(a.classList.contains("ql-align")&&(a.querySelector("option")==null&&Ru(a,TP),typeof t.align=="object"))return new SN(a,t.align);if(a.classList.contains("ql-background")||a.classList.contains("ql-color")){const l=a.classList.contains("ql-background")?"background":"color";return a.querySelector("option")==null&&Ru(a,AP,l==="background"?"#ffffff":"#000000"),new AN(a,t[l])}return a.querySelector("option")==null&&(a.classList.contains("ql-font")?Ru(a,SP):a.classList.contains("ql-header")?Ru(a,NP):a.classList.contains("ql-size")&&Ru(a,CP)),new Nm(a)});const r=()=>{this.pickers.forEach(a=>{a.update()})};this.quill.on(Ne.events.EDITOR_CHANGE,r)}}Dh.DEFAULTS=bo({},Bc.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class CN extends NN{constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,Ne.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,Ne.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=RP(e);case"formula":{if(!e)break;const t=this.quill.getSelection(!0);if(t!=null){const r=t.index+t.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,Ne.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",Ne.sources.USER),this.quill.setSelection(r+2,Ne.sources.USER)}break}}this.textbox.value="",this.hide()}}function RP(n){let e=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:n}function Ru(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const a=document.createElement("option");r===t?a.setAttribute("selected","selected"):a.setAttribute("value",String(r)),n.appendChild(a)})}const IP=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class OP extends CN{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,t){super(e,t),this.quill.on(Ne.events.EDITOR_CHANGE,(r,a,l,u)=>{if(r===Ne.events.SELECTION_CHANGE)if(a!=null&&a.length>0&&u===Ne.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const d=this.quill.getLines(a.index,a.length);if(d.length===1){const m=this.quill.getBounds(a);m!=null&&this.position(m)}else{const m=d[d.length-1],p=this.quill.getIndex(m),v=Math.min(m.length()-1,a.index+a.length-p),x=this.quill.getBounds(new dl(p,v));x!=null&&this.position(x)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Ne.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){const t=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",t!==0&&(r.style.marginLeft=`${-1*t-r.offsetWidth/2}px`),t}}class RN extends Dh{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=IP),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new OP(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),ch),this.buildPickers(e.container.querySelectorAll("select"),ch))}}RN.DEFAULTS=bo({},Dh.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1,oe.sources.USER)}}}}});const DP=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class LP extends CN{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,Ne.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(Ne.events.SELECTION_CHANGE,(e,t,r)=>{if(e!=null){if(e.length===0&&r===Ne.sources.USER){const[a,l]=this.quill.scroll.descendant(Gf,e.index);if(a!=null){this.linkRange=new dl(e.index-l,a.length());const u=Gf.formats(a.domNode);this.preview.textContent=u,this.preview.setAttribute("href",u),this.show();const d=this.quill.getBounds(this.linkRange);d!=null&&this.position(d);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class IN extends Dh{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=DP),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),ch),this.buildPickers(e.container.querySelectorAll("select"),ch),this.tooltip=new LP(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,r)=>{e.handlers.link.call(e,!r.format.link)}))}}IN.DEFAULTS=bo({},Dh.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){const e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);const{tooltip:r}=this.quill.theme;r.edit("link",t)}else this.quill.format("link",!1,oe.sources.USER)}}}}});oe.register({"attributors/attribute/direction":fN,"attributors/class/align":uN,"attributors/class/background":V8,"attributors/class/color":P8,"attributors/class/direction":mN,"attributors/class/font":yN,"attributors/class/size":bN,"attributors/style/align":hN,"attributors/style/background":lv,"attributors/style/color":ov,"attributors/style/direction":pN,"attributors/style/font":vN,"attributors/style/size":_N},!0);oe.register({"formats/align":uN,"formats/direction":mN,"formats/indent":I7,"formats/background":lv,"formats/color":ov,"formats/font":yN,"formats/size":bN,"formats/blockquote":O7,"formats/code-block":xr,"formats/header":D7,"formats/list":Oh,"formats/bold":fv,"formats/code":cv,"formats/italic":L7,"formats/link":Gf,"formats/script":j7,"formats/strike":k7,"formats/underline":M7,"formats/formula":P7,"formats/image":V7,"formats/video":U7,"modules/syntax":TN,"modules/table":B7,"modules/toolbar":pv,"themes/bubble":RN,"themes/snow":IN,"ui/icons":ch,"ui/picker":Nm,"ui/icon-picker":SN,"ui/color-picker":AN,"ui/tooltip":NN},!0);class Tl extends _i.Component{constructor(e){super(e),this.editingAreaRef=U.createRef(),this.containerRef=U.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(r,a,l,u)=>{r==="text-change"?this.onEditorChangeText?.(this.editor.root.innerHTML,a,u,this.unprivilegedEditor):r==="selection-change"&&this.onEditorChangeSelection?.(a,u,this.unprivilegedEditor)};const t=this.isControlled()?e.value:e.defaultValue;this.value=t??""}validateProps(e){if(_i.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(_i.Children.count(e.children)&&_i.Children.only(e.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,t){if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){const r=this.getEditorContents(),a=e.value??"";this.isEqualValue(a,r)||this.setEditorContents(this.editor,a)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(r=>!co(e[r],this.props[r]))}shouldComponentRegenerate(e){return this.dirtyProps.some(t=>!co(e[t],this.props[t]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,t){if(this.editor&&this.shouldComponentRegenerate(e)){const r=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:r,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){const{delta:r,selection:a}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const l=this.editor;l.setContents(r),kw(()=>this.setEditorSelection(l,a))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const e=this.props.modules?.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const r=this.containerRef.current?.querySelector(".ql-toolbar");r&&r.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,t){const r=new oe(e,t);return t.tabIndex!=null&&this.setEditorTabIndex(r,t.tabIndex),this.hookEditor(r),r}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,t){return this.isDelta(e)&&this.isDelta(t)?co(e.ops,t.ops):co(e,t)}setEditorContents(e,t){this.value=t;const r=this.getEditorSelection();typeof t=="string"?e.setContents(e.clipboard.convert({html:t})):e.setContents(t),kw(()=>this.setEditorSelection(e,r))}setEditorSelection(e,t){if(this.selection=t,t){const r=e.getLength();t.index=Math.max(0,Math.min(t.index,r-1)),t.length=Math.max(0,Math.min(t.length,r-1-t.index)),e.setSelection(t)}}setEditorTabIndex(e,t){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=t)}setEditorReadOnly(e,t){t?e.disable():e.enable()}makeUnprivilegedEditor(e){const t=e;return{getHTML:()=>t.root.innerHTML,getSemanticHTML:t.getSemanticHTML.bind(t),getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:t}=this.props,{generation:r}=this.state,a={key:r,ref:this.editingAreaRef};return _i.Children.count(e)?_i.cloneElement(_i.Children.only(e),a):t?_i.createElement("pre",{...a}):_i.createElement("div",{...a})}render(){return _i.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,t,r,a){if(!this.editor)return;const l=this.isDelta(this.value)?a.getContents():a.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=l,this.props.onChange?.(e,t,r,a))}onEditorChangeSelection(e,t,r){if(!this.editor)return;const a=this.getEditorSelection(),l=!a&&e,u=a&&!e;co(e,a)||(this.selection=e,this.props.onChangeSelection?.(e,t,r),l?this.props.onFocus?.(e,t,r):u&&this.props.onBlur?.(a,t,r))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}Tl.displayName="React Quill";Tl.Quill=oe;Tl.defaultProps={theme:"snow",modules:{},readOnly:!1};function kw(n){Promise.resolve().then(n)}const jP={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},kP=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],MP=()=>{const[n,e]=U.useState([]),[t,r]=U.useState(!0),[a,l]=U.useState(!1),[u,d]=U.useState(null),[m,p]=U.useState({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""});U.useEffect(()=>{v()},[]);const v=async()=>{r(!0);try{const C=ri(St(Pe,"news"),Sa("timestamp","desc")),I=(await Rn(C)).docs.map(B=>({id:B.id,...B.data()}));e(I)}catch(C){console.error("Error fetching news:",C)}finally{r(!1)}},x=async C=>{if(window.confirm("Are you sure you want to delete this news item?"))try{await Sh(vt(Pe,"news",C)),v()}catch(L){console.error("Error deleting news:",L),alert("Failed to delete news item.")}},E=async C=>{C.preventDefault();try{const L=m.affectedCurrencies.split(",").map(I=>I.trim().toUpperCase()).filter(I=>I);u?await Ah(vt(Pe,"news",u),{title:m.title,impact:m.impact,content:m.content,image:m.image,affectedCurrencies:L,timestamp:Sc()}):await Nh(St(Pe,"news"),{title:m.title,impact:m.impact,content:m.content,image:m.image,affectedCurrencies:L,timestamp:Sc()}),l(!1),d(null),p({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""}),v()}catch(L){console.error("Error saving news:",L),alert("Failed to save news item.")}},A=C=>{p({title:C.title,impact:C.impact,content:C.content,image:C.image,affectedCurrencies:C.affectedCurrencies?C.affectedCurrencies.join(", "):""}),d(C.id),l(!0)};return g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-center mb-8",children:[g.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage News"}),g.jsx(Rt,{onClick:()=>{l(!a),a&&(d(null),p({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""}))},children:a?"Cancel":"Post New Alert"})]}),a&&g.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:[g.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:u?"Edit Market Update":"New Market Update"}),g.jsxs("form",{onSubmit:E,className:"space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),g.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:C=>p({...m,title:C.target.value}),placeholder:"e.g., NFP Beats Expectations"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Impact Level"}),g.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.impact,onChange:C=>p({...m,impact:C.target.value}),children:[g.jsx("option",{value:"Low",children:"Low (Yellow)"}),g.jsx("option",{value:"Medium",children:"Medium (Orange)"}),g.jsx("option",{value:"High",children:"High (Red)"})]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Content/Summary"}),g.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:g.jsx(Tl,{theme:"snow",value:m.content,onChange:C=>p({...m,content:C}),modules:jP,formats:kP,className:"h-96 mb-12"})})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Image URL (Optional)"}),g.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.image,onChange:C=>p({...m,image:C.target.value}),placeholder:"https://..."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Affected Currencies (comma separated)"}),g.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.affectedCurrencies,onChange:C=>p({...m,affectedCurrencies:C.target.value}),placeholder:"USD, EUR, JPY"})]})]}),g.jsx("div",{className:"flex justify-end pt-4",children:g.jsx(Rt,{type:"submit",variant:"primary",children:u?"Update News":"Publish News"})})]})]}),g.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden",children:g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full divide-y divide-gray-800",children:[g.jsx("thead",{className:"bg-gray-900/50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Title"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Impact"}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-gray-800",children:t?g.jsx("tr",{children:g.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-400",children:"Loading data..."})}):n.length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-400",children:"No news posted yet."})}):n.map(C=>g.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.timestamp?.seconds?new Date(C.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-medium",children:C.title}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${C.impact==="High"?"bg-red-500/20 text-red-400":C.impact==="Medium"?"bg-orange-500/20 text-orange-400":"bg-green-500/20 text-green-400"}`,children:C.impact})}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[g.jsx("button",{onClick:()=>A(C),className:"text-primary hover:text-primary/80 transition-colors mr-4",children:"Edit"}),g.jsx("button",{onClick:()=>x(C.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Delete"})]})]},C.id))})]})})})]})},PP={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},VP=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],UP=()=>{const[n,e]=U.useState([]),[t,r]=U.useState(!0),[a,l]=U.useState(!1),[u,d]=U.useState(null),[m,p]=U.useState({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}),[v,x]=U.useState({});U.useEffect(()=>{E();const I=yh(zt,async B=>{if(B)try{const $=vt(Pe,"users",B.uid),Y=await as($);Y.exists()&&x(Y.data())}catch($){console.error("Error fetching profile:",$)}});return()=>I()},[]);const E=async()=>{r(!0);try{const I=ri(St(Pe,"analysis"),Sa("timestamp","desc")),$=(await Rn(I)).docs.map(Y=>({id:Y.id,...Y.data()}));e($)}catch(I){console.error("Error fetching analysis:",I)}finally{r(!1)}},A=async I=>{if(window.confirm("Are you sure you want to delete this analysis?"))try{await Sh(vt(Pe,"analysis",I)),E()}catch(B){console.error("Error deleting post:",B),alert("Failed to delete post.")}},C=async I=>{I.preventDefault();const B={...m,...v,timestamp:Sc()};try{u?await Ah(vt(Pe,"analysis",u),B):await Nh(St(Pe,"analysis"),B),l(!1),d(null),p({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}),E()}catch($){console.error("Error saving post:",$),alert("Failed to save analysis.")}},L=I=>{p({title:I.title,pair:I.pair,direction:I.direction,content:I.content,image:I.image,analysisType:I.analysisType||"Technical Analysis"}),d(I.id),l(!0)};return g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-center mb-8",children:[g.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage Analysis"}),g.jsx(Rt,{onClick:()=>{l(!a),a&&(d(null),p({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}))},children:a?"Cancel":"New Analysis"})]}),a&&g.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:[g.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:u?"Edit Analysis":"Post Technical Breakdown"}),g.jsxs("form",{onSubmit:C,className:"space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Pair / Asset"}),g.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none uppercase",value:m.pair,onChange:I=>p({...m,pair:I.target.value}),placeholder:"e.g. GBP/JPY"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Direction"}),g.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.direction,onChange:I=>p({...m,direction:I.target.value}),children:[g.jsx("option",{value:"Neutral",children:"Neutral (Gray)"}),g.jsx("option",{value:"Bullish",children:"Bullish (Green)"}),g.jsx("option",{value:"Bearish",children:"Bearish (Red)"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analysis Type"}),g.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.analysisType,onChange:I=>p({...m,analysisType:I.target.value}),children:[g.jsx("option",{value:"Technical Analysis",children:"Technical Analysis"}),g.jsx("option",{value:"Fundamental Analysis",children:"Fundamental Analysis"}),g.jsx("option",{value:"Sentiment Analysis",children:"Sentiment Analysis"})]})]})]}),g.jsx("div",{className:"grid grid-cols-1 gap-4",children:g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Image URL (Chart)"}),g.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.image,onChange:I=>p({...m,image:I.target.value}),placeholder:"https://..."})]})}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),g.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:I=>p({...m,title:I.target.value}),placeholder:"e.g. Double Top formation on 4H"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analysis Content"}),g.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:g.jsx(Tl,{theme:"snow",value:m.content,onChange:I=>p({...m,content:I}),modules:PP,formats:VP,className:"h-96 mb-12"})})]}),g.jsx("div",{className:"flex justify-end pt-4",children:g.jsx(Rt,{type:"submit",variant:"primary",children:u?"Update Analysis":"Post Analysis"})})]})]}),g.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden",children:g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full divide-y divide-gray-800",children:[g.jsx("thead",{className:"bg-gray-900/50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Pair"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Direction"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Title"}),g.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-gray-800",children:t?g.jsx("tr",{children:g.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-400",children:"Loading data..."})}):n.length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-400",children:"No analysis posted yet."})}):n.map(I=>g.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.timestamp?.seconds?new Date(I.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-bold",children:I.pair}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${I.direction==="Bullish"?"bg-green-500/20 text-green-400":I.direction==="Bearish"?"bg-red-500/20 text-red-400":"bg-gray-700 text-gray-300"}`,children:I.direction})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white max-w-xs truncate",children:I.title}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[g.jsx("button",{onClick:()=>L(I),className:"text-primary hover:text-primary/80 transition-colors mr-4",children:"Edit"}),g.jsx("button",{onClick:()=>A(I.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Delete"})]})]},I.id))})]})})})]})},ON={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},DN=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],qP=()=>{const[n,e]=U.useState([]),[t,r]=U.useState(!1),[a,l]=U.useState({name:"",description:"",image:""}),[u,d]=U.useState(null),[m,p]=U.useState(!0);U.useEffect(()=>{v()},[]);const v=async()=>{p(!0);try{const A=await Rn(St(Pe,"paths"));e(A.docs.map(C=>({id:C.id,...C.data()})))}catch(A){console.error("Error fetching paths:",A)}finally{p(!1)}},x=async A=>{A.preventDefault();try{u?await Ah(vt(Pe,"paths",u),a):await Nh(St(Pe,"paths"),{...a,createdAt:Sc()}),r(!1),d(null),l({name:"",description:"",image:""}),v()}catch(C){console.error("Error saving path:",C),alert("Failed to save path")}},E=async A=>{if(window.confirm("Delete this path?"))try{await Sh(vt(Pe,"paths",A)),v()}catch(C){console.error("Error deleting path:",C)}};return g.jsxs("div",{className:"animate-fade-in",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-white",children:"Academy Paths"}),g.jsx(Rt,{onClick:()=>{r(!t),t&&(d(null),l({name:"",description:"",image:""}))},children:t?"Cancel":"New Path"})]}),t&&g.jsx("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8",children:g.jsxs("form",{onSubmit:x,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Path Name"}),g.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.name,onChange:A=>l({...a,name:A.target.value}),placeholder:"e.g. Technical Analysis"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),g.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-24",value:a.description,onChange:A=>l({...a,description:A.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Cover Image URL"}),g.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.image,onChange:A=>l({...a,image:A.target.value})})]}),g.jsx("div",{className:"flex justify-end",children:g.jsx(Rt,{type:"submit",variant:"primary",children:u?"Update Path":"Create Path"})})]})}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(A=>g.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden group",children:[g.jsxs("div",{className:"h-40 bg-gray-900 relative",children:[A.image&&g.jsx("img",{src:A.image,alt:A.name,className:"w-full h-full object-cover"}),g.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsx("button",{onClick:()=>{l(A),d(A.id),r(!0)},className:"bg-primary/80 p-1 rounded text-white hover:bg-primary",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),g.jsx("button",{onClick:()=>E(A.id),className:"bg-red-500/80 p-1 rounded text-white hover:bg-red-600",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),g.jsxs("div",{className:"p-4",children:[g.jsx("h3",{className:"font-bold text-white text-lg",children:A.name}),g.jsx("p",{className:"text-gray-400 text-sm mt-1 line-clamp-2",children:A.description})]})]},A.id))})]})},BP=()=>{const[n,e]=U.useState("paths"),[t,r]=U.useState([]),[a,l]=U.useState([]),[u,d]=U.useState(null),[m,p]=U.useState(!0),[v,x]=U.useState(!1),[E,A]=U.useState(null),[C,L]=U.useState({title:"",path:"",description:"",image:"",level:"Beginner",instructorName:"Forex Volcano",instructorBio:"",instructorImage:""});U.useEffect(()=>{I()},[]);const I=async()=>{p(!0);try{const fe=(await Rn(St(Pe,"paths"))).docs.map(j=>j.data().name);l(fe);const xe=ri(St(Pe,"courses"),Sa("order","asc")),M=await Rn(xe);r(M.docs.map(j=>({id:j.id,...j.data()})))}catch(ee){console.error("Error fetching data:",ee)}finally{p(!1)}},B=async ee=>{ee.preventDefault();try{E?await Ah(vt(Pe,"courses",E),C):await Nh(St(Pe,"courses"),{...C,order:t.length+1,createdAt:Sc()}),x(!1),A(null),L({title:"",path:"",description:"",image:"",level:"Beginner",instructorName:"Forex Volcano",instructorBio:"",instructorImage:""}),I()}catch(fe){console.error("Error saving course:",fe),alert("Failed to save course")}},$=ee=>{L({title:ee.title,description:ee.description,path:ee.path||"",image:ee.image,level:ee.level||"Beginner",instructorName:ee.instructorName||"Forex Volcano",instructorBio:ee.instructorBio||"",instructorImage:ee.instructorImage||""}),A(ee.id),x(!0)},Y=async ee=>{if(window.confirm("Delete this course? All lessons inside it might become orphaned."))try{await Sh(vt(Pe,"courses",ee)),I(),u?.id===ee&&d(null)}catch(fe){console.error("Error deleting course:",fe)}};return u?g.jsx(zP,{course:u,onBack:()=>d(null)}):g.jsxs("div",{children:[g.jsxs("div",{className:"flex space-x-6 mb-8 border-b border-gray-800",children:[g.jsx("button",{onClick:()=>e("paths"),className:`pb-4 px-2 font-medium transition-colors ${n==="paths"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"1. Manage Paths"}),g.jsx("button",{onClick:()=>e("courses"),className:`pb-4 px-2 font-medium transition-colors ${n==="courses"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"2. Manage Courses"})]}),n==="paths"?g.jsx(qP,{}):g.jsxs("div",{className:"animate-fade-in",children:[g.jsxs("div",{className:"flex justify-between items-center mb-8",children:[g.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage Courses"}),g.jsx(Rt,{onClick:()=>{x(!v),v&&A(null)},children:v?"Cancel":"New Course"})]}),v&&g.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8",children:[g.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:E?"Edit Course":"Create New Course"}),g.jsxs("form",{onSubmit:B,className:"space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Course Title"}),g.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.title,onChange:ee=>L({...C,title:ee.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Path / Category"}),g.jsxs("select",{required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.path,onChange:ee=>L({...C,path:ee.target.value}),children:[g.jsx("option",{value:"",children:"Select Path..."}),a.map(ee=>g.jsx("option",{value:ee,children:ee},ee))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Level"}),g.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.level,onChange:ee=>L({...C,level:ee.target.value}),children:[g.jsx("option",{children:"Beginner"}),g.jsx("option",{children:"Intermediate"}),g.jsx("option",{children:"Advanced"})]})]})]}),g.jsxs("div",{className:"border-t border-gray-800 pt-4 mt-4",children:[g.jsx("h3",{className:"text-sm font-bold text-primary mb-3",children:"Instructor Details"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Name"}),g.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.instructorName,onChange:ee=>L({...C,instructorName:ee.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Image URL"}),g.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.instructorImage,onChange:ee=>L({...C,instructorImage:ee.target.value})})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Bio"}),g.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-20",value:C.instructorBio,onChange:ee=>L({...C,instructorBio:ee.target.value})})]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),g.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:g.jsx(Tl,{theme:"snow",value:C.description,onChange:ee=>L({...C,description:ee}),modules:ON,formats:DN,className:"h-48 mb-12"})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Cover Image URL"}),g.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.image,onChange:ee=>L({...C,image:ee.target.value})})]}),g.jsx("div",{className:"flex justify-end",children:g.jsx(Rt,{type:"submit",variant:"primary",children:E?"Update Course":"Create Course"})})]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m?g.jsx("div",{className:"text-gray-400",children:"Loading courses..."}):t.map(ee=>g.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden group hover:border-gray-600 transition-all",children:[g.jsxs("div",{className:"h-40 bg-gray-900 relative",children:[ee.image&&g.jsx("img",{src:ee.image,alt:ee.title,className:"w-full h-full object-cover"}),g.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[g.jsx("button",{onClick:fe=>{fe.stopPropagation(),$(ee)},className:"bg-primary/80 p-1 rounded text-white hover:bg-primary",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),g.jsx("button",{onClick:fe=>{fe.stopPropagation(),Y(ee.id)},className:"bg-red-500/80 p-1 rounded text-white hover:bg-red-600",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),g.jsxs("div",{className:"p-5",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:ee.title}),ee.path&&g.jsx("span",{className:"bg-gray-800 text-xs text-gray-300 px-2 py-1 rounded",children:ee.path})]}),g.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:ee.description}),g.jsx(Rt,{variant:"outline",size:"sm",className:"w-full",onClick:()=>d(ee),children:"Manage Lessons"})]})]},ee.id))})]})]})},zP=({course:n,onBack:e})=>{const[t,r]=U.useState([]),[a,l]=U.useState(!1),[u,d]=U.useState(null),[m,p]=U.useState({title:"",videoUrl:"",content:"",duration:"10 min"}),[v,x]=U.useState(!0);U.useEffect(()=>{E()},[n]);const E=async()=>{x(!0);try{const I=ri(St(Pe,"courses",n.id,"lessons"),Sa("order","asc")),B=await Rn(I);r(B.docs.map($=>({id:$.id,...$.data()})))}catch(I){console.error("Error fetching lessons:",I);const B=await Rn(St(Pe,"courses",n.id,"lessons"));r(B.docs.map($=>({id:$.id,...$.data()})))}finally{x(!1)}},A=async I=>{I.preventDefault();try{u?await Ah(vt(Pe,"courses",n.id,"lessons",u),{...m}):await Nh(St(Pe,"courses",n.id,"lessons"),{...m,order:t.length+1,createdAt:Sc()}),l(!1),d(null),p({title:"",videoUrl:"",content:"",duration:"10 min"}),E()}catch(B){console.error("Error saving lesson:",B),alert("Failed to save lesson")}},C=I=>{p({title:I.title,videoUrl:I.videoUrl,content:I.content,duration:I.duration}),d(I.id),l(!0)},L=async I=>{if(window.confirm("Delete this lesson?"))try{await Sh(vt(Pe,"courses",n.id,"lessons",I)),E()}catch(B){console.error("Error deleting lesson:",B)}};return g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[g.jsxs("button",{onClick:e,className:"text-gray-400 hover:text-white flex items-center gap-1",children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),g.jsxs("h1",{className:"text-2xl font-bold text-white",children:[g.jsx("span",{className:"text-gray-500 font-normal",children:"Edit Course:"})," ",n.title]})]}),g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsxs("h2",{className:"text-xl font-bold text-white",children:["Lessons (",t.length,")"]}),g.jsx(Rt,{onClick:()=>{l(!a),a&&(d(null),p({title:"",videoUrl:"",content:"",duration:"10 min"}))},variant:"secondary",children:a?"Cancel":"Add Lesson"})]}),a&&g.jsx("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:g.jsxs("form",{onSubmit:A,className:"space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Lesson Title"}),g.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:I=>p({...m,title:I.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Duration"}),g.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.duration,onChange:I=>p({...m,duration:I.target.value}),placeholder:"e.g. 15 min"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Video Embed URL (YouTube/Vimeo)"}),g.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.videoUrl,onChange:I=>p({...m,videoUrl:I.target.value}),placeholder:"https://www.youtube.com/embed/..."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Lesson Content / Notes"}),g.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:g.jsx(Tl,{theme:"snow",value:m.content,onChange:I=>p({...m,content:I}),modules:ON,formats:DN,className:"h-72 mb-12"})})]}),g.jsx("div",{className:"flex justify-end",children:g.jsx(Rt,{type:"submit",variant:"primary",children:u?"Update Lesson":"Save Lesson"})})]})}),g.jsxs("div",{className:"space-y-3",children:[v?g.jsx("div",{className:"text-gray-400",children:"Loading lessons..."}):t.map((I,B)=>g.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-gray-800 flex justify-between items-center group hover:border-gray-600",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-800 text-gray-400 font-bold text-sm",children:B+1}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-white",children:I.title}),g.jsx("div",{className:"text-xs text-gray-500",children:I.duration})]})]}),g.jsxs("div",{className:"flex items-center gap-3 opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsx("button",{onClick:()=>C(I),className:"text-primary hover:text-primary/80 text-sm",children:"Edit"}),g.jsx("button",{onClick:()=>L(I.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Delete"})]})]},I.id)),t.length===0&&!v&&g.jsx("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:"No lessons yet. Start teaching!"})]})]})},HP=()=>{const[n,e]=U.useState(!0),[t,r]=U.useState(!1),[a,l]=U.useState(null),[u,d]=U.useState({analystName:"",analystImage:"",analystBio:"",twitter:"",linkedin:"",telegram:""});U.useEffect(()=>{const p=yh(zt,async v=>{if(v){l(v);try{const x=vt(Pe,"users",v.uid),E=await as(x);if(E.exists()){const A=E.data();d(C=>({...C,analystName:A.analystName||"",analystImage:A.analystImage||"",analystBio:A.analystBio||"",twitter:A.twitter||"",linkedin:A.linkedin||"",telegram:A.telegram||""}))}}catch(x){console.error("Error fetching profile:",x)}}e(!1)});return()=>p()},[]);const m=async p=>{if(p.preventDefault(),!!a){r(!0);try{await Ac(vt(Pe,"users",a.uid),u,{merge:!0}),alert("Profile updated successfully!")}catch(v){console.error("Error saving profile:",v),alert("Failed to save profile.")}finally{r(!1)}}};return n?g.jsx("div",{className:"text-white",children:"Loading Profile..."}):g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"Analyst Profile Settings"}),g.jsx("div",{className:"bg-surface p-8 rounded-xl border border-gray-800",children:g.jsxs("form",{onSubmit:m,className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsx("div",{className:"md:col-span-2",children:g.jsx("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-800 pb-2",children:"Personal Details"})}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analyst Name"}),g.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:u.analystName,onChange:p=>d({...u,analystName:p.target.value}),placeholder:"e.g. John Doe"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Profile Image URL"}),g.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:u.analystImage,onChange:p=>d({...u,analystImage:p.target.value}),placeholder:"https://..."})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bio"}),g.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-32 resize-none",value:u.analystBio,onChange:p=>d({...u,analystBio:p.target.value}),placeholder:"Tell us about yourself..."})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pt-6",children:[g.jsx("div",{className:"md:col-span-3",children:g.jsx("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-800 pb-2",children:"Social Connections"})}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Twitter (X) URL"}),g.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:u.twitter,onChange:p=>d({...u,twitter:p.target.value}),placeholder:"https://twitter.com/..."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"LinkedIn URL"}),g.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:u.linkedin,onChange:p=>d({...u,linkedin:p.target.value}),placeholder:"https://linkedin.com/in/..."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Telegram URL"}),g.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:u.telegram,onChange:p=>d({...u,telegram:p.target.value}),placeholder:"https://t.me/..."})]})]}),g.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-800",children:g.jsx(Rt,{type:"submit",variant:"primary",contentClassName:"px-8",children:t?"Saving...":"Save Profile"})})]})})]})},FP=()=>{const{courseId:n}=Oc(),e=Di(),[t,r]=U.useState(null),[a,l]=U.useState([]),[u,d]=U.useState(null),[m,p]=U.useState(!0),[v,x]=U.useState(!0);return U.useEffect(()=>{(async()=>{try{p(!0);const A=await as(vt(Pe,"courses",n));if(!A.exists()){alert("Course not found"),e("/dashboard");return}r({id:A.id,...A.data()});const C=ri(St(Pe,"courses",n,"lessons"),Sa("order","asc")),L=await Rn(C);let I=[];L.empty?I=(await Rn(St(Pe,"courses",n,"lessons"))).docs.map($=>({id:$.id,...$.data()})):I=L.docs.map(B=>({id:B.id,...B.data()})),l(I),I.length>0&&d(I[0])}catch(A){console.error("Error loading course:",A)}finally{p(!1)}})()},[n,e]),m?g.jsx("div",{className:"p-10 text-center text-white",children:"Loading class..."}):t?g.jsxs("div",{className:"flex h-screen bg-background overflow-hidden animate-fade-in",children:[g.jsxs("div",{className:`${v?"w-80":"w-0"} bg-surface border-r border-gray-800 transition-all duration-300 flex flex-col flex-shrink-0 relative`,children:[g.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center",children:[g.jsx("h2",{className:"font-bold text-white truncate max-w-[200px]",children:t.title}),g.jsx("button",{onClick:()=>x(!1),className:"md:hidden text-gray-400",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a.map((E,A)=>g.jsxs("div",{onClick:()=>d(E),className:`p-4 border-b border-gray-800 cursor-pointer transition-colors hover:bg-gray-800/50 flex items-start gap-3
                   ${u?.id===E.id?"bg-primary/10 border-l-4 border-l-primary":"border-l-4 border-l-transparent"}
                 `,children:[g.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-800 text-gray-400 text-xs flex items-center justify-center mt-0.5",children:A+1}),g.jsxs("div",{children:[g.jsx("h4",{className:`text-sm font-medium ${u?.id===E.id?"text-primary":"text-gray-300"}`,children:E.title}),g.jsx("span",{className:"text-xs text-gray-500",children:E.duration||"10 min"})]})]},E.id)),a.length===0&&g.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No lessons available yet."})]}),g.jsx("div",{className:"p-4 border-t border-gray-800",children:g.jsx(yt,{to:"/dashboard",children:g.jsx(Rt,{variant:"outline",size:"sm",className:"w-full",children:"Back to Dashboard"})})})]}),g.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[g.jsx("div",{className:"absolute top-4 left-4 z-10",children:g.jsx("button",{onClick:()=>x(!v),className:"bg-surface/80 p-2 rounded-full text-white hover:bg-surface backdrop-blur border border-gray-700 shadow-lg",children:v?g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),u?g.jsxs("div",{className:"flex-1 overflow-y-auto",children:[g.jsx("div",{className:"bg-black aspect-video w-full max-h-[70vh] flex items-center justify-center",children:u.videoUrl?g.jsx("iframe",{src:u.videoUrl,title:u.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):g.jsxs("div",{className:"text-gray-500 text-center",children:[g.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),g.jsx("p",{children:"No video content for this lesson."})]})}),g.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[g.jsx("div",{className:"flex justify-between items-start mb-6",children:g.jsx("h1",{className:"text-2xl font-bold text-white",children:u.title})}),g.jsx("div",{className:"prose prose-invert max-w-none",children:g.jsx("p",{className:"text-gray-300 whitespace-pre-line",children:u.content})})]})]}):g.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"Select a lesson from the sidebar to start."})]})]}):null},GP=()=>{const[n,e]=U.useState([]),[t,r]=U.useState(!0);return U.useEffect(()=>{(async()=>{try{const u=(await Rn(St(Pe,"courses"))).docs.map(m=>m.data()),d={};u.forEach(m=>{const p=m.path||"General";d[p]||(d[p]={name:p,count:0,image:m.image}),d[p].count+=1}),e(Object.values(d))}catch(l){console.error("Error fetching paths:",l)}finally{r(!1)}})()},[]),t?g.jsx("div",{className:"p-10 text-center text-white",children:"Loading Academy..."}):g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 animate-fade-in",children:[g.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"My Academy"}),g.jsx("p",{className:"text-gray-400 mb-10",children:"Choose a learning path to start your journey."}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(a=>g.jsx(yt,{to:`/academy/${encodeURIComponent(a.name)}`,className:"group",children:g.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden hover:border-primary transition-all h-full flex flex-col",children:[g.jsxs("div",{className:"h-48 bg-gray-900 relative overflow-hidden",children:[a.image?g.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:g.jsx("svg",{className:"w-12 h-12 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent opacity-80"}),g.jsx("div",{className:"absolute bottom-4 left-4",children:g.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-primary transition-colors",children:a.name})})]}),g.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-between",children:[g.jsxs("p",{className:"text-gray-400",children:[a.count," Course",a.count!==1&&"s"," available"]}),g.jsxs("span",{className:"text-primary mt-4 inline-flex items-center text-sm font-medium",children:["Explore Path ",g.jsx("svg",{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]})]})},a.name))}),n.length===0&&g.jsx("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:g.jsx("p",{className:"text-gray-500",children:"No academy paths available yet."})})]})},$P=()=>{const{path:n}=Oc(),e=decodeURIComponent(n),[t,r]=U.useState([]),[a,l]=U.useState(!0);return U.useEffect(()=>{(async()=>{try{const d=ri(St(Pe,"courses"),Sa("order","asc")),v=(await Rn(d)).docs.map(x=>({id:x.id,...x.data()})).filter(x=>(x.path||"General")===e);r(v)}catch(d){console.error("Error loading courses:",d)}finally{l(!1)}})()},[e]),a?g.jsx("div",{className:"p-10 text-center text-white",children:"Loading Path..."}):g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 animate-fade-in",children:[g.jsxs("div",{className:"mb-8",children:[g.jsx(yt,{to:"/academy",className:"text-gray-500 hover:text-white mb-4 inline-block",children:" Back to Academy"}),g.jsxs("h1",{className:"text-3xl font-bold text-white",children:[g.jsx("span",{className:"text-primary",children:e})," Courses"]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(u=>g.jsx(yt,{to:`/academy/${encodeURIComponent(e)}/${u.id}`,className:"group",children:g.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden hover:border-gray-600 transition-all h-full",children:[g.jsxs("div",{className:"h-48 bg-gray-900 relative",children:[u.image&&g.jsx("img",{src:u.image,alt:u.title,className:"w-full h-full object-cover"}),g.jsx("div",{className:"absolute top-2 right-2 bg-black/60 backdrop-blur px-2 py-1 rounded text-xs text-white border border-gray-700",children:u.level})]}),g.jsxs("div",{className:"p-5",children:[g.jsx("h3",{className:"text-lg font-bold text-white mb-2 group-hover:text-primary transition-colors",children:u.title}),g.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:u.description}),g.jsx("span",{className:"text-sm font-medium text-white group-hover:underline",children:"Start Learning "})]})]})},u.id))}),t.length===0&&g.jsx("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:g.jsx("p",{className:"text-gray-500",children:"No courses found in this path."})})]})},KP=()=>{const{path:n,courseId:e}=Oc(),t=Di(),[r,a]=U.useState(null),[l,u]=U.useState([]),[d,m]=U.useState(null),[p,v]=U.useState(!0),[x,E]=U.useState(!0),[A,C]=U.useState([]);return U.useEffect(()=>{(async()=>{if(zt.currentUser&&e){const I=vt(db,"users",zt.currentUser.uid,"course_progress",e),B=await as(I);B.exists()&&C(B.data().completedLessonIds||[])}})()},[e]),U.useEffect(()=>{(async()=>{try{v(!0);const I=await as(vt(db,"courses",e));if(!I.exists()){alert("Course not found"),t(`/academy/${n}`);return}a({id:I.id,...I.data()});const B=ri(St(db,"courses",e,"lessons"),Sa("order","asc")),$=await Rn(B);let Y=[];$.empty?Y=(await Rn(St(db,"courses",e,"lessons"))).docs.map(fe=>({id:fe.id,...fe.data()})):Y=$.docs.map(ee=>({id:ee.id,...ee.data()})),u(Y),Y.length>0&&m(Y[0])}catch(I){console.error("Error loading course:",I)}finally{v(!1)}})()},[e,t,n]),p?g.jsx("div",{className:"p-10 text-center text-white",children:"Loading class..."}):r?g.jsxs("div",{className:"flex bg-background overflow-hidden animate-fade-in",style:{height:"calc(100vh - 64px)"},children:[g.jsxs("div",{className:`${x?"w-80":"w-0"} bg-surface border-r border-gray-800 transition-all duration-300 flex flex-col flex-shrink-0 relative`,children:[g.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50",children:[g.jsx("h2",{className:"font-bold text-white truncate max-w-[200px]",children:r.title}),g.jsx("button",{onClick:()=>E(!1),className:"md:hidden text-gray-400",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto",children:[l.map((L,I)=>g.jsxs("div",{onClick:()=>m(L),className:`p-4 border-b border-gray-800 cursor-pointer transition-colors hover:bg-gray-800/50 flex items-start gap-3
                   ${d?.id===L.id?"bg-primary/10 border-l-4 border-l-primary":"border-l-4 border-l-transparent"}
                 `,children:[g.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-800 text-gray-400 text-xs flex items-center justify-center mt-0.5",children:I+1}),g.jsxs("div",{children:[g.jsx("h4",{className:`text-sm font-medium ${d?.id===L.id?"text-primary":"text-gray-300"}`,children:L.title}),g.jsx("span",{className:"text-xs text-gray-500",children:L.duration||"10 min"})]})]},L.id)),l.length===0&&g.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No lessons available yet."})]}),g.jsx("div",{className:"p-4 border-t border-gray-800",children:g.jsx(yt,{to:`/academy/${n}`,children:g.jsx(Button,{variant:"outline",size:"sm",className:"w-full",children:" Back to Path"})})})]}),g.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[g.jsx("div",{className:"absolute top-4 left-4 z-10",children:g.jsx("button",{onClick:()=>E(!x),className:"bg-surface/80 p-2 rounded-full text-white hover:bg-surface backdrop-blur border border-gray-700 shadow-lg",children:x?g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),d?g.jsxs("div",{className:"flex-1 overflow-y-auto",children:[g.jsx("div",{className:"bg-black aspect-video w-full max-h-[60vh] flex items-center justify-center",children:d.videoUrl?g.jsx("iframe",{src:d.videoUrl,title:d.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):g.jsxs("div",{className:"text-gray-500 text-center",children:[g.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),g.jsx("p",{children:"No video content."})]})}),g.jsxs("div",{className:"max-w-4xl mx-auto p-8 pb-20",children:[g.jsx("div",{className:"flex justify-between items-start mb-6",children:g.jsx("h1",{className:"text-2xl font-bold text-white",children:d.title})}),g.jsx("div",{className:"prose prose-invert max-w-none",children:g.jsx("div",{dangerouslySetInnerHTML:{__html:d.content}})}),(r.instructorName||r.instructorBio)&&g.jsxs("div",{className:"mt-12 border-t border-gray-800 pt-8",children:[g.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Meet Your Instructor"}),g.jsxs("div",{className:"flex items-start gap-6 bg-surface p-6 rounded-xl border border-gray-800",children:[r.instructorImage?g.jsx("img",{src:r.instructorImage,alt:r.instructorName,className:"w-20 h-20 rounded-full object-cover border-2 border-primary"}):g.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-700 flex items-center justify-center text-2xl font-bold text-gray-400",children:r.instructorName?r.instructorName.charAt(0):"I"}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-lg font-bold text-white",children:r.instructorName}),g.jsx("p",{className:"text-gray-400 text-sm whitespace-pre-wrap mt-2",children:r.instructorBio})]})]})]})]})]}):g.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:g.jsx("p",{children:"Select a lesson from the list to start learning."})})]})]}):null},QP=()=>{const{username:n}=Oc(),[e,t]=U.useState(null),[r,a]=U.useState(!0);return U.useEffect(()=>{n&&(async()=>{try{a(!0);const u=ri(St(Pe,"users"),TS("username","==",n)),d=await Rn(u);if(d.empty)t(null);else{const m=d.docs[0].data();t(m)}}catch(u){console.error("Error fetching profile:",u)}finally{a(!1)}})()},[n]),r?g.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:g.jsx("p",{className:"text-white text-lg",children:"Loading Profile..."})}):e?g.jsx("div",{className:"min-h-screen bg-background py-20 px-4 sm:px-6 lg:px-8 animate-fade-in",children:g.jsx("div",{className:"max-w-3xl mx-auto",children:g.jsxs("div",{className:"bg-surface rounded-2xl border border-gray-800 p-8 md:p-12 text-center relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 left-0 w-full h-32 bg-gradient-to-r from-primary/10 to-secondary/10"}),g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"w-40 h-40 mx-auto rounded-full p-1 bg-gradient-to-br from-primary to-secondary mb-6",children:g.jsx("img",{src:e.avatar_url||`https://ui-avatars.com/api/?name=${e.username}`,alt:e.username,className:"w-full h-full rounded-full object-cover bg-black border-4 border-black"})}),g.jsx("h1",{className:"text-4xl font-extrabold text-white mb-2",children:e.username}),g.jsx("p",{className:"text-primary font-medium tracking-wide text-sm uppercase mb-8",children:"Volcano Member"}),g.jsx("div",{className:"max-w-xl mx-auto",children:g.jsx("p",{className:"text-gray-300 text-lg leading-relaxed whitespace-pre-wrap",children:e.bio||"This user hasn't written a bio yet."})}),g.jsxs("div",{className:"mt-10 pt-10 border-t border-gray-800 grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"p-4 bg-gray-900/50 rounded-xl",children:[g.jsx("span",{className:"block text-gray-500 text-xs uppercase mb-1",children:"Joined"}),g.jsx("span",{className:"text-white font-mono",children:e.createdAt?.seconds?new Date(e.createdAt.seconds*1e3).getFullYear():"Unknown"})]}),g.jsxs("div",{className:"p-4 bg-gray-900/50 rounded-xl",children:[g.jsx("span",{className:"block text-gray-500 text-xs uppercase mb-1",children:"Role"}),g.jsx("span",{className:"text-white font-mono capitalize",children:e.role||"Trader"})]})]})]})]})})}):g.jsxs("div",{className:"min-h-screen bg-background flex flex-col items-center justify-center text-center p-4",children:[g.jsx("div",{className:"w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mb-4",children:g.jsx("span",{className:"text-4xl",children:"?"})}),g.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Not Found"}),g.jsxs("p",{className:"text-gray-400",children:['The user "',n,'" does not exist or has changed their name.']})]})},Mw=({children:n,adminOnly:e=!1})=>{const[t,r]=U.useState(null),[a,l]=U.useState(!0);return U.useEffect(()=>{const u=yh(zt,d=>{r(d),l(!1)});return()=>u()},[]),a?g.jsx("div",{className:"text-center p-10 pt-32 text-white",children:"Loading..."}):t?n:g.jsx(dR,{to:"/login",replace:!0})};function YP(){return g.jsx(VR,{children:g.jsxs("div",{className:"min-h-screen bg-background text-text font-sans flex flex-col",children:[g.jsx(mL,{}),g.jsx("main",{className:"flex-grow",children:g.jsxs(pR,{children:[g.jsx(_n,{path:"/",element:g.jsx(bL,{})}),g.jsx(_n,{path:"/analysis",element:g.jsx(_L,{})}),g.jsx(_n,{path:"/analysis/:id",element:g.jsx(xL,{})}),g.jsx(_n,{path:"/news",element:g.jsx(wL,{})}),g.jsx(_n,{path:"/news/:id",element:g.jsx(TL,{})}),g.jsx(_n,{path:"/login",element:g.jsx(AL,{})}),g.jsx(_n,{path:"/register",element:g.jsx(SL,{})}),g.jsx(_n,{path:"/academy",element:g.jsx(GP,{})}),g.jsx(_n,{path:"/academy/:path",element:g.jsx($P,{})}),g.jsx(_n,{path:"/academy/:path/:courseId",element:g.jsx(KP,{})}),g.jsx(_n,{path:"/profile/:username",element:g.jsx(QP,{})}),g.jsx(_n,{path:"/dashboard",element:g.jsx(Mw,{children:g.jsx(RL,{})})}),g.jsx(_n,{path:"/dashboard/course/:courseId",element:g.jsx(Mw,{children:g.jsx(FP,{})})}),g.jsxs(_n,{path:"/admin",element:g.jsx(IL,{}),children:[g.jsx(_n,{index:!0,element:g.jsx(OL,{})}),g.jsx(_n,{path:"news",element:g.jsx(MP,{})}),g.jsx(_n,{path:"analysis",element:g.jsx(UP,{})}),g.jsx(_n,{path:"courses",element:g.jsx(BP,{})}),g.jsx(_n,{path:"profile",element:g.jsx(HP,{})})]})]})}),g.jsx(pL,{})]})})}bC.createRoot(document.getElementById("root")).render(g.jsx(U.StrictMode,{children:g.jsx(YP,{})}))});export default XP();
