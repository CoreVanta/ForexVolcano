var bC=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var lU=bC((is,as)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var mo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function n0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sg={exports:{}},Iu={};var Y_;function _C(){if(Y_)return Iu;Y_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Iu.Fragment=e,Iu.jsx=t,Iu.jsxs=t,Iu}var X_;function xC(){return X_||(X_=1,Sg.exports=_C()),Sg.exports}var f=xC(),Ng={exports:{}},Fe={};var W_;function EC(){if(W_)return Fe;W_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),x=Symbol.iterator;function A(q){return q===null||typeof q!="object"?null:(q=x&&q[x]||q["@@iterator"],typeof q=="function"?q:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,R={};function U(q,W,de){this.props=q,this.context=W,this.refs=R,this.updater=de||C}U.prototype.isReactComponent={},U.prototype.setState=function(q,W){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,W,"setState")},U.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function F(){}F.prototype=U.prototype;function Y(q,W,de){this.props=q,this.context=W,this.refs=R,this.updater=de||C}var Q=Y.prototype=new F;Q.constructor=Y,D(Q,U.prototype),Q.isPureReactComponent=!0;var ie=Array.isArray;function ve(){}var L={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function V(q,W,de){var me=de.ref;return{$$typeof:n,type:q,key:W,ref:me!==void 0?me:null,props:de}}function G(q,W){return V(q.type,W,q.props)}function S(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function M(q){var W={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(de){return W[de]})}var N=/\/+/g;function ge(q,W){return typeof q=="object"&&q!==null&&q.key!=null?M(""+q.key):W.toString(36)}function pe(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ve,ve):(q.status="pending",q.then(function(W){q.status==="pending"&&(q.status="fulfilled",q.value=W)},function(W){q.status==="pending"&&(q.status="rejected",q.reason=W)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function H(q,W,de,me,ye){var Te=typeof q;(Te==="undefined"||Te==="boolean")&&(q=null);var De=!1;if(q===null)De=!0;else switch(Te){case"bigint":case"string":case"number":De=!0;break;case"object":switch(q.$$typeof){case n:case e:De=!0;break;case v:return De=q._init,H(De(q._payload),W,de,me,ye)}}if(De)return ye=ye(q),De=me===""?"."+ge(q,0):me,ie(ye)?(de="",De!=null&&(de=De.replace(N,"$&/")+"/"),H(ye,W,de,"",function(Xe){return Xe})):ye!=null&&(S(ye)&&(ye=G(ye,de+(ye.key==null||q&&q.key===ye.key?"":(""+ye.key).replace(N,"$&/")+"/")+De)),W.push(ye)),1;De=0;var je=me===""?".":me+":";if(ie(q))for(var Le=0;Le<q.length;Le++)me=q[Le],Te=je+ge(me,Le),De+=H(me,W,de,Te,ye);else if(Le=A(q),typeof Le=="function")for(q=Le.call(q),Le=0;!(me=q.next()).done;)me=me.value,Te=je+ge(me,Le++),De+=H(me,W,de,Te,ye);else if(Te==="object"){if(typeof q.then=="function")return H(pe(q),W,de,me,ye);throw W=String(q),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return De}function ee(q,W,de){if(q==null)return q;var me=[],ye=0;return H(q,me,"","",function(Te){return W.call(de,Te,ye++)}),me}function ue(q){if(q._status===-1){var W=q._result;W=W(),W.then(function(de){(q._status===0||q._status===-1)&&(q._status=1,q._result=de)},function(de){(q._status===0||q._status===-1)&&(q._status=2,q._result=de)}),q._status===-1&&(q._status=0,q._result=W)}if(q._status===1)return q._result.default;throw q._result}var _e=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},be={map:ee,forEach:function(q,W,de){ee(q,function(){W.apply(this,arguments)},de)},count:function(q){var W=0;return ee(q,function(){W++}),W},toArray:function(q){return ee(q,function(W){return W})||[]},only:function(q){if(!S(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Fe.Activity=E,Fe.Children=be,Fe.Component=U,Fe.Fragment=t,Fe.Profiler=a,Fe.PureComponent=Y,Fe.StrictMode=r,Fe.Suspense=m,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(q){return L.H.useMemoCache(q)}},Fe.cache=function(q){return function(){return q.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(q,W,de){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var me=D({},q.props),ye=q.key;if(W!=null)for(Te in W.key!==void 0&&(ye=""+W.key),W)!k.call(W,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&W.ref===void 0||(me[Te]=W[Te]);var Te=arguments.length-2;if(Te===1)me.children=de;else if(1<Te){for(var De=Array(Te),je=0;je<Te;je++)De[je]=arguments[je+2];me.children=De}return V(q.type,ye,me)},Fe.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:l,_context:q},q},Fe.createElement=function(q,W,de){var me,ye={},Te=null;if(W!=null)for(me in W.key!==void 0&&(Te=""+W.key),W)k.call(W,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ye[me]=W[me]);var De=arguments.length-2;if(De===1)ye.children=de;else if(1<De){for(var je=Array(De),Le=0;Le<De;Le++)je[Le]=arguments[Le+2];ye.children=je}if(q&&q.defaultProps)for(me in De=q.defaultProps,De)ye[me]===void 0&&(ye[me]=De[me]);return V(q,Te,ye)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(q){return{$$typeof:d,render:q}},Fe.isValidElement=S,Fe.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:ue}},Fe.memo=function(q,W){return{$$typeof:g,type:q,compare:W===void 0?null:W}},Fe.startTransition=function(q){var W=L.T,de={};L.T=de;try{var me=q(),ye=L.S;ye!==null&&ye(de,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ve,_e)}catch(Te){_e(Te)}finally{W!==null&&de.types!==null&&(W.types=de.types),L.T=W}},Fe.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Fe.use=function(q){return L.H.use(q)},Fe.useActionState=function(q,W,de){return L.H.useActionState(q,W,de)},Fe.useCallback=function(q,W){return L.H.useCallback(q,W)},Fe.useContext=function(q){return L.H.useContext(q)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(q,W){return L.H.useDeferredValue(q,W)},Fe.useEffect=function(q,W){return L.H.useEffect(q,W)},Fe.useEffectEvent=function(q){return L.H.useEffectEvent(q)},Fe.useId=function(){return L.H.useId()},Fe.useImperativeHandle=function(q,W,de){return L.H.useImperativeHandle(q,W,de)},Fe.useInsertionEffect=function(q,W){return L.H.useInsertionEffect(q,W)},Fe.useLayoutEffect=function(q,W){return L.H.useLayoutEffect(q,W)},Fe.useMemo=function(q,W){return L.H.useMemo(q,W)},Fe.useOptimistic=function(q,W){return L.H.useOptimistic(q,W)},Fe.useReducer=function(q,W,de){return L.H.useReducer(q,W,de)},Fe.useRef=function(q){return L.H.useRef(q)},Fe.useState=function(q){return L.H.useState(q)},Fe.useSyncExternalStore=function(q,W,de){return L.H.useSyncExternalStore(q,W,de)},Fe.useTransition=function(){return L.H.useTransition()},Fe.version="19.2.1",Fe}var Z_;function r0(){return Z_||(Z_=1,Ng.exports=EC()),Ng.exports}var P=r0();const Ei=n0(P);var Cg={exports:{}},ju={},Rg={exports:{}},Ig={};var J_;function wC(){return J_||(J_=1,(function(n){function e(H,ee){var ue=H.length;H.push(ee);e:for(;0<ue;){var _e=ue-1>>>1,be=H[_e];if(0<a(be,ee))H[_e]=ee,H[ue]=be,ue=_e;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ee=H[0],ue=H.pop();if(ue!==ee){H[0]=ue;e:for(var _e=0,be=H.length,q=be>>>1;_e<q;){var W=2*(_e+1)-1,de=H[W],me=W+1,ye=H[me];if(0>a(de,ue))me<be&&0>a(ye,de)?(H[_e]=ye,H[me]=ue,_e=me):(H[_e]=de,H[W]=ue,_e=W);else if(me<be&&0>a(ye,ue))H[_e]=ye,H[me]=ue,_e=me;else break e}}return ee}function a(H,ee){var ue=H.sortIndex-ee.sortIndex;return ue!==0?ue:H.id-ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],g=[],v=1,E=null,x=3,A=!1,C=!1,D=!1,R=!1,U=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function Q(H){for(var ee=t(g);ee!==null;){if(ee.callback===null)r(g);else if(ee.startTime<=H)r(g),ee.sortIndex=ee.expirationTime,e(m,ee);else break;ee=t(g)}}function ie(H){if(D=!1,Q(H),!C)if(t(m)!==null)C=!0,ve||(ve=!0,M());else{var ee=t(g);ee!==null&&pe(ie,ee.startTime-H)}}var ve=!1,L=-1,k=5,V=-1;function G(){return R?!0:!(n.unstable_now()-V<k)}function S(){if(R=!1,ve){var H=n.unstable_now();V=H;var ee=!0;try{e:{C=!1,D&&(D=!1,F(L),L=-1),A=!0;var ue=x;try{t:{for(Q(H),E=t(m);E!==null&&!(E.expirationTime>H&&G());){var _e=E.callback;if(typeof _e=="function"){E.callback=null,x=E.priorityLevel;var be=_e(E.expirationTime<=H);if(H=n.unstable_now(),typeof be=="function"){E.callback=be,Q(H),ee=!0;break t}E===t(m)&&r(m),Q(H)}else r(m);E=t(m)}if(E!==null)ee=!0;else{var q=t(g);q!==null&&pe(ie,q.startTime-H),ee=!1}}break e}finally{E=null,x=ue,A=!1}ee=void 0}}finally{ee?M():ve=!1}}}var M;if(typeof Y=="function")M=function(){Y(S)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ge=N.port2;N.port1.onmessage=S,M=function(){ge.postMessage(null)}}else M=function(){U(S,0)};function pe(H,ee){L=U(function(){H(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(H){switch(x){case 1:case 2:case 3:var ee=3;break;default:ee=x}var ue=x;x=ee;try{return H()}finally{x=ue}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ue=x;x=H;try{return ee()}finally{x=ue}},n.unstable_scheduleCallback=function(H,ee,ue){var _e=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?_e+ue:_e):ue=_e,H){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ue+be,H={id:v++,callback:ee,priorityLevel:H,startTime:ue,expirationTime:be,sortIndex:-1},ue>_e?(H.sortIndex=ue,e(g,H),t(m)===null&&H===t(g)&&(D?(F(L),L=-1):D=!0,pe(ie,ue-_e))):(H.sortIndex=be,e(m,H),C||A||(C=!0,ve||(ve=!0,M()))),H},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(H){var ee=x;return function(){var ue=x;x=ee;try{return H.apply(this,arguments)}finally{x=ue}}}})(Ig)),Ig}var ex;function TC(){return ex||(ex=1,Rg.exports=wC()),Rg.exports}var jg={exports:{}},ir={};var tx;function AC(){if(tx)return ir;tx=1;var n=r0();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:g,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ir.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ir.createPortal=function(m,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,v)},ir.flushSync=function(m){var g=c.T,v=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=v,r.d.f()}},ir.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},ir.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},ir.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin),x=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:x,fetchPriority:A}):v==="script"&&r.d.X(m,{crossOrigin:E,integrity:x,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ir.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},ir.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin);r.d.L(m,v,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ir.preloadModule=function(m,g){if(typeof m=="string")if(g){var v=d(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},ir.requestFormReset=function(m){r.d.r(m)},ir.unstable_batchedUpdates=function(m,g){return m(g)},ir.useFormState=function(m,g,v){return c.H.useFormState(m,g,v)},ir.useFormStatus=function(){return c.H.useHostTransitionStatus()},ir.version="19.2.1",ir}var nx;function SC(){if(nx)return jg.exports;nx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),jg.exports=AC(),jg.exports}var rx;function NC(){if(rx)return ju;rx=1;var n=TC(),e=r0(),t=SC();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function c(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function d(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function m(s){if(l(s)!==s)throw Error(r(188))}function g(s){var i=s.alternate;if(!i){if(i=l(s),i===null)throw Error(r(188));return i!==s?null:s}for(var o=s,u=i;;){var p=o.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){o=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===o)return m(p),s;if(y===u)return m(p),i;y=y.sibling}throw Error(r(188))}if(o.return!==u.return)o=p,u=y;else{for(var w=!1,I=p.child;I;){if(I===o){w=!0,o=p,u=y;break}if(I===u){w=!0,u=p,o=y;break}I=I.sibling}if(!w){for(I=y.child;I;){if(I===o){w=!0,o=y,u=p;break}if(I===u){w=!0,u=y,o=p;break}I=I.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:i}function v(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=v(s),i!==null)return i;s=s.sibling}return null}var E=Object.assign,x=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),S=Symbol.iterator;function M(s){return s===null||typeof s!="object"?null:(s=S&&s[S]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function ge(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case U:return"Profiler";case R:return"StrictMode";case ie:return"Suspense";case ve:return"SuspenseList";case V:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case C:return"Portal";case Y:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case Q:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return i=s.displayName||null,i!==null?i:ge(s.type)||"Memo";case k:i=s._payload,s=s._init;try{return ge(s(i))}catch{}}return null}var pe=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},_e=[],be=-1;function q(s){return{current:s}}function W(s){0>be||(s.current=_e[be],_e[be]=null,be--)}function de(s,i){be++,_e[be]=s.current,s.current=i}var me=q(null),ye=q(null),Te=q(null),De=q(null);function je(s,i){switch(de(Te,i),de(ye,s),de(me,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?v_(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=v_(i),s=b_(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}W(me),de(me,s)}function Le(){W(me),W(ye),W(Te)}function Xe(s){s.memoizedState!==null&&de(De,s);var i=me.current,o=b_(i,s.type);i!==o&&(de(ye,s),de(me,o))}function Je(s){ye.current===s&&(W(me),W(ye)),De.current===s&&(W(De),Su._currentValue=ue)}var st,ut;function yt(s){if(st===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);st=i&&i[1]||"",ut=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+st+s+ut}var tn=!1;function qr(s,i){if(!s||tn)return"";tn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(se){var te=se}Reflect.construct(s,[],he)}else{try{he.call()}catch(se){te=se}s.call(he.prototype)}}else{try{throw Error()}catch(se){te=se}(he=s())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(se){if(se&&te&&typeof se.stack=="string")return[se.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),w=y[0],I=y[1];if(w&&I){var z=w.split(`
`),J=I.split(`
`);for(p=u=0;u<z.length&&!z[u].includes("DetermineComponentFrameRoot");)u++;for(;p<J.length&&!J[p].includes("DetermineComponentFrameRoot");)p++;if(u===z.length||p===J.length)for(u=z.length-1,p=J.length-1;1<=u&&0<=p&&z[u]!==J[p];)p--;for(;1<=u&&0<=p;u--,p--)if(z[u]!==J[p]){if(u!==1||p!==1)do if(u--,p--,0>p||z[u]!==J[p]){var ae=`
`+z[u].replace(" at new "," at ");return s.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",s.displayName)),ae}while(1<=u&&0<=p);break}}}finally{tn=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?yt(o):""}function li(s,i){switch(s.tag){case 26:case 27:case 5:return yt(s.type);case 16:return yt("Lazy");case 13:return s.child!==i&&i!==null?yt("Suspense Fallback"):yt("Suspense");case 19:return yt("SuspenseList");case 0:case 15:return qr(s.type,!1);case 11:return qr(s.type.render,!1);case 1:return qr(s.type,!0);case 31:return yt("Activity");default:return""}}function Ui(s){try{var i="",o=null;do i+=li(s,o),o=s,s=s.return;while(s);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ht=Object.prototype.hasOwnProperty,jt=n.unstable_scheduleCallback,Tr=n.unstable_cancelCallback,Oa=n.unstable_shouldYield,Vi=n.unstable_requestPaint,Ot=n.unstable_now,Ar=n.unstable_getCurrentPriorityLevel,qi=n.unstable_ImmediatePriority,Br=n.unstable_UserBlockingPriority,dr=n.unstable_NormalPriority,Bi=n.unstable_LowPriority,kn=n.unstable_IdlePriority,zi=n.log,Hi=n.unstable_setDisableYieldValue,fr=null,Zt=null;function An(s){if(typeof zi=="function"&&Hi(s),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(fr,s)}catch{}}var Dt=Math.clz32?Math.clz32:Zn,Us=Math.log,Sr=Math.LN2;function Zn(s){return s>>>=0,s===0?32:31-(Us(s)/Sr|0)|0}var Mn=256,zr=262144,Tt=4194304;function Jn(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function In(s,i,o){var u=s.pendingLanes;if(u===0)return 0;var p=0,y=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var I=u&134217727;return I!==0?(u=I&~y,u!==0?p=Jn(u):(w&=I,w!==0?p=Jn(w):o||(o=I&~s,o!==0&&(p=Jn(o))))):(I=u&~y,I!==0?p=Jn(I):w!==0?p=Jn(w):o||(o=u&~s,o!==0&&(p=Jn(o)))),p===0?0:i!==0&&i!==p&&(i&y)===0&&(y=p&-p,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:p}function Pn(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function Fi(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ci(){var s=Tt;return Tt<<=1,(Tt&62914560)===0&&(Tt=4194304),s}function Sn(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function us(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Hr(s,i,o,u,p,y){var w=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var I=s.entanglements,z=s.expirationTimes,J=s.hiddenUpdates;for(o=w&~o;0<o;){var ae=31-Dt(o),he=1<<ae;I[ae]=0,z[ae]=-1;var te=J[ae];if(te!==null)for(J[ae]=null,ae=0;ae<te.length;ae++){var se=te[ae];se!==null&&(se.lane&=-536870913)}o&=~he}u!==0&&Vs(s,u,0),y!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=y&~(w&~i))}function Vs(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-Dt(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|o&261930}function Gi(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var u=31-Dt(o),p=1<<u;p&i|s[u]&i&&(s[u]|=i),o&=~p}}function $i(s,i){var o=i&-i;return o=(o&42)!==0?1:hs(o),(o&(s.suspendedLanes|i))!==0?0:o}function hs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function mr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function nn(){var s=ee.p;return s!==0?s:(s=window.event,s===void 0?32:z_(s.type))}function pr(s,i){var o=ee.p;try{return ee.p=s,i()}finally{ee.p=o}}var gr=Math.random().toString(36).slice(2),Ft="__reactFiber$"+gr,rn="__reactProps$"+gr,Nr="__reactContainer$"+gr,Jt="__reactEvents$"+gr,Vo="__reactListeners$"+gr,Da="__reactHandles$"+gr,La="__reactResources$"+gr,Cr="__reactMarker$"+gr;function ui(s){delete s[Ft],delete s[rn],delete s[Jt],delete s[Vo],delete s[Da]}function Mt(s){var i=s[Ft];if(i)return i;for(var o=s.parentNode;o;){if(i=o[Nr]||o[Ft]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=S_(s);s!==null;){if(o=s[Ft])return o;s=S_(s)}return i}s=o,o=s.parentNode}return null}function er(s){if(s=s[Ft]||s[Nr]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function Un(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function Rr(s){var i=s[La];return i||(i=s[La]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Gt(s){s[Cr]=!0}var Ki=new Set,ds={};function yr(s,i){Vn(s,i),Vn(s+"Capture",i)}function Vn(s,i){for(ds[s]=i,s=0;s<i.length;s++)Ki.add(i[s])}var tr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qs={},Qi={};function ka(s){return Ht.call(Qi,s)?!0:Ht.call(qs,s)?!1:tr.test(s)?Qi[s]=!0:(qs[s]=!0,!1)}function hi(s,i,o){if(ka(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function qn(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function $t(s,i,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+u)}}function Pt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ir(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Fr(s,i,o){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return p.call(this)},set:function(w){o=""+w,y.call(this,w)}}),Object.defineProperty(s,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function dt(s){if(!s._valueTracker){var i=Ir(s)?"checked":"value";s._valueTracker=Fr(s,i,""+s[i])}}function fs(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return s&&(u=Ir(s)?s.checked?"true":"false":s.value),s=u,s!==o?(i.setValue(s),!0):!1}function jr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Bs=/[\n"\\]/g;function jn(s){return s.replace(Bs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function di(s,i,o,u,p,y,w,I){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),i!=null?w==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+Pt(i)):s.value!==""+Pt(i)&&(s.value=""+Pt(i)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),i!=null?Yi(s,w,Pt(i)):o!=null?Yi(s,w,Pt(o)):u!=null&&s.removeAttribute("value"),p==null&&y!=null&&(s.defaultChecked=!!y),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+Pt(I):s.removeAttribute("name")}function fi(s,i,o,u,p,y,w,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){dt(s);return}o=o!=null?""+Pt(o):"",i=i!=null?""+Pt(i):o,I||i===s.value||(s.value=i),s.defaultValue=i}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=I?s.checked:!!u,s.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w),dt(s)}function Yi(s,i,o){i==="number"&&jr(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function ms(s,i,o,u){if(s=s.options,i){i={};for(var p=0;p<o.length;p++)i["$"+o[p]]=!0;for(o=0;o<s.length;o++)p=i.hasOwnProperty("$"+s[o].value),s[o].selected!==p&&(s[o].selected=p),p&&u&&(s[o].defaultSelected=!0)}else{for(o=""+Pt(o),i=null,p=0;p<s.length;p++){if(s[p].value===o){s[p].selected=!0,u&&(s[p].defaultSelected=!0);return}i!==null||s[p].disabled||(i=s[p])}i!==null&&(i.selected=!0)}}function ps(s,i,o){if(i!=null&&(i=""+Pt(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+Pt(o):""}function gn(s,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(pe(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Pt(i),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u),dt(s)}function Kt(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var Or=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xi(s,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,o):typeof o!="number"||o===0||Or.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function nr(s,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var p in i)u=i[p],i.hasOwnProperty(p)&&o[p]!==u&&Xi(s,p,u)}else for(var y in i)i.hasOwnProperty(y)&&Xi(s,y,i[y])}function mi(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ma=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pi(s){return gs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function rr(){}var cn=null;function Bn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Gr=null,zn=null;function $r(s){var i=er(s);if(i&&(s=i.stateNode)){var o=s[rn]||null;e:switch(s=i.stateNode,i.type){case"input":if(di(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+jn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==s&&u.form===s.form){var p=u[rn]||null;if(!p)throw Error(r(90));di(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===s.form&&fs(u)}break e;case"textarea":ps(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&ms(s,!!o.multiple,i,!1)}}}var Kr=!1;function ys(s,i,o){if(Kr)return s(i,o);Kr=!0;try{var u=s(i);return u}finally{if(Kr=!1,(Gr!==null||zn!==null)&&(Td(),Gr&&(i=Gr,s=zn,zn=Gr=null,$r(i),s)))for(i=0;i<s.length;i++)$r(s[i])}}function sr(s,i){var o=s.stateNode;if(o===null)return null;var u=o[rn]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vs=!1;if(On)try{var We={};Object.defineProperty(We,"passive",{get:function(){vs=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch{vs=!1}var vr=null,zs=null,Hs=null;function Wi(){if(Hs)return Hs;var s,i=zs,o=i.length,u,p="value"in vr?vr.value:vr.textContent,y=p.length;for(s=0;s<o&&i[s]===p[s];s++);var w=o-s;for(u=1;u<=w&&i[o-u]===p[y-u];u++);return Hs=p.slice(s,1<u?1-u:void 0)}function _(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function j(){return!0}function B(){return!1}function ne(s){function i(o,u,p,y,w){this._reactName=o,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(o=s[I],this[I]=o?o(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?j:B,this.isPropagationStopped=B,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=j)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=j)},persist:function(){},isPersistent:j}),i}var Pe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ae=ne(Pe),Ke=E({},Pe,{view:0,detail:0}),Ze=ne(Ke),xt,et,Rt,un=E({},Ke,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pa,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Rt&&(Rt&&s.type==="mousemove"?(xt=s.screenX-Rt.screenX,et=s.screenY-Rt.screenY):et=xt=0,Rt=s),xt)},movementY:function(s){return"movementY"in s?s.movementY:et}}),Ut=ne(un),Qt=E({},un,{dataTransfer:0}),sn=ne(Qt),Qr=E({},Ke,{relatedTarget:0}),Hn=ne(Qr),Yr=E({},Pe,{animationName:0,elapsedTime:0,pseudoElement:0}),qo=ne(Yr),Fs=E({},Pe,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Zi=ne(Fs),Mh=E({},Pe,{data:0}),gi=ne(Mh),Ph={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qh(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Vh[s])?!!i[s]:!1}function Pa(){return qh}var br=E({},Ke,{key:function(s){if(s.key){var i=Ph[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=_(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Uh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pa,charCode:function(s){return s.type==="keypress"?_(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?_(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Bh=ne(br),zh=E({},un,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ji=ne(zh),h=E({},Ke,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pa}),b=ne(h),T=E({},Pe,{propertyName:0,elapsedTime:0,pseudoElement:0}),O=ne(T),X=E({},un,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),re=ne(X),xe=E({},Pe,{newState:0,oldState:0}),Ge=ne(xe),hn=[9,13,27,32],vt=On&&"CompositionEvent"in window,Yt=null;On&&"documentMode"in document&&(Yt=document.documentMode);var bs=On&&"TextEvent"in window&&!Yt,yi=On&&(!vt||Yt&&8<Yt&&11>=Yt),Gs=" ",$s=!1;function Bo(s,i){switch(s){case"keyup":return hn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Il(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var jl=!1;function HN(s,i){switch(s){case"compositionend":return Il(i);case"keypress":return i.which!==32?null:($s=!0,Gs);case"textInput":return s=i.data,s===Gs&&$s?null:s;default:return null}}function FN(s,i){if(jl)return s==="compositionend"||!vt&&Bo(s,i)?(s=Wi(),Hs=zs=vr=null,jl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yi&&i.locale!=="ko"?null:i.data;default:return null}}var GN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cv(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!GN[s.type]:i==="textarea"}function Rv(s,i,o,u){Gr?zn?zn.push(u):zn=[u]:Gr=u,i=jd(i,"onChange"),0<i.length&&(o=new Ae("onChange","change",null,o,u),s.push({event:o,listeners:i}))}var Qc=null,Yc=null;function $N(s){d_(s,0)}function Hh(s){var i=Un(s);if(fs(i))return s}function Iv(s,i){if(s==="change")return i}var jv=!1;if(On){var Dm;if(On){var Lm="oninput"in document;if(!Lm){var Ov=document.createElement("div");Ov.setAttribute("oninput","return;"),Lm=typeof Ov.oninput=="function"}Dm=Lm}else Dm=!1;jv=Dm&&(!document.documentMode||9<document.documentMode)}function Dv(){Qc&&(Qc.detachEvent("onpropertychange",Lv),Yc=Qc=null)}function Lv(s){if(s.propertyName==="value"&&Hh(Yc)){var i=[];Rv(i,Yc,s,Bn(s)),ys($N,i)}}function KN(s,i,o){s==="focusin"?(Dv(),Qc=i,Yc=o,Qc.attachEvent("onpropertychange",Lv)):s==="focusout"&&Dv()}function QN(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Hh(Yc)}function YN(s,i){if(s==="click")return Hh(i)}function XN(s,i){if(s==="input"||s==="change")return Hh(i)}function WN(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Xr=typeof Object.is=="function"?Object.is:WN;function Xc(s,i){if(Xr(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var p=o[u];if(!Ht.call(i,p)||!Xr(s[p],i[p]))return!1}return!0}function kv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Mv(s,i){var o=kv(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=i&&u>=i)return{node:o,offset:i-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=kv(o)}}function Pv(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Pv(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function Uv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=jr(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=jr(s.document)}return i}function km(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var ZN=On&&"documentMode"in document&&11>=document.documentMode,Ol=null,Mm=null,Wc=null,Pm=!1;function Vv(s,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Pm||Ol==null||Ol!==jr(u)||(u=Ol,"selectionStart"in u&&km(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Wc&&Xc(Wc,u)||(Wc=u,u=jd(Mm,"onSelect"),0<u.length&&(i=new Ae("onSelect","select",null,i,o),s.push({event:i,listeners:u}),i.target=Ol)))}function zo(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var Dl={animationend:zo("Animation","AnimationEnd"),animationiteration:zo("Animation","AnimationIteration"),animationstart:zo("Animation","AnimationStart"),transitionrun:zo("Transition","TransitionRun"),transitionstart:zo("Transition","TransitionStart"),transitioncancel:zo("Transition","TransitionCancel"),transitionend:zo("Transition","TransitionEnd")},Um={},qv={};On&&(qv=document.createElement("div").style,"AnimationEvent"in window||(delete Dl.animationend.animation,delete Dl.animationiteration.animation,delete Dl.animationstart.animation),"TransitionEvent"in window||delete Dl.transitionend.transition);function Ho(s){if(Um[s])return Um[s];if(!Dl[s])return s;var i=Dl[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in qv)return Um[s]=i[o];return s}var Bv=Ho("animationend"),zv=Ho("animationiteration"),Hv=Ho("animationstart"),JN=Ho("transitionrun"),e2=Ho("transitionstart"),t2=Ho("transitioncancel"),Fv=Ho("transitionend"),Gv=new Map,Vm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vm.push("scrollEnd");function Ks(s,i){Gv.set(s,i),yr(i,[s])}var Fh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},_s=[],Ll=0,qm=0;function Gh(){for(var s=Ll,i=qm=Ll=0;i<s;){var o=_s[i];_s[i++]=null;var u=_s[i];_s[i++]=null;var p=_s[i];_s[i++]=null;var y=_s[i];if(_s[i++]=null,u!==null&&p!==null){var w=u.pending;w===null?p.next=p:(p.next=w.next,w.next=p),u.pending=p}y!==0&&$v(o,p,y)}}function $h(s,i,o,u){_s[Ll++]=s,_s[Ll++]=i,_s[Ll++]=o,_s[Ll++]=u,qm|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Bm(s,i,o,u){return $h(s,i,o,u),Kh(s)}function Fo(s,i){return $h(s,null,null,i),Kh(s)}function $v(s,i,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var p=!1,y=s.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(p=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,p&&i!==null&&(p=31-Dt(o),s=y.hiddenUpdates,u=s[p],u===null?s[p]=[i]:u.push(i),i.lane=o|536870912),y):null}function Kh(s){if(50<bu)throw bu=0,Xp=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var kl={};function n2(s,i,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(s,i,o,u){return new n2(s,i,o,u)}function zm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ea(s,i){var o=s.alternate;return o===null?(o=Wr(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function Kv(s,i){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function Qh(s,i,o,u,p,y){var w=0;if(u=s,typeof s=="function")zm(s)&&(w=1);else if(typeof s=="string")w=oC(s,o,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case V:return s=Wr(31,o,i,p),s.elementType=V,s.lanes=y,s;case D:return Go(o.children,p,y,i);case R:w=8,p|=24;break;case U:return s=Wr(12,o,i,p|2),s.elementType=U,s.lanes=y,s;case ie:return s=Wr(13,o,i,p),s.elementType=ie,s.lanes=y,s;case ve:return s=Wr(19,o,i,p),s.elementType=ve,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Y:w=10;break e;case F:w=9;break e;case Q:w=11;break e;case L:w=14;break e;case k:w=16,u=null;break e}w=29,o=Error(r(130,s===null?"null":typeof s,"")),u=null}return i=Wr(w,o,i,p),i.elementType=s,i.type=u,i.lanes=y,i}function Go(s,i,o,u){return s=Wr(7,s,u,i),s.lanes=o,s}function Hm(s,i,o){return s=Wr(6,s,null,i),s.lanes=o,s}function Qv(s){var i=Wr(18,null,null,0);return i.stateNode=s,i}function Fm(s,i,o){return i=Wr(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var Yv=new WeakMap;function xs(s,i){if(typeof s=="object"&&s!==null){var o=Yv.get(s);return o!==void 0?o:(i={value:s,source:i,stack:Ui(i)},Yv.set(s,i),i)}return{value:s,source:i,stack:Ui(i)}}var Ml=[],Pl=0,Yh=null,Zc=0,Es=[],ws=0,Ua=null,vi=1,bi="";function ta(s,i){Ml[Pl++]=Zc,Ml[Pl++]=Yh,Yh=s,Zc=i}function Xv(s,i,o){Es[ws++]=vi,Es[ws++]=bi,Es[ws++]=Ua,Ua=s;var u=vi;s=bi;var p=32-Dt(u)-1;u&=~(1<<p),o+=1;var y=32-Dt(i)+p;if(30<y){var w=p-p%5;y=(u&(1<<w)-1).toString(32),u>>=w,p-=w,vi=1<<32-Dt(i)+p|o<<p|u,bi=y+s}else vi=1<<y|o<<p|u,bi=s}function Gm(s){s.return!==null&&(ta(s,1),Xv(s,1,0))}function $m(s){for(;s===Yh;)Yh=Ml[--Pl],Ml[Pl]=null,Zc=Ml[--Pl],Ml[Pl]=null;for(;s===Ua;)Ua=Es[--ws],Es[ws]=null,bi=Es[--ws],Es[ws]=null,vi=Es[--ws],Es[ws]=null}function Wv(s,i){Es[ws++]=vi,Es[ws++]=bi,Es[ws++]=Ua,vi=i.id,bi=i.overflow,Ua=s}var Fn=null,Vt=null,ht=!1,Va=null,Ts=!1,Km=Error(r(519));function qa(s){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jc(xs(i,s)),Km}function Zv(s){var i=s.stateNode,o=s.type,u=s.memoizedProps;switch(i[Ft]=s,i[rn]=u,o){case"dialog":nt("cancel",i),nt("close",i);break;case"iframe":case"object":case"embed":nt("load",i);break;case"video":case"audio":for(o=0;o<xu.length;o++)nt(xu[o],i);break;case"source":nt("error",i);break;case"img":case"image":case"link":nt("error",i),nt("load",i);break;case"details":nt("toggle",i);break;case"input":nt("invalid",i),fi(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":nt("invalid",i);break;case"textarea":nt("invalid",i),gn(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||g_(i.textContent,o)?(u.popover!=null&&(nt("beforetoggle",i),nt("toggle",i)),u.onScroll!=null&&nt("scroll",i),u.onScrollEnd!=null&&nt("scrollend",i),u.onClick!=null&&(i.onclick=rr),i=!0):i=!1,i||qa(s,!0)}function Jv(s){for(Fn=s.return;Fn;)switch(Fn.tag){case 5:case 31:case 13:Ts=!1;return;case 27:case 3:Ts=!0;return;default:Fn=Fn.return}}function Ul(s){if(s!==Fn)return!1;if(!ht)return Jv(s),ht=!0,!1;var i=s.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||hg(s.type,s.memoizedProps)),o=!o),o&&Vt&&qa(s),Jv(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Vt=A_(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Vt=A_(s)}else i===27?(i=Vt,eo(s.type)?(s=gg,gg=null,Vt=s):Vt=i):Vt=Fn?Ss(s.stateNode.nextSibling):null;return!0}function $o(){Vt=Fn=null,ht=!1}function Qm(){var s=Va;return s!==null&&(Mr===null?Mr=s:Mr.push.apply(Mr,s),Va=null),s}function Jc(s){Va===null?Va=[s]:Va.push(s)}var Ym=q(null),Ko=null,na=null;function Ba(s,i,o){de(Ym,i._currentValue),i._currentValue=o}function ra(s){s._currentValue=Ym.current,W(Ym)}function Xm(s,i,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===o)break;s=s.return}}function Wm(s,i,o,u){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var y=p.dependencies;if(y!==null){var w=p.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=p;for(var z=0;z<i.length;z++)if(I.context===i[z]){y.lanes|=o,I=y.alternate,I!==null&&(I.lanes|=o),Xm(y.return,o,s),u||(w=null);break e}y=I.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(r(341));w.lanes|=o,y=w.alternate,y!==null&&(y.lanes|=o),Xm(w,o,s),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===s){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function Vl(s,i,o,u){s=null;for(var p=i,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var I=p.type;Xr(p.pendingProps.value,w.value)||(s!==null?s.push(I):s=[I])}}else if(p===De.current){if(w=p.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(Su):s=[Su])}p=p.return}s!==null&&Wm(i,s,o,u),i.flags|=262144}function Xh(s){for(s=s.firstContext;s!==null;){if(!Xr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Qo(s){Ko=s,na=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Gn(s){return eb(Ko,s)}function Wh(s,i){return Ko===null&&Qo(s),eb(s,i)}function eb(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},na===null){if(s===null)throw Error(r(308));na=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else na=na.next=i;return o}var r2=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},s2=n.unstable_scheduleCallback,i2=n.unstable_NormalPriority,yn={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zm(){return{controller:new r2,data:new Map,refCount:0}}function eu(s){s.refCount--,s.refCount===0&&s2(i2,function(){s.controller.abort()})}var tu=null,Jm=0,ql=0,Bl=null;function a2(s,i){if(tu===null){var o=tu=[];Jm=0,ql=ng(),Bl={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Jm++,i.then(tb,tb),i}function tb(){if(--Jm===0&&tu!==null){Bl!==null&&(Bl.status="fulfilled");var s=tu;tu=null,ql=0,Bl=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function o2(s,i){var o=[],u={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var p=0;p<o.length;p++)(0,o[p])(i)},function(p){for(u.status="rejected",u.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),u}var nb=H.S;H.S=function(s,i){q1=Ot(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&a2(s,i),nb!==null&&nb(s,i)};var Yo=q(null);function ep(){var s=Yo.current;return s!==null?s:It.pooledCache}function Zh(s,i){i===null?de(Yo,Yo.current):de(Yo,i.pool)}function rb(){var s=ep();return s===null?null:{parent:yn._currentValue,pool:s}}var zl=Error(r(460)),tp=Error(r(474)),Jh=Error(r(542)),ed={then:function(){}};function sb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ib(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(rr,rr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,ob(s),s;default:if(typeof i.status=="string")i.then(rr,rr);else{if(s=It,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=u}},function(u){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,ob(s),s}throw Wo=i,zl}}function Xo(s){try{var i=s._init;return i(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Wo=o,zl):o}}var Wo=null;function ab(){if(Wo===null)throw Error(r(459));var s=Wo;return Wo=null,s}function ob(s){if(s===zl||s===Jh)throw Error(r(483))}var Hl=null,nu=0;function td(s){var i=nu;return nu+=1,Hl===null&&(Hl=[]),ib(Hl,s,i)}function ru(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function nd(s,i){throw i.$$typeof===x?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function lb(s){function i(K,$){if(s){var Z=K.deletions;Z===null?(K.deletions=[$],K.flags|=16):Z.push($)}}function o(K,$){if(!s)return null;for(;$!==null;)i(K,$),$=$.sibling;return null}function u(K){for(var $=new Map;K!==null;)K.key!==null?$.set(K.key,K):$.set(K.index,K),K=K.sibling;return $}function p(K,$){return K=ea(K,$),K.index=0,K.sibling=null,K}function y(K,$,Z){return K.index=Z,s?(Z=K.alternate,Z!==null?(Z=Z.index,Z<$?(K.flags|=67108866,$):Z):(K.flags|=67108866,$)):(K.flags|=1048576,$)}function w(K){return s&&K.alternate===null&&(K.flags|=67108866),K}function I(K,$,Z,oe){return $===null||$.tag!==6?($=Hm(Z,K.mode,oe),$.return=K,$):($=p($,Z),$.return=K,$)}function z(K,$,Z,oe){var ke=Z.type;return ke===D?ae(K,$,Z.props.children,oe,Z.key):$!==null&&($.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===k&&Xo(ke)===$.type)?($=p($,Z.props),ru($,Z),$.return=K,$):($=Qh(Z.type,Z.key,Z.props,null,K.mode,oe),ru($,Z),$.return=K,$)}function J(K,$,Z,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==Z.containerInfo||$.stateNode.implementation!==Z.implementation?($=Fm(Z,K.mode,oe),$.return=K,$):($=p($,Z.children||[]),$.return=K,$)}function ae(K,$,Z,oe,ke){return $===null||$.tag!==7?($=Go(Z,K.mode,oe,ke),$.return=K,$):($=p($,Z),$.return=K,$)}function he(K,$,Z){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Hm(""+$,K.mode,Z),$.return=K,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return Z=Qh($.type,$.key,$.props,null,K.mode,Z),ru(Z,$),Z.return=K,Z;case C:return $=Fm($,K.mode,Z),$.return=K,$;case k:return $=Xo($),he(K,$,Z)}if(pe($)||M($))return $=Go($,K.mode,Z,null),$.return=K,$;if(typeof $.then=="function")return he(K,td($),Z);if($.$$typeof===Y)return he(K,Wh(K,$),Z);nd(K,$)}return null}function te(K,$,Z,oe){var ke=$!==null?$.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return ke!==null?null:I(K,$,""+Z,oe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return Z.key===ke?z(K,$,Z,oe):null;case C:return Z.key===ke?J(K,$,Z,oe):null;case k:return Z=Xo(Z),te(K,$,Z,oe)}if(pe(Z)||M(Z))return ke!==null?null:ae(K,$,Z,oe,null);if(typeof Z.then=="function")return te(K,$,td(Z),oe);if(Z.$$typeof===Y)return te(K,$,Wh(K,Z),oe);nd(K,Z)}return null}function se(K,$,Z,oe,ke){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return K=K.get(Z)||null,I($,K,""+oe,ke);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case A:return K=K.get(oe.key===null?Z:oe.key)||null,z($,K,oe,ke);case C:return K=K.get(oe.key===null?Z:oe.key)||null,J($,K,oe,ke);case k:return oe=Xo(oe),se(K,$,Z,oe,ke)}if(pe(oe)||M(oe))return K=K.get(Z)||null,ae($,K,oe,ke,null);if(typeof oe.then=="function")return se(K,$,Z,td(oe),ke);if(oe.$$typeof===Y)return se(K,$,Z,Wh($,oe),ke);nd($,oe)}return null}function Ne(K,$,Z,oe){for(var ke=null,mt=null,Re=$,Qe=$=0,at=null;Re!==null&&Qe<Z.length;Qe++){Re.index>Qe?(at=Re,Re=null):at=Re.sibling;var pt=te(K,Re,Z[Qe],oe);if(pt===null){Re===null&&(Re=at);break}s&&Re&&pt.alternate===null&&i(K,Re),$=y(pt,$,Qe),mt===null?ke=pt:mt.sibling=pt,mt=pt,Re=at}if(Qe===Z.length)return o(K,Re),ht&&ta(K,Qe),ke;if(Re===null){for(;Qe<Z.length;Qe++)Re=he(K,Z[Qe],oe),Re!==null&&($=y(Re,$,Qe),mt===null?ke=Re:mt.sibling=Re,mt=Re);return ht&&ta(K,Qe),ke}for(Re=u(Re);Qe<Z.length;Qe++)at=se(Re,K,Qe,Z[Qe],oe),at!==null&&(s&&at.alternate!==null&&Re.delete(at.key===null?Qe:at.key),$=y(at,$,Qe),mt===null?ke=at:mt.sibling=at,mt=at);return s&&Re.forEach(function(io){return i(K,io)}),ht&&ta(K,Qe),ke}function Ue(K,$,Z,oe){if(Z==null)throw Error(r(151));for(var ke=null,mt=null,Re=$,Qe=$=0,at=null,pt=Z.next();Re!==null&&!pt.done;Qe++,pt=Z.next()){Re.index>Qe?(at=Re,Re=null):at=Re.sibling;var io=te(K,Re,pt.value,oe);if(io===null){Re===null&&(Re=at);break}s&&Re&&io.alternate===null&&i(K,Re),$=y(io,$,Qe),mt===null?ke=io:mt.sibling=io,mt=io,Re=at}if(pt.done)return o(K,Re),ht&&ta(K,Qe),ke;if(Re===null){for(;!pt.done;Qe++,pt=Z.next())pt=he(K,pt.value,oe),pt!==null&&($=y(pt,$,Qe),mt===null?ke=pt:mt.sibling=pt,mt=pt);return ht&&ta(K,Qe),ke}for(Re=u(Re);!pt.done;Qe++,pt=Z.next())pt=se(Re,K,Qe,pt.value,oe),pt!==null&&(s&&pt.alternate!==null&&Re.delete(pt.key===null?Qe:pt.key),$=y(pt,$,Qe),mt===null?ke=pt:mt.sibling=pt,mt=pt);return s&&Re.forEach(function(vC){return i(K,vC)}),ht&&ta(K,Qe),ke}function Nt(K,$,Z,oe){if(typeof Z=="object"&&Z!==null&&Z.type===D&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:e:{for(var ke=Z.key;$!==null;){if($.key===ke){if(ke=Z.type,ke===D){if($.tag===7){o(K,$.sibling),oe=p($,Z.props.children),oe.return=K,K=oe;break e}}else if($.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===k&&Xo(ke)===$.type){o(K,$.sibling),oe=p($,Z.props),ru(oe,Z),oe.return=K,K=oe;break e}o(K,$);break}else i(K,$);$=$.sibling}Z.type===D?(oe=Go(Z.props.children,K.mode,oe,Z.key),oe.return=K,K=oe):(oe=Qh(Z.type,Z.key,Z.props,null,K.mode,oe),ru(oe,Z),oe.return=K,K=oe)}return w(K);case C:e:{for(ke=Z.key;$!==null;){if($.key===ke)if($.tag===4&&$.stateNode.containerInfo===Z.containerInfo&&$.stateNode.implementation===Z.implementation){o(K,$.sibling),oe=p($,Z.children||[]),oe.return=K,K=oe;break e}else{o(K,$);break}else i(K,$);$=$.sibling}oe=Fm(Z,K.mode,oe),oe.return=K,K=oe}return w(K);case k:return Z=Xo(Z),Nt(K,$,Z,oe)}if(pe(Z))return Ne(K,$,Z,oe);if(M(Z)){if(ke=M(Z),typeof ke!="function")throw Error(r(150));return Z=ke.call(Z),Ue(K,$,Z,oe)}if(typeof Z.then=="function")return Nt(K,$,td(Z),oe);if(Z.$$typeof===Y)return Nt(K,$,Wh(K,Z),oe);nd(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,$!==null&&$.tag===6?(o(K,$.sibling),oe=p($,Z),oe.return=K,K=oe):(o(K,$),oe=Hm(Z,K.mode,oe),oe.return=K,K=oe),w(K)):o(K,$)}return function(K,$,Z,oe){try{nu=0;var ke=Nt(K,$,Z,oe);return Hl=null,ke}catch(Re){if(Re===zl||Re===Jh)throw Re;var mt=Wr(29,Re,null,K.mode);return mt.lanes=oe,mt.return=K,mt}finally{}}}var Zo=lb(!0),cb=lb(!1),za=!1;function np(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rp(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ha(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Fa(s,i,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(bt&2)!==0){var p=u.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),u.pending=i,i=Kh(s),$v(s,null,o),i}return $h(s,u,i,o),Kh(s)}function su(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,Gi(s,o)}}function sp(s,i){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var p=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?p=y=w:y=y.next=w,o=o.next}while(o!==null);y===null?p=y=i:y=y.next=i}else p=y=i;o={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var ip=!1;function iu(){if(ip){var s=Bl;if(s!==null)throw s}}function au(s,i,o,u){ip=!1;var p=s.updateQueue;za=!1;var y=p.firstBaseUpdate,w=p.lastBaseUpdate,I=p.shared.pending;if(I!==null){p.shared.pending=null;var z=I,J=z.next;z.next=null,w===null?y=J:w.next=J,w=z;var ae=s.alternate;ae!==null&&(ae=ae.updateQueue,I=ae.lastBaseUpdate,I!==w&&(I===null?ae.firstBaseUpdate=J:I.next=J,ae.lastBaseUpdate=z))}if(y!==null){var he=p.baseState;w=0,ae=J=z=null,I=y;do{var te=I.lane&-536870913,se=te!==I.lane;if(se?(it&te)===te:(u&te)===te){te!==0&&te===ql&&(ip=!0),ae!==null&&(ae=ae.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ne=s,Ue=I;te=i;var Nt=o;switch(Ue.tag){case 1:if(Ne=Ue.payload,typeof Ne=="function"){he=Ne.call(Nt,he,te);break e}he=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Ue.payload,te=typeof Ne=="function"?Ne.call(Nt,he,te):Ne,te==null)break e;he=E({},he,te);break e;case 2:za=!0}}te=I.callback,te!==null&&(s.flags|=64,se&&(s.flags|=8192),se=p.callbacks,se===null?p.callbacks=[te]:se.push(te))}else se={lane:te,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ae===null?(J=ae=se,z=he):ae=ae.next=se,w|=te;if(I=I.next,I===null){if(I=p.shared.pending,I===null)break;se=I,I=se.next,se.next=null,p.lastBaseUpdate=se,p.shared.pending=null}}while(!0);ae===null&&(z=he),p.baseState=z,p.firstBaseUpdate=J,p.lastBaseUpdate=ae,y===null&&(p.shared.lanes=0),Ya|=w,s.lanes=w,s.memoizedState=he}}function ub(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function hb(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)ub(o[s],i)}var Fl=q(null),rd=q(0);function fb(s,i){s=da,de(rd,s),de(Fl,i),da=s|i.baseLanes}function ap(){de(rd,da),de(Fl,Fl.current)}function op(){da=rd.current,W(Fl),W(rd)}var Zr=q(null),As=null;function Ga(s){var i=s.alternate;de(dn,dn.current&1),de(Zr,s),As===null&&(i===null||Fl.current!==null||i.memoizedState!==null)&&(As=s)}function lp(s){de(dn,dn.current),de(Zr,s),As===null&&(As=s)}function mb(s){s.tag===22?(de(dn,dn.current),de(Zr,s),As===null&&(As=s)):$a()}function $a(){de(dn,dn.current),de(Zr,Zr.current)}function Jr(s){W(Zr),As===s&&(As=null),W(dn)}var dn=q(0);function sd(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||mg(o)||pg(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var sa=0,$e=null,At=null,vn=null,id=!1,Gl=!1,Jo=!1,ad=0,ou=0,$l=null,l2=0;function an(){throw Error(r(321))}function cp(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!Xr(s[o],i[o]))return!1;return!0}function up(s,i,o,u,p,y){return sa=y,$e=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=s===null||s.memoizedState===null?Wb:Ap,Jo=!1,y=o(u,p),Jo=!1,Gl&&(y=gb(i,o,u,p)),pb(s),y}function pb(s){H.H=uu;var i=At!==null&&At.next!==null;if(sa=0,vn=At=$e=null,id=!1,ou=0,$l=null,i)throw Error(r(300));s===null||bn||(s=s.dependencies,s!==null&&Xh(s)&&(bn=!0))}function gb(s,i,o,u){$e=s;var p=0;do{if(Gl&&($l=null),ou=0,Gl=!1,25<=p)throw Error(r(301));if(p+=1,vn=At=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=Zb,y=i(o,u)}while(Gl);return y}function c2(){var s=H.H,i=s.useState()[0];return i=typeof i.then=="function"?lu(i):i,s=s.useState()[0],(At!==null?At.memoizedState:null)!==s&&($e.flags|=1024),i}function hp(){var s=ad!==0;return ad=0,s}function dp(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function fp(s){if(id){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}id=!1}sa=0,vn=At=$e=null,Gl=!1,ou=ad=0,$l=null}function _r(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?$e.memoizedState=vn=s:vn=vn.next=s,vn}function fn(){if(At===null){var s=$e.alternate;s=s!==null?s.memoizedState:null}else s=At.next;var i=vn===null?$e.memoizedState:vn.next;if(i!==null)vn=i,At=s;else{if(s===null)throw $e.alternate===null?Error(r(467)):Error(r(310));At=s,s={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},vn===null?$e.memoizedState=vn=s:vn=vn.next=s}return vn}function od(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lu(s){var i=ou;return ou+=1,$l===null&&($l=[]),s=ib($l,s,i),i=$e,(vn===null?i.memoizedState:vn.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?Wb:Ap),s}function ld(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return lu(s);if(s.$$typeof===Y)return Gn(s)}throw Error(r(438,String(s)))}function mp(s){var i=null,o=$e.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=$e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=od(),$e.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),u=0;u<s;u++)o[u]=G;return i.index++,o}function ia(s,i){return typeof i=="function"?i(s):i}function cd(s){var i=fn();return pp(i,At,s)}function pp(s,i,o){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var p=s.baseQueue,y=u.pending;if(y!==null){if(p!==null){var w=p.next;p.next=y.next,y.next=w}i.baseQueue=p=y,u.pending=null}if(y=s.baseState,p===null)s.memoizedState=y;else{i=p.next;var I=w=null,z=null,J=i,ae=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(it&he)===he:(sa&he)===he){var te=J.revertLane;if(te===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===ql&&(ae=!0);else if((sa&te)===te){J=J.next,te===ql&&(ae=!0);continue}else he={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},z===null?(I=z=he,w=y):z=z.next=he,$e.lanes|=te,Ya|=te;he=J.action,Jo&&o(y,he),y=J.hasEagerState?J.eagerState:o(y,he)}else te={lane:he,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},z===null?(I=z=te,w=y):z=z.next=te,$e.lanes|=he,Ya|=he;J=J.next}while(J!==null&&J!==i);if(z===null?w=y:z.next=I,!Xr(y,s.memoizedState)&&(bn=!0,ae&&(o=Bl,o!==null)))throw o;s.memoizedState=y,s.baseState=w,s.baseQueue=z,u.lastRenderedState=y}return p===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function gp(s){var i=fn(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var u=o.dispatch,p=o.pending,y=i.memoizedState;if(p!==null){o.pending=null;var w=p=p.next;do y=s(y,w.action),w=w.next;while(w!==p);Xr(y,i.memoizedState)||(bn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function yb(s,i,o){var u=$e,p=fn(),y=ht;if(y){if(o===void 0)throw Error(r(407));o=o()}else o=i();var w=!Xr((At||p).memoizedState,o);if(w&&(p.memoizedState=o,bn=!0),p=p.queue,bp(_b.bind(null,u,p,s),[s]),p.getSnapshot!==i||w||vn!==null&&vn.memoizedState.tag&1){if(u.flags|=2048,Kl(9,{destroy:void 0},bb.bind(null,u,p,o,i),null),It===null)throw Error(r(349));y||(sa&127)!==0||vb(u,i,o)}return o}function vb(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=$e.updateQueue,i===null?(i=od(),$e.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function bb(s,i,o,u){i.value=o,i.getSnapshot=u,xb(i)&&Eb(s)}function _b(s,i,o){return o(function(){xb(i)&&Eb(s)})}function xb(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!Xr(s,o)}catch{return!0}}function Eb(s){var i=Fo(s,2);i!==null&&Pr(i,s,2)}function yp(s){var i=_r();if(typeof s=="function"){var o=s;if(s=o(),Jo){An(!0);try{o()}finally{An(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:s},i}function wb(s,i,o,u){return s.baseState=o,pp(s,At,typeof u=="function"?u:ia)}function u2(s,i,o,u,p){if(dd(s))throw Error(r(485));if(s=i.action,s!==null){var y={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};H.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,Tb(i,y)):(y.next=o.next,i.pending=o.next=y)}}function Tb(s,i){var o=i.action,u=i.payload,p=s.state;if(i.isTransition){var y=H.T,w={};H.T=w;try{var I=o(p,u),z=H.S;z!==null&&z(w,I),Ab(s,i,I)}catch(J){vp(s,i,J)}finally{y!==null&&w.types!==null&&(y.types=w.types),H.T=y}}else try{y=o(p,u),Ab(s,i,y)}catch(J){vp(s,i,J)}}function Ab(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Sb(s,i,u)},function(u){return vp(s,i,u)}):Sb(s,i,o)}function Sb(s,i,o){i.status="fulfilled",i.value=o,Nb(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,Tb(s,o)))}function vp(s,i,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Nb(i),i=i.next;while(i!==u)}s.action=null}function Nb(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function Cb(s,i){return i}function Rb(s,i){if(ht){var o=It.formState;if(o!==null){e:{var u=$e;if(ht){if(Vt){t:{for(var p=Vt,y=Ts;p.nodeType!==8;){if(!y){p=null;break t}if(p=Ss(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Vt=Ss(p.nextSibling),u=p.data==="F!";break e}}qa(u)}u=!1}u&&(i=o[0])}}return o=_r(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cb,lastRenderedState:i},o.queue=u,o=Qb.bind(null,$e,u),u.dispatch=o,u=yp(!1),y=Tp.bind(null,$e,!1,u.queue),u=_r(),p={state:i,dispatch:null,action:s,pending:null},u.queue=p,o=u2.bind(null,$e,p,y,o),p.dispatch=o,u.memoizedState=s,[i,o,!1]}function Ib(s){var i=fn();return jb(i,At,s)}function jb(s,i,o){if(i=pp(s,i,Cb)[0],s=cd(ia)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=lu(i)}catch(w){throw w===zl?Jh:w}else u=i;i=fn();var p=i.queue,y=p.dispatch;return o!==i.memoizedState&&($e.flags|=2048,Kl(9,{destroy:void 0},h2.bind(null,p,o),null)),[u,y,s]}function h2(s,i){s.action=i}function Ob(s){var i=fn(),o=At;if(o!==null)return jb(i,o,s);fn(),i=i.memoizedState,o=fn();var u=o.queue.dispatch;return o.memoizedState=s,[i,u,!1]}function Kl(s,i,o,u){return s={tag:s,create:o,deps:u,inst:i,next:null},i=$e.updateQueue,i===null&&(i=od(),$e.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,i.lastEffect=s),s}function Db(){return fn().memoizedState}function ud(s,i,o,u){var p=_r();$e.flags|=s,p.memoizedState=Kl(1|i,{destroy:void 0},o,u===void 0?null:u)}function hd(s,i,o,u){var p=fn();u=u===void 0?null:u;var y=p.memoizedState.inst;At!==null&&u!==null&&cp(u,At.memoizedState.deps)?p.memoizedState=Kl(i,y,o,u):($e.flags|=s,p.memoizedState=Kl(1|i,y,o,u))}function Lb(s,i){ud(8390656,8,s,i)}function bp(s,i){hd(2048,8,s,i)}function d2(s){$e.flags|=4;var i=$e.updateQueue;if(i===null)i=od(),$e.updateQueue=i,i.events=[s];else{var o=i.events;o===null?i.events=[s]:o.push(s)}}function kb(s){var i=fn().memoizedState;return d2({ref:i,nextImpl:s}),function(){if((bt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Mb(s,i){return hd(4,2,s,i)}function Pb(s,i){return hd(4,4,s,i)}function Ub(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Vb(s,i,o){o=o!=null?o.concat([s]):null,hd(4,4,Ub.bind(null,i,s),o)}function _p(){}function qb(s,i){var o=fn();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&cp(i,u[1])?u[0]:(o.memoizedState=[s,i],s)}function Bb(s,i){var o=fn();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&cp(i,u[1]))return u[0];if(u=s(),Jo){An(!0);try{s()}finally{An(!1)}}return o.memoizedState=[u,i],u}function xp(s,i,o){return o===void 0||(sa&1073741824)!==0&&(it&261930)===0?s.memoizedState=i:(s.memoizedState=o,s=z1(),$e.lanes|=s,Ya|=s,o)}function zb(s,i,o,u){return Xr(o,i)?o:Fl.current!==null?(s=xp(s,o,u),Xr(s,i)||(bn=!0),s):(sa&42)===0||(sa&1073741824)!==0&&(it&261930)===0?(bn=!0,s.memoizedState=o):(s=z1(),$e.lanes|=s,Ya|=s,i)}function Hb(s,i,o,u,p){var y=ee.p;ee.p=y!==0&&8>y?y:8;var w=H.T,I={};H.T=I,Tp(s,!1,i,o);try{var z=p(),J=H.S;if(J!==null&&J(I,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ae=o2(z,u);cu(s,i,ae,ns(s))}else cu(s,i,u,ns(s))}catch(he){cu(s,i,{then:function(){},status:"rejected",reason:he},ns())}finally{ee.p=y,w!==null&&I.types!==null&&(w.types=I.types),H.T=w}}function f2(){}function Ep(s,i,o,u){if(s.tag!==5)throw Error(r(476));var p=Fb(s).queue;Hb(s,p,i,ue,o===null?f2:function(){return Gb(s),o(u)})}function Fb(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:ue},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function Gb(s){var i=Fb(s);i.next===null&&(i=s.alternate.memoizedState),cu(s,i.next.queue,{},ns())}function wp(){return Gn(Su)}function $b(){return fn().memoizedState}function Kb(){return fn().memoizedState}function m2(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=ns();s=Ha(o);var u=Fa(i,s,o);u!==null&&(Pr(u,i,o),su(u,i,o)),i={cache:Zm()},s.payload=i;return}i=i.return}}function p2(s,i,o){var u=ns();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},dd(s)?Yb(i,o):(o=Bm(s,i,o,u),o!==null&&(Pr(o,s,u),Xb(o,i,u)))}function Qb(s,i,o){var u=ns();cu(s,i,o,u)}function cu(s,i,o,u){var p={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(dd(s))Yb(i,p);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var w=i.lastRenderedState,I=y(w,o);if(p.hasEagerState=!0,p.eagerState=I,Xr(I,w))return $h(s,i,p,0),It===null&&Gh(),!1}catch{}finally{}if(o=Bm(s,i,p,u),o!==null)return Pr(o,s,u),Xb(o,i,u),!0}return!1}function Tp(s,i,o,u){if(u={lane:2,revertLane:ng(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},dd(s)){if(i)throw Error(r(479))}else i=Bm(s,o,u,2),i!==null&&Pr(i,s,2)}function dd(s){var i=s.alternate;return s===$e||i!==null&&i===$e}function Yb(s,i){Gl=id=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function Xb(s,i,o){if((o&4194048)!==0){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,Gi(s,o)}}var uu={readContext:Gn,use:ld,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};uu.useEffectEvent=an;var Wb={readContext:Gn,use:ld,useCallback:function(s,i){return _r().memoizedState=[s,i===void 0?null:i],s},useContext:Gn,useEffect:Lb,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,ud(4194308,4,Ub.bind(null,i,s),o)},useLayoutEffect:function(s,i){return ud(4194308,4,s,i)},useInsertionEffect:function(s,i){ud(4,2,s,i)},useMemo:function(s,i){var o=_r();i=i===void 0?null:i;var u=s();if(Jo){An(!0);try{s()}finally{An(!1)}}return o.memoizedState=[u,i],u},useReducer:function(s,i,o){var u=_r();if(o!==void 0){var p=o(i);if(Jo){An(!0);try{o(i)}finally{An(!1)}}}else p=i;return u.memoizedState=u.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},u.queue=s,s=s.dispatch=p2.bind(null,$e,s),[u.memoizedState,s]},useRef:function(s){var i=_r();return s={current:s},i.memoizedState=s},useState:function(s){s=yp(s);var i=s.queue,o=Qb.bind(null,$e,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:_p,useDeferredValue:function(s,i){var o=_r();return xp(o,s,i)},useTransition:function(){var s=yp(!1);return s=Hb.bind(null,$e,s.queue,!0,!1),_r().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var u=$e,p=_r();if(ht){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),It===null)throw Error(r(349));(it&127)!==0||vb(u,i,o)}p.memoizedState=o;var y={value:o,getSnapshot:i};return p.queue=y,Lb(_b.bind(null,u,y,s),[s]),u.flags|=2048,Kl(9,{destroy:void 0},bb.bind(null,u,y,o,i),null),o},useId:function(){var s=_r(),i=It.identifierPrefix;if(ht){var o=bi,u=vi;o=(u&~(1<<32-Dt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=ad++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=l2++,i="_"+i+"r_"+o.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:wp,useFormState:Rb,useActionState:Rb,useOptimistic:function(s){var i=_r();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Tp.bind(null,$e,!0,o),o.dispatch=i,[s,i]},useMemoCache:mp,useCacheRefresh:function(){return _r().memoizedState=m2.bind(null,$e)},useEffectEvent:function(s){var i=_r(),o={impl:s};return i.memoizedState=o,function(){if((bt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Ap={readContext:Gn,use:ld,useCallback:qb,useContext:Gn,useEffect:bp,useImperativeHandle:Vb,useInsertionEffect:Mb,useLayoutEffect:Pb,useMemo:Bb,useReducer:cd,useRef:Db,useState:function(){return cd(ia)},useDebugValue:_p,useDeferredValue:function(s,i){var o=fn();return zb(o,At.memoizedState,s,i)},useTransition:function(){var s=cd(ia)[0],i=fn().memoizedState;return[typeof s=="boolean"?s:lu(s),i]},useSyncExternalStore:yb,useId:$b,useHostTransitionStatus:wp,useFormState:Ib,useActionState:Ib,useOptimistic:function(s,i){var o=fn();return wb(o,At,s,i)},useMemoCache:mp,useCacheRefresh:Kb};Ap.useEffectEvent=kb;var Zb={readContext:Gn,use:ld,useCallback:qb,useContext:Gn,useEffect:bp,useImperativeHandle:Vb,useInsertionEffect:Mb,useLayoutEffect:Pb,useMemo:Bb,useReducer:gp,useRef:Db,useState:function(){return gp(ia)},useDebugValue:_p,useDeferredValue:function(s,i){var o=fn();return At===null?xp(o,s,i):zb(o,At.memoizedState,s,i)},useTransition:function(){var s=gp(ia)[0],i=fn().memoizedState;return[typeof s=="boolean"?s:lu(s),i]},useSyncExternalStore:yb,useId:$b,useHostTransitionStatus:wp,useFormState:Ob,useActionState:Ob,useOptimistic:function(s,i){var o=fn();return At!==null?wb(o,At,s,i):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:mp,useCacheRefresh:Kb};Zb.useEffectEvent=kb;function Sp(s,i,o,u){i=s.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Np={enqueueSetState:function(s,i,o){s=s._reactInternals;var u=ns(),p=Ha(u);p.payload=i,o!=null&&(p.callback=o),i=Fa(s,p,u),i!==null&&(Pr(i,s,u),su(i,s,u))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var u=ns(),p=Ha(u);p.tag=1,p.payload=i,o!=null&&(p.callback=o),i=Fa(s,p,u),i!==null&&(Pr(i,s,u),su(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=ns(),u=Ha(o);u.tag=2,i!=null&&(u.callback=i),i=Fa(s,u,o),i!==null&&(Pr(i,s,o),su(i,s,o))}};function Jb(s,i,o,u,p,y,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,y,w):i.prototype&&i.prototype.isPureReactComponent?!Xc(o,u)||!Xc(p,y):!0}function e1(s,i,o,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==s&&Np.enqueueReplaceState(i,i.state,null)}function el(s,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(s=s.defaultProps){o===i&&(o=E({},o));for(var p in s)o[p]===void 0&&(o[p]=s[p])}return o}function t1(s){Fh(s)}function n1(s){console.error(s)}function r1(s){Fh(s)}function fd(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function s1(s,i,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Cp(s,i,o){return o=Ha(o),o.tag=3,o.payload={element:null},o.callback=function(){fd(s,i)},o}function i1(s){return s=Ha(s),s.tag=3,s}function a1(s,i,o,u){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;s.payload=function(){return p(y)},s.callback=function(){s1(i,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){s1(i,o,u),typeof p!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function g2(s,i,o,u,p){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Vl(i,o,p,!0),o=Zr.current,o!==null){switch(o.tag){case 31:case 13:return As===null?Ad():o.alternate===null&&on===0&&(on=3),o.flags&=-257,o.flags|=65536,o.lanes=p,u===ed?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Jp(s,u,p)),!1;case 22:return o.flags|=65536,u===ed?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Jp(s,u,p)),!1}throw Error(r(435,o.tag))}return Jp(s,u,p),Ad(),!1}if(ht)return i=Zr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,u!==Km&&(s=Error(r(422),{cause:u}),Jc(xs(s,o)))):(u!==Km&&(i=Error(r(423),{cause:u}),Jc(xs(i,o))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,u=xs(u,o),p=Cp(s.stateNode,u,p),sp(s,p),on!==4&&(on=2)),!1;var y=Error(r(520),{cause:u});if(y=xs(y,o),vu===null?vu=[y]:vu.push(y),on!==4&&(on=2),i===null)return!0;u=xs(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=p&-p,o.lanes|=s,s=Cp(o.stateNode,u,s),sp(o,s),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Xa===null||!Xa.has(y))))return o.flags|=65536,p&=-p,o.lanes|=p,p=i1(p),a1(p,s,o,u),sp(o,p),!1}o=o.return}while(o!==null);return!1}var Rp=Error(r(461)),bn=!1;function $n(s,i,o,u){i.child=s===null?cb(i,null,o,u):Zo(i,s.child,o,u)}function o1(s,i,o,u,p){o=o.render;var y=i.ref;if("ref"in u){var w={};for(var I in u)I!=="ref"&&(w[I]=u[I])}else w=u;return Qo(i),u=up(s,i,o,w,y,p),I=hp(),s!==null&&!bn?(dp(s,i,p),aa(s,i,p)):(ht&&I&&Gm(i),i.flags|=1,$n(s,i,u,p),i.child)}function l1(s,i,o,u,p){if(s===null){var y=o.type;return typeof y=="function"&&!zm(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,c1(s,i,y,u,p)):(s=Qh(o.type,null,u,i,i.mode,p),s.ref=i.ref,s.return=i,i.child=s)}if(y=s.child,!Pp(s,p)){var w=y.memoizedProps;if(o=o.compare,o=o!==null?o:Xc,o(w,u)&&s.ref===i.ref)return aa(s,i,p)}return i.flags|=1,s=ea(y,u),s.ref=i.ref,s.return=i,i.child=s}function c1(s,i,o,u,p){if(s!==null){var y=s.memoizedProps;if(Xc(y,u)&&s.ref===i.ref)if(bn=!1,i.pendingProps=u=y,Pp(s,p))(s.flags&131072)!==0&&(bn=!0);else return i.lanes=s.lanes,aa(s,i,p)}return Ip(s,i,o,u,p)}function u1(s,i,o,u){var p=u.children,y=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,s!==null){for(u=i.child=s.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,i.child=null;return h1(s,i,y,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&Zh(i,y!==null?y.cachePool:null),y!==null?fb(i,y):ap(),mb(i);else return u=i.lanes=536870912,h1(s,i,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(Zh(i,y.cachePool),fb(i,y),$a(),i.memoizedState=null):(s!==null&&Zh(i,null),ap(),$a());return $n(s,i,p,o),i.child}function hu(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function h1(s,i,o,u,p){var y=ep();return y=y===null?null:{parent:yn._currentValue,pool:y},i.memoizedState={baseLanes:o,cachePool:y},s!==null&&Zh(i,null),ap(),mb(i),s!==null&&Vl(s,i,u,!0),i.childLanes=p,null}function md(s,i){return i=gd({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function d1(s,i,o){return Zo(i,s.child,null,o),s=md(i,i.pendingProps),s.flags|=2,Jr(i),i.memoizedState=null,s}function y2(s,i,o){var u=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(ht){if(u.mode==="hidden")return s=md(i,u),i.lanes=536870912,hu(null,s);if(lp(i),(s=Vt)?(s=T_(s,Ts),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Ua!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=Qv(s),o.return=i,i.child=o,Fn=i,Vt=null)):s=null,s===null)throw qa(i);return i.lanes=536870912,null}return md(i,u)}var y=s.memoizedState;if(y!==null){var w=y.dehydrated;if(lp(i),p)if(i.flags&256)i.flags&=-257,i=d1(s,i,o);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(r(558));else if(bn||Vl(s,i,o,!1),p=(o&s.childLanes)!==0,bn||p){if(u=It,u!==null&&(w=$i(u,o),w!==0&&w!==y.retryLane))throw y.retryLane=w,Fo(s,w),Pr(u,s,w),Rp;Ad(),i=d1(s,i,o)}else s=y.treeContext,Vt=Ss(w.nextSibling),Fn=i,ht=!0,Va=null,Ts=!1,s!==null&&Wv(i,s),i=md(i,u),i.flags|=4096;return i}return s=ea(s.child,{mode:u.mode,children:u.children}),s.ref=i.ref,i.child=s,s.return=i,s}function pd(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(i.flags|=4194816)}}function Ip(s,i,o,u,p){return Qo(i),o=up(s,i,o,u,void 0,p),u=hp(),s!==null&&!bn?(dp(s,i,p),aa(s,i,p)):(ht&&u&&Gm(i),i.flags|=1,$n(s,i,o,p),i.child)}function f1(s,i,o,u,p,y){return Qo(i),i.updateQueue=null,o=gb(i,u,o,p),pb(s),u=hp(),s!==null&&!bn?(dp(s,i,y),aa(s,i,y)):(ht&&u&&Gm(i),i.flags|=1,$n(s,i,o,y),i.child)}function m1(s,i,o,u,p){if(Qo(i),i.stateNode===null){var y=kl,w=o.contextType;typeof w=="object"&&w!==null&&(y=Gn(w)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Np,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},np(i),w=o.contextType,y.context=typeof w=="object"&&w!==null?Gn(w):kl,y.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Sp(i,o,w,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&Np.enqueueReplaceState(y,y.state,null),au(i,u,y,p),iu(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){y=i.stateNode;var I=i.memoizedProps,z=el(o,I);y.props=z;var J=y.context,ae=o.contextType;w=kl,typeof ae=="object"&&ae!==null&&(w=Gn(ae));var he=o.getDerivedStateFromProps;ae=typeof he=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,ae||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||J!==w)&&e1(i,y,u,w),za=!1;var te=i.memoizedState;y.state=te,au(i,u,y,p),iu(),J=i.memoizedState,I||te!==J||za?(typeof he=="function"&&(Sp(i,o,he,u),J=i.memoizedState),(z=za||Jb(i,o,z,u,te,J,w))?(ae||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=J),y.props=u,y.state=J,y.context=w,u=z):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,rp(s,i),w=i.memoizedProps,ae=el(o,w),y.props=ae,he=i.pendingProps,te=y.context,J=o.contextType,z=kl,typeof J=="object"&&J!==null&&(z=Gn(J)),I=o.getDerivedStateFromProps,(J=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==he||te!==z)&&e1(i,y,u,z),za=!1,te=i.memoizedState,y.state=te,au(i,u,y,p),iu();var se=i.memoizedState;w!==he||te!==se||za||s!==null&&s.dependencies!==null&&Xh(s.dependencies)?(typeof I=="function"&&(Sp(i,o,I,u),se=i.memoizedState),(ae=za||Jb(i,o,ae,u,te,se,z)||s!==null&&s.dependencies!==null&&Xh(s.dependencies))?(J||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,se,z),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,se,z)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=se),y.props=u,y.state=se,y.context=z,u=ae):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),u=!1)}return y=u,pd(s,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,s!==null&&u?(i.child=Zo(i,s.child,null,p),i.child=Zo(i,null,o,p)):$n(s,i,o,p),i.memoizedState=y.state,s=i.child):s=aa(s,i,p),s}function p1(s,i,o,u){return $o(),i.flags|=256,$n(s,i,o,u),i.child}var jp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Op(s){return{baseLanes:s,cachePool:rb()}}function Dp(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=ts),s}function g1(s,i,o){var u=i.pendingProps,p=!1,y=(i.flags&128)!==0,w;if((w=y)||(w=s!==null&&s.memoizedState===null?!1:(dn.current&2)!==0),w&&(p=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,s===null){if(ht){if(p?Ga(i):$a(),(s=Vt)?(s=T_(s,Ts),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Ua!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=Qv(s),o.return=i,i.child=o,Fn=i,Vt=null)):s=null,s===null)throw qa(i);return pg(s)?i.lanes=32:i.lanes=536870912,null}var I=u.children;return u=u.fallback,p?($a(),p=i.mode,I=gd({mode:"hidden",children:I},p),u=Go(u,p,o,null),I.return=i,u.return=i,I.sibling=u,i.child=I,u=i.child,u.memoizedState=Op(o),u.childLanes=Dp(s,w,o),i.memoizedState=jp,hu(null,u)):(Ga(i),Lp(i,I))}var z=s.memoizedState;if(z!==null&&(I=z.dehydrated,I!==null)){if(y)i.flags&256?(Ga(i),i.flags&=-257,i=kp(s,i,o)):i.memoizedState!==null?($a(),i.child=s.child,i.flags|=128,i=null):($a(),I=u.fallback,p=i.mode,u=gd({mode:"visible",children:u.children},p),I=Go(I,p,o,null),I.flags|=2,u.return=i,I.return=i,u.sibling=I,i.child=u,Zo(i,s.child,null,o),u=i.child,u.memoizedState=Op(o),u.childLanes=Dp(s,w,o),i.memoizedState=jp,i=hu(null,u));else if(Ga(i),pg(I)){if(w=I.nextSibling&&I.nextSibling.dataset,w)var J=w.dgst;w=J,u=Error(r(419)),u.stack="",u.digest=w,Jc({value:u,source:null,stack:null}),i=kp(s,i,o)}else if(bn||Vl(s,i,o,!1),w=(o&s.childLanes)!==0,bn||w){if(w=It,w!==null&&(u=$i(w,o),u!==0&&u!==z.retryLane))throw z.retryLane=u,Fo(s,u),Pr(w,s,u),Rp;mg(I)||Ad(),i=kp(s,i,o)}else mg(I)?(i.flags|=192,i.child=s.child,i=null):(s=z.treeContext,Vt=Ss(I.nextSibling),Fn=i,ht=!0,Va=null,Ts=!1,s!==null&&Wv(i,s),i=Lp(i,u.children),i.flags|=4096);return i}return p?($a(),I=u.fallback,p=i.mode,z=s.child,J=z.sibling,u=ea(z,{mode:"hidden",children:u.children}),u.subtreeFlags=z.subtreeFlags&65011712,J!==null?I=ea(J,I):(I=Go(I,p,o,null),I.flags|=2),I.return=i,u.return=i,u.sibling=I,i.child=u,hu(null,u),u=i.child,I=s.child.memoizedState,I===null?I=Op(o):(p=I.cachePool,p!==null?(z=yn._currentValue,p=p.parent!==z?{parent:z,pool:z}:p):p=rb(),I={baseLanes:I.baseLanes|o,cachePool:p}),u.memoizedState=I,u.childLanes=Dp(s,w,o),i.memoizedState=jp,hu(s.child,u)):(Ga(i),o=s.child,s=o.sibling,o=ea(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,s!==null&&(w=i.deletions,w===null?(i.deletions=[s],i.flags|=16):w.push(s)),i.child=o,i.memoizedState=null,o)}function Lp(s,i){return i=gd({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function gd(s,i){return s=Wr(22,s,null,i),s.lanes=0,s}function kp(s,i,o){return Zo(i,s.child,null,o),s=Lp(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function y1(s,i,o){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),Xm(s.return,i,o)}function Mp(s,i,o,u,p,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:p,treeForkCount:y}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=o,w.tailMode=p,w.treeForkCount=y)}function v1(s,i,o){var u=i.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var w=dn.current,I=(w&2)!==0;if(I?(w=w&1|2,i.flags|=128):w&=1,de(dn,w),$n(s,i,u,o),u=ht?Zc:0,!I&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&y1(s,o,i);else if(s.tag===19)y1(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(p){case"forwards":for(o=i.child,p=null;o!==null;)s=o.alternate,s!==null&&sd(s)===null&&(p=o),o=o.sibling;o=p,o===null?(p=i.child,i.child=null):(p=o.sibling,o.sibling=null),Mp(i,!1,p,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,p=i.child,i.child=null;p!==null;){if(s=p.alternate,s!==null&&sd(s)===null){i.child=p;break}s=p.sibling,p.sibling=o,o=p,p=s}Mp(i,!0,o,null,y,u);break;case"together":Mp(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function aa(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),Ya|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(Vl(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,o=ea(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=ea(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function Pp(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&Xh(s)))}function v2(s,i,o){switch(i.tag){case 3:je(i,i.stateNode.containerInfo),Ba(i,yn,s.memoizedState.cache),$o();break;case 27:case 5:Xe(i);break;case 4:je(i,i.stateNode.containerInfo);break;case 10:Ba(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,lp(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ga(i),i.flags|=128,null):(o&i.child.childLanes)!==0?g1(s,i,o):(Ga(i),s=aa(s,i,o),s!==null?s.sibling:null);Ga(i);break;case 19:var p=(s.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Vl(s,i,o,!1),u=(o&i.childLanes)!==0),p){if(u)return v1(s,i,o);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),de(dn,dn.current),u)break;return null;case 22:return i.lanes=0,u1(s,i,o,i.pendingProps);case 24:Ba(i,yn,s.memoizedState.cache)}return aa(s,i,o)}function b1(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)bn=!0;else{if(!Pp(s,o)&&(i.flags&128)===0)return bn=!1,v2(s,i,o);bn=(s.flags&131072)!==0}else bn=!1,ht&&(i.flags&1048576)!==0&&Xv(i,Zc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(s=Xo(i.elementType),i.type=s,typeof s=="function")zm(s)?(u=el(s,u),i.tag=1,i=m1(null,i,s,u,o)):(i.tag=0,i=Ip(null,i,s,u,o));else{if(s!=null){var p=s.$$typeof;if(p===Q){i.tag=11,i=o1(null,i,s,u,o);break e}else if(p===L){i.tag=14,i=l1(null,i,s,u,o);break e}}throw i=ge(s)||s,Error(r(306,i,""))}}return i;case 0:return Ip(s,i,i.type,i.pendingProps,o);case 1:return u=i.type,p=el(u,i.pendingProps),m1(s,i,u,p,o);case 3:e:{if(je(i,i.stateNode.containerInfo),s===null)throw Error(r(387));u=i.pendingProps;var y=i.memoizedState;p=y.element,rp(s,i),au(i,u,null,o);var w=i.memoizedState;if(u=w.cache,Ba(i,yn,u),u!==y.cache&&Wm(i,[yn],o,!0),iu(),u=w.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=p1(s,i,u,o);break e}else if(u!==p){p=xs(Error(r(424)),i),Jc(p),i=p1(s,i,u,o);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Vt=Ss(s.firstChild),Fn=i,ht=!0,Va=null,Ts=!0,o=cb(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if($o(),u===p){i=aa(s,i,o);break e}$n(s,i,u,o)}i=i.child}return i;case 26:return pd(s,i),s===null?(o=I_(i.type,null,i.pendingProps,null))?i.memoizedState=o:ht||(o=i.type,s=i.pendingProps,u=Od(Te.current).createElement(o),u[Ft]=i,u[rn]=s,Kn(u,o,s),Gt(u),i.stateNode=u):i.memoizedState=I_(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return Xe(i),s===null&&ht&&(u=i.stateNode=N_(i.type,i.pendingProps,Te.current),Fn=i,Ts=!0,p=Vt,eo(i.type)?(gg=p,Vt=Ss(u.firstChild)):Vt=p),$n(s,i,i.pendingProps.children,o),pd(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&ht&&((p=u=Vt)&&(u=Q2(u,i.type,i.pendingProps,Ts),u!==null?(i.stateNode=u,Fn=i,Vt=Ss(u.firstChild),Ts=!1,p=!0):p=!1),p||qa(i)),Xe(i),p=i.type,y=i.pendingProps,w=s!==null?s.memoizedProps:null,u=y.children,hg(p,y)?u=null:w!==null&&hg(p,w)&&(i.flags|=32),i.memoizedState!==null&&(p=up(s,i,c2,null,null,o),Su._currentValue=p),pd(s,i),$n(s,i,u,o),i.child;case 6:return s===null&&ht&&((s=o=Vt)&&(o=Y2(o,i.pendingProps,Ts),o!==null?(i.stateNode=o,Fn=i,Vt=null,s=!0):s=!1),s||qa(i)),null;case 13:return g1(s,i,o);case 4:return je(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=Zo(i,null,u,o):$n(s,i,u,o),i.child;case 11:return o1(s,i,i.type,i.pendingProps,o);case 7:return $n(s,i,i.pendingProps,o),i.child;case 8:return $n(s,i,i.pendingProps.children,o),i.child;case 12:return $n(s,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Ba(i,i.type,u.value),$n(s,i,u.children,o),i.child;case 9:return p=i.type._context,u=i.pendingProps.children,Qo(i),p=Gn(p),u=u(p),i.flags|=1,$n(s,i,u,o),i.child;case 14:return l1(s,i,i.type,i.pendingProps,o);case 15:return c1(s,i,i.type,i.pendingProps,o);case 19:return v1(s,i,o);case 31:return y2(s,i,o);case 22:return u1(s,i,o,i.pendingProps);case 24:return Qo(i),u=Gn(yn),s===null?(p=ep(),p===null&&(p=It,y=Zm(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=o),p=y),i.memoizedState={parent:u,cache:p},np(i),Ba(i,yn,p)):((s.lanes&o)!==0&&(rp(s,i),au(i,null,null,o),iu()),p=s.memoizedState,y=i.memoizedState,p.parent!==u?(p={parent:u,cache:u},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),Ba(i,yn,u)):(u=y.cache,Ba(i,yn,u),u!==p.cache&&Wm(i,[yn],o,!0))),$n(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function oa(s){s.flags|=4}function Up(s,i,o,u,p){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(p&335544128)===p)if(s.stateNode.complete)s.flags|=8192;else if($1())s.flags|=8192;else throw Wo=ed,tp}else s.flags&=-16777217}function _1(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!k_(i))if($1())s.flags|=8192;else throw Wo=ed,tp}function yd(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?ci():536870912,s.lanes|=i,Wl|=i)}function du(s,i){if(!ht)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function qt(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(i)for(var p=s.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=u,s.childLanes=o,i}function b2(s,i,o){var u=i.pendingProps;switch($m(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(i),null;case 1:return qt(i),null;case 3:return o=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ra(yn),Le(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(Ul(i)?oa(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Qm())),qt(i),null;case 26:var p=i.type,y=i.memoizedState;return s===null?(oa(i),y!==null?(qt(i),_1(i,y)):(qt(i),Up(i,p,null,u,o))):y?y!==s.memoizedState?(oa(i),qt(i),_1(i,y)):(qt(i),i.flags&=-16777217):(s=s.memoizedProps,s!==u&&oa(i),qt(i),Up(i,p,s,u,o)),null;case 27:if(Je(i),o=Te.current,p=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&oa(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return qt(i),null}s=me.current,Ul(i)?Zv(i):(s=N_(p,u,o),i.stateNode=s,oa(i))}return qt(i),null;case 5:if(Je(i),p=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&oa(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return qt(i),null}if(y=me.current,Ul(i))Zv(i);else{var w=Od(Te.current);switch(y){case 1:y=w.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=w.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=w.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?w.createElement(p,{is:u.is}):w.createElement(p)}}y[Ft]=i,y[rn]=u;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)y.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=y;e:switch(Kn(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&oa(i)}}return qt(i),Up(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,o),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&oa(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=Te.current,Ul(i)){if(s=i.stateNode,o=i.memoizedProps,u=null,p=Fn,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}s[Ft]=i,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||g_(s.nodeValue,o)),s||qa(i,!0)}else s=Od(s).createTextNode(u),s[Ft]=i,i.stateNode=s}return qt(i),null;case 31:if(o=i.memoizedState,s===null||s.memoizedState!==null){if(u=Ul(i),o!==null){if(s===null){if(!u)throw Error(r(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Ft]=i}else $o(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),s=!1}else o=Qm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return i.flags&256?(Jr(i),i):(Jr(i),null);if((i.flags&128)!==0)throw Error(r(558))}return qt(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=Ul(i),u!==null&&u.dehydrated!==null){if(s===null){if(!p)throw Error(r(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Ft]=i}else $o(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),p=!1}else p=Qm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(Jr(i),i):(Jr(i),null)}return Jr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,s=s!==null&&s.memoizedState!==null,o&&(u=i.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),o!==s&&o&&(i.child.flags|=8192),yd(i,i.updateQueue),qt(i),null);case 4:return Le(),s===null&&ag(i.stateNode.containerInfo),qt(i),null;case 10:return ra(i.type),qt(i),null;case 19:if(W(dn),u=i.memoizedState,u===null)return qt(i),null;if(p=(i.flags&128)!==0,y=u.rendering,y===null)if(p)du(u,!1);else{if(on!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(y=sd(s),y!==null){for(i.flags|=128,du(u,!1),s=y.updateQueue,i.updateQueue=s,yd(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)Kv(o,s),o=o.sibling;return de(dn,dn.current&1|2),ht&&ta(i,u.treeForkCount),i.child}s=s.sibling}u.tail!==null&&Ot()>Ed&&(i.flags|=128,p=!0,du(u,!1),i.lanes=4194304)}else{if(!p)if(s=sd(y),s!==null){if(i.flags|=128,p=!0,s=s.updateQueue,i.updateQueue=s,yd(i,s),du(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!ht)return qt(i),null}else 2*Ot()-u.renderingStartTime>Ed&&o!==536870912&&(i.flags|=128,p=!0,du(u,!1),i.lanes=4194304);u.isBackwards?(y.sibling=i.child,i.child=y):(s=u.last,s!==null?s.sibling=y:i.child=y,u.last=y)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=Ot(),s.sibling=null,o=dn.current,de(dn,p?o&1|2:o&1),ht&&ta(i,u.treeForkCount),s):(qt(i),null);case 22:case 23:return Jr(i),op(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(qt(i),i.subtreeFlags&6&&(i.flags|=8192)):qt(i),o=i.updateQueue,o!==null&&yd(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),s!==null&&W(Yo),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ra(yn),qt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function _2(s,i){switch($m(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return ra(yn),Le(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return Je(i),null;case 31:if(i.memoizedState!==null){if(Jr(i),i.alternate===null)throw Error(r(340));$o()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(Jr(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));$o()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return W(dn),null;case 4:return Le(),null;case 10:return ra(i.type),null;case 22:case 23:return Jr(i),op(),s!==null&&W(Yo),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return ra(yn),null;case 25:return null;default:return null}}function x1(s,i){switch($m(i),i.tag){case 3:ra(yn),Le();break;case 26:case 27:case 5:Je(i);break;case 4:Le();break;case 31:i.memoizedState!==null&&Jr(i);break;case 13:Jr(i);break;case 19:W(dn);break;case 10:ra(i.type);break;case 22:case 23:Jr(i),op(),s!==null&&W(Yo);break;case 24:ra(yn)}}function fu(s,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var p=u.next;o=p;do{if((o.tag&s)===s){u=void 0;var y=o.create,w=o.inst;u=y(),w.destroy=u}o=o.next}while(o!==p)}}catch(I){wt(i,i.return,I)}}function Ka(s,i,o){try{var u=i.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&s)===s){var w=u.inst,I=w.destroy;if(I!==void 0){w.destroy=void 0,p=i;var z=o,J=I;try{J()}catch(ae){wt(p,z,ae)}}}u=u.next}while(u!==y)}}catch(ae){wt(i,i.return,ae)}}function E1(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{hb(i,o)}catch(u){wt(s,s.return,u)}}}function w1(s,i,o){o.props=el(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){wt(s,i,u)}}function mu(s,i){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(p){wt(s,i,p)}}function _i(s,i){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(p){wt(s,i,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){wt(s,i,p)}else o.current=null}function T1(s){var i=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(p){wt(s,s.return,p)}}function Vp(s,i,o){try{var u=s.stateNode;z2(u,s.type,o,i),u[rn]=i}catch(p){wt(s,s.return,p)}}function A1(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&eo(s.type)||s.tag===4}function qp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||A1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&eo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Bp(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(s),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=rr));else if(u!==4&&(u===27&&eo(s.type)&&(o=s.stateNode,i=null),s=s.child,s!==null))for(Bp(s,i,o),s=s.sibling;s!==null;)Bp(s,i,o),s=s.sibling}function vd(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(u!==4&&(u===27&&eo(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(vd(s,i,o),s=s.sibling;s!==null;)vd(s,i,o),s=s.sibling}function S1(s){var i=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Kn(i,u,o),i[Ft]=s,i[rn]=o}catch(y){wt(s,s.return,y)}}var la=!1,_n=!1,zp=!1,N1=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function x2(s,i){if(s=s.containerInfo,cg=Vd,s=Uv(s),km(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var w=0,I=-1,z=-1,J=0,ae=0,he=s,te=null;t:for(;;){for(var se;he!==o||p!==0&&he.nodeType!==3||(I=w+p),he!==y||u!==0&&he.nodeType!==3||(z=w+u),he.nodeType===3&&(w+=he.nodeValue.length),(se=he.firstChild)!==null;)te=he,he=se;for(;;){if(he===s)break t;if(te===o&&++J===p&&(I=w),te===y&&++ae===u&&(z=w),(se=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=se}o=I===-1||z===-1?null:{start:I,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(ug={focusedElem:s,selectionRange:o},Vd=!1,Dn=i;Dn!==null;)if(i=Dn,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Dn=s;else for(;Dn!==null;){switch(i=Dn,y=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)p=s[o],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,o=i,p=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var Ne=el(o.type,p);s=u.getSnapshotBeforeUpdate(Ne,y),u.__reactInternalSnapshotBeforeUpdate=s}catch(Ue){wt(o,o.return,Ue)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)fg(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":fg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Dn=s;break}Dn=i.return}}function C1(s,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ua(s,o),u&4&&fu(5,o);break;case 1:if(ua(s,o),u&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(w){wt(o,o.return,w)}else{var p=el(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(p,i,s.__reactInternalSnapshotBeforeUpdate)}catch(w){wt(o,o.return,w)}}u&64&&E1(o),u&512&&mu(o,o.return);break;case 3:if(ua(s,o),u&64&&(s=o.updateQueue,s!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{hb(s,i)}catch(w){wt(o,o.return,w)}}break;case 27:i===null&&u&4&&S1(o);case 26:case 5:ua(s,o),i===null&&u&4&&T1(o),u&512&&mu(o,o.return);break;case 12:ua(s,o);break;case 31:ua(s,o),u&4&&j1(s,o);break;case 13:ua(s,o),u&4&&O1(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=I2.bind(null,o),X2(s,o))));break;case 22:if(u=o.memoizedState!==null||la,!u){i=i!==null&&i.memoizedState!==null||_n,p=la;var y=_n;la=u,(_n=i)&&!y?ha(s,o,(o.subtreeFlags&8772)!==0):ua(s,o),la=p,_n=y}break;case 30:break;default:ua(s,o)}}function R1(s){var i=s.alternate;i!==null&&(s.alternate=null,R1(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&ui(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Xt=null,Dr=!1;function ca(s,i,o){for(o=o.child;o!==null;)I1(s,i,o),o=o.sibling}function I1(s,i,o){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(fr,o)}catch{}switch(o.tag){case 26:_n||_i(o,i),ca(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:_n||_i(o,i);var u=Xt,p=Dr;eo(o.type)&&(Xt=o.stateNode,Dr=!1),ca(s,i,o),wu(o.stateNode),Xt=u,Dr=p;break;case 5:_n||_i(o,i);case 6:if(u=Xt,p=Dr,Xt=null,ca(s,i,o),Xt=u,Dr=p,Xt!==null)if(Dr)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(o.stateNode)}catch(y){wt(o,i,y)}else try{Xt.removeChild(o.stateNode)}catch(y){wt(o,i,y)}break;case 18:Xt!==null&&(Dr?(s=Xt,E_(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),ic(s)):E_(Xt,o.stateNode));break;case 4:u=Xt,p=Dr,Xt=o.stateNode.containerInfo,Dr=!0,ca(s,i,o),Xt=u,Dr=p;break;case 0:case 11:case 14:case 15:Ka(2,o,i),_n||Ka(4,o,i),ca(s,i,o);break;case 1:_n||(_i(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&w1(o,i,u)),ca(s,i,o);break;case 21:ca(s,i,o);break;case 22:_n=(u=_n)||o.memoizedState!==null,ca(s,i,o),_n=u;break;default:ca(s,i,o)}}function j1(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ic(s)}catch(o){wt(i,i.return,o)}}}function O1(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ic(s)}catch(o){wt(i,i.return,o)}}function E2(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new N1),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new N1),i;default:throw Error(r(435,s.tag))}}function bd(s,i){var o=E2(s);i.forEach(function(u){if(!o.has(u)){o.add(u);var p=j2.bind(null,s,u);u.then(p,p)}})}function Lr(s,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var p=o[u],y=s,w=i,I=w;e:for(;I!==null;){switch(I.tag){case 27:if(eo(I.type)){Xt=I.stateNode,Dr=!1;break e}break;case 5:Xt=I.stateNode,Dr=!1;break e;case 3:case 4:Xt=I.stateNode.containerInfo,Dr=!0;break e}I=I.return}if(Xt===null)throw Error(r(160));I1(y,w,p),Xt=null,Dr=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)D1(i,s),i=i.sibling}var Qs=null;function D1(s,i){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Lr(i,s),kr(s),u&4&&(Ka(3,s,s.return),fu(3,s),Ka(5,s,s.return));break;case 1:Lr(i,s),kr(s),u&512&&(_n||o===null||_i(o,o.return)),u&64&&la&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var p=Qs;if(Lr(i,s),kr(s),u&512&&(_n||o===null||_i(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Cr]||y[Ft]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),Kn(y,u,o),y[Ft]=s,Gt(y),u=y;break e;case"link":var w=D_("link","href",p).get(u+(o.href||""));if(w){for(var I=0;I<w.length;I++)if(y=w[I],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(I,1);break t}}y=p.createElement(u),Kn(y,u,o),p.head.appendChild(y);break;case"meta":if(w=D_("meta","content",p).get(u+(o.content||""))){for(I=0;I<w.length;I++)if(y=w[I],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(I,1);break t}}y=p.createElement(u),Kn(y,u,o),p.head.appendChild(y);break;default:throw Error(r(468,u))}y[Ft]=s,Gt(y),u=y}s.stateNode=u}else L_(p,s.type,s.stateNode);else s.stateNode=O_(p,u,s.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?L_(p,s.type,s.stateNode):O_(p,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Vp(s,s.memoizedProps,o.memoizedProps)}break;case 27:Lr(i,s),kr(s),u&512&&(_n||o===null||_i(o,o.return)),o!==null&&u&4&&Vp(s,s.memoizedProps,o.memoizedProps);break;case 5:if(Lr(i,s),kr(s),u&512&&(_n||o===null||_i(o,o.return)),s.flags&32){p=s.stateNode;try{Kt(p,"")}catch(Ne){wt(s,s.return,Ne)}}u&4&&s.stateNode!=null&&(p=s.memoizedProps,Vp(s,p,o!==null?o.memoizedProps:p)),u&1024&&(zp=!0);break;case 6:if(Lr(i,s),kr(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(Ne){wt(s,s.return,Ne)}}break;case 3:if(kd=null,p=Qs,Qs=Dd(i.containerInfo),Lr(i,s),Qs=p,kr(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ic(i.containerInfo)}catch(Ne){wt(s,s.return,Ne)}zp&&(zp=!1,L1(s));break;case 4:u=Qs,Qs=Dd(s.stateNode.containerInfo),Lr(i,s),kr(s),Qs=u;break;case 12:Lr(i,s),kr(s);break;case 31:Lr(i,s),kr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,bd(s,u)));break;case 13:Lr(i,s),kr(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(xd=Ot()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,bd(s,u)));break;case 22:p=s.memoizedState!==null;var z=o!==null&&o.memoizedState!==null,J=la,ae=_n;if(la=J||p,_n=ae||z,Lr(i,s),_n=ae,la=J,kr(s),u&8192)e:for(i=s.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(o===null||z||la||_n||tl(s)),o=null,i=s;;){if(i.tag===5||i.tag===26){if(o===null){z=o=i;try{if(y=z.stateNode,p)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{I=z.stateNode;var he=z.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;I.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ne){wt(z,z.return,Ne)}}}else if(i.tag===6){if(o===null){z=i;try{z.stateNode.nodeValue=p?"":z.memoizedProps}catch(Ne){wt(z,z.return,Ne)}}}else if(i.tag===18){if(o===null){z=i;try{var se=z.stateNode;p?w_(se,!0):w_(z.stateNode,!1)}catch(Ne){wt(z,z.return,Ne)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,bd(s,o))));break;case 19:Lr(i,s),kr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,bd(s,u)));break;case 30:break;case 21:break;default:Lr(i,s),kr(s)}}function kr(s){var i=s.flags;if(i&2){try{for(var o,u=s.return;u!==null;){if(A1(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var p=o.stateNode,y=qp(s);vd(s,y,p);break;case 5:var w=o.stateNode;o.flags&32&&(Kt(w,""),o.flags&=-33);var I=qp(s);vd(s,I,w);break;case 3:case 4:var z=o.stateNode.containerInfo,J=qp(s);Bp(s,J,z);break;default:throw Error(r(161))}}catch(ae){wt(s,s.return,ae)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function L1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;L1(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function ua(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)C1(s,i.alternate,i),i=i.sibling}function tl(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Ka(4,i,i.return),tl(i);break;case 1:_i(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&w1(i,i.return,o),tl(i);break;case 27:wu(i.stateNode);case 26:case 5:_i(i,i.return),tl(i);break;case 22:i.memoizedState===null&&tl(i);break;case 30:tl(i);break;default:tl(i)}s=s.sibling}}function ha(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,p=s,y=i,w=y.flags;switch(y.tag){case 0:case 11:case 15:ha(p,y,o),fu(4,y);break;case 1:if(ha(p,y,o),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(J){wt(u,u.return,J)}if(u=y,p=u.updateQueue,p!==null){var I=u.stateNode;try{var z=p.shared.hiddenCallbacks;if(z!==null)for(p.shared.hiddenCallbacks=null,p=0;p<z.length;p++)ub(z[p],I)}catch(J){wt(u,u.return,J)}}o&&w&64&&E1(y),mu(y,y.return);break;case 27:S1(y);case 26:case 5:ha(p,y,o),o&&u===null&&w&4&&T1(y),mu(y,y.return);break;case 12:ha(p,y,o);break;case 31:ha(p,y,o),o&&w&4&&j1(p,y);break;case 13:ha(p,y,o),o&&w&4&&O1(p,y);break;case 22:y.memoizedState===null&&ha(p,y,o),mu(y,y.return);break;case 30:break;default:ha(p,y,o)}i=i.sibling}}function Hp(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&eu(o))}function Fp(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&eu(s))}function Ys(s,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)k1(s,i,o,u),i=i.sibling}function k1(s,i,o,u){var p=i.flags;switch(i.tag){case 0:case 11:case 15:Ys(s,i,o,u),p&2048&&fu(9,i);break;case 1:Ys(s,i,o,u);break;case 3:Ys(s,i,o,u),p&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&eu(s)));break;case 12:if(p&2048){Ys(s,i,o,u),s=i.stateNode;try{var y=i.memoizedProps,w=y.id,I=y.onPostCommit;typeof I=="function"&&I(w,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(z){wt(i,i.return,z)}}else Ys(s,i,o,u);break;case 31:Ys(s,i,o,u);break;case 13:Ys(s,i,o,u);break;case 23:break;case 22:y=i.stateNode,w=i.alternate,i.memoizedState!==null?y._visibility&2?Ys(s,i,o,u):pu(s,i):y._visibility&2?Ys(s,i,o,u):(y._visibility|=2,Ql(s,i,o,u,(i.subtreeFlags&10256)!==0||!1)),p&2048&&Hp(w,i);break;case 24:Ys(s,i,o,u),p&2048&&Fp(i.alternate,i);break;default:Ys(s,i,o,u)}}function Ql(s,i,o,u,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=s,w=i,I=o,z=u,J=w.flags;switch(w.tag){case 0:case 11:case 15:Ql(y,w,I,z,p),fu(8,w);break;case 23:break;case 22:var ae=w.stateNode;w.memoizedState!==null?ae._visibility&2?Ql(y,w,I,z,p):pu(y,w):(ae._visibility|=2,Ql(y,w,I,z,p)),p&&J&2048&&Hp(w.alternate,w);break;case 24:Ql(y,w,I,z,p),p&&J&2048&&Fp(w.alternate,w);break;default:Ql(y,w,I,z,p)}i=i.sibling}}function pu(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,u=i,p=u.flags;switch(u.tag){case 22:pu(o,u),p&2048&&Hp(u.alternate,u);break;case 24:pu(o,u),p&2048&&Fp(u.alternate,u);break;default:pu(o,u)}i=i.sibling}}var gu=8192;function Yl(s,i,o){if(s.subtreeFlags&gu)for(s=s.child;s!==null;)M1(s,i,o),s=s.sibling}function M1(s,i,o){switch(s.tag){case 26:Yl(s,i,o),s.flags&gu&&s.memoizedState!==null&&lC(o,Qs,s.memoizedState,s.memoizedProps);break;case 5:Yl(s,i,o);break;case 3:case 4:var u=Qs;Qs=Dd(s.stateNode.containerInfo),Yl(s,i,o),Qs=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=gu,gu=16777216,Yl(s,i,o),gu=u):Yl(s,i,o));break;default:Yl(s,i,o)}}function P1(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function yu(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Dn=u,V1(u,s)}P1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)U1(s),s=s.sibling}function U1(s){switch(s.tag){case 0:case 11:case 15:yu(s),s.flags&2048&&Ka(9,s,s.return);break;case 3:yu(s);break;case 12:yu(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,_d(s)):yu(s);break;default:yu(s)}}function _d(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Dn=u,V1(u,s)}P1(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Ka(8,i,i.return),_d(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,_d(i));break;default:_d(i)}s=s.sibling}}function V1(s,i){for(;Dn!==null;){var o=Dn;switch(o.tag){case 0:case 11:case 15:Ka(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:eu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Dn=u;else e:for(o=s;Dn!==null;){u=Dn;var p=u.sibling,y=u.return;if(R1(u),u===o){Dn=null;break e}if(p!==null){p.return=y,Dn=p;break e}Dn=y}}}var w2={getCacheForType:function(s){var i=Gn(yn),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o},cacheSignal:function(){return Gn(yn).controller.signal}},T2=typeof WeakMap=="function"?WeakMap:Map,bt=0,It=null,tt=null,it=0,Et=0,es=null,Qa=!1,Xl=!1,Gp=!1,da=0,on=0,Ya=0,nl=0,$p=0,ts=0,Wl=0,vu=null,Mr=null,Kp=!1,xd=0,q1=0,Ed=1/0,wd=null,Xa=null,Nn=0,Wa=null,Zl=null,fa=0,Qp=0,Yp=null,B1=null,bu=0,Xp=null;function ns(){return(bt&2)!==0&&it!==0?it&-it:H.T!==null?ng():nn()}function z1(){if(ts===0)if((it&536870912)===0||ht){var s=zr;zr<<=1,(zr&3932160)===0&&(zr=262144),ts=s}else ts=536870912;return s=Zr.current,s!==null&&(s.flags|=32),ts}function Pr(s,i,o){(s===It&&(Et===2||Et===9)||s.cancelPendingCommit!==null)&&(Jl(s,0),Za(s,it,ts,!1)),us(s,o),((bt&2)===0||s!==It)&&(s===It&&((bt&2)===0&&(nl|=o),on===4&&Za(s,it,ts,!1)),xi(s))}function H1(s,i,o){if((bt&6)!==0)throw Error(r(327));var u=!o&&(i&127)===0&&(i&s.expiredLanes)===0||Pn(s,i),p=u?N2(s,i):Zp(s,i,!0),y=u;do{if(p===0){Xl&&!u&&Za(s,i,0,!1);break}else{if(o=s.current.alternate,y&&!A2(o)){p=Zp(s,i,!1),y=!1;continue}if(p===2){if(y=i,s.errorRecoveryDisabledLanes&y)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var I=s;p=vu;var z=I.current.memoizedState.isDehydrated;if(z&&(Jl(I,w).flags|=256),w=Zp(I,w,!1),w!==2){if(Gp&&!z){I.errorRecoveryDisabledLanes|=y,nl|=y,p=4;break e}y=Mr,Mr=p,y!==null&&(Mr===null?Mr=y:Mr.push.apply(Mr,y))}p=w}if(y=!1,p!==2)continue}}if(p===1){Jl(s,0),Za(s,i,0,!0);break}e:{switch(u=s,y=p,y){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Za(u,i,ts,!Qa);break e;case 2:Mr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(p=xd+300-Ot(),10<p)){if(Za(u,i,ts,!Qa),In(u,0,!0)!==0)break e;fa=i,u.timeoutHandle=__(F1.bind(null,u,o,Mr,wd,Kp,i,ts,nl,Wl,Qa,y,"Throttled",-0,0),p);break e}F1(u,o,Mr,wd,Kp,i,ts,nl,Wl,Qa,y,null,-0,0)}}break}while(!0);xi(s)}function F1(s,i,o,u,p,y,w,I,z,J,ae,he,te,se){if(s.timeoutHandle=-1,he=i.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rr},M1(i,y,he);var Ne=(y&62914560)===y?xd-Ot():(y&4194048)===y?q1-Ot():0;if(Ne=cC(he,Ne),Ne!==null){fa=y,s.cancelPendingCommit=Ne(Z1.bind(null,s,i,y,o,u,p,w,I,z,ae,he,null,te,se)),Za(s,y,w,!J);return}}Z1(s,i,y,o,u,p,w,I,z)}function A2(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var p=o[u],y=p.getSnapshot;p=p.value;try{if(!Xr(y(),p))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Za(s,i,o,u){i&=~$p,i&=~nl,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var p=i;0<p;){var y=31-Dt(p),w=1<<y;u[y]=-1,p&=~w}o!==0&&Vs(s,o,i)}function Td(){return(bt&6)===0?(_u(0),!1):!0}function Wp(){if(tt!==null){if(Et===0)var s=tt.return;else s=tt,na=Ko=null,fp(s),Hl=null,nu=0,s=tt;for(;s!==null;)x1(s.alternate,s),s=s.return;tt=null}}function Jl(s,i){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,G2(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),fa=0,Wp(),It=s,tt=o=ea(s.current,null),it=i,Et=0,es=null,Qa=!1,Xl=Pn(s,i),Gp=!1,Wl=ts=$p=nl=Ya=on=0,Mr=vu=null,Kp=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var p=31-Dt(u),y=1<<p;i|=s[p],u&=~y}return da=i,Gh(),o}function G1(s,i){$e=null,H.H=uu,i===zl||i===Jh?(i=ab(),Et=3):i===tp?(i=ab(),Et=4):Et=i===Rp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,es=i,tt===null&&(on=1,fd(s,xs(i,s.current)))}function $1(){var s=Zr.current;return s===null?!0:(it&4194048)===it?As===null:(it&62914560)===it||(it&536870912)!==0?s===As:!1}function K1(){var s=H.H;return H.H=uu,s===null?uu:s}function Q1(){var s=H.A;return H.A=w2,s}function Ad(){on=4,Qa||(it&4194048)!==it&&Zr.current!==null||(Xl=!0),(Ya&134217727)===0&&(nl&134217727)===0||It===null||Za(It,it,ts,!1)}function Zp(s,i,o){var u=bt;bt|=2;var p=K1(),y=Q1();(It!==s||it!==i)&&(wd=null,Jl(s,i)),i=!1;var w=on;e:do try{if(Et!==0&&tt!==null){var I=tt,z=es;switch(Et){case 8:Wp(),w=6;break e;case 3:case 2:case 9:case 6:Zr.current===null&&(i=!0);var J=Et;if(Et=0,es=null,ec(s,I,z,J),o&&Xl){w=0;break e}break;default:J=Et,Et=0,es=null,ec(s,I,z,J)}}S2(),w=on;break}catch(ae){G1(s,ae)}while(!0);return i&&s.shellSuspendCounter++,na=Ko=null,bt=u,H.H=p,H.A=y,tt===null&&(It=null,it=0,Gh()),w}function S2(){for(;tt!==null;)Y1(tt)}function N2(s,i){var o=bt;bt|=2;var u=K1(),p=Q1();It!==s||it!==i?(wd=null,Ed=Ot()+500,Jl(s,i)):Xl=Pn(s,i);e:do try{if(Et!==0&&tt!==null){i=tt;var y=es;t:switch(Et){case 1:Et=0,es=null,ec(s,i,y,1);break;case 2:case 9:if(sb(y)){Et=0,es=null,X1(i);break}i=function(){Et!==2&&Et!==9||It!==s||(Et=7),xi(s)},y.then(i,i);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:sb(y)?(Et=0,es=null,X1(i)):(Et=0,es=null,ec(s,i,y,7));break;case 5:var w=null;switch(tt.tag){case 26:w=tt.memoizedState;case 5:case 27:var I=tt;if(w?k_(w):I.stateNode.complete){Et=0,es=null;var z=I.sibling;if(z!==null)tt=z;else{var J=I.return;J!==null?(tt=J,Sd(J)):tt=null}break t}}Et=0,es=null,ec(s,i,y,5);break;case 6:Et=0,es=null,ec(s,i,y,6);break;case 8:Wp(),on=6;break e;default:throw Error(r(462))}}C2();break}catch(ae){G1(s,ae)}while(!0);return na=Ko=null,H.H=u,H.A=p,bt=o,tt!==null?0:(It=null,it=0,Gh(),on)}function C2(){for(;tt!==null&&!Oa();)Y1(tt)}function Y1(s){var i=b1(s.alternate,s,da);s.memoizedProps=s.pendingProps,i===null?Sd(s):tt=i}function X1(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=f1(o,i,i.pendingProps,i.type,void 0,it);break;case 11:i=f1(o,i,i.pendingProps,i.type.render,i.ref,it);break;case 5:fp(i);default:x1(o,i),i=tt=Kv(i,da),i=b1(o,i,da)}s.memoizedProps=s.pendingProps,i===null?Sd(s):tt=i}function ec(s,i,o,u){na=Ko=null,fp(i),Hl=null,nu=0;var p=i.return;try{if(g2(s,p,i,o,it)){on=1,fd(s,xs(o,s.current)),tt=null;return}}catch(y){if(p!==null)throw tt=p,y;on=1,fd(s,xs(o,s.current)),tt=null;return}i.flags&32768?(ht||u===1?s=!0:Xl||(it&536870912)!==0?s=!1:(Qa=s=!0,(u===2||u===9||u===3||u===6)&&(u=Zr.current,u!==null&&u.tag===13&&(u.flags|=16384))),W1(i,s)):Sd(i)}function Sd(s){var i=s;do{if((i.flags&32768)!==0){W1(i,Qa);return}s=i.return;var o=b2(i.alternate,i,da);if(o!==null){tt=o;return}if(i=i.sibling,i!==null){tt=i;return}tt=i=s}while(i!==null);on===0&&(on=5)}function W1(s,i){do{var o=_2(s.alternate,s);if(o!==null){o.flags&=32767,tt=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){tt=s;return}tt=s=o}while(s!==null);on=6,tt=null}function Z1(s,i,o,u,p,y,w,I,z){s.cancelPendingCommit=null;do Nd();while(Nn!==0);if((bt&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(y=i.lanes|i.childLanes,y|=qm,Hr(s,o,y,w,I,z),s===It&&(tt=It=null,it=0),Zl=i,Wa=s,fa=o,Qp=y,Yp=p,B1=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,O2(dr,function(){return r_(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,p=ee.p,ee.p=2,w=bt,bt|=4;try{x2(s,i,o)}finally{bt=w,ee.p=p,H.T=u}}Nn=1,J1(),e_(),t_()}}function J1(){if(Nn===1){Nn=0;var s=Wa,i=Zl,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null;var u=ee.p;ee.p=2;var p=bt;bt|=4;try{D1(i,s);var y=ug,w=Uv(s.containerInfo),I=y.focusedElem,z=y.selectionRange;if(w!==I&&I&&I.ownerDocument&&Pv(I.ownerDocument.documentElement,I)){if(z!==null&&km(I)){var J=z.start,ae=z.end;if(ae===void 0&&(ae=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(ae,I.value.length);else{var he=I.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var se=te.getSelection(),Ne=I.textContent.length,Ue=Math.min(z.start,Ne),Nt=z.end===void 0?Ue:Math.min(z.end,Ne);!se.extend&&Ue>Nt&&(w=Nt,Nt=Ue,Ue=w);var K=Mv(I,Ue),$=Mv(I,Nt);if(K&&$&&(se.rangeCount!==1||se.anchorNode!==K.node||se.anchorOffset!==K.offset||se.focusNode!==$.node||se.focusOffset!==$.offset)){var Z=he.createRange();Z.setStart(K.node,K.offset),se.removeAllRanges(),Ue>Nt?(se.addRange(Z),se.extend($.node,$.offset)):(Z.setEnd($.node,$.offset),se.addRange(Z))}}}}for(he=[],se=I;se=se.parentNode;)se.nodeType===1&&he.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<he.length;I++){var oe=he[I];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Vd=!!cg,ug=cg=null}finally{bt=p,ee.p=u,H.T=o}}s.current=i,Nn=2}}function e_(){if(Nn===2){Nn=0;var s=Wa,i=Zl,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=H.T,H.T=null;var u=ee.p;ee.p=2;var p=bt;bt|=4;try{C1(s,i.alternate,i)}finally{bt=p,ee.p=u,H.T=o}}Nn=3}}function t_(){if(Nn===4||Nn===3){Nn=0,Vi();var s=Wa,i=Zl,o=fa,u=B1;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Nn=5:(Nn=0,Zl=Wa=null,n_(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(Xa=null),mr(o),i=i.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(fr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=H.T,p=ee.p,ee.p=2,H.T=null;try{for(var y=s.onRecoverableError,w=0;w<u.length;w++){var I=u[w];y(I.value,{componentStack:I.stack})}}finally{H.T=i,ee.p=p}}(fa&3)!==0&&Nd(),xi(s),p=s.pendingLanes,(o&261930)!==0&&(p&42)!==0?s===Xp?bu++:(bu=0,Xp=s):bu=0,_u(0)}}function n_(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,eu(i)))}function Nd(){return J1(),e_(),t_(),r_()}function r_(){if(Nn!==5)return!1;var s=Wa,i=Qp;Qp=0;var o=mr(fa),u=H.T,p=ee.p;try{ee.p=32>o?32:o,H.T=null,o=Yp,Yp=null;var y=Wa,w=fa;if(Nn=0,Zl=Wa=null,fa=0,(bt&6)!==0)throw Error(r(331));var I=bt;if(bt|=4,U1(y.current),k1(y,y.current,w,o),bt=I,_u(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(fr,y)}catch{}return!0}finally{ee.p=p,H.T=u,n_(s,i)}}function s_(s,i,o){i=xs(o,i),i=Cp(s.stateNode,i,2),s=Fa(s,i,2),s!==null&&(us(s,2),xi(s))}function wt(s,i,o){if(s.tag===3)s_(s,s,o);else for(;i!==null;){if(i.tag===3){s_(i,s,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Xa===null||!Xa.has(u))){s=xs(o,s),o=i1(2),u=Fa(i,o,2),u!==null&&(a1(o,u,i,s),us(u,2),xi(u));break}}i=i.return}}function Jp(s,i,o){var u=s.pingCache;if(u===null){u=s.pingCache=new T2;var p=new Set;u.set(i,p)}else p=u.get(i),p===void 0&&(p=new Set,u.set(i,p));p.has(o)||(Gp=!0,p.add(o),s=R2.bind(null,s,i,o),i.then(s,s))}function R2(s,i,o){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,It===s&&(it&o)===o&&(on===4||on===3&&(it&62914560)===it&&300>Ot()-xd?(bt&2)===0&&Jl(s,0):$p|=o,Wl===it&&(Wl=0)),xi(s)}function i_(s,i){i===0&&(i=ci()),s=Fo(s,i),s!==null&&(us(s,i),xi(s))}function I2(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),i_(s,o)}function j2(s,i){var o=0;switch(s.tag){case 31:case 13:var u=s.stateNode,p=s.memoizedState;p!==null&&(o=p.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),i_(s,o)}function O2(s,i){return jt(s,i)}var Cd=null,tc=null,eg=!1,Rd=!1,tg=!1,Ja=0;function xi(s){s!==tc&&s.next===null&&(tc===null?Cd=tc=s:tc=tc.next=s),Rd=!0,eg||(eg=!0,L2())}function _u(s,i){if(!tg&&Rd){tg=!0;do for(var o=!1,u=Cd;u!==null;){if(s!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var w=u.suspendedLanes,I=u.pingedLanes;y=(1<<31-Dt(42|s)+1)-1,y&=p&~(w&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,c_(u,y))}else y=it,y=In(u,u===It?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Pn(u,y)||(o=!0,c_(u,y));u=u.next}while(o);tg=!1}}function D2(){a_()}function a_(){Rd=eg=!1;var s=0;Ja!==0&&F2()&&(s=Ja);for(var i=Ot(),o=null,u=Cd;u!==null;){var p=u.next,y=o_(u,i);y===0?(u.next=null,o===null?Cd=p:o.next=p,p===null&&(tc=o)):(o=u,(s!==0||(y&3)!==0)&&(Rd=!0)),u=p}Nn!==0&&Nn!==5||_u(s),Ja!==0&&(Ja=0)}function o_(s,i){for(var o=s.suspendedLanes,u=s.pingedLanes,p=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var w=31-Dt(y),I=1<<w,z=p[w];z===-1?((I&o)===0||(I&u)!==0)&&(p[w]=Fi(I,i)):z<=i&&(s.expiredLanes|=I),y&=~I}if(i=It,o=it,o=In(s,s===i?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===i&&(Et===2||Et===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Tr(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Pn(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(u!==null&&Tr(u),mr(o)){case 2:case 8:o=Br;break;case 32:o=dr;break;case 268435456:o=kn;break;default:o=dr}return u=l_.bind(null,s),o=jt(o,u),s.callbackPriority=i,s.callbackNode=o,i}return u!==null&&u!==null&&Tr(u),s.callbackPriority=2,s.callbackNode=null,2}function l_(s,i){if(Nn!==0&&Nn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Nd()&&s.callbackNode!==o)return null;var u=it;return u=In(s,s===It?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(H1(s,u,i),o_(s,Ot()),s.callbackNode!=null&&s.callbackNode===o?l_.bind(null,s):null)}function c_(s,i){if(Nd())return null;H1(s,i,!0)}function L2(){$2(function(){(bt&6)!==0?jt(qi,D2):a_()})}function ng(){if(Ja===0){var s=ql;s===0&&(s=Mn,Mn<<=1,(Mn&261888)===0&&(Mn=256)),Ja=s}return Ja}function u_(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:pi(""+s)}function h_(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function k2(s,i,o,u,p){if(i==="submit"&&o&&o.stateNode===p){var y=u_((p[rn]||null).action),w=u.submitter;w&&(i=(i=w[rn]||null)?u_(i.formAction):w.getAttribute("formAction"),i!==null&&(y=i,w=null));var I=new Ae("action","action",null,u,p);s.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ja!==0){var z=w?h_(p,w):new FormData(p);Ep(o,{pending:!0,data:z,method:p.method,action:y},null,z)}}else typeof y=="function"&&(I.preventDefault(),z=w?h_(p,w):new FormData(p),Ep(o,{pending:!0,data:z,method:p.method,action:y},y,z))},currentTarget:p}]})}}for(var rg=0;rg<Vm.length;rg++){var sg=Vm[rg],M2=sg.toLowerCase(),P2=sg[0].toUpperCase()+sg.slice(1);Ks(M2,"on"+P2)}Ks(Bv,"onAnimationEnd"),Ks(zv,"onAnimationIteration"),Ks(Hv,"onAnimationStart"),Ks("dblclick","onDoubleClick"),Ks("focusin","onFocus"),Ks("focusout","onBlur"),Ks(JN,"onTransitionRun"),Ks(e2,"onTransitionStart"),Ks(t2,"onTransitionCancel"),Ks(Fv,"onTransitionEnd"),Vn("onMouseEnter",["mouseout","mouseover"]),Vn("onMouseLeave",["mouseout","mouseover"]),Vn("onPointerEnter",["pointerout","pointerover"]),Vn("onPointerLeave",["pointerout","pointerover"]),yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yr("onBeforeInput",["compositionend","keypress","textInput","paste"]),yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xu));function d_(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],p=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var w=u.length-1;0<=w;w--){var I=u[w],z=I.instance,J=I.currentTarget;if(I=I.listener,z!==y&&p.isPropagationStopped())break e;y=I,p.currentTarget=J;try{y(p)}catch(ae){Fh(ae)}p.currentTarget=null,y=z}else for(w=0;w<u.length;w++){if(I=u[w],z=I.instance,J=I.currentTarget,I=I.listener,z!==y&&p.isPropagationStopped())break e;y=I,p.currentTarget=J;try{y(p)}catch(ae){Fh(ae)}p.currentTarget=null,y=z}}}}function nt(s,i){var o=i[Jt];o===void 0&&(o=i[Jt]=new Set);var u=s+"__bubble";o.has(u)||(f_(i,s,2,!1),o.add(u))}function ig(s,i,o){var u=0;i&&(u|=4),f_(o,s,u,i)}var Id="_reactListening"+Math.random().toString(36).slice(2);function ag(s){if(!s[Id]){s[Id]=!0,Ki.forEach(function(o){o!=="selectionchange"&&(U2.has(o)||ig(o,!1,s),ig(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Id]||(i[Id]=!0,ig("selectionchange",!1,i))}}function f_(s,i,o,u){switch(z_(i)){case 2:var p=dC;break;case 8:p=fC;break;default:p=xg}o=p.bind(null,i,o,s),p=void 0,!vs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),u?p!==void 0?s.addEventListener(i,o,{capture:!0,passive:p}):s.addEventListener(i,o,!0):p!==void 0?s.addEventListener(i,o,{passive:p}):s.addEventListener(i,o,!1)}function og(s,i,o,u,p){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var I=u.stateNode.containerInfo;if(I===p)break;if(w===4)for(w=u.return;w!==null;){var z=w.tag;if((z===3||z===4)&&w.stateNode.containerInfo===p)return;w=w.return}for(;I!==null;){if(w=Mt(I),w===null)return;if(z=w.tag,z===5||z===6||z===26||z===27){u=y=w;continue e}I=I.parentNode}}u=u.return}ys(function(){var J=y,ae=Bn(o),he=[];e:{var te=Gv.get(s);if(te!==void 0){var se=Ae,Ne=s;switch(s){case"keypress":if(_(o)===0)break e;case"keydown":case"keyup":se=Bh;break;case"focusin":Ne="focus",se=Hn;break;case"focusout":Ne="blur",se=Hn;break;case"beforeblur":case"afterblur":se=Hn;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Ut;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=b;break;case Bv:case zv:case Hv:se=qo;break;case Fv:se=O;break;case"scroll":case"scrollend":se=Ze;break;case"wheel":se=re;break;case"copy":case"cut":case"paste":se=Zi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Ji;break;case"toggle":case"beforetoggle":se=Ge}var Ue=(i&4)!==0,Nt=!Ue&&(s==="scroll"||s==="scrollend"),K=Ue?te!==null?te+"Capture":null:te;Ue=[];for(var $=J,Z;$!==null;){var oe=$;if(Z=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Z===null||K===null||(oe=sr($,K),oe!=null&&Ue.push(Eu($,oe,Z))),Nt)break;$=$.return}0<Ue.length&&(te=new se(te,Ne,null,o,ae),he.push({event:te,listeners:Ue}))}}if((i&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",se=s==="mouseout"||s==="pointerout",te&&o!==cn&&(Ne=o.relatedTarget||o.fromElement)&&(Mt(Ne)||Ne[Nr]))break e;if((se||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,se?(Ne=o.relatedTarget||o.toElement,se=J,Ne=Ne?Mt(Ne):null,Ne!==null&&(Nt=l(Ne),Ue=Ne.tag,Ne!==Nt||Ue!==5&&Ue!==27&&Ue!==6)&&(Ne=null)):(se=null,Ne=J),se!==Ne)){if(Ue=Ut,oe="onMouseLeave",K="onMouseEnter",$="mouse",(s==="pointerout"||s==="pointerover")&&(Ue=Ji,oe="onPointerLeave",K="onPointerEnter",$="pointer"),Nt=se==null?te:Un(se),Z=Ne==null?te:Un(Ne),te=new Ue(oe,$+"leave",se,o,ae),te.target=Nt,te.relatedTarget=Z,oe=null,Mt(ae)===J&&(Ue=new Ue(K,$+"enter",Ne,o,ae),Ue.target=Z,Ue.relatedTarget=Nt,oe=Ue),Nt=oe,se&&Ne)t:{for(Ue=V2,K=se,$=Ne,Z=0,oe=K;oe;oe=Ue(oe))Z++;oe=0;for(var ke=$;ke;ke=Ue(ke))oe++;for(;0<Z-oe;)K=Ue(K),Z--;for(;0<oe-Z;)$=Ue($),oe--;for(;Z--;){if(K===$||$!==null&&K===$.alternate){Ue=K;break t}K=Ue(K),$=Ue($)}Ue=null}else Ue=null;se!==null&&m_(he,te,se,Ue,!1),Ne!==null&&Nt!==null&&m_(he,Nt,Ne,Ue,!0)}}e:{if(te=J?Un(J):window,se=te.nodeName&&te.nodeName.toLowerCase(),se==="select"||se==="input"&&te.type==="file")var mt=Iv;else if(Cv(te))if(jv)mt=XN;else{mt=QN;var Re=KN}else se=te.nodeName,!se||se.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&mi(J.elementType)&&(mt=Iv):mt=YN;if(mt&&(mt=mt(s,J))){Rv(he,mt,o,ae);break e}Re&&Re(s,te,J),s==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&Yi(te,"number",te.value)}switch(Re=J?Un(J):window,s){case"focusin":(Cv(Re)||Re.contentEditable==="true")&&(Ol=Re,Mm=J,Wc=null);break;case"focusout":Wc=Mm=Ol=null;break;case"mousedown":Pm=!0;break;case"contextmenu":case"mouseup":case"dragend":Pm=!1,Vv(he,o,ae);break;case"selectionchange":if(ZN)break;case"keydown":case"keyup":Vv(he,o,ae)}var Qe;if(vt)e:{switch(s){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else jl?Bo(s,o)&&(at="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(at="onCompositionStart");at&&(yi&&o.locale!=="ko"&&(jl||at!=="onCompositionStart"?at==="onCompositionEnd"&&jl&&(Qe=Wi()):(vr=ae,zs="value"in vr?vr.value:vr.textContent,jl=!0)),Re=jd(J,at),0<Re.length&&(at=new gi(at,s,null,o,ae),he.push({event:at,listeners:Re}),Qe?at.data=Qe:(Qe=Il(o),Qe!==null&&(at.data=Qe)))),(Qe=bs?HN(s,o):FN(s,o))&&(at=jd(J,"onBeforeInput"),0<at.length&&(Re=new gi("onBeforeInput","beforeinput",null,o,ae),he.push({event:Re,listeners:at}),Re.data=Qe)),k2(he,s,J,o,ae)}d_(he,i)})}function Eu(s,i,o){return{instance:s,listener:i,currentTarget:o}}function jd(s,i){for(var o=i+"Capture",u=[];s!==null;){var p=s,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=sr(s,o),p!=null&&u.unshift(Eu(s,p,y)),p=sr(s,i),p!=null&&u.push(Eu(s,p,y))),s.tag===3)return u;s=s.return}return[]}function V2(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function m_(s,i,o,u,p){for(var y=i._reactName,w=[];o!==null&&o!==u;){var I=o,z=I.alternate,J=I.stateNode;if(I=I.tag,z!==null&&z===u)break;I!==5&&I!==26&&I!==27||J===null||(z=J,p?(J=sr(o,y),J!=null&&w.unshift(Eu(o,J,z))):p||(J=sr(o,y),J!=null&&w.push(Eu(o,J,z)))),o=o.return}w.length!==0&&s.push({event:i,listeners:w})}var q2=/\r\n?/g,B2=/\u0000|\uFFFD/g;function p_(s){return(typeof s=="string"?s:""+s).replace(q2,`
`).replace(B2,"")}function g_(s,i){return i=p_(i),p_(s)===i}function St(s,i,o,u,p,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Kt(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Kt(s,""+u);break;case"className":qn(s,"class",u);break;case"tabIndex":qn(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":qn(s,o,u);break;case"style":nr(s,u,y);break;case"data":if(i!=="object"){qn(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=pi(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&St(s,i,"name",p.name,p,null),St(s,i,"formEncType",p.formEncType,p,null),St(s,i,"formMethod",p.formMethod,p,null),St(s,i,"formTarget",p.formTarget,p,null)):(St(s,i,"encType",p.encType,p,null),St(s,i,"method",p.method,p,null),St(s,i,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=pi(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=rr);break;case"onScroll":u!=null&&nt("scroll",s);break;case"onScrollEnd":u!=null&&nt("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=pi(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":nt("beforetoggle",s),nt("toggle",s),hi(s,"popover",u);break;case"xlinkActuate":$t(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":$t(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":$t(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":$t(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":$t(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":$t(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":$t(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":$t(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":$t(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":hi(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Ma.get(o)||o,hi(s,o,u))}}function lg(s,i,o,u,p,y){switch(o){case"style":nr(s,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof u=="string"?Kt(s,u):(typeof u=="number"||typeof u=="bigint")&&Kt(s,""+u);break;case"onScroll":u!=null&&nt("scroll",s);break;case"onScrollEnd":u!=null&&nt("scrollend",s);break;case"onClick":u!=null&&(s.onclick=rr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ds.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),i=o.slice(2,p?o.length-7:void 0),y=s[rn]||null,y=y!=null?y[o]:null,typeof y=="function"&&s.removeEventListener(i,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,u,p);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):hi(s,o,u)}}}function Kn(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",s),nt("load",s);var u=!1,p=!1,y;for(y in o)if(o.hasOwnProperty(y)){var w=o[y];if(w!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:St(s,i,y,w,o,null)}}p&&St(s,i,"srcSet",o.srcSet,o,null),u&&St(s,i,"src",o.src,o,null);return;case"input":nt("invalid",s);var I=y=w=p=null,z=null,J=null;for(u in o)if(o.hasOwnProperty(u)){var ae=o[u];if(ae!=null)switch(u){case"name":p=ae;break;case"type":w=ae;break;case"checked":z=ae;break;case"defaultChecked":J=ae;break;case"value":y=ae;break;case"defaultValue":I=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,i));break;default:St(s,i,u,ae,o,null)}}fi(s,y,I,z,J,w,p,!1);return;case"select":nt("invalid",s),u=w=y=null;for(p in o)if(o.hasOwnProperty(p)&&(I=o[p],I!=null))switch(p){case"value":y=I;break;case"defaultValue":w=I;break;case"multiple":u=I;default:St(s,i,p,I,o,null)}i=y,o=w,s.multiple=!!u,i!=null?ms(s,!!u,i,!1):o!=null&&ms(s,!!u,o,!0);return;case"textarea":nt("invalid",s),y=p=u=null;for(w in o)if(o.hasOwnProperty(w)&&(I=o[w],I!=null))switch(w){case"value":u=I;break;case"defaultValue":p=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:St(s,i,w,I,o,null)}gn(s,u,p,y);return;case"option":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:St(s,i,z,u,o,null)}return;case"dialog":nt("beforetoggle",s),nt("toggle",s),nt("cancel",s),nt("close",s);break;case"iframe":case"object":nt("load",s);break;case"video":case"audio":for(u=0;u<xu.length;u++)nt(xu[u],s);break;case"image":nt("error",s),nt("load",s);break;case"details":nt("toggle",s);break;case"embed":case"source":case"link":nt("error",s),nt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in o)if(o.hasOwnProperty(J)&&(u=o[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:St(s,i,J,u,o,null)}return;default:if(mi(i)){for(ae in o)o.hasOwnProperty(ae)&&(u=o[ae],u!==void 0&&lg(s,i,ae,u,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(u=o[I],u!=null&&St(s,i,I,u,o,null))}function z2(s,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,w=null,I=null,z=null,J=null,ae=null;for(se in o){var he=o[se];if(o.hasOwnProperty(se)&&he!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":z=he;default:u.hasOwnProperty(se)||St(s,i,se,null,u,he)}}for(var te in u){var se=u[te];if(he=o[te],u.hasOwnProperty(te)&&(se!=null||he!=null))switch(te){case"type":y=se;break;case"name":p=se;break;case"checked":J=se;break;case"defaultChecked":ae=se;break;case"value":w=se;break;case"defaultValue":I=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,i));break;default:se!==he&&St(s,i,te,se,u,he)}}di(s,w,I,z,J,ae,y,p);return;case"select":se=w=I=te=null;for(y in o)if(z=o[y],o.hasOwnProperty(y)&&z!=null)switch(y){case"value":break;case"multiple":se=z;default:u.hasOwnProperty(y)||St(s,i,y,null,u,z)}for(p in u)if(y=u[p],z=o[p],u.hasOwnProperty(p)&&(y!=null||z!=null))switch(p){case"value":te=y;break;case"defaultValue":I=y;break;case"multiple":w=y;default:y!==z&&St(s,i,p,y,u,z)}i=I,o=w,u=se,te!=null?ms(s,!!o,te,!1):!!u!=!!o&&(i!=null?ms(s,!!o,i,!0):ms(s,!!o,o?[]:"",!1));return;case"textarea":se=te=null;for(I in o)if(p=o[I],o.hasOwnProperty(I)&&p!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:St(s,i,I,null,u,p)}for(w in u)if(p=u[w],y=o[w],u.hasOwnProperty(w)&&(p!=null||y!=null))switch(w){case"value":te=p;break;case"defaultValue":se=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==y&&St(s,i,w,p,u,y)}ps(s,te,se);return;case"option":for(var Ne in o)if(te=o[Ne],o.hasOwnProperty(Ne)&&te!=null&&!u.hasOwnProperty(Ne))switch(Ne){case"selected":s.selected=!1;break;default:St(s,i,Ne,null,u,te)}for(z in u)if(te=u[z],se=o[z],u.hasOwnProperty(z)&&te!==se&&(te!=null||se!=null))switch(z){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:St(s,i,z,te,u,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in o)te=o[Ue],o.hasOwnProperty(Ue)&&te!=null&&!u.hasOwnProperty(Ue)&&St(s,i,Ue,null,u,te);for(J in u)if(te=u[J],se=o[J],u.hasOwnProperty(J)&&te!==se&&(te!=null||se!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,i));break;default:St(s,i,J,te,u,se)}return;default:if(mi(i)){for(var Nt in o)te=o[Nt],o.hasOwnProperty(Nt)&&te!==void 0&&!u.hasOwnProperty(Nt)&&lg(s,i,Nt,void 0,u,te);for(ae in u)te=u[ae],se=o[ae],!u.hasOwnProperty(ae)||te===se||te===void 0&&se===void 0||lg(s,i,ae,te,u,se);return}}for(var K in o)te=o[K],o.hasOwnProperty(K)&&te!=null&&!u.hasOwnProperty(K)&&St(s,i,K,null,u,te);for(he in u)te=u[he],se=o[he],!u.hasOwnProperty(he)||te===se||te==null&&se==null||St(s,i,he,te,u,se)}function y_(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function H2(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var p=o[u],y=p.transferSize,w=p.initiatorType,I=p.duration;if(y&&I&&y_(w)){for(w=0,I=p.responseEnd,u+=1;u<o.length;u++){var z=o[u],J=z.startTime;if(J>I)break;var ae=z.transferSize,he=z.initiatorType;ae&&y_(he)&&(z=z.responseEnd,w+=ae*(z<I?1:(I-J)/(z-J)))}if(--u,i+=8*(y+w)/(p.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var cg=null,ug=null;function Od(s){return s.nodeType===9?s:s.ownerDocument}function v_(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b_(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function hg(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var dg=null;function F2(){var s=window.event;return s&&s.type==="popstate"?s===dg?!1:(dg=s,!0):(dg=null,!1)}var __=typeof setTimeout=="function"?setTimeout:void 0,G2=typeof clearTimeout=="function"?clearTimeout:void 0,x_=typeof Promise=="function"?Promise:void 0,$2=typeof queueMicrotask=="function"?queueMicrotask:typeof x_<"u"?function(s){return x_.resolve(null).then(s).catch(K2)}:__;function K2(s){setTimeout(function(){throw s})}function eo(s){return s==="head"}function E_(s,i){var o=i,u=0;do{var p=o.nextSibling;if(s.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"||o==="/&"){if(u===0){s.removeChild(p),ic(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")wu(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,wu(o);for(var y=o.firstChild;y;){var w=y.nextSibling,I=y.nodeName;y[Cr]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=w}}else o==="body"&&wu(s.ownerDocument.body);o=p}while(o);ic(i)}function w_(s,i){var o=s;s=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=u}while(o)}function fg(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":fg(o),ui(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function Q2(s,i,o,u){for(;s.nodeType===1;){var p=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Cr])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Ss(s.nextSibling),s===null)break}return null}function Y2(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Ss(s.nextSibling),s===null))return null;return s}function T_(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=Ss(s.nextSibling),s===null))return null;return s}function mg(s){return s.data==="$?"||s.data==="$~"}function pg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function X2(s,i){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Ss(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var gg=null;function A_(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(i===0)return Ss(s.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}s=s.nextSibling}return null}function S_(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return s;i--}else o!=="/$"&&o!=="/&"||i++}s=s.previousSibling}return null}function N_(s,i,o){switch(i=Od(o),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function wu(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);ui(s)}var Ns=new Map,C_=new Set;function Dd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ma=ee.d;ee.d={f:W2,r:Z2,D:J2,C:eC,L:tC,m:nC,X:sC,S:rC,M:iC};function W2(){var s=ma.f(),i=Td();return s||i}function Z2(s){var i=er(s);i!==null&&i.tag===5&&i.type==="form"?Gb(i):ma.r(s)}var nc=typeof document>"u"?null:document;function R_(s,i,o){var u=nc;if(u&&typeof i=="string"&&i){var p=jn(i);p='link[rel="'+s+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),C_.has(p)||(C_.add(p),s={rel:s,crossOrigin:o,href:i},u.querySelector(p)===null&&(i=u.createElement("link"),Kn(i,"link",s),Gt(i),u.head.appendChild(i)))}}function J2(s){ma.D(s),R_("dns-prefetch",s,null)}function eC(s,i){ma.C(s,i),R_("preconnect",s,i)}function tC(s,i,o){ma.L(s,i,o);var u=nc;if(u&&s&&i){var p='link[rel="preload"][as="'+jn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+jn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+jn(o.imageSizes)+'"]')):p+='[href="'+jn(s)+'"]';var y=p;switch(i){case"style":y=rc(s);break;case"script":y=sc(s)}Ns.has(y)||(s=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),Ns.set(y,s),u.querySelector(p)!==null||i==="style"&&u.querySelector(Tu(y))||i==="script"&&u.querySelector(Au(y))||(i=u.createElement("link"),Kn(i,"link",s),Gt(i),u.head.appendChild(i)))}}function nC(s,i){ma.m(s,i);var o=nc;if(o&&s){var u=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+jn(u)+'"][href="'+jn(s)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=sc(s)}if(!Ns.has(y)&&(s=E({rel:"modulepreload",href:s},i),Ns.set(y,s),o.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Au(y)))return}u=o.createElement("link"),Kn(u,"link",s),Gt(u),o.head.appendChild(u)}}}function rC(s,i,o){ma.S(s,i,o);var u=nc;if(u&&s){var p=Rr(u).hoistableStyles,y=rc(s);i=i||"default";var w=p.get(y);if(!w){var I={loading:0,preload:null};if(w=u.querySelector(Tu(y)))I.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":i},o),(o=Ns.get(y))&&yg(s,o);var z=w=u.createElement("link");Gt(z),Kn(z,"link",s),z._p=new Promise(function(J,ae){z.onload=J,z.onerror=ae}),z.addEventListener("load",function(){I.loading|=1}),z.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Ld(w,i,u)}w={type:"stylesheet",instance:w,count:1,state:I},p.set(y,w)}}}function sC(s,i){ma.X(s,i);var o=nc;if(o&&s){var u=Rr(o).hoistableScripts,p=sc(s),y=u.get(p);y||(y=o.querySelector(Au(p)),y||(s=E({src:s,async:!0},i),(i=Ns.get(p))&&vg(s,i),y=o.createElement("script"),Gt(y),Kn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function iC(s,i){ma.M(s,i);var o=nc;if(o&&s){var u=Rr(o).hoistableScripts,p=sc(s),y=u.get(p);y||(y=o.querySelector(Au(p)),y||(s=E({src:s,async:!0,type:"module"},i),(i=Ns.get(p))&&vg(s,i),y=o.createElement("script"),Gt(y),Kn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function I_(s,i,o,u){var p=(p=Te.current)?Dd(p):null;if(!p)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=rc(o.href),o=Rr(p).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=rc(o.href);var y=Rr(p).hoistableStyles,w=y.get(s);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,w),(y=p.querySelector(Tu(s)))&&!y._p&&(w.instance=y,w.state.loading=5),Ns.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ns.set(s,o),y||aC(p,s,o,w.state))),i&&u===null)throw Error(r(528,""));return w}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=sc(o),o=Rr(p).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function rc(s){return'href="'+jn(s)+'"'}function Tu(s){return'link[rel="stylesheet"]['+s+"]"}function j_(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function aC(s,i,o,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Kn(i,"link",o),Gt(i),s.head.appendChild(i))}function sc(s){return'[src="'+jn(s)+'"]'}function Au(s){return"script[async]"+s}function O_(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+jn(o.href)+'"]');if(u)return i.instance=u,Gt(u),u;var p=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Gt(u),Kn(u,"style",p),Ld(u,o.precedence,s),i.instance=u;case"stylesheet":p=rc(o.href);var y=s.querySelector(Tu(p));if(y)return i.state.loading|=4,i.instance=y,Gt(y),y;u=j_(o),(p=Ns.get(p))&&yg(u,p),y=(s.ownerDocument||s).createElement("link"),Gt(y);var w=y;return w._p=new Promise(function(I,z){w.onload=I,w.onerror=z}),Kn(y,"link",u),i.state.loading|=4,Ld(y,o.precedence,s),i.instance=y;case"script":return y=sc(o.src),(p=s.querySelector(Au(y)))?(i.instance=p,Gt(p),p):(u=o,(p=Ns.get(y))&&(u=E({},o),vg(u,p)),s=s.ownerDocument||s,p=s.createElement("script"),Gt(p),Kn(p,"link",u),s.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Ld(u,o.precedence,s));return i.instance}function Ld(s,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,w=0;w<u.length;w++){var I=u[w];if(I.dataset.precedence===i)y=I;else if(y!==p)break}y?y.parentNode.insertBefore(s,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function yg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function vg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var kd=null;function D_(s,i,o){if(kd===null){var u=new Map,p=kd=new Map;p.set(o,u)}else p=kd,u=p.get(o),u||(u=new Map,p.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),p=0;p<o.length;p++){var y=o[p];if(!(y[Cr]||y[Ft]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(i)||"";w=s+w;var I=u.get(w);I?I.push(y):u.set(w,[y])}}return u}function L_(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function oC(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function k_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function lC(s,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=rc(u.href),y=i.querySelector(Tu(p));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=Md.bind(s),i.then(s,s)),o.state.loading|=4,o.instance=y,Gt(y);return}y=i.ownerDocument||i,u=j_(u),(p=Ns.get(p))&&yg(u,p),y=y.createElement("link"),Gt(y);var w=y;w._p=new Promise(function(I,z){w.onload=I,w.onerror=z}),Kn(y,"link",u),o.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=Md.bind(s),i.addEventListener("load",o),i.addEventListener("error",o))}}var bg=0;function cC(s,i){return s.stylesheets&&s.count===0&&Ud(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var u=setTimeout(function(){if(s.stylesheets&&Ud(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+i);0<s.imgBytes&&bg===0&&(bg=62500*H2());var p=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Ud(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>bg?50:800)+i);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Md(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ud(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Pd=null;function Ud(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Pd=new Map,i.forEach(uC,s),Pd=null,Md.call(s))}function uC(s,i){if(!(i.state.loading&4)){var o=Pd.get(s);if(o)var u=o.get(null);else{o=new Map,Pd.set(s,o);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var w=p[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}p=i.instance,w=p.getAttribute("data-precedence"),y=o.get(w)||u,y===u&&o.set(null,p),o.set(w,p),this.count++,u=Md.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),i.state.loading|=4}}var Su={$$typeof:Y,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function hC(s,i,o,u,p,y,w,I,z){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Sn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sn(0),this.hiddenUpdates=Sn(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function M_(s,i,o,u,p,y,w,I,z,J,ae,he){return s=new hC(s,i,o,w,z,J,ae,he,I),i=1,y===!0&&(i|=24),y=Wr(3,null,null,i),s.current=y,y.stateNode=s,i=Zm(),i.refCount++,s.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},np(y),s}function P_(s){return s?(s=kl,s):kl}function U_(s,i,o,u,p,y){p=P_(p),u.context===null?u.context=p:u.pendingContext=p,u=Ha(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=Fa(s,u,i),o!==null&&(Pr(o,s,i),su(o,s,i))}function V_(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function _g(s,i){V_(s,i),(s=s.alternate)&&V_(s,i)}function q_(s){if(s.tag===13||s.tag===31){var i=Fo(s,67108864);i!==null&&Pr(i,s,67108864),_g(s,67108864)}}function B_(s){if(s.tag===13||s.tag===31){var i=ns();i=hs(i);var o=Fo(s,i);o!==null&&Pr(o,s,i),_g(s,i)}}var Vd=!0;function dC(s,i,o,u){var p=H.T;H.T=null;var y=ee.p;try{ee.p=2,xg(s,i,o,u)}finally{ee.p=y,H.T=p}}function fC(s,i,o,u){var p=H.T;H.T=null;var y=ee.p;try{ee.p=8,xg(s,i,o,u)}finally{ee.p=y,H.T=p}}function xg(s,i,o,u){if(Vd){var p=Eg(u);if(p===null)og(s,i,u,qd,o),H_(s,u);else if(pC(p,s,i,o,u))u.stopPropagation();else if(H_(s,u),i&4&&-1<mC.indexOf(s)){for(;p!==null;){var y=er(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=Jn(y.pendingLanes);if(w!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;w;){var z=1<<31-Dt(w);I.entanglements[1]|=z,w&=~z}xi(y),(bt&6)===0&&(Ed=Ot()+500,_u(0))}}break;case 31:case 13:I=Fo(y,2),I!==null&&Pr(I,y,2),Td(),_g(y,2)}if(y=Eg(u),y===null&&og(s,i,u,qd,o),y===p)break;p=y}p!==null&&u.stopPropagation()}else og(s,i,u,null,o)}}function Eg(s){return s=Bn(s),wg(s)}var qd=null;function wg(s){if(qd=null,s=Mt(s),s!==null){var i=l(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=c(i),s!==null)return s;s=null}else if(o===31){if(s=d(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return qd=s,null}function z_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ar()){case qi:return 2;case Br:return 8;case dr:case Bi:return 32;case kn:return 268435456;default:return 32}default:return 32}}var Tg=!1,to=null,no=null,ro=null,Nu=new Map,Cu=new Map,so=[],mC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H_(s,i){switch(s){case"focusin":case"focusout":to=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":ro=null;break;case"pointerover":case"pointerout":Nu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cu.delete(i.pointerId)}}function Ru(s,i,o,u,p,y){return s===null||s.nativeEvent!==y?(s={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},i!==null&&(i=er(i),i!==null&&q_(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),s)}function pC(s,i,o,u,p){switch(i){case"focusin":return to=Ru(to,s,i,o,u,p),!0;case"dragenter":return no=Ru(no,s,i,o,u,p),!0;case"mouseover":return ro=Ru(ro,s,i,o,u,p),!0;case"pointerover":var y=p.pointerId;return Nu.set(y,Ru(Nu.get(y)||null,s,i,o,u,p)),!0;case"gotpointercapture":return y=p.pointerId,Cu.set(y,Ru(Cu.get(y)||null,s,i,o,u,p)),!0}return!1}function F_(s){var i=Mt(s.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){s.blockedOn=i,pr(s.priority,function(){B_(o)});return}}else if(i===31){if(i=d(o),i!==null){s.blockedOn=i,pr(s.priority,function(){B_(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Bd(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=Eg(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);cn=u,o.target.dispatchEvent(u),cn=null}else return i=er(o),i!==null&&q_(i),s.blockedOn=o,!1;i.shift()}return!0}function G_(s,i,o){Bd(s)&&o.delete(i)}function gC(){Tg=!1,to!==null&&Bd(to)&&(to=null),no!==null&&Bd(no)&&(no=null),ro!==null&&Bd(ro)&&(ro=null),Nu.forEach(G_),Cu.forEach(G_)}function zd(s,i){s.blockedOn===i&&(s.blockedOn=null,Tg||(Tg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,gC)))}var Hd=null;function $_(s){Hd!==s&&(Hd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Hd===s&&(Hd=null);for(var i=0;i<s.length;i+=3){var o=s[i],u=s[i+1],p=s[i+2];if(typeof u!="function"){if(wg(u||o)===null)continue;break}var y=er(o);y!==null&&(s.splice(i,3),i-=3,Ep(y,{pending:!0,data:p,method:o.method,action:u},u,p))}}))}function ic(s){function i(z){return zd(z,s)}to!==null&&zd(to,s),no!==null&&zd(no,s),ro!==null&&zd(ro,s),Nu.forEach(i),Cu.forEach(i);for(var o=0;o<so.length;o++){var u=so[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<so.length&&(o=so[0],o.blockedOn===null);)F_(o),o.blockedOn===null&&so.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var p=o[u],y=o[u+1],w=p[rn]||null;if(typeof y=="function")w||$_(o);else if(w){var I=null;if(y&&y.hasAttribute("formAction")){if(p=y,w=y[rn]||null)I=w.formAction;else if(wg(p)!==null)continue}else I=w.action;typeof I=="function"?o[u+1]=I:(o.splice(u,3),u-=3),$_(o)}}}function K_(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(w){return p=w})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function Ag(s){this._internalRoot=s}Fd.prototype.render=Ag.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=ns();U_(o,u,s,i,null,null)},Fd.prototype.unmount=Ag.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;U_(s.current,2,null,s,null,null),Td(),i[Nr]=null}};function Fd(s){this._internalRoot=s}Fd.prototype.unstable_scheduleHydration=function(s){if(s){var i=nn();s={blockedOn:null,target:s,priority:i};for(var o=0;o<so.length&&i!==0&&i<so[o].priority;o++);so.splice(o,0,s),o===0&&F_(s)}};var Q_=e.version;if(Q_!=="19.2.1")throw Error(r(527,Q_,"19.2.1"));ee.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=g(i),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var yC={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{fr=Gd.inject(yC),Zt=Gd}catch{}}return ju.createRoot=function(s,i){if(!a(s))throw Error(r(299));var o=!1,u="",p=t1,y=n1,w=r1;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=M_(s,1,!1,null,null,o,u,null,p,y,w,K_),s[Nr]=i.current,ag(s),new Ag(i)},ju.hydrateRoot=function(s,i,o){if(!a(s))throw Error(r(299));var u=!1,p="",y=t1,w=n1,I=r1,z=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(z=o.formState)),i=M_(s,1,!0,i,o??null,u,p,z,y,w,I,K_),i.context=P_(null),o=i.current,u=ns(),u=hs(u),p=Ha(u),p.callback=null,Fa(o,p,u),o=u,i.current.lanes=o,us(i,o),xi(i),s[Nr]=i.current,ag(s),new Fd(i)},ju.version="19.2.1",ju}var sx;function CC(){if(sx)return Cg.exports;sx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cg.exports=NC(),Cg.exports}var RC=CC();var ix="popstate";function IC(n={}){function e(a,l){let{pathname:c="/",search:d="",hash:m=""}=vl(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),cy("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=a.location.href,g=m.indexOf("#");d=g===-1?m:m.slice(0,g)}return d+"#"+(typeof l=="string"?l:eh(l))}function r(a,l){os(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return OC(e,t,r,n)}function Wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function os(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jC(){return Math.random().toString(36).substring(2,10)}function ax(n,e){return{usr:n.state,key:n.key,idx:e}}function cy(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?vl(e):e,state:t,key:e&&e.key||r||jC()}}function eh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function vl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function OC(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",m=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function E(){d="POP";let R=v(),U=R==null?null:R-g;g=R,m&&m({action:d,location:D.location,delta:U})}function x(R,U){d="PUSH";let F=cy(D.location,R,U);t&&t(F,R),g=v()+1;let Y=ax(F,g),Q=D.createHref(F);try{c.pushState(Y,"",Q)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;a.location.assign(Q)}l&&m&&m({action:d,location:D.location,delta:1})}function A(R,U){d="REPLACE";let F=cy(D.location,R,U);t&&t(F,R),g=v();let Y=ax(F,g),Q=D.createHref(F);c.replaceState(Y,"",Q),l&&m&&m({action:d,location:D.location,delta:0})}function C(R){return DC(R)}let D={get action(){return d},get location(){return n(a,c)},listen(R){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(ix,E),m=R,()=>{a.removeEventListener(ix,E),m=null}},createHref(R){return e(a,R)},createURL:C,encodeLocation(R){let U=C(R);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:x,replace:A,go(R){return c.go(R)}};return D}function DC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:eh(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Yw(n,e,t="/"){return LC(n,e,t,!1)}function LC(n,e,t,r){let a=typeof e=="string"?vl(e):e,l=_a(a.pathname||"/",t);if(l==null)return null;let c=Xw(n);kC(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=$C(l);d=FC(c[m],g,r)}return d}function Xw(n,e=[],t=[],r="",a=!1){let l=(c,d,m=a,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&m)return;Wt(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let E=va([r,v.relativePath]),x=t.concat(v);c.children&&c.children.length>0&&(Wt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Xw(c.children,e,x,E,m)),!(c.path==null&&!c.index)&&e.push({path:E,score:zC(E,c.index),routesMeta:x})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let m of Ww(c.path))l(c,d,!0,m)}),e}function Ww(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=Ww(r.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function kC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:HC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var MC=/^:[\w-]+$/,PC=3,UC=2,VC=1,qC=10,BC=-2,ox=n=>n==="*";function zC(n,e){let t=n.split("/"),r=t.length;return t.some(ox)&&(r+=BC),e&&(r+=UC),t.filter(a=>!ox(a)).reduce((a,l)=>a+(MC.test(l)?PC:l===""?VC:qC),r)}function HC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function FC(n,e,t=!1){let{routesMeta:r}=n,a={},l="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],g=d===r.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=Af({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},v),x=m.route;if(!E&&g&&t&&!r[r.length-1].route.index&&(E=Af({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!E)return null;Object.assign(a,E.params),c.push({params:a,pathname:va([l,E.pathname]),pathnameBase:WC(va([l,E.pathnameBase])),route:x}),E.pathnameBase!=="/"&&(l=va([l,E.pathnameBase]))}return c}function Af(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=GC(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((g,{paramName:v,isOptional:E},x)=>{if(v==="*"){let C=d[x]||"";c=l.slice(0,l.length-C.length).replace(/(.)\/+$/,"$1")}const A=d[x];return E&&!A?g[v]=void 0:g[v]=(A||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function GC(n,e=!1,t=!0){os(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function $C(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return os(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function _a(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var KC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,QC=n=>KC.test(n);function YC(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?vl(n):n,l;if(t)if(QC(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),os(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=lx(t.substring(1),"/"):l=lx(t,e)}else l=e;return{pathname:l,search:ZC(r),hash:JC(a)}}function lx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Og(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function XC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function s0(n){let e=XC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function i0(n,e,t,r=!1){let a;typeof n=="string"?a=vl(n):(a={...n},Wt(!a.pathname||!a.pathname.includes("?"),Og("?","pathname","search",a)),Wt(!a.pathname||!a.pathname.includes("#"),Og("#","pathname","hash",a)),Wt(!a.search||!a.search.includes("#"),Og("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),E-=1;a.pathname=x.join("/")}d=E>=0?e[E]:"/"}let m=YC(a,d),g=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||v)&&(m.pathname+="/"),m}var va=n=>n.join("/").replace(/\/\/+/g,"/"),WC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ZC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,JC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function e4(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function t4(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Zw=["POST","PUT","PATCH","DELETE"];new Set(Zw);var n4=["GET",...Zw];new Set(n4);var Lc=P.createContext(null);Lc.displayName="DataRouter";var Wf=P.createContext(null);Wf.displayName="DataRouterState";P.createContext(!1);var Jw=P.createContext({isTransitioning:!1});Jw.displayName="ViewTransition";var r4=P.createContext(new Map);r4.displayName="Fetchers";var s4=P.createContext(null);s4.displayName="Await";var Ms=P.createContext(null);Ms.displayName="Navigation";var ph=P.createContext(null);ph.displayName="Location";var Ps=P.createContext({outlet:null,matches:[],isDataRoute:!1});Ps.displayName="Route";var a0=P.createContext(null);a0.displayName="RouteError";function i4(n,{relative:e}={}){Wt(kc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(Ms),{hash:a,pathname:l,search:c}=gh(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:va([t,l])),r.createHref({pathname:d,search:c,hash:a})}function kc(){return P.useContext(ph)!=null}function jo(){return Wt(kc(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(ph).location}var eT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tT(n){P.useContext(Ms).static||P.useLayoutEffect(n)}function ki(){let{isDataRoute:n}=P.useContext(Ps);return n?_4():a4()}function a4(){Wt(kc(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Lc),{basename:e,navigator:t}=P.useContext(Ms),{matches:r}=P.useContext(Ps),{pathname:a}=jo(),l=JSON.stringify(s0(r)),c=P.useRef(!1);return tT(()=>{c.current=!0}),P.useCallback((m,g={})=>{if(os(c.current,eT),!c.current)return;if(typeof m=="number"){t.go(m);return}let v=i0(m,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:va([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,a,n])}var o4=P.createContext(null);function l4(n){let e=P.useContext(Ps).outlet;return P.useMemo(()=>e&&P.createElement(o4.Provider,{value:n},e),[e,n])}function Mc(){let{matches:n}=P.useContext(Ps),e=n[n.length-1];return e?e.params:{}}function gh(n,{relative:e}={}){let{matches:t}=P.useContext(Ps),{pathname:r}=jo(),a=JSON.stringify(s0(t));return P.useMemo(()=>i0(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function c4(n,e){return nT(n,e)}function nT(n,e,t,r,a){Wt(kc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=P.useContext(Ms),{matches:c}=P.useContext(Ps),d=c[c.length-1],m=d?d.params:{},g=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let F=E&&E.path||"";rT(g,!E||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let x=jo(),A;if(e){let F=typeof e=="string"?vl(e):e;Wt(v==="/"||F.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${F.pathname}" was given in the \`location\` prop.`),A=F}else A=x;let C=A.pathname||"/",D=C;if(v!=="/"){let F=v.replace(/^\//,"").split("/");D="/"+C.replace(/^\//,"").split("/").slice(F.length).join("/")}let R=Yw(n,{pathname:D});os(E||R!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),os(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=m4(R&&R.map(F=>Object.assign({},F,{params:Object.assign({},m,F.params),pathname:va([v,l.encodeLocation?l.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?v:va([v,l.encodeLocation?l.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),c,t,r,a);return e&&U?P.createElement(ph.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},U):U}function u4(){let n=b4(),e=e4(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:l},"ErrorBoundary")," or"," ",P.createElement("code",{style:l},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:a},t):null,c)}var h4=P.createElement(u4,null),d4=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?P.createElement(Ps.Provider,{value:this.props.routeContext},P.createElement(a0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function f4({routeContext:n,match:e,children:t}){let r=P.useContext(Lc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Ps.Provider,{value:n},t)}function m4(n,e=[],t=null,r=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let v=l.findIndex(E=>E.route.id&&c?.[E.route.id]!==void 0);Wt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,m=-1;if(t)for(let v=0;v<l.length;v++){let E=l[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=v),E.route.id){let{loaderData:x,errors:A}=t,C=E.route.loader&&!x.hasOwnProperty(E.route.id)&&(!A||A[E.route.id]===void 0);if(E.route.lazy||C){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let g=t&&r?(v,E)=>{r(v,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:t4(t.matches),errorInfo:E})}:void 0;return l.reduceRight((v,E,x)=>{let A,C=!1,D=null,R=null;t&&(A=c&&E.route.id?c[E.route.id]:void 0,D=E.route.errorElement||h4,d&&(m<0&&x===0?(rT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,R=null):m===x&&(C=!0,R=E.route.hydrateFallbackElement||null)));let U=e.concat(l.slice(0,x+1)),F=()=>{let Y;return A?Y=D:C?Y=R:E.route.Component?Y=P.createElement(E.route.Component,null):E.route.element?Y=E.route.element:Y=v,P.createElement(f4,{match:E,routeContext:{outlet:v,matches:U,isDataRoute:t!=null},children:Y})};return t&&(E.route.ErrorBoundary||E.route.errorElement||x===0)?P.createElement(d4,{location:t.location,revalidation:t.revalidation,component:D,error:A,children:F(),routeContext:{outlet:null,matches:U,isDataRoute:!0},onError:g}):F()},null)}function o0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function p4(n){let e=P.useContext(Lc);return Wt(e,o0(n)),e}function g4(n){let e=P.useContext(Wf);return Wt(e,o0(n)),e}function y4(n){let e=P.useContext(Ps);return Wt(e,o0(n)),e}function l0(n){let e=y4(n),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function v4(){return l0("useRouteId")}function b4(){let n=P.useContext(a0),e=g4("useRouteError"),t=l0("useRouteError");return n!==void 0?n:e.errors?.[t]}function _4(){let{router:n}=p4("useNavigate"),e=l0("useNavigate"),t=P.useRef(!1);return tT(()=>{t.current=!0}),P.useCallback(async(a,l={})=>{os(t.current,eT),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var cx={};function rT(n,e,t){!e&&!cx[n]&&(cx[n]=!0,os(!1,t))}P.memo(x4);function x4({routes:n,future:e,state:t,unstable_onError:r}){return nT(n,void 0,t,r,e)}function E4({to:n,replace:e,state:t,relative:r}){Wt(kc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=P.useContext(Ms);os(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=P.useContext(Ps),{pathname:c}=jo(),d=ki(),m=i0(n,s0(l),c,r==="path"),g=JSON.stringify(m);return P.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:r})},[d,g,r,e,t]),null}function w4(n){return l4(n.context)}function mn(n){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function T4({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){Wt(!kc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=P.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[d,a,l,c]);typeof t=="string"&&(t=vl(t));let{pathname:g="/",search:v="",hash:E="",state:x=null,key:A="default"}=t,C=P.useMemo(()=>{let D=_a(g,d);return D==null?null:{location:{pathname:D,search:v,hash:E,state:x,key:A},navigationType:r}},[d,g,v,E,x,A,r]);return os(C!=null,`<Router basename="${d}"> is not able to match the URL "${g}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:P.createElement(Ms.Provider,{value:m},P.createElement(ph.Provider,{children:e,value:C}))}function A4({children:n,location:e}){return c4(uy(n),e)}function uy(n,e=[]){let t=[];return P.Children.forEach(n,(r,a)=>{if(!P.isValidElement(r))return;let l=[...e,a];if(r.type===P.Fragment){t.push.apply(t,uy(r.props.children,l));return}Wt(r.type===mn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=uy(r.props.children,l)),t.push(c)}),t}var df="get",ff="application/x-www-form-urlencoded";function Zf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function S4(n){return Zf(n)&&n.tagName.toLowerCase()==="button"}function N4(n){return Zf(n)&&n.tagName.toLowerCase()==="form"}function C4(n){return Zf(n)&&n.tagName.toLowerCase()==="input"}function R4(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function I4(n,e){return n.button===0&&(!e||e==="_self")&&!R4(n)}var $d=null;function j4(){if($d===null)try{new FormData(document.createElement("form"),0),$d=!1}catch{$d=!0}return $d}var O4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dg(n){return n!=null&&!O4.has(n)?(os(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ff}"`),null):n}function D4(n,e){let t,r,a,l,c;if(N4(n)){let d=n.getAttribute("action");r=d?_a(d,e):null,t=n.getAttribute("method")||df,a=Dg(n.getAttribute("enctype"))||ff,l=new FormData(n)}else if(S4(n)||C4(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(r=m?_a(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||df,a=Dg(n.getAttribute("formenctype"))||Dg(d.getAttribute("enctype"))||ff,l=new FormData(d,n),!j4()){let{name:g,type:v,value:E}=n;if(v==="image"){let x=g?`${g}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else g&&l.append(g,E)}}else{if(Zf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=df,r=null,a=ff,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function c0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function L4(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&_a(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function k4(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function M4(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function P4(n,e,t){let r=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await k4(l,t);return c.links?c.links():[]}return[]}));return B4(r.flat(1).filter(M4).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function ux(n,e,t,r,a,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>t[g].pathname!==m.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,g)=>c(m,g)||d(m,g)):l==="data"?e.filter((m,g)=>{let v=r.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function U4(n,e,{includeHydrateFallback:t}={}){return V4(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function V4(n){return[...new Set(n)]}function q4(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function B4(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let l=JSON.stringify(q4(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function sT(){let n=P.useContext(Lc);return c0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function z4(){let n=P.useContext(Wf);return c0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var u0=P.createContext(void 0);u0.displayName="FrameworkContext";function iT(){let n=P.useContext(u0);return c0(n,"You must render this element inside a <HydratedRouter> element"),n}function H4(n,e){let t=P.useContext(u0),[r,a]=P.useState(!1),[l,c]=P.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:v,onTouchStart:E}=e,x=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let D=U=>{U.forEach(F=>{c(F.isIntersecting)})},R=new IntersectionObserver(D,{threshold:.5});return x.current&&R.observe(x.current),()=>{R.disconnect()}}},[n]),P.useEffect(()=>{if(r){let D=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(D)}}},[r]);let A=()=>{a(!0)},C=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,x,{}]:[l,x,{onFocus:Ou(d,A),onBlur:Ou(m,C),onMouseEnter:Ou(g,A),onMouseLeave:Ou(v,C),onTouchStart:Ou(E,A)}]:[!1,x,{}]}function Ou(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function F4({page:n,...e}){let{router:t}=sT(),r=P.useMemo(()=>Yw(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement($4,{page:n,matches:r,...e}):null}function G4(n){let{manifest:e,routeModules:t}=iT(),[r,a]=P.useState([]);return P.useEffect(()=>{let l=!1;return P4(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),r}function $4({page:n,matches:e,...t}){let r=jo(),{manifest:a,routeModules:l}=iT(),{basename:c}=sT(),{loaderData:d,matches:m}=z4(),g=P.useMemo(()=>ux(n,e,m,a,r,"data"),[n,e,m,a,r]),v=P.useMemo(()=>ux(n,e,m,a,r,"assets"),[n,e,m,a,r]),E=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let C=new Set,D=!1;if(e.forEach(U=>{let F=a.routes[U.route.id];!F||!F.hasLoader||(!g.some(Y=>Y.route.id===U.route.id)&&U.route.id in d&&l[U.route.id]?.shouldRevalidate||F.hasClientLoader?D=!0:C.add(U.route.id))}),C.size===0)return[];let R=L4(n,c,"data");return D&&C.size>0&&R.searchParams.set("_routes",e.filter(U=>C.has(U.route.id)).map(U=>U.route.id).join(",")),[R.pathname+R.search]},[c,d,r,a,g,e,n,l]),x=P.useMemo(()=>U4(v,a),[v,a]),A=G4(v);return P.createElement(P.Fragment,null,E.map(C=>P.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),x.map(C=>P.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),A.map(({key:C,link:D})=>P.createElement("link",{key:C,nonce:t.nonce,...D})))}function K4(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var aT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aT&&(window.__reactRouterVersion="7.10.1")}catch{}function Q4({basename:n,children:e,unstable_useTransitions:t,window:r}){let a=P.useRef();a.current==null&&(a.current=IC({window:r,v5Compat:!0}));let l=a.current,[c,d]=P.useState({action:l.action,location:l.location}),m=P.useCallback(g=>{t===!1?d(g):P.startTransition(()=>d(g))},[t]);return P.useLayoutEffect(()=>l.listen(m),[l,m]),P.createElement(T4,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t===!0})}var oT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rt=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:g,preventScrollReset:v,viewTransition:E,...x},A){let{basename:C,unstable_useTransitions:D}=P.useContext(Ms),R=typeof g=="string"&&oT.test(g),U,F=!1;if(typeof g=="string"&&R&&(U=g,aT))try{let G=new URL(window.location.href),S=g.startsWith("//")?new URL(G.protocol+g):new URL(g),M=_a(S.pathname,C);S.origin===G.origin&&M!=null?g=M+S.search+S.hash:F=!0}catch{os(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=i4(g,{relative:a}),[Q,ie,ve]=H4(r,x),L=W4(g,{replace:c,state:d,target:m,preventScrollReset:v,relative:a,viewTransition:E,unstable_useTransitions:D});function k(G){e&&e(G),G.defaultPrevented||L(G)}let V=P.createElement("a",{...x,...ve,href:U||Y,onClick:F||l?e:k,ref:K4(A,ie),target:m,"data-discover":!R&&t==="render"?"true":void 0});return Q&&!R?P.createElement(P.Fragment,null,V,P.createElement(F4,{page:Y})):V});rt.displayName="Link";var lT=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...g},v){let E=gh(c,{relative:g.relative}),x=jo(),A=P.useContext(Wf),{navigator:C,basename:D}=P.useContext(Ms),R=A!=null&&nR(E)&&d===!0,U=C.encodeLocation?C.encodeLocation(E).pathname:E.pathname,F=x.pathname,Y=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(F=F.toLowerCase(),Y=Y?Y.toLowerCase():null,U=U.toLowerCase()),Y&&D&&(Y=_a(Y,D)||Y);const Q=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let ie=F===U||!a&&F.startsWith(U)&&F.charAt(Q)==="/",ve=Y!=null&&(Y===U||!a&&Y.startsWith(U)&&Y.charAt(U.length)==="/"),L={isActive:ie,isPending:ve,isTransitioning:R},k=ie?e:void 0,V;typeof r=="function"?V=r(L):V=[r,ie?"active":null,ve?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let G=typeof l=="function"?l(L):l;return P.createElement(rt,{...g,"aria-current":k,className:V,ref:v,style:G,to:c,viewTransition:d},typeof m=="function"?m(L):m)});lT.displayName="NavLink";var Y4=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=df,action:d,onSubmit:m,relative:g,preventScrollReset:v,viewTransition:E,...x},A)=>{let{unstable_useTransitions:C}=P.useContext(Ms),D=eR(),R=tR(d,{relative:g}),U=c.toLowerCase()==="get"?"get":"post",F=typeof d=="string"&&oT.test(d),Y=Q=>{if(m&&m(Q),Q.defaultPrevented)return;Q.preventDefault();let ie=Q.nativeEvent.submitter,ve=ie?.getAttribute("formmethod")||c,L=()=>D(ie||Q.currentTarget,{fetcherKey:e,method:ve,navigate:t,replace:a,state:l,relative:g,preventScrollReset:v,viewTransition:E});C&&t!==!1?P.startTransition(()=>L()):L()};return P.createElement("form",{ref:A,method:U,action:R,onSubmit:r?m:Y,...x,"data-discover":!F&&n==="render"?"true":void 0})});Y4.displayName="Form";function X4(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cT(n){let e=P.useContext(Lc);return Wt(e,X4(n)),e}function W4(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c,unstable_useTransitions:d}={}){let m=ki(),g=jo(),v=gh(n,{relative:l});return P.useCallback(E=>{if(I4(E,e)){E.preventDefault();let x=t!==void 0?t:eh(g)===eh(v),A=()=>m(n,{replace:x,state:r,preventScrollReset:a,relative:l,viewTransition:c});d?P.startTransition(()=>A()):A()}},[g,m,v,t,r,e,n,a,l,c,d])}var Z4=0,J4=()=>`__${String(++Z4)}__`;function eR(){let{router:n}=cT("useSubmit"),{basename:e}=P.useContext(Ms),t=v4(),r=n.fetch,a=n.navigate;return P.useCallback(async(l,c={})=>{let{action:d,method:m,encType:g,formData:v,body:E}=D4(l,e);if(c.navigate===!1){let x=c.fetcherKey||J4();await r(x,t,c.action||d,{preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||m,formEncType:c.encType||g,flushSync:c.flushSync})}else await a(c.action||d,{preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||m,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,a,e,t])}function tR(n,{relative:e}={}){let{basename:t}=P.useContext(Ms),r=P.useContext(Ps);Wt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...gh(n||".",{relative:e})},c=jo();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(v=>v==="")){d.delete("index"),m.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:va([t,l.pathname])),eh(l)}function nR(n,{relative:e}={}){let t=P.useContext(Jw);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=cT("useViewTransitionState"),a=gh(n,{relative:e});if(!t.isTransitioning)return!1;let l=_a(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=_a(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Af(a.pathname,c)!=null||Af(a.pathname,l)!=null}const rR=()=>{};var hx={};const uT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},sR=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},hT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let x=(d&15)<<2|g>>6,A=g&63;m||(A=64,c||(x=64)),r.push(t[v],t[E],t[x],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(uT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):sR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const E=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||E==null)throw new iR;const x=l<<2|d>>4;if(r.push(x),g!==64){const A=d<<4&240|g>>2;if(r.push(A),E!==64){const C=g<<6&192|E;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class iR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aR=function(n){const e=uT(n);return hT.encodeByteArray(e,!0)},Sf=function(n){return aR(n).replace(/\./g,"")},dT=function(n){try{return hT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function oR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const lR=()=>oR().__FIREBASE_DEFAULTS__,cR=()=>{if(typeof process>"u"||typeof hx>"u")return;const n=hx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&dT(n[1]);return e&&JSON.parse(e)},Jf=()=>{try{return rR()||lR()||cR()||uR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fT=n=>Jf()?.emulatorHosts?.[n],hR=n=>{const e=fT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},mT=()=>Jf()?.config,pT=n=>Jf()?.[`_${n}`];class dR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Pc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gT(n){return(await fetch(n,{credentials:"include"})).ok}function fR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Sf(JSON.stringify(t)),Sf(JSON.stringify(c)),""].join(".")}const $u={};function mR(){const n={prod:[],emulator:[]};for(const e of Object.keys($u))$u[e]?n.emulator.push(e):n.prod.push(e);return n}function pR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let dx=!1;function yT(n,e){if(typeof window>"u"||typeof document>"u"||!Pc(window.location.host)||$u[n]===e||$u[n]||dx)return;$u[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",l=mR().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function d(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function m(x,A){x.setAttribute("width","24"),x.setAttribute("id",A),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function g(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{dx=!0,c()},x}function v(x,A){x.setAttribute("id",A),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function E(){const x=pR(r),A=t("text"),C=document.getElementById(A)||document.createElement("span"),D=t("learnmore"),R=document.getElementById(D)||document.createElement("a"),U=t("preprendIcon"),F=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const Y=x.element;d(Y),v(R,D);const Q=g();m(F,U),Y.append(F,C,R,Q),document.body.appendChild(Y)}l?(C.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function ur(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ur())}function yR(){const n=Jf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _R(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xR(){const n=ur();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ER(){return!yR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wR(){try{return typeof indexedDB=="object"}catch{return!1}}function TR(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const AR="FirebaseError";class Ca extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=AR,Object.setPrototypeOf(this,Ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yh.prototype.create)}}class yh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?SR(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Ca(a,d,r)}}function SR(n,e){return n.replace(NR,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const NR=/\{\$([^}]+)}/g;function CR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function xa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],c=e[a];if(fx(l)&&fx(c)){if(!xa(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function fx(n){return n!==null&&typeof n=="object"}function vh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Pu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function RR(n,e){const t=new IR(n,e);return t.subscribe.bind(t)}class IR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");jR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Lg),a.error===void 0&&(a.error=Lg),a.complete===void 0&&(a.complete=Lg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Lg(){}function Tn(n){return n&&n._delegate?n._delegate:n}class ll{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const rl="[DEFAULT]";class OR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new dR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LR(e))try{this.getOrInitializeService({instanceIdentifier:rl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=rl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rl){return this.instances.has(e)}getOptions(e=rl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:DR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rl){return this.component?this.component.multipleInstances?e:rl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DR(n){return n===rl?void 0:n}function LR(n){return n.instantiationMode==="EAGER"}class kR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new OR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ot;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ot||(ot={}));const MR={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},PR=ot.INFO,UR={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},VR=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=UR[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class h0{constructor(e){this.name=e,this._logLevel=PR,this._logHandler=VR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const qR=(n,e)=>e.some(t=>n instanceof t);let mx,px;function BR(){return mx||(mx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zR(){return px||(px=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vT=new WeakMap,hy=new WeakMap,bT=new WeakMap,kg=new WeakMap,d0=new WeakMap;function HR(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(yo(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&vT.set(t,n)}).catch(()=>{}),d0.set(e,n),e}function FR(n){if(hy.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});hy.set(n,e)}let dy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return hy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||bT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function GR(n){dy=n(dy)}function $R(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Mg(this),e,...t);return bT.set(r,e.sort?e.sort():[e]),yo(r)}:zR().includes(n)?function(...e){return n.apply(Mg(this),e),yo(vT.get(this))}:function(...e){return yo(n.apply(Mg(this),e))}}function KR(n){return typeof n=="function"?$R(n):(n instanceof IDBTransaction&&FR(n),qR(n,BR())?new Proxy(n,dy):n)}function yo(n){if(n instanceof IDBRequest)return HR(n);if(kg.has(n))return kg.get(n);const e=KR(n);return e!==n&&(kg.set(n,e),d0.set(e,n)),e}const Mg=n=>d0.get(n);function QR(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=yo(c);return r&&c.addEventListener("upgradeneeded",m=>{r(yo(c.result),m.oldVersion,m.newVersion,yo(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const YR=["get","getKey","getAll","getAllKeys","count"],XR=["put","add","delete","clear"],Pg=new Map;function gx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Pg.get(e))return Pg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=XR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||YR.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&m.done]))[0]};return Pg.set(e,l),l}GR(n=>({...n,get:(e,t,r)=>gx(e,t)||n.get(e,t,r),has:(e,t)=>!!gx(e,t)||n.has(e,t)}));class WR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ZR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function ZR(n){return n.getComponent()?.type==="VERSION"}const fy="@firebase/app",yx="0.14.6";const Ea=new h0("@firebase/app"),JR="@firebase/app-compat",eI="@firebase/analytics-compat",tI="@firebase/analytics",nI="@firebase/app-check-compat",rI="@firebase/app-check",sI="@firebase/auth",iI="@firebase/auth-compat",aI="@firebase/database",oI="@firebase/data-connect",lI="@firebase/database-compat",cI="@firebase/functions",uI="@firebase/functions-compat",hI="@firebase/installations",dI="@firebase/installations-compat",fI="@firebase/messaging",mI="@firebase/messaging-compat",pI="@firebase/performance",gI="@firebase/performance-compat",yI="@firebase/remote-config",vI="@firebase/remote-config-compat",bI="@firebase/storage",_I="@firebase/storage-compat",xI="@firebase/firestore",EI="@firebase/ai",wI="@firebase/firestore-compat",TI="firebase",AI="12.6.0";const my="[DEFAULT]",SI={[fy]:"fire-core",[JR]:"fire-core-compat",[tI]:"fire-analytics",[eI]:"fire-analytics-compat",[rI]:"fire-app-check",[nI]:"fire-app-check-compat",[sI]:"fire-auth",[iI]:"fire-auth-compat",[aI]:"fire-rtdb",[oI]:"fire-data-connect",[lI]:"fire-rtdb-compat",[cI]:"fire-fn",[uI]:"fire-fn-compat",[hI]:"fire-iid",[dI]:"fire-iid-compat",[fI]:"fire-fcm",[mI]:"fire-fcm-compat",[pI]:"fire-perf",[gI]:"fire-perf-compat",[yI]:"fire-rc",[vI]:"fire-rc-compat",[bI]:"fire-gcs",[_I]:"fire-gcs-compat",[xI]:"fire-fst",[wI]:"fire-fst-compat",[EI]:"fire-vertex","fire-js":"fire-js",[TI]:"fire-js-all"};const Nf=new Map,NI=new Map,py=new Map;function vx(n,e){try{n.container.addComponent(e)}catch(t){Ea.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xc(n){const e=n.name;if(py.has(e))return Ea.debug(`There were multiple attempts to register component ${e}.`),!1;py.set(e,n);for(const t of Nf.values())vx(t,n);for(const t of NI.values())vx(t,n);return!0}function f0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function rs(n){return n==null?!1:n.settings!==void 0}const CI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vo=new yh("app","Firebase",CI);class RI{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ll("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vo.create("app-deleted",{appName:this._name})}}const Uc=AI;function _T(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:my,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw vo.create("bad-app-name",{appName:String(a)});if(t||(t=mT()),!t)throw vo.create("no-options");const l=Nf.get(a);if(l){if(xa(t,l.options)&&xa(r,l.config))return l;throw vo.create("duplicate-app",{appName:a})}const c=new kR(a);for(const m of py.values())c.addComponent(m);const d=new RI(t,r,c);return Nf.set(a,d),d}function xT(n=my){const e=Nf.get(n);if(!e&&n===my&&mT())return _T();if(!e)throw vo.create("no-app",{appName:n});return e}function bo(n,e,t){let r=SI[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ea.warn(c.join(" "));return}xc(new ll(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const II="firebase-heartbeat-database",jI=1,th="firebase-heartbeat-store";let Ug=null;function ET(){return Ug||(Ug=QR(II,jI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(th)}catch(t){console.warn(t)}}}}).catch(n=>{throw vo.create("idb-open",{originalErrorMessage:n.message})})),Ug}async function OI(n){try{const t=(await ET()).transaction(th),r=await t.objectStore(th).get(wT(n));return await t.done,r}catch(e){if(e instanceof Ca)Ea.warn(e.message);else{const t=vo.create("idb-get",{originalErrorMessage:e?.message});Ea.warn(t.message)}}}async function bx(n,e){try{const r=(await ET()).transaction(th,"readwrite");await r.objectStore(th).put(e,wT(n)),await r.done}catch(t){if(t instanceof Ca)Ea.warn(t.message);else{const r=vo.create("idb-set",{originalErrorMessage:t?.message});Ea.warn(r.message)}}}function wT(n){return`${n.name}!${n.options.appId}`}const DI=1024,LI=30;class kI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new PI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_x();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>LI){const a=UI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ea.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_x(),{heartbeatsToSend:t,unsentEntries:r}=MI(this._heartbeatsCache.heartbeats),a=Sf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ea.warn(e),""}}}function _x(){return new Date().toISOString().substring(0,10)}function MI(n,e=DI){const t=[];let r=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),xx(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),xx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class PI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wR()?TR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await OI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function xx(n){return Sf(JSON.stringify({version:2,heartbeats:n})).length}function UI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function VI(n){xc(new ll("platform-logger",e=>new WR(e),"PRIVATE")),xc(new ll("heartbeat",e=>new kI(e),"PRIVATE")),bo(fy,yx,n),bo(fy,yx,"esm2020"),bo("fire-js","")}VI("");var qI="firebase",BI="12.6.0";bo(qI,BI,"app");function TT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zI=TT,AT=new yh("auth","Firebase",TT());const Cf=new h0("@firebase/auth");function HI(n,...e){Cf.logLevel<=ot.WARN&&Cf.warn(`Auth (${Uc}): ${n}`,...e)}function mf(n,...e){Cf.logLevel<=ot.ERROR&&Cf.error(`Auth (${Uc}): ${n}`,...e)}function ks(n,...e){throw p0(n,...e)}function ti(n,...e){return p0(n,...e)}function m0(n,e,t){const r={...zI(),[e]:t};return new yh("auth","Firebase",r).create(e,{appName:n.name})}function ba(n){return m0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FI(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ks(n,"argument-error"),m0(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function p0(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return AT.create(n,...e)}function Ve(n,e,...t){if(!n)throw p0(e,...t)}function ga(n){const e="INTERNAL ASSERTION FAILED: "+n;throw mf(e),new Error(e)}function wa(n,e){n||ga(e)}function gy(){return typeof self<"u"&&self.location?.href||""}function GI(){return Ex()==="http:"||Ex()==="https:"}function Ex(){return typeof self<"u"&&self.location?.protocol||null}function $I(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GI()||bR()||"connection"in navigator)?navigator.onLine:!0}function KI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class bh{constructor(e,t){this.shortDelay=e,this.longDelay=t,wa(t>e,"Short delay should be less than long delay!"),this.isMobile=gR()||_R()}get(){return $I()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function g0(n,e){wa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class ST{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ga("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ga("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ga("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const QI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const YI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XI=new bh(3e4,6e4);function Oo(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ra(n,e,t,r,a={}){return NT(n,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=vh({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...l};return vR()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Pc(n.emulatorConfig.host)&&(g.credentials="include"),ST.fetch()(await CT(n,n.config.apiHost,t,d),g)})}async function NT(n,e,t){n._canInitEmulator=!1;const r={...QI,...e};try{const a=new ZI(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Kd(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kd(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Kd(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Kd(n,"user-disabled",c);const v=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw m0(n,v,g);ks(n,v)}}catch(a){if(a instanceof Ca)throw a;ks(n,"network-request-failed",{message:String(a)})}}async function _h(n,e,t,r,a={}){const l=await Ra(n,e,t,r,a);return"mfaPendingCredential"in l&&ks(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function CT(n,e,t,r){const a=`${e}${t}?${r}`,l=n,c=l.config.emulator?g0(n.config,a):`${n.config.apiScheme}://${a}`;return YI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function WI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ti(this.auth,"network-request-failed")),XI.get())})}}function Kd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=ti(n,e,r);return a.customData._tokenResponse=t,a}function wx(n){return n!==void 0&&n.enterprise!==void 0}class JI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return WI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function e3(n,e){return Ra(n,"GET","/v2/recaptchaConfig",Oo(n,e))}async function t3(n,e){return Ra(n,"POST","/v1/accounts:delete",e)}async function Rf(n,e){return Ra(n,"POST","/v1/accounts:lookup",e)}function Ku(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function n3(n,e=!1){const t=Tn(n),r=await t.getIdToken(e),a=y0(r);Ve(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Ku(Vg(a.auth_time)),issuedAtTime:Ku(Vg(a.iat)),expirationTime:Ku(Vg(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Vg(n){return Number(n)*1e3}function y0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return mf("JWT malformed, contained fewer than 3 sections"),null;try{const a=dT(t);return a?JSON.parse(a):(mf("Failed to decode base64 JWT payload"),null)}catch(a){return mf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Tx(n){const e=y0(n);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ec(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ca&&r3(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function r3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class s3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class yy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function If(n){const e=n.auth,t=await n.getIdToken(),r=await Ec(n,Rf(e,{idToken:t}));Ve(r?.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?RT(a.providerUserInfo):[],c=a3(n.providerData,l),d=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!c?.length,g=d?m:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new yy(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function i3(n){const e=Tn(n);await If(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function a3(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function RT(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function o3(n,e){const t=await NT(n,{},async()=>{const r=vh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await CT(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:r};return n.emulatorConfig&&Pc(n.emulatorConfig.host)&&(m.credentials="include"),ST.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function l3(n,e){return Ra(n,"POST","/v2/accounts:revokeToken",Oo(n,e))}class mc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=Tx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await o3(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new mc;return r&&(Ve(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Ve(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ve(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mc,this.toJSON())}_performRefresh(){return ga("not implemented")}}function ao(n,e){Ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ei{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new s3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new yy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Ec(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return n3(this,e)}reload(){return i3(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ei({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await If(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rs(this.auth.app))return Promise.reject(ba(this.auth));const e=await this.getIdToken();return await Ec(this,t3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:x,isAnonymous:A,providerData:C,stsTokenManager:D}=t;Ve(E&&D,e,"internal-error");const R=mc.fromJSON(this.name,D);Ve(typeof E=="string",e,"internal-error"),ao(r,e.name),ao(a,e.name),Ve(typeof x=="boolean",e,"internal-error"),Ve(typeof A=="boolean",e,"internal-error"),ao(l,e.name),ao(c,e.name),ao(d,e.name),ao(m,e.name),ao(g,e.name),ao(v,e.name);const U=new ei({uid:E,auth:e,email:a,emailVerified:x,displayName:r,isAnonymous:A,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:R,createdAt:g,lastLoginAt:v});return C&&Array.isArray(C)&&(U.providerData=C.map(F=>({...F}))),m&&(U._redirectEventId=m),U}static async _fromIdTokenResponse(e,t,r=!1){const a=new mc;a.updateFromServerResponse(t);const l=new ei({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await If(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Ve(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?RT(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new mc;d.updateFromIdToken(r);const m=new ei({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new yy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,g),m}}const Ax=new Map;function ya(n){wa(n instanceof Function,"Expected a class definition");let e=Ax.get(n);return e?(wa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ax.set(n,e),e)}class IT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IT.type="NONE";const Sx=IT;function pf(n,e,t){return`firebase:${n}:${e}:${t}`}class pc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=pf(this.userKey,a.apiKey,l),this.fullPersistenceKey=pf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Rf(this.auth,{idToken:e}).catch(()=>{});return t?ei._fromGetAccountInfoResponse(this.auth,t,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new pc(ya(Sx),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||ya(Sx);const c=pf(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let E;if(typeof v=="string"){const x=await Rf(e,{idToken:v}).catch(()=>{});if(!x)break;E=await ei._fromGetAccountInfoResponse(e,x,v)}else E=ei._fromJSON(e,v);g!==l&&(d=E),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new pc(l,e,r):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new pc(l,e,r))}}function Nx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MT(e))return"Blackberry";if(PT(e))return"Webos";if(OT(e))return"Safari";if((e.includes("chrome/")||DT(e))&&!e.includes("edge/"))return"Chrome";if(kT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function jT(n=ur()){return/firefox\//i.test(n)}function OT(n=ur()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DT(n=ur()){return/crios\//i.test(n)}function LT(n=ur()){return/iemobile/i.test(n)}function kT(n=ur()){return/android/i.test(n)}function MT(n=ur()){return/blackberry/i.test(n)}function PT(n=ur()){return/webos/i.test(n)}function v0(n=ur()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function c3(n=ur()){return v0(n)&&!!window.navigator?.standalone}function u3(){return xR()&&document.documentMode===10}function UT(n=ur()){return v0(n)||kT(n)||PT(n)||MT(n)||/windows phone/i.test(n)||LT(n)}function VT(n,e=[]){let t;switch(n){case"Browser":t=Nx(ur());break;case"Worker":t=`${Nx(ur())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Uc}/${r}`}class h3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function d3(n,e={}){return Ra(n,"GET","/v2/passwordPolicy",Oo(n,e))}const f3=6;class m3{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??f3,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class p3{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cx(this),this.idTokenSubscription=new Cx(this),this.beforeStateQueue=new h3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ya(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await pc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Rf(this,{idToken:e}),r=await ei._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(rs(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(r=d.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await If(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rs(this.app))return Promise.reject(ba(this));const t=e?Tn(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rs(this.app)?Promise.reject(ba(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rs(this.app)?Promise.reject(ba(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ya(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await d3(this),t=new m3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await l3(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ya(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await pc.create(this,[ya(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(rs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&HI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Do(n){return Tn(n)}class Cx{constructor(e){this.auth=e,this.observer=null,this.addObserver=RR(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let em={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function g3(n){em=n}function qT(n){return em.loadJS(n)}function y3(){return em.recaptchaEnterpriseScript}function v3(){return em.gapiScript}function b3(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class _3{constructor(){this.enterprise=new x3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class x3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const E3="recaptcha-enterprise",BT="NO_RECAPTCHA";class w3{constructor(e){this.type=E3,this.auth=Do(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{e3(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new JI(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{d(m)})})}function a(l,c,d){const m=window.grecaptcha;wx(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(BT)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _3().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!t&&wx(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=y3();m.length!==0&&(m+=d),qT(m).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function Rx(n,e,t,r=!1,a=!1){const l=new w3(n);let c;if(a)c=BT;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function vy(n,e,t,r,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Rx(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Rx(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}function T3(n,e){const t=f0(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(xa(l,e??{}))return a;ks(a,"already-initialized")}return t.initialize({options:e})}function A3(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ya);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function S3(n,e,t){const r=Do(n);Ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=zT(e),{host:c,port:d}=N3(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ve(xa(g,r.config.emulator)&&xa(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Pc(c)?(gT(`${l}//${c}${m}`),yT("Auth",!0)):C3()}function zT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function N3(n){const e=zT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Ix(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Ix(c)}}}function Ix(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function C3(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class b0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ga("not implemented")}_getIdTokenResponse(e){return ga("not implemented")}_linkToIdToken(e,t){return ga("not implemented")}_getReauthenticationResolver(e){return ga("not implemented")}}async function R3(n,e){return Ra(n,"POST","/v1/accounts:signUp",e)}async function I3(n,e){return _h(n,"POST","/v1/accounts:signInWithPassword",Oo(n,e))}async function j3(n,e){return _h(n,"POST","/v1/accounts:signInWithEmailLink",Oo(n,e))}async function O3(n,e){return _h(n,"POST","/v1/accounts:signInWithEmailLink",Oo(n,e))}class nh extends b0{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new nh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new nh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vy(e,t,"signInWithPassword",I3);case"emailLink":return j3(e,{email:this._email,oobCode:this._password});default:ks(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vy(e,r,"signUpPassword",R3);case"emailLink":return O3(e,{idToken:t,email:this._email,oobCode:this._password});default:ks(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function gc(n,e){return _h(n,"POST","/v1/accounts:signInWithIdp",Oo(n,e))}const D3="http://localhost";class cl extends b0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new cl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ks("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new cl(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return gc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,gc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,gc(e,t)}buildRequest(){const e={requestUri:D3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vh(t)}return e}}function L3(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function k3(n){const e=Mu(Pu(n)).link,t=e?Mu(Pu(e)).deep_link_id:null,r=Mu(Pu(n)).deep_link_id;return(r?Mu(Pu(r)).link:null)||r||t||e||n}class _0{constructor(e){const t=Mu(Pu(e)),r=t.apiKey??null,a=t.oobCode??null,l=L3(t.mode??null);Ve(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=k3(e);try{return new _0(t)}catch{return null}}}class Vc{constructor(){this.providerId=Vc.PROVIDER_ID}static credential(e,t){return nh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=_0.parseLink(t);return Ve(r,"argument-error"),nh._fromEmailAndCode(e,r.code,r.tenantId)}}Vc.PROVIDER_ID="password";Vc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class x0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class xh extends x0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class lo extends xh{constructor(){super("facebook.com")}static credential(e){return cl._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lo.credential(e.oauthAccessToken)}catch{return null}}}lo.FACEBOOK_SIGN_IN_METHOD="facebook.com";lo.PROVIDER_ID="facebook.com";class Ti extends xh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return cl._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ti.credential(t,r)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";class co extends xh{constructor(){super("github.com")}static credential(e){return cl._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return co.credential(e.oauthAccessToken)}catch{return null}}}co.GITHUB_SIGN_IN_METHOD="github.com";co.PROVIDER_ID="github.com";class uo extends xh{constructor(){super("twitter.com")}static credential(e,t){return cl._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return uo.credential(t,r)}catch{return null}}}uo.TWITTER_SIGN_IN_METHOD="twitter.com";uo.PROVIDER_ID="twitter.com";async function M3(n,e){return _h(n,"POST","/v1/accounts:signUp",Oo(n,e))}class ul{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await ei._fromIdTokenResponse(e,r,a),c=jx(r);return new ul({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=jx(r);return new ul({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function jx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class jf extends Ca{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,jf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new jf(e,t,r,a)}}function HT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?jf._fromErrorAndOperation(n,l,e,r):l})}async function P3(n,e,t=!1){const r=await Ec(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ul._forOperation(n,"link",r)}async function U3(n,e,t=!1){const{auth:r}=n;if(rs(r.app))return Promise.reject(ba(r));const a="reauthenticate";try{const l=await Ec(n,HT(r,a,e,n),t);Ve(l.idToken,r,"internal-error");const c=y0(l.idToken);Ve(c,r,"internal-error");const{sub:d}=c;return Ve(n.uid===d,r,"user-mismatch"),ul._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&ks(r,"user-mismatch"),l}}async function FT(n,e,t=!1){if(rs(n.app))return Promise.reject(ba(n));const r="signIn",a=await HT(n,r,e),l=await ul._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function V3(n,e){return FT(Do(n),e)}async function GT(n){const e=Do(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function q3(n,e,t){if(rs(n.app))return Promise.reject(ba(n));const r=Do(n),c=await vy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",M3).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&GT(n),m}),d=await ul._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function B3(n,e,t){return rs(n.app)?Promise.reject(ba(n)):V3(Tn(n),Vc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&GT(n),r})}async function z3(n,e){return Ra(n,"POST","/v1/accounts:update",e)}async function H3(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Tn(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Ec(r,z3(r.auth,l));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const d=r.providerData.find(({providerId:m})=>m==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function F3(n,e,t,r){return Tn(n).onIdTokenChanged(e,t,r)}function G3(n,e,t){return Tn(n).beforeAuthStateChanged(e,t)}function Eh(n,e,t,r){return Tn(n).onAuthStateChanged(e,t,r)}function $3(n){return Tn(n).signOut()}const Of="__sak";class $T{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Of,"1"),this.storage.removeItem(Of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const K3=1e3,Q3=10;class KT extends $T{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);u3()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Q3):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},K3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}KT.type="LOCAL";const Y3=KT;class QT extends $T{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}QT.type="SESSION";const YT=QT;function X3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class tm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new tm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await X3(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tm.receivers=[];function E0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class W3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=E0("",20);a.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(E){const x=E;if(x.data.eventId===g)switch(x.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(x.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ai(){return window}function Z3(n){Ai().location.href=n}function XT(){return typeof Ai().WorkerGlobalScope<"u"&&typeof Ai().importScripts=="function"}async function J3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function e6(){return navigator?.serviceWorker?.controller||null}function t6(){return XT()?self:null}const WT="firebaseLocalStorageDb",n6=1,Df="firebaseLocalStorage",ZT="fbase_key";class wh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function nm(n,e){return n.transaction([Df],e?"readwrite":"readonly").objectStore(Df)}function r6(){const n=indexedDB.deleteDatabase(WT);return new wh(n).toPromise()}function by(){const n=indexedDB.open(WT,n6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Df,{keyPath:ZT})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Df)?e(r):(r.close(),await r6(),e(await by()))})})}async function Ox(n,e,t){const r=nm(n,!0).put({[ZT]:e,value:t});return new wh(r).toPromise()}async function s6(n,e){const t=nm(n,!1).get(e),r=await new wh(t).toPromise();return r===void 0?null:r.value}function Dx(n,e){const t=nm(n,!0).delete(e);return new wh(t).toPromise()}const i6=800,a6=3;class JT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await by(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>a6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tm._getInstance(t6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await J3(),!this.activeServiceWorker)return;this.sender=new W3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||e6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await by();return await Ox(e,Of,"1"),await Dx(e,Of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ox(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>s6(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Dx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=nm(a,!1).getAll();return new wh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JT.type="LOCAL";const o6=JT;new bh(3e4,6e4);function eA(n,e){return e?ya(e):(Ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class w0 extends b0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return gc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return gc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function l6(n){return FT(n.auth,new w0(n),n.bypassAuthState)}function c6(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),U3(t,new w0(n),n.bypassAuthState)}async function u6(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),P3(t,new w0(n),n.bypassAuthState)}class tA{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return l6;case"linkViaPopup":case"linkViaRedirect":return u6;case"reauthViaPopup":case"reauthViaRedirect":return c6;default:ks(this.auth,"internal-error")}}resolve(e){wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const h6=new bh(2e3,1e4);async function nA(n,e,t){if(rs(n.app))return Promise.reject(ti(n,"operation-not-supported-in-this-environment"));const r=Do(n);FI(n,e,x0);const a=eA(r,t);return new sl(r,"signInViaPopup",e,a).executeNotNull()}class sl extends tA{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,sl.currentPopupAction&&sl.currentPopupAction.cancel(),sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){wa(this.filter.length===1,"Popup operations only handle one event");const e=E0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,h6.get())};e()}}sl.currentPopupAction=null;const d6="pendingRedirect",gf=new Map;class f6 extends tA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=gf.get(this.auth._key());if(!e){try{const r=await m6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}gf.set(this.auth._key(),e)}return this.bypassAuthState||gf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function m6(n,e){const t=y6(e),r=g6(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function p6(n,e){gf.set(n._key(),e)}function g6(n){return ya(n._redirectPersistence)}function y6(n){return pf(d6,n.config.apiKey,n.name)}async function v6(n,e,t=!1){if(rs(n.app))return Promise.reject(ba(n));const r=Do(n),a=eA(r,e),c=await new f6(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const b6=600*1e3;class _6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!x6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!rA(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ti(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=b6&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lx(e))}saveEventToCache(e){this.cachedEventUids.add(Lx(e)),this.lastProcessedEventTime=Date.now()}}function Lx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function rA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function x6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rA(n);default:return!1}}async function E6(n,e={}){return Ra(n,"GET","/v1/projects",e)}const w6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T6=/^https?/;async function A6(n){if(n.config.emulator)return;const{authorizedDomains:e}=await E6(n);for(const t of e)try{if(S6(t))return}catch{}ks(n,"unauthorized-domain")}function S6(n){const e=gy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!T6.test(t))return!1;if(w6.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const N6=new bh(3e4,6e4);function kx(){const n=Ai().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function C6(n){return new Promise((e,t)=>{function r(){kx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kx(),t(ti(n,"network-request-failed"))},timeout:N6.get()})}if(Ai().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ai().gapi?.load)r();else{const a=b3("iframefcb");return Ai()[a]=()=>{gapi.load?r():t(ti(n,"network-request-failed"))},qT(`${v3()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw yf=null,e})}let yf=null;function R6(n){return yf=yf||C6(n),yf}const I6=new bh(5e3,15e3),j6="__/auth/iframe",O6="emulator/auth/iframe",D6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k6(n){const e=n.config;Ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?g0(e,O6):`https://${n.config.authDomain}/${j6}`,r={apiKey:e.apiKey,appName:n.name,v:Uc},a=L6.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${vh(r).slice(1)}`}async function M6(n){const e=await R6(n),t=Ai().gapi;return Ve(t,n,"internal-error"),e.open({where:document.body,url:k6(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D6,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=ti(n,"network-request-failed"),d=Ai().setTimeout(()=>{l(c)},I6.get());function m(){Ai().clearTimeout(d),a(r)}r.ping(m).then(m,()=>{l(c)})}))}const P6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},U6=500,V6=600,q6="_blank",B6="http://localhost";class Mx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function z6(n,e,t,r=U6,a=V6){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m={...P6,width:r.toString(),height:a.toString(),top:l,left:c},g=ur().toLowerCase();t&&(d=DT(g)?q6:t),jT(g)&&(e=e||B6,m.scrollbars="yes");const v=Object.entries(m).reduce((x,[A,C])=>`${x}${A}=${C},`,"");if(c3(g)&&d!=="_self")return H6(e||"",d),new Mx(null);const E=window.open(e||"",d,v);Ve(E,n,"popup-blocked");try{E.focus()}catch{}return new Mx(E)}function H6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const F6="__/auth/handler",G6="emulator/auth/handler",$6=encodeURIComponent("fac");async function Px(n,e,t,r,a,l){Ve(n.config.authDomain,n,"auth-domain-config-required"),Ve(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Uc,eventId:a};if(e instanceof x0){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",CR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof xh){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const m=await n._getAppCheckToken(),g=m?`#${$6}=${encodeURIComponent(m)}`:"";return`${K6(n)}?${vh(d).slice(1)}${g}`}function K6({config:n}){return n.emulator?g0(n,G6):`https://${n.authDomain}/${F6}`}const qg="webStorageSupport";class Q6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YT,this._completeRedirectFn=v6,this._overrideRedirectResult=p6}async _openPopup(e,t,r,a){wa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Px(e,t,r,gy(),a);return z6(e,l,E0())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await Px(e,t,r,gy(),a);return Z3(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(wa(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await M6(e),r=new _6(e);return t.register("authEvent",a=>(Ve(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qg,{type:qg},a=>{const l=a?.[0]?.[qg];l!==void 0&&t(!!l),ks(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=A6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return UT()||OT()||v0()}}const Y6=Q6;var Ux="@firebase/auth",Vx="1.11.1";class X6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function W6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Z6(n){xc(new ll("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Ve(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VT(n)},g=new p3(r,a,l,m);return A3(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),xc(new ll("auth-internal",e=>{const t=Do(e.getProvider("auth").getImmediate());return(r=>new X6(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bo(Ux,Vx,W6(n)),bo(Ux,Vx,"esm2020")}const J6=300,ej=pT("authIdTokenMaxAge")||J6;let qx=null;const tj=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>ej)return;const a=t?.token;qx!==a&&(qx=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function nj(n=xT()){const e=f0(n,"auth");if(e.isInitialized())return e.getImmediate();const t=T3(n,{popupRedirectResolver:Y6,persistence:[o6,Y3,YT]}),r=pT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=tj(l.toString());G3(t,c,()=>c(t.currentUser)),F3(t,d=>c(d))}}const a=fT("auth");return a&&S3(t,`http://${a}`),t}function rj(){return document.getElementsByTagName("head")?.[0]??document}g3({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=ti("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",rj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Z6("Browser");var Bx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _o,sA;(function(){var n;function e(L,k){function V(){}V.prototype=k.prototype,L.F=k.prototype,L.prototype=new V,L.prototype.constructor=L,L.D=function(G,S,M){for(var N=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)N[ge-2]=arguments[ge];return k.prototype[S].apply(G,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(L,k,V){V||(V=0);const G=Array(16);if(typeof k=="string")for(var S=0;S<16;++S)G[S]=k.charCodeAt(V++)|k.charCodeAt(V++)<<8|k.charCodeAt(V++)<<16|k.charCodeAt(V++)<<24;else for(S=0;S<16;++S)G[S]=k[V++]|k[V++]<<8|k[V++]<<16|k[V++]<<24;k=L.g[0],V=L.g[1],S=L.g[2];let M=L.g[3],N;N=k+(M^V&(S^M))+G[0]+3614090360&4294967295,k=V+(N<<7&4294967295|N>>>25),N=M+(S^k&(V^S))+G[1]+3905402710&4294967295,M=k+(N<<12&4294967295|N>>>20),N=S+(V^M&(k^V))+G[2]+606105819&4294967295,S=M+(N<<17&4294967295|N>>>15),N=V+(k^S&(M^k))+G[3]+3250441966&4294967295,V=S+(N<<22&4294967295|N>>>10),N=k+(M^V&(S^M))+G[4]+4118548399&4294967295,k=V+(N<<7&4294967295|N>>>25),N=M+(S^k&(V^S))+G[5]+1200080426&4294967295,M=k+(N<<12&4294967295|N>>>20),N=S+(V^M&(k^V))+G[6]+2821735955&4294967295,S=M+(N<<17&4294967295|N>>>15),N=V+(k^S&(M^k))+G[7]+4249261313&4294967295,V=S+(N<<22&4294967295|N>>>10),N=k+(M^V&(S^M))+G[8]+1770035416&4294967295,k=V+(N<<7&4294967295|N>>>25),N=M+(S^k&(V^S))+G[9]+2336552879&4294967295,M=k+(N<<12&4294967295|N>>>20),N=S+(V^M&(k^V))+G[10]+4294925233&4294967295,S=M+(N<<17&4294967295|N>>>15),N=V+(k^S&(M^k))+G[11]+2304563134&4294967295,V=S+(N<<22&4294967295|N>>>10),N=k+(M^V&(S^M))+G[12]+1804603682&4294967295,k=V+(N<<7&4294967295|N>>>25),N=M+(S^k&(V^S))+G[13]+4254626195&4294967295,M=k+(N<<12&4294967295|N>>>20),N=S+(V^M&(k^V))+G[14]+2792965006&4294967295,S=M+(N<<17&4294967295|N>>>15),N=V+(k^S&(M^k))+G[15]+1236535329&4294967295,V=S+(N<<22&4294967295|N>>>10),N=k+(S^M&(V^S))+G[1]+4129170786&4294967295,k=V+(N<<5&4294967295|N>>>27),N=M+(V^S&(k^V))+G[6]+3225465664&4294967295,M=k+(N<<9&4294967295|N>>>23),N=S+(k^V&(M^k))+G[11]+643717713&4294967295,S=M+(N<<14&4294967295|N>>>18),N=V+(M^k&(S^M))+G[0]+3921069994&4294967295,V=S+(N<<20&4294967295|N>>>12),N=k+(S^M&(V^S))+G[5]+3593408605&4294967295,k=V+(N<<5&4294967295|N>>>27),N=M+(V^S&(k^V))+G[10]+38016083&4294967295,M=k+(N<<9&4294967295|N>>>23),N=S+(k^V&(M^k))+G[15]+3634488961&4294967295,S=M+(N<<14&4294967295|N>>>18),N=V+(M^k&(S^M))+G[4]+3889429448&4294967295,V=S+(N<<20&4294967295|N>>>12),N=k+(S^M&(V^S))+G[9]+568446438&4294967295,k=V+(N<<5&4294967295|N>>>27),N=M+(V^S&(k^V))+G[14]+3275163606&4294967295,M=k+(N<<9&4294967295|N>>>23),N=S+(k^V&(M^k))+G[3]+4107603335&4294967295,S=M+(N<<14&4294967295|N>>>18),N=V+(M^k&(S^M))+G[8]+1163531501&4294967295,V=S+(N<<20&4294967295|N>>>12),N=k+(S^M&(V^S))+G[13]+2850285829&4294967295,k=V+(N<<5&4294967295|N>>>27),N=M+(V^S&(k^V))+G[2]+4243563512&4294967295,M=k+(N<<9&4294967295|N>>>23),N=S+(k^V&(M^k))+G[7]+1735328473&4294967295,S=M+(N<<14&4294967295|N>>>18),N=V+(M^k&(S^M))+G[12]+2368359562&4294967295,V=S+(N<<20&4294967295|N>>>12),N=k+(V^S^M)+G[5]+4294588738&4294967295,k=V+(N<<4&4294967295|N>>>28),N=M+(k^V^S)+G[8]+2272392833&4294967295,M=k+(N<<11&4294967295|N>>>21),N=S+(M^k^V)+G[11]+1839030562&4294967295,S=M+(N<<16&4294967295|N>>>16),N=V+(S^M^k)+G[14]+4259657740&4294967295,V=S+(N<<23&4294967295|N>>>9),N=k+(V^S^M)+G[1]+2763975236&4294967295,k=V+(N<<4&4294967295|N>>>28),N=M+(k^V^S)+G[4]+1272893353&4294967295,M=k+(N<<11&4294967295|N>>>21),N=S+(M^k^V)+G[7]+4139469664&4294967295,S=M+(N<<16&4294967295|N>>>16),N=V+(S^M^k)+G[10]+3200236656&4294967295,V=S+(N<<23&4294967295|N>>>9),N=k+(V^S^M)+G[13]+681279174&4294967295,k=V+(N<<4&4294967295|N>>>28),N=M+(k^V^S)+G[0]+3936430074&4294967295,M=k+(N<<11&4294967295|N>>>21),N=S+(M^k^V)+G[3]+3572445317&4294967295,S=M+(N<<16&4294967295|N>>>16),N=V+(S^M^k)+G[6]+76029189&4294967295,V=S+(N<<23&4294967295|N>>>9),N=k+(V^S^M)+G[9]+3654602809&4294967295,k=V+(N<<4&4294967295|N>>>28),N=M+(k^V^S)+G[12]+3873151461&4294967295,M=k+(N<<11&4294967295|N>>>21),N=S+(M^k^V)+G[15]+530742520&4294967295,S=M+(N<<16&4294967295|N>>>16),N=V+(S^M^k)+G[2]+3299628645&4294967295,V=S+(N<<23&4294967295|N>>>9),N=k+(S^(V|~M))+G[0]+4096336452&4294967295,k=V+(N<<6&4294967295|N>>>26),N=M+(V^(k|~S))+G[7]+1126891415&4294967295,M=k+(N<<10&4294967295|N>>>22),N=S+(k^(M|~V))+G[14]+2878612391&4294967295,S=M+(N<<15&4294967295|N>>>17),N=V+(M^(S|~k))+G[5]+4237533241&4294967295,V=S+(N<<21&4294967295|N>>>11),N=k+(S^(V|~M))+G[12]+1700485571&4294967295,k=V+(N<<6&4294967295|N>>>26),N=M+(V^(k|~S))+G[3]+2399980690&4294967295,M=k+(N<<10&4294967295|N>>>22),N=S+(k^(M|~V))+G[10]+4293915773&4294967295,S=M+(N<<15&4294967295|N>>>17),N=V+(M^(S|~k))+G[1]+2240044497&4294967295,V=S+(N<<21&4294967295|N>>>11),N=k+(S^(V|~M))+G[8]+1873313359&4294967295,k=V+(N<<6&4294967295|N>>>26),N=M+(V^(k|~S))+G[15]+4264355552&4294967295,M=k+(N<<10&4294967295|N>>>22),N=S+(k^(M|~V))+G[6]+2734768916&4294967295,S=M+(N<<15&4294967295|N>>>17),N=V+(M^(S|~k))+G[13]+1309151649&4294967295,V=S+(N<<21&4294967295|N>>>11),N=k+(S^(V|~M))+G[4]+4149444226&4294967295,k=V+(N<<6&4294967295|N>>>26),N=M+(V^(k|~S))+G[11]+3174756917&4294967295,M=k+(N<<10&4294967295|N>>>22),N=S+(k^(M|~V))+G[2]+718787259&4294967295,S=M+(N<<15&4294967295|N>>>17),N=V+(M^(S|~k))+G[9]+3951481745&4294967295,L.g[0]=L.g[0]+k&4294967295,L.g[1]=L.g[1]+(S+(N<<21&4294967295|N>>>11))&4294967295,L.g[2]=L.g[2]+S&4294967295,L.g[3]=L.g[3]+M&4294967295}r.prototype.v=function(L,k){k===void 0&&(k=L.length);const V=k-this.blockSize,G=this.C;let S=this.h,M=0;for(;M<k;){if(S==0)for(;M<=V;)a(this,L,M),M+=this.blockSize;if(typeof L=="string"){for(;M<k;)if(G[S++]=L.charCodeAt(M++),S==this.blockSize){a(this,G),S=0;break}}else for(;M<k;)if(G[S++]=L[M++],S==this.blockSize){a(this,G),S=0;break}}this.h=S,this.o+=k},r.prototype.A=function(){var L=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);L[0]=128;for(var k=1;k<L.length-8;++k)L[k]=0;k=this.o*8;for(var V=L.length-8;V<L.length;++V)L[V]=k&255,k/=256;for(this.v(L),L=Array(16),k=0,V=0;V<4;++V)for(let G=0;G<32;G+=8)L[k++]=this.g[V]>>>G&255;return L};function l(L,k){var V=d;return Object.prototype.hasOwnProperty.call(V,L)?V[L]:V[L]=k(L)}function c(L,k){this.h=k;const V=[];let G=!0;for(let S=L.length-1;S>=0;S--){const M=L[S]|0;G&&M==k||(V[S]=M,G=!1)}this.g=V}var d={};function m(L){return-128<=L&&L<128?l(L,function(k){return new c([k|0],k<0?-1:0)}):new c([L|0],L<0?-1:0)}function g(L){if(isNaN(L)||!isFinite(L))return E;if(L<0)return R(g(-L));const k=[];let V=1;for(let G=0;L>=V;G++)k[G]=L/V|0,V*=4294967296;return new c(k,0)}function v(L,k){if(L.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(L.charAt(0)=="-")return R(v(L.substring(1),k));if(L.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=g(Math.pow(k,8));let G=E;for(let M=0;M<L.length;M+=8){var S=Math.min(8,L.length-M);const N=parseInt(L.substring(M,M+S),k);S<8?(S=g(Math.pow(k,S)),G=G.j(S).add(g(N))):(G=G.j(V),G=G.add(g(N)))}return G}var E=m(0),x=m(1),A=m(16777216);n=c.prototype,n.m=function(){if(D(this))return-R(this).m();let L=0,k=1;for(let V=0;V<this.g.length;V++){const G=this.i(V);L+=(G>=0?G:4294967296+G)*k,k*=4294967296}return L},n.toString=function(L){if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(C(this))return"0";if(D(this))return"-"+R(this).toString(L);const k=g(Math.pow(L,6));var V=this;let G="";for(;;){const S=Q(V,k).g;V=U(V,S.j(k));let M=((V.g.length>0?V.g[0]:V.h)>>>0).toString(L);if(V=S,C(V))return M+G;for(;M.length<6;)M="0"+M;G=M+G}},n.i=function(L){return L<0?0:L<this.g.length?this.g[L]:this.h};function C(L){if(L.h!=0)return!1;for(let k=0;k<L.g.length;k++)if(L.g[k]!=0)return!1;return!0}function D(L){return L.h==-1}n.l=function(L){return L=U(this,L),D(L)?-1:C(L)?0:1};function R(L){const k=L.g.length,V=[];for(let G=0;G<k;G++)V[G]=~L.g[G];return new c(V,~L.h).add(x)}n.abs=function(){return D(this)?R(this):this},n.add=function(L){const k=Math.max(this.g.length,L.g.length),V=[];let G=0;for(let S=0;S<=k;S++){let M=G+(this.i(S)&65535)+(L.i(S)&65535),N=(M>>>16)+(this.i(S)>>>16)+(L.i(S)>>>16);G=N>>>16,M&=65535,N&=65535,V[S]=N<<16|M}return new c(V,V[V.length-1]&-2147483648?-1:0)};function U(L,k){return L.add(R(k))}n.j=function(L){if(C(this)||C(L))return E;if(D(this))return D(L)?R(this).j(R(L)):R(R(this).j(L));if(D(L))return R(this.j(R(L)));if(this.l(A)<0&&L.l(A)<0)return g(this.m()*L.m());const k=this.g.length+L.g.length,V=[];for(var G=0;G<2*k;G++)V[G]=0;for(G=0;G<this.g.length;G++)for(let S=0;S<L.g.length;S++){const M=this.i(G)>>>16,N=this.i(G)&65535,ge=L.i(S)>>>16,pe=L.i(S)&65535;V[2*G+2*S]+=N*pe,F(V,2*G+2*S),V[2*G+2*S+1]+=M*pe,F(V,2*G+2*S+1),V[2*G+2*S+1]+=N*ge,F(V,2*G+2*S+1),V[2*G+2*S+2]+=M*ge,F(V,2*G+2*S+2)}for(L=0;L<k;L++)V[L]=V[2*L+1]<<16|V[2*L];for(L=k;L<2*k;L++)V[L]=0;return new c(V,0)};function F(L,k){for(;(L[k]&65535)!=L[k];)L[k+1]+=L[k]>>>16,L[k]&=65535,k++}function Y(L,k){this.g=L,this.h=k}function Q(L,k){if(C(k))throw Error("division by zero");if(C(L))return new Y(E,E);if(D(L))return k=Q(R(L),k),new Y(R(k.g),R(k.h));if(D(k))return k=Q(L,R(k)),new Y(R(k.g),k.h);if(L.g.length>30){if(D(L)||D(k))throw Error("slowDivide_ only works with positive integers.");for(var V=x,G=k;G.l(L)<=0;)V=ie(V),G=ie(G);var S=ve(V,1),M=ve(G,1);for(G=ve(G,2),V=ve(V,2);!C(G);){var N=M.add(G);N.l(L)<=0&&(S=S.add(V),M=N),G=ve(G,1),V=ve(V,1)}return k=U(L,S.j(k)),new Y(S,k)}for(S=E;L.l(k)>=0;){for(V=Math.max(1,Math.floor(L.m()/k.m())),G=Math.ceil(Math.log(V)/Math.LN2),G=G<=48?1:Math.pow(2,G-48),M=g(V),N=M.j(k);D(N)||N.l(L)>0;)V-=G,M=g(V),N=M.j(k);C(M)&&(M=x),S=S.add(M),L=U(L,N)}return new Y(S,L)}n.B=function(L){return Q(this,L).h},n.and=function(L){const k=Math.max(this.g.length,L.g.length),V=[];for(let G=0;G<k;G++)V[G]=this.i(G)&L.i(G);return new c(V,this.h&L.h)},n.or=function(L){const k=Math.max(this.g.length,L.g.length),V=[];for(let G=0;G<k;G++)V[G]=this.i(G)|L.i(G);return new c(V,this.h|L.h)},n.xor=function(L){const k=Math.max(this.g.length,L.g.length),V=[];for(let G=0;G<k;G++)V[G]=this.i(G)^L.i(G);return new c(V,this.h^L.h)};function ie(L){const k=L.g.length+1,V=[];for(let G=0;G<k;G++)V[G]=L.i(G)<<1|L.i(G-1)>>>31;return new c(V,L.h)}function ve(L,k){const V=k>>5;k%=32;const G=L.g.length-V,S=[];for(let M=0;M<G;M++)S[M]=k>0?L.i(M+V)>>>k|L.i(M+V+1)<<32-k:L.i(M+V);return new c(S,L.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,sA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,_o=c}).apply(typeof Bx<"u"?Bx:typeof self<"u"?self:typeof window<"u"?window:{});var Qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var iA,Uu,aA,vf,_y,oA,lA,cA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qd=="object"&&Qd];for(var b=0;b<h.length;++b){var T=h[b];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function a(h,b){if(b)e:{var T=r;h=h.split(".");for(var O=0;O<h.length-1;O++){var X=h[O];if(!(X in T))break e;T=T[X]}h=h[h.length-1],O=T[h],b=b(O),b!=O&&b!=null&&e(T,h,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(b){var T=[],O;for(O in b)Object.prototype.hasOwnProperty.call(b,O)&&T.push([O,b[O]]);return T}});var l=l||{},c=this||self;function d(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function m(h,b,T){return h.call.apply(h.bind,arguments)}function g(h,b,T){return g=m,g.apply(null,arguments)}function v(h,b){var T=Array.prototype.slice.call(arguments,1);return function(){var O=T.slice();return O.push.apply(O,arguments),h.apply(this,O)}}function E(h,b){function T(){}T.prototype=b.prototype,h.Z=b.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(O,X,re){for(var xe=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)xe[Ge-2]=arguments[Ge];return b.prototype[X].apply(O,xe)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function A(h){const b=h.length;if(b>0){const T=Array(b);for(let O=0;O<b;O++)T[O]=h[O];return T}return[]}function C(h,b){for(let O=1;O<arguments.length;O++){const X=arguments[O];var T=typeof X;if(T=T!="object"?T:X?Array.isArray(X)?"array":T:"null",T=="array"||T=="object"&&typeof X.length=="number"){T=h.length||0;const re=X.length||0;h.length=T+re;for(let xe=0;xe<re;xe++)h[T+xe]=X[xe]}else h.push(X)}}class D{constructor(b,T){this.i=b,this.j=T,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function R(h){c.setTimeout(()=>{throw h},0)}function U(){var h=L;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class F{constructor(){this.h=this.g=null}add(b,T){const O=Y.get();O.set(b,T),this.h?this.h.next=O:this.g=O,this.h=O}}var Y=new D(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(b,T){this.h=b,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ve=!1,L=new F,k=()=>{const h=Promise.resolve(void 0);ie=()=>{h.then(V)}};function V(){for(var h;h=U();){try{h.h.call(h.g)}catch(T){R(T)}var b=Y;b.j(h),b.h<100&&(b.h++,h.next=b.g,b.g=h)}ve=!1}function G(){this.u=this.u,this.C=this.C}G.prototype.u=!1,G.prototype.dispose=function(){this.u||(this.u=!0,this.N())},G.prototype[Symbol.dispose]=function(){this.dispose()},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,b),c.removeEventListener("test",T,b)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function ge(h,b){S.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,b)}E(ge,S),ge.prototype.init=function(h,b){const T=this.type=h.type,O=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget,b||(T=="mouseover"?b=h.fromElement:T=="mouseout"&&(b=h.toElement)),this.relatedTarget=b,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var pe="closure_listenable_"+(Math.random()*1e6|0),H=0;function ee(h,b,T,O,X){this.listener=h,this.proxy=null,this.src=b,this.type=T,this.capture=!!O,this.ha=X,this.key=++H,this.da=this.fa=!1}function ue(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _e(h,b,T){for(const O in h)b.call(T,h[O],O,h)}function be(h,b){for(const T in h)b.call(void 0,h[T],T,h)}function q(h){const b={};for(const T in h)b[T]=h[T];return b}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(h,b){let T,O;for(let X=1;X<arguments.length;X++){O=arguments[X];for(T in O)h[T]=O[T];for(let re=0;re<W.length;re++)T=W[re],Object.prototype.hasOwnProperty.call(O,T)&&(h[T]=O[T])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,b,T,O,X){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const xe=Te(h,b,O,X);return xe>-1?(b=h[xe],T||(b.fa=!1)):(b=new ee(b,this.src,re,!!O,X),b.fa=T,h.push(b)),b};function ye(h,b){const T=b.type;if(T in h.g){var O=h.g[T],X=Array.prototype.indexOf.call(O,b,void 0),re;(re=X>=0)&&Array.prototype.splice.call(O,X,1),re&&(ue(b),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Te(h,b,T,O){for(let X=0;X<h.length;++X){const re=h[X];if(!re.da&&re.listener==b&&re.capture==!!T&&re.ha==O)return X}return-1}var De="closure_lm_"+(Math.random()*1e6|0),je={};function Le(h,b,T,O,X){if(Array.isArray(b)){for(let re=0;re<b.length;re++)Le(h,b[re],T,O,X);return null}return T=Ui(T),h&&h[pe]?h.J(b,T,d(O)?!!O.capture:!1,X):Xe(h,b,T,!1,O,X)}function Xe(h,b,T,O,X,re){if(!b)throw Error("Invalid event type");const xe=d(X)?!!X.capture:!!X;let Ge=qr(h);if(Ge||(h[De]=Ge=new me(h)),T=Ge.add(b,T,O,xe,re),T.proxy)return T;if(O=Je(),T.proxy=O,O.src=h,O.listener=T,h.addEventListener)M||(X=xe),X===void 0&&(X=!1),h.addEventListener(b.toString(),O,X);else if(h.attachEvent)h.attachEvent(yt(b.toString()),O);else if(h.addListener&&h.removeListener)h.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Je(){function h(T){return b.call(h.src,h.listener,T)}const b=tn;return h}function st(h,b,T,O,X){if(Array.isArray(b))for(var re=0;re<b.length;re++)st(h,b[re],T,O,X);else O=d(O)?!!O.capture:!!O,T=Ui(T),h&&h[pe]?(h=h.i,re=String(b).toString(),re in h.g&&(b=h.g[re],T=Te(b,T,O,X),T>-1&&(ue(b[T]),Array.prototype.splice.call(b,T,1),b.length==0&&(delete h.g[re],h.h--)))):h&&(h=qr(h))&&(b=h.g[b.toString()],h=-1,b&&(h=Te(b,T,O,X)),(T=h>-1?b[h]:null)&&ut(T))}function ut(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[pe])ye(b.i,h);else{var T=h.type,O=h.proxy;b.removeEventListener?b.removeEventListener(T,O,h.capture):b.detachEvent?b.detachEvent(yt(T),O):b.addListener&&b.removeListener&&b.removeListener(O),(T=qr(b))?(ye(T,h),T.h==0&&(T.src=null,b[De]=null)):ue(h)}}}function yt(h){return h in je?je[h]:je[h]="on"+h}function tn(h,b){if(h.da)h=!0;else{b=new ge(b,this);const T=h.listener,O=h.ha||h.src;h.fa&&ut(h),h=T.call(O,b)}return h}function qr(h){return h=h[De],h instanceof me?h:null}var li="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ui(h){return typeof h=="function"?h:(h[li]||(h[li]=function(b){return h.handleEvent(b)}),h[li])}function Ht(){G.call(this),this.i=new me(this),this.M=this,this.G=null}E(Ht,G),Ht.prototype[pe]=!0,Ht.prototype.removeEventListener=function(h,b,T,O){st(this,h,b,T,O)};function jt(h,b){var T,O=h.G;if(O)for(T=[];O;O=O.G)T.push(O);if(h=h.M,O=b.type||b,typeof b=="string")b=new S(b,h);else if(b instanceof S)b.target=b.target||h;else{var X=b;b=new S(O,h),de(b,X)}X=!0;let re,xe;if(T)for(xe=T.length-1;xe>=0;xe--)re=b.g=T[xe],X=Tr(re,O,!0,b)&&X;if(re=b.g=h,X=Tr(re,O,!0,b)&&X,X=Tr(re,O,!1,b)&&X,T)for(xe=0;xe<T.length;xe++)re=b.g=T[xe],X=Tr(re,O,!1,b)&&X}Ht.prototype.N=function(){if(Ht.Z.N.call(this),this.i){var h=this.i;for(const b in h.g){const T=h.g[b];for(let O=0;O<T.length;O++)ue(T[O]);delete h.g[b],h.h--}}this.G=null},Ht.prototype.J=function(h,b,T,O){return this.i.add(String(h),b,!1,T,O)},Ht.prototype.K=function(h,b,T,O){return this.i.add(String(h),b,!0,T,O)};function Tr(h,b,T,O){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();let X=!0;for(let re=0;re<b.length;++re){const xe=b[re];if(xe&&!xe.da&&xe.capture==T){const Ge=xe.listener,hn=xe.ha||xe.src;xe.fa&&ye(h.i,xe),X=Ge.call(hn,O)!==!1&&X}}return X&&!O.defaultPrevented}function Oa(h,b){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:c.setTimeout(h,b||0)}function Vi(h){h.g=Oa(()=>{h.g=null,h.i&&(h.i=!1,Vi(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class Ot extends G{constructor(b,T){super(),this.m=b,this.l=T,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Vi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ar(h){G.call(this),this.h=h,this.g={}}E(Ar,G);var qi=[];function Br(h){_e(h.g,function(b,T){this.g.hasOwnProperty(T)&&ut(b)},h),h.g={}}Ar.prototype.N=function(){Ar.Z.N.call(this),Br(this)},Ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dr=c.JSON.stringify,Bi=c.JSON.parse,kn=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function zi(){}function Hi(){}var fr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){S.call(this,"d")}E(Zt,S);function An(){S.call(this,"c")}E(An,S);var Dt={},Us=null;function Sr(){return Us=Us||new Ht}Dt.Ia="serverreachability";function Zn(h){S.call(this,Dt.Ia,h)}E(Zn,S);function Mn(h){const b=Sr();jt(b,new Zn(b))}Dt.STAT_EVENT="statevent";function zr(h,b){S.call(this,Dt.STAT_EVENT,h),this.stat=b}E(zr,S);function Tt(h){const b=Sr();jt(b,new zr(b,h))}Dt.Ja="timingevent";function Jn(h,b){S.call(this,Dt.Ja,h),this.size=b}E(Jn,S);function In(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},b)}function Pn(){this.g=!0}Pn.prototype.ua=function(){this.g=!1};function Fi(h,b,T,O,X,re){h.info(function(){if(h.g)if(re){var xe="",Ge=re.split("&");for(let vt=0;vt<Ge.length;vt++){var hn=Ge[vt].split("=");if(hn.length>1){const Yt=hn[0];hn=hn[1];const bs=Yt.split("_");xe=bs.length>=2&&bs[1]=="type"?xe+(Yt+"="+hn+"&"):xe+(Yt+"=redacted&")}}}else xe=null;else xe=re;return"XMLHTTP REQ ("+O+") [attempt "+X+"]: "+b+`
`+T+`
`+xe})}function ci(h,b,T,O,X,re,xe){h.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+X+"]: "+b+`
`+T+`
`+re+" "+xe})}function Sn(h,b,T,O){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+Hr(h,T)+(O?" "+O:"")})}function us(h,b){h.info(function(){return"TIMEOUT: "+b})}Pn.prototype.info=function(){};function Hr(h,b){if(!h.g)return b;if(!b)return null;try{const re=JSON.parse(b);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var T=re[h];if(!(T.length<2)){var O=T[1];if(Array.isArray(O)&&!(O.length<1)){var X=O[0];if(X!="noop"&&X!="stop"&&X!="close")for(let xe=1;xe<O.length;xe++)O[xe]=""}}}}return dr(re)}catch{return b}}var Vs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$i;function hs(){}E(hs,zi),hs.prototype.g=function(){return new XMLHttpRequest},$i=new hs;function mr(h){return encodeURIComponent(String(h))}function nn(h){var b=1;h=h.split(":");const T=[];for(;b>0&&h.length;)T.push(h.shift()),b--;return h.length&&T.push(h.join(":")),T}function pr(h,b,T,O){this.j=h,this.i=b,this.l=T,this.S=O||1,this.V=new Ar(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gr}function gr(){this.i=null,this.g="",this.h=!1}var Ft={},rn={};function Nr(h,b,T){h.M=1,h.A=fs($t(b)),h.u=T,h.R=!0,Jt(h,null)}function Jt(h,b){h.F=Date.now(),Cr(h),h.B=$t(h.A);var T=h.B,O=h.S;Array.isArray(O)||(O=[String(O)]),mi(T.i,"t",O),h.C=0,T=h.j.L,h.h=new gr,h.g=Vh(h.j,T?b:null,!h.u),h.P>0&&(h.O=new Ot(g(h.Y,h,h.g),h.P)),b=h.V,T=h.g,O=h.ba;var X="readystatechange";Array.isArray(X)||(X&&(qi[0]=X.toString()),X=qi);for(let re=0;re<X.length;re++){const xe=Le(T,X[re],O||b.handleEvent,!1,b.h||b);if(!xe)break;b.g[xe.key]=xe}b=h.J?q(h.J):{},h.u?(h.v||(h.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,b)):(h.v="GET",h.g.ea(h.B,h.v,null,b)),Mn(),Fi(h.i,h.v,h.B,h.l,h.S,h.u)}pr.prototype.ba=function(h){h=h.target;const b=this.O;b&&B(h)==3?b.j():this.Y(h)},pr.prototype.Y=function(h){try{if(h==this.g)e:{const Ge=B(this.g),hn=this.g.ya(),vt=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||ne(this.g)))){this.K||Ge!=4||hn==7||(hn==8||vt<=0?Mn(3):Mn(2)),Mt(this);var b=this.g.ca();this.X=b;var T=Vo(this);if(this.o=b==200,ci(this.i,this.v,this.B,this.l,this.S,Ge,b),this.o){if(this.U&&!this.L){t:{if(this.g){var O,X=this.g;if((O=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(O)){var re=O;break t}}re=null}if(h=re)Sn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rr(this,h);else{this.o=!1,this.m=3,Tt(12),Un(this),er(this);break e}}if(this.R){h=!0;let Yt;for(;!this.K&&this.C<T.length;)if(Yt=La(this,T),Yt==rn){Ge==4&&(this.m=4,Tt(14),h=!1),Sn(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Ft){this.m=4,Tt(15),Sn(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Sn(this.i,this.l,Yt,null),Rr(this,Yt);if(Da(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||T.length!=0||this.h.h||(this.m=1,Tt(16),h=!1),this.o=this.o&&h,!h)Sn(this.i,this.l,T,"[Invalid Chunked Response]"),Un(this),er(this);else if(T.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Yr(xe),xe.P=!0,Tt(11))}}else Sn(this.i,this.l,T,null),Rr(this,T);Ge==4&&Un(this),this.o&&!this.K&&(Ge==4?Zi(this.j,this):(this.o=!1,Cr(this)))}else Pe(this.g),b==400&&T.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),Un(this),er(this)}}}catch{}finally{}};function Vo(h){if(!Da(h))return h.g.la();const b=ne(h.g);if(b==="")return"";let T="";const O=b.length,X=B(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Un(h),er(h),"";h.h.i=new c.TextDecoder}for(let re=0;re<O;re++)h.h.h=!0,T+=h.h.i.decode(b[re],{stream:!(X&&re==O-1)});return b.length=0,h.h.g+=T,h.C=0,h.h.g}function Da(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function La(h,b){var T=h.C,O=b.indexOf(`
`,T);return O==-1?rn:(T=Number(b.substring(T,O)),isNaN(T)?Ft:(O+=1,O+T>b.length?rn:(b=b.slice(O,O+T),h.C=O+T,b)))}pr.prototype.cancel=function(){this.K=!0,Un(this)};function Cr(h){h.T=Date.now()+h.H,ui(h,h.H)}function ui(h,b){if(h.D!=null)throw Error("WatchDog timer not null");h.D=In(g(h.aa,h),b)}function Mt(h){h.D&&(c.clearTimeout(h.D),h.D=null)}pr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(us(this.i,this.B),this.M!=2&&(Mn(),Tt(17)),Un(this),this.m=2,er(this)):ui(this,this.T-h)};function er(h){h.j.I==0||h.K||Zi(h.j,h)}function Un(h){Mt(h);var b=h.O;b&&typeof b.dispose=="function"&&b.dispose(),h.O=null,Br(h.V),h.g&&(b=h.g,h.g=null,b.abort(),b.dispose())}function Rr(h,b){try{var T=h.j;if(T.I!=0&&(T.g==h||Vn(T.h,h))){if(!h.L&&Vn(T.h,h)&&T.I==3){try{var O=T.Ba.g.parse(b)}catch{O=null}if(Array.isArray(O)&&O.length==3){var X=O;if(X[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Fs(T),xt(T);else break e;Hn(T),Tt(18)}}else T.xa=X[1],0<T.xa-T.K&&X[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=In(g(T.Va,T),6e3));yr(T.h)<=1&&T.ta&&(T.ta=void 0)}else gi(T,11)}else if((h.L||T.g==h)&&Fs(T),!N(b))for(X=T.Ba.g.parse(b),b=0;b<X.length;b++){let vt=X[b];const Yt=vt[0];if(!(Yt<=T.K))if(T.K=Yt,vt=vt[1],T.I==2)if(vt[0]=="c"){T.M=vt[1],T.ba=vt[2];const bs=vt[3];bs!=null&&(T.ka=bs,T.j.info("VER="+T.ka));const yi=vt[4];yi!=null&&(T.za=yi,T.j.info("SVER="+T.za));const Gs=vt[5];Gs!=null&&typeof Gs=="number"&&Gs>0&&(O=1.5*Gs,T.O=O,T.j.info("backChannelRequestTimeoutMs_="+O)),O=T;const $s=h.g;if($s){const Bo=$s.g?$s.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bo){var re=O.h;re.g||Bo.indexOf("spdy")==-1&&Bo.indexOf("quic")==-1&&Bo.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(tr(re,re.h),re.h=null))}if(O.G){const Il=$s.g?$s.g.getResponseHeader("X-HTTP-Session-Id"):null;Il&&(O.wa=Il,dt(O.J,O.G,Il))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),O=T;var xe=h;if(O.na=Uh(O,O.L?O.ba:null,O.W),xe.L){qs(O.h,xe);var Ge=xe,hn=O.O;hn&&(Ge.H=hn),Ge.D&&(Mt(Ge),Cr(Ge)),O.g=xe}else Qr(O);T.i.length>0&&Rt(T)}else vt[0]!="stop"&&vt[0]!="close"||gi(T,7);else T.I==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?gi(T,7):Ze(T):vt[0]!="noop"&&T.l&&T.l.qa(vt),T.A=0)}}Mn(4)}catch{}}var Gt=class{constructor(h,b){this.g=h,this.map=b}};function Ki(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ds(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function yr(h){return h.h?1:h.g?h.g.size:0}function Vn(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function tr(h,b){h.g?h.g.add(b):h.h=b}function qs(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}Ki.prototype.cancel=function(){if(this.i=Qi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Qi(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const T of h.g.values())b=b.concat(T.G);return b}return A(h.i)}var ka=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hi(h,b){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const O=h[T].indexOf("=");let X,re=null;O>=0?(X=h[T].substring(0,O),re=h[T].substring(O+1)):X=h[T],b(X,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function qn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;h instanceof qn?(this.l=h.l,Pt(this,h.j),this.o=h.o,this.g=h.g,Ir(this,h.u),this.h=h.h,Fr(this,Ma(h.i)),this.m=h.m):h&&(b=String(h).match(ka))?(this.l=!1,Pt(this,b[1]||"",!0),this.o=jr(b[2]||""),this.g=jr(b[3]||"",!0),Ir(this,b[4]),this.h=jr(b[5]||"",!0),Fr(this,b[6]||"",!0),this.m=jr(b[7]||"")):(this.l=!1,this.i=new gn(null,this.l))}qn.prototype.toString=function(){const h=[];var b=this.j;b&&h.push(Bs(b,di,!0),":");var T=this.g;return(T||b=="file")&&(h.push("//"),(b=this.o)&&h.push(Bs(b,di,!0),"@"),h.push(mr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Bs(T,T.charAt(0)=="/"?Yi:fi,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Bs(T,ps)),h.join("")},qn.prototype.resolve=function(h){const b=$t(this);let T=!!h.j;T?Pt(b,h.j):T=!!h.o,T?b.o=h.o:T=!!h.g,T?b.g=h.g:T=h.u!=null;var O=h.h;if(T)Ir(b,h.u);else if(T=!!h.h){if(O.charAt(0)!="/")if(this.g&&!this.h)O="/"+O;else{var X=b.h.lastIndexOf("/");X!=-1&&(O=b.h.slice(0,X+1)+O)}if(X=O,X==".."||X==".")O="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){O=X.lastIndexOf("/",0)==0,X=X.split("/");const re=[];for(let xe=0;xe<X.length;){const Ge=X[xe++];Ge=="."?O&&xe==X.length&&re.push(""):Ge==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),O&&xe==X.length&&re.push("")):(re.push(Ge),O=!0)}O=re.join("/")}else O=X}return T?b.h=O:T=h.i.toString()!=="",T?Fr(b,Ma(h.i)):T=!!h.m,T&&(b.m=h.m),b};function $t(h){return new qn(h)}function Pt(h,b,T){h.j=T?jr(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function Ir(h,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);h.u=b}else h.u=null}function Fr(h,b,T){b instanceof gn?(h.i=b,pi(h.i,h.l)):(T||(b=Bs(b,ms)),h.i=new gn(b,h.l))}function dt(h,b,T){h.i.set(b,T)}function fs(h){return dt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function jr(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Bs(h,b,T){return typeof h=="string"?(h=encodeURI(h).replace(b,jn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function jn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var di=/[#\/\?@]/g,fi=/[#\?:]/g,Yi=/[#\?]/g,ms=/[#\?@]/g,ps=/#/g;function gn(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function Kt(h){h.g||(h.g=new Map,h.h=0,h.i&&hi(h.i,function(b,T){h.add(decodeURIComponent(b.replace(/\+/g," ")),T)}))}n=gn.prototype,n.add=function(h,b){Kt(this),this.i=null,h=gs(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(b),this.h+=1,this};function Or(h,b){Kt(h),b=gs(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function Xi(h,b){return Kt(h),b=gs(h,b),h.g.has(b)}n.forEach=function(h,b){Kt(this),this.g.forEach(function(T,O){T.forEach(function(X){h.call(b,X,O,this)},this)},this)};function nr(h,b){Kt(h);let T=[];if(typeof b=="string")Xi(h,b)&&(T=T.concat(h.g.get(gs(h,b))));else for(h=Array.from(h.g.values()),b=0;b<h.length;b++)T=T.concat(h[b]);return T}n.set=function(h,b){return Kt(this),this.i=null,h=gs(this,h),Xi(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},n.get=function(h,b){return h?(h=nr(this,h),h.length>0?String(h[0]):b):b};function mi(h,b,T){Or(h,b),T.length>0&&(h.i=null,h.g.set(gs(h,b),A(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(let O=0;O<b.length;O++){var T=b[O];const X=mr(T);T=nr(this,T);for(let re=0;re<T.length;re++){let xe=X;T[re]!==""&&(xe+="="+mr(T[re])),h.push(xe)}}return this.i=h.join("&")};function Ma(h){const b=new gn;return b.i=h.i,h.g&&(b.g=new Map(h.g),b.h=h.h),b}function gs(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function pi(h,b){b&&!h.j&&(Kt(h),h.i=null,h.g.forEach(function(T,O){const X=O.toLowerCase();O!=X&&(Or(this,O),mi(this,X,T))},h)),h.j=b}function rr(h,b){const T=new Pn;if(c.Image){const O=new Image;O.onload=v(Bn,T,"TestLoadImage: loaded",!0,b,O),O.onerror=v(Bn,T,"TestLoadImage: error",!1,b,O),O.onabort=v(Bn,T,"TestLoadImage: abort",!1,b,O),O.ontimeout=v(Bn,T,"TestLoadImage: timeout",!1,b,O),c.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=h}else b(!1)}function cn(h,b){const T=new Pn,O=new AbortController,X=setTimeout(()=>{O.abort(),Bn(T,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:O.signal}).then(re=>{clearTimeout(X),re.ok?Bn(T,"TestPingServer: ok",!0,b):Bn(T,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(X),Bn(T,"TestPingServer: error",!1,b)})}function Bn(h,b,T,O,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),O(T)}catch{}}function Gr(){this.g=new kn}function zn(h){this.i=h.Sb||null,this.h=h.ab||!1}E(zn,zi),zn.prototype.g=function(){return new $r(this.i,this.h)};function $r(h,b){Ht.call(this),this.H=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E($r,Ht),n=$r.prototype,n.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=b,this.readyState=1,sr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(b.body=h),(this.H||c).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ys(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,sr(this)),this.g&&(this.readyState=3,sr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Kr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Kr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?ys(this):sr(this),this.readyState==3&&Kr(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,ys(this))},n.Na=function(h){this.g&&(this.response=h,ys(this))},n.ga=function(){this.g&&ys(this)};function ys(h){h.readyState=4,h.l=null,h.j=null,h.B=null,sr(h)}n.setRequestHeader=function(h,b){this.A.append(h,b)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var T=b.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=b.next();return h.join(`\r
`)};function sr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty($r.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function On(h){let b="";return _e(h,function(T,O){b+=O,b+=":",b+=T,b+=`\r
`}),b}function vs(h,b,T){e:{for(O in T){var O=!1;break e}O=!0}O||(T=On(T),typeof h=="string"?T!=null&&mr(T):dt(h,b,T))}function We(h){Ht.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(We,Ht);var vr=/^https?$/i,zs=["POST","PUT"];n=We.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,b,T,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$i.g(),this.g.onreadystatechange=x(g(this.Ca,this));try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(re){Hs(this,re);return}if(h=T||"",T=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var X in O)T.set(X,O[X]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const re of O.keys())T.set(re,O.get(re));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(T.keys()).find(re=>re.toLowerCase()=="content-type"),X=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(zs,b,void 0)>=0)||O||X||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,xe]of T)this.g.setRequestHeader(re,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){Hs(this,re)}};function Hs(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.o=5,Wi(h),j(h)}function Wi(h){h.A||(h.A=!0,jt(h,"complete"),jt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,jt(this,"complete"),jt(this,"abort"),j(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),j(this,!0)),We.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?_(this):this.Xa())},n.Xa=function(){_(this)};function _(h){if(h.h&&typeof l<"u"){if(h.v&&B(h)==4)setTimeout(h.Ca.bind(h),0);else if(jt(h,"readystatechange"),B(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var T;if(!(T=b)){var O;if(O=re===0){let xe=String(h.D).match(ka)[1]||null;!xe&&c.self&&c.self.location&&(xe=c.self.location.protocol.slice(0,-1)),O=!vr.test(xe?xe.toLowerCase():"")}T=O}if(T)jt(h,"complete"),jt(h,"success");else{h.o=6;try{var X=B(h)>2?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.ca()+"]",Wi(h)}}finally{j(h)}}}}function j(h,b){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,b||jt(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function B(h){return h.g?h.g.readyState:0}n.ca=function(){try{return B(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),Bi(b)}};function ne(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Pe(h){const b={};h=(h.g&&B(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<h.length;O++){if(N(h[O]))continue;var T=nn(h[O]);const X=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const re=b[X]||[];b[X]=re,re.push(T)}be(b,function(O){return O.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ae(h,b,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||b}function Ke(h){this.za=0,this.i=[],this.j=new Pn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ae("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ae("baseRetryDelayMs",5e3,h),this.Za=Ae("retryDelaySeedMs",1e4,h),this.Ta=Ae("forwardChannelMaxRetries",2,h),this.va=Ae("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ki(h&&h.concurrentRequestLimit),this.Ba=new Gr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ke.prototype,n.ka=8,n.I=1,n.connect=function(h,b,T,O){Tt(0),this.W=h,this.H=b||{},T&&O!==void 0&&(this.H.OSID=T,this.H.OAID=O),this.F=this.X,this.J=Uh(this,null,this.W),Rt(this)};function Ze(h){if(et(h),h.I==3){var b=h.V++,T=$t(h.J);if(dt(T,"SID",h.M),dt(T,"RID",b),dt(T,"TYPE","terminate"),Qt(h,T),b=new pr(h,h.j,b),b.M=2,b.A=fs($t(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(b.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=b.A,T=!0),T||(b.g=Vh(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Cr(b)}Ph(h)}function xt(h){h.g&&(Yr(h),h.g.cancel(),h.g=null)}function et(h){xt(h),h.v&&(c.clearTimeout(h.v),h.v=null),Fs(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Rt(h){if(!ds(h.h)&&!h.m){h.m=!0;var b=h.Ea;ie||k(),ve||(ie(),ve=!0),L.add(b,h),h.D=0}}function un(h,b){return yr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=b.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=In(g(h.Ea,h,b),Mh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const X=new pr(this,this.j,h);let re=this.o;if(this.U&&(re?(re=q(re),de(re,this.U)):re=this.U),this.u!==null||this.R||(X.J=re,re=null),this.S)e:{for(var b=0,T=0;T<this.i.length;T++){t:{var O=this.i[T];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(b+=O,b>4096){b=T;break e}if(b===4096||T===this.i.length-1){b=T+1;break e}}b=1e3}else b=1e3;b=sn(this,X,b),T=$t(this.J),dt(T,"RID",h),dt(T,"CVER",22),this.G&&dt(T,"X-HTTP-Session-Id",this.G),Qt(this,T),re&&(this.R?b="headers="+mr(On(re))+"&"+b:this.u&&vs(T,this.u,re)),tr(this.h,X),this.Ra&&dt(T,"TYPE","init"),this.S?(dt(T,"$req",b),dt(T,"SID","null"),X.U=!0,Nr(X,T,null)):Nr(X,T,b),this.I=2}}else this.I==3&&(h?Ut(this,h):this.i.length==0||ds(this.h)||Ut(this))};function Ut(h,b){var T;b?T=b.l:T=h.V++;const O=$t(h.J);dt(O,"SID",h.M),dt(O,"RID",T),dt(O,"AID",h.K),Qt(h,O),h.u&&h.o&&vs(O,h.u,h.o),T=new pr(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),b&&(h.i=b.G.concat(h.i)),b=sn(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),tr(h.h,T),Nr(T,O,b)}function Qt(h,b){h.H&&_e(h.H,function(T,O){dt(b,O,T)}),h.l&&_e({},function(T,O){dt(b,O,T)})}function sn(h,b,T){T=Math.min(h.i.length,T);const O=h.l?g(h.l.Ka,h.l,h):null;e:{var X=h.i;let Ge=-1;for(;;){const hn=["count="+T];Ge==-1?T>0?(Ge=X[0].g,hn.push("ofs="+Ge)):Ge=0:hn.push("ofs="+Ge);let vt=!0;for(let Yt=0;Yt<T;Yt++){var re=X[Yt].g;const bs=X[Yt].map;if(re-=Ge,re<0)Ge=Math.max(0,X[Yt].g-100),vt=!1;else try{re="req"+re+"_"||"";try{var xe=bs instanceof Map?bs:Object.entries(bs);for(const[yi,Gs]of xe){let $s=Gs;d(Gs)&&($s=dr(Gs)),hn.push(re+yi+"="+encodeURIComponent($s))}}catch(yi){throw hn.push(re+"type="+encodeURIComponent("_badmap")),yi}}catch{O&&O(bs)}}if(vt){xe=hn.join("&");break e}}xe=void 0}return h=h.i.splice(0,T),b.G=h,xe}function Qr(h){if(!h.g&&!h.v){h.Y=1;var b=h.Da;ie||k(),ve||(ie(),ve=!0),L.add(b,h),h.A=0}}function Hn(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=In(g(h.Da,h),Mh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,qo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=In(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),xt(this),qo(this))};function Yr(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function qo(h){h.g=new pr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var b=$t(h.na);dt(b,"RID","rpc"),dt(b,"SID",h.M),dt(b,"AID",h.K),dt(b,"CI",h.F?"0":"1"),!h.F&&h.ia&&dt(b,"TO",h.ia),dt(b,"TYPE","xmlhttp"),Qt(h,b),h.u&&h.o&&vs(b,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=fs($t(b)),T.u=null,T.R=!0,Jt(T,h)}n.Va=function(){this.C!=null&&(this.C=null,xt(this),Hn(this),Tt(19))};function Fs(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Zi(h,b){var T=null;if(h.g==b){Fs(h),Yr(h),h.g=null;var O=2}else if(Vn(h.h,b))T=b.G,qs(h.h,b),O=1;else return;if(h.I!=0){if(b.o)if(O==1){T=b.u?b.u.length:0,b=Date.now()-b.F;var X=h.D;O=Sr(),jt(O,new Jn(O,T)),Rt(h)}else Qr(h);else if(X=b.m,X==3||X==0&&b.X>0||!(O==1&&un(h,b)||O==2&&Hn(h)))switch(T&&T.length>0&&(b=h.h,b.i=b.i.concat(T)),X){case 1:gi(h,5);break;case 4:gi(h,10);break;case 3:gi(h,6);break;default:gi(h,2)}}}function Mh(h,b){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*b}function gi(h,b){if(h.j.info("Error code "+b),b==2){var T=g(h.bb,h),O=h.Ua;const X=!O;O=new qn(O||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Pt(O,"https"),fs(O),X?rr(O.toString(),T):cn(O.toString(),T)}else Tt(2);h.I=0,h.l&&h.l.pa(b),Ph(h),et(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Ph(h){if(h.I=0,h.ja=[],h.l){const b=Qi(h.h);(b.length!=0||h.i.length!=0)&&(C(h.ja,b),C(h.ja,h.i),h.h.i.length=0,A(h.i),h.i.length=0),h.l.oa()}}function Uh(h,b,T){var O=T instanceof qn?$t(T):new qn(T);if(O.g!="")b&&(O.g=b+"."+O.g),Ir(O,O.u);else{var X=c.location;O=X.protocol,b=b?b+"."+X.hostname:X.hostname,X=+X.port;const re=new qn(null);O&&Pt(re,O),b&&(re.g=b),X&&Ir(re,X),T&&(re.h=T),O=re}return T=h.G,b=h.wa,T&&b&&dt(O,T,b),dt(O,"VER",h.ka),Qt(h,O),O}function Vh(h,b,T){if(b&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Aa&&!h.ma?new We(new zn({ab:T})):new We(h.ma),b.Fa(h.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qh(){}n=qh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Pa(){}Pa.prototype.g=function(h,b){return new br(h,b)};function br(h,b){Ht.call(this),this.g=new Ke(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(h?h["X-WebChannel-Client-Profile"]=b.sa:h={"X-WebChannel-Client-Profile":b.sa}),this.g.U=h,(h=b&&b.Qb)&&!N(h)&&(this.g.u=h),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!N(b)&&(this.g.G=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new Ji(this)}E(br,Ht),br.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},br.prototype.close=function(){Ze(this.g)},br.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=dr(h),h=T);b.i.push(new Gt(b.Ya++,h)),b.I==3&&Rt(b)},br.prototype.N=function(){this.g.l=null,delete this.j,Ze(this.g),delete this.g,br.Z.N.call(this)};function Bh(h){Zt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const T in b){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}E(Bh,Zt);function zh(){An.call(this),this.status=1}E(zh,An);function Ji(h){this.g=h}E(Ji,qh),Ji.prototype.ra=function(){jt(this.g,"a")},Ji.prototype.qa=function(h){jt(this.g,new Bh(h))},Ji.prototype.pa=function(h){jt(this.g,new zh)},Ji.prototype.oa=function(){jt(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,br.prototype.send=br.prototype.o,br.prototype.open=br.prototype.m,br.prototype.close=br.prototype.close,cA=function(){return new Pa},lA=function(){return Sr()},oA=Dt,_y={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vs.NO_ERROR=0,Vs.TIMEOUT=8,Vs.HTTP_ERROR=6,vf=Vs,Gi.COMPLETE="complete",aA=Gi,Hi.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",Ht.prototype.listen=Ht.prototype.J,Uu=Hi,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,iA=We}).apply(typeof Qd<"u"?Qd:typeof self<"u"?self:typeof window<"u"?window:{});const zx="@firebase/firestore",Hx="4.9.2";class or{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}or.UNAUTHENTICATED=new or(null),or.GOOGLE_CREDENTIALS=new or("google-credentials-uid"),or.FIRST_PARTY=new or("first-party-uid"),or.MOCK_USER=new or("mock-user");let qc="12.3.0";const hl=new h0("@firebase/firestore");function ac(){return hl.logLevel}function we(n,...e){if(hl.logLevel<=ot.DEBUG){const t=e.map(T0);hl.debug(`Firestore (${qc}): ${n}`,...t)}}function Ta(n,...e){if(hl.logLevel<=ot.ERROR){const t=e.map(T0);hl.error(`Firestore (${qc}): ${n}`,...t)}}function wc(n,...e){if(hl.logLevel<=ot.WARN){const t=e.map(T0);hl.warn(`Firestore (${qc}): ${n}`,...t)}}function T0(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function qe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,uA(n,r,t)}function uA(n,e,t){let r=`FIRESTORE (${qc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ta(r),new Error(r)}function _t(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||uA(e,a,r)}function ze(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Ca{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Si{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class hA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(or.UNAUTHENTICATED)))}shutdown(){}}class ij{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class aj{constructor(e){this.t=e,this.currentUser=or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_t(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new Si;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Si,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Si)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t(typeof r.accessToken=="string",31837,{l:r}),new hA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string",2055,{h:e}),new or(e)}}class oj{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=or.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lj{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new oj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(or.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Fx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_t(this.o===void 0,3512);const r=l=>{l.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,we("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Fx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(_t(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Fx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function uj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class A0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=uj(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function xy(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),l=e.charAt(r);if(a!==l)return Bg(a)===Bg(l)?lt(a,l):Bg(a)?1:-1}return lt(n.length,e.length)}const hj=55296,dj=57343;function Bg(n){const e=n.charCodeAt(0);return e>=hj&&e<=dj}function Tc(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}const Gx="__name__";class wi{constructor(e,t,r){t===void 0?t=0:t>e.length&&qe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&qe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return wi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=wi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return lt(e.length,t.length)}static compareSegments(e,t){const r=wi.isNumericId(e),a=wi.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?wi.extractNumericId(e).compare(wi.extractNumericId(t)):xy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _o.fromString(e.substring(4,e.length-2))}}class kt extends wi{construct(e,t,r){return new kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new kt(t)}static emptyPath(){return new kt([])}}const fj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yn extends wi{construct(e,t,r){return new Yn(e,t,r)}static isValidIdentifier(e){return fj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gx}static keyField(){return new Yn([Gx])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new Ee(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new Ee(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ee(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new Ee(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yn(t)}static emptyPath(){return new Yn([])}}class Me{constructor(e){this.path=e}static fromPath(e){return new Me(kt.fromString(e))}static fromName(e){return new Me(kt.fromString(e).popFirst(5))}static empty(){return new Me(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new kt(e.slice()))}}function dA(n,e,t){if(!t)throw new Ee(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mj(n,e,t,r){if(e===!0&&r===!0)throw new Ee(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $x(n){if(!Me.isDocumentKey(n))throw new Ee(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Kx(n){if(Me.isDocumentKey(n))throw new Ee(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function rm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":qe(12329,{type:typeof n})}function Er(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rm(n);throw new Ee(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Th(n,e){if(!fA(n))throw new Ee(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new Ee(ce.INVALID_ARGUMENT,t);return!0}const Qx=-62135596800,Yx=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Yx);return new zt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Qx)throw new Ee(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yx}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Th(e,zt._jsonSchema))return new zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zt._jsonSchemaVersion="firestore/timestamp/1.0",zt._jsonSchema={type:wn("string",zt._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new zt(0,0))}static max(){return new He(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rh=-1;function pj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=He.fromTimestamp(r===1e9?new zt(t+1,0):new zt(t,r));return new To(a,Me.empty(),e)}function gj(n){return new To(n.readTime,n.key,rh)}class To{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new To(He.min(),Me.empty(),rh)}static max(){return new To(He.max(),Me.empty(),rh)}}function yj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Me.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}const vj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Bc(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==vj)throw n;we("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,r)=>{t(e)}))}static reject(e){return new fe(((t,r)=>{r(e)}))}static waitFor(e){return new fe(((t,r)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(m=>r(m)))})),c=!0,l===a&&t()}))}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next((a=>a?fe.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new fe(((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((v=>{c[g]=v,++d,d===l&&r(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new fe(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}function _j(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zc(n){return n.name==="IndexedDbTransactionError"}class sm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sm.ce=-1;const S0=-1;function im(n){return n==null}function Lf(n){return n===0&&1/n==-1/0}function xj(n){return typeof n=="number"&&Number.isInteger(n)&&!Lf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const mA="";function Ej(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Xx(e)),e=wj(n.get(t),e);return Xx(e)}function wj(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case mA:t+="";break;default:t+=l}}return t}function Xx(n){return n+mA+""}function Wx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Tj(n,e){const t=[];for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.push(e(n[r],r,n));return t}function pA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class en{constructor(e,t){this.comparator=e,this.root=t||Qn.EMPTY}insert(e,t){return new en(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yd(this.root,e,this.comparator,!0)}}class Yd{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Qn.RED,this.left=a??Qn.EMPTY,this.right=l??Qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Qn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Qn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qe(27949);return e+(this.isRed()?0:1)}}Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1;Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw qe(57766)}get value(){throw qe(16141)}get color(){throw qe(16727)}get left(){throw qe(29726)}get right(){throw qe(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zx(this.data.getIterator())}getIteratorFrom(e){return new Zx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Cn(this.comparator);return t.data=e,t}}class Zx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ss{constructor(e){this.fields=e,e.sort(Yn.comparator)}static empty(){return new ss([])}unionWith(e){let t=new Cn(Yn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ss(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class gA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new gA("Invalid base64 string: "+l):l}})(e);return new Wn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Wn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wn.EMPTY_BYTE_STRING=new Wn("");const Aj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ao(n){if(_t(!!n,39018),typeof n=="string"){let e=0;const t=Aj.exec(n);if(_t(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pn(n.seconds),nanos:pn(n.nanos)}}function pn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function So(n){return typeof n=="string"?Wn.fromBase64String(n):Wn.fromUint8Array(n)}const yA="server_timestamp",vA="__type__",bA="__previous_value__",_A="__local_write_time__";function N0(n){return(n?.mapValue?.fields||{})[vA]?.stringValue===yA}function am(n){const e=n.mapValue.fields[bA];return N0(e)?am(e):e}function sh(n){const e=Ao(n.mapValue.fields[_A].timestampValue);return new zt(e.seconds,e.nanos)}class Sj{constructor(e,t,r,a,l,c,d,m,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=v}}const kf="(default)";class ih{constructor(e,t){this.projectId=e,this.database=t||kf}static empty(){return new ih("","")}get isDefaultDatabase(){return this.database===kf}isEqual(e){return e instanceof ih&&e.projectId===this.projectId&&e.database===this.database}}const xA="__type__",Nj="__max__",Xd={mapValue:{}},EA="__vector__",Mf="value";function No(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?N0(n)?4:Rj(n)?9007199254740991:Cj(n)?10:11:qe(28295,{value:n})}function Oi(n,e){if(n===e)return!0;const t=No(n);if(t!==No(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sh(n).isEqual(sh(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ao(a.timestampValue),d=Ao(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return So(a.bytesValue).isEqual(So(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return pn(a.geoPointValue.latitude)===pn(l.geoPointValue.latitude)&&pn(a.geoPointValue.longitude)===pn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return pn(a.integerValue)===pn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=pn(a.doubleValue),d=pn(l.doubleValue);return c===d?Lf(c)===Lf(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Tc(n.arrayValue.values||[],e.arrayValue.values||[],Oi);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(Wx(c)!==Wx(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Oi(c[m],d[m])))return!1;return!0})(n,e);default:return qe(52216,{left:n})}}function ah(n,e){return(n.values||[]).find((t=>Oi(t,e)))!==void 0}function Ac(n,e){if(n===e)return 0;const t=No(n),r=No(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=pn(l.integerValue||l.doubleValue),m=pn(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return Jx(n.timestampValue,e.timestampValue);case 4:return Jx(sh(n),sh(e));case 5:return xy(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=So(l),m=So(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const v=lt(d[g],m[g]);if(v!==0)return v}return lt(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=lt(pn(l.latitude),pn(c.latitude));return d!==0?d:lt(pn(l.longitude),pn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return eE(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},m=c.fields||{},g=d[Mf]?.arrayValue,v=m[Mf]?.arrayValue,E=lt(g?.values?.length||0,v?.values?.length||0);return E!==0?E:eE(g,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Xd.mapValue&&c===Xd.mapValue)return 0;if(l===Xd.mapValue)return 1;if(c===Xd.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},v=Object.keys(g);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const x=xy(m[E],v[E]);if(x!==0)return x;const A=Ac(d[m[E]],g[v[E]]);if(A!==0)return A}return lt(m.length,v.length)})(n.mapValue,e.mapValue);default:throw qe(23264,{he:t})}}function Jx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=Ao(n),r=Ao(e),a=lt(t.seconds,r.seconds);return a!==0?a:lt(t.nanos,r.nanos)}function eE(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Ac(t[a],r[a]);if(l)return l}return lt(t.length,r.length)}function Sc(n){return Ey(n)}function Ey(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ao(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return So(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Me.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Ey(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Ey(t.fields[c])}`;return a+"}"})(n.mapValue):qe(61005,{value:n})}function bf(n){switch(No(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=am(n);return e?16+bf(e):16;case 5:return 2*n.stringValue.length;case 6:return So(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+bf(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return Lo(r.fields,((l,c)=>{a+=l.length+bf(c)})),a})(n.mapValue);default:throw qe(13486,{value:n})}}function tE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function wy(n){return!!n&&"integerValue"in n}function C0(n){return!!n&&"arrayValue"in n}function nE(n){return!!n&&"nullValue"in n}function rE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _f(n){return!!n&&"mapValue"in n}function Cj(n){return(n?.mapValue?.fields||{})[xA]?.stringValue===EA}function Qu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Lo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Qu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qu(n.arrayValue.values[t]);return e}return{...n}}function Rj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Nj}class Vr{constructor(e){this.value=e}static empty(){return new Vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_f(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qu(t)}setAll(e){let t=Yn.emptyPath(),r={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Qu(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());_f(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];_f(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Lo(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Vr(Qu(this.value))}}function wA(n){const e=[];return Lo(n.fields,((t,r)=>{const a=new Yn([t]);if(_f(r)){const l=wA(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new ss(e)}class lr{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new lr(e,0,He.min(),He.min(),He.min(),Vr.empty(),0)}static newFoundDocument(e,t,r,a){return new lr(e,1,t,He.min(),r,a,0)}static newNoDocument(e,t){return new lr(e,2,t,He.min(),He.min(),Vr.empty(),0)}static newUnknownDocument(e,t){return new lr(e,3,t,He.min(),He.min(),Vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pf{constructor(e,t){this.position=e,this.inclusive=t}}function sE(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?r=Me.comparator(Me.fromName(c.referenceValue),t.key):r=Ac(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function iE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oi(n.position[t],e.position[t]))return!1;return!0}class oh{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ij(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class TA{}class En extends TA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Oj(e,t,r):t==="array-contains"?new kj(e,r):t==="in"?new Mj(e,r):t==="not-in"?new Pj(e,r):t==="array-contains-any"?new Uj(e,r):new En(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Dj(e,r):new Lj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ac(t,this.value)):t!==null&&No(this.value)===No(t)&&this.matchesComparison(Ac(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends TA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ri(e,t)}matches(e){return AA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function AA(n){return n.op==="and"}function SA(n){return jj(n)&&AA(n)}function jj(n){for(const e of n.filters)if(e instanceof ri)return!1;return!0}function Ty(n){if(n instanceof En)return n.field.canonicalString()+n.op.toString()+Sc(n.value);if(SA(n))return n.filters.map((e=>Ty(e))).join(",");{const e=n.filters.map((t=>Ty(t))).join(",");return`${n.op}(${e})`}}function NA(n,e){return n instanceof En?(function(r,a){return a instanceof En&&r.op===a.op&&r.field.isEqual(a.field)&&Oi(r.value,a.value)})(n,e):n instanceof ri?(function(r,a){return a instanceof ri&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,d)=>l&&NA(c,a.filters[d])),!0):!1})(n,e):void qe(19439)}function CA(n){return n instanceof En?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sc(t.value)}`})(n):n instanceof ri?(function(t){return t.op.toString()+" {"+t.getFilters().map(CA).join(" ,")+"}"})(n):"Filter"}class Oj extends En{constructor(e,t,r){super(e,t,r),this.key=Me.fromName(r.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class Dj extends En{constructor(e,t){super(e,"in",t),this.keys=RA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Lj extends En{constructor(e,t){super(e,"not-in",t),this.keys=RA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function RA(n,e){return(e.arrayValue?.values||[]).map((t=>Me.fromName(t.referenceValue)))}class kj extends En{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return C0(t)&&ah(t.arrayValue,this.value)}}class Mj extends En{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ah(this.value.arrayValue,t)}}class Pj extends En{constructor(e,t){super(e,"not-in",t)}matches(e){if(ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ah(this.value.arrayValue,t)}}class Uj extends En{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!C0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ah(this.value.arrayValue,r)))}}class Vj{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function aE(n,e=null,t=[],r=[],a=null,l=null,c=null){return new Vj(n,e,t,r,a,l,c)}function R0(n){const e=ze(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Ty(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),im(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Sc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Sc(r))).join(",")),e.Te=t}return e.Te}function I0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ij(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iE(n.startAt,e.startAt)&&iE(n.endAt,e.endAt)}function Ay(n){return Me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Hc{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function qj(n,e,t,r,a,l,c,d){return new Hc(n,e,t,r,a,l,c,d)}function om(n){return new Hc(n)}function oE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function IA(n){return n.collectionGroup!==null}function Yu(n){const e=ze(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Cn(Yn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new oh(l,r))})),t.has(Yn.keyField().canonicalString())||e.Ie.push(new oh(Yn.keyField(),r))}return e.Ie}function Ni(n){const e=ze(n);return e.Ee||(e.Ee=jA(e,Yu(n))),e.Ee}function Bj(n){const e=ze(n);return e.de||(e.de=jA(e,n.explicitOrderBy)),e.de}function jA(n,e){if(n.limitType==="F")return aE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new oh(a.field,l)}));const t=n.endAt?new Pf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Pf(n.startAt.position,n.startAt.inclusive):null;return aE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Sy(n,e){const t=n.filters.concat([e]);return new Hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ny(n,e,t){return new Hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lm(n,e){return I0(Ni(n),Ni(e))&&n.limitType===e.limitType}function OA(n){return`${R0(Ni(n))}|lt:${n.limitType}`}function oc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>CA(a))).join(", ")}]`),im(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Sc(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Sc(a))).join(",")),`Target(${r})`})(Ni(n))}; limitType=${n.limitType})`}function cm(n,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Me.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,a){for(const l of Yu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(c,d,m){const g=sE(c,d,m);return c.inclusive?g<=0:g<0})(r.startAt,Yu(r),a)||r.endAt&&!(function(c,d,m){const g=sE(c,d,m);return c.inclusive?g>=0:g>0})(r.endAt,Yu(r),a))})(n,e)}function zj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DA(n){return(e,t)=>{let r=!1;for(const a of Yu(n)){const l=Hj(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function Hj(n,e,t){const r=n.field.isKeyField()?Me.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?Ac(m,g):qe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return qe(19790,{direction:n.dir})}}class bl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Lo(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return pA(this.inner)}size(){return this.innerSize}}const Fj=new en(Me.comparator);function Aa(){return Fj}const LA=new en(Me.comparator);function Vu(...n){let e=LA;for(const t of n)e=e.insert(t.key,t);return e}function kA(n){let e=LA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function il(){return Xu()}function MA(){return Xu()}function Xu(){return new bl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Gj=new en(Me.comparator),$j=new Cn(Me.comparator);function ct(...n){let e=$j;for(const t of n)e=e.add(t);return e}const Kj=new Cn(lt);function Qj(){return Kj}function j0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lf(e)?"-0":e}}function PA(n){return{integerValue:""+n}}function Yj(n,e){return xj(e)?PA(e):j0(n,e)}class um{constructor(){this._=void 0}}function Xj(n,e,t){return n instanceof lh?(function(a,l){const c={fields:{[vA]:{stringValue:yA},[_A]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&N0(l)&&(l=am(l)),l&&(c.fields[bA]=l),{mapValue:c}})(t,e):n instanceof Nc?VA(n,e):n instanceof Cc?qA(n,e):(function(a,l){const c=UA(a,l),d=lE(c)+lE(a.Ae);return wy(c)&&wy(a.Ae)?PA(d):j0(a.serializer,d)})(n,e)}function Wj(n,e,t){return n instanceof Nc?VA(n,e):n instanceof Cc?qA(n,e):t}function UA(n,e){return n instanceof Uf?(function(r){return wy(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class lh extends um{}class Nc extends um{constructor(e){super(),this.elements=e}}function VA(n,e){const t=BA(e);for(const r of n.elements)t.some((a=>Oi(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Cc extends um{constructor(e){super(),this.elements=e}}function qA(n,e){let t=BA(e);for(const r of n.elements)t=t.filter((a=>!Oi(a,r)));return{arrayValue:{values:t}}}class Uf extends um{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function lE(n){return pn(n.integerValue||n.doubleValue)}function BA(n){return C0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class O0{constructor(e,t){this.field=e,this.transform=t}}function Zj(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof Nc&&a instanceof Nc||r instanceof Cc&&a instanceof Cc?Tc(r.elements,a.elements,Oi):r instanceof Uf&&a instanceof Uf?Oi(r.Ae,a.Ae):r instanceof lh&&a instanceof lh})(n.transform,e.transform)}class Jj{constructor(e,t){this.version=e,this.transformResults=t}}class Ls{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ls}static exists(e){return new Ls(void 0,e)}static updateTime(e){return new Ls(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class hm{}function zA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new D0(n.key,Ls.none()):new Ah(n.key,n.data,Ls.none());{const t=n.data,r=Vr.empty();let a=new Cn(Yn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new ko(n.key,r,new ss(a.toArray()),Ls.none())}}function eO(n,e,t){n instanceof Ah?(function(a,l,c){const d=a.value.clone(),m=uE(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof ko?(function(a,l,c){if(!xf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=uE(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(HA(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Wu(n,e,t,r){return n instanceof Ah?(function(l,c,d,m){if(!xf(l.precondition,c))return d;const g=l.value.clone(),v=hE(l.fieldTransforms,m,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,r):n instanceof ko?(function(l,c,d,m){if(!xf(l.precondition,c))return d;const g=hE(l.fieldTransforms,m,c),v=c.data;return v.setAll(HA(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,r):(function(l,c,d){return xf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function tO(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=UA(r.transform,a||null);l!=null&&(t===null&&(t=Vr.empty()),t.set(r.field,l))}return t||null}function cE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Tc(r,a,((l,c)=>Zj(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ah extends hm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ko extends hm{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function HA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function uE(n,e,t){const r=new Map;_t(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,Wj(c,d,t[a]))}return r}function hE(n,e,t){const r=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);r.set(a.field,Xj(l,c,e))}return r}class D0 extends hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nO extends hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rO{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&eO(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Wu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=MA();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=zA(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(He.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ct())}isEqual(e){return this.batchId===e.batchId&&Tc(this.mutations,e.mutations,((t,r)=>cE(t,r)))&&Tc(this.baseMutations,e.baseMutations,((t,r)=>cE(t,r)))}}class L0{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){_t(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return Gj})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new L0(e,t,r,a)}}class sO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class iO{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}class aO{constructor(e,t){this.count=e,this.unchangedNames=t}}var xn,ft;function oO(n){switch(n){case ce.OK:return qe(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return qe(15467,{code:n})}}function FA(n){if(n===void 0)return Ta("GRPC error has no .code"),ce.UNKNOWN;switch(n){case xn.OK:return ce.OK;case xn.CANCELLED:return ce.CANCELLED;case xn.UNKNOWN:return ce.UNKNOWN;case xn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case xn.INTERNAL:return ce.INTERNAL;case xn.UNAVAILABLE:return ce.UNAVAILABLE;case xn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case xn.NOT_FOUND:return ce.NOT_FOUND;case xn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case xn.ABORTED:return ce.ABORTED;case xn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case xn.DATA_LOSS:return ce.DATA_LOSS;default:return qe(39323,{code:n})}}(ft=xn||(xn={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";function lO(){return new TextEncoder}const cO=new _o([4294967295,4294967295],0);function dE(n){const e=lO().encode(n),t=new sA;return t.update(e),new Uint8Array(t.digest())}function fE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new _o([t,r],0),new _o([a,l],0)]}class k0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new qu(`Invalid padding: ${t}`);if(r<0)throw new qu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new qu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_o.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(_o.fromNumber(r)));return a.compare(cO)===1&&(a=new _o([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=dE(e),[r,a]=fE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new k0(l,a,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=dE(e),[r,a]=fE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dm{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Sh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new dm(He.min(),a,new en(lt),Aa(),ct())}}class Sh{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Sh(r,t,ct(),ct(),ct())}}class Ef{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class GA{constructor(e,t){this.targetId=e,this.Ce=t}}class $A{constructor(e,t,r=Wn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class mE{constructor(){this.ve=0,this.Fe=pE(),this.Me=Wn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ct(),t=ct(),r=ct();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:qe(38017,{changeType:l})}})),new Sh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=pE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Aa(),this.Je=Wd(),this.He=Wd(),this.Ye=new en(lt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:qe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Ay(l))if(r===0){const c=new Me(l.path);this.et(t,c,lr.newNoDocument(c,He.min()))}else _t(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=So(r).toUint8Array()}catch(m){if(m instanceof gA)return wc("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new k0(c,a,l)}catch(m){return wc(m instanceof qu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Ay(d.target)){const m=new Me(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,lr.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let r=ct();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new dm(e,t,this.Ye,this.je,r);return this.je=Aa(),this.Je=Wd(),this.He=Wd(),this.Ye=new en(lt),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new mE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Cn(lt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Cn(lt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Wd(){return new en(Me.comparator)}function pE(){return new en(Me.comparator)}const hO={asc:"ASCENDING",desc:"DESCENDING"},dO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fO={and:"AND",or:"OR"};class mO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cy(n,e){return n.useProto3Json||im(e)?e:{value:e}}function Vf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pO(n,e){return Vf(n,e.toTimestamp())}function Ci(n){return _t(!!n,49232),He.fromTimestamp((function(t){const r=Ao(t);return new zt(r.seconds,r.nanos)})(n))}function M0(n,e){return Ry(n,e).canonicalString()}function Ry(n,e){const t=(function(a){return new kt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function QA(n){const e=kt.fromString(n);return _t(eS(e),10190,{key:e.toString()}),e}function Iy(n,e){return M0(n.databaseId,e.path)}function zg(n,e){const t=QA(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Me(XA(t))}function YA(n,e){return M0(n.databaseId,e)}function gO(n){const e=QA(n);return e.length===4?kt.emptyPath():XA(e)}function jy(n){return new kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function XA(n){return _t(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function gE(n,e,t){return{name:Iy(n,e),fields:t.value.mapValue.fields}}function yO(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:qe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(_t(v===void 0||typeof v=="string",58123),Wn.fromBase64String(v||"")):(_t(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Wn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?ce.UNKNOWN:FA(g.code);return new Ee(v,g.message||"")})(c);t=new $A(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=zg(n,r.document.name),l=Ci(r.document.updateTime),c=r.document.createTime?Ci(r.document.createTime):He.min(),d=new Vr({mapValue:{fields:r.document.fields}}),m=lr.newFoundDocument(a,l,c,d),g=r.targetIds||[],v=r.removedTargetIds||[];t=new Ef(g,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=zg(n,r.document),l=r.readTime?Ci(r.readTime):He.min(),c=lr.newNoDocument(a,l),d=r.removedTargetIds||[];t=new Ef([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=zg(n,r.document),l=r.removedTargetIds||[];t=new Ef([],l,a,null)}else{if(!("filter"in e))return qe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new aO(a,l),d=r.targetId;t=new GA(d,c)}}return t}function vO(n,e){let t;if(e instanceof Ah)t={update:gE(n,e.key,e.value)};else if(e instanceof D0)t={delete:Iy(n,e.key)};else if(e instanceof ko)t={update:gE(n,e.key,e.data),updateMask:NO(e.fieldMask)};else{if(!(e instanceof nO))return qe(16599,{Vt:e.type});t={verify:Iy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof lh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Nc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Cc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Uf)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw qe(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:pO(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:qe(27497)})(n,e.precondition)),t}function bO(n,e){return n&&n.length>0?(_t(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?Ci(a.updateTime):Ci(l);return c.isEqual(He.min())&&(c=Ci(l)),new Jj(c,a.transformResults||[])})(t,e)))):[]}function _O(n,e){return{documents:[YA(n,e.path)]}}function WA(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=YA(n,a);const l=(function(g){if(g.length!==0)return JA(ri.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(x){return{field:ho(x.field),direction:TO(x.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Cy(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function xO(n,e,t,r){const{ft:a,parent:l}=WA(n,e),c={},d=[];let m=0;return t.forEach((g=>{const v="aggregate_"+m++;c[v]=g.alias,g.aggregateType==="count"?d.push({alias:v,count:{}}):g.aggregateType==="avg"?d.push({alias:v,avg:{field:ho(g.fieldPath)}}):g.aggregateType==="sum"&&d.push({alias:v,sum:{field:ho(g.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:d,structuredQuery:a.structuredQuery},parent:a.parent},gt:c,parent:l}}function EO(n){let e=gO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){_t(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const x=ZA(E);return x instanceof ri&&SA(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((x=>(function(C){return new oh(lc(C.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(x)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let x;return x=typeof E=="object"?E.value:E,im(x)?null:x})(t.limit));let m=null;t.startAt&&(m=(function(E){const x=!!E.before,A=E.values||[];return new Pf(A,x)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const x=!E.before,A=E.values||[];return new Pf(A,x)})(t.endAt)),qj(e,a,c,l,d,"F",m,g)}function wO(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ZA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=lc(t.unaryFilter.field);return En.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=lc(t.unaryFilter.field);return En.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=lc(t.unaryFilter.field);return En.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=lc(t.unaryFilter.field);return En.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qe(61313);default:return qe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return En.create(lc(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qe(58110);default:return qe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ri.create(t.compositeFilter.filters.map((r=>ZA(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return qe(1026)}})(t.compositeFilter.op))})(n):qe(30097,{filter:n})}function TO(n){return hO[n]}function AO(n){return dO[n]}function SO(n){return fO[n]}function ho(n){return{fieldPath:n.canonicalString()}}function lc(n){return Yn.fromServerFormat(n.fieldPath)}function JA(n){return n instanceof En?(function(t){if(t.op==="=="){if(rE(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NAN"}};if(nE(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rE(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NAN"}};if(nE(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(t.field),op:AO(t.op),value:t.value}}})(n):n instanceof ri?(function(t){const r=t.getFilters().map((a=>JA(a)));return r.length===1?r[0]:{compositeFilter:{op:SO(t.op),filters:r}}})(n):qe(54877,{filter:n})}function NO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function eS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class po{constructor(e,t,r,a,l=He.min(),c=He.min(),d=Wn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new po(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class CO{constructor(e){this.yt=e}}function RO(n){const e=EO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ny(e,e.limit,"L"):e}class IO{constructor(){this.Cn=new jO}addToCollectionParentIndex(e,t){return this.Cn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(To.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(To.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class jO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Cn(kt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Cn(kt.comparator)).toArray()}}const yE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tS=41943040;class Ur{static withCacheSize(e){return new Ur(e,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}Ur.DEFAULT_COLLECTION_PERCENTILE=10,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ur.DEFAULT=new Ur(tS,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ur.DISABLED=new Ur(-1,0,0);class Rc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Rc(0)}static cr(){return new Rc(-1)}}const vE="LruGarbageCollector",OO=1048576;function bE([n,e],[t,r]){const a=lt(n,t);return a===0?lt(e,r):a}class DO{constructor(e){this.Ir=e,this.buffer=new Cn(bE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();bE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class LO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){we(vE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zc(t)?we(vE,"Ignoring IndexedDB error during garbage collection: ",t):await Bc(t)}await this.Vr(3e5)}))}}class kO{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(sm.ce);const r=new DO(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(yE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,c,d,m,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,d=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(g=Date.now(),ac()<=ot.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-v}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function MO(n,e){return new kO(n,e)}class PO{constructor(){this.changes=new bl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,lr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class UO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class VO{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Wu(r.mutation,a,ss.empty(),zt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ct()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ct()){const a=il();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=Vu();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=il();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ct())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,a){let l=Aa();const c=Xu(),d=(function(){return Xu()})();return t.forEach(((m,g)=>{const v=r.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof ko)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Wu(v.mutation,g,v.mutation.getFieldMask(),zt.now())):c.set(g.key,ss.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new UO(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Xu();let a=new en(((c,d)=>c-d)),l=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let v=r.get(m)||ss.empty();v=d.applyToLocalView(g,v),r.set(m,v);const E=(a.get(d.batchId)||ct()).add(m);a=a.insert(d.batchId,E)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,v=m.value,E=MA();v.forEach((x=>{if(!l.has(x)){const A=zA(t.get(x),r.get(x));A!==null&&E.set(x,A),l=l.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return fe.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return Me.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):IA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):fe.resolve(il());let d=rh,m=l;return c.next((g=>fe.forEach(g,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?fe.resolve():this.remoteDocumentCache.getEntry(e,v).next((x=>{m=m.insert(v,x)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,ct()))).next((v=>({batchId:d,changes:kA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next((r=>{let a=Vu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=Vu();return this.indexManager.getCollectionParents(e,l).next((d=>fe.forEach(d,(m=>{const g=(function(E,x){return new Hc(x,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((v=>{v.forEach(((E,x)=>{c=c.insert(E,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((m,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,lr.newInvalidDocument(v)))}));let d=Vu();return c.forEach(((m,g)=>{const v=l.get(m);v!==void 0&&Wu(v.mutation,g,ss.empty(),zt.now()),cm(t,g)&&(d=d.insert(m,g))})),d}))}}class qO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return fe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ci(a.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:RO(a.bundledQuery),readTime:Ci(a.readTime)}})(t)),fe.resolve()}}class BO{constructor(){this.overlays=new en(Me.comparator),this.qr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=il();return fe.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.St(e,t,l)})),fe.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const a=il(),l=t.length+1,c=new Me(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return fe.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new en(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let v=l.get(g.largestBatchId);v===null&&(v=il(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=il(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=a)););return fe.resolve(d)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new sO(t,r));let l=this.qr.get(t);l===void 0&&(l=ct(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}class zO{constructor(){this.sessionToken=Wn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}class P0{constructor(){this.Qr=new Cn(Ln.$r),this.Ur=new Cn(Ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ln(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Ln(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Me(new kt([])),r=new Ln(t,e),a=new Ln(t,e+1),l=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Me(new kt([])),r=new Ln(t,e),a=new Ln(t,e+1);let l=ct();return this.Ur.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ln(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ln{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Me.comparator(e.key,t.key)||lt(e.Yr,t.Yr)}static Kr(e,t){return lt(e.Yr,t.Yr)||Me.comparator(e.key,t.key)}}class HO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Cn(Ln.$r)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new rO(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new Ln(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return fe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?S0:this.tr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ln(t,0),a=new Ln(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn(lt);return t.forEach((a=>{const l=new Ln(a,0),c=new Ln(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{r=r.add(d.Yr)}))})),fe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;Me.isDocumentKey(l)||(l=l.child(""));const c=new Ln(new Me(l),0);let d=new Cn(lt);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Yr)),!0)}),c),fe.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){_t(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return fe.forEach(t.mutations,(a=>{const l=new Ln(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Ln(t,0),a=this.Zr.firstAfterOrEqual(r);return fe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class FO{constructor(e){this.ri=e,this.docs=(function(){return new en(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():lr.newInvalidDocument(t))}getEntries(e,t){let r=Aa();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():lr.newInvalidDocument(a))})),fe.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Aa();const c=t.path,d=new Me(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:v}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||yj(gj(v),r)<=0||(a.has(v.key)||cm(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return fe.resolve(l)}getAllFromCollectionGroup(e,t,r,a){qe(9500)}ii(e,t){return fe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new GO(this)}getSize(e){return fe.resolve(this.size)}}class GO extends PO{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),fe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class $O{constructor(e){this.persistence=e,this.si=new bl((t=>R0(t)),I0),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new P0,this.targetCount=0,this.ai=Rc.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),fe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Rc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Pr(t),fe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),fe.waitFor(l).next((()=>a))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this._i.containsKey(t))}}class nS{constructor(e,t){this.ui={},this.overlays={},this.ci=new sm(0),this.li=!1,this.li=!0,this.hi=new zO,this.referenceDelegate=e(this),this.Pi=new $O(this),this.indexManager=new IO,this.remoteDocumentCache=(function(a){return new FO(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new CO(t),this.Ii=new qO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new HO(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){we("MemoryPersistence","Starting transaction:",e);const a=new KO(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return fe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class KO extends bj{constructor(e){super(),this.currentSequenceNumber=e}}class U0{constructor(e){this.persistence=e,this.Ri=new P0,this.Vi=null}static mi(e){return new U0(e)}get fi(){if(this.Vi)return this.Vi;throw qe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,(r=>{const a=Me.fromPath(r);return this.gi(e,a).next((l=>{l||t.removeEntry(a,He.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class qf{constructor(e,t){this.persistence=e,this.pi=new bl((r=>Ej(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=MO(this,t)}static mi(e,t){return new qf(e,t)}Ei(){}di(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return fe.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?fe.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(r++,l.removeEntry(c,He.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bf(e.data.value)),t}br(e,t,r){return fe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return fe.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class V0{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=ct(),a=ct();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new V0(e,t.fromCache,r,a)}}class QO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class YO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ER()?8:_j(ur())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new QO;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(ac()<=ot.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",oc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(ac()<=ot.DEBUG&&we("QueryEngine","Query:",oc(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(ac()<=ot.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",oc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(t))):fe.resolve())}ys(e,t){if(oE(t))return fe.resolve(null);let r=Ni(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Ny(t,null,"F"),r=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=ct(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.Ds(t,d);return this.Cs(t,g,c,m.readTime)?this.ys(e,Ny(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,r,a){return oE(t)||a.isEqual(He.min())?fe.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,a)?fe.resolve(null):(ac()<=ot.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),oc(t)),this.vs(e,c,t,pj(a,rh)).next((d=>d)))}))}Ds(e,t){let r=new Cn(DA(e));return t.forEach(((a,l)=>{cm(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return ac()<=ot.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",oc(t)),this.ps.getDocumentsMatchingQuery(e,t,To.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const q0="LocalStore",XO=3e8;class WO{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new en(lt),this.xs=new bl((l=>R0(l)),I0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function ZO(n,e,t,r){return new WO(n,e,t,r)}async function rS(n,e){const t=ze(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let m=ct();for(const g of a){c.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(r,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function JO(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,g,v){const E=g.batch,x=E.keys();let A=fe.resolve();return x.forEach((C=>{A=A.next((()=>v.getEntry(m,C))).next((D=>{const R=g.docVersions.get(C);_t(R!==null,48541),D.version.compareTo(R)<0&&(E.applyToRemoteDocument(D,g),D.isValidDocument()&&(D.setReadTime(g.commitVersion),v.addEntry(D)))}))})),A.next((()=>d.mutationQueue.removeMutationBatch(m,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let m=ct();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function sS(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function e5(n,e){const t=ze(n),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((v,E)=>{const x=a.get(E);if(!x)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let A=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?A=A.withResumeToken(Wn.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,r)),a=a.insert(E,A),(function(D,R,U){return D.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=XO?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(x,A,v)&&d.push(t.Pi.updateTargetData(l,A))}));let m=Aa(),g=ct();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(t5(l,c,e.documentUpdates).next((v=>{m=v.ks,g=v.qs}))),!r.isEqual(He.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(v)}return fe.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function t5(n,e,t){let r=ct(),a=ct();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=Aa();return t.forEach(((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(He.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):we(q0,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function n5(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=S0),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function r5(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((l=>l?(a=l,fe.resolve(a)):t.Pi.allocateTargetId(r).next((c=>(a=new po(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Oy(n,e,t){const r=ze(n),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!zc(c))throw c;we(q0,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function _E(n,e,t){const r=ze(n);let a=He.min(),l=ct();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,v){const E=ze(m),x=E.xs.get(v);return x!==void 0?fe.resolve(E.Ms.get(x)):E.Pi.getTargetData(g,v)})(r,c,Ni(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:He.min(),t?l:ct()))).next((d=>(s5(r,zj(e),d),{documents:d,Qs:l})))))}function s5(n,e,t){let r=n.Os.get(e)||He.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Os.set(e,r)}class xE{constructor(){this.activeTargetIds=Qj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i5{constructor(){this.Mo=new xE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class a5{Oo(e){}shutdown(){}}const EE="ConnectivityMonitor";class wE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){we(EE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){we(EE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Zd=null;function Dy(){return Zd===null?Zd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zd++,"0x"+Zd.toString(16)}const Hg="RestConnection",o5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class l5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===kf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const c=Dy(),d=this.zo(e,t.toUriEncodedString());we(Hg,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(d),v=Pc(g);return this.Jo(e,d,m,r,v).then((E=>(we(Hg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw wc(Hg,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",r),E}))}Ho(e,t,r,a,l,c){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+qc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const r=o5[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class c5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ar="WebChannelConnection";class u5 extends l5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=Dy();return new Promise(((d,m)=>{const g=new iA;g.setWithCredentials(!0),g.listenOnce(aA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case vf.NO_ERROR:const E=g.getResponseJson();we(ar,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case vf.TIMEOUT:we(ar,`RPC '${e}' ${c} timed out`),m(new Ee(ce.DEADLINE_EXCEEDED,"Request time out"));break;case vf.HTTP_ERROR:const x=g.getStatus();if(we(ar,`RPC '${e}' ${c} failed with status:`,x,"response text:",g.getResponseText()),x>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const C=A?.error;if(C&&C.status&&C.message){const D=(function(U){const F=U.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(F)>=0?F:ce.UNKNOWN})(C.status);m(new Ee(D,C.message))}else m(new Ee(ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Ee(ce.UNAVAILABLE,"Connection failed."));break;default:qe(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{we(ar,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);we(ar,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=Dy(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=cA(),d=lA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=l.join("");we(ar,`Creating RPC '${e}' stream ${a}: ${v}`,m);const E=c.createWebChannel(v,m);this.I_(E);let x=!1,A=!1;const C=new c5({Yo:R=>{A?we(ar,`Not sending because RPC '${e}' stream ${a} is closed:`,R):(x||(we(ar,`Opening RPC '${e}' stream ${a} transport.`),E.open(),x=!0),we(ar,`RPC '${e}' stream ${a} sending:`,R),E.send(R))},Zo:()=>E.close()}),D=(R,U,F)=>{R.listen(U,(Y=>{try{F(Y)}catch(Q){setTimeout((()=>{throw Q}),0)}}))};return D(E,Uu.EventType.OPEN,(()=>{A||(we(ar,`RPC '${e}' stream ${a} transport opened.`),C.o_())})),D(E,Uu.EventType.CLOSE,(()=>{A||(A=!0,we(ar,`RPC '${e}' stream ${a} transport closed`),C.a_(),this.E_(E))})),D(E,Uu.EventType.ERROR,(R=>{A||(A=!0,wc(ar,`RPC '${e}' stream ${a} transport errored. Name:`,R.name,"Message:",R.message),C.a_(new Ee(ce.UNAVAILABLE,"The operation could not be completed")))})),D(E,Uu.EventType.MESSAGE,(R=>{if(!A){const U=R.data[0];_t(!!U,16349);const F=U,Y=F?.error||F[0]?.error;if(Y){we(ar,`RPC '${e}' stream ${a} received error:`,Y);const Q=Y.status;let ie=(function(k){const V=xn[k];if(V!==void 0)return FA(V)})(Q),ve=Y.message;ie===void 0&&(ie=ce.INTERNAL,ve="Unknown error status: "+Q+" with message "+Y.message),A=!0,C.a_(new Ee(ie,ve)),E.close()}else we(ar,`RPC '${e}' stream ${a} received:`,U),C.u_(U)}})),D(d,oA.STAT_EVENT,(R=>{R.stat===_y.PROXY?we(ar,`RPC '${e}' stream ${a} detected buffering proxy`):R.stat===_y.NOPROXY&&we(ar,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Fg(){return typeof document<"u"?document:null}function fm(n){return new mO(n,!0)}class iS{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&we("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const TE="PersistentStream";class aS{constructor(e,t,r,a,l,c,d,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Ta(t.toString()),Ta("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new Ee(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(TE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(we(TE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class h5 extends aS{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=yO(this.serializer,e),r=(function(l){if(!("targetChange"in l))return He.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?He.min():c.readTime?Ci(c.readTime):He.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=jy(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=Ay(m)?{documents:_O(l,m)}:{query:WA(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=KA(l,c.resumeToken);const g=Cy(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(He.min())>0){d.readTime=Vf(l,c.snapshotVersion.toTimestamp());const g=Cy(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const r=wO(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=jy(this.serializer),t.removeTarget=e,this.q_(t)}}class d5 extends aS{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return _t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=bO(e.writeResults,e.commitTime),r=Ci(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=jy(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>vO(this.serializer,r)))};this.q_(t)}}class f5{}class m5 extends f5{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Ee(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Ry(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ee(ce.UNKNOWN,l.toString())}))}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Ry(t,r),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ee(ce.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class p5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ta(t),this.aa=!1):we("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const dl="RemoteStore";class g5{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{_l(this)&&(we(dl,"Restarting streams for network reachability change."),await(async function(m){const g=ze(m);g.Ea.add(4),await Nh(g),g.Ra.set("Unknown"),g.Ea.delete(4),await mm(g)})(this))}))})),this.Ra=new p5(r,a)}}async function mm(n){if(_l(n))for(const e of n.da)await e(!0)}async function Nh(n){for(const e of n.da)await e(!1)}function oS(n,e){const t=ze(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),F0(t)?H0(t):Fc(t).O_()&&z0(t,e))}function B0(n,e){const t=ze(n),r=Fc(t);t.Ia.delete(e),r.O_()&&lS(t,e),t.Ia.size===0&&(r.O_()?r.L_():_l(t)&&t.Ra.set("Unknown"))}function z0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fc(n).Y_(e)}function lS(n,e){n.Va.Ue(e),Fc(n).Z_(e)}function H0(n){n.Va=new uO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Fc(n).start(),n.Ra.ua()}function F0(n){return _l(n)&&!Fc(n).x_()&&n.Ia.size>0}function _l(n){return ze(n).Ea.size===0}function cS(n){n.Va=void 0}async function y5(n){n.Ra.set("Online")}async function v5(n){n.Ia.forEach(((e,t)=>{z0(n,e)}))}async function b5(n,e){cS(n),F0(n)?(n.Ra.ha(e),H0(n)):n.Ra.set("Unknown")}async function _5(n,e,t){if(n.Ra.set("Online"),e instanceof $A&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(n,e)}catch(r){we(dl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bf(n,r)}else if(e instanceof Ef?n.Va.Ze(e):e instanceof GA?n.Va.st(e):n.Va.tt(e),!t.isEqual(He.min()))try{const r=await sS(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,g)=>{const v=l.Ia.get(m);if(!v)return;l.Ia.set(m,v.withResumeToken(Wn.EMPTY_BYTE_STRING,v.snapshotVersion)),lS(l,m);const E=new po(v.target,m,g,v.sequenceNumber);z0(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){we(dl,"Failed to raise snapshot:",r),await Bf(n,r)}}async function Bf(n,e,t){if(!zc(e))throw e;n.Ea.add(1),await Nh(n),n.Ra.set("Offline"),t||(t=()=>sS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{we(dl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await mm(n)}))}function uS(n,e){return e().catch((t=>Bf(n,t,e)))}async function pm(n){const e=ze(n),t=Co(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:S0;for(;x5(e);)try{const a=await n5(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,E5(e,a)}catch(a){await Bf(e,a)}hS(e)&&dS(e)}function x5(n){return _l(n)&&n.Ta.length<10}function E5(n,e){n.Ta.push(e);const t=Co(n);t.O_()&&t.X_&&t.ea(e.mutations)}function hS(n){return _l(n)&&!Co(n).x_()&&n.Ta.length>0}function dS(n){Co(n).start()}async function w5(n){Co(n).ra()}async function T5(n){const e=Co(n);for(const t of n.Ta)e.ea(t.mutations)}async function A5(n,e,t){const r=n.Ta.shift(),a=L0.from(r,e,t);await uS(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await pm(n)}async function S5(n,e){e&&Co(n).X_&&await(async function(r,a){if((function(c){return oO(c)&&c!==ce.ABORTED})(a.code)){const l=r.Ta.shift();Co(r).B_(),await uS(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await pm(r)}})(n,e),hS(n)&&dS(n)}async function AE(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),we(dl,"RemoteStore received new credentials");const r=_l(t);t.Ea.add(3),await Nh(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await mm(t)}async function N5(n,e){const t=ze(n);e?(t.Ea.delete(2),await mm(t)):e||(t.Ea.add(2),await Nh(t),t.Ra.set("Unknown"))}function Fc(n){return n.ma||(n.ma=(function(t,r,a){const l=ze(t);return l.sa(),new h5(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:y5.bind(null,n),t_:v5.bind(null,n),r_:b5.bind(null,n),H_:_5.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),F0(n)?H0(n):n.Ra.set("Unknown")):(await n.ma.stop(),cS(n))}))),n.ma}function Co(n){return n.fa||(n.fa=(function(t,r,a){const l=ze(t);return l.sa(),new d5(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:w5.bind(null,n),r_:S5.bind(null,n),ta:T5.bind(null,n),na:A5.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await pm(n)):(await n.fa.stop(),n.Ta.length>0&&(we(dl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class G0{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new G0(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $0(n,e){if(Ta("AsyncQueue",`${e}: ${n}`),zc(n))return new Ee(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class yc{static emptySet(e){return new yc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Me.comparator(t.key,r.key):(t,r)=>Me.comparator(t.key,r.key),this.keyedMap=Vu(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new yc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class SE{constructor(){this.ga=new en(Me.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):qe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ic{constructor(e,t,r,a,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Ic(e,t,yc.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class C5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class R5{constructor(){this.queries=NE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=ze(t),l=a.queries;a.queries=NE(),l.forEach(((c,d)=>{for(const m of d.Sa)m.onError(r)}))})(this,new Ee(ce.ABORTED,"Firestore shutting down"))}}function NE(){return new bl((n=>OA(n)),lm)}async function K0(n,e){const t=ze(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new C5,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=$0(c,`Initialization of query '${oc(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Y0(t)}async function Q0(n,e){const t=ze(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function I5(n,e){const t=ze(n);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(r=!0);c.wa=a}}r&&Y0(t)}function j5(n,e,t){const r=ze(n),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function Y0(n){n.Ca.forEach((e=>{e.next()}))}var Ly,CE;(CE=Ly||(Ly={})).Ma="default",CE.Cache="cache";class X0{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ly.Cache}}class fS{constructor(e){this.key=e}}class mS{constructor(e){this.key=e}}class O5{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ct(),this.mutatedKeys=ct(),this.eu=DA(e),this.tu=new yc(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new SE,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,E)=>{const x=a.get(v),A=cm(this.query,E)?E:null,C=!!x&&this.mutatedKeys.has(x.key),D=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let R=!1;x&&A?x.data.isEqual(A.data)?C!==D&&(r.track({type:3,doc:A}),R=!0):this.su(x,A)||(r.track({type:2,doc:A}),R=!0,(m&&this.eu(A,m)>0||g&&this.eu(A,g)<0)&&(d=!0)):!x&&A?(r.track({type:0,doc:A}),R=!0):x&&!A&&(r.track({type:1,doc:x}),R=!0,(m||g)&&(d=!0)),R&&(A?(c=c.add(A),l=D?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:c,iu:r,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(A,C){const D=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qe(20277,{Rt:R})}};return D(A)-D(C)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(r),a=a??!1;const d=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new Ic(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new SE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ct(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new mS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new fS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ct();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ic.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const W0="SyncEngine";class D5{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class L5{constructor(e){this.key=e,this.hu=!1}}class k5{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new bl((d=>OA(d)),lm),this.Iu=new Map,this.Eu=new Set,this.du=new en(Me.comparator),this.Au=new Map,this.Ru=new P0,this.Vu={},this.mu=new Map,this.fu=Rc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function M5(n,e,t=!0){const r=_S(n);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await pS(r,e,t,!0),a}async function P5(n,e){const t=_S(n);await pS(t,e,!0,!1)}async function pS(n,e,t,r){const a=await r5(n.localStore,Ni(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await U5(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&oS(n.remoteStore,a),d}async function U5(n,e,t,r,a){n.pu=(E,x,A)=>(async function(D,R,U,F){let Y=R.view.ru(U);Y.Cs&&(Y=await _E(D.localStore,R.query,!1).then((({documents:L})=>R.view.ru(L,Y))));const Q=F&&F.targetChanges.get(R.targetId),ie=F&&F.targetMismatches.get(R.targetId)!=null,ve=R.view.applyChanges(Y,D.isPrimaryClient,Q,ie);return IE(D,R.targetId,ve.au),ve.snapshot})(n,E,x,A);const l=await _E(n.localStore,e,!0),c=new O5(e,l.Qs),d=c.ru(l.documents),m=Sh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,m);IE(n,t,g.au);const v=new D5(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function V5(n,e,t){const r=ze(n),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!lm(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Oy(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&B0(r.remoteStore,a.targetId),ky(r,a.targetId)})).catch(Bc)):(ky(r,a.targetId),await Oy(r.localStore,a.targetId,!0))}async function q5(n,e){const t=ze(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),B0(t.remoteStore,r.targetId))}async function B5(n,e,t){const r=Q5(n);try{const a=await(function(c,d){const m=ze(c),g=zt.now(),v=d.reduce(((A,C)=>A.add(C.key)),ct());let E,x;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let C=Aa(),D=ct();return m.Ns.getEntries(A,v).next((R=>{C=R,C.forEach(((U,F)=>{F.isValidDocument()||(D=D.add(U))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,C))).next((R=>{E=R;const U=[];for(const F of d){const Y=tO(F,E.get(F.key).overlayedDocument);Y!=null&&U.push(new ko(F.key,Y,wA(Y.value.mapValue),Ls.exists(!0)))}return m.mutationQueue.addMutationBatch(A,g,U,d)})).next((R=>{x=R;const U=R.applyToLocalDocumentSet(E,D);return m.documentOverlayCache.saveOverlays(A,R.batchId,U)}))})).then((()=>({batchId:x.batchId,changes:kA(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,d,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new en(lt)),g=g.insert(d,m),c.Vu[c.currentUser.toKey()]=g})(r,a.batchId,t),await Ch(r,a.changes),await pm(r.remoteStore)}catch(a){const l=$0(a,"Failed to persist write");t.reject(l)}}async function gS(n,e){const t=ze(n);try{const r=await e5(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(_t(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?_t(c.hu,14607):a.removedDocuments.size>0&&(_t(c.hu,42227),c.hu=!1))})),await Ch(t,r,e)}catch(r){await Bc(r)}}function RE(n,e,t){const r=ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const m=ze(c);m.onlineState=d;let g=!1;m.queries.forEach(((v,E)=>{for(const x of E.Sa)x.va(d)&&(g=!0)})),g&&Y0(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function z5(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new en(Me.comparator);c=c.insert(l,lr.newNoDocument(l,He.min()));const d=ct().add(l),m=new dm(He.min(),new Map,new en(lt),c,d);await gS(r,m),r.du=r.du.remove(l),r.Au.delete(e),Z0(r)}else await Oy(r.localStore,e,!1).then((()=>ky(r,e,t))).catch(Bc)}async function H5(n,e){const t=ze(n),r=e.batch.batchId;try{const a=await JO(t.localStore,e);vS(t,r,null),yS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ch(t,a)}catch(a){await Bc(a)}}async function F5(n,e,t){const r=ze(n);try{const a=await(function(c,d){const m=ze(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return m.mutationQueue.lookupMutationBatch(g,d).next((E=>(_t(E!==null,37113),v=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>m.localDocuments.getDocuments(g,v)))}))})(r.localStore,e);vS(r,e,t),yS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ch(r,a)}catch(a){await Bc(a)}}function yS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function vS(n,e,t){const r=ze(n);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function ky(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||bS(n,r)}))}function bS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(B0(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Z0(n))}function IE(n,e,t){for(const r of t)r instanceof fS?(n.Ru.addReference(r.key,e),G5(n,r)):r instanceof mS?(we(W0,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||bS(n,r.key)):qe(19791,{wu:r})}function G5(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(we(W0,"New document in limbo: "+t),n.Eu.add(r),Z0(n))}function Z0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Me(kt.fromString(e)),r=n.fu.next();n.Au.set(r,new L5(t)),n.du=n.du.insert(t,r),oS(n.remoteStore,new po(Ni(om(t.path)),r,"TargetPurposeLimboResolution",sm.ce))}}async function Ch(n,e,t){const r=ze(n),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,m)=>{c.push(r.pu(m,e,t).then((g=>{if((g||t)&&r.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(g){a.push(g);const v=V0.As(m.targetId,g);l.push(v)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(m,g){const v=ze(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>fe.forEach(g,(x=>fe.forEach(x.Es,(A=>v.persistence.referenceDelegate.addReference(E,x.targetId,A))).next((()=>fe.forEach(x.ds,(A=>v.persistence.referenceDelegate.removeReference(E,x.targetId,A)))))))))}catch(E){if(!zc(E))throw E;we(q0,"Failed to update sequence numbers: "+E)}for(const E of g){const x=E.targetId;if(!E.fromCache){const A=v.Ms.get(x),C=A.snapshotVersion,D=A.withLastLimboFreeSnapshotVersion(C);v.Ms=v.Ms.insert(x,D)}}})(r.localStore,l))}async function $5(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){we(W0,"User change. New user:",e.toKey());const r=await rS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new Ee(ce.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ch(t,r.Ls)}}function K5(n,e){const t=ze(n),r=t.Au.get(e);if(r&&r.hu)return ct().add(r.key);{let a=ct();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function _S(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z5.bind(null,e),e.Pu.H_=I5.bind(null,e.eventManager),e.Pu.yu=j5.bind(null,e.eventManager),e}function Q5(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F5.bind(null,e),e}class zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ZO(this.persistence,new YO,e.initialUser,this.serializer)}Cu(e){return new nS(U0.mi,this.serializer)}Du(e){return new i5}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zf.provider={build:()=>new zf};class Y5 extends zf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){_t(this.persistence.referenceDelegate instanceof qf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new LO(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ur.withCacheSize(this.cacheSizeBytes):Ur.DEFAULT;return new nS((r=>qf.mi(r,t)),this.serializer)}}class My{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>RE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$5.bind(null,this.syncEngine),await N5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new R5})()}createDatastore(e){const t=fm(e.databaseInfo.databaseId),r=(function(l){return new u5(l)})(e.databaseInfo);return(function(l,c,d,m){return new m5(l,c,d,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,d){return new g5(r,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>RE(this.syncEngine,t,0)),(function(){return wE.v()?new wE:new a5})())}createSyncEngine(e,t){return(function(a,l,c,d,m,g,v){const E=new k5(a,l,c,d,m,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ze(t);we(dl,"RemoteStore shutting down."),r.Ea.add(5),await Nh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}My.provider={build:()=>new My};class J0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ta("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ro="FirestoreClient";class X5{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=or.UNAUTHENTICATED,this.clientId=A0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{we(Ro,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(we(Ro,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=$0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Gg(n,e){n.asyncQueue.verifyOperationInProgress(),we(Ro,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await rS(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function jE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await W5(n);we(Ro,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>AE(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>AE(e.remoteStore,a))),n._onlineComponents=e}async function W5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we(Ro,"Using user provided OfflineComponentProvider");try{await Gg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ce.FAILED_PRECONDITION||a.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;wc("Error using user provided cache. Falling back to memory cache: "+t),await Gg(n,new zf)}}else we(Ro,"Using default OfflineComponentProvider"),await Gg(n,new Y5(void 0));return n._offlineComponents}async function ev(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we(Ro,"Using user provided OnlineComponentProvider"),await jE(n,n._uninitializedComponentsProvider._online)):(we(Ro,"Using default OnlineComponentProvider"),await jE(n,new My))),n._onlineComponents}function Z5(n){return ev(n).then((e=>e.syncEngine))}function J5(n){return ev(n).then((e=>e.datastore))}async function Hf(n){const e=await ev(n),t=e.eventManager;return t.onListen=M5.bind(null,e.syncEngine),t.onUnlisten=V5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=P5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=q5.bind(null,e.syncEngine),t}function eD(n,e,t={}){const r=new Si;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const v=new J0({next:x=>{v.Nu(),c.enqueueAndForget((()=>Q0(l,E)));const A=x.docs.has(d);!A&&x.fromCache?g.reject(new Ee(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&x.fromCache&&m&&m.source==="server"?g.reject(new Ee(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(x)},error:x=>g.reject(x)}),E=new X0(om(d.path),v,{includeMetadataChanges:!0,qa:!0});return K0(l,E)})(await Hf(n),n.asyncQueue,e,t,r))),r.promise}function tD(n,e,t={}){const r=new Si;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const v=new J0({next:x=>{v.Nu(),c.enqueueAndForget((()=>Q0(l,E))),x.fromCache&&m.source==="server"?g.reject(new Ee(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(x)},error:x=>g.reject(x)}),E=new X0(d,v,{includeMetadataChanges:!0,qa:!0});return K0(l,E)})(await Hf(n),n.asyncQueue,e,t,r))),r.promise}function nD(n,e,t){const r=new Si;return n.asyncQueue.enqueueAndForget((async()=>{try{const a=await J5(n);r.resolve((async function(c,d,m){const g=ze(c),{request:v,gt:E,parent:x}=xO(g.serializer,Bj(d),m);g.connection.$o||delete v.parent;const A=(await g.Ho("RunAggregationQuery",g.serializer.databaseId,x,v,1)).filter((D=>!!D.result));_t(A.length===1,64727);const C=A[0].result?.aggregateFields;return Object.keys(C).reduce(((D,R)=>(D[E[R]]=C[R],D)),{})})(a,e,t))}catch(a){r.reject(a)}})),r.promise}function xS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const OE=new Map;const ES="firestore.googleapis.com",DE=!0;class LE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ES,this.ssl=DE}else this.host=e.host,this.ssl=e.ssl??DE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OO)throw new Ee(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ee(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ee(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ee(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gm{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new sj;switch(r.type){case"firstParty":return new lj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=OE.get(t);r&&(we("ComponentProvider","Removing Datastore"),OE.delete(t),r.terminate())})(this),Promise.resolve()}}function rD(n,e,t,r={}){n=Er(n,gm);const a=Pc(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;a&&(gT(`https://${d}`),yT("Firestore",!0)),l.host!==ES&&l.host!==d&&wc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:a,emulatorOptions:r};if(!xa(m,c)&&(n._setSettings(m),r.mockUserToken)){let g,v;if(typeof r.mockUserToken=="string")g=r.mockUserToken,v=or.MOCK_USER;else{g=fR(r.mockUserToken,n._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Ee(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new or(E)}n._authCredentials=new ij(new hA(g,v))}}class Mo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mo(this.firestore,e,this._query)}}class ln{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Th(t,ln._jsonSchema))return new ln(e,r||null,new Me(kt.fromString(t.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:wn("string",ln._jsonSchemaVersion),referencePath:wn("string")};class xo extends Mo{constructor(e,t,r){super(e,t,om(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Me(e))}withConverter(e){return new xo(this.firestore,e,this._path)}}function gt(n,e,...t){if(n=Tn(n),dA("collection","path",e),n instanceof gm){const r=kt.fromString(e,...t);return Kx(r),new xo(n,null,r)}{if(!(n instanceof ln||n instanceof xo))throw new Ee(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return Kx(r),new xo(n.firestore,null,r)}}function Ye(n,e,...t){if(n=Tn(n),arguments.length===1&&(e=A0.newId()),dA("doc","path",e),n instanceof gm){const r=kt.fromString(e,...t);return $x(r),new ln(n,null,new Me(r))}{if(!(n instanceof ln||n instanceof xo))throw new Ee(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return $x(r),new ln(n.firestore,n instanceof xo?n.converter:null,new Me(r))}}const kE="AsyncQueue";class ME{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iS(this,"async_queue_retry"),this._c=()=>{const r=Fg();r&&we(kE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Fg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Fg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Si;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zc(e))throw e;we(kE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ta("INTERNAL UNHANDLED ERROR: ",PE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=G0.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&qe(47125,{Pc:PE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function PE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function UE(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Di extends gm{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new ME,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ME(e),this._firestoreClient=void 0,await e}}}function sD(n,e){const t=typeof n=="object"?n:xT(),r=typeof n=="string"?n:kf,a=f0(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=hR("firestore");l&&rD(a,...l)}return a}function Rh(n){if(n._terminated)throw new Ee(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||iD(n),n._firestoreClient}function iD(n){const e=n._freezeSettings(),t=(function(a,l,c,d){return new Sj(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,xS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new X5(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}class aD{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class oD{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Is{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Is(Wn.fromBase64String(e))}catch(t){throw new Ee(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Is(Wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Is._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Th(e,Is._jsonSchema))return Is.fromBase64String(e.bytes)}}Is._jsonSchemaVersion="firestore/bytes/1.0",Is._jsonSchema={type:wn("string",Is._jsonSchemaVersion),bytes:wn("string")};class ym{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gc{constructor(e){this._methodName=e}}class Ri{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ri._jsonSchemaVersion}}static fromJSON(e){if(Th(e,Ri._jsonSchema))return new Ri(e.latitude,e.longitude)}}Ri._jsonSchemaVersion="firestore/geoPoint/1.0",Ri._jsonSchema={type:wn("string",Ri._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};class Ii{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ii._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Th(e,Ii._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ii(e.vectorValues);throw new Ee(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ii._jsonSchemaVersion="firestore/vectorValue/1.0",Ii._jsonSchema={type:wn("string",Ii._jsonSchemaVersion),vectorValues:wn("object")};const lD=/^__.*__$/;class cD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ko(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ah(e,this.data,t,this.fieldTransforms)}}class wS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ko(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function TS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qe(40011,{Ac:n})}}class vm{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ff(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(TS(this.Ac)&&lD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class uD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||fm(e)}Cc(e,t,r,a=!1){return new vm({Ac:e,methodName:t,Dc:r,path:Yn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bm(n){const e=n._freezeSettings(),t=fm(n._databaseId);return new uD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function AS(n,e,t,r,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);sv("Data must be an object, but it was:",c,r);const d=NS(r,c);let m,g;if(l.merge)m=new ss(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const x=Py(e,E,t);if(!c.contains(x))throw new Ee(ce.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);RS(v,x)||v.push(x)}m=new ss(v),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new cD(new Vr(d),m,g)}class _m extends Gc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _m}}function SS(n,e,t){return new vm({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class tv extends Gc{_toFieldTransform(e){return new O0(e.path,new lh)}isEqual(e){return e instanceof tv}}class nv extends Gc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=SS(this,e,!0),r=this.vc.map((l=>xl(l,t))),a=new Nc(r);return new O0(e.path,a)}isEqual(e){return e instanceof nv&&xa(this.vc,e.vc)}}class rv extends Gc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=SS(this,e,!0),r=this.vc.map((l=>xl(l,t))),a=new Cc(r);return new O0(e.path,a)}isEqual(e){return e instanceof rv&&xa(this.vc,e.vc)}}function hD(n,e,t,r){const a=n.Cc(1,e,t);sv("Data must be an object, but it was:",a,r);const l=[],c=Vr.empty();Lo(r,((m,g)=>{const v=iv(e,m,t);g=Tn(g);const E=a.yc(v);if(g instanceof _m)l.push(v);else{const x=xl(g,E);x!=null&&(l.push(v),c.set(v,x))}}));const d=new ss(l);return new wS(c,d,a.fieldTransforms)}function dD(n,e,t,r,a,l){const c=n.Cc(1,e,t),d=[Py(e,r,t)],m=[a];if(l.length%2!=0)throw new Ee(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)d.push(Py(e,l[x])),m.push(l[x+1]);const g=[],v=Vr.empty();for(let x=d.length-1;x>=0;--x)if(!RS(g,d[x])){const A=d[x];let C=m[x];C=Tn(C);const D=c.yc(A);if(C instanceof _m)g.push(A);else{const R=xl(C,D);R!=null&&(g.push(A),v.set(A,R))}}const E=new ss(g);return new wS(v,E,c.fieldTransforms)}function fD(n,e,t,r=!1){return xl(t,n.Cc(r?4:3,e))}function xl(n,e){if(CS(n=Tn(n)))return sv("Unsupported field value:",e,n),NS(n,e);if(n instanceof Gc)return(function(r,a){if(!TS(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const d of r){let m=xl(d,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,a){if((r=Tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Yj(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=zt.fromDate(r);return{timestampValue:Vf(a.serializer,l)}}if(r instanceof zt){const l=new zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vf(a.serializer,l)}}if(r instanceof Ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Is)return{bytesValue:KA(a.serializer,r._byteString)};if(r instanceof ln){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:M0(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Ii)return(function(c,d){return{mapValue:{fields:{[xA]:{stringValue:EA},[Mf]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return j0(d.serializer,g)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${rm(r)}`)})(n,e)}function NS(n,e){const t={};return pA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lo(n,((r,a)=>{const l=xl(a,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function CS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof zt||n instanceof Ri||n instanceof Is||n instanceof ln||n instanceof Gc||n instanceof Ii)}function sv(n,e,t){if(!CS(t)||!fA(t)){const r=rm(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Py(n,e,t){if((e=Tn(e))instanceof ym)return e._internalPath;if(typeof e=="string")return iv(n,e);throw Ff("Field path arguments must be of type string or ",n,!1,void 0,t)}const mD=new RegExp("[~\\*/\\[\\]]");function iv(n,e,t){if(e.search(mD)>=0)throw Ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ym(...e.split("."))._internalPath}catch{throw Ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ff(n,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new Ee(ce.INVALID_ARGUMENT,d+n+m)}function RS(n,e){return n.some((t=>t.isEqual(e)))}class IS{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pD extends IS{data(){return super.data()}}function xm(n,e){return typeof e=="string"?iv(n,e):e instanceof ym?e._internalPath:e._delegate._internalPath}function jS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ee(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class av{}class OS extends av{}function ls(n,e,...t){let r=[];e instanceof av&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((m=>m instanceof ov)).length,d=l.filter((m=>m instanceof Em)).length;if(c>1||c>0&&d>0)throw new Ee(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class Em extends OS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Em(e,t,r)}_apply(e){const t=this._parse(e);return LS(e._query,t),new Mo(e.firestore,e.converter,Sy(e._query,t))}_parse(e){const t=bm(e.firestore);return(function(l,c,d,m,g,v,E){let x;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ee(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){qE(E,v);const C=[];for(const D of E)C.push(VE(m,l,D));x={arrayValue:{values:C}}}else x=VE(m,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||qE(E,v),x=fD(d,c,E,v==="in"||v==="not-in");return En.create(g,v,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function DS(n,e,t){const r=e,a=xm("where",n);return Em._create(a,r,t)}class ov extends av{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ov(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ri.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)LS(c,m),c=Sy(c,m)})(e._query,t),new Mo(e.firestore,e.converter,Sy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lv extends OS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lv(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new Ee(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ee(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oh(l,c)})(e._query,this._field,this._direction);return new Mo(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new Hc(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function ii(n,e="asc"){const t=e,r=xm("orderBy",n);return lv._create(r,t)}function VE(n,e,t){if(typeof(t=Tn(t))=="string"){if(t==="")throw new Ee(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IA(e)&&t.indexOf("/")!==-1)throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(kt.fromString(t));if(!Me.isDocumentKey(r))throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tE(n,new Me(r))}if(t instanceof ln)return tE(n,t._key);throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rm(t)}.`)}function qE(n,e){if(!Array.isArray(n)||n.length===0)throw new Ee(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LS(n,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ee(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class gD{convertValue(e,t="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(So(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Lo(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[Mf].arrayValue?.values?.map((r=>pn(r.doubleValue)));return new Ii(t)}convertGeoPoint(e){return new Ri(pn(e.latitude),pn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=am(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sh(e));default:return null}}convertTimestamp(e){const t=Ao(e);return new zt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=kt.fromString(e);_t(eS(r),9688,{name:e});const a=new ih(r.get(1),r.get(3)),l=new Me(r.popFirst(5));return a.isEqual(t)||Ta(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function kS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}function yD(){return new aD("count")}class Bu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class al extends IS{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(xm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=al._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}al._jsonSchemaVersion="firestore/documentSnapshot/1.0",al._jsonSchema={type:wn("string",al._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class wf extends al{data(e={}){return super.data(e)}}class ol{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Bu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new wf(this._firestore,this._userDataWriter,r.key,r,new Bu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const m=new wf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Bu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new wf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Bu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:vD(d.type),doc:m,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ol._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=A0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qe(61501,{type:n})}}function hr(n){n=Er(n,ln);const e=Er(n.firestore,Di);return eD(Rh(e),n._key).then((t=>MS(e,n,t)))}ol._jsonSchemaVersion="firestore/querySnapshot/1.0",ol._jsonSchema={type:wn("string",ol._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")};class wm extends gD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Is(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function Rn(n){n=Er(n,Mo);const e=Er(n.firestore,Di),t=Rh(e),r=new wm(e);return jS(n._query),tD(t,n._query).then((a=>new ol(e,r,n,a)))}function jc(n,e,t){n=Er(n,ln);const r=Er(n.firestore,Di),a=kS(n.converter,e,t);return Tm(r,[AS(bm(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Ls.none())])}function Os(n,e,t,...r){n=Er(n,ln);const a=Er(n.firestore,Di),l=bm(a);let c;return c=typeof(e=Tn(e))=="string"||e instanceof ym?dD(l,"updateDoc",n._key,e,t,r):hD(l,"updateDoc",n._key,e),Tm(a,[c.toMutation(n._key,Ls.exists(!0))])}function Ih(n){return Tm(Er(n.firestore,Di),[new D0(n._key,Ls.none())])}function El(n,e){const t=Er(n.firestore,Di),r=Ye(n),a=kS(n.converter,e);return Tm(t,[AS(bm(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,Ls.exists(!1))]).then((()=>r))}function Uy(n,...e){n=Tn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||UE(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(UE(e[r])){const m=e[r];e[r]=m.next?.bind(m),e[r+1]=m.error?.bind(m),e[r+2]=m.complete?.bind(m)}let l,c,d;if(n instanceof ln)c=Er(n.firestore,Di),d=om(n._key.path),l={next:m=>{e[r]&&e[r](MS(c,n,m))},error:e[r+1],complete:e[r+2]};else{const m=Er(n,Mo);c=Er(m.firestore,Di),d=m._query;const g=new wm(c);l={next:v=>{e[r]&&e[r](new ol(c,g,m,v))},error:e[r+1],complete:e[r+2]},jS(n._query)}return(function(g,v,E,x){const A=new J0(x),C=new X0(v,A,E);return g.asyncQueue.enqueueAndForget((async()=>K0(await Hf(g),C))),()=>{A.Nu(),g.asyncQueue.enqueueAndForget((async()=>Q0(await Hf(g),C)))}})(Rh(c),d,a,l)}function Tm(n,e){return(function(r,a){const l=new Si;return r.asyncQueue.enqueueAndForget((async()=>B5(await Z5(r),a,l))),l.promise})(Rh(n),e)}function MS(n,e,t){const r=t.docs.get(e._key),a=new wm(n);return new al(n,a,e._key,r,new Bu(t.hasPendingWrites,t.fromCache),e.converter)}function Jd(n){return bD(n,{count:yD()})}function bD(n,e){const t=Er(n.firestore,Di),r=Rh(t),a=Tj(e,((l,c)=>new iO(c,l.aggregateType,l._internalFieldPath)));return nD(r,n._query,a).then((l=>(function(d,m,g){const v=new wm(d);return new oD(m,v,g)})(t,n,l)))}function fl(){return new tv("serverTimestamp")}function Vy(...n){return new nv("arrayUnion",n)}function zu(...n){return new rv("arrayRemove",n)}(function(e,t=!0){(function(a){qc=a})(Uc),xc(new ll("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Di(new aj(r.getProvider("auth-internal")),new cj(c,r.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ee(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ih(g.options.projectId,v)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),bo(zx,Hx,e),bo(zx,Hx,"esm2020")})();const _D={apiKey:"AIzaSyB3nTJlyM3K-XpvEUrXyk3leiVeMxzkTiU",authDomain:"forexvolcano-21180.firebaseapp.com",projectId:"forexvolcano-21180",storageBucket:"forexvolcano-21180.firebasestorage.app",messagingSenderId:"264687169302",appId:"1:264687169302:web:83322d7adc303b1f0c2a37",measurementId:"G-XTB0D1TPS6"},PS=_T(_D),Be=nj(PS),Se=sD(PS),xD=()=>{const[n,e]=P.useState(null),[t,r]=P.useState(!1),a=ki();P.useEffect(()=>{const c=Eh(Be,async d=>{if(e(d),d)try{const m=await hr(Ye(Se,"users",d.uid));m.exists()&&m.data().role==="admin"?r(!0):r(!1)}catch(m){console.error("Error checking admin role:",m),r(!1)}else r(!1)});return()=>c()},[]);const l=async()=>{try{await $3(Be),a("/")}catch(c){console.error("Error logging out",c)}};return f.jsx("nav",{className:"bg-surface border-b border-gray-800 sticky top-0 z-50",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex items-center justify-between h-16",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(rt,{to:"/",className:"flex-shrink-0",children:f.jsxs("span",{className:"text-secondary text-2xl font-bold tracking-tighter",children:["Forex",f.jsx("span",{className:"text-accent",children:"Volcano"})]})}),f.jsx("div",{className:"hidden md:block",children:f.jsxs("div",{className:"ml-10 flex items-baseline space-x-4",children:[f.jsx(rt,{to:"/analysis",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Analysis"}),f.jsx(rt,{to:"/academy",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Academy"}),f.jsx(rt,{to:"/news",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"News"})]})})]}),f.jsx("div",{className:"hidden md:block",children:f.jsx("div",{className:"ml-4 flex items-center md:ml-6",children:n?f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(rt,{to:"/community",className:"text-secondary hover:text-green-400 font-medium px-3 py-2",children:"Community"}),f.jsx(rt,{to:"/dashboard",className:"text-primary hover:text-green-400 font-medium px-3 py-2",children:"Dashboard"}),t&&f.jsx(rt,{to:"/admin",className:"text-accent hover:text-orange-400 font-medium px-3 py-2",children:"Admin Panel"}),f.jsx("button",{onClick:l,className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-md text-sm font-medium",children:"Logout"})]}):f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(rt,{to:"/login",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Login"}),f.jsx(rt,{to:"/register",className:"bg-primary hover:bg-green-600 text-white px-3 py-2 rounded-md text-sm font-medium",children:"Get Started"})]})})}),f.jsx("div",{className:"-mr-2 flex md:hidden",children:f.jsxs("button",{type:"button",className:"bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none","aria-controls":"mobile-menu","aria-expanded":"false",children:[f.jsx("span",{className:"sr-only",children:"Open main menu"}),f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})})})},ED=()=>f.jsx("footer",{className:"bg-[#05080f] border-t border-gray-800/50 py-12",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[f.jsxs("div",{className:"mb-6 md:mb-0 text-center md:text-left",children:[f.jsxs(rt,{to:"/",className:"text-2xl font-bold tracking-tighter text-secondary",children:["Forex",f.jsx("span",{className:"text-accent",children:"Volcano"})]}),f.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[" ",new Date().getFullYear()," ForexVolcano. All rights reserved."]})]}),f.jsxs("div",{className:"flex space-x-8",children:[f.jsx(rt,{to:"/analysis",className:"text-gray-400 hover:text-white transition-colors",children:"Analysis"}),f.jsx(rt,{to:"/news",className:"text-gray-400 hover:text-white transition-colors",children:"News"}),f.jsx(rt,{to:"/login",className:"text-gray-400 hover:text-white transition-colors",children:"Login"})]})]})})}),BE={primary:"bg-primary hover:bg-green-500 text-white shadow-lg shadow-green-900/20",secondary:"bg-secondary hover:bg-red-500 text-white shadow-lg shadow-red-900/20",accent:"bg-accent hover:bg-orange-500 text-white shadow-lg shadow-orange-900/20",outline:"border-2 border-slate-700 hover:border-slate-500 text-slate-300 hover:text-white bg-transparent",ghost:"text-slate-400 hover:text-white hover:bg-white/5"},zE={sm:"px-3 py-1.5 text-sm",md:"px-6 py-3 text-base font-semibold",lg:"px-8 py-4 text-lg font-bold"},Ct=({children:n,variant:e="primary",size:t="md",to:r=null,onClick:a,className:l="",...c})=>{const d="inline-flex items-center justify-center rounded-lg transition-all duration-300 transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0a0e17] focus:ring-slate-400",m=BE[e]||BE.primary,g=zE[t]||zE.md,v=`${d} ${m} ${g} ${l}`;return r?f.jsx(rt,{to:r,className:v,...c,children:n}):f.jsx("button",{onClick:a,className:v,...c,children:n})},wD=()=>f.jsxs("div",{className:"relative overflow-hidden bg-background pt-16 pb-32 lg:pt-32 lg:pb-40",children:[f.jsxs("div",{className:"absolute top-0 left-1/2 w-full -translate-x-1/2 h-full z-0 pointer-events-none",children:[f.jsx("div",{className:"absolute top-[-10%] left-[20%] w-[500px] h-[500px] bg-secondary/10 rounded-full blur-[100px] animate-pulse"}),f.jsx("div",{className:"absolute top-[10%] right-[20%] w-[400px] h-[400px] bg-accent/10 rounded-full blur-[80px]"})]}),f.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[f.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold tracking-tight text-white mb-6",children:["Predict the ",f.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-secondary to-accent",children:"Eruption"})]}),f.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-xl text-gray-400 mb-10",children:"Professional Forex education and institutional-grade analysis. Stop guessing. Start trading with the precision of a geologist."}),f.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[f.jsx(Ct,{to:"/register",variant:"primary",size:"lg",children:"Start Learning Free"}),f.jsx(Ct,{to:"/analysis",variant:"outline",size:"lg",children:"View Daily Analysis"})]}),f.jsxs("div",{className:"mt-16 relative",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background to-transparent z-10 h-20 bottom-0 pointer-events-none"}),f.jsxs("div",{className:"inline-flex items-center gap-8 py-3 px-8 rounded-full bg-white/5 border border-white/10 backdrop-blur-sm shadow-2xl",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-bold text-white",children:"EUR/USD"}),f.jsx("span",{className:"text-primary text-sm",children:" 1.0842"})]}),f.jsx("div",{className:"w-px h-4 bg-gray-700"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-bold text-white",children:"GBP/USD"}),f.jsx("span",{className:"text-secondary text-sm",children:" 1.2615"})]}),f.jsx("div",{className:"w-px h-4 bg-gray-700"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-bold text-white",children:"XAU/USD"}),f.jsx("span",{className:"text-accent text-sm",children:" 2045.50"})]})]})]})]})]}),TD=[{title:"Structured Learning Path",description:'From "What is a Pip?" to institutional order flow. Our curriculum guides you step-by-step through the chaos.',icon:f.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),borderColor:"border-primary/20",iconBg:"bg-primary/10"},{title:"Daily Market Analysis",description:`Don't trade alone. Get daily "Volcano Watch" reports identifying high-probability setups before they erupt.`,icon:f.jsx("svg",{className:"w-6 h-6 text-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),borderColor:"border-secondary/20",iconBg:"bg-secondary/10"},{title:"Risk Management",description:"The volcano is dangerous. Learn how to survive. Our strict risk protocols are the core of our philosophy.",icon:f.jsx("svg",{className:"w-6 h-6 text-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),borderColor:"border-accent/20",iconBg:"bg-accent/10"}],AD=()=>f.jsx("div",{className:"py-24 bg-surface",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-16",children:[f.jsx("h2",{className:"text-base text-accent font-semibold tracking-wide uppercase",children:"Why Choose Us"}),f.jsx("p",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl",children:"A Better Way to Trade"})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:TD.map((n,e)=>f.jsxs("div",{className:`p-8 bg-background/50 border ${n.borderColor} rounded-2xl hover:bg-background transition-all duration-300`,children:[f.jsx("div",{className:`w-12 h-12 ${n.iconBg} rounded-lg flex items-center justify-center mb-6`,children:n.icon}),f.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:n.title}),f.jsx("p",{className:"text-gray-400 leading-relaxed",children:n.description})]},e))})]})}),SD=()=>f.jsxs("div",{className:"flex flex-col min-h-screen",children:[f.jsx(wD,{}),f.jsx(AD,{})]}),US=({title:n,subtitle:e,image:t,content:r,footer:a,badges:l=[],className:c=""})=>f.jsxs("div",{className:`group relative flex flex-col overflow-hidden rounded-2xl bg-surface border border-gray-800 transition-all duration-300 hover:border-gray-700 hover:shadow-2xl hover:shadow-primary/5 ${c}`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent opacity-0 transition-opacity duration-500 group-hover:opacity-100 pointer-events-none"}),t&&f.jsxs("div",{className:"relative h-48 w-full overflow-hidden bg-gray-900",children:[f.jsx("img",{src:t,alt:n,className:"h-full w-full object-cover transition-transform duration-700 group-hover:scale-105",onError:d=>{d.target.style.display="none",d.target.parentElement.classList.add("flex","items-center","justify-center","bg-gray-800"),d.target.parentElement.innerHTML='<span class="text-4xl"></span>'}}),l.length>0&&f.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2",children:l.map((d,m)=>f.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded uppercase tracking-wider ${d.color||"bg-gray-800 text-white"}`,children:d.text},m))})]}),f.jsxs("div",{className:"flex flex-1 flex-col p-6 z-10",children:[e&&f.jsx("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-400",children:e}),f.jsx("h3",{className:"mb-3 text-xl font-bold text-white group-hover:text-primary transition-colors",children:n}),f.jsx("p",{className:"flex-1 text-gray-400 line-clamp-3 mb-6",children:r}),a&&f.jsx("div",{className:"mt-auto border-t border-gray-800 pt-4",children:a})]})]}),HE=[{id:"1",pair:"EUR/USD",direction:"Bearish",title:"EUR/USD Forming Head and Shoulders on 4H",content:"Price has failed to break the 1.0900 resistance level multiple times. We are observing a clear H&S pattern formation. If the neckline at 1.0820 breaks, we expect a sharp decline towards the 1.0750 liquidity zone.",author:"Volcano Chief",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=1000&auto=format&fit=crop"},{id:"2",pair:"XAU/USD",direction:"Bullish",title:"Gold Preparing for Eruption Above 2050",content:"Geopolitical tensions and a weakening dollar suggest Gold is accumulating for a massive leg up. Watch for a retest of 2035 as a potential entry point for long positions targeting new highs.",author:"Analyst Sarah",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1000&auto=format&fit=crop"},{id:"3",pair:"GBP/JPY",direction:"Bullish",title:"The Dragon is Waking Up",content:"GJ is respecting the ascending trendline perfectly. The recent pullback to 182.00 was rejected strongly. We are looking for continuation towards 185.00 level.",author:"Volcano Chief",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1526304640151-b59310398691?q=80&w=1000&auto=format&fit=crop"}],ND=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0),[a,l]=P.useState("All");P.useEffect(()=>{(async()=>{try{const v=ls(gt(Se,"analysis"),ii("timestamp","desc"));let x=(await Rn(v)).docs.map(A=>({id:A.id,...A.data()}));if(Be.currentUser){const A=await hr(Ye(Se,"users",Be.currentUser.uid));if(A.exists()){const C=A.data().preferences;C&&C.analysisCurrencies&&C.analysisCurrencies.length>0&&(x=x.filter(D=>C.analysisCurrencies.includes(D.pair)))}}x.length>0?e(x):Be.currentUser?e([]):e(HE)}catch(v){console.error("Error fetching analysis:",v),e(HE)}finally{r(!1)}})()},[]);const c=a==="All"?n:n.filter(g=>g.pair===a),d=["All",...new Set(n.map(g=>g.pair))],m=g=>{if(!g)return"";const v=g.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),E=document.createElement("DIV");return E.innerHTML=v,(E.textContent||E.innerText||"").trim()};return f.jsx("div",{className:"bg-background min-h-screen py-12",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsxs("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl tracking-tight",children:["Market ",f.jsx("span",{className:"text-primary",children:"Analysis"})]}),f.jsx("p",{className:"mt-4 text-xl text-gray-400",children:"Daily technical breakdowns and trade setups from our experts."})]}),f.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-12",children:d.map(g=>f.jsx("button",{onClick:()=>l(g),className:`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-200 ${a===g?"bg-primary text-white shadow-lg shadow-primary/25":"bg-surface text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:g},g))}),t?f.jsx("div",{className:"text-center text-white py-20",children:"Loading Volcano Data..."}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:c.map(g=>{const v=g.direction==="Bullish"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary";return f.jsx(rt,{to:`/analysis/${g.id}`,className:"block group",children:f.jsx(US,{title:g.title,image:g.image||g.chart_image_url,content:m(g.content),subtitle:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-gray-500 text-xs",children:g.timestamp?.seconds?new Date(g.timestamp.seconds*1e3).toLocaleDateString():g.timestamp||new Date().toLocaleDateString()}),f.jsx("span",{className:"text-gray-600",children:""}),f.jsxs("span",{className:"text-gray-500 text-xs text-accent",children:["By ",g.analystName||g.author||"Admin"]})]}),badges:[{text:g.pair,color:"bg-surface border border-gray-700 text-white"},{text:g.direction,color:v}],footer:f.jsxs(Ct,{variant:"ghost",size:"sm",className:"w-full justify-between group-hover:text-white",children:["Read Full Breakdown",f.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})},g.id)})})]})})},CD=()=>{const{id:n}=Mc(),e=ki(),[t,r]=P.useState(null),[a,l]=P.useState(!0);if(P.useEffect(()=>{(async()=>{try{const g=Ye(Se,"analysis",n),v=await hr(g);v.exists()?r({id:v.id,...v.data()}):(console.log("No such document!"),e("/analysis"))}catch(g){console.error("Error fetching analysis detail:",g)}finally{l(!1)}})()},[n,e]),a)return f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:"Loading..."});if(!t)return null;const c=t.timestamp?.seconds?new Date(t.timestamp.seconds*1e3).toLocaleDateString():t.timestamp||new Date().toLocaleDateString(),d=t.direction==="Bullish"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary";return f.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx(Ct,{variant:"ghost",onClick:()=>e("/analysis"),className:"mb-6 text-gray-400 hover:text-white",children:" Back to Analysis"}),f.jsxs("article",{className:"bg-surface rounded-2xl overflow-hidden border border-gray-800 shadow-2xl",children:[(t.image||t.chart_image_url)&&f.jsxs("div",{className:"w-full h-64 sm:h-96 relative",children:[f.jsx("img",{src:t.image||t.chart_image_url,alt:t.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent"})]}),f.jsxs("div",{className:"p-8 sm:p-12",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[f.jsx("span",{className:"text-gray-400 text-sm",children:c}),f.jsx("span",{className:"text-gray-600",children:""}),f.jsx("span",{className:"text-accent text-sm uppercase tracking-wider font-bold",children:t.analysisType||"Technical Analysis"})]}),f.jsxs("div",{className:"flex gap-3 mb-6",children:[f.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide bg-surface border border-gray-700 text-white",children:t.pair}),f.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${d}`,children:t.direction})]}),f.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-white mb-8 leading-tight",children:t.title}),f.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300 mb-16",dangerouslySetInnerHTML:{__html:t.content}}),(t.analystName||t.analystBio)&&f.jsxs("div",{className:"border-t border-gray-800 pt-12 mt-12 mb-8",children:[f.jsx("h3",{className:"text-2xl font-bold text-white mb-8",children:"Meet Your Analyst"}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-8 bg-black/20 p-8 rounded-2xl border border-gray-800/50",children:[f.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 shrink-0 rounded-full overflow-hidden ring-4 ring-primary/20",children:f.jsx("img",{src:t.analystImage||"https://images.unsplash.com/photo-1633332755192-727a05c4013d?w=400&auto=format&fit=crop&q=60",alt:t.analystName||"Analyst",className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"text-center sm:text-left",children:[f.jsx("h4",{className:"text-xl font-bold text-white mb-2",children:t.analystName||"Volcano Analyst"}),f.jsx("p",{className:"text-gray-400 leading-relaxed mb-4 whitespace-pre-wrap",children:t.analystBio||"Professional market analyst at Forex Volcano."}),f.jsxs("div",{className:"flex gap-4",children:[t.twitter&&f.jsx("a",{href:t.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),t.linkedin&&f.jsx("a",{href:t.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z",clipRule:"evenodd"})})}),t.telegram&&f.jsx("a",{href:t.telegram,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]})]})]})]})]})]})]})})},FE=[{id:"1",title:"NFP Smashes Expectations: 350k Jobs Added",impact:"High",affectedCurrencies:["USD","XAU","JPY"],content:"The Non-Farm Payrolls report showed a surprise surge in job creation, sending the Dollar Index (DXY) rocketing past 104.50. Traders should watch for pullbacks on Gold.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=1000&auto=format&fit=crop"},{id:"2",title:"ECB Signals Rate Cuts in June",impact:"Medium",affectedCurrencies:["EUR","GBP"],content:"Lagarde hinted that inflation is under control, opening the door for a 25bps cut. Euro is showing weakness against the Pound.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1526304640151-b59310398691?q=80&w=1000&auto=format&fit=crop"},{id:"3",title:"BoJ Maintains Ultra-Loose Policy",impact:"Low",affectedCurrencies:["JPY"],content:"No surprises from the Bank of Japan. Yield Curve Control remains in place. USD/JPY is drifting sideways in a tight range.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1000&auto=format&fit=crop"}],RD={High:"bg-red-500/20 text-red-500 border border-red-500/50",Medium:"bg-orange-500/20 text-orange-500 border border-orange-500/50",Low:"bg-yellow-500/20 text-yellow-500 border border-yellow-500/50"},ID=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0),a=l=>{if(!l)return"";const c=l.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),d=document.createElement("DIV");return d.innerHTML=c,(d.textContent||d.innerText||"").trim()};return P.useEffect(()=>{(async()=>{try{const c=ls(gt(Se,"news"),ii("timestamp","desc"));let m=(await Rn(c)).docs.map(g=>({id:g.id,...g.data()}));if(Be.currentUser){const g=await hr(Ye(Se,"users",Be.currentUser.uid));if(g.exists()){const v=g.data().preferences;v&&v.newsImpacts&&v.newsImpacts.length>0&&(m=m.filter(E=>v.newsImpacts.includes(E.impact)))}}m.length>0?e(m):Be.currentUser?e([]):e(FE)}catch(c){console.error("Error fetching news:",c),e(FE)}finally{r(!1)}})()},[]),f.jsx("div",{className:"bg-background min-h-screen py-12",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsxs("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl tracking-tight",children:["Market ",f.jsx("span",{className:"text-accent",children:"News"})]}),f.jsx("p",{className:"mt-4 text-xl text-gray-400",children:"Stay ahead of the volatility with real-time economic updates."})]}),t?f.jsx("div",{className:"text-center text-white py-20",children:"Loading Earth-shaking Events..."}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(l=>f.jsx(rt,{to:`/news/${l.id}`,className:"block group",children:f.jsx(US,{title:l.title,image:l.image,content:a(l.content),subtitle:f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-gray-500 text-xs",children:l.timestamp?.seconds?new Date(l.timestamp.seconds*1e3).toLocaleDateString():l.timestamp||new Date().toLocaleDateString()})}),badges:[{text:l.impact,color:RD[l.impact]||"bg-gray-800 text-white"},...(l.affectedCurrencies||[]).map(c=>({text:c,color:"bg-surface border border-gray-700 text-white"}))]})},l.id))})]})})},jD=()=>{const{id:n}=Mc(),e=ki(),[t,r]=P.useState(null),[a,l]=P.useState(!0);if(P.useEffect(()=>{(async()=>{try{const m=Ye(Se,"news",n),g=await hr(m);g.exists()?r({id:g.id,...g.data()}):(console.log("No such document!"),e("/news"))}catch(m){console.error("Error fetching news detail:",m)}finally{l(!1)}})()},[n,e]),a)return f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:"Loading..."});if(!t)return null;const c=t.timestamp?.seconds?new Date(t.timestamp.seconds*1e3).toLocaleDateString():t.timestamp||new Date().toLocaleDateString();return f.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx(Ct,{variant:"ghost",onClick:()=>e("/news"),className:"mb-6 text-gray-400 hover:text-white",children:" Back to News"}),f.jsxs("article",{className:"bg-surface rounded-2xl overflow-hidden border border-gray-800 shadow-2xl",children:[t.image&&f.jsxs("div",{className:"w-full h-64 sm:h-96 relative",children:[f.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent"})]}),f.jsxs("div",{className:"p-8 sm:p-12",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[f.jsx("span",{className:"text-gray-400 text-sm",children:c}),f.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide
                                ${t.impact==="High"?"bg-red-500/20 text-red-400":t.impact==="Medium"?"bg-orange-500/20 text-orange-400":"bg-green-500/20 text-green-400"}`,children:[t.impact," Impact"]}),t.affectedCurrencies&&t.affectedCurrencies.map&&t.affectedCurrencies.map(d=>f.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gray-800 text-gray-300 border border-gray-700",children:d},d))]}),f.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-white mb-8 leading-tight",children:t.title}),f.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300",dangerouslySetInnerHTML:{__html:t.content}})]})]})]})})},OD=()=>{const[n,e]=P.useState(""),[t,r]=P.useState(""),[a,l]=P.useState(""),[c,d]=P.useState(!1),m=ki(),g=async x=>{try{const A=await hr(Ye(Se,"users",x));A.exists()&&A.data().role==="admin"?m("/admin"):m("/dashboard")}catch(A){console.error("Error checking role:",A),m("/dashboard")}},v=async x=>{x.preventDefault(),l(""),d(!0);try{const A=await B3(Be,n,t);await g(A.user.uid)}catch(A){console.error(A),l("Failed to login. Please check your credentials.")}finally{d(!1)}},E=async()=>{try{const x=new Ti,A=await nA(Be,x);await g(A.user.uid)}catch(x){console.error(x),l("Failed to sign in with Google")}};return f.jsxs("div",{className:"min-h-screen bg-background flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[f.jsxs("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:["Sign in to ",f.jsx("span",{className:"text-secondary",children:"Volcano"})]}),f.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Or"," ",f.jsx(rt,{to:"/register",className:"font-medium text-primary hover:text-green-400",children:"start your 14-day free trial"})]})]}),f.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:f.jsxs("div",{className:"bg-surface py-8 px-4 shadow sm:rounded-lg sm:px-10 border border-gray-800",children:[f.jsxs("form",{className:"space-y-6",onSubmit:v,children:[a&&f.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 p-3 rounded text-sm text-center",children:a}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:x=>e(x.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:x=>r(x.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsx("div",{children:f.jsx(Ct,{type:"submit",variant:"primary",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",disabled:c,children:c?"Signing in...":"Sign in"})})]}),f.jsxs("div",{className:"mt-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-700"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-surface text-gray-400",children:"Or continue with"})})]}),f.jsx("div",{className:"mt-6 grid grid-cols-1 gap-3",children:f.jsx("div",{children:f.jsxs("button",{type:"button",onClick:E,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-700 rounded-md shadow-sm bg-gray-800 text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[f.jsx("span",{className:"sr-only",children:"Sign in with Google"}),f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 0.507 5.387 0 12s5.36 12 12 12c3.627 0 6.627-1.2 8.52-3.387 1.947-2.207 2.48-5.747 2.48-6.173 0-.613-.053-1.12-.133-1.507H12.48z"})})]})})})]})]})})]})},DD=()=>{const[n,e]=P.useState(""),[t,r]=P.useState(""),[a,l]=P.useState(""),[c,d]=P.useState(""),[m,g]=P.useState(!1),v=ki(),E=async A=>{A.preventDefault(),d(""),g(!0);try{const D=(await q3(Be,t,a)).user;await H3(D,{displayName:n}),await jc(Ye(Se,"users",D.uid),{uid:D.uid,username:n,email:t,role:"user",createdAt:new Date().toISOString(),avatar_url:`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=random`}),v("/dashboard")}catch(C){console.error(C),C.code==="auth/email-already-in-use"?d("Email already in use."):d("Failed to create account. Please try again.")}finally{g(!1)}},x=async()=>{try{const A=new Ti,D=(await nA(Be,A)).user;await jc(Ye(Se,"users",D.uid),{uid:D.uid,username:D.displayName,email:D.email,role:"user",createdAt:new Date().toISOString(),avatar_url:D.photoURL},{merge:!0}),v("/dashboard")}catch(A){console.error(A),d("Failed to sign up with Google")}};return f.jsxs("div",{className:"min-h-screen bg-background flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[f.jsxs("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:["Join the ",f.jsx("span",{className:"text-secondary",children:"Eruption"})]}),f.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Already have an account?"," ",f.jsx(rt,{to:"/login",className:"font-medium text-primary hover:text-green-400",children:"Sign in"})]})]}),f.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[f.jsx("div",{className:"bg-surface py-8 px-4 shadow sm:rounded-lg sm:px-10 border border-gray-800",children:f.jsxs("form",{className:"space-y-6",onSubmit:E,children:[c&&f.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 p-3 rounded text-sm text-center",children:c}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300",children:"Full Name"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:n,onChange:A=>e(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:A=>r(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,minLength:6,value:a,onChange:A=>l(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsx("div",{children:f.jsx(Ct,{type:"submit",variant:"primary",className:"w-full justify-center",disabled:m,children:m?"Creating Account...":"Sign up"})})]})}),f.jsxs("div",{className:"mt-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-700"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-surface text-gray-400",children:"Or continue with"})})]}),f.jsx("div",{className:"mt-6 grid grid-cols-1 gap-3",children:f.jsx("div",{children:f.jsxs("button",{type:"button",onClick:x,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-700 rounded-md shadow-sm bg-gray-800 text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[f.jsx("span",{className:"sr-only",children:"Sign up with Google"}),f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 0.507 5.387 0 12s5.36 12 12 12c3.627 0 6.627-1.2 8.52-3.387 1.947-2.207 2.48-5.747 2.48-6.173 0-.613-.053-1.12-.133-1.507H12.48z"})})]})})})]})]})]})},LD=({userProfile:n,setUserProfile:e})=>{const[t,r]=P.useState(n?.preferences||{newsImpacts:["High","Medium","Low"],analysisCurrencies:["XAUUSD","EURUSD","GBPUSD","BTCUSD","US30"],analysisTypes:["Technical","Fundamental"]}),[a,l]=P.useState(!1);P.useEffect(()=>{n?.preferences&&r(n.preferences)},[n]);const c=async()=>{l(!0);try{await jc(Ye(Se,"users",Be.currentUser.uid),{preferences:t},{merge:!0}),e({...n,preferences:t}),alert("Preferences saved!")}catch(m){console.error("Error saving preferences:",m),alert("Failed to save.")}finally{l(!1)}},d=(m,g)=>{r(v=>{const E=v[m]||[];return E.includes(g)?{...v,[m]:E.filter(x=>x!==g)}:{...v,[m]:[...E,g]}})};return f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Dashboard Customization"}),f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"News Notifications"}),f.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select which news impacts you want to see."}),f.jsx("div",{className:"flex gap-4",children:["High","Medium","Low"].map(m=>f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:t.newsImpacts?.includes(m),onChange:()=>d("newsImpacts",m),className:"form-checkbox text-primary rounded bg-gray-900 border-gray-700"}),f.jsxs("span",{className:"text-gray-300",children:[m," Impact"]})]},m))})]}),f.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[f.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Analysis Filters"}),f.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Choose your favorite pairs to track."}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["XAUUSD","EURUSD","GBPUSD","USDJPY","BTCUSD","ETHUSD","US30","NAS100"].map(m=>f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:t.analysisCurrencies?.includes(m),onChange:()=>d("analysisCurrencies",m),className:"form-checkbox text-primary rounded bg-gray-900 border-gray-700"}),f.jsx("span",{className:"text-gray-300",children:m})]},m))})]})]}),f.jsx("div",{className:"mt-8",children:f.jsx(Ct,{onClick:c,disabled:a,children:a?"Saving...":"Save Preferences"})})]})},kD=({userProfile:n,setUserProfile:e})=>{const[t,r]=P.useState(n?.username||""),[a,l]=P.useState(n?.bio||""),[c,d]=P.useState(!1),[m,g]=P.useState(!1);P.useEffect(()=>{n&&(r(n.username||""),l(n.bio||""))},[n]);const v=A=>new Promise((C,D)=>{const R=new FileReader;R.readAsDataURL(A),R.onload=U=>{const F=new Image;F.src=U.target.result,F.onload=()=>{const Y=document.createElement("canvas"),Q=300,ie=300;let ve=F.width,L=F.height;ve>L?ve>Q&&(L*=Q/ve,ve=Q):L>ie&&(ve*=ie/L,L=ie),Y.width=ve,Y.height=L,Y.getContext("2d").drawImage(F,0,0,ve,L);const V=Y.toDataURL("image/jpeg",.7);C(V)},F.onerror=Y=>D(Y)},R.onerror=U=>D(U)}),E=async A=>{const C=A.target.files[0];if(C){C.size>5*1024*1024&&console.log("Large file detected, compression will be applied."),d(!0);try{const D=await v(C);D.length>5e5&&console.warn("Image might be too large for smooth database performance"),await jc(Ye(Se,"users",Be.currentUser.uid),{avatar_url:D},{merge:!0}),e({...n,avatar_url:D})}catch(D){console.error("Error processing image:",D),alert("Failed to process image.")}finally{d(!1)}}},x=async()=>{g(!0);try{if(t!==n?.username){if(!t.trim()){alert("Username cannot be empty"),g(!1);return}const A=ls(gt(Se,"users"),DS("username","==",t));if(!(await Rn(A)).empty){alert("Username is already taken. Please choose another."),g(!1);return}}await jc(Ye(Se,"users",Be.currentUser.uid),{username:t,bio:a},{merge:!0}),e({...n,username:t,bio:a}),alert("Profile updated!")}catch(A){console.error("Error saving profile:",A),alert("Failed to save profile.")}finally{g(!1)}};return f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Profile Settings"}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[f.jsxs("div",{className:"flex flex-col items-center gap-4",children:[f.jsxs("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-800 relative group",children:[f.jsx("img",{src:n?.avatar_url||`https://ui-avatars.com/api/?name=${n?.username||"User"}`,alt:"Avatar",className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:f.jsx("span",{className:"text-xs text-white",children:"Change"})}),f.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"absolute inset-0 opacity-0 cursor-pointer"})]}),c&&f.jsx("span",{className:"text-xs text-primary",children:"Compressing & Saving..."})]}),f.jsxs("div",{className:"flex-1 space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Username (Public)"}),f.jsx("input",{type:"text",value:t,onChange:A=>r(A.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g. CryptoKing"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique handle for your public profile."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bio"}),f.jsx("textarea",{value:a,onChange:A=>l(A.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:outline-none h-24 resize-none",placeholder:"Tell us about your trading journey..."})]}),f.jsx("div",{children:f.jsx(Ct,{onClick:x,disabled:m,children:m?"Saving...":"Save Changes"})}),n?.username&&f.jsxs("div",{className:"mt-4 p-4 bg-gray-900/50 rounded-lg border border-gray-800 flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-gray-400",children:"Your Public Profile:"}),f.jsx(rt,{to:`/profile/${n.username}`,className:"text-primary hover:underline text-sm font-medium",children:"View Public Page "})]})]})]})]})},MD=()=>{const[n,e]=P.useState(null),[t,r]=P.useState(!0),[a,l]=P.useState("overview"),[c,d]=P.useState([]),[m,g]=P.useState({totalProgress:0,completed:0,avgQuiz:0});P.useEffect(()=>{(async()=>{if(Be.currentUser)try{const x=Ye(Se,"users",Be.currentUser.uid),A=await hr(x);A.exists()&&e(A.data());const C=await Rn(gt(Se,"users",Be.currentUser.uid,"course_progress")),D={};if(C.docs.forEach(R=>{D[R.id]=R.data()}),Object.keys(D).length>0){const F=(await Rn(gt(Se,"courses"))).docs.map(Q=>({id:Q.id,...Q.data()})).filter(Q=>D[Q.id]).map(Q=>{const ie=D[Q.id],ve=ie.completedLessonIds?.length||0;return{...Q,completedCount:ve,lastAccessed:ie.lastAccessed}});d(F);const Y=F.reduce((Q,ie)=>Q+ie.completedCount,0);g({totalProgress:Y,completed:F.length,avgQuiz:0})}}catch(x){console.error("Error fetching user data:",x)}finally{r(!1)}})()},[]);const v=n?.username||Be.currentUser?.displayName||"Trader";return console.log("Dashboard Render",{loading:t,userProfile:n,activeTab:a}),f.jsxs("div",{className:"min-h-screen bg-background text-white animate-fade-in",children:[f.jsx("div",{className:"bg-surface border-b border-gray-800",children:f.jsx("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-primary to-secondary p-[2px]",children:f.jsx("img",{src:n?.avatar_url||`https://ui-avatars.com/api/?name=${v}`,alt:"Profile",className:"h-full w-full rounded-full bg-background object-cover"})}),f.jsxs("div",{children:[f.jsxs("h1",{className:"text-3xl font-bold text-white",children:["Welcome back, ",f.jsx("span",{className:"text-primary",children:v})]}),f.jsx("p",{className:"mt-1 text-gray-400",children:"Ready to dominate the markets today?"})]})]})})}),f.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"flex space-x-6 mb-8 border-b border-gray-800 overflow-x-auto",children:[f.jsx("button",{onClick:()=>l("overview"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="overview"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Overview"}),f.jsx("button",{onClick:()=>l("profile"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="profile"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Profile"}),f.jsx("button",{onClick:()=>l("settings"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="settings"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Settings & Preferences"}),f.jsx("button",{onClick:()=>l("learning"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="learning"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"My Learning"})]}),a==="overview"&&f.jsxs("div",{className:"animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Account Overview"}),f.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3 mb-12",children:[f.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:f.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[f.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Lessons Completed"}),f.jsx("dd",{className:"mt-1 text-3xl font-semibold text-white",children:m.totalProgress})]})}),f.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:f.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[f.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Active Courses"}),f.jsx("dd",{className:"mt-1 text-3xl font-semibold text-primary",children:m.completed})]})}),f.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:f.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[f.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Quiz Score Avg"}),f.jsx("dd",{className:"mt-1 text-3xl font-semibold text-secondary",children:"N/A"})]})})]}),c.length>0&&f.jsxs("div",{className:"mb-8",children:[f.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Jump Back In"}),f.jsxs("div",{className:"bg-surface rounded-xl p-6 border border-gray-800 flex flex-col md:flex-row items-center gap-6",children:[f.jsx("div",{className:"w-full md:w-1/3 aspect-video rounded-lg overflow-hidden",children:f.jsx("img",{src:c[0].image,alt:c[0].title,className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"flex-1 w-full text-center md:text-left",children:[f.jsx("h4",{className:"text-xl font-bold text-white",children:c[0].title}),f.jsx("p",{className:"text-gray-400 mt-2 mb-4",children:"Continue where you left off."}),f.jsx(rt,{to:`/academy/${c[0].path||"General"}/${c[0].id}`,children:f.jsx(Ct,{variant:"primary",children:"Continue Learning"})})]})]})]})]}),a==="profile"&&f.jsx(kD,{userProfile:n,setUserProfile:e}),a==="settings"&&f.jsx(LD,{userProfile:n,setUserProfile:e}),a==="learning"&&f.jsxs("div",{className:"animate-fade-in",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Courses"}),f.jsx(rt,{to:"/academy",className:"text-primary text-sm hover:underline",children:"Browse All Courses"})]}),c.length>0?f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:c.map(E=>f.jsxs("div",{className:"bg-surface rounded-xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-colors group",children:[f.jsxs("div",{className:"h-48 overflow-hidden relative",children:[f.jsx("img",{src:E.image,alt:E.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),f.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(rt,{to:`/academy/${E.path||"General"}/${E.id}`,children:f.jsx(Ct,{variant:"primary",size:"sm",children:"Continue Learning"})})})]}),f.jsxs("div",{className:"p-6",children:[f.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:E.title}),f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[f.jsx("span",{children:"Lessons Completed"}),f.jsx("span",{children:E.completedCount})]}),f.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:f.jsx("div",{className:"h-2 rounded-full bg-secondary",style:{width:`${Math.min(E.completedCount/10*100,100)}%`}})})]})]})]},E.id))}):f.jsxs("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:[f.jsx("p",{className:"text-gray-400 mb-4",children:"You haven't started any courses yet."}),f.jsx(rt,{to:"/academy",children:f.jsx(Ct,{children:"Explore Academy"})})]})]})]})]})},PD=()=>{const[n,e]=P.useState(!1),[t,r]=P.useState(!0),a=ki();return P.useEffect(()=>{const l=Eh(Be,async c=>{if(c)try{const d=await hr(Ye(Se,"users",c.uid));d.exists()&&d.data().role==="admin"?e(!0):a("/dashboard")}catch(d){console.error("Admin check failed",d),a("/dashboard")}else a("/login");r(!1)});return()=>l()},[a]),t?f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold mb-2",children:"Verifying Clearance..."}),f.jsx("div",{className:"text-gray-400",children:"Please wait."})]})}):n?f.jsxs("div",{className:"min-h-screen bg-background flex",children:[f.jsxs("aside",{className:"w-64 bg-surface border-r border-gray-800 flex-shrink-0 hidden md:flex flex-col",children:[f.jsx("div",{className:"p-6 border-b border-gray-800",children:f.jsxs("span",{className:"text-xl font-bold text-white tracking-wider",children:["VOLCANO ",f.jsx("span",{className:"text-secondary text-base",children:"ADMIN"})]})}),f.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[f.jsx(Du,{to:"/admin",end:!0,children:"Dashboard"}),f.jsx(Du,{to:"/admin/news",children:"Manage News"}),f.jsx(Du,{to:"/admin/analysis",children:"Manage Analysis"}),f.jsx(Du,{to:"/admin/courses",children:"Manage Courses"}),f.jsx(Du,{to:"/admin/profile",children:"Analyst Profile"})]}),f.jsxs("div",{className:"p-4 border-t border-gray-800",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold",children:"A"}),f.jsxs("div",{className:"text-sm",children:[f.jsx("div",{className:"text-white font-medium",children:"Administrator"}),f.jsx("div",{className:"text-gray-500 text-xs",children:"Super User"})]})]}),f.jsx(Ct,{variant:"outline",size:"sm",className:"w-full",onClick:()=>a("/"),children:"Exit to Site"})]})]}),f.jsxs("div",{className:"md:hidden absolute top-0 left-0 right-0 h-16 bg-surface border-b border-gray-800 flex items-center px-4 justify-between z-20",children:[f.jsx("span",{className:"font-bold text-white",children:"Admin Panel"}),f.jsx(Ct,{size:"sm",onClick:()=>a("/"),children:"Exit"})]}),f.jsx("main",{className:"flex-1 overflow-auto p-8 pt-24 md:pt-8",children:f.jsx(w4,{})})]}):null},Du=({to:n,children:e,end:t=!1})=>f.jsx(lT,{to:n,end:t,className:({isActive:r})=>`block px-4 py-3 rounded-lg text-sm font-medium transition-colors ${r?"bg-primary/10 text-primary border border-primary/20":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:e}),UD=()=>{const[n,e]=P.useState({users:0,courses:0,analysis:0,news:0}),[t,r]=P.useState(!0);return P.useEffect(()=>{(async()=>{try{const l=await Jd(gt(Se,"users")),c=await Jd(gt(Se,"courses")),d=await Jd(gt(Se,"analysis")),m=await Jd(gt(Se,"news"));e({users:l.data().count,courses:c.data().count,analysis:d.data().count,news:m.data().count})}catch(l){console.error("Error fetching stats:",l)}finally{r(!1)}})()},[]),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"System Overview"}),f.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[f.jsx(ef,{title:"Total Users",value:t?"...":n.users,change:"Registered",color:"primary"}),f.jsx(ef,{title:"Active Courses",value:t?"...":n.courses,change:"Live",color:"white"}),f.jsx(ef,{title:"Analysis Posts",value:t?"...":n.analysis,change:"Market Updates",color:"secondary"}),f.jsx(ef,{title:"News Alerts",value:t?"...":n.news,change:"Published",color:"accent"})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Quick Actions"}),f.jsxs("div",{className:"space-y-3",children:[f.jsx($g,{label:"Post New Analysis",to:"/admin/analysis"}),f.jsx($g,{label:"Broadcast News Alert",to:"/admin/news"}),f.jsx($g,{label:"Review New User Signups",to:"#"})]})]}),f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"System Status"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(Kg,{label:"Database Connection",status:"Healthy"}),f.jsx(Kg,{label:"Auth Service",status:"Healthy"}),f.jsx(Kg,{label:"API Latency",status:"24ms"})]})]})]})]})},ef=({title:n,value:e,change:t,color:r})=>{const a={primary:"text-primary",secondary:"text-secondary",accent:"text-accent",white:"text-white"};return f.jsxs("div",{className:"bg-surface rounded-xl p-6 border border-gray-800",children:[f.jsx("p",{className:"text-sm font-medium text-gray-400",children:n}),f.jsxs("div",{className:"mt-2 flex items-baseline",children:[f.jsx("p",{className:`text-3xl font-semibold ${a[r]||"text-white"}`,children:e}),f.jsx("p",{className:"ml-2 text-sm text-gray-500",children:t})]})]})},$g=({label:n,to:e})=>f.jsxs(rt,{to:e,className:"flex items-center justify-between p-3 bg-background rounded-lg hover:bg-gray-800 cursor-pointer transition-colors",children:[f.jsx("span",{className:"text-gray-300",children:n}),f.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),Kg=({label:n,status:e})=>f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-400",children:n}),f.jsxs("span",{className:"flex items-center text-primary text-sm font-medium",children:[f.jsx("span",{className:"w-2 h-2 bg-primary rounded-full mr-2"}),e]})]});var VS=typeof global=="object"&&global&&global.Object===Object&&global,VD=typeof self=="object"&&self&&self.Object===Object&&self,Mi=VS||VD||Function("return this")(),Io=Mi.Symbol,qS=Object.prototype,qD=qS.hasOwnProperty,BD=qS.toString,Lu=Io?Io.toStringTag:void 0;function zD(n){var e=qD.call(n,Lu),t=n[Lu];try{n[Lu]=void 0;var r=!0}catch{}var a=BD.call(n);return r&&(e?n[Lu]=t:delete n[Lu]),a}var HD=Object.prototype,FD=HD.toString;function GD(n){return FD.call(n)}var $D="[object Null]",KD="[object Undefined]",GE=Io?Io.toStringTag:void 0;function $c(n){return n==null?n===void 0?KD:$D:GE&&GE in Object(n)?zD(n):GD(n)}function Sa(n){return n!=null&&typeof n=="object"}var ml=Array.isArray;function Po(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}function BS(n){return n}var QD="[object AsyncFunction]",YD="[object Function]",XD="[object GeneratorFunction]",WD="[object Proxy]";function cv(n){if(!Po(n))return!1;var e=$c(n);return e==YD||e==XD||e==QD||e==WD}var Qg=Mi["__core-js_shared__"],$E=(function(){var n=/[^.]+$/.exec(Qg&&Qg.keys&&Qg.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function ZD(n){return!!$E&&$E in n}var JD=Function.prototype,eL=JD.toString;function wl(n){if(n!=null){try{return eL.call(n)}catch{}try{return n+""}catch{}}return""}var tL=/[\\^$.*+?()[\]{}|]/g,nL=/^\[object .+?Constructor\]$/,rL=Function.prototype,sL=Object.prototype,iL=rL.toString,aL=sL.hasOwnProperty,oL=RegExp("^"+iL.call(aL).replace(tL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lL(n){if(!Po(n)||ZD(n))return!1;var e=cv(n)?oL:nL;return e.test(wl(n))}function cL(n,e){return n?.[e]}function Tl(n,e){var t=cL(n,e);return lL(t)?t:void 0}var qy=Tl(Mi,"WeakMap"),KE=Object.create,uL=(function(){function n(){}return function(e){if(!Po(e))return{};if(KE)return KE(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}})();function hL(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function dL(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var fL=800,mL=16,pL=Date.now;function gL(n){var e=0,t=0;return function(){var r=pL(),a=mL-(r-t);if(t=r,a>0){if(++e>=fL)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function yL(n){return function(){return n}}var Gf=(function(){try{var n=Tl(Object,"defineProperty");return n({},"",{}),n}catch{}})(),vL=Gf?function(n,e){return Gf(n,"toString",{configurable:!0,enumerable:!1,value:yL(e),writable:!0})}:BS,bL=gL(vL);function _L(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var xL=9007199254740991,EL=/^(?:0|[1-9]\d*)$/;function zS(n,e){var t=typeof n;return e=e??xL,!!e&&(t=="number"||t!="symbol"&&EL.test(n))&&n>-1&&n%1==0&&n<e}function uv(n,e,t){e=="__proto__"&&Gf?Gf(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function jh(n,e){return n===e||n!==n&&e!==e}var wL=Object.prototype,TL=wL.hasOwnProperty;function HS(n,e,t){var r=n[e];(!(TL.call(n,e)&&jh(r,t))||t===void 0&&!(e in n))&&uv(n,e,t)}function AL(n,e,t,r){var a=!t;t||(t={});for(var l=-1,c=e.length;++l<c;){var d=e[l],m=void 0;m===void 0&&(m=n[d]),a?uv(t,d,m):HS(t,d,m)}return t}var QE=Math.max;function SL(n,e,t){return e=QE(e===void 0?n.length-1:e,0),function(){for(var r=arguments,a=-1,l=QE(r.length-e,0),c=Array(l);++a<l;)c[a]=r[e+a];a=-1;for(var d=Array(e+1);++a<e;)d[a]=r[a];return d[e]=t(c),hL(n,this,d)}}function NL(n,e){return bL(SL(n,e,BS),n+"")}var CL=9007199254740991;function FS(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=CL}function Am(n){return n!=null&&FS(n.length)&&!cv(n)}function RL(n,e,t){if(!Po(t))return!1;var r=typeof e;return(r=="number"?Am(t)&&zS(e,t.length):r=="string"&&e in t)?jh(t[e],n):!1}function IL(n){return NL(function(e,t){var r=-1,a=t.length,l=a>1?t[a-1]:void 0,c=a>2?t[2]:void 0;for(l=n.length>3&&typeof l=="function"?(a--,l):void 0,c&&RL(t[0],t[1],c)&&(l=a<3?void 0:l,a=1),e=Object(e);++r<a;){var d=t[r];d&&n(e,d,r,l)}return e})}var jL=Object.prototype;function hv(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||jL;return n===t}function OL(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var DL="[object Arguments]";function YE(n){return Sa(n)&&$c(n)==DL}var GS=Object.prototype,LL=GS.hasOwnProperty,kL=GS.propertyIsEnumerable,By=YE((function(){return arguments})())?YE:function(n){return Sa(n)&&LL.call(n,"callee")&&!kL.call(n,"callee")};function ML(){return!1}var $S=typeof is=="object"&&is&&!is.nodeType&&is,XE=$S&&typeof as=="object"&&as&&!as.nodeType&&as,PL=XE&&XE.exports===$S,WE=PL?Mi.Buffer:void 0,UL=WE?WE.isBuffer:void 0,ch=UL||ML,VL="[object Arguments]",qL="[object Array]",BL="[object Boolean]",zL="[object Date]",HL="[object Error]",FL="[object Function]",GL="[object Map]",$L="[object Number]",KL="[object Object]",QL="[object RegExp]",YL="[object Set]",XL="[object String]",WL="[object WeakMap]",ZL="[object ArrayBuffer]",JL="[object DataView]",ek="[object Float32Array]",tk="[object Float64Array]",nk="[object Int8Array]",rk="[object Int16Array]",sk="[object Int32Array]",ik="[object Uint8Array]",ak="[object Uint8ClampedArray]",ok="[object Uint16Array]",lk="[object Uint32Array]",Bt={};Bt[ek]=Bt[tk]=Bt[nk]=Bt[rk]=Bt[sk]=Bt[ik]=Bt[ak]=Bt[ok]=Bt[lk]=!0;Bt[VL]=Bt[qL]=Bt[ZL]=Bt[BL]=Bt[JL]=Bt[zL]=Bt[HL]=Bt[FL]=Bt[GL]=Bt[$L]=Bt[KL]=Bt[QL]=Bt[YL]=Bt[XL]=Bt[WL]=!1;function ck(n){return Sa(n)&&FS(n.length)&&!!Bt[$c(n)]}function dv(n){return function(e){return n(e)}}var KS=typeof is=="object"&&is&&!is.nodeType&&is,Zu=KS&&typeof as=="object"&&as&&!as.nodeType&&as,uk=Zu&&Zu.exports===KS,Yg=uk&&VS.process,Oc=(function(){try{var n=Zu&&Zu.require&&Zu.require("util").types;return n||Yg&&Yg.binding&&Yg.binding("util")}catch{}})(),ZE=Oc&&Oc.isTypedArray,fv=ZE?dv(ZE):ck,hk=Object.prototype,dk=hk.hasOwnProperty;function QS(n,e){var t=ml(n),r=!t&&By(n),a=!t&&!r&&ch(n),l=!t&&!r&&!a&&fv(n),c=t||r||a||l,d=c?OL(n.length,String):[],m=d.length;for(var g in n)(e||dk.call(n,g))&&!(c&&(g=="length"||a&&(g=="offset"||g=="parent")||l&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||zS(g,m)))&&d.push(g);return d}function YS(n,e){return function(t){return n(e(t))}}var fk=YS(Object.keys,Object),mk=Object.prototype,pk=mk.hasOwnProperty;function gk(n){if(!hv(n))return fk(n);var e=[];for(var t in Object(n))pk.call(n,t)&&t!="constructor"&&e.push(t);return e}function yk(n){return Am(n)?QS(n):gk(n)}function vk(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var bk=Object.prototype,_k=bk.hasOwnProperty;function xk(n){if(!Po(n))return vk(n);var e=hv(n),t=[];for(var r in n)r=="constructor"&&(e||!_k.call(n,r))||t.push(r);return t}function XS(n){return Am(n)?QS(n,!0):xk(n)}var uh=Tl(Object,"create");function Ek(){this.__data__=uh?uh(null):{},this.size=0}function wk(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Tk="__lodash_hash_undefined__",Ak=Object.prototype,Sk=Ak.hasOwnProperty;function Nk(n){var e=this.__data__;if(uh){var t=e[n];return t===Tk?void 0:t}return Sk.call(e,n)?e[n]:void 0}var Ck=Object.prototype,Rk=Ck.hasOwnProperty;function Ik(n){var e=this.__data__;return uh?e[n]!==void 0:Rk.call(e,n)}var jk="__lodash_hash_undefined__";function Ok(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=uh&&e===void 0?jk:e,this}function pl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}pl.prototype.clear=Ek;pl.prototype.delete=wk;pl.prototype.get=Nk;pl.prototype.has=Ik;pl.prototype.set=Ok;function Dk(){this.__data__=[],this.size=0}function Sm(n,e){for(var t=n.length;t--;)if(jh(n[t][0],e))return t;return-1}var Lk=Array.prototype,kk=Lk.splice;function Mk(n){var e=this.__data__,t=Sm(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():kk.call(e,t,1),--this.size,!0}function Pk(n){var e=this.__data__,t=Sm(e,n);return t<0?void 0:e[t][1]}function Uk(n){return Sm(this.__data__,n)>-1}function Vk(n,e){var t=this.__data__,r=Sm(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Ia(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ia.prototype.clear=Dk;Ia.prototype.delete=Mk;Ia.prototype.get=Pk;Ia.prototype.has=Uk;Ia.prototype.set=Vk;var hh=Tl(Mi,"Map");function qk(){this.size=0,this.__data__={hash:new pl,map:new(hh||Ia),string:new pl}}function Bk(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Nm(n,e){var t=n.__data__;return Bk(e)?t[typeof e=="string"?"string":"hash"]:t.map}function zk(n){var e=Nm(this,n).delete(n);return this.size-=e?1:0,e}function Hk(n){return Nm(this,n).get(n)}function Fk(n){return Nm(this,n).has(n)}function Gk(n,e){var t=Nm(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function Al(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Al.prototype.clear=qk;Al.prototype.delete=zk;Al.prototype.get=Hk;Al.prototype.has=Fk;Al.prototype.set=Gk;function $k(n,e){for(var t=-1,r=e.length,a=n.length;++t<r;)n[a+t]=e[t];return n}var WS=YS(Object.getPrototypeOf,Object),Kk="[object Object]",Qk=Function.prototype,Yk=Object.prototype,ZS=Qk.toString,Xk=Yk.hasOwnProperty,Wk=ZS.call(Object);function Zk(n){if(!Sa(n)||$c(n)!=Kk)return!1;var e=WS(n);if(e===null)return!0;var t=Xk.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&ZS.call(t)==Wk}function Jk(){this.__data__=new Ia,this.size=0}function eM(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function tM(n){return this.__data__.get(n)}function nM(n){return this.__data__.has(n)}var rM=200;function sM(n,e){var t=this.__data__;if(t instanceof Ia){var r=t.__data__;if(!hh||r.length<rM-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Al(r)}return t.set(n,e),this.size=t.size,this}function ji(n){var e=this.__data__=new Ia(n);this.size=e.size}ji.prototype.clear=Jk;ji.prototype.delete=eM;ji.prototype.get=tM;ji.prototype.has=nM;ji.prototype.set=sM;var JS=typeof is=="object"&&is&&!is.nodeType&&is,JE=JS&&typeof as=="object"&&as&&!as.nodeType&&as,iM=JE&&JE.exports===JS,ew=iM?Mi.Buffer:void 0,tw=ew?ew.allocUnsafe:void 0;function eN(n,e){if(e)return n.slice();var t=n.length,r=tw?tw(t):new n.constructor(t);return n.copy(r),r}function aM(n,e){for(var t=-1,r=n==null?0:n.length,a=0,l=[];++t<r;){var c=n[t];e(c,t,n)&&(l[a++]=c)}return l}function oM(){return[]}var lM=Object.prototype,cM=lM.propertyIsEnumerable,nw=Object.getOwnPropertySymbols,uM=nw?function(n){return n==null?[]:(n=Object(n),aM(nw(n),function(e){return cM.call(n,e)}))}:oM;function hM(n,e,t){var r=e(n);return ml(n)?r:$k(r,t(n))}function zy(n){return hM(n,yk,uM)}var Hy=Tl(Mi,"DataView"),Fy=Tl(Mi,"Promise"),Gy=Tl(Mi,"Set"),rw="[object Map]",dM="[object Object]",sw="[object Promise]",iw="[object Set]",aw="[object WeakMap]",ow="[object DataView]",fM=wl(Hy),mM=wl(hh),pM=wl(Fy),gM=wl(Gy),yM=wl(qy),Ws=$c;(Hy&&Ws(new Hy(new ArrayBuffer(1)))!=ow||hh&&Ws(new hh)!=rw||Fy&&Ws(Fy.resolve())!=sw||Gy&&Ws(new Gy)!=iw||qy&&Ws(new qy)!=aw)&&(Ws=function(n){var e=$c(n),t=e==dM?n.constructor:void 0,r=t?wl(t):"";if(r)switch(r){case fM:return ow;case mM:return rw;case pM:return sw;case gM:return iw;case yM:return aw}return e});var vM=Object.prototype,bM=vM.hasOwnProperty;function _M(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&bM.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var $f=Mi.Uint8Array;function mv(n){var e=new n.constructor(n.byteLength);return new $f(e).set(new $f(n)),e}function xM(n,e){var t=mv(n.buffer);return new n.constructor(t,n.byteOffset,n.byteLength)}var EM=/\w*$/;function wM(n){var e=new n.constructor(n.source,EM.exec(n));return e.lastIndex=n.lastIndex,e}var lw=Io?Io.prototype:void 0,cw=lw?lw.valueOf:void 0;function TM(n){return cw?Object(cw.call(n)):{}}function tN(n,e){var t=e?mv(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var AM="[object Boolean]",SM="[object Date]",NM="[object Map]",CM="[object Number]",RM="[object RegExp]",IM="[object Set]",jM="[object String]",OM="[object Symbol]",DM="[object ArrayBuffer]",LM="[object DataView]",kM="[object Float32Array]",MM="[object Float64Array]",PM="[object Int8Array]",UM="[object Int16Array]",VM="[object Int32Array]",qM="[object Uint8Array]",BM="[object Uint8ClampedArray]",zM="[object Uint16Array]",HM="[object Uint32Array]";function FM(n,e,t){var r=n.constructor;switch(e){case DM:return mv(n);case AM:case SM:return new r(+n);case LM:return xM(n);case kM:case MM:case PM:case UM:case VM:case qM:case BM:case zM:case HM:return tN(n,t);case NM:return new r;case CM:case jM:return new r(n);case RM:return wM(n);case IM:return new r;case OM:return TM(n)}}function nN(n){return typeof n.constructor=="function"&&!hv(n)?uL(WS(n)):{}}var GM="[object Map]";function $M(n){return Sa(n)&&Ws(n)==GM}var uw=Oc&&Oc.isMap,KM=uw?dv(uw):$M,QM="[object Set]";function YM(n){return Sa(n)&&Ws(n)==QM}var hw=Oc&&Oc.isSet,XM=hw?dv(hw):YM,WM=1,rN="[object Arguments]",ZM="[object Array]",JM="[object Boolean]",e8="[object Date]",t8="[object Error]",sN="[object Function]",n8="[object GeneratorFunction]",r8="[object Map]",s8="[object Number]",iN="[object Object]",i8="[object RegExp]",a8="[object Set]",o8="[object String]",l8="[object Symbol]",c8="[object WeakMap]",u8="[object ArrayBuffer]",h8="[object DataView]",d8="[object Float32Array]",f8="[object Float64Array]",m8="[object Int8Array]",p8="[object Int16Array]",g8="[object Int32Array]",y8="[object Uint8Array]",v8="[object Uint8ClampedArray]",b8="[object Uint16Array]",_8="[object Uint32Array]",Lt={};Lt[rN]=Lt[ZM]=Lt[u8]=Lt[h8]=Lt[JM]=Lt[e8]=Lt[d8]=Lt[f8]=Lt[m8]=Lt[p8]=Lt[g8]=Lt[r8]=Lt[s8]=Lt[iN]=Lt[i8]=Lt[a8]=Lt[o8]=Lt[l8]=Lt[y8]=Lt[v8]=Lt[b8]=Lt[_8]=!0;Lt[t8]=Lt[sN]=Lt[c8]=!1;function Tf(n,e,t,r,a,l){var c,d=e&WM;if(c!==void 0)return c;if(!Po(n))return n;var m=ml(n);if(m)c=_M(n);else{var g=Ws(n),v=g==sN||g==n8;if(ch(n))return eN(n,d);if(g==iN||g==rN||v&&!a)c=v?{}:nN(n);else{if(!Lt[g])return a?n:{};c=FM(n,g,d)}}l||(l=new ji);var E=l.get(n);if(E)return E;l.set(n,c),XM(n)?n.forEach(function(C){c.add(Tf(C,e,t,C,n,l))}):KM(n)&&n.forEach(function(C,D){c.set(D,Tf(C,e,t,D,n,l))});var x=zy,A=m?void 0:x(n);return _L(A||n,function(C,D){A&&(D=C,C=n[D]),HS(c,D,Tf(C,e,t,D,n,l))}),c}var x8=1,E8=4;function vc(n){return Tf(n,x8|E8)}var w8="__lodash_hash_undefined__";function T8(n){return this.__data__.set(n,w8),this}function A8(n){return this.__data__.has(n)}function Kf(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Al;++e<t;)this.add(n[e])}Kf.prototype.add=Kf.prototype.push=T8;Kf.prototype.has=A8;function S8(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function N8(n,e){return n.has(e)}var C8=1,R8=2;function aN(n,e,t,r,a,l){var c=t&C8,d=n.length,m=e.length;if(d!=m&&!(c&&m>d))return!1;var g=l.get(n),v=l.get(e);if(g&&v)return g==e&&v==n;var E=-1,x=!0,A=t&R8?new Kf:void 0;for(l.set(n,e),l.set(e,n);++E<d;){var C=n[E],D=e[E];if(r)var R=c?r(D,C,E,e,n,l):r(C,D,E,n,e,l);if(R!==void 0){if(R)continue;x=!1;break}if(A){if(!S8(e,function(U,F){if(!N8(A,F)&&(C===U||a(C,U,t,r,l)))return A.push(F)})){x=!1;break}}else if(!(C===D||a(C,D,t,r,l))){x=!1;break}}return l.delete(n),l.delete(e),x}function I8(n){var e=-1,t=Array(n.size);return n.forEach(function(r,a){t[++e]=[a,r]}),t}function j8(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var O8=1,D8=2,L8="[object Boolean]",k8="[object Date]",M8="[object Error]",P8="[object Map]",U8="[object Number]",V8="[object RegExp]",q8="[object Set]",B8="[object String]",z8="[object Symbol]",H8="[object ArrayBuffer]",F8="[object DataView]",dw=Io?Io.prototype:void 0,Xg=dw?dw.valueOf:void 0;function G8(n,e,t,r,a,l,c){switch(t){case F8:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case H8:return!(n.byteLength!=e.byteLength||!l(new $f(n),new $f(e)));case L8:case k8:case U8:return jh(+n,+e);case M8:return n.name==e.name&&n.message==e.message;case V8:case B8:return n==e+"";case P8:var d=I8;case q8:var m=r&O8;if(d||(d=j8),n.size!=e.size&&!m)return!1;var g=c.get(n);if(g)return g==e;r|=D8,c.set(n,e);var v=aN(d(n),d(e),r,a,l,c);return c.delete(n),v;case z8:if(Xg)return Xg.call(n)==Xg.call(e)}return!1}var $8=1,K8=Object.prototype,Q8=K8.hasOwnProperty;function Y8(n,e,t,r,a,l){var c=t&$8,d=zy(n),m=d.length,g=zy(e),v=g.length;if(m!=v&&!c)return!1;for(var E=m;E--;){var x=d[E];if(!(c?x in e:Q8.call(e,x)))return!1}var A=l.get(n),C=l.get(e);if(A&&C)return A==e&&C==n;var D=!0;l.set(n,e),l.set(e,n);for(var R=c;++E<m;){x=d[E];var U=n[x],F=e[x];if(r)var Y=c?r(F,U,x,e,n,l):r(U,F,x,n,e,l);if(!(Y===void 0?U===F||a(U,F,t,r,l):Y)){D=!1;break}R||(R=x=="constructor")}if(D&&!R){var Q=n.constructor,ie=e.constructor;Q!=ie&&"constructor"in n&&"constructor"in e&&!(typeof Q=="function"&&Q instanceof Q&&typeof ie=="function"&&ie instanceof ie)&&(D=!1)}return l.delete(n),l.delete(e),D}var X8=1,fw="[object Arguments]",mw="[object Array]",tf="[object Object]",W8=Object.prototype,pw=W8.hasOwnProperty;function Z8(n,e,t,r,a,l){var c=ml(n),d=ml(e),m=c?mw:Ws(n),g=d?mw:Ws(e);m=m==fw?tf:m,g=g==fw?tf:g;var v=m==tf,E=g==tf,x=m==g;if(x&&ch(n)){if(!ch(e))return!1;c=!0,v=!1}if(x&&!v)return l||(l=new ji),c||fv(n)?aN(n,e,t,r,a,l):G8(n,e,m,t,r,a,l);if(!(t&X8)){var A=v&&pw.call(n,"__wrapped__"),C=E&&pw.call(e,"__wrapped__");if(A||C){var D=A?n.value():n,R=C?e.value():e;return l||(l=new ji),a(D,R,t,r,l)}}return x?(l||(l=new ji),Y8(n,e,t,r,a,l)):!1}function oN(n,e,t,r,a){return n===e?!0:n==null||e==null||!Sa(n)&&!Sa(e)?n!==n&&e!==e:Z8(n,e,t,r,oN,a)}function J8(n){return function(e,t,r){for(var a=-1,l=Object(e),c=r(e),d=c.length;d--;){var m=c[++a];if(t(l[m],m,l)===!1)break}return e}}var e9=J8();function $y(n,e,t){(t!==void 0&&!jh(n[e],t)||t===void 0&&!(e in n))&&uv(n,e,t)}function t9(n){return Sa(n)&&Am(n)}function Ky(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function n9(n){return AL(n,XS(n))}function r9(n,e,t,r,a,l,c){var d=Ky(n,t),m=Ky(e,t),g=c.get(m);if(g){$y(n,t,g);return}var v=l?l(d,m,t+"",n,e,c):void 0,E=v===void 0;if(E){var x=ml(m),A=!x&&ch(m),C=!x&&!A&&fv(m);v=m,x||A||C?ml(d)?v=d:t9(d)?v=dL(d):A?(E=!1,v=eN(m,!0)):C?(E=!1,v=tN(m,!0)):v=[]:Zk(m)||By(m)?(v=d,By(d)?v=n9(d):(!Po(d)||cv(d))&&(v=nN(m))):E=!1}E&&(c.set(m,v),a(v,m,r,l,c),c.delete(m)),$y(n,t,v)}function lN(n,e,t,r,a){n!==e&&e9(e,function(l,c){if(a||(a=new ji),Po(l))r9(n,e,c,t,lN,r,a);else{var d=r?r(Ky(n,c),l,c+"",n,e,a):void 0;d===void 0&&(d=l),$y(n,c,d)}},XS)}function fo(n,e){return oN(n,e)}var Eo=IL(function(n,e,t){lN(n,e,t)}),Oe=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(Oe||{});class Li{constructor(e,t,r={}){this.attrName=e,this.keyName=t;const a=Oe.TYPE&Oe.ATTRIBUTE;this.scope=r.scope!=null?r.scope&Oe.LEVEL|a:Oe.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}}class bc extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const cN=class Qy{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,t)}return null}create(e,t,r){const a=this.query(t);if(a==null)throw new bc(`Unable to create ${t} blot`);const l=a,c=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:l.create(r),d=new l(e,c,r);return Qy.blots.set(d.domNode,d),d}find(e,t=!1){return Qy.find(e,t)}query(e,t=Oe.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&Oe.LEVEL&Oe.BLOCK?r=this.types.block:e&Oe.LEVEL&Oe.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(a=>(r=this.classes[a],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&t&Oe.LEVEL&r.scope&&t&Oe.TYPE&r.scope?r:null}register(...e){return e.map(t=>{const r="blotName"in t,a="attrName"in t;if(!r&&!a)throw new bc("Invalid definition");if(r&&t.blotName==="abstract")throw new bc("Cannot register abstract class");const l=r?t.blotName:a?t.attrName:void 0;return this.types[l]=t,a?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):r&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(c=>c.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(c=>{(this.tags[c]==null||t.className==null)&&(this.tags[c]=t)}))),t})}};cN.blots=new WeakMap;let Dc=cN;function gw(n,e){return(n.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}class s9 extends Li{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){gw(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const t=(gw(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}}const ai=s9;function Wg(n){const e=n.split("-"),t=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+t}class i9 extends Li{static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[Wg(this.keyName)]=t,!0):!1}remove(e){e.style[Wg(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const t=e.style[Wg(this.keyName)];return this.canAdd(e,t)?t:""}}const Uo=i9;class a9{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Dc.find(this.domNode);if(e==null)return;const t=Li.keys(this.domNode),r=ai.keys(this.domNode),a=Uo.keys(this.domNode);t.concat(r).concat(a).forEach(l=>{const c=e.scroll.query(l,Oe.ATTRIBUTE);c instanceof Li&&(this.attributes[c.attrName]=c)})}copy(e){Object.keys(this.attributes).forEach(t=>{const r=this.attributes[t].value(this.domNode);e.format(t,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}}const Cm=a9,uN=class{constructor(e,t){this.scroll=e,this.domNode=t,Dc.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new bc("Blot definition missing tagName");let t,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?t=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?t=document.createElement(r):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Dc.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,r,a){const l=this.isolate(e,t);if(this.scroll.query(r,Oe.BLOT)!=null&&a)l.wrap(r,a);else if(this.scroll.query(r,Oe.ATTRIBUTE)!=null){const c=this.scroll.create(this.statics.scope);l.wrap(c),c.format(r,a)}}insertAt(e,t,r){const a=r==null?this.scroll.create("text",t):this.scroll.create(t,r),l=this.split(e);this.parent.insertBefore(a,l||void 0)}isolate(e,t){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(t),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new bc(`Cannot wrap ${e}`);return r.appendChild(this),r}};uN.blotName="abstract";let hN=uN;const dN=class extends hN{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};dN.scope=Oe.INLINE_BLOT;let o9=dN;const cr=o9;class l9{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const t=e.slice(1);this.append(...t)}}at(e){const t=this.iterator();let r=t();for(;r&&e>0;)e-=1,r=t();return r}contains(e){const t=this.iterator();let r=t();for(;r;){if(r===e)return!0;r=t()}return!1}indexOf(e){const t=this.iterator();let r=t(),a=0;for(;r;){if(r===e)return a;a+=1,r=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,r=this.head;for(;r!=null;){if(r===e)return t;t+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){const r=this.iterator();let a=r();for(;a;){const l=a.length();if(e<l||t&&e===l&&(a.next==null||a.next.length()!==0))return[a,e];e-=l,a=r()}return[null,0]}forEach(e){const t=this.iterator();let r=t();for(;r;)e(r),r=t()}forEachAt(e,t,r){if(t<=0)return;const[a,l]=this.find(e);let c=e-l;const d=this.iterator(a);let m=d();for(;m&&c<e+t;){const g=m.length();e>c?r(m,e-c,Math.min(t,c+g-e)):r(m,0,Math.min(g,e+t-c)),c+=g,m=d()}}map(e){return this.reduce((t,r)=>(t.push(e(r)),t),[])}reduce(e,t){const r=this.iterator();let a=r();for(;a;)t=e(t,a),a=r();return t}}function yw(n,e){const t=e.find(n);if(t)return t;try{return e.create(n)}catch{const r=e.create(Oe.INLINE);return Array.from(n.childNodes).forEach(a=>{r.domNode.appendChild(a)}),n.parentNode&&n.parentNode.replaceChild(r.domNode,n),r.attach(),r}}const fN=class oo extends hN{constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,oo.uiClass&&this.uiNode.classList.add(oo.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new l9,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const t=yw(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof bc)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(r,a,l)=>{r.deleteAt(a,l)})}descendant(e,t=0){const[r,a]=this.children.find(t);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,a]:r instanceof oo?r.descendant(e,a):[null,-1]}descendants(e,t=0,r=Number.MAX_VALUE){let a=[],l=r;return this.children.forEachAt(t,r,(c,d,m)=>{(e.blotName==null&&e(c)||e.blotName!=null&&c instanceof e)&&a.push(c),c instanceof oo&&(a=a.concat(c.descendants(e,d,l))),l-=m}),a}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(r=>t instanceof r)||(t.statics.scope===Oe.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof oo?t.unwrap():t.remove())})}formatAt(e,t,r,a){this.children.forEachAt(e,t,(l,c,d)=>{l.formatAt(c,d,r,a)})}insertAt(e,t,r){const[a,l]=this.children.find(e);if(a)a.insertAt(l,t,r);else{const c=r==null?this.scroll.create("text",t):this.scroll.create(t,r);this.appendChild(c)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(r=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(r=>{e.insertBefore(r,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){const[r,a]=this.children.find(e,t),l=[[this,e]];return r instanceof oo?l.concat(r.path(a,t)):(r!=null&&l.push([r,a]),l)}removeChild(e){this.children.remove(e)}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return r instanceof oo&&this.moveChildren(r),super.replaceWith(r)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(a,l,c)=>{const d=a.split(l,t);d!=null&&r.appendChild(d)}),r}splitAfter(e){const t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){const r=[],a=[];e.forEach(l=>{l.target===this.domNode&&l.type==="childList"&&(r.push(...l.addedNodes),a.push(...l.removedNodes))}),a.forEach(l=>{if(l.parentNode!=null&&l.tagName!=="IFRAME"&&document.body.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const c=this.scroll.find(l);c!=null&&(c.domNode.parentNode==null||c.domNode.parentNode===this.domNode)&&c.detach()}),r.filter(l=>l.parentNode===this.domNode&&l!==this.uiNode).sort((l,c)=>l===c?0:l.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(l=>{let c=null;l.nextSibling!=null&&(c=this.scroll.find(l.nextSibling));const d=yw(l,this.scroll);(d.next!==c||d.next==null)&&(d.parent!=null&&d.parent.removeChild(this),this.insertBefore(d,c||void 0))}),this.enforceAllowedChildren()}};fN.uiClass="";let c9=fN;const ni=c9;function u9(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}const cc=class uc extends ni{static create(e){return super.create(e)}static formats(e,t){const r=t.query(uc.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Cm(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(r=>{r instanceof uc||(r=r.wrap(uc.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,Oe.INLINE);if(r==null)return;r instanceof Li?this.attributes.attribute(r,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,a){this.formats()[r]!=null||this.scroll.query(r,Oe.ATTRIBUTE)?this.isolate(e,t).format(r,a):super.formatAt(e,t,r,a)}optimize(e){super.optimize(e);const t=this.formats();if(Object.keys(t).length===0)return this.unwrap();const r=this.next;r instanceof uc&&r.prev===this&&u9(t,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,t){const r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,t){const r=super.wrap(e,t);return r instanceof uc&&this.attributes.move(r),r}};cc.allowedChildren=[cc,cr],cc.blotName="inline",cc.scope=Oe.INLINE_BLOT,cc.tagName="SPAN";let h9=cc;const pv=h9,hc=class Yy extends ni{static create(e){return super.create(e)}static formats(e,t){const r=t.query(Yy.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Cm(this.domNode)}format(e,t){const r=this.scroll.query(e,Oe.BLOCK);r!=null&&(r instanceof Li?this.attributes.attribute(r,t):e===this.statics.blotName&&!t?this.replaceWith(Yy.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,a){this.scroll.query(r,Oe.BLOCK)!=null?this.format(r,a):super.formatAt(e,t,r,a)}insertAt(e,t,r){if(r==null||this.scroll.query(t,Oe.INLINE)!=null)super.insertAt(e,t,r);else{const a=this.split(e);if(a!=null){const l=this.scroll.create(t,r);a.parent.insertBefore(l,a)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){const r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};hc.blotName="block",hc.scope=Oe.BLOCK_BLOT,hc.tagName="P",hc.allowedChildren=[pv,hc,cr];let d9=hc;const dh=d9,Xy=class extends ni{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,r,a){super.formatAt(e,t,r,a),this.enforceAllowedChildren()}insertAt(e,t,r){super.insertAt(e,t,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Xy.blotName="container",Xy.scope=Oe.BLOCK_BLOT;let f9=Xy;const Rm=f9;class m9 extends cr{static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,r,a){e===0&&t===this.length()?this.format(r,a):super.formatAt(e,t,r,a)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const cs=m9,p9={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},g9=100,dc=class extends ni{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,p9),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const r=this.registry.find(e,t);return r?r.scroll===this?r:t?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,t=Oe.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,t)}formatAt(e,t,r,a){this.update(),super.formatAt(e,t,r,a)}insertAt(e,t,r){this.update(),super.insertAt(e,t,r)}optimize(e=[],t={}){super.optimize(t);const r=t.mutationsMap||new WeakMap;let a=Array.from(this.observer.takeRecords());for(;a.length>0;)e.push(a.pop());const l=(m,g=!0)=>{m==null||m===this||m.domNode.parentNode!=null&&(r.has(m.domNode)||r.set(m.domNode,[]),g&&l(m.parent))},c=m=>{r.has(m.domNode)&&(m instanceof ni&&m.children.forEach(c),r.delete(m.domNode),m.optimize(t))};let d=e;for(let m=0;d.length>0;m+=1){if(m>=g9)throw new Error("[Parchment] Maximum optimize iterations reached");for(d.forEach(g=>{const v=this.find(g.target,!0);v!=null&&(v.domNode===g.target&&(g.type==="childList"?(l(this.find(g.previousSibling,!1)),Array.from(g.addedNodes).forEach(E=>{const x=this.find(E,!1);l(x,!1),x instanceof ni&&x.children.forEach(A=>{l(A,!1)})})):g.type==="attributes"&&l(v.prev)),l(v))}),this.children.forEach(c),d=Array.from(this.observer.takeRecords()),a=d.slice();a.length>0;)e.push(a.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(a=>{const l=this.find(a.target,!0);return l==null?null:r.has(l.domNode)?(r.get(l.domNode).push(a),null):(r.set(l.domNode,[a]),l)}).forEach(a=>{a!=null&&a!==this&&r.has(a.domNode)&&a.update(r.get(a.domNode)||[],t)}),t.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),t),this.optimize(e,t)}};dc.blotName="scroll",dc.defaultChild=dh,dc.allowedChildren=[dh,Rm],dc.scope=Oe.BLOCK_BLOT,dc.tagName="DIV";let y9=dc;const gv=y9,Wy=class mN extends cr{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,r){r==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof mN&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,t){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Wy.blotName="text",Wy.scope=Oe.INLINE_BLOT;let v9=Wy;const Qf=v9,b9=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Li,AttributorStore:Cm,BlockBlot:dh,ClassAttributor:ai,ContainerBlot:Rm,EmbedBlot:cs,InlineBlot:pv,LeafBlot:cr,ParentBlot:ni,Registry:Dc,Scope:Oe,ScrollBlot:gv,StyleAttributor:Uo,TextBlot:Qf},Symbol.toStringTag,{value:"Module"}));var nf={exports:{}},Zg,vw;function _9(){if(vw)return Zg;vw=1;var n=-1,e=1,t=0;function r(S,M,N,ge,pe){if(S===M)return S?[[t,S]]:[];if(N!=null){var H=V(S,M,N);if(H)return H}var ee=d(S,M),ue=S.substring(0,ee);S=S.substring(ee),M=M.substring(ee),ee=g(S,M);var _e=S.substring(S.length-ee);S=S.substring(0,S.length-ee),M=M.substring(0,M.length-ee);var be=a(S,M);return ue&&be.unshift([t,ue]),_e&&be.push([t,_e]),F(be,pe),ge&&E(be),be}function a(S,M){var N;if(!S)return[[e,M]];if(!M)return[[n,S]];var ge=S.length>M.length?S:M,pe=S.length>M.length?M:S,H=ge.indexOf(pe);if(H!==-1)return N=[[e,ge.substring(0,H)],[t,pe],[e,ge.substring(H+pe.length)]],S.length>M.length&&(N[0][0]=N[2][0]=n),N;if(pe.length===1)return[[n,S],[e,M]];var ee=v(S,M);if(ee){var ue=ee[0],_e=ee[1],be=ee[2],q=ee[3],W=ee[4],de=r(ue,be),me=r(_e,q);return de.concat([[t,W]],me)}return l(S,M)}function l(S,M){for(var N=S.length,ge=M.length,pe=Math.ceil((N+ge)/2),H=pe,ee=2*pe,ue=new Array(ee),_e=new Array(ee),be=0;be<ee;be++)ue[be]=-1,_e[be]=-1;ue[H+1]=0,_e[H+1]=0;for(var q=N-ge,W=q%2!==0,de=0,me=0,ye=0,Te=0,De=0;De<pe;De++){for(var je=-De+de;je<=De-me;je+=2){var Le=H+je,Xe;je===-De||je!==De&&ue[Le-1]<ue[Le+1]?Xe=ue[Le+1]:Xe=ue[Le-1]+1;for(var Je=Xe-je;Xe<N&&Je<ge&&S.charAt(Xe)===M.charAt(Je);)Xe++,Je++;if(ue[Le]=Xe,Xe>N)me+=2;else if(Je>ge)de+=2;else if(W){var st=H+q-je;if(st>=0&&st<ee&&_e[st]!==-1){var ut=N-_e[st];if(Xe>=ut)return c(S,M,Xe,Je)}}}for(var yt=-De+ye;yt<=De-Te;yt+=2){var st=H+yt,ut;yt===-De||yt!==De&&_e[st-1]<_e[st+1]?ut=_e[st+1]:ut=_e[st-1]+1;for(var tn=ut-yt;ut<N&&tn<ge&&S.charAt(N-ut-1)===M.charAt(ge-tn-1);)ut++,tn++;if(_e[st]=ut,ut>N)Te+=2;else if(tn>ge)ye+=2;else if(!W){var Le=H+q-yt;if(Le>=0&&Le<ee&&ue[Le]!==-1){var Xe=ue[Le],Je=H+Xe-Le;if(ut=N-ut,Xe>=ut)return c(S,M,Xe,Je)}}}}return[[n,S],[e,M]]}function c(S,M,N,ge){var pe=S.substring(0,N),H=M.substring(0,ge),ee=S.substring(N),ue=M.substring(ge),_e=r(pe,H),be=r(ee,ue);return _e.concat(be)}function d(S,M){if(!S||!M||S.charAt(0)!==M.charAt(0))return 0;for(var N=0,ge=Math.min(S.length,M.length),pe=ge,H=0;N<pe;)S.substring(H,pe)==M.substring(H,pe)?(N=pe,H=N):ge=pe,pe=Math.floor((ge-N)/2+N);return Y(S.charCodeAt(pe-1))&&pe--,pe}function m(S,M){var N=S.length,ge=M.length;if(N==0||ge==0)return 0;N>ge?S=S.substring(N-ge):N<ge&&(M=M.substring(0,N));var pe=Math.min(N,ge);if(S==M)return pe;for(var H=0,ee=1;;){var ue=S.substring(pe-ee),_e=M.indexOf(ue);if(_e==-1)return H;ee+=_e,(_e==0||S.substring(pe-ee)==M.substring(0,ee))&&(H=ee,ee++)}}function g(S,M){if(!S||!M||S.slice(-1)!==M.slice(-1))return 0;for(var N=0,ge=Math.min(S.length,M.length),pe=ge,H=0;N<pe;)S.substring(S.length-pe,S.length-H)==M.substring(M.length-pe,M.length-H)?(N=pe,H=N):ge=pe,pe=Math.floor((ge-N)/2+N);return Q(S.charCodeAt(S.length-pe))&&pe--,pe}function v(S,M){var N=S.length>M.length?S:M,ge=S.length>M.length?M:S;if(N.length<4||ge.length*2<N.length)return null;function pe(me,ye,Te){for(var De=me.substring(Te,Te+Math.floor(me.length/4)),je=-1,Le="",Xe,Je,st,ut;(je=ye.indexOf(De,je+1))!==-1;){var yt=d(me.substring(Te),ye.substring(je)),tn=g(me.substring(0,Te),ye.substring(0,je));Le.length<tn+yt&&(Le=ye.substring(je-tn,je)+ye.substring(je,je+yt),Xe=me.substring(0,Te-tn),Je=me.substring(Te+yt),st=ye.substring(0,je-tn),ut=ye.substring(je+yt))}return Le.length*2>=me.length?[Xe,Je,st,ut,Le]:null}var H=pe(N,ge,Math.ceil(N.length/4)),ee=pe(N,ge,Math.ceil(N.length/2)),ue;if(!H&&!ee)return null;ee?H?ue=H[4].length>ee[4].length?H:ee:ue=ee:ue=H;var _e,be,q,W;S.length>M.length?(_e=ue[0],be=ue[1],q=ue[2],W=ue[3]):(q=ue[0],W=ue[1],_e=ue[2],be=ue[3]);var de=ue[4];return[_e,be,q,W,de]}function E(S){for(var M=!1,N=[],ge=0,pe=null,H=0,ee=0,ue=0,_e=0,be=0;H<S.length;)S[H][0]==t?(N[ge++]=H,ee=_e,ue=be,_e=0,be=0,pe=S[H][1]):(S[H][0]==e?_e+=S[H][1].length:be+=S[H][1].length,pe&&pe.length<=Math.max(ee,ue)&&pe.length<=Math.max(_e,be)&&(S.splice(N[ge-1],0,[n,pe]),S[N[ge-1]+1][0]=e,ge--,ge--,H=ge>0?N[ge-1]:-1,ee=0,ue=0,_e=0,be=0,pe=null,M=!0)),H++;for(M&&F(S),U(S),H=1;H<S.length;){if(S[H-1][0]==n&&S[H][0]==e){var q=S[H-1][1],W=S[H][1],de=m(q,W),me=m(W,q);de>=me?(de>=q.length/2||de>=W.length/2)&&(S.splice(H,0,[t,W.substring(0,de)]),S[H-1][1]=q.substring(0,q.length-de),S[H+1][1]=W.substring(de),H++):(me>=q.length/2||me>=W.length/2)&&(S.splice(H,0,[t,q.substring(0,me)]),S[H-1][0]=e,S[H-1][1]=W.substring(0,W.length-me),S[H+1][0]=n,S[H+1][1]=q.substring(me),H++),H++}H++}}var x=/[^a-zA-Z0-9]/,A=/\s/,C=/[\r\n]/,D=/\n\r?\n$/,R=/^\r?\n\r?\n/;function U(S){function M(me,ye){if(!me||!ye)return 6;var Te=me.charAt(me.length-1),De=ye.charAt(0),je=Te.match(x),Le=De.match(x),Xe=je&&Te.match(A),Je=Le&&De.match(A),st=Xe&&Te.match(C),ut=Je&&De.match(C),yt=st&&me.match(D),tn=ut&&ye.match(R);return yt||tn?5:st||ut?4:je&&!Xe&&Je?3:Xe||Je?2:je||Le?1:0}for(var N=1;N<S.length-1;){if(S[N-1][0]==t&&S[N+1][0]==t){var ge=S[N-1][1],pe=S[N][1],H=S[N+1][1],ee=g(ge,pe);if(ee){var ue=pe.substring(pe.length-ee);ge=ge.substring(0,ge.length-ee),pe=ue+pe.substring(0,pe.length-ee),H=ue+H}for(var _e=ge,be=pe,q=H,W=M(ge,pe)+M(pe,H);pe.charAt(0)===H.charAt(0);){ge+=pe.charAt(0),pe=pe.substring(1)+H.charAt(0),H=H.substring(1);var de=M(ge,pe)+M(pe,H);de>=W&&(W=de,_e=ge,be=pe,q=H)}S[N-1][1]!=_e&&(_e?S[N-1][1]=_e:(S.splice(N-1,1),N--),S[N][1]=be,q?S[N+1][1]=q:(S.splice(N+1,1),N--))}N++}}function F(S,M){S.push([t,""]);for(var N=0,ge=0,pe=0,H="",ee="",ue;N<S.length;){if(N<S.length-1&&!S[N][1]){S.splice(N,1);continue}switch(S[N][0]){case e:pe++,ee+=S[N][1],N++;break;case n:ge++,H+=S[N][1],N++;break;case t:var _e=N-pe-ge-1;if(M){if(_e>=0&&ve(S[_e][1])){var be=S[_e][1].slice(-1);if(S[_e][1]=S[_e][1].slice(0,-1),H=be+H,ee=be+ee,!S[_e][1]){S.splice(_e,1),N--;var q=_e-1;S[q]&&S[q][0]===e&&(pe++,ee=S[q][1]+ee,q--),S[q]&&S[q][0]===n&&(ge++,H=S[q][1]+H,q--),_e=q}}if(ie(S[N][1])){var be=S[N][1].charAt(0);S[N][1]=S[N][1].slice(1),H+=be,ee+=be}}if(N<S.length-1&&!S[N][1]){S.splice(N,1);break}if(H.length>0||ee.length>0){H.length>0&&ee.length>0&&(ue=d(ee,H),ue!==0&&(_e>=0?S[_e][1]+=ee.substring(0,ue):(S.splice(0,0,[t,ee.substring(0,ue)]),N++),ee=ee.substring(ue),H=H.substring(ue)),ue=g(ee,H),ue!==0&&(S[N][1]=ee.substring(ee.length-ue)+S[N][1],ee=ee.substring(0,ee.length-ue),H=H.substring(0,H.length-ue)));var W=pe+ge;H.length===0&&ee.length===0?(S.splice(N-W,W),N=N-W):H.length===0?(S.splice(N-W,W,[e,ee]),N=N-W+1):ee.length===0?(S.splice(N-W,W,[n,H]),N=N-W+1):(S.splice(N-W,W,[n,H],[e,ee]),N=N-W+2)}N!==0&&S[N-1][0]===t?(S[N-1][1]+=S[N][1],S.splice(N,1)):N++,pe=0,ge=0,H="",ee="";break}}S[S.length-1][1]===""&&S.pop();var de=!1;for(N=1;N<S.length-1;)S[N-1][0]===t&&S[N+1][0]===t&&(S[N][1].substring(S[N][1].length-S[N-1][1].length)===S[N-1][1]?(S[N][1]=S[N-1][1]+S[N][1].substring(0,S[N][1].length-S[N-1][1].length),S[N+1][1]=S[N-1][1]+S[N+1][1],S.splice(N-1,1),de=!0):S[N][1].substring(0,S[N+1][1].length)==S[N+1][1]&&(S[N-1][1]+=S[N+1][1],S[N][1]=S[N][1].substring(S[N+1][1].length)+S[N+1][1],S.splice(N+1,1),de=!0)),N++;de&&F(S,M)}function Y(S){return S>=55296&&S<=56319}function Q(S){return S>=56320&&S<=57343}function ie(S){return Q(S.charCodeAt(0))}function ve(S){return Y(S.charCodeAt(S.length-1))}function L(S){for(var M=[],N=0;N<S.length;N++)S[N][1].length>0&&M.push(S[N]);return M}function k(S,M,N,ge){return ve(S)||ie(ge)?null:L([[t,S],[n,M],[e,N],[t,ge]])}function V(S,M,N){var ge=typeof N=="number"?{index:N,length:0}:N.oldRange,pe=typeof N=="number"?null:N.newRange,H=S.length,ee=M.length;if(ge.length===0&&(pe===null||pe.length===0)){var ue=ge.index,_e=S.slice(0,ue),be=S.slice(ue),q=pe?pe.index:null;e:{var W=ue+ee-H;if(q!==null&&q!==W||W<0||W>ee)break e;var de=M.slice(0,W),me=M.slice(W);if(me!==be)break e;var ye=Math.min(ue,W),Te=_e.slice(0,ye),De=de.slice(0,ye);if(Te!==De)break e;var je=_e.slice(ye),Le=de.slice(ye);return k(Te,je,Le,be)}e:{if(q!==null&&q!==ue)break e;var Xe=ue,de=M.slice(0,Xe),me=M.slice(Xe);if(de!==_e)break e;var Je=Math.min(H-Xe,ee-Xe),st=be.slice(be.length-Je),ut=me.slice(me.length-Je);if(st!==ut)break e;var je=be.slice(0,be.length-Je),Le=me.slice(0,me.length-Je);return k(_e,je,Le,st)}}if(ge.length>0&&pe&&pe.length===0)e:{var Te=S.slice(0,ge.index),st=S.slice(ge.index+ge.length),ye=Te.length,Je=st.length;if(ee<ye+Je)break e;var De=M.slice(0,ye),ut=M.slice(ee-Je);if(Te!==De||st!==ut)break e;var je=S.slice(ye,H-Je),Le=M.slice(ye,ee-Je);return k(Te,je,Le,st)}return null}function G(S,M,N,ge){return r(S,M,N,ge,!0)}return G.INSERT=e,G.DELETE=n,G.EQUAL=t,Zg=G,Zg}var Hu={exports:{}};Hu.exports;var bw;function pN(){return bw||(bw=1,(function(n,e){var t=200,r="__lodash_hash_undefined__",a=9007199254740991,l="[object Arguments]",c="[object Array]",d="[object Boolean]",m="[object Date]",g="[object Error]",v="[object Function]",E="[object GeneratorFunction]",x="[object Map]",A="[object Number]",C="[object Object]",D="[object Promise]",R="[object RegExp]",U="[object Set]",F="[object String]",Y="[object Symbol]",Q="[object WeakMap]",ie="[object ArrayBuffer]",ve="[object DataView]",L="[object Float32Array]",k="[object Float64Array]",V="[object Int8Array]",G="[object Int16Array]",S="[object Int32Array]",M="[object Uint8Array]",N="[object Uint8ClampedArray]",ge="[object Uint16Array]",pe="[object Uint32Array]",H=/[\\^$.*+?()[\]{}|]/g,ee=/\w*$/,ue=/^\[object .+?Constructor\]$/,_e=/^(?:0|[1-9]\d*)$/,be={};be[l]=be[c]=be[ie]=be[ve]=be[d]=be[m]=be[L]=be[k]=be[V]=be[G]=be[S]=be[x]=be[A]=be[C]=be[R]=be[U]=be[F]=be[Y]=be[M]=be[N]=be[ge]=be[pe]=!0,be[g]=be[v]=be[Q]=!1;var q=typeof mo=="object"&&mo&&mo.Object===Object&&mo,W=typeof self=="object"&&self&&self.Object===Object&&self,de=q||W||Function("return this")(),me=e&&!e.nodeType&&e,ye=me&&!0&&n&&!n.nodeType&&n,Te=ye&&ye.exports===me;function De(_,j){return _.set(j[0],j[1]),_}function je(_,j){return _.add(j),_}function Le(_,j){for(var B=-1,ne=_?_.length:0;++B<ne&&j(_[B],B,_)!==!1;);return _}function Xe(_,j){for(var B=-1,ne=j.length,Pe=_.length;++B<ne;)_[Pe+B]=j[B];return _}function Je(_,j,B,ne){for(var Pe=-1,Ae=_?_.length:0;++Pe<Ae;)B=j(B,_[Pe],Pe,_);return B}function st(_,j){for(var B=-1,ne=Array(_);++B<_;)ne[B]=j(B);return ne}function ut(_,j){return _?.[j]}function yt(_){var j=!1;if(_!=null&&typeof _.toString!="function")try{j=!!(_+"")}catch{}return j}function tn(_){var j=-1,B=Array(_.size);return _.forEach(function(ne,Pe){B[++j]=[Pe,ne]}),B}function qr(_,j){return function(B){return _(j(B))}}function li(_){var j=-1,B=Array(_.size);return _.forEach(function(ne){B[++j]=ne}),B}var Ui=Array.prototype,Ht=Function.prototype,jt=Object.prototype,Tr=de["__core-js_shared__"],Oa=(function(){var _=/[^.]+$/.exec(Tr&&Tr.keys&&Tr.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""})(),Vi=Ht.toString,Ot=jt.hasOwnProperty,Ar=jt.toString,qi=RegExp("^"+Vi.call(Ot).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Br=Te?de.Buffer:void 0,dr=de.Symbol,Bi=de.Uint8Array,kn=qr(Object.getPrototypeOf,Object),zi=Object.create,Hi=jt.propertyIsEnumerable,fr=Ui.splice,Zt=Object.getOwnPropertySymbols,An=Br?Br.isBuffer:void 0,Dt=qr(Object.keys,Object),Us=gn(de,"DataView"),Sr=gn(de,"Map"),Zn=gn(de,"Promise"),Mn=gn(de,"Set"),zr=gn(de,"WeakMap"),Tt=gn(Object,"create"),Jn=cn(Us),In=cn(Sr),Pn=cn(Zn),Fi=cn(Mn),ci=cn(zr),Sn=dr?dr.prototype:void 0,us=Sn?Sn.valueOf:void 0;function Hr(_){var j=-1,B=_?_.length:0;for(this.clear();++j<B;){var ne=_[j];this.set(ne[0],ne[1])}}function Vs(){this.__data__=Tt?Tt(null):{}}function Gi(_){return this.has(_)&&delete this.__data__[_]}function $i(_){var j=this.__data__;if(Tt){var B=j[_];return B===r?void 0:B}return Ot.call(j,_)?j[_]:void 0}function hs(_){var j=this.__data__;return Tt?j[_]!==void 0:Ot.call(j,_)}function mr(_,j){var B=this.__data__;return B[_]=Tt&&j===void 0?r:j,this}Hr.prototype.clear=Vs,Hr.prototype.delete=Gi,Hr.prototype.get=$i,Hr.prototype.has=hs,Hr.prototype.set=mr;function nn(_){var j=-1,B=_?_.length:0;for(this.clear();++j<B;){var ne=_[j];this.set(ne[0],ne[1])}}function pr(){this.__data__=[]}function gr(_){var j=this.__data__,B=Vn(j,_);if(B<0)return!1;var ne=j.length-1;return B==ne?j.pop():fr.call(j,B,1),!0}function Ft(_){var j=this.__data__,B=Vn(j,_);return B<0?void 0:j[B][1]}function rn(_){return Vn(this.__data__,_)>-1}function Nr(_,j){var B=this.__data__,ne=Vn(B,_);return ne<0?B.push([_,j]):B[ne][1]=j,this}nn.prototype.clear=pr,nn.prototype.delete=gr,nn.prototype.get=Ft,nn.prototype.has=rn,nn.prototype.set=Nr;function Jt(_){var j=-1,B=_?_.length:0;for(this.clear();++j<B;){var ne=_[j];this.set(ne[0],ne[1])}}function Vo(){this.__data__={hash:new Hr,map:new(Sr||nn),string:new Hr}}function Da(_){return ps(this,_).delete(_)}function La(_){return ps(this,_).get(_)}function Cr(_){return ps(this,_).has(_)}function ui(_,j){return ps(this,_).set(_,j),this}Jt.prototype.clear=Vo,Jt.prototype.delete=Da,Jt.prototype.get=La,Jt.prototype.has=Cr,Jt.prototype.set=ui;function Mt(_){this.__data__=new nn(_)}function er(){this.__data__=new nn}function Un(_){return this.__data__.delete(_)}function Rr(_){return this.__data__.get(_)}function Gt(_){return this.__data__.has(_)}function Ki(_,j){var B=this.__data__;if(B instanceof nn){var ne=B.__data__;if(!Sr||ne.length<t-1)return ne.push([_,j]),this;B=this.__data__=new Jt(ne)}return B.set(_,j),this}Mt.prototype.clear=er,Mt.prototype.delete=Un,Mt.prototype.get=Rr,Mt.prototype.has=Gt,Mt.prototype.set=Ki;function ds(_,j){var B=$r(_)||zn(_)?st(_.length,String):[],ne=B.length,Pe=!!ne;for(var Ae in _)Ot.call(_,Ae)&&!(Pe&&(Ae=="length"||Ma(Ae,ne)))&&B.push(Ae);return B}function yr(_,j,B){var ne=_[j];(!(Ot.call(_,j)&&Gr(ne,B))||B===void 0&&!(j in _))&&(_[j]=B)}function Vn(_,j){for(var B=_.length;B--;)if(Gr(_[B][0],j))return B;return-1}function tr(_,j){return _&&fi(j,zs(j),_)}function qs(_,j,B,ne,Pe,Ae,Ke){var Ze;if(ne&&(Ze=Ae?ne(_,Pe,Ae,Ke):ne(_)),Ze!==void 0)return Ze;if(!We(_))return _;var xt=$r(_);if(xt){if(Ze=Xi(_),!j)return di(_,Ze)}else{var et=Or(_),Rt=et==v||et==E;if(sr(_))return Pt(_,j);if(et==C||et==l||Rt&&!Ae){if(yt(_))return Ae?_:{};if(Ze=nr(Rt?{}:_),!j)return Yi(_,tr(Ze,_))}else{if(!be[et])return Ae?_:{};Ze=mi(_,et,qs,j)}}Ke||(Ke=new Mt);var un=Ke.get(_);if(un)return un;if(Ke.set(_,Ze),!xt)var Ut=B?ms(_):zs(_);return Le(Ut||_,function(Qt,sn){Ut&&(sn=Qt,Qt=_[sn]),yr(Ze,sn,qs(Qt,j,B,ne,sn,_,Ke))}),Ze}function Qi(_){return We(_)?zi(_):{}}function ka(_,j,B){var ne=j(_);return $r(_)?ne:Xe(ne,B(_))}function hi(_){return Ar.call(_)}function qn(_){if(!We(_)||pi(_))return!1;var j=On(_)||yt(_)?qi:ue;return j.test(cn(_))}function $t(_){if(!rr(_))return Dt(_);var j=[];for(var B in Object(_))Ot.call(_,B)&&B!="constructor"&&j.push(B);return j}function Pt(_,j){if(j)return _.slice();var B=new _.constructor(_.length);return _.copy(B),B}function Ir(_){var j=new _.constructor(_.byteLength);return new Bi(j).set(new Bi(_)),j}function Fr(_,j){var B=j?Ir(_.buffer):_.buffer;return new _.constructor(B,_.byteOffset,_.byteLength)}function dt(_,j,B){var ne=j?B(tn(_),!0):tn(_);return Je(ne,De,new _.constructor)}function fs(_){var j=new _.constructor(_.source,ee.exec(_));return j.lastIndex=_.lastIndex,j}function jr(_,j,B){var ne=j?B(li(_),!0):li(_);return Je(ne,je,new _.constructor)}function Bs(_){return us?Object(us.call(_)):{}}function jn(_,j){var B=j?Ir(_.buffer):_.buffer;return new _.constructor(B,_.byteOffset,_.length)}function di(_,j){var B=-1,ne=_.length;for(j||(j=Array(ne));++B<ne;)j[B]=_[B];return j}function fi(_,j,B,ne){B||(B={});for(var Pe=-1,Ae=j.length;++Pe<Ae;){var Ke=j[Pe],Ze=void 0;yr(B,Ke,Ze===void 0?_[Ke]:Ze)}return B}function Yi(_,j){return fi(_,Kt(_),j)}function ms(_){return ka(_,zs,Kt)}function ps(_,j){var B=_.__data__;return gs(j)?B[typeof j=="string"?"string":"hash"]:B.map}function gn(_,j){var B=ut(_,j);return qn(B)?B:void 0}var Kt=Zt?qr(Zt,Object):Hs,Or=hi;(Us&&Or(new Us(new ArrayBuffer(1)))!=ve||Sr&&Or(new Sr)!=x||Zn&&Or(Zn.resolve())!=D||Mn&&Or(new Mn)!=U||zr&&Or(new zr)!=Q)&&(Or=function(_){var j=Ar.call(_),B=j==C?_.constructor:void 0,ne=B?cn(B):void 0;if(ne)switch(ne){case Jn:return ve;case In:return x;case Pn:return D;case Fi:return U;case ci:return Q}return j});function Xi(_){var j=_.length,B=_.constructor(j);return j&&typeof _[0]=="string"&&Ot.call(_,"index")&&(B.index=_.index,B.input=_.input),B}function nr(_){return typeof _.constructor=="function"&&!rr(_)?Qi(kn(_)):{}}function mi(_,j,B,ne){var Pe=_.constructor;switch(j){case ie:return Ir(_);case d:case m:return new Pe(+_);case ve:return Fr(_,ne);case L:case k:case V:case G:case S:case M:case N:case ge:case pe:return jn(_,ne);case x:return dt(_,ne,B);case A:case F:return new Pe(_);case R:return fs(_);case U:return jr(_,ne,B);case Y:return Bs(_)}}function Ma(_,j){return j=j??a,!!j&&(typeof _=="number"||_e.test(_))&&_>-1&&_%1==0&&_<j}function gs(_){var j=typeof _;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?_!=="__proto__":_===null}function pi(_){return!!Oa&&Oa in _}function rr(_){var j=_&&_.constructor,B=typeof j=="function"&&j.prototype||jt;return _===B}function cn(_){if(_!=null){try{return Vi.call(_)}catch{}try{return _+""}catch{}}return""}function Bn(_){return qs(_,!0,!0)}function Gr(_,j){return _===j||_!==_&&j!==j}function zn(_){return ys(_)&&Ot.call(_,"callee")&&(!Hi.call(_,"callee")||Ar.call(_)==l)}var $r=Array.isArray;function Kr(_){return _!=null&&vs(_.length)&&!On(_)}function ys(_){return vr(_)&&Kr(_)}var sr=An||Wi;function On(_){var j=We(_)?Ar.call(_):"";return j==v||j==E}function vs(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=a}function We(_){var j=typeof _;return!!_&&(j=="object"||j=="function")}function vr(_){return!!_&&typeof _=="object"}function zs(_){return Kr(_)?ds(_):$t(_)}function Hs(){return[]}function Wi(){return!1}n.exports=Bn})(Hu,Hu.exports)),Hu.exports}var Fu={exports:{}};Fu.exports;var _w;function gN(){return _w||(_w=1,(function(n,e){var t=200,r="__lodash_hash_undefined__",a=1,l=2,c=9007199254740991,d="[object Arguments]",m="[object Array]",g="[object AsyncFunction]",v="[object Boolean]",E="[object Date]",x="[object Error]",A="[object Function]",C="[object GeneratorFunction]",D="[object Map]",R="[object Number]",U="[object Null]",F="[object Object]",Y="[object Promise]",Q="[object Proxy]",ie="[object RegExp]",ve="[object Set]",L="[object String]",k="[object Symbol]",V="[object Undefined]",G="[object WeakMap]",S="[object ArrayBuffer]",M="[object DataView]",N="[object Float32Array]",ge="[object Float64Array]",pe="[object Int8Array]",H="[object Int16Array]",ee="[object Int32Array]",ue="[object Uint8Array]",_e="[object Uint8ClampedArray]",be="[object Uint16Array]",q="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,de=/^\[object .+?Constructor\]$/,me=/^(?:0|[1-9]\d*)$/,ye={};ye[N]=ye[ge]=ye[pe]=ye[H]=ye[ee]=ye[ue]=ye[_e]=ye[be]=ye[q]=!0,ye[d]=ye[m]=ye[S]=ye[v]=ye[M]=ye[E]=ye[x]=ye[A]=ye[D]=ye[R]=ye[F]=ye[ie]=ye[ve]=ye[L]=ye[G]=!1;var Te=typeof mo=="object"&&mo&&mo.Object===Object&&mo,De=typeof self=="object"&&self&&self.Object===Object&&self,je=Te||De||Function("return this")(),Le=e&&!e.nodeType&&e,Xe=Le&&!0&&n&&!n.nodeType&&n,Je=Xe&&Xe.exports===Le,st=Je&&Te.process,ut=(function(){try{return st&&st.binding&&st.binding("util")}catch{}})(),yt=ut&&ut.isTypedArray;function tn(_,j){for(var B=-1,ne=_==null?0:_.length,Pe=0,Ae=[];++B<ne;){var Ke=_[B];j(Ke,B,_)&&(Ae[Pe++]=Ke)}return Ae}function qr(_,j){for(var B=-1,ne=j.length,Pe=_.length;++B<ne;)_[Pe+B]=j[B];return _}function li(_,j){for(var B=-1,ne=_==null?0:_.length;++B<ne;)if(j(_[B],B,_))return!0;return!1}function Ui(_,j){for(var B=-1,ne=Array(_);++B<_;)ne[B]=j(B);return ne}function Ht(_){return function(j){return _(j)}}function jt(_,j){return _.has(j)}function Tr(_,j){return _?.[j]}function Oa(_){var j=-1,B=Array(_.size);return _.forEach(function(ne,Pe){B[++j]=[Pe,ne]}),B}function Vi(_,j){return function(B){return _(j(B))}}function Ot(_){var j=-1,B=Array(_.size);return _.forEach(function(ne){B[++j]=ne}),B}var Ar=Array.prototype,qi=Function.prototype,Br=Object.prototype,dr=je["__core-js_shared__"],Bi=qi.toString,kn=Br.hasOwnProperty,zi=(function(){var _=/[^.]+$/.exec(dr&&dr.keys&&dr.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""})(),Hi=Br.toString,fr=RegExp("^"+Bi.call(kn).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zt=Je?je.Buffer:void 0,An=je.Symbol,Dt=je.Uint8Array,Us=Br.propertyIsEnumerable,Sr=Ar.splice,Zn=An?An.toStringTag:void 0,Mn=Object.getOwnPropertySymbols,zr=Zt?Zt.isBuffer:void 0,Tt=Vi(Object.keys,Object),Jn=Kt(je,"DataView"),In=Kt(je,"Map"),Pn=Kt(je,"Promise"),Fi=Kt(je,"Set"),ci=Kt(je,"WeakMap"),Sn=Kt(Object,"create"),us=cn(Jn),Hr=cn(In),Vs=cn(Pn),Gi=cn(Fi),$i=cn(ci),hs=An?An.prototype:void 0,mr=hs?hs.valueOf:void 0;function nn(_){var j=-1,B=_==null?0:_.length;for(this.clear();++j<B;){var ne=_[j];this.set(ne[0],ne[1])}}function pr(){this.__data__=Sn?Sn(null):{},this.size=0}function gr(_){var j=this.has(_)&&delete this.__data__[_];return this.size-=j?1:0,j}function Ft(_){var j=this.__data__;if(Sn){var B=j[_];return B===r?void 0:B}return kn.call(j,_)?j[_]:void 0}function rn(_){var j=this.__data__;return Sn?j[_]!==void 0:kn.call(j,_)}function Nr(_,j){var B=this.__data__;return this.size+=this.has(_)?0:1,B[_]=Sn&&j===void 0?r:j,this}nn.prototype.clear=pr,nn.prototype.delete=gr,nn.prototype.get=Ft,nn.prototype.has=rn,nn.prototype.set=Nr;function Jt(_){var j=-1,B=_==null?0:_.length;for(this.clear();++j<B;){var ne=_[j];this.set(ne[0],ne[1])}}function Vo(){this.__data__=[],this.size=0}function Da(_){var j=this.__data__,B=Pt(j,_);if(B<0)return!1;var ne=j.length-1;return B==ne?j.pop():Sr.call(j,B,1),--this.size,!0}function La(_){var j=this.__data__,B=Pt(j,_);return B<0?void 0:j[B][1]}function Cr(_){return Pt(this.__data__,_)>-1}function ui(_,j){var B=this.__data__,ne=Pt(B,_);return ne<0?(++this.size,B.push([_,j])):B[ne][1]=j,this}Jt.prototype.clear=Vo,Jt.prototype.delete=Da,Jt.prototype.get=La,Jt.prototype.has=Cr,Jt.prototype.set=ui;function Mt(_){var j=-1,B=_==null?0:_.length;for(this.clear();++j<B;){var ne=_[j];this.set(ne[0],ne[1])}}function er(){this.size=0,this.__data__={hash:new nn,map:new(In||Jt),string:new nn}}function Un(_){var j=gn(this,_).delete(_);return this.size-=j?1:0,j}function Rr(_){return gn(this,_).get(_)}function Gt(_){return gn(this,_).has(_)}function Ki(_,j){var B=gn(this,_),ne=B.size;return B.set(_,j),this.size+=B.size==ne?0:1,this}Mt.prototype.clear=er,Mt.prototype.delete=Un,Mt.prototype.get=Rr,Mt.prototype.has=Gt,Mt.prototype.set=Ki;function ds(_){var j=-1,B=_==null?0:_.length;for(this.__data__=new Mt;++j<B;)this.add(_[j])}function yr(_){return this.__data__.set(_,r),this}function Vn(_){return this.__data__.has(_)}ds.prototype.add=ds.prototype.push=yr,ds.prototype.has=Vn;function tr(_){var j=this.__data__=new Jt(_);this.size=j.size}function qs(){this.__data__=new Jt,this.size=0}function Qi(_){var j=this.__data__,B=j.delete(_);return this.size=j.size,B}function ka(_){return this.__data__.get(_)}function hi(_){return this.__data__.has(_)}function qn(_,j){var B=this.__data__;if(B instanceof Jt){var ne=B.__data__;if(!In||ne.length<t-1)return ne.push([_,j]),this.size=++B.size,this;B=this.__data__=new Mt(ne)}return B.set(_,j),this.size=B.size,this}tr.prototype.clear=qs,tr.prototype.delete=Qi,tr.prototype.get=ka,tr.prototype.has=hi,tr.prototype.set=qn;function $t(_,j){var B=zn(_),ne=!B&&Gr(_),Pe=!B&&!ne&&Kr(_),Ae=!B&&!ne&&!Pe&&vr(_),Ke=B||ne||Pe||Ae,Ze=Ke?Ui(_.length,String):[],xt=Ze.length;for(var et in _)kn.call(_,et)&&!(Ke&&(et=="length"||Pe&&(et=="offset"||et=="parent")||Ae&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||mi(et,xt)))&&Ze.push(et);return Ze}function Pt(_,j){for(var B=_.length;B--;)if(Bn(_[B][0],j))return B;return-1}function Ir(_,j,B){var ne=j(_);return zn(_)?ne:qr(ne,B(_))}function Fr(_){return _==null?_===void 0?V:U:Zn&&Zn in Object(_)?Or(_):rr(_)}function dt(_){return We(_)&&Fr(_)==d}function fs(_,j,B,ne,Pe){return _===j?!0:_==null||j==null||!We(_)&&!We(j)?_!==_&&j!==j:jr(_,j,B,ne,fs,Pe)}function jr(_,j,B,ne,Pe,Ae){var Ke=zn(_),Ze=zn(j),xt=Ke?m:nr(_),et=Ze?m:nr(j);xt=xt==d?F:xt,et=et==d?F:et;var Rt=xt==F,un=et==F,Ut=xt==et;if(Ut&&Kr(_)){if(!Kr(j))return!1;Ke=!0,Rt=!1}if(Ut&&!Rt)return Ae||(Ae=new tr),Ke||vr(_)?fi(_,j,B,ne,Pe,Ae):Yi(_,j,xt,B,ne,Pe,Ae);if(!(B&a)){var Qt=Rt&&kn.call(_,"__wrapped__"),sn=un&&kn.call(j,"__wrapped__");if(Qt||sn){var Qr=Qt?_.value():_,Hn=sn?j.value():j;return Ae||(Ae=new tr),Pe(Qr,Hn,B,ne,Ae)}}return Ut?(Ae||(Ae=new tr),ms(_,j,B,ne,Pe,Ae)):!1}function Bs(_){if(!vs(_)||gs(_))return!1;var j=sr(_)?fr:de;return j.test(cn(_))}function jn(_){return We(_)&&On(_.length)&&!!ye[Fr(_)]}function di(_){if(!pi(_))return Tt(_);var j=[];for(var B in Object(_))kn.call(_,B)&&B!="constructor"&&j.push(B);return j}function fi(_,j,B,ne,Pe,Ae){var Ke=B&a,Ze=_.length,xt=j.length;if(Ze!=xt&&!(Ke&&xt>Ze))return!1;var et=Ae.get(_);if(et&&Ae.get(j))return et==j;var Rt=-1,un=!0,Ut=B&l?new ds:void 0;for(Ae.set(_,j),Ae.set(j,_);++Rt<Ze;){var Qt=_[Rt],sn=j[Rt];if(ne)var Qr=Ke?ne(sn,Qt,Rt,j,_,Ae):ne(Qt,sn,Rt,_,j,Ae);if(Qr!==void 0){if(Qr)continue;un=!1;break}if(Ut){if(!li(j,function(Hn,Yr){if(!jt(Ut,Yr)&&(Qt===Hn||Pe(Qt,Hn,B,ne,Ae)))return Ut.push(Yr)})){un=!1;break}}else if(!(Qt===sn||Pe(Qt,sn,B,ne,Ae))){un=!1;break}}return Ae.delete(_),Ae.delete(j),un}function Yi(_,j,B,ne,Pe,Ae,Ke){switch(B){case M:if(_.byteLength!=j.byteLength||_.byteOffset!=j.byteOffset)return!1;_=_.buffer,j=j.buffer;case S:return!(_.byteLength!=j.byteLength||!Ae(new Dt(_),new Dt(j)));case v:case E:case R:return Bn(+_,+j);case x:return _.name==j.name&&_.message==j.message;case ie:case L:return _==j+"";case D:var Ze=Oa;case ve:var xt=ne&a;if(Ze||(Ze=Ot),_.size!=j.size&&!xt)return!1;var et=Ke.get(_);if(et)return et==j;ne|=l,Ke.set(_,j);var Rt=fi(Ze(_),Ze(j),ne,Pe,Ae,Ke);return Ke.delete(_),Rt;case k:if(mr)return mr.call(_)==mr.call(j)}return!1}function ms(_,j,B,ne,Pe,Ae){var Ke=B&a,Ze=ps(_),xt=Ze.length,et=ps(j),Rt=et.length;if(xt!=Rt&&!Ke)return!1;for(var un=xt;un--;){var Ut=Ze[un];if(!(Ke?Ut in j:kn.call(j,Ut)))return!1}var Qt=Ae.get(_);if(Qt&&Ae.get(j))return Qt==j;var sn=!0;Ae.set(_,j),Ae.set(j,_);for(var Qr=Ke;++un<xt;){Ut=Ze[un];var Hn=_[Ut],Yr=j[Ut];if(ne)var qo=Ke?ne(Yr,Hn,Ut,j,_,Ae):ne(Hn,Yr,Ut,_,j,Ae);if(!(qo===void 0?Hn===Yr||Pe(Hn,Yr,B,ne,Ae):qo)){sn=!1;break}Qr||(Qr=Ut=="constructor")}if(sn&&!Qr){var Fs=_.constructor,Zi=j.constructor;Fs!=Zi&&"constructor"in _&&"constructor"in j&&!(typeof Fs=="function"&&Fs instanceof Fs&&typeof Zi=="function"&&Zi instanceof Zi)&&(sn=!1)}return Ae.delete(_),Ae.delete(j),sn}function ps(_){return Ir(_,zs,Xi)}function gn(_,j){var B=_.__data__;return Ma(j)?B[typeof j=="string"?"string":"hash"]:B.map}function Kt(_,j){var B=Tr(_,j);return Bs(B)?B:void 0}function Or(_){var j=kn.call(_,Zn),B=_[Zn];try{_[Zn]=void 0;var ne=!0}catch{}var Pe=Hi.call(_);return ne&&(j?_[Zn]=B:delete _[Zn]),Pe}var Xi=Mn?function(_){return _==null?[]:(_=Object(_),tn(Mn(_),function(j){return Us.call(_,j)}))}:Hs,nr=Fr;(Jn&&nr(new Jn(new ArrayBuffer(1)))!=M||In&&nr(new In)!=D||Pn&&nr(Pn.resolve())!=Y||Fi&&nr(new Fi)!=ve||ci&&nr(new ci)!=G)&&(nr=function(_){var j=Fr(_),B=j==F?_.constructor:void 0,ne=B?cn(B):"";if(ne)switch(ne){case us:return M;case Hr:return D;case Vs:return Y;case Gi:return ve;case $i:return G}return j});function mi(_,j){return j=j??c,!!j&&(typeof _=="number"||me.test(_))&&_>-1&&_%1==0&&_<j}function Ma(_){var j=typeof _;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?_!=="__proto__":_===null}function gs(_){return!!zi&&zi in _}function pi(_){var j=_&&_.constructor,B=typeof j=="function"&&j.prototype||Br;return _===B}function rr(_){return Hi.call(_)}function cn(_){if(_!=null){try{return Bi.call(_)}catch{}try{return _+""}catch{}}return""}function Bn(_,j){return _===j||_!==_&&j!==j}var Gr=dt((function(){return arguments})())?dt:function(_){return We(_)&&kn.call(_,"callee")&&!Us.call(_,"callee")},zn=Array.isArray;function $r(_){return _!=null&&On(_.length)&&!sr(_)}var Kr=zr||Wi;function ys(_,j){return fs(_,j)}function sr(_){if(!vs(_))return!1;var j=Fr(_);return j==A||j==C||j==g||j==Q}function On(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=c}function vs(_){var j=typeof _;return _!=null&&(j=="object"||j=="function")}function We(_){return _!=null&&typeof _=="object"}var vr=yt?Ht(yt):jn;function zs(_){return $r(_)?$t(_):di(_)}function Hs(){return[]}function Wi(){return!1}n.exports=ys})(Fu,Fu.exports)),Fu.exports}var rf={},xw;function x9(){if(xw)return rf;xw=1,Object.defineProperty(rf,"__esModule",{value:!0});const n=pN(),e=gN();var t;return(function(r){function a(m={},g={},v=!1){typeof m!="object"&&(m={}),typeof g!="object"&&(g={});let E=n(g);v||(E=Object.keys(E).reduce((x,A)=>(E[A]!=null&&(x[A]=E[A]),x),{}));for(const x in m)m[x]!==void 0&&g[x]===void 0&&(E[x]=m[x]);return Object.keys(E).length>0?E:void 0}r.compose=a;function l(m={},g={}){typeof m!="object"&&(m={}),typeof g!="object"&&(g={});const v=Object.keys(m).concat(Object.keys(g)).reduce((E,x)=>(e(m[x],g[x])||(E[x]=g[x]===void 0?null:g[x]),E),{});return Object.keys(v).length>0?v:void 0}r.diff=l;function c(m={},g={}){m=m||{};const v=Object.keys(g).reduce((E,x)=>(g[x]!==m[x]&&m[x]!==void 0&&(E[x]=g[x]),E),{});return Object.keys(m).reduce((E,x)=>(m[x]!==g[x]&&g[x]===void 0&&(E[x]=null),E),v)}r.invert=c;function d(m,g,v=!1){if(typeof m!="object")return g;if(typeof g!="object")return;if(!v)return g;const E=Object.keys(g).reduce((x,A)=>(m[A]===void 0&&(x[A]=g[A]),x),{});return Object.keys(E).length>0?E:void 0}r.transform=d})(t||(t={})),rf.default=t,rf}var sf={},Ew;function yN(){if(Ew)return sf;Ew=1,Object.defineProperty(sf,"__esModule",{value:!0});var n;return(function(e){function t(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=t})(n||(n={})),sf.default=n,sf}var af={},ww;function E9(){if(ww)return af;ww=1,Object.defineProperty(af,"__esModule",{value:!0});const n=yN();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const a=this.ops[this.index];if(a){const l=this.offset,c=n.default.length(a);if(r>=c-l?(r=c-l,this.index+=1,this.offset=0):this.offset+=r,typeof a.delete=="number")return{delete:r};{const d={};return a.attributes&&(d.attributes=a.attributes),typeof a.retain=="number"?d.retain=r:typeof a.retain=="object"&&a.retain!==null?d.retain=a.retain:typeof a.insert=="string"?d.insert=a.insert.substr(l,r):d.insert=a.insert,d}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?n.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,a=this.index,l=this.next(),c=this.ops.slice(this.index);return this.offset=r,this.index=a,[l].concat(c)}}else return[]}}return af.default=e,af}var Tw;function w9(){return Tw||(Tw=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const t=_9(),r=pN(),a=gN(),l=x9();e.AttributeMap=l.default;const c=yN();e.Op=c.default;const d=E9();e.OpIterator=d.default;const m="\0",g=(E,x)=>{if(typeof E!="object"||E===null)throw new Error(`cannot retain a ${typeof E}`);if(typeof x!="object"||x===null)throw new Error(`cannot retain a ${typeof x}`);const A=Object.keys(E)[0];if(!A||A!==Object.keys(x)[0])throw new Error(`embed types not matched: ${A} != ${Object.keys(x)[0]}`);return[A,E[A],x[A]]};class v{constructor(x){Array.isArray(x)?this.ops=x:x!=null&&Array.isArray(x.ops)?this.ops=x.ops:this.ops=[]}static registerEmbed(x,A){this.handlers[x]=A}static unregisterEmbed(x){delete this.handlers[x]}static getHandler(x){const A=this.handlers[x];if(!A)throw new Error(`no handlers for embed type "${x}"`);return A}insert(x,A){const C={};return typeof x=="string"&&x.length===0?this:(C.insert=x,A!=null&&typeof A=="object"&&Object.keys(A).length>0&&(C.attributes=A),this.push(C))}delete(x){return x<=0?this:this.push({delete:x})}retain(x,A){if(typeof x=="number"&&x<=0)return this;const C={retain:x};return A!=null&&typeof A=="object"&&Object.keys(A).length>0&&(C.attributes=A),this.push(C)}push(x){let A=this.ops.length,C=this.ops[A-1];if(x=r(x),typeof C=="object"){if(typeof x.delete=="number"&&typeof C.delete=="number")return this.ops[A-1]={delete:C.delete+x.delete},this;if(typeof C.delete=="number"&&x.insert!=null&&(A-=1,C=this.ops[A-1],typeof C!="object"))return this.ops.unshift(x),this;if(a(x.attributes,C.attributes)){if(typeof x.insert=="string"&&typeof C.insert=="string")return this.ops[A-1]={insert:C.insert+x.insert},typeof x.attributes=="object"&&(this.ops[A-1].attributes=x.attributes),this;if(typeof x.retain=="number"&&typeof C.retain=="number")return this.ops[A-1]={retain:C.retain+x.retain},typeof x.attributes=="object"&&(this.ops[A-1].attributes=x.attributes),this}}return A===this.ops.length?this.ops.push(x):this.ops.splice(A,0,x),this}chop(){const x=this.ops[this.ops.length-1];return x&&typeof x.retain=="number"&&!x.attributes&&this.ops.pop(),this}filter(x){return this.ops.filter(x)}forEach(x){this.ops.forEach(x)}map(x){return this.ops.map(x)}partition(x){const A=[],C=[];return this.forEach(D=>{(x(D)?A:C).push(D)}),[A,C]}reduce(x,A){return this.ops.reduce(x,A)}changeLength(){return this.reduce((x,A)=>A.insert?x+c.default.length(A):A.delete?x-A.delete:x,0)}length(){return this.reduce((x,A)=>x+c.default.length(A),0)}slice(x=0,A=1/0){const C=[],D=new d.default(this.ops);let R=0;for(;R<A&&D.hasNext();){let U;R<x?U=D.next(x-R):(U=D.next(A-R),C.push(U)),R+=c.default.length(U)}return new v(C)}compose(x){const A=new d.default(this.ops),C=new d.default(x.ops),D=[],R=C.peek();if(R!=null&&typeof R.retain=="number"&&R.attributes==null){let F=R.retain;for(;A.peekType()==="insert"&&A.peekLength()<=F;)F-=A.peekLength(),D.push(A.next());R.retain-F>0&&C.next(R.retain-F)}const U=new v(D);for(;A.hasNext()||C.hasNext();)if(C.peekType()==="insert")U.push(C.next());else if(A.peekType()==="delete")U.push(A.next());else{const F=Math.min(A.peekLength(),C.peekLength()),Y=A.next(F),Q=C.next(F);if(Q.retain){const ie={};if(typeof Y.retain=="number")ie.retain=typeof Q.retain=="number"?F:Q.retain;else if(typeof Q.retain=="number")Y.retain==null?ie.insert=Y.insert:ie.retain=Y.retain;else{const L=Y.retain==null?"insert":"retain",[k,V,G]=g(Y[L],Q.retain),S=v.getHandler(k);ie[L]={[k]:S.compose(V,G,L==="retain")}}const ve=l.default.compose(Y.attributes,Q.attributes,typeof Y.retain=="number");if(ve&&(ie.attributes=ve),U.push(ie),!C.hasNext()&&a(U.ops[U.ops.length-1],ie)){const L=new v(A.rest());return U.concat(L).chop()}}else typeof Q.delete=="number"&&(typeof Y.retain=="number"||typeof Y.retain=="object"&&Y.retain!==null)&&U.push(Q)}return U.chop()}concat(x){const A=new v(this.ops.slice());return x.ops.length>0&&(A.push(x.ops[0]),A.ops=A.ops.concat(x.ops.slice(1))),A}diff(x,A){if(this.ops===x.ops)return new v;const C=[this,x].map(Y=>Y.map(Q=>{if(Q.insert!=null)return typeof Q.insert=="string"?Q.insert:m;const ie=Y===x?"on":"with";throw new Error("diff() called "+ie+" non-document")}).join("")),D=new v,R=t(C[0],C[1],A,!0),U=new d.default(this.ops),F=new d.default(x.ops);return R.forEach(Y=>{let Q=Y[1].length;for(;Q>0;){let ie=0;switch(Y[0]){case t.INSERT:ie=Math.min(F.peekLength(),Q),D.push(F.next(ie));break;case t.DELETE:ie=Math.min(Q,U.peekLength()),U.next(ie),D.delete(ie);break;case t.EQUAL:ie=Math.min(U.peekLength(),F.peekLength(),Q);const ve=U.next(ie),L=F.next(ie);a(ve.insert,L.insert)?D.retain(ie,l.default.diff(ve.attributes,L.attributes)):D.push(L).delete(ie);break}Q-=ie}}),D.chop()}eachLine(x,A=`
`){const C=new d.default(this.ops);let D=new v,R=0;for(;C.hasNext();){if(C.peekType()!=="insert")return;const U=C.peek(),F=c.default.length(U)-C.peekLength(),Y=typeof U.insert=="string"?U.insert.indexOf(A,F)-F:-1;if(Y<0)D.push(C.next());else if(Y>0)D.push(C.next(Y));else{if(x(D,C.next(1).attributes||{},R)===!1)return;R+=1,D=new v}}D.length()>0&&x(D,{},R)}invert(x){const A=new v;return this.reduce((C,D)=>{if(D.insert)A.delete(c.default.length(D));else{if(typeof D.retain=="number"&&D.attributes==null)return A.retain(D.retain),C+D.retain;if(D.delete||typeof D.retain=="number"){const R=D.delete||D.retain;return x.slice(C,C+R).forEach(F=>{D.delete?A.push(F):D.retain&&D.attributes&&A.retain(c.default.length(F),l.default.invert(D.attributes,F.attributes))}),C+R}else if(typeof D.retain=="object"&&D.retain!==null){const R=x.slice(C,C+1),U=new d.default(R.ops).next(),[F,Y,Q]=g(D.retain,U.insert),ie=v.getHandler(F);return A.retain({[F]:ie.invert(Y,Q)},l.default.invert(D.attributes,U.attributes)),C+1}}return C},0),A.chop()}transform(x,A=!1){if(A=!!A,typeof x=="number")return this.transformPosition(x,A);const C=x,D=new d.default(this.ops),R=new d.default(C.ops),U=new v;for(;D.hasNext()||R.hasNext();)if(D.peekType()==="insert"&&(A||R.peekType()!=="insert"))U.retain(c.default.length(D.next()));else if(R.peekType()==="insert")U.push(R.next());else{const F=Math.min(D.peekLength(),R.peekLength()),Y=D.next(F),Q=R.next(F);if(Y.delete)continue;if(Q.delete)U.push(Q);else{const ie=Y.retain,ve=Q.retain;let L=typeof ve=="object"&&ve!==null?ve:F;if(typeof ie=="object"&&ie!==null&&typeof ve=="object"&&ve!==null){const k=Object.keys(ie)[0];if(k===Object.keys(ve)[0]){const V=v.getHandler(k);V&&(L={[k]:V.transform(ie[k],ve[k],A)})}}U.retain(L,l.default.transform(Y.attributes,Q.attributes,A))}}return U.chop()}transformPosition(x,A=!1){A=!!A;const C=new d.default(this.ops);let D=0;for(;C.hasNext()&&D<=x;){const R=C.peekLength(),U=C.peekType();if(C.next(),U==="delete"){x-=Math.min(R,x-D);continue}else U==="insert"&&(D<x||!A)&&(x+=R);D+=R}return x}}v.Op=c.default,v.OpIterator=d.default,v.AttributeMap=l.default,v.handlers={},e.default=v,n.exports=v,n.exports.default=v})(nf,nf.exports)),nf.exports}var Ds=w9();const Ie=n0(Ds);class oi extends cs{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}oi.blotName="break";oi.tagName="BR";let si=class extends Qf{};const T9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Im(n){return n.replace(/[&<>"']/g,e=>T9[e])}class xr extends pv{static allowedChildren=[xr,oi,cs,si];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,t){const r=xr.order.indexOf(e),a=xr.order.indexOf(t);return r>=0||a>=0?r-a:e===t?0:e<t?-1:1}formatAt(e,t,r,a){if(xr.compare(this.statics.blotName,r)<0&&this.scroll.query(r,Oe.BLOT)){const l=this.isolate(e,t);a&&l.wrap(r,a)}else super.formatAt(e,t,r,a)}optimize(e){if(super.optimize(e),this.parent instanceof xr&&xr.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}const Aw=1;class Xn extends dh{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=vN(this)),this.cache.delta}deleteAt(e,t){super.deleteAt(e,t),this.cache={}}formatAt(e,t,r,a){t<=0||(this.scroll.query(r,Oe.BLOCK)?e+t===this.length()&&this.format(r,a):super.formatAt(e,Math.min(t,this.length()-e-1),r,a),this.cache={})}insertAt(e,t,r){if(r!=null){super.insertAt(e,t,r),this.cache={};return}if(t.length===0)return;const a=t.split(`
`),l=a.shift();l.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let c=this;a.reduce((d,m)=>(c=c.split(d,!0),c.insertAt(0,m),m.length),e+l.length)}insertBefore(e,t){const{head:r}=this.children;super.insertBefore(e,t),r instanceof oi&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Aw),this.cache.length}moveChildren(e,t){super.moveChildren(e,t),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t&&(e===0||e>=this.length()-Aw)){const a=this.clone();return e===0?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}const r=super.split(e,t);return this.cache={},r}}Xn.blotName="block";Xn.tagName="P";Xn.defaultChild=oi;Xn.allowedChildren=[oi,xr,cs,si];class js extends cs{attach(){super.attach(),this.attributes=new Cm(this.domNode)}delta(){return new Ie().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){const r=this.scroll.query(e,Oe.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,t)}formatAt(e,t,r,a){this.format(r,a)}insertAt(e,t,r){if(r!=null){super.insertAt(e,t,r);return}const a=t.split(`
`),l=a.pop(),c=a.map(m=>{const g=this.scroll.create(Xn.blotName);return g.insertAt(0,m),g}),d=this.split(e);c.forEach(m=>{this.parent.insertBefore(m,d)}),l&&this.parent.insertBefore(this.scroll.create("text",l),d)}}js.scope=Oe.BLOCK_BLOT;function vN(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(cr).reduce((t,r)=>r.length()===0?t:t.insert(r.value(),Cs(r,{},e)),new Ie).insert(`
`,Cs(n))}function Cs(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(e={...e,...n.formats()},t&&delete e["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?e:Cs(n.parent,e,t)}class Zs extends cs{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,t,r){super(e,t),this.selection=r,this.textNode=document.createTextNode(Zs.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let r=this,a=0;for(;r!=null&&r.statics.scope!==Oe.BLOCK_BLOT;)a+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Zs.CONTENTS.length,r.optimize(),r.formatAt(a,Zs.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const t=this.prev instanceof si?this.prev:null,r=t?t.length():0,a=this.next instanceof si?this.next:null,l=a?a.text:"",{textNode:c}=this,d=c.data.split(Zs.CONTENTS).join("");c.data=Zs.CONTENTS;let m;if(t)m=t,(d||a)&&(t.insertAt(t.length(),d+l),a&&a.remove());else if(a)m=a,a.insertAt(0,d);else{const g=document.createTextNode(d);m=this.scroll.create(g),this.parent.insertBefore(m,this)}if(this.remove(),e){const g=(x,A)=>t&&x===t.domNode?A:x===c?r+A-1:a&&x===a.domNode?r+d.length+A:null,v=g(e.start.node,e.start.offset),E=g(e.end.node,e.end.offset);if(v!==null&&E!==null)return{startNode:m.domNode,startOffset:v,endNode:m.domNode,endOffset:E}}return null}update(e,t){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(t.range=r)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=Zs.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}}var Jg={exports:{}},Sw;function A9(){return Sw||(Sw=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function a(m,g,v){this.fn=m,this.context=g,this.once=v||!1}function l(m,g,v,E,x){if(typeof v!="function")throw new TypeError("The listener must be a function");var A=new a(v,E||m,x),C=t?t+g:g;return m._events[C]?m._events[C].fn?m._events[C]=[m._events[C],A]:m._events[C].push(A):(m._events[C]=A,m._eventsCount++),m}function c(m,g){--m._eventsCount===0?m._events=new r:delete m._events[g]}function d(){this._events=new r,this._eventsCount=0}d.prototype.eventNames=function(){var g=[],v,E;if(this._eventsCount===0)return g;for(E in v=this._events)e.call(v,E)&&g.push(t?E.slice(1):E);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(v)):g},d.prototype.listeners=function(g){var v=t?t+g:g,E=this._events[v];if(!E)return[];if(E.fn)return[E.fn];for(var x=0,A=E.length,C=new Array(A);x<A;x++)C[x]=E[x].fn;return C},d.prototype.listenerCount=function(g){var v=t?t+g:g,E=this._events[v];return E?E.fn?1:E.length:0},d.prototype.emit=function(g,v,E,x,A,C){var D=t?t+g:g;if(!this._events[D])return!1;var R=this._events[D],U=arguments.length,F,Y;if(R.fn){switch(R.once&&this.removeListener(g,R.fn,void 0,!0),U){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,v),!0;case 3:return R.fn.call(R.context,v,E),!0;case 4:return R.fn.call(R.context,v,E,x),!0;case 5:return R.fn.call(R.context,v,E,x,A),!0;case 6:return R.fn.call(R.context,v,E,x,A,C),!0}for(Y=1,F=new Array(U-1);Y<U;Y++)F[Y-1]=arguments[Y];R.fn.apply(R.context,F)}else{var Q=R.length,ie;for(Y=0;Y<Q;Y++)switch(R[Y].once&&this.removeListener(g,R[Y].fn,void 0,!0),U){case 1:R[Y].fn.call(R[Y].context);break;case 2:R[Y].fn.call(R[Y].context,v);break;case 3:R[Y].fn.call(R[Y].context,v,E);break;case 4:R[Y].fn.call(R[Y].context,v,E,x);break;default:if(!F)for(ie=1,F=new Array(U-1);ie<U;ie++)F[ie-1]=arguments[ie];R[Y].fn.apply(R[Y].context,F)}}return!0},d.prototype.on=function(g,v,E){return l(this,g,v,E,!1)},d.prototype.once=function(g,v,E){return l(this,g,v,E,!0)},d.prototype.removeListener=function(g,v,E,x){var A=t?t+g:g;if(!this._events[A])return this;if(!v)return c(this,A),this;var C=this._events[A];if(C.fn)C.fn===v&&(!x||C.once)&&(!E||C.context===E)&&c(this,A);else{for(var D=0,R=[],U=C.length;D<U;D++)(C[D].fn!==v||x&&!C[D].once||E&&C[D].context!==E)&&R.push(C[D]);R.length?this._events[A]=R.length===1?R[0]:R:c(this,A)}return this},d.prototype.removeAllListeners=function(g){var v;return g?(v=t?t+g:g,this._events[v]&&c(this,v)):(this._events=new r,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=t,d.EventEmitter=d,n.exports=d})(Jg)),Jg.exports}var S9=A9();const N9=n0(S9),Zy=new WeakMap,Jy=["error","warn","log","info"];let e0="warn";function bN(n){if(e0&&Jy.indexOf(n)<=Jy.indexOf(e0)){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];console[n](...t)}}function ja(n){return Jy.reduce((e,t)=>(e[t]=bN.bind(console,t,n),e),{})}ja.level=n=>{e0=n};bN.level=ja.level;const ey=ja("quill:events"),C9=["selectionchange","mousedown","mouseup","click"];C9.forEach(n=>{document.addEventListener(n,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(a=>{const l=Zy.get(a);l&&l.emitter&&l.emitter.handleDOM(...t)})})});class Ce extends N9{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",ey.error)}emit(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ey.log.call(ey,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];(this.domListeners[e.type]||[]).forEach(l=>{let{node:c,handler:d}=l;(e.target===c||c.contains(e.target))&&d(e,...r)})}listenDOM(e,t,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:r})}}const ty=ja("quill:selection");class gl{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}}class R9{constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new gl(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Ce.sources.USER),1)}),this.emitter.on(Ce.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(Ce.events.SCROLL_UPDATE,(a,l)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const c=l.some(d=>d.type==="characterData"||d.type==="childList"||d.type==="attributes"&&d.target===this.root);this.update(c?Ce.sources.SILENT:a)}catch{}})}),this.emitter.on(Ce.events.SCROLL_OPTIMIZE,(r,a)=>{if(a.range){const{startNode:l,startOffset:c,endNode:d,endOffset:m}=a.range;this.setNativeRange(l,c,d,m),this.update(Ce.sources.SILENT)}}),this.update(Ce.sources.SILENT)}handleComposition(){this.emitter.on(Ce.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Ce.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Ce.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,Oe.BLOCK))){if(r.start.node!==this.cursor.textNode){const a=this.scroll.find(r.start.node,!1);if(a==null)return;if(a instanceof cr){const l=a.split(r.start.offset);a.parent.insertBefore(this.cursor,l)}else a.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;let a,[l,c]=this.scroll.leaf(e);if(l==null)return null;if(t>0&&c===l.length()){const[v]=this.scroll.leaf(e+1);if(v){const[E]=this.scroll.line(e),[x]=this.scroll.line(e+1);E===x&&(l=v,c=0)}}[a,c]=l.position(c,!0);const d=document.createRange();if(t>0)return d.setStart(a,c),[l,c]=this.scroll.leaf(e+t),l==null?null:([a,c]=l.position(c,!0),d.setEnd(a,c),d.getBoundingClientRect());let m="left",g;if(a instanceof Text){if(!a.data.length)return null;c<a.data.length?(d.setStart(a,c),d.setEnd(a,c+1)):(d.setStart(a,c-1),d.setEnd(a,c),m="right"),g=d.getBoundingClientRect()}else{if(!(l.domNode instanceof Element))return null;g=l.domNode.getBoundingClientRect(),c>0&&(m="right")}return{bottom:g.top+g.height,height:g.height,left:g[m],right:g[m],top:g.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const t=e.getRangeAt(0);if(t==null)return null;const r=this.normalizeNative(t);return ty.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&ny(this.root,document.activeElement)}normalizedToRange(e){const t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);const r=t.map(c=>{const[d,m]=c,g=this.scroll.find(d,!0),v=g.offset(this.scroll);return m===0?v:g instanceof cr?v+g.index(d,m):v+g.length()}),a=Math.min(Math.max(...r),this.scroll.length()-1),l=Math.min(a,...r);return new gl(l,a-l)}normalizeNative(e){if(!ny(this.root,e.startContainer)||!e.collapsed&&!ny(this.root,e.endContainer))return null;const t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(r=>{let{node:a,offset:l}=r;for(;!(a instanceof Text)&&a.childNodes.length>0;)if(a.childNodes.length>l)a=a.childNodes[l],l=0;else if(a.childNodes.length===l)a=a.lastChild,a instanceof Text?l=a.data.length:a.childNodes.length>0?l=a.childNodes.length:l=a.childNodes.length+1;else break;r.node=a,r.offset=l}),t}rangeToNative(e){const t=this.scroll.length(),r=(a,l)=>{a=Math.min(t-1,a);const[c,d]=this.scroll.leaf(a);return c?c.position(d,l):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(ty.info("setNativeRange",e,t,r,a),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const c=document.getSelection();if(c!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:d}=this.getNativeRange()||{};if(d==null||l||e!==d.startContainer||t!==d.startOffset||r!==d.endContainer||a!==d.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(a=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const m=document.createRange();m.setStart(e,t),m.setEnd(r,a),c.removeAllRanges(),c.addRange(m)}}else c.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.sources.API;if(typeof t=="string"&&(r=t,t=!1),ty.info("setRange",e),e!=null){const a=this.rangeToNative(e);this.setNativeRange(...a,t)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.sources.USER;const t=this.lastRange,[r,a]=this.getRange();if(this.lastRange=r,this.lastNative=a,this.lastRange!=null&&(this.savedRange=this.lastRange),!fo(t,this.lastRange)){if(!this.composing&&a!=null&&a.native.collapsed&&a.start.node!==this.cursor.textNode){const c=this.cursor.restore();c&&this.setNativeRange(c.startNode,c.startOffset,c.endNode,c.endOffset)}const l=[Ce.events.SELECTION_CHANGE,vc(this.lastRange),vc(t),e];this.emitter.emit(Ce.events.EDITOR_CHANGE,...l),e!==Ce.sources.SILENT&&this.emitter.emit(...l)}}}function ny(n,e){try{e.parentNode}catch{return!1}return n.contains(e)}const I9=/^[ -~]*$/;class j9{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();const r=Nw(e),a=new Ie;return D9(r.ops.slice()).reduce((c,d)=>{const m=Ds.Op.length(d);let g=d.attributes||{},v=!1,E=!1;if(d.insert!=null){if(a.retain(m),typeof d.insert=="string"){const C=d.insert;E=!C.endsWith(`
`)&&(t<=c||!!this.scroll.descendant(js,c)[0]),this.scroll.insertAt(c,C);const[D,R]=this.scroll.line(c);let U=Eo({},Cs(D));if(D instanceof Xn){const[F]=D.descendant(cr,R);F&&(U=Eo(U,Cs(F)))}g=Ds.AttributeMap.diff(U,g)||{}}else if(typeof d.insert=="object"){const C=Object.keys(d.insert)[0];if(C==null)return c;const D=this.scroll.query(C,Oe.INLINE)!=null;if(D)(t<=c||this.scroll.descendant(js,c)[0])&&(E=!0);else if(c>0){const[R,U]=this.scroll.descendant(cr,c-1);R instanceof si?R.value()[U]!==`
`&&(v=!0):R instanceof cs&&R.statics.scope===Oe.INLINE_BLOT&&(v=!0)}if(this.scroll.insertAt(c,C,d.insert[C]),D){const[R]=this.scroll.descendant(cr,c);if(R){const U=Eo({},Cs(R));g=Ds.AttributeMap.diff(U,g)||{}}}}t+=m}else if(a.push(d),d.retain!==null&&typeof d.retain=="object"){const C=Object.keys(d.retain)[0];if(C==null)return c;this.scroll.updateEmbedAt(c,C,d.retain[C])}Object.keys(g).forEach(C=>{this.scroll.formatAt(c,m,C,g[C])});const x=v?1:0,A=E?1:0;return t+=x+A,a.retain(x),a.delete(A),c+m+x+A},0),a.reduce((c,d)=>typeof d.delete=="number"?(this.scroll.deleteAt(c,d.delete),c):c+Ds.Op.length(d),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new Ie().retain(e).delete(t))}formatLine(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(l=>{this.scroll.lines(e,Math.max(t,1)).forEach(c=>{c.format(l,r[l])})}),this.scroll.optimize();const a=new Ie().retain(e).retain(t,vc(r));return this.update(a)}formatText(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(l=>{this.scroll.formatAt(e,t,l,r[l])});const a=new Ie().retain(e).retain(t,vc(r));return this.update(a)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new Ie)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],a=[];t===0?this.scroll.path(e).forEach(d=>{const[m]=d;m instanceof Xn?r.push(m):m instanceof cr&&a.push(m)}):(r=this.scroll.lines(e,t),a=this.scroll.descendants(cr,e,t));const[l,c]=[r,a].map(d=>{const m=d.shift();if(m==null)return{};let g=Cs(m);for(;Object.keys(g).length>0;){const v=d.shift();if(v==null)return g;g=O9(Cs(v),g)}return g});return{...l,...c}}getHTML(e,t){const[r,a]=this.scroll.line(e);if(r){const l=r.length();return r.length()>=a+t&&!(a===0&&t===l)?fh(r,a,t,!0):fh(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,t){const r=Nw(t),a=new Ie().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(a)}insertEmbed(e,t,r){return this.scroll.insertAt(e,t,r),this.update(new Ie().retain(e).insert({[t]:r}))}insertText(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(r).forEach(a=>{this.scroll.formatAt(e,t.length,a,r[a])}),this.update(new Ie().retain(e).insert(t,vc(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==Xn.blotName)return!1;const t=e;return t.children.length>1?!1:t.children.head instanceof oi}removeFormat(e,t){const r=this.getText(e,t),[a,l]=this.scroll.line(e+t);let c=0,d=new Ie;a!=null&&(c=a.length()-l,d=a.delta().slice(l,l+c-1).insert(`
`));const g=this.getContents(e,t+c).diff(new Ie().insert(r).concat(d)),v=new Ie().retain(e).concat(g);return this.applyDelta(v)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const a=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(I9)&&this.scroll.find(t[0].target)){const l=this.scroll.find(t[0].target),c=Cs(l),d=l.offset(this.scroll),m=t[0].oldValue.replace(Zs.CONTENTS,""),g=new Ie().insert(m),v=new Ie().insert(l.value()),E=r&&{oldRange:Cw(r.oldRange,-d),newRange:Cw(r.newRange,-d)};e=new Ie().retain(d).concat(g.diff(v,E)).reduce((A,C)=>C.insert?A.insert(C.insert,c):A.push(C),new Ie),this.delta=a.compose(e)}else this.delta=this.getDelta(),(!e||!fo(a.compose(e),this.delta))&&(e=a.diff(this.delta,r));return e}}function fc(n,e,t){if(n.length===0){const[A]=ry(t.pop());return e<=0?`</li></${A}>`:`</li></${A}>${fc([],e-1,t)}`}const[{child:r,offset:a,length:l,indent:c,type:d},...m]=n,[g,v]=ry(d);if(c>e)return t.push(d),c===e+1?`<${g}><li${v}>${fh(r,a,l)}${fc(m,c,t)}`:`<${g}><li>${fc(n,e+1,t)}`;const E=t[t.length-1];if(c===e&&d===E)return`</li><li${v}>${fh(r,a,l)}${fc(m,c,t)}`;const[x]=ry(t.pop());return`</li></${x}>${fc(n,e-1,t)}`}function fh(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(e,t);if(n instanceof si)return Im(n.value().slice(e,e+t)).replaceAll(" ","&nbsp;");if(n instanceof ni){if(n.statics.blotName==="list-container"){const g=[];return n.children.forEachAt(e,t,(v,E,x)=>{const A="formats"in v&&typeof v.formats=="function"?v.formats():{};g.push({child:v,offset:E,length:x,indent:A.indent||0,type:A.list})}),fc(g,-1,[])}const a=[];if(n.children.forEachAt(e,t,(g,v,E)=>{a.push(fh(g,v,E))}),r||n.statics.blotName==="list")return a.join("");const{outerHTML:l,innerHTML:c}=n.domNode,[d,m]=l.split(`>${c}<`);return d==="<table"?`<table style="border: 1px solid #000;">${a.join("")}<${m}`:`${d}>${a.join("")}<${m}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}function O9(n,e){return Object.keys(e).reduce((t,r)=>{if(n[r]==null)return t;const a=e[r];return a===n[r]?t[r]=a:Array.isArray(a)?a.indexOf(n[r])<0?t[r]=a.concat([n[r]]):t[r]=a:t[r]=[a,n[r]],t},{})}function ry(n){const e=n==="ordered"?"ol":"ul";switch(n){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function Nw(n){return n.reduce((e,t)=>{if(typeof t.insert=="string"){const r=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,t.attributes)}return e.push(t)},new Ie)}function Cw(n,e){let{index:t,length:r}=n;return new gl(t+e,r)}function D9(n){const e=[];return n.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((a,l)=>{l&&e.push({insert:`
`,attributes:t.attributes}),a&&e.push({insert:a,attributes:t.attributes})}):e.push(t)}),e}class Pi{static DEFAULTS={};constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}}const of="\uFEFF";class yv extends cs{constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(of),this.rightGuard=document.createTextNode(of),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,r;const a=e.data.split(of).join("");if(e===this.leftGuard)if(this.prev instanceof si){const l=this.prev.length();this.prev.insertAt(l,a),t={startNode:this.prev.domNode,startOffset:l+a.length}}else r=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(r),this),t={startNode:r,startOffset:a.length};else e===this.rightGuard&&(this.next instanceof si?(this.next.insertAt(0,a),t={startNode:this.next.domNode,startOffset:a.length}):(r=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(r),this.next),t={startNode:r,startOffset:a.length}));return e.data=of,t}update(e,t){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const a=this.restore(r.target);a&&(t.range=a)}})}}class L9{isComposing=!1;constructor(e,t){this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof yv)&&(this.emitter.emit(Ce.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(Ce.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(Ce.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(Ce.events.COMPOSITION_END,e),this.isComposing=!1}}class Kc{static DEFAULTS={modules:{}};static themes={default:Kc};modules={};constructor(e,t){this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}const k9=n=>n.parentElement||n.getRootNode().host||null,M9=n=>{const e=n.getBoundingClientRect(),t="offsetWidth"in n&&Math.abs(e.width)/n.offsetWidth||1,r="offsetHeight"in n&&Math.abs(e.height)/n.offsetHeight||1;return{top:e.top,right:e.left+n.clientWidth*t,bottom:e.top+n.clientHeight*r,left:e.left}},lf=n=>{const e=parseInt(n,10);return Number.isNaN(e)?0:e},Rw=(n,e,t,r,a,l)=>n<t&&e>r?0:n<t?-(t-n+a):e>r?e-n>r-t?n+a-t:e-r+l:0,P9=(n,e)=>{const t=n.ownerDocument;let r=e,a=n;for(;a;){const l=a===t.body,c=l?{top:0,right:window.visualViewport?.width??t.documentElement.clientWidth,bottom:window.visualViewport?.height??t.documentElement.clientHeight,left:0}:M9(a),d=getComputedStyle(a),m=Rw(r.left,r.right,c.left,c.right,lf(d.scrollPaddingLeft),lf(d.scrollPaddingRight)),g=Rw(r.top,r.bottom,c.top,c.bottom,lf(d.scrollPaddingTop),lf(d.scrollPaddingBottom));if(m||g)if(l)t.defaultView?.scrollBy(m,g);else{const{scrollLeft:v,scrollTop:E}=a;g&&(a.scrollTop+=g),m&&(a.scrollLeft+=m);const x=a.scrollLeft-v,A=a.scrollTop-E;r={left:r.left-x,top:r.top-A,right:r.right-x,bottom:r.bottom-A}}a=l||d.position==="fixed"?null:k9(a)}},U9=100,V9=["block","break","cursor","inline","scroll","text"],q9=(n,e,t)=>{const r=new Dc;return V9.forEach(a=>{const l=e.query(a);l&&r.register(l)}),n.forEach(a=>{let l=e.query(a);l||t.error(`Cannot register "${a}" specified in "formats" config. Are you sure it was registered?`);let c=0;for(;l;)if(r.register(l),l="blotName"in l?l.requiredContainer??null:null,c+=1,c>U9){t.error(`Cycle detected in registering blot requiredContainer: "${a}"`);break}}),r},_c=ja("quill"),cf=new Dc;ni.uiClass="ql-ui";class le{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:cf,theme:"default"};static events=Ce.events;static sources=Ce.sources;static version="2.0.3";static imports={delta:Ie,parchment:b9,"core/module":Pi,"core/theme":Kc};static debug(e){e===!0&&(e="log"),ja.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Zy.get(e)||cf.find(e,t)}static import(e){return this.imports[e]==null&&_c.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],t=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,t):Object.keys(e).forEach(a=>{this.register(a,e[a],t)})}else{const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&_c.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&cf.register(t),typeof t.register=="function"&&t.register(cf)}}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=B9(e,t),this.container=this.options.container,this.container==null){_c.error("Invalid Quill container",e);return}this.options.debug&&le.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Zy.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Ce;const a=gv.blotName,l=this.options.registry.query(a);if(!l||!("blotName"in l))throw new Error(`Cannot initialize Quill without "${a}" blot`);if(this.scroll=new l(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new j9(this.scroll),this.selection=new R9(this.scroll,this.emitter),this.composition=new L9(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Ce.events.EDITOR_CHANGE,c=>{c===Ce.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Ce.events.SCROLL_UPDATE,(c,d)=>{const m=this.selection.lastRange,[g]=this.selection.getRange(),v=m&&g?{oldRange:m,newRange:g}:void 0;Xs.call(this,()=>this.editor.update(null,d,v),c)}),this.emitter.on(Ce.events.SCROLL_EMBED_UPDATE,(c,d)=>{const m=this.selection.lastRange,[g]=this.selection.getRange(),v=m&&g?{oldRange:m,newRange:g}:void 0;Xs.call(this,()=>{const E=new Ie().retain(c.offset(this)).retain({[c.statics.blotName]:d});return this.editor.update(E,[],v)},le.sources.USER)}),r){const c=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(c)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,r){return[e,t,,r]=pa(e,t,r),Xs.call(this,()=>this.editor.deleteText(e,t),r,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.sources.API;return Xs.call(this,()=>{const a=this.getSelection(!0);let l=new Ie;if(a==null)return l;if(this.scroll.query(e,Oe.BLOCK))l=this.editor.formatLine(a.index,a.length,{[e]:t});else{if(a.length===0)return this.selection.format(e,t),l;l=this.editor.formatText(a.index,a.length,{[e]:t})}return this.setSelection(a,Ce.sources.SILENT),l},r)}formatLine(e,t,r,a,l){let c;return[e,t,c,l]=pa(e,t,r,a,l),Xs.call(this,()=>this.editor.formatLine(e,t,c),l,e,0)}formatText(e,t,r,a,l){let c;return[e,t,c,l]=pa(e,t,r,a,l),Xs.call(this,()=>this.editor.formatText(e,t,c),l,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,t):r=this.selection.getBounds(e.index,e.length),!r)return null;const a=this.container.getBoundingClientRect();return{bottom:r.bottom-a.top,height:r.height,left:r.left-a.left,right:r.right-a.left,top:r.top-a.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=pa(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=pa(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=pa(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:le.sources.API;return Xs.call(this,()=>this.editor.insertEmbed(e,t,r),a,e)}insertText(e,t,r,a,l){let c;return[e,,c,l]=pa(e,0,r,a,l),Xs.call(this,()=>this.editor.insertText(e,t,c),l,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,r){return[e,t,,r]=pa(e,t,r),Xs.call(this,()=>this.editor.removeFormat(e,t),r,e)}scrollRectIntoView(e){P9(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;return Xs.call(this,()=>{e=new Ie(e);const r=this.getLength(),a=this.editor.deleteText(0,r),l=this.editor.insertContents(0,e),c=this.editor.deleteText(this.getLength()-1,1);return a.compose(l).compose(c)},t)}setSelection(e,t,r){e==null?this.selection.setRange(null,t||le.sources.API):([e,t,,r]=pa(e,t,r),this.selection.setRange(new gl(Math.max(0,e),t),r),r!==Ce.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;const r=new Ie().insert(e);return this.setContents(r,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.sources.USER;const t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;return Xs.call(this,()=>(e=new Ie(e),this.editor.applyDelta(e)),t,!0)}}function Iw(n){return typeof n=="string"?document.querySelector(n):n}function sy(n){return Object.entries(n??{}).reduce((e,t)=>{let[r,a]=t;return{...e,[r]:a===!0?{}:a}},{})}function jw(n){return Object.fromEntries(Object.entries(n).filter(e=>e[1]!==void 0))}function B9(n,e){const t=Iw(n);if(!t)throw new Error("Invalid Quill container");const a=!e.theme||e.theme===le.DEFAULTS.theme?Kc:le.import(`themes/${e.theme}`);if(!a)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:l,...c}=le.DEFAULTS,{modules:d,...m}=a.DEFAULTS;let g=sy(e.modules);g!=null&&g.toolbar&&g.toolbar.constructor!==Object&&(g={...g,toolbar:{container:g.toolbar}});const v=Eo({},sy(l),sy(d),g),E={...c,...jw(m),...jw(e)};let x=e.registry;return x?e.formats&&_c.warn('Ignoring "formats" option because "registry" is specified'):x=e.formats?q9(e.formats,E.registry,_c):E.registry,{...E,registry:x,container:t,theme:a,modules:Object.entries(v).reduce((A,C)=>{let[D,R]=C;if(!R)return A;const U=le.import(`modules/${D}`);return U==null?(_c.error(`Cannot load ${D} module. Are you sure you registered it?`),A):{...A,[D]:Eo({},U.DEFAULTS||{},R)}},{}),bounds:Iw(E.bounds)}}function Xs(n,e,t,r){if(!this.isEnabled()&&e===Ce.sources.USER&&!this.allowReadOnlyEdits)return new Ie;let a=t==null?null:this.getSelection();const l=this.editor.delta,c=n();if(a!=null&&(t===!0&&(t=a.index),r==null?a=Ow(a,c,e):r!==0&&(a=Ow(a,t,r,e)),this.setSelection(a,Ce.sources.SILENT)),c.length()>0){const d=[Ce.events.TEXT_CHANGE,c,l,e];this.emitter.emit(Ce.events.EDITOR_CHANGE,...d),e!==Ce.sources.SILENT&&this.emitter.emit(...d)}return c}function pa(n,e,t,r,a){let l={};return typeof n.index=="number"&&typeof n.length=="number"?typeof e!="number"?(a=r,r=t,t=e,e=n.length,n=n.index):(e=n.length,n=n.index):typeof e!="number"&&(a=r,r=t,t=e,e=0),typeof t=="object"?(l=t,a=r):typeof t=="string"&&(r!=null?l[t]=r:a=t),a=a||Ce.sources.API,[n,e,l,a]}function Ow(n,e,t,r){const a=typeof t=="number"?t:0;if(n==null)return null;let l,c;return e&&typeof e.transformPosition=="function"?[l,c]=[n.index,n.index+n.length].map(d=>e.transformPosition(d,r!==Ce.sources.USER)):[l,c]=[n.index,n.index+n.length].map(d=>d<e||d===e&&r===Ce.sources.USER?d:a>=0?d+a:Math.max(e,d+a)),new gl(l,c-l)}class Sl extends Rm{}function Dw(n){return n instanceof Xn||n instanceof js}function Lw(n){return typeof n.updateContent=="function"}class z9 extends gv{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Xn;static allowedChildren=[Xn,js,Sl];constructor(e,t,r){let{emitter:a}=r;super(e,t),this.emitter=a,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",l=>this.handleDragStart(l))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(Ce.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(Ce.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(Ce.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){const[r,a]=this.line(e),[l]=this.line(e+t);if(super.deleteAt(e,t),l!=null&&r!==l&&a>0){if(r instanceof js||l instanceof js){this.optimize();return}const c=l.children.head instanceof oi?null:l.children.head;r.moveChildren(l,c),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,r,a){super.formatAt(e,t,r,a),this.optimize()}insertAt(e,t,r){if(e>=this.length())if(r==null||this.scroll.query(t,Oe.BLOCK)==null){const a=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(a),r==null&&t.endsWith(`
`)?a.insertAt(0,t.slice(0,-1),r):a.insertAt(0,t,r)}else{const a=this.scroll.create(t,r);this.appendChild(a)}else super.insertAt(e,t,r);this.optimize()}insertBefore(e,t){if(e.statics.scope===Oe.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,t)}else super.insertBefore(e,t)}insertContents(e,t){const r=this.deltaToRenderBlocks(t.concat(new Ie().insert(`
`))),a=r.pop();if(a==null)return;this.batchStart();const l=r.shift();if(l){const m=l.type==="block"&&(l.delta.length()===0||!this.descendant(js,e)[0]&&e<this.length()),g=l.type==="block"?l.delta:new Ie().insert({[l.key]:l.value});iy(this,e,g);const v=l.type==="block"?1:0,E=e+g.length()+v;m&&this.insertAt(E-1,`
`);const x=Cs(this.line(e)[0]),A=Ds.AttributeMap.diff(x,l.attributes)||{};Object.keys(A).forEach(C=>{this.formatAt(E-1,1,C,A[C])}),e=E}let[c,d]=this.children.find(e);if(r.length&&(c&&(c=c.split(d),d=0),r.forEach(m=>{if(m.type==="block"){const g=this.createBlock(m.attributes,c||void 0);iy(g,0,m.delta)}else{const g=this.create(m.key,m.value);this.insertBefore(g,c||void 0),Object.keys(m.attributes).forEach(v=>{g.format(v,m.attributes[v])})}})),a.type==="block"&&a.delta.length()){const m=c?c.offset(c.scroll)+d:this.length();iy(this,m,a.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const t=this.path(e).pop();if(!t)return[null,-1];const[r,a]=t;return r instanceof cr?[r,a]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(Dw,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(a,l,c)=>{let d=[],m=c;return a.children.forEachAt(l,c,(g,v,E)=>{Dw(g)?d.push(g):g instanceof Rm&&(d=d.concat(r(g,v,m))),m-=E}),d};return r(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(Ce.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=Ce.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:a}=r;const l=this.find(a,!0);return l&&!Lw(l)}),e.length>0&&this.emitter.emit(Ce.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(Ce.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,r){const[a]=this.descendant(l=>l instanceof js,e);a&&a.statics.blotName===t&&Lw(a)&&a.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const t=[];let r=new Ie;return e.forEach(a=>{const l=a?.insert;if(l)if(typeof l=="string"){const c=l.split(`
`);c.slice(0,-1).forEach(m=>{r.insert(m,a.attributes),t.push({type:"block",delta:r,attributes:a.attributes??{}}),r=new Ie});const d=c[c.length-1];d&&r.insert(d,a.attributes)}else{const c=Object.keys(l)[0];if(!c)return;this.query(c,Oe.INLINE)?r.push(a):(r.length()&&t.push({type:"block",delta:r,attributes:{}}),r=new Ie,t.push({type:"blockEmbed",key:c,value:l[c],attributes:a.attributes??{}}))}}),r.length()&&t.push({type:"block",delta:r,attributes:{}}),t}createBlock(e,t){let r;const a={};Object.entries(e).forEach(d=>{let[m,g]=d;this.query(m,Oe.BLOCK&Oe.BLOT)!=null?r=m:a[m]=g});const l=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(l,t||void 0);const c=l.length();return Object.entries(a).forEach(d=>{let[m,g]=d;l.formatAt(0,c,m,g)}),l}}function iy(n,e,t){t.reduce((r,a)=>{const l=Ds.Op.length(a);let c=a.attributes||{};if(a.insert!=null){if(typeof a.insert=="string"){const d=a.insert;n.insertAt(r,d);const[m]=n.descendant(cr,r),g=Cs(m);c=Ds.AttributeMap.diff(g,c)||{}}else if(typeof a.insert=="object"){const d=Object.keys(a.insert)[0];if(d==null)return r;if(n.insertAt(r,d,a.insert[d]),n.scroll.query(d,Oe.INLINE)!=null){const[g]=n.descendant(cr,r),v=Cs(g);c=Ds.AttributeMap.diff(v,c)||{}}}}return Object.keys(c).forEach(d=>{n.formatAt(r,l,d,c[d])}),r+l},e)}const vv={scope:Oe.BLOCK,whitelist:["right","center","justify"]},H9=new Li("align","align",vv),_N=new ai("align","ql-align",vv),xN=new Uo("align","text-align",vv);class EN extends Uo{value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(a=>`00${parseInt(a,10).toString(16)}`.slice(-2)).join("")}`):t}}const F9=new ai("color","ql-color",{scope:Oe.INLINE}),bv=new EN("color","color",{scope:Oe.INLINE}),G9=new ai("background","ql-bg",{scope:Oe.INLINE}),_v=new EN("background","background-color",{scope:Oe.INLINE});class Nl extends Sl{static create(e){const t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${Im(this.code(e,t))}
</pre>`}}class wr extends Xn{static TAB="  ";static register(){le.register(Nl)}}class xv extends xr{}xv.blotName="code";xv.tagName="CODE";wr.blotName="code-block";wr.className="ql-code-block";wr.tagName="DIV";Nl.blotName="code-block-container";Nl.className="ql-code-block-container";Nl.tagName="DIV";Nl.allowedChildren=[wr];wr.allowedChildren=[si,oi,Zs];wr.requiredContainer=Nl;const Ev={scope:Oe.BLOCK,whitelist:["rtl"]},wN=new Li("direction","dir",Ev),TN=new ai("direction","ql-direction",Ev),AN=new Uo("direction","direction",Ev),SN={scope:Oe.INLINE,whitelist:["serif","monospace"]},NN=new ai("font","ql-font",SN);class $9 extends Uo{value(e){return super.value(e).replace(/["']/g,"")}}const CN=new $9("font","font-family",SN),RN=new ai("size","ql-size",{scope:Oe.INLINE,whitelist:["small","large","huge"]}),IN=new Uo("size","font-size",{scope:Oe.INLINE,whitelist:["10px","18px","32px"]}),K9=ja("quill:keyboard"),Q9=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class jm extends Pi{static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!t[r]!==e[r]&&t[r]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=X9(e);if(a==null){K9.warn("Attempted to add invalid keyboard binding",a);return}typeof t=="function"&&(t={handler:t}),typeof r=="function"&&(r={handler:r}),(Array.isArray(a.key)?a.key:[a.key]).forEach(c=>{const d={...a,key:c,...t,...r};this.bindings[d.key]=this.bindings[d.key]||[],this.bindings[d.key].push(d)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const a=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(U=>jm.match(e,U));if(a.length===0)return;const l=le.find(e.target,!0);if(l&&l.scroll!==this.quill.scroll)return;const c=this.quill.getSelection();if(c==null||!this.quill.hasFocus())return;const[d,m]=this.quill.getLine(c.index),[g,v]=this.quill.getLeaf(c.index),[E,x]=c.length===0?[g,v]:this.quill.getLeaf(c.index+c.length),A=g instanceof Qf?g.value().slice(0,v):"",C=E instanceof Qf?E.value().slice(x):"",D={collapsed:c.length===0,empty:c.length===0&&d.length()<=1,format:this.quill.getFormat(c),line:d,offset:m,prefix:A,suffix:C,event:e};a.some(U=>{if(U.collapsed!=null&&U.collapsed!==D.collapsed||U.empty!=null&&U.empty!==D.empty||U.offset!=null&&U.offset!==D.offset)return!1;if(Array.isArray(U.format)){if(U.format.every(F=>D.format[F]==null))return!1}else if(typeof U.format=="object"&&!Object.keys(U.format).every(F=>U.format[F]===!0?D.format[F]!=null:U.format[F]===!1?D.format[F]==null:fo(U.format[F],D.format[F])))return!1;return U.prefix!=null&&!U.prefix.test(D.prefix)||U.suffix!=null&&!U.suffix.test(D.suffix)?!1:U.handler.call(this,c,D,U)!==!0})&&e.preventDefault()})}handleBackspace(e,t){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let a={};const[l]=this.quill.getLine(e.index);let c=new Ie().retain(e.index-r).delete(r);if(t.offset===0){const[d]=this.quill.getLine(e.index-1);if(d&&!(d.statics.blotName==="block"&&d.length()<=1)){const g=l.formats(),v=this.quill.getFormat(e.index-1,1);if(a=Ds.AttributeMap.diff(g,v)||{},Object.keys(a).length>0){const E=new Ie().retain(e.index+l.length()-2).retain(1,a);c=c.compose(E)}}}this.quill.updateContents(c,le.sources.USER),this.quill.focus()}handleDelete(e,t){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let a={};const[l]=this.quill.getLine(e.index);let c=new Ie().retain(e.index).delete(r);if(t.offset>=l.length()-1){const[d]=this.quill.getLine(e.index+1);if(d){const m=l.formats(),g=this.quill.getFormat(e.index,1);a=Ds.AttributeMap.diff(m,g)||{},Object.keys(a).length>0&&(c=c.retain(d.length()-1).retain(1,a))}}this.quill.updateContents(c,le.sources.USER),this.quill.focus()}handleDeleteRange(e){wv({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){const r=Object.keys(t.format).reduce((l,c)=>(this.quill.scroll.query(c,Oe.BLOCK)&&!Array.isArray(t.format[c])&&(l[c]=t.format[c]),l),{}),a=new Ie().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(e.index+1,le.sources.SILENT),this.quill.focus()}}const Y9={bindings:{bold:ay("bold"),italic:ay("italic"),underline:ay("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",le.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",le.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,e){e.format.indent!=null?this.quill.format("indent","-1",le.sources.USER):e.format.list!=null&&this.quill.format("list",!1,le.sources.USER)}},"indent code-block":kw(!0),"outdent code-block":kw(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,le.sources.USER)}},tab:{key:"Tab",handler(n,e){if(e.format.table)return!0;this.quill.history.cutoff();const t=new Ie().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(t,le.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,le.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,le.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,e){const t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(n.index,n.length,t,le.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){const[e,t]=this.quill.getLine(n.index),r={...e.formats(),list:"checked"},a=new Ie().retain(n.index).insert(`
`,r).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(n.index+1,le.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,e){const[t,r]=this.quill.getLine(n.index),a=new Ie().retain(n.index).insert(`
`,e.format).retain(t.length()-r-1).retain(1,{header:null});this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(n.index+1,le.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){const e=this.quill.getModule("table");if(e){const[t,r,a,l]=e.getTable(n),c=W9(t,r,a,l);if(c==null)return;let d=t.offset();if(c<0){const m=new Ie().retain(d).insert(`
`);this.quill.updateContents(m,le.sources.USER),this.quill.setSelection(n.index+1,n.length,le.sources.SILENT)}else if(c>0){d+=t.length();const m=new Ie().retain(d).insert(`
`);this.quill.updateContents(m,le.sources.USER),this.quill.setSelection(d,le.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,e){const{event:t,line:r}=e,a=r.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(a-1,le.sources.USER):this.quill.setSelection(a+r.length(),le.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,e){if(this.quill.scroll.query("list")==null)return!0;const{length:t}=e.prefix,[r,a]=this.quill.getLine(n.index);if(a>t)return!0;let l;switch(e.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(n.index," ",le.sources.USER),this.quill.history.cutoff();const c=new Ie().retain(n.index-a).delete(t+1).retain(r.length()-2-a).retain(1,{list:l});return this.quill.updateContents(c,le.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-t,le.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){const[e,t]=this.quill.getLine(n.index);let r=2,a=e;for(;a!=null&&a.length()<=1&&a.formats()["code-block"];)if(a=a.prev,r-=1,r<=0){const l=new Ie().retain(n.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(l,le.sources.USER),this.quill.setSelection(n.index-1,le.sources.SILENT),!1}return!0}},"embed left":uf("ArrowLeft",!1),"embed left shift":uf("ArrowLeft",!0),"embed right":uf("ArrowRight",!1),"embed right shift":uf("ArrowRight",!0),"table down":Mw(!1),"table up":Mw(!0)}};jm.DEFAULTS=Y9;function kw(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(e,t){let{event:r}=t;const a=this.quill.scroll.query("code-block"),{TAB:l}=a;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,l,le.sources.USER),this.quill.setSelection(e.index+l.length,le.sources.SILENT);return}const c=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:d,length:m}=e;c.forEach((g,v)=>{n?(g.insertAt(0,l),v===0?d+=l.length:m+=l.length):g.domNode.textContent.startsWith(l)&&(g.deleteAt(0,l.length),v===0?d-=l.length:m-=l.length)}),this.quill.update(le.sources.USER),this.quill.setSelection(d,m,le.sources.SILENT)}}}function uf(n,e){return{key:n,shiftKey:e,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:a}=r;n==="ArrowRight"&&(a+=r.length+1);const[l]=this.quill.getLeaf(a);return l instanceof cs?(n==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,le.sources.USER):this.quill.setSelection(r.index-1,le.sources.USER):e?this.quill.setSelection(r.index,r.length+1,le.sources.USER):this.quill.setSelection(r.index+r.length+1,le.sources.USER),!1):!0}}}function ay(n){return{key:n[0],shortKey:!0,handler(e,t){this.quill.format(n,!t.format[n],le.sources.USER)}}}function Mw(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){const r=n?"prev":"next",a=t.line,l=a.parent[r];if(l!=null){if(l.statics.blotName==="table-row"){let c=l.children.head,d=a;for(;d.prev!=null;)d=d.prev,c=c.next;const m=c.offset(this.quill.scroll)+Math.min(t.offset,c.length()-1);this.quill.setSelection(m,0,le.sources.USER)}}else{const c=a.table()[r];c!=null&&(n?this.quill.setSelection(c.offset(this.quill.scroll)+c.length()-1,0,le.sources.USER):this.quill.setSelection(c.offset(this.quill.scroll),0,le.sources.USER))}return!1}}}function X9(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=vc(n);else return null;return n.shortKey&&(n[Q9]=n.shortKey,delete n.shortKey),n}function wv(n){let{quill:e,range:t}=n;const r=e.getLines(t);let a={};if(r.length>1){const l=r[0].formats(),c=r[r.length-1].formats();a=Ds.AttributeMap.diff(c,l)||{}}e.deleteText(t,le.sources.USER),Object.keys(a).length>0&&e.formatLine(t.index,1,a,le.sources.USER),e.setSelection(t.index,le.sources.SILENT)}function W9(n,e,t,r){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?r===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const Z9=/font-weight:\s*normal/,J9=["P","OL","UL"],Pw=n=>n&&J9.includes(n.tagName),e7=n=>{Array.from(n.querySelectorAll("br")).filter(e=>Pw(e.previousElementSibling)&&Pw(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},t7=n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(Z9)).forEach(e=>{const t=n.createDocumentFragment();t.append(...e.childNodes),e.parentNode?.replaceChild(t,e)})};function n7(n){n.querySelector('[id^="docs-internal-guid-"]')&&(t7(n),e7(n))}const r7=/\bmso-list:[^;]*ignore/i,s7=/\bmso-list:[^;]*\bl(\d+)/i,i7=/\bmso-list:[^;]*\blevel(\d+)/i,a7=(n,e)=>{const t=n.getAttribute("style"),r=t?.match(s7);if(!r)return null;const a=Number(r[1]),l=t?.match(i7),c=l?Number(l[1]):1,d=new RegExp(`@list l${a}:level${c}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),m=e.match(d),g=m&&m[1]==="bullet"?"bullet":"ordered";return{id:a,indent:c,type:g,element:n}},o7=n=>{const e=Array.from(n.querySelectorAll("[style*=mso-list]")),t=[],r=[];e.forEach(c=>{(c.getAttribute("style")||"").match(r7)?t.push(c):r.push(c)}),t.forEach(c=>c.parentNode?.removeChild(c));const a=n.documentElement.innerHTML,l=r.map(c=>a7(c,a)).filter(c=>c);for(;l.length;){const c=[];let d=l.shift();for(;d;)c.push(d),d=l.length&&l[0]?.element===d.element.nextElementSibling&&l[0].id===d.id?l.shift():null;const m=document.createElement("ul");c.forEach(E=>{const x=document.createElement("li");x.setAttribute("data-list",E.type),E.indent>1&&x.setAttribute("class",`ql-indent-${E.indent-1}`),x.innerHTML=E.element.innerHTML,m.appendChild(x)});const g=c[0]?.element,{parentNode:v}=g??{};g&&v?.replaceChild(m,g),c.slice(1).forEach(E=>{let{element:x}=E;v?.removeChild(x)})}};function l7(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&o7(n)}const c7=[l7,n7],u7=n=>{n.documentElement&&c7.forEach(e=>{e(n)})},h7=ja("quill:clipboard"),d7=[[Node.TEXT_NODE,A7],[Node.TEXT_NODE,Vw],["br",v7],[Node.ELEMENT_NODE,Vw],[Node.ELEMENT_NODE,y7],[Node.ELEMENT_NODE,g7],[Node.ELEMENT_NODE,w7],["li",x7],["ol, ul",E7],["pre",b7],["tr",T7],["b",oy("bold")],["i",oy("italic")],["strike",oy("strike")],["style",_7]],f7=[H9,wN].reduce((n,e)=>(n[e.keyName]=e,n),{}),Uw=[xN,_v,bv,AN,CN,IN].reduce((n,e)=>(n[e.keyName]=e,n),{});class m7 extends Pi{static DEFAULTS={matchers:[]};constructor(e,t){super(e,t),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],d7.concat(this.options.matchers??[]).forEach(r=>{let[a,l]=r;this.addMatcher(a,l)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:r}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a[wr.blotName])return new Ie().insert(r||"",{[wr.blotName]:a[wr.blotName]});if(!t)return new Ie().insert(r||"",a);const l=this.convertHTML(t);return Oh(l,`
`)&&(l.ops[l.ops.length-1].attributes==null||a.table)?l.compose(new Ie().retain(l.length()-1).delete(1)):l}normalizeHTML(e){u7(e)}convertHTML(e){const t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);const r=t.body,a=new WeakMap,[l,c]=this.prepareMatching(r,a);return Tv(this.quill.scroll,r,l,c,a)}dangerouslyPasteHTML(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:le.sources.API;if(typeof e=="string"){const a=this.convert({html:e,text:""});this.quill.setContents(a,t),this.quill.setSelection(0,le.sources.SILENT)}else{const a=this.convert({html:t,text:""});this.quill.updateContents(new Ie().retain(e).concat(a),r),this.quill.setSelection(e+a.length(),le.sources.SILENT)}}onCaptureCopy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:a,text:l}=this.onCopy(r,t);e.clipboardData?.setData("text/plain",l),e.clipboardData?.setData("text/html",a),t&&wv({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const t=this.quill.getSelection(!0);if(t==null)return;const r=e.clipboardData?.getData("text/html");let a=e.clipboardData?.getData("text/plain");if(!r&&!a){const c=e.clipboardData?.getData("text/uri-list");c&&(a=this.normalizeURIList(c))}const l=Array.from(e.clipboardData?.files||[]);if(!r&&l.length>0){this.quill.uploader.upload(t,l);return}if(r&&l.length>0){const c=new DOMParser().parseFromString(r,"text/html");if(c.body.childElementCount===1&&c.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(t,l);return}}this.onPaste(t,{html:r,text:a})}onCopy(e){const t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:r,html:a}=t;const l=this.quill.getFormat(e.index),c=this.convert({text:r,html:a},l);h7.log("onPaste",c,{text:r,html:a});const d=new Ie().retain(e.index).delete(e.length).concat(c);this.quill.updateContents(d,le.sources.USER),this.quill.setSelection(d.length()-e.length,le.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){const r=[],a=[];return this.matchers.forEach(l=>{const[c,d]=l;switch(c){case Node.TEXT_NODE:a.push(d);break;case Node.ELEMENT_NODE:r.push(d);break;default:Array.from(e.querySelectorAll(c)).forEach(m=>{t.has(m)?t.get(m)?.push(d):t.set(m,[d])});break}}),[r,a]}}function Cl(n,e,t,r){return r.query(e)?n.reduce((a,l)=>{if(!l.insert)return a;if(l.attributes&&l.attributes[e])return a.push(l);const c=t?{[e]:t}:{};return a.insert(l.insert,{...c,...l.attributes})},new Ie):n}function Oh(n,e){let t="";for(let r=n.ops.length-1;r>=0&&t.length<e.length;--r){const a=n.ops[r];if(typeof a.insert!="string")break;t=a.insert+t}return t.slice(-1*e.length)===e}function go(n,e){if(!(n instanceof Element))return!1;const t=e.query(n);return t&&t.prototype instanceof cs?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}function p7(n,e){return n.previousElementSibling&&n.nextElementSibling&&!go(n.previousElementSibling,e)&&!go(n.nextElementSibling,e)}const hf=new WeakMap;function jN(n){return n==null?!1:(hf.has(n)||(n.tagName==="PRE"?hf.set(n,!0):hf.set(n,jN(n.parentNode))),hf.get(n))}function Tv(n,e,t,r,a){return e.nodeType===e.TEXT_NODE?r.reduce((l,c)=>c(e,l,n),new Ie):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((l,c)=>{let d=Tv(n,c,t,r,a);return c.nodeType===e.ELEMENT_NODE&&(d=t.reduce((m,g)=>g(c,m,n),d),d=(a.get(c)||[]).reduce((m,g)=>g(c,m,n),d)),l.concat(d)},new Ie):new Ie}function oy(n){return(e,t,r)=>Cl(t,n,!0,r)}function g7(n,e,t){const r=Li.keys(n),a=ai.keys(n),l=Uo.keys(n),c={};return r.concat(a).concat(l).forEach(d=>{let m=t.query(d,Oe.ATTRIBUTE);m!=null&&(c[m.attrName]=m.value(n),c[m.attrName])||(m=f7[d],m!=null&&(m.attrName===d||m.keyName===d)&&(c[m.attrName]=m.value(n)||void 0),m=Uw[d],m!=null&&(m.attrName===d||m.keyName===d)&&(m=Uw[d],c[m.attrName]=m.value(n)||void 0))}),Object.entries(c).reduce((d,m)=>{let[g,v]=m;return Cl(d,g,v,t)},e)}function y7(n,e,t){const r=t.query(n);if(r==null)return e;if(r.prototype instanceof cs){const a={},l=r.value(n);if(l!=null)return a[r.blotName]=l,new Ie().insert(a,r.formats(n,t))}else if(r.prototype instanceof dh&&!Oh(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return Cl(e,r.blotName,r.formats(n,t),t);return e}function v7(n,e){return Oh(e,`
`)||e.insert(`
`),e}function b7(n,e,t){const r=t.query("code-block"),a=r&&"formats"in r&&typeof r.formats=="function"?r.formats(n,t):!0;return Cl(e,"code-block",a,t)}function _7(){return new Ie}function x7(n,e,t){const r=t.query(n);if(r==null||r.blotName!=="list"||!Oh(e,`
`))return e;let a=-1,l=n.parentNode;for(;l!=null;)["OL","UL"].includes(l.tagName)&&(a+=1),l=l.parentNode;return a<=0?e:e.reduce((c,d)=>d.insert?d.attributes&&typeof d.attributes.indent=="number"?c.push(d):c.insert(d.insert,{indent:a,...d.attributes||{}}):c,new Ie)}function E7(n,e,t){const r=n;let a=r.tagName==="OL"?"ordered":"bullet";const l=r.getAttribute("data-checked");return l&&(a=l==="true"?"checked":"unchecked"),Cl(e,"list",a,t)}function Vw(n,e,t){if(!Oh(e,`
`)){if(go(n,t)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&n.nextSibling){let r=n.nextSibling;for(;r!=null;){if(go(r,t))return e.insert(`
`);const a=t.query(r);if(a&&a.prototype instanceof js)return e.insert(`
`);r=r.firstChild}}}return e}function w7(n,e,t){const r={},a=n.style||{};return a.fontStyle==="italic"&&(r.italic=!0),a.textDecoration==="underline"&&(r.underline=!0),a.textDecoration==="line-through"&&(r.strike=!0),(a.fontWeight?.startsWith("bold")||parseInt(a.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((l,c)=>{let[d,m]=c;return Cl(l,d,m,t)},e),parseFloat(a.textIndent||0)>0?new Ie().insert("	").concat(e):e}function T7(n,e,t){const r=n.parentElement?.tagName==="TABLE"?n.parentElement:n.parentElement?.parentElement;if(r!=null){const l=Array.from(r.querySelectorAll("tr")).indexOf(n)+1;return Cl(e,"table",l,t)}return e}function A7(n,e,t){let r=n.data;if(n.parentElement?.tagName==="O:P")return e.insert(r.trim());if(!jN(n)){if(r.trim().length===0&&r.includes(`
`)&&!p7(n,t))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(n.previousSibling==null&&n.parentElement!=null&&go(n.parentElement,t)||n.previousSibling instanceof Element&&go(n.previousSibling,t))&&(r=r.replace(/^ /,"")),(n.nextSibling==null&&n.parentElement!=null&&go(n.parentElement,t)||n.nextSibling instanceof Element&&go(n.nextSibling,t))&&(r=r.replace(/ $/,"")),r=r.replaceAll(""," ")}return e.insert(r)}class S7 extends Pi{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,t){super(e,t),this.quill.on(le.events.EDITOR_CHANGE,(r,a,l,c)=>{r===le.events.SELECTION_CHANGE?a&&c!==le.sources.SILENT&&(this.currentRange=a):r===le.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||c===le.sources.USER?this.record(a,l):this.transform(a)),this.currentRange=t0(this.currentRange,a))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(e,t){if(this.stack[e].length===0)return;const r=this.stack[e].pop();if(!r)return;const a=this.quill.getContents(),l=r.delta.invert(a);this.stack[t].push({delta:l,range:t0(r.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,le.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,t){if(e.ops.length===0)return;this.stack.redo=[];let r=e.invert(t),a=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const c=this.stack.undo.pop();c&&(r=r.compose(c.delta),a=c.range)}else this.lastRecorded=l;r.length()!==0&&(this.stack.undo.push({delta:r,range:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){qw(this.stack.undo,e),qw(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,le.sources.USER);else{const t=C7(this.quill.scroll,e.delta);this.quill.setSelection(t,le.sources.USER)}}}function qw(n,e){let t=e;for(let r=n.length-1;r>=0;r-=1){const a=n[r];n[r]={delta:t.transform(a.delta,!0),range:a.range&&t0(a.range,t)},t=a.delta.transform(t),n[r].delta.length()===0&&n.splice(r,1)}}function N7(n,e){const t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(r=>n.query(r,Oe.BLOCK)!=null):!1}function C7(n,e){const t=e.reduce((a,l)=>a+(l.delete||0),0);let r=e.length()-t;return N7(n,e)&&(r-=1),r}function t0(n,e){if(!n)return n;const t=e.transformPosition(n.index),r=e.transformPosition(n.index+n.length);return{index:t,length:r-t}}class ON extends Pi{constructor(e,t){super(e,t),e.root.addEventListener("drop",r=>{r.preventDefault();let a=null;if(document.caretRangeFromPoint)a=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const c=document.caretPositionFromPoint(r.clientX,r.clientY);a=document.createRange(),a.setStart(c.offsetNode,c.offset),a.setEnd(c.offsetNode,c.offset)}const l=a&&e.selection.normalizeNative(a);if(l){const c=e.selection.normalizedToRange(l);r.dataTransfer?.files&&this.upload(c,r.dataTransfer.files)}})}upload(e,t){const r=[];Array.from(t).forEach(a=>{a&&this.options.mimetypes?.includes(a.type)&&r.push(a)}),r.length>0&&this.options.handler.call(this,e,r)}}ON.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,e){if(!this.quill.scroll.query("image"))return;const t=e.map(r=>new Promise(a=>{const l=new FileReader;l.onload=()=>{a(l.result)},l.readAsDataURL(r)}));Promise.all(t).then(r=>{const a=r.reduce((l,c)=>l.insert({image:c}),new Ie().retain(n.index).delete(n.length));this.quill.updateContents(a,Ce.sources.USER),this.quill.setSelection(n.index+r.length,Ce.sources.SILENT)})}};const R7=["insertText","insertReplacementText"];class I7 extends Pi{constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(le.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){wv({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Ie().retain(e.index).insert(t,r),le.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,le.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!R7.includes(e.inputType))return;const t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;const r=j7(e);if(r==null)return;const a=this.quill.selection.normalizeNative(t),l=a?this.quill.selection.normalizedToRange(a):null;l&&this.replaceText(l,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function j7(n){return typeof n.data=="string"?n.data:n.dataTransfer?.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}const O7=/Mac/i.test(navigator.platform),D7=100,L7=n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||O7&&n.key==="a"&&n.ctrlKey===!0);class k7 extends Pi{isListening=!1;selectionChangeDeadline=0;constructor(e,t){super(e,t),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,t){let{line:r,event:a}=t;if(!(r instanceof ni)||!r.uiNode)return!0;const l=getComputedStyle(r.domNode).direction==="rtl";return l&&a.key!=="ArrowRight"||!l&&a.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(a.shiftKey?1:0),le.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&L7(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+D7,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const t=e.getRangeAt(0);if(t.collapsed!==!0||t.startOffset!==0)return;const r=this.quill.scroll.find(t.startContainer);if(!(r instanceof ni)||!r.uiNode)return;const a=document.createRange();a.setStartAfter(r.uiNode),a.setEndAfter(r.uiNode),e.removeAllRanges(),e.addRange(a)}}le.register({"blots/block":Xn,"blots/block/embed":js,"blots/break":oi,"blots/container":Sl,"blots/cursor":Zs,"blots/embed":yv,"blots/inline":xr,"blots/scroll":z9,"blots/text":si,"modules/clipboard":m7,"modules/history":S7,"modules/keyboard":jm,"modules/uploader":ON,"modules/input":I7,"modules/uiNode":k7});class M7 extends ai{add(e,t){let r=0;if(t==="+1"||t==="-1"){const a=this.value(e)||0;r=t==="+1"?a+1:a-1}else typeof t=="number"&&(r=t);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}}const P7=new M7("indent","ql-indent",{scope:Oe.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class U7 extends Xn{static blotName="blockquote";static tagName="blockquote"}class V7 extends Xn{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class Dh extends Sl{}Dh.blotName="list-container";Dh.tagName="OL";class Lh extends Xn{static create(e){const t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){le.register(Dh)}constructor(e,t){super(e,t);const r=t.ownerDocument.createElement("span"),a=l=>{if(!e.isEnabled())return;const c=this.statics.formats(t,e);c==="checked"?(this.format("list","unchecked"),l.preventDefault()):c==="unchecked"&&(this.format("list","checked"),l.preventDefault())};r.addEventListener("mousedown",a),r.addEventListener("touchstart",a),this.attachUI(r)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}}Lh.blotName="list";Lh.tagName="LI";Dh.allowedChildren=[Lh];Lh.requiredContainer=Dh;class Av extends xr{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class q7 extends Av{static blotName="italic";static tagName=["EM","I"]}class Yf extends xr{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return DN(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}}function DN(n,e){const t=document.createElement("a");t.href=n;const r=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(r)>-1}class B7 extends xr{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class z7 extends Av{static blotName="strike";static tagName=["S","STRIKE"]}class H7 extends xr{static blotName="underline";static tagName="U"}class F7 extends yv{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const Bw=["alt","height","width"];let G7=class extends cs{static blotName="image";static tagName="IMG";static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return Bw.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return DN(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){Bw.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}};const zw=["height","width"];class $7 extends js{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return zw.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}static sanitize(e){return Yf.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){zw.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const Gu=new ai("code-token","hljs",{scope:Oe.INLINE});class Na extends xr{static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(wr.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,r){super(e,t,r),Gu.add(this.domNode,r)}format(e,t){e!==Na.blotName?super.format(e,t):t?Gu.add(this.domNode,t):(Gu.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Gu.value(this.domNode)||this.unwrap()}}Na.blotName="code-token";Na.className="ql-token";class Rs extends wr{static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),Na.blotName,!1),super.replaceWith(e,t)}}class Ju extends Nl{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===Rs.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,t)}))}formatAt(e,t,r,a){r===Rs.blotName&&(this.forceNext=!0),super.formatAt(e,t,r,a)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const a=`${Array.from(this.domNode.childNodes).filter(c=>c!==this.uiNode).map(c=>c.textContent).join(`
`)}
`,l=Rs.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==a){if(a.trim().length>0||this.cachedText==null){const c=this.children.reduce((m,g)=>m.concat(vN(g,!1)),new Ie),d=e(a,l);c.diff(d).reduce((m,g)=>{let{retain:v,attributes:E}=g;return v?(E&&Object.keys(E).forEach(x=>{[Rs.blotName,Na.blotName].includes(x)&&this.formatAt(m,v,x,E[x])}),m+v):m},0)}this.cachedText=a,this.forceNext=!1}}html(e,t){const[r]=this.children.find(e);return`<pre data-language="${r?Rs.formats(r.domNode):"plain"}">
${Im(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const t=Rs.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}Ju.allowedChildren=[Rs];Rs.requiredContainer=Ju;Rs.allowedChildren=[Na,Zs,si,oi];const K7=(n,e,t)=>{if(typeof n.versionString=="string"){const r=n.versionString.split(".")[0];if(parseInt(r,10)>=11)return n.highlight(t,{language:e}).value}return n.highlight(e,t).value};class LN extends Pi{static register(){le.register(Na,!0),le.register(Rs,!0),le.register(Ju,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,a)=>{let{key:l}=a;return r[l]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(le.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof Ju))return;const t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:a,label:l}=r;const c=t.ownerDocument.createElement("option");c.textContent=l,c.setAttribute("value",a),t.appendChild(c)}),t.addEventListener("change",()=>{e.format(Rs.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=Rs.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(le.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(le.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(Ju):[e]).forEach(l=>{l.highlight(this.highlightBlot,t)}),this.quill.update(le.sources.SILENT),r!=null&&this.quill.setSelection(r,le.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return Im(e).split(`
`).reduce((a,l,c)=>(c!==0&&a.insert(`
`,{[wr.blotName]:t}),a.insert(l)),new Ie);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(wr.className),r.innerHTML=K7(this.options.hljs,t,e),Tv(this.quill.scroll,r,[(a,l)=>{const c=Gu.value(a);return c?l.compose(new Ie().retain(l.length(),{[Na.blotName]:c})):l}],[(a,l)=>a.data.split(`
`).reduce((c,d,m)=>(m!==0&&c.insert(`
`,{[wr.blotName]:t}),c.insert(d)),l)],new WeakMap)}}LN.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Js extends Xn{static blotName="table";static tagName="TD";static create(e){const t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",Sv()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===Js.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class yl extends Sl{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),t=this.children.tail.formats(),r=this.next.children.head.formats(),a=this.next.children.tail.formats();return e.table===t.table&&e.table===r.table&&e.table===a.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;const r=t.formats(),a=t.next.formats();if(r.table!==a.table){const l=this.splitAfter(t);l&&l.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class wo extends Sl{static blotName="table-body";static tagName="TBODY"}class Xf extends Sl{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(yl),t=e.reduce((r,a)=>Math.max(a.children.length,r),0);e.forEach(r=>{new Array(t-r.children.length).fill(0).forEach(()=>{let a;r.children.head!=null&&(a=Js.formats(r.children.head.domNode));const l=this.scroll.create(Js.blotName,a);r.appendChild(l),l.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){const[t]=this.descendant(wo);t==null||t.children.head==null||t.children.forEach(r=>{const a=r.children.at(e);a?.remove()})}insertColumn(e){const[t]=this.descendant(wo);t==null||t.children.head==null||t.children.forEach(r=>{const a=r.children.at(e),l=Js.formats(r.children.head.domNode),c=this.scroll.create(Js.blotName,l);r.insertBefore(c,a)})}insertRow(e){const[t]=this.descendant(wo);if(t==null||t.children.head==null)return;const r=Sv(),a=this.scroll.create(yl.blotName);t.children.head.children.forEach(()=>{const c=this.scroll.create(Js.blotName,r);a.appendChild(c)});const l=t.children.at(e);t.insertBefore(a,l)}rows(){const e=this.children.head;return e==null?[]:e.children.map(t=>t)}}Xf.allowedChildren=[wo];wo.requiredContainer=Xf;wo.allowedChildren=[yl];yl.requiredContainer=wo;yl.allowedChildren=[Js];Js.requiredContainer=yl;function Sv(){return`row-${Math.random().toString(36).slice(2,6)}`}class Q7 extends Pi{static register(){le.register(Js),le.register(yl),le.register(wo),le.register(Xf)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Xf).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(le.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(le.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const t=e.offset();e.remove(),this.quill.update(le.sources.USER),this.quill.setSelection(t,le.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[t,r]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==Js.blotName)return[null,null,null,-1];const a=t.parent;return[a.parent.parent,a,t,r]}insertColumn(e){const t=this.quill.getSelection();if(!t)return;const[r,a,l]=this.getTable(t);if(l==null)return;const c=l.cellOffset();r.insertColumn(c+e),this.quill.update(le.sources.USER);let d=a.rowOffset();e===0&&(d+=1),this.quill.setSelection(t.index+d,t.length,le.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const t=this.quill.getSelection();if(!t)return;const[r,a,l]=this.getTable(t);if(l==null)return;const c=a.rowOffset();r.insertRow(c+e),this.quill.update(le.sources.USER),e>0?this.quill.setSelection(t,le.sources.SILENT):this.quill.setSelection(t.index+a.children.length,t.length,le.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){const r=this.quill.getSelection();if(r==null)return;const a=new Array(e).fill(0).reduce(l=>{const c=new Array(t).fill(`
`).join("");return l.insert(c,{table:Sv()})},new Ie().retain(r.index));this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(r.index,le.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(le.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(le.events.TEXT_CHANGE,(r,a,l)=>{l===le.sources.USER&&this.balanceTables()}),!0):!1)})}}const Hw=ja("quill:toolbar");class Nv extends Pi{constructor(e,t){if(super(e,t),Array.isArray(this.options.container)){const r=document.createElement("div");r.setAttribute("role","toolbar"),Y7(r,this.options.container),e.container?.parentNode?.insertBefore(r,e.container),this.container=r}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){Hw.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{const a=this.options.handlers?.[r];a&&this.addHandler(r,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(le.events.EDITOR_CHANGE,()=>{const[r]=this.quill.selection.getRange();this.update(r)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(a=>a.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){Hw.warn("ignoring attaching to nonexistent format",t,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,a=>{let l;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const d=e.options[e.selectedIndex];d.hasAttribute("selected")?l=!1:l=d.value||!1}else e.classList.contains("ql-active")?l=!1:l=e.value||!e.hasAttribute("value"),a.preventDefault();this.quill.focus();const[c]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,l);else if(this.quill.scroll.query(t).prototype instanceof cs){if(l=prompt(`Enter ${t}`),!l)return;this.quill.updateContents(new Ie().retain(c.index).delete(c.length).insert({[t]:l}),le.sources.USER)}else this.quill.format(t,l,le.sources.USER);this.update(c)}),this.controls.push([t,e])}update(e){const t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[a,l]=r;if(l.tagName==="SELECT"){let c=null;if(e==null)c=null;else if(t[a]==null)c=l.querySelector("option[selected]");else if(!Array.isArray(t[a])){let d=t[a];typeof d=="string"&&(d=d.replace(/"/g,'\\"')),c=l.querySelector(`option[value="${d}"]`)}c==null?(l.value="",l.selectedIndex=-1):c.selected=!0}else if(e==null)l.classList.remove("ql-active"),l.setAttribute("aria-pressed","false");else if(l.hasAttribute("value")){const c=t[a],d=c===l.getAttribute("value")||c!=null&&c.toString()===l.getAttribute("value")||c==null&&!l.getAttribute("value");l.classList.toggle("ql-active",d),l.setAttribute("aria-pressed",d.toString())}else{const c=t[a]!=null;l.classList.toggle("ql-active",c),l.setAttribute("aria-pressed",c.toString())}})}}Nv.DEFAULTS={};function Fw(n,e,t){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),t!=null?(r.value=t,r.setAttribute("aria-label",`${e}: ${t}`)):r.setAttribute("aria-label",e),n.appendChild(r)}function Y7(n,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{const r=document.createElement("span");r.classList.add("ql-formats"),t.forEach(a=>{if(typeof a=="string")Fw(r,a);else{const l=Object.keys(a)[0],c=a[l];Array.isArray(c)?X7(r,l,c):Fw(r,l,c)}}),n.appendChild(r)})}function X7(n,e,t){const r=document.createElement("select");r.classList.add(`ql-${e}`),t.forEach(a=>{const l=document.createElement("option");a!==!1?l.setAttribute("value",String(a)):l.setAttribute("selected","selected"),r.appendChild(l)}),n.appendChild(r)}Nv.DEFAULTS={container:null,handlers:{clean(){const n=this.quill.getSelection();if(n!=null)if(n.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,Oe.INLINE)!=null&&this.quill.format(t,!1,le.sources.USER)})}else this.quill.removeFormat(n.index,n.length,le.sources.USER)},direction(n){const{align:e}=this.quill.getFormat();n==="rtl"&&e==null?this.quill.format("align","right",le.sources.USER):!n&&e==="right"&&this.quill.format("align",!1,le.sources.USER),this.quill.format("direction",n,le.sources.USER)},indent(n){const e=this.quill.getSelection(),t=this.quill.getFormat(e),r=parseInt(t.indent||0,10);if(n==="+1"||n==="-1"){let a=n==="+1"?1:-1;t.direction==="rtl"&&(a*=-1),this.quill.format("indent",r+a,le.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,le.sources.USER)},list(n){const e=this.quill.getSelection(),t=this.quill.getFormat(e);n==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,le.sources.USER):this.quill.format("list","unchecked",le.sources.USER):this.quill.format("list",n,le.sources.USER)}}};const W7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',Z7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',J7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',eP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',tP='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',nP='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',rP='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',sP='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Gw='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',iP='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',aP='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',oP='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',lP='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',cP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',uP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',hP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',dP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',fP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',mP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',pP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',gP='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',yP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',vP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',bP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',_P='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',xP='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',EP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',wP='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',TP='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',AP='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',SP='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',NP='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',CP='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',mh={align:{"":W7,center:Z7,right:J7,justify:eP},background:tP,blockquote:nP,bold:rP,clean:sP,code:Gw,"code-block":Gw,color:iP,direction:{"":aP,rtl:oP},formula:lP,header:{1:cP,2:uP,3:hP,4:dP,5:fP,6:mP},italic:pP,image:gP,indent:{"+1":yP,"-1":vP},link:bP,list:{bullet:_P,check:xP,ordered:EP},script:{sub:wP,super:TP},strike:AP,table:SP,underline:NP,video:CP},RP='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let $w=0;function Kw(n,e){n.setAttribute(e,`${n.getAttribute(e)!=="true"}`)}class Om{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Kw(this.label,"aria-expanded"),Kw(this.options,"aria-hidden")}buildItem(e){const t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&t.setAttribute("data-value",r),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",a=>{switch(a.key){case"Enter":this.selectItem(t,!0),a.preventDefault();break;case"Escape":this.escape(),a.preventDefault();break}}),t}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=RP,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${$w}`,$w+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{const r=this.buildItem(t);e.appendChild(r),t.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}}class kN extends Om{constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);const r=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=a:r.style.fill=a)}}class MN extends Om{constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=t[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const IP=n=>{const{overflowY:e}=getComputedStyle(n,null);return e!=="visible"&&e!=="clip"};class PN{constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,IP(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const a=this.boundsContainer.getBoundingClientRect(),l=this.root.getBoundingClientRect();let c=0;if(l.right>a.right&&(c=a.right-l.right,this.root.style.left=`${t+c}px`),l.left<a.left&&(c=a.left-l.left,this.root.style.left=`${t+c}px`),l.bottom>a.bottom){const d=l.bottom-l.top,m=e.bottom-e.top+d;this.root.style.top=`${r-m}px`,this.root.classList.add("ql-flip")}return c}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const jP=[!1,"center","right","justify"],OP=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],DP=[!1,"serif","monospace"],LP=["1","2","3",!1],kP=["small",!1,"large","huge"];class kh extends Kc{constructor(e,t){super(e,t);const r=a=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(a.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(l=>{l.container.contains(a.target)||l.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(l=>{if(l.startsWith("ql-")&&(l=l.slice(3),t[l]!=null))if(l==="direction")r.innerHTML=t[l][""]+t[l].rtl;else if(typeof t[l]=="string")r.innerHTML=t[l];else{const c=r.value||"";c!=null&&t[l][c]&&(r.innerHTML=t[l][c])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(a=>{if(a.classList.contains("ql-align")&&(a.querySelector("option")==null&&ku(a,jP),typeof t.align=="object"))return new MN(a,t.align);if(a.classList.contains("ql-background")||a.classList.contains("ql-color")){const l=a.classList.contains("ql-background")?"background":"color";return a.querySelector("option")==null&&ku(a,OP,l==="background"?"#ffffff":"#000000"),new kN(a,t[l])}return a.querySelector("option")==null&&(a.classList.contains("ql-font")?ku(a,DP):a.classList.contains("ql-header")?ku(a,LP):a.classList.contains("ql-size")&&ku(a,kP)),new Om(a)});const r=()=>{this.pickers.forEach(a=>{a.update()})};this.quill.on(Ce.events.EDITOR_CHANGE,r)}}kh.DEFAULTS=Eo({},Kc.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class UN extends PN{constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,Ce.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,Ce.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=MP(e);case"formula":{if(!e)break;const t=this.quill.getSelection(!0);if(t!=null){const r=t.index+t.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,Ce.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",Ce.sources.USER),this.quill.setSelection(r+2,Ce.sources.USER)}break}}this.textbox.value="",this.hide()}}function MP(n){let e=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:n}function ku(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const a=document.createElement("option");r===t?a.setAttribute("selected","selected"):a.setAttribute("value",String(r)),n.appendChild(a)})}const PP=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class UP extends UN{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,t){super(e,t),this.quill.on(Ce.events.EDITOR_CHANGE,(r,a,l,c)=>{if(r===Ce.events.SELECTION_CHANGE)if(a!=null&&a.length>0&&c===Ce.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const d=this.quill.getLines(a.index,a.length);if(d.length===1){const m=this.quill.getBounds(a);m!=null&&this.position(m)}else{const m=d[d.length-1],g=this.quill.getIndex(m),v=Math.min(m.length()-1,a.index+a.length-g),E=this.quill.getBounds(new gl(g,v));E!=null&&this.position(E)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Ce.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){const t=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",t!==0&&(r.style.marginLeft=`${-1*t-r.offsetWidth/2}px`),t}}class VN extends kh{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=PP),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new UP(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),mh),this.buildPickers(e.container.querySelectorAll("select"),mh))}}VN.DEFAULTS=Eo({},kh.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1,le.sources.USER)}}}}});const VP=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class qP extends UN{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,Ce.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(Ce.events.SELECTION_CHANGE,(e,t,r)=>{if(e!=null){if(e.length===0&&r===Ce.sources.USER){const[a,l]=this.quill.scroll.descendant(Yf,e.index);if(a!=null){this.linkRange=new gl(e.index-l,a.length());const c=Yf.formats(a.domNode);this.preview.textContent=c,this.preview.setAttribute("href",c),this.show();const d=this.quill.getBounds(this.linkRange);d!=null&&this.position(d);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class qN extends kh{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=VP),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),mh),this.buildPickers(e.container.querySelectorAll("select"),mh),this.tooltip=new qP(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,r)=>{e.handlers.link.call(e,!r.format.link)}))}}qN.DEFAULTS=Eo({},kh.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){const e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);const{tooltip:r}=this.quill.theme;r.edit("link",t)}else this.quill.format("link",!1,le.sources.USER)}}}}});le.register({"attributors/attribute/direction":wN,"attributors/class/align":_N,"attributors/class/background":G9,"attributors/class/color":F9,"attributors/class/direction":TN,"attributors/class/font":NN,"attributors/class/size":RN,"attributors/style/align":xN,"attributors/style/background":_v,"attributors/style/color":bv,"attributors/style/direction":AN,"attributors/style/font":CN,"attributors/style/size":IN},!0);le.register({"formats/align":_N,"formats/direction":TN,"formats/indent":P7,"formats/background":_v,"formats/color":bv,"formats/font":NN,"formats/size":RN,"formats/blockquote":U7,"formats/code-block":wr,"formats/header":V7,"formats/list":Lh,"formats/bold":Av,"formats/code":xv,"formats/italic":q7,"formats/link":Yf,"formats/script":B7,"formats/strike":z7,"formats/underline":H7,"formats/formula":F7,"formats/image":G7,"formats/video":$7,"modules/syntax":LN,"modules/table":Q7,"modules/toolbar":Nv,"themes/bubble":VN,"themes/snow":qN,"ui/icons":mh,"ui/picker":Om,"ui/icon-picker":MN,"ui/color-picker":kN,"ui/tooltip":PN},!0);class Rl extends Ei.Component{constructor(e){super(e),this.editingAreaRef=P.createRef(),this.containerRef=P.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(r,a,l,c)=>{r==="text-change"?this.onEditorChangeText?.(this.editor.root.innerHTML,a,c,this.unprivilegedEditor):r==="selection-change"&&this.onEditorChangeSelection?.(a,c,this.unprivilegedEditor)};const t=this.isControlled()?e.value:e.defaultValue;this.value=t??""}validateProps(e){if(Ei.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Ei.Children.count(e.children)&&Ei.Children.only(e.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,t){if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){const r=this.getEditorContents(),a=e.value??"";this.isEqualValue(a,r)||this.setEditorContents(this.editor,a)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(r=>!fo(e[r],this.props[r]))}shouldComponentRegenerate(e){return this.dirtyProps.some(t=>!fo(e[t],this.props[t]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,t){if(this.editor&&this.shouldComponentRegenerate(e)){const r=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:r,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){const{delta:r,selection:a}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const l=this.editor;l.setContents(r),Qw(()=>this.setEditorSelection(l,a))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const e=this.props.modules?.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const r=this.containerRef.current?.querySelector(".ql-toolbar");r&&r.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,t){const r=new le(e,t);return t.tabIndex!=null&&this.setEditorTabIndex(r,t.tabIndex),this.hookEditor(r),r}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,t){return this.isDelta(e)&&this.isDelta(t)?fo(e.ops,t.ops):fo(e,t)}setEditorContents(e,t){this.value=t;const r=this.getEditorSelection();typeof t=="string"?e.setContents(e.clipboard.convert({html:t})):e.setContents(t),Qw(()=>this.setEditorSelection(e,r))}setEditorSelection(e,t){if(this.selection=t,t){const r=e.getLength();t.index=Math.max(0,Math.min(t.index,r-1)),t.length=Math.max(0,Math.min(t.length,r-1-t.index)),e.setSelection(t)}}setEditorTabIndex(e,t){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=t)}setEditorReadOnly(e,t){t?e.disable():e.enable()}makeUnprivilegedEditor(e){const t=e;return{getHTML:()=>t.root.innerHTML,getSemanticHTML:t.getSemanticHTML.bind(t),getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:t}=this.props,{generation:r}=this.state,a={key:r,ref:this.editingAreaRef};return Ei.Children.count(e)?Ei.cloneElement(Ei.Children.only(e),a):t?Ei.createElement("pre",{...a}):Ei.createElement("div",{...a})}render(){return Ei.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,t,r,a){if(!this.editor)return;const l=this.isDelta(this.value)?a.getContents():a.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=l,this.props.onChange?.(e,t,r,a))}onEditorChangeSelection(e,t,r){if(!this.editor)return;const a=this.getEditorSelection(),l=!a&&e,c=a&&!e;fo(e,a)||(this.selection=e,this.props.onChangeSelection?.(e,t,r),l?this.props.onFocus?.(e,t,r):c&&this.props.onBlur?.(a,t,r))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}Rl.displayName="React Quill";Rl.Quill=le;Rl.defaultProps={theme:"snow",modules:{},readOnly:!1};function Qw(n){Promise.resolve().then(n)}const BP={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},zP=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],HP=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0),[a,l]=P.useState(!1),[c,d]=P.useState(null),[m,g]=P.useState({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""});P.useEffect(()=>{v()},[]);const v=async()=>{r(!0);try{const C=ls(gt(Se,"news"),ii("timestamp","desc")),R=(await Rn(C)).docs.map(U=>({id:U.id,...U.data()}));e(R)}catch(C){console.error("Error fetching news:",C)}finally{r(!1)}},E=async C=>{if(window.confirm("Are you sure you want to delete this news item?"))try{await Ih(Ye(Se,"news",C)),v()}catch(D){console.error("Error deleting news:",D),alert("Failed to delete news item.")}},x=async C=>{C.preventDefault();try{const D=m.affectedCurrencies.split(",").map(R=>R.trim().toUpperCase()).filter(R=>R);c?await Os(Ye(Se,"news",c),{title:m.title,impact:m.impact,content:m.content,image:m.image,affectedCurrencies:D,timestamp:fl()}):await El(gt(Se,"news"),{title:m.title,impact:m.impact,content:m.content,image:m.image,affectedCurrencies:D,timestamp:fl()}),l(!1),d(null),g({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""}),v()}catch(D){console.error("Error saving news:",D),alert("Failed to save news item.")}},A=C=>{g({title:C.title,impact:C.impact,content:C.content,image:C.image,affectedCurrencies:C.affectedCurrencies?C.affectedCurrencies.join(", "):""}),d(C.id),l(!0)};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage News"}),f.jsx(Ct,{onClick:()=>{l(!a),a&&(d(null),g({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""}))},children:a?"Cancel":"Post New Alert"})]}),a&&f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:c?"Edit Market Update":"New Market Update"}),f.jsxs("form",{onSubmit:x,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:C=>g({...m,title:C.target.value}),placeholder:"e.g., NFP Beats Expectations"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Impact Level"}),f.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.impact,onChange:C=>g({...m,impact:C.target.value}),children:[f.jsx("option",{value:"Low",children:"Low (Yellow)"}),f.jsx("option",{value:"Medium",children:"Medium (Orange)"}),f.jsx("option",{value:"High",children:"High (Red)"})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Content/Summary"}),f.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:f.jsx(Rl,{theme:"snow",value:m.content,onChange:C=>g({...m,content:C}),modules:BP,formats:zP,className:"h-96 mb-12"})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Image URL (Optional)"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.image,onChange:C=>g({...m,image:C.target.value}),placeholder:"https://..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Affected Currencies (comma separated)"}),f.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.affectedCurrencies,onChange:C=>g({...m,affectedCurrencies:C.target.value}),placeholder:"USD, EUR, JPY"})]})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsx(Ct,{type:"submit",variant:"primary",children:c?"Update News":"Publish News"})})]})]}),f.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-800",children:[f.jsx("thead",{className:"bg-gray-900/50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Title"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Impact"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-800",children:t?f.jsx("tr",{children:f.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-400",children:"Loading data..."})}):n.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-400",children:"No news posted yet."})}):n.map(C=>f.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.timestamp?.seconds?new Date(C.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-medium",children:C.title}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${C.impact==="High"?"bg-red-500/20 text-red-400":C.impact==="Medium"?"bg-orange-500/20 text-orange-400":"bg-green-500/20 text-green-400"}`,children:C.impact})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[f.jsx("button",{onClick:()=>A(C),className:"text-primary hover:text-primary/80 transition-colors mr-4",children:"Edit"}),f.jsx("button",{onClick:()=>E(C.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Delete"})]})]},C.id))})]})})})]})},FP={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},GP=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],$P=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0),[a,l]=P.useState(!1),[c,d]=P.useState(null),[m,g]=P.useState({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}),[v,E]=P.useState({});P.useEffect(()=>{x();const R=Eh(Be,async U=>{if(U)try{const F=Ye(Se,"users",U.uid),Y=await hr(F);Y.exists()&&E(Y.data())}catch(F){console.error("Error fetching profile:",F)}});return()=>R()},[]);const x=async()=>{r(!0);try{const R=ls(gt(Se,"analysis"),ii("timestamp","desc")),F=(await Rn(R)).docs.map(Y=>({id:Y.id,...Y.data()}));e(F)}catch(R){console.error("Error fetching analysis:",R)}finally{r(!1)}},A=async R=>{if(window.confirm("Are you sure you want to delete this analysis?"))try{await Ih(Ye(Se,"analysis",R)),x()}catch(U){console.error("Error deleting post:",U),alert("Failed to delete post.")}},C=async R=>{R.preventDefault();const U={...m,...v,timestamp:fl()};try{c?await Os(Ye(Se,"analysis",c),U):await El(gt(Se,"analysis"),U),l(!1),d(null),g({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}),x()}catch(F){console.error("Error saving post:",F),alert("Failed to save analysis.")}},D=R=>{g({title:R.title,pair:R.pair,direction:R.direction,content:R.content,image:R.image,analysisType:R.analysisType||"Technical Analysis"}),d(R.id),l(!0)};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage Analysis"}),f.jsx(Ct,{onClick:()=>{l(!a),a&&(d(null),g({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}))},children:a?"Cancel":"New Analysis"})]}),a&&f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:c?"Edit Analysis":"Post Technical Breakdown"}),f.jsxs("form",{onSubmit:C,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Pair / Asset"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none uppercase",value:m.pair,onChange:R=>g({...m,pair:R.target.value}),placeholder:"e.g. GBP/JPY"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Direction"}),f.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.direction,onChange:R=>g({...m,direction:R.target.value}),children:[f.jsx("option",{value:"Neutral",children:"Neutral (Gray)"}),f.jsx("option",{value:"Bullish",children:"Bullish (Green)"}),f.jsx("option",{value:"Bearish",children:"Bearish (Red)"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analysis Type"}),f.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.analysisType,onChange:R=>g({...m,analysisType:R.target.value}),children:[f.jsx("option",{value:"Technical Analysis",children:"Technical Analysis"}),f.jsx("option",{value:"Fundamental Analysis",children:"Fundamental Analysis"}),f.jsx("option",{value:"Sentiment Analysis",children:"Sentiment Analysis"})]})]})]}),f.jsx("div",{className:"grid grid-cols-1 gap-4",children:f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Image URL (Chart)"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.image,onChange:R=>g({...m,image:R.target.value}),placeholder:"https://..."})]})}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:R=>g({...m,title:R.target.value}),placeholder:"e.g. Double Top formation on 4H"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analysis Content"}),f.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:f.jsx(Rl,{theme:"snow",value:m.content,onChange:R=>g({...m,content:R}),modules:FP,formats:GP,className:"h-96 mb-12"})})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsx(Ct,{type:"submit",variant:"primary",children:c?"Update Analysis":"Post Analysis"})})]})]}),f.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-800",children:[f.jsx("thead",{className:"bg-gray-900/50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Pair"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Direction"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Title"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-800",children:t?f.jsx("tr",{children:f.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-400",children:"Loading data..."})}):n.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-400",children:"No analysis posted yet."})}):n.map(R=>f.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R.timestamp?.seconds?new Date(R.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-bold",children:R.pair}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${R.direction==="Bullish"?"bg-green-500/20 text-green-400":R.direction==="Bearish"?"bg-red-500/20 text-red-400":"bg-gray-700 text-gray-300"}`,children:R.direction})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white max-w-xs truncate",children:R.title}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[f.jsx("button",{onClick:()=>D(R),className:"text-primary hover:text-primary/80 transition-colors mr-4",children:"Edit"}),f.jsx("button",{onClick:()=>A(R.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Delete"})]})]},R.id))})]})})})]})},BN={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},zN=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],KP=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!1),[a,l]=P.useState({name:"",description:"",image:""}),[c,d]=P.useState(null),[m,g]=P.useState(!0);P.useEffect(()=>{v()},[]);const v=async()=>{g(!0);try{const A=await Rn(gt(Se,"paths"));e(A.docs.map(C=>({id:C.id,...C.data()})))}catch(A){console.error("Error fetching paths:",A)}finally{g(!1)}},E=async A=>{A.preventDefault();try{c?await Os(Ye(Se,"paths",c),a):await El(gt(Se,"paths"),{...a,createdAt:fl()}),r(!1),d(null),l({name:"",description:"",image:""}),v()}catch(C){console.error("Error saving path:",C),alert("Failed to save path")}},x=async A=>{if(window.confirm("Delete this path?"))try{await Ih(Ye(Se,"paths",A)),v()}catch(C){console.error("Error deleting path:",C)}};return f.jsxs("div",{className:"animate-fade-in",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-white",children:"Academy Paths"}),f.jsx(Ct,{onClick:()=>{r(!t),t&&(d(null),l({name:"",description:"",image:""}))},children:t?"Cancel":"New Path"})]}),t&&f.jsx("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8",children:f.jsxs("form",{onSubmit:E,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Path Name"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.name,onChange:A=>l({...a,name:A.target.value}),placeholder:"e.g. Technical Analysis"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),f.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-24",value:a.description,onChange:A=>l({...a,description:A.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Cover Image URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.image,onChange:A=>l({...a,image:A.target.value})})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx(Ct,{type:"submit",variant:"primary",children:c?"Update Path":"Create Path"})})]})}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(A=>f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden group",children:[f.jsxs("div",{className:"h-40 bg-gray-900 relative",children:[A.image&&f.jsx("img",{src:A.image,alt:A.name,className:"w-full h-full object-cover"}),f.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>{l(A),d(A.id),r(!0)},className:"bg-primary/80 p-1 rounded text-white hover:bg-primary",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),f.jsx("button",{onClick:()=>x(A.id),className:"bg-red-500/80 p-1 rounded text-white hover:bg-red-600",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("h3",{className:"font-bold text-white text-lg",children:A.name}),f.jsx("p",{className:"text-gray-400 text-sm mt-1 line-clamp-2",children:A.description})]})]},A.id))})]})},QP=()=>{const[n,e]=P.useState("paths"),[t,r]=P.useState([]),[a,l]=P.useState([]),[c,d]=P.useState(null),[m,g]=P.useState(!0),[v,E]=P.useState(!1),[x,A]=P.useState(null),[C,D]=P.useState({title:"",path:"",description:"",image:"",level:"Beginner",instructorName:"Forex Volcano",instructorBio:"",instructorImage:""});P.useEffect(()=>{R()},[]);const R=async()=>{g(!0);try{const ie=(await Rn(gt(Se,"paths"))).docs.map(k=>k.data().name);l(ie);const ve=ls(gt(Se,"courses"),ii("order","asc")),L=await Rn(ve);r(L.docs.map(k=>({id:k.id,...k.data()})))}catch(Q){console.error("Error fetching data:",Q)}finally{g(!1)}},U=async Q=>{Q.preventDefault();try{x?await Os(Ye(Se,"courses",x),C):await El(gt(Se,"courses"),{...C,order:t.length+1,createdAt:fl()}),E(!1),A(null),D({title:"",path:"",description:"",image:"",level:"Beginner",instructorName:"Forex Volcano",instructorBio:"",instructorImage:""}),R()}catch(ie){console.error("Error saving course:",ie),alert("Failed to save course")}},F=Q=>{D({title:Q.title,description:Q.description,path:Q.path||"",image:Q.image,level:Q.level||"Beginner",instructorName:Q.instructorName||"Forex Volcano",instructorBio:Q.instructorBio||"",instructorImage:Q.instructorImage||""}),A(Q.id),E(!0)},Y=async Q=>{if(window.confirm("Delete this course? All lessons inside it might become orphaned."))try{await Ih(Ye(Se,"courses",Q)),R(),c?.id===Q&&d(null)}catch(ie){console.error("Error deleting course:",ie)}};return c?f.jsx(YP,{course:c,onBack:()=>d(null)}):f.jsxs("div",{children:[f.jsxs("div",{className:"flex space-x-6 mb-8 border-b border-gray-800",children:[f.jsx("button",{onClick:()=>e("paths"),className:`pb-4 px-2 font-medium transition-colors ${n==="paths"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"1. Manage Paths"}),f.jsx("button",{onClick:()=>e("courses"),className:`pb-4 px-2 font-medium transition-colors ${n==="courses"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"2. Manage Courses"})]}),n==="paths"?f.jsx(KP,{}):f.jsxs("div",{className:"animate-fade-in",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage Courses"}),f.jsx(Ct,{onClick:()=>{E(!v),v&&A(null)},children:v?"Cancel":"New Course"})]}),v&&f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:x?"Edit Course":"Create New Course"}),f.jsxs("form",{onSubmit:U,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Course Title"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.title,onChange:Q=>D({...C,title:Q.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Path / Category"}),f.jsxs("select",{required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.path,onChange:Q=>D({...C,path:Q.target.value}),children:[f.jsx("option",{value:"",children:"Select Path..."}),a.map(Q=>f.jsx("option",{value:Q,children:Q},Q))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Level"}),f.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.level,onChange:Q=>D({...C,level:Q.target.value}),children:[f.jsx("option",{children:"Beginner"}),f.jsx("option",{children:"Intermediate"}),f.jsx("option",{children:"Advanced"})]})]})]}),f.jsxs("div",{className:"border-t border-gray-800 pt-4 mt-4",children:[f.jsx("h3",{className:"text-sm font-bold text-primary mb-3",children:"Instructor Details"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Name"}),f.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.instructorName,onChange:Q=>D({...C,instructorName:Q.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Image URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.instructorImage,onChange:Q=>D({...C,instructorImage:Q.target.value})})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Bio"}),f.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-20",value:C.instructorBio,onChange:Q=>D({...C,instructorBio:Q.target.value})})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),f.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:f.jsx(Rl,{theme:"snow",value:C.description,onChange:Q=>D({...C,description:Q}),modules:BN,formats:zN,className:"h-48 mb-12"})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Cover Image URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:C.image,onChange:Q=>D({...C,image:Q.target.value})})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx(Ct,{type:"submit",variant:"primary",children:x?"Update Course":"Create Course"})})]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m?f.jsx("div",{className:"text-gray-400",children:"Loading courses..."}):t.map(Q=>f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden group hover:border-gray-600 transition-all",children:[f.jsxs("div",{className:"h-40 bg-gray-900 relative",children:[Q.image&&f.jsx("img",{src:Q.image,alt:Q.title,className:"w-full h-full object-cover"}),f.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[f.jsx("button",{onClick:ie=>{ie.stopPropagation(),F(Q)},className:"bg-primary/80 p-1 rounded text-white hover:bg-primary",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),f.jsx("button",{onClick:ie=>{ie.stopPropagation(),Y(Q.id)},className:"bg-red-500/80 p-1 rounded text-white hover:bg-red-600",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),f.jsxs("div",{className:"p-5",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:Q.title}),Q.path&&f.jsx("span",{className:"bg-gray-800 text-xs text-gray-300 px-2 py-1 rounded",children:Q.path})]}),f.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:Q.description}),f.jsx(Ct,{variant:"outline",size:"sm",className:"w-full",onClick:()=>d(Q),children:"Manage Lessons"})]})]},Q.id))})]})]})},YP=({course:n,onBack:e})=>{const[t,r]=P.useState([]),[a,l]=P.useState(!1),[c,d]=P.useState(null),[m,g]=P.useState({title:"",videoUrl:"",content:"",duration:"10 min"}),[v,E]=P.useState(!0);P.useEffect(()=>{x()},[n]);const x=async()=>{E(!0);try{const R=ls(gt(Se,"courses",n.id,"lessons"),ii("order","asc")),U=await Rn(R);r(U.docs.map(F=>({id:F.id,...F.data()})))}catch(R){console.error("Error fetching lessons:",R);const U=await Rn(gt(Se,"courses",n.id,"lessons"));r(U.docs.map(F=>({id:F.id,...F.data()})))}finally{E(!1)}},A=async R=>{R.preventDefault();try{c?await Os(Ye(Se,"courses",n.id,"lessons",c),{...m}):await El(gt(Se,"courses",n.id,"lessons"),{...m,order:t.length+1,createdAt:fl()}),l(!1),d(null),g({title:"",videoUrl:"",content:"",duration:"10 min"}),x()}catch(U){console.error("Error saving lesson:",U),alert("Failed to save lesson")}},C=R=>{g({title:R.title,videoUrl:R.videoUrl,content:R.content,duration:R.duration}),d(R.id),l(!0)},D=async R=>{if(window.confirm("Delete this lesson?"))try{await Ih(Ye(Se,"courses",n.id,"lessons",R)),x()}catch(U){console.error("Error deleting lesson:",U)}};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[f.jsxs("button",{onClick:e,className:"text-gray-400 hover:text-white flex items-center gap-1",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),f.jsxs("h1",{className:"text-2xl font-bold text-white",children:[f.jsx("span",{className:"text-gray-500 font-normal",children:"Edit Course:"})," ",n.title]})]}),f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsxs("h2",{className:"text-xl font-bold text-white",children:["Lessons (",t.length,")"]}),f.jsx(Ct,{onClick:()=>{l(!a),a&&(d(null),g({title:"",videoUrl:"",content:"",duration:"10 min"}))},variant:"secondary",children:a?"Cancel":"Add Lesson"})]}),a&&f.jsx("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:f.jsxs("form",{onSubmit:A,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Lesson Title"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:R=>g({...m,title:R.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Duration"}),f.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.duration,onChange:R=>g({...m,duration:R.target.value}),placeholder:"e.g. 15 min"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Video Embed URL (YouTube/Vimeo)"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.videoUrl,onChange:R=>g({...m,videoUrl:R.target.value}),placeholder:"https://www.youtube.com/embed/..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Lesson Content / Notes"}),f.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:f.jsx(Rl,{theme:"snow",value:m.content,onChange:R=>g({...m,content:R}),modules:BN,formats:zN,className:"h-72 mb-12"})})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx(Ct,{type:"submit",variant:"primary",children:c?"Update Lesson":"Save Lesson"})})]})}),f.jsxs("div",{className:"space-y-3",children:[v?f.jsx("div",{className:"text-gray-400",children:"Loading lessons..."}):t.map((R,U)=>f.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-gray-800 flex justify-between items-center group hover:border-gray-600",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-800 text-gray-400 font-bold text-sm",children:U+1}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium text-white",children:R.title}),f.jsx("div",{className:"text-xs text-gray-500",children:R.duration})]})]}),f.jsxs("div",{className:"flex items-center gap-3 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>C(R),className:"text-primary hover:text-primary/80 text-sm",children:"Edit"}),f.jsx("button",{onClick:()=>D(R.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Delete"})]})]},R.id)),t.length===0&&!v&&f.jsx("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:"No lessons yet. Start teaching!"})]})]})},XP=()=>{const[n,e]=P.useState(!0),[t,r]=P.useState(!1),[a,l]=P.useState(null),[c,d]=P.useState({analystName:"",analystImage:"",analystBio:"",twitter:"",linkedin:"",telegram:""});P.useEffect(()=>{const g=Eh(Be,async v=>{if(v){l(v);try{const E=Ye(Se,"users",v.uid),x=await hr(E);if(x.exists()){const A=x.data();d(C=>({...C,analystName:A.analystName||"",analystImage:A.analystImage||"",analystBio:A.analystBio||"",twitter:A.twitter||"",linkedin:A.linkedin||"",telegram:A.telegram||""}))}}catch(E){console.error("Error fetching profile:",E)}}e(!1)});return()=>g()},[]);const m=async g=>{if(g.preventDefault(),!!a){r(!0);try{await jc(Ye(Se,"users",a.uid),c,{merge:!0}),alert("Profile updated successfully!")}catch(v){console.error("Error saving profile:",v),alert("Failed to save profile.")}finally{r(!1)}}};return n?f.jsx("div",{className:"text-white",children:"Loading Profile..."}):f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"Analyst Profile Settings"}),f.jsx("div",{className:"bg-surface p-8 rounded-xl border border-gray-800",children:f.jsxs("form",{onSubmit:m,className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx("div",{className:"md:col-span-2",children:f.jsx("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-800 pb-2",children:"Personal Details"})}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analyst Name"}),f.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.analystName,onChange:g=>d({...c,analystName:g.target.value}),placeholder:"e.g. John Doe"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Profile Image URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.analystImage,onChange:g=>d({...c,analystImage:g.target.value}),placeholder:"https://..."})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bio"}),f.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-32 resize-none",value:c.analystBio,onChange:g=>d({...c,analystBio:g.target.value}),placeholder:"Tell us about yourself..."})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pt-6",children:[f.jsx("div",{className:"md:col-span-3",children:f.jsx("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-800 pb-2",children:"Social Connections"})}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Twitter (X) URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.twitter,onChange:g=>d({...c,twitter:g.target.value}),placeholder:"https://twitter.com/..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"LinkedIn URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.linkedin,onChange:g=>d({...c,linkedin:g.target.value}),placeholder:"https://linkedin.com/in/..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Telegram URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.telegram,onChange:g=>d({...c,telegram:g.target.value}),placeholder:"https://t.me/..."})]})]}),f.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-800",children:f.jsx(Ct,{type:"submit",variant:"primary",contentClassName:"px-8",children:t?"Saving...":"Save Profile"})})]})})]})},WP=()=>{const{courseId:n}=Mc(),e=ki(),[t,r]=P.useState(null),[a,l]=P.useState([]),[c,d]=P.useState(null),[m,g]=P.useState(!0),[v,E]=P.useState(!0);return P.useEffect(()=>{(async()=>{try{g(!0);const A=await hr(Ye(Se,"courses",n));if(!A.exists()){alert("Course not found"),e("/dashboard");return}r({id:A.id,...A.data()});const C=ls(gt(Se,"courses",n,"lessons"),ii("order","asc")),D=await Rn(C);let R=[];D.empty?R=(await Rn(gt(Se,"courses",n,"lessons"))).docs.map(F=>({id:F.id,...F.data()})):R=D.docs.map(U=>({id:U.id,...U.data()})),l(R),R.length>0&&d(R[0])}catch(A){console.error("Error loading course:",A)}finally{g(!1)}})()},[n,e]),m?f.jsx("div",{className:"p-10 text-center text-white",children:"Loading class..."}):t?f.jsxs("div",{className:"flex h-screen bg-background overflow-hidden animate-fade-in",children:[f.jsxs("div",{className:`${v?"w-80":"w-0"} bg-surface border-r border-gray-800 transition-all duration-300 flex flex-col flex-shrink-0 relative`,children:[f.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center",children:[f.jsx("h2",{className:"font-bold text-white truncate max-w-[200px]",children:t.title}),f.jsx("button",{onClick:()=>E(!1),className:"md:hidden text-gray-400",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a.map((x,A)=>f.jsxs("div",{onClick:()=>d(x),className:`p-4 border-b border-gray-800 cursor-pointer transition-colors hover:bg-gray-800/50 flex items-start gap-3
                   ${c?.id===x.id?"bg-primary/10 border-l-4 border-l-primary":"border-l-4 border-l-transparent"}
                 `,children:[f.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-800 text-gray-400 text-xs flex items-center justify-center mt-0.5",children:A+1}),f.jsxs("div",{children:[f.jsx("h4",{className:`text-sm font-medium ${c?.id===x.id?"text-primary":"text-gray-300"}`,children:x.title}),f.jsx("span",{className:"text-xs text-gray-500",children:x.duration||"10 min"})]})]},x.id)),a.length===0&&f.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No lessons available yet."})]}),f.jsx("div",{className:"p-4 border-t border-gray-800",children:f.jsx(rt,{to:"/dashboard",children:f.jsx(Ct,{variant:"outline",size:"sm",className:"w-full",children:"Back to Dashboard"})})})]}),f.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[f.jsx("div",{className:"absolute top-4 left-4 z-10",children:f.jsx("button",{onClick:()=>E(!v),className:"bg-surface/80 p-2 rounded-full text-white hover:bg-surface backdrop-blur border border-gray-700 shadow-lg",children:v?f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),c?f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[f.jsx("div",{className:"bg-black aspect-video w-full max-h-[70vh] flex items-center justify-center",children:c.videoUrl?f.jsx("iframe",{src:c.videoUrl,title:c.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):f.jsxs("div",{className:"text-gray-500 text-center",children:[f.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),f.jsx("p",{children:"No video content for this lesson."})]})}),f.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[f.jsx("div",{className:"flex justify-between items-start mb-6",children:f.jsx("h1",{className:"text-2xl font-bold text-white",children:c.title})}),f.jsx("div",{className:"prose prose-invert max-w-none",children:f.jsx("p",{className:"text-gray-300 whitespace-pre-line",children:c.content})})]})]}):f.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"Select a lesson from the sidebar to start."})]})]}):null},ZP=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0);return P.useEffect(()=>{(async()=>{try{const c=(await Rn(gt(Se,"courses"))).docs.map(m=>m.data()),d={};c.forEach(m=>{const g=m.path||"General";d[g]||(d[g]={name:g,count:0,image:m.image}),d[g].count+=1}),e(Object.values(d))}catch(l){console.error("Error fetching paths:",l)}finally{r(!1)}})()},[]),t?f.jsx("div",{className:"p-10 text-center text-white",children:"Loading Academy..."}):f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 animate-fade-in",children:[f.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"My Academy"}),f.jsx("p",{className:"text-gray-400 mb-10",children:"Choose a learning path to start your journey."}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(a=>f.jsx(rt,{to:`/academy/${encodeURIComponent(a.name)}`,className:"group",children:f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden hover:border-primary transition-all h-full flex flex-col",children:[f.jsxs("div",{className:"h-48 bg-gray-900 relative overflow-hidden",children:[a.image?f.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:f.jsx("svg",{className:"w-12 h-12 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent opacity-80"}),f.jsx("div",{className:"absolute bottom-4 left-4",children:f.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-primary transition-colors",children:a.name})})]}),f.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-between",children:[f.jsxs("p",{className:"text-gray-400",children:[a.count," Course",a.count!==1&&"s"," available"]}),f.jsxs("span",{className:"text-primary mt-4 inline-flex items-center text-sm font-medium",children:["Explore Path ",f.jsx("svg",{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]})]})},a.name))}),n.length===0&&f.jsx("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:f.jsx("p",{className:"text-gray-500",children:"No academy paths available yet."})})]})},JP=()=>{const{path:n}=Mc(),e=decodeURIComponent(n),[t,r]=P.useState([]),[a,l]=P.useState(!0);return P.useEffect(()=>{(async()=>{try{const d=ls(gt(Se,"courses"),ii("order","asc")),v=(await Rn(d)).docs.map(E=>({id:E.id,...E.data()})).filter(E=>(E.path||"General")===e);r(v)}catch(d){console.error("Error loading courses:",d)}finally{l(!1)}})()},[e]),a?f.jsx("div",{className:"p-10 text-center text-white",children:"Loading Path..."}):f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 animate-fade-in",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx(rt,{to:"/academy",className:"text-gray-500 hover:text-white mb-4 inline-block",children:" Back to Academy"}),f.jsxs("h1",{className:"text-3xl font-bold text-white",children:[f.jsx("span",{className:"text-primary",children:e})," Courses"]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(c=>f.jsx(rt,{to:`/academy/${encodeURIComponent(e)}/${c.id}`,className:"group",children:f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden hover:border-gray-600 transition-all h-full",children:[f.jsxs("div",{className:"h-48 bg-gray-900 relative",children:[c.image&&f.jsx("img",{src:c.image,alt:c.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute top-2 right-2 bg-black/60 backdrop-blur px-2 py-1 rounded text-xs text-white border border-gray-700",children:c.level})]}),f.jsxs("div",{className:"p-5",children:[f.jsx("h3",{className:"text-lg font-bold text-white mb-2 group-hover:text-primary transition-colors",children:c.title}),f.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:c.description}),f.jsx("span",{className:"text-sm font-medium text-white group-hover:underline",children:"Start Learning "})]})]})},c.id))}),t.length===0&&f.jsx("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:f.jsx("p",{className:"text-gray-500",children:"No courses found in this path."})})]})},eU=()=>{const{path:n,courseId:e}=Mc(),t=ki(),[r,a]=P.useState(null),[l,c]=P.useState([]),[d,m]=P.useState(null),[g,v]=P.useState(!0),[E,x]=P.useState(!0),[A,C]=P.useState([]);return P.useEffect(()=>{(async()=>{if(Be.currentUser&&e){const R=Ye(db,"users",Be.currentUser.uid,"course_progress",e),U=await hr(R);U.exists()&&C(U.data().completedLessonIds||[])}})()},[e]),P.useEffect(()=>{(async()=>{try{v(!0);const R=await hr(Ye(db,"courses",e));if(!R.exists()){alert("Course not found"),t(`/academy/${n}`);return}a({id:R.id,...R.data()});const U=ls(gt(db,"courses",e,"lessons"),ii("order","asc")),F=await Rn(U);let Y=[];F.empty?Y=(await Rn(gt(db,"courses",e,"lessons"))).docs.map(ie=>({id:ie.id,...ie.data()})):Y=F.docs.map(Q=>({id:Q.id,...Q.data()})),c(Y),Y.length>0&&m(Y[0])}catch(R){console.error("Error loading course:",R)}finally{v(!1)}})()},[e,t,n]),g?f.jsx("div",{className:"p-10 text-center text-white",children:"Loading class..."}):r?f.jsxs("div",{className:"flex bg-background overflow-hidden animate-fade-in",style:{height:"calc(100vh - 64px)"},children:[f.jsxs("div",{className:`${E?"w-80":"w-0"} bg-surface border-r border-gray-800 transition-all duration-300 flex flex-col flex-shrink-0 relative`,children:[f.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50",children:[f.jsx("h2",{className:"font-bold text-white truncate max-w-[200px]",children:r.title}),f.jsx("button",{onClick:()=>x(!1),className:"md:hidden text-gray-400",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[l.map((D,R)=>f.jsxs("div",{onClick:()=>m(D),className:`p-4 border-b border-gray-800 cursor-pointer transition-colors hover:bg-gray-800/50 flex items-start gap-3
                   ${d?.id===D.id?"bg-primary/10 border-l-4 border-l-primary":"border-l-4 border-l-transparent"}
                 `,children:[f.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-800 text-gray-400 text-xs flex items-center justify-center mt-0.5",children:R+1}),f.jsxs("div",{children:[f.jsx("h4",{className:`text-sm font-medium ${d?.id===D.id?"text-primary":"text-gray-300"}`,children:D.title}),f.jsx("span",{className:"text-xs text-gray-500",children:D.duration||"10 min"})]})]},D.id)),l.length===0&&f.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No lessons available yet."})]}),f.jsx("div",{className:"p-4 border-t border-gray-800",children:f.jsx(rt,{to:`/academy/${n}`,children:f.jsx(Button,{variant:"outline",size:"sm",className:"w-full",children:" Back to Path"})})})]}),f.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[f.jsx("div",{className:"absolute top-4 left-4 z-10",children:f.jsx("button",{onClick:()=>x(!E),className:"bg-surface/80 p-2 rounded-full text-white hover:bg-surface backdrop-blur border border-gray-700 shadow-lg",children:E?f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),d?f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[f.jsx("div",{className:"bg-black aspect-video w-full max-h-[60vh] flex items-center justify-center",children:d.videoUrl?f.jsx("iframe",{src:d.videoUrl,title:d.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):f.jsxs("div",{className:"text-gray-500 text-center",children:[f.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),f.jsx("p",{children:"No video content."})]})}),f.jsxs("div",{className:"max-w-4xl mx-auto p-8 pb-20",children:[f.jsx("div",{className:"flex justify-between items-start mb-6",children:f.jsx("h1",{className:"text-2xl font-bold text-white",children:d.title})}),f.jsx("div",{className:"prose prose-invert max-w-none",children:f.jsx("div",{dangerouslySetInnerHTML:{__html:d.content}})}),(r.instructorName||r.instructorBio)&&f.jsxs("div",{className:"mt-12 border-t border-gray-800 pt-8",children:[f.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Meet Your Instructor"}),f.jsxs("div",{className:"flex items-start gap-6 bg-surface p-6 rounded-xl border border-gray-800",children:[r.instructorImage?f.jsx("img",{src:r.instructorImage,alt:r.instructorName,className:"w-20 h-20 rounded-full object-cover border-2 border-primary"}):f.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-700 flex items-center justify-center text-2xl font-bold text-gray-400",children:r.instructorName?r.instructorName.charAt(0):"I"}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-lg font-bold text-white",children:r.instructorName}),f.jsx("p",{className:"text-gray-400 text-sm whitespace-pre-wrap mt-2",children:r.instructorBio})]})]})]})]})]}):f.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:f.jsx("p",{children:"Select a lesson from the list to start learning."})})]})]}):null},tU=({onPostCreated:n})=>{const[e,t]=P.useState(""),[r,a]=P.useState("public"),[l,c]=P.useState(null),[d,m]=P.useState(!1),g=x=>new Promise((A,C)=>{const D=new FileReader;D.readAsDataURL(x),D.onload=R=>{const U=new Image;U.src=R.target.result,U.onload=()=>{const F=document.createElement("canvas"),Y=800,Q=800;let ie=U.width,ve=U.height;ie>ve?ie>Y&&(ve*=Y/ie,ie=Y):ve>Q&&(ie*=Q/ve,ve=Q),F.width=ie,F.height=ve,F.getContext("2d").drawImage(U,0,0,ie,ve);const k=F.toDataURL("image/jpeg",.7);A(k)},U.onerror=F=>C(F)},D.onerror=R=>C(R)}),v=async x=>{const A=x.target.files[0];if(A)try{const C=await g(A);c(C)}catch(C){console.error("Compression error:",C),alert("Failed to process image.")}},E=async x=>{if(x.preventDefault(),!(!e.trim()&&!l)){m(!0);try{const A={uid:Be.currentUser.uid,content:e.trim(),image:l,privacy:r,likes:[],commentsCount:0,shares:0,createdAt:fl()};await El(gt(Se,"posts"),A),t(""),c(null),n&&n()}catch(A){console.error("Error creating post:",A),alert("Failed to post. Please try again.")}finally{m(!1)}}};return f.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 p-4 mb-6 animate-fade-in",children:f.jsxs("div",{className:"flex gap-4",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 flex-shrink-0 overflow-hidden",children:Be.currentUser?.photoURL?f.jsx("img",{src:Be.currentUser.photoURL,alt:"User",className:"h-full w-full object-cover"}):f.jsx("div",{className:"h-full w-full flex items-center justify-center text-xs text-gray-400",children:"You"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("textarea",{value:e,onChange:x=>t(x.target.value),placeholder:"What's on your mind, trader?",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg p-3 text-white focus:outline-none focus:border-primary min-h-[100px] resize-none"}),l&&f.jsxs("div",{className:"mt-2 relative inline-block",children:[f.jsx("img",{src:l,alt:"Preview",className:"h-32 rounded-lg border border-gray-700"}),f.jsx("button",{onClick:()=>c(null),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex justify-between items-center mt-3",children:[f.jsxs("div",{className:"flex gap-2 text-primary",children:[f.jsxs("label",{className:"cursor-pointer hover:bg-gray-800 p-2 rounded-full transition-colors flex items-center gap-2",children:[f.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:v}),f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),f.jsx("span",{className:"text-sm",children:"Photo"})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("select",{value:r,onChange:x=>a(x.target.value),className:"bg-gray-800 text-gray-300 text-sm border border-gray-700 rounded-md py-1 px-2 focus:outline-none",children:[f.jsx("option",{value:"public",children:"Public"}),f.jsx("option",{value:"friends",children:"Friends Only"}),f.jsx("option",{value:"private",children:"Private"})]})})]}),f.jsx(Ct,{onClick:E,disabled:d||!e.trim()&&!l,children:d?"Posting...":"Post"})]})]})]})})},nU=({post:n})=>{const[e,t]=P.useState(null),[r,a]=P.useState(n.likes?.includes(Be.currentUser?.uid)),[l,c]=P.useState(n.likes?.length||0),[d,m]=P.useState(!1),[g,v]=P.useState([]),[E,x]=P.useState(""),[A,C]=P.useState(!1);P.useEffect(()=>{(async()=>{if(n.uid){const ie=await hr(Ye(Se,"users",n.uid));ie.exists()&&t(ie.data())}})()},[n.uid]),P.useEffect(()=>{if(d){const Q=ls(gt(Se,"posts",n.id,"comments"),ii("createdAt","asc")),ie=Uy(Q,ve=>{v(ve.docs.map(L=>({id:L.id,...L.data()})))});return()=>ie()}},[d,n.id]);const D=async()=>{if(!Be.currentUser)return;const Q=r;a(!Q),c(ve=>Q?ve-1:ve+1);const ie=Ye(Se,"posts",n.id);Q?await Os(ie,{likes:zu(Be.currentUser.uid)}):await Os(ie,{likes:Vy(Be.currentUser.uid)})},R=async Q=>{if(Q.preventDefault(),!!E.trim()){C(!0);try{await El(gt(Se,"posts",n.id,"comments"),{uid:Be.currentUser.uid,username:Be.currentUser.displayName||"User",content:E.trim(),createdAt:new Date}),await Os(Ye(Se,"posts",n.id),{commentsCount:(n.commentsCount||0)+1}),x("")}catch(ie){console.error("Error commenting:",ie)}finally{C(!1)}}},U=Q=>{if(!Q)return"Just now";const ie=Q.toDate?Q.toDate():new Date(Q),ve=Math.floor((new Date-ie)/1e3);let L=ve/31536e3;return L>1?Math.floor(L)+"y":(L=ve/2592e3,L>1?Math.floor(L)+"mo":(L=ve/86400,L>1?Math.floor(L)+"d":(L=ve/3600,L>1?Math.floor(L)+"h":(L=ve/60,L>1?Math.floor(L)+"m":Math.floor(ve)+"s"))))},F=e?.username||"Unknown User",Y=e?.avatar_url||`https://ui-avatars.com/api/?name=${F}`;return f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 mb-6 overflow-hidden animate-fade-in",children:[f.jsxs("div",{className:"p-4 flex items-center gap-3",children:[f.jsx(rt,{to:`/profile/${F}`,className:"block h-10 w-10 rounded-full overflow-hidden bg-gray-700",children:f.jsx("img",{src:Y,alt:F,className:"h-full w-full object-cover"})}),f.jsxs("div",{children:[f.jsx(rt,{to:`/profile/${F}`,className:"text-white font-bold hover:underline text-sm block",children:F}),f.jsxs("span",{className:"text-xs text-gray-500",children:[U(n.createdAt),"  ",n.privacy==="public"?"Public":n.privacy==="friends"?"Friends":"Private"]})]})]}),f.jsx("div",{className:"px-4 pb-2",children:f.jsx("p",{className:"text-gray-200 whitespace-pre-wrap",children:n.content})}),n.image&&f.jsx("div",{className:"w-full h-auto mt-2",children:f.jsx("img",{src:n.image,alt:"Post content",className:"w-full h-auto max-h-[500px] object-cover"})}),f.jsx("div",{className:"px-4 py-3 border-t border-gray-800 flex justify-between items-center mt-2",children:f.jsxs("div",{className:"flex gap-6",children:[f.jsxs("button",{onClick:D,className:`flex items-center gap-2 text-sm transition-colors ${r?"text-red-500":"text-gray-400 hover:text-red-500"}`,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${r?"fill-current":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),l>0&&f.jsx("span",{children:l})]}),f.jsxs("button",{onClick:()=>m(!d),className:"flex items-center gap-2 text-sm text-gray-400 hover:text-primary transition-colors",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),f.jsx("span",{children:g.length||n.commentsCount||0})]}),f.jsx("button",{className:"flex items-center gap-2 text-sm text-gray-400 hover:text-green-500 transition-colors",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})}),d&&f.jsxs("div",{className:"bg-gray-900/30 p-4 border-t border-gray-800",children:[f.jsx("div",{className:"space-y-3 mb-4 max-h-60 overflow-y-auto",children:g.map(Q=>f.jsxs("div",{className:"flex gap-2 items-start",children:[f.jsx("div",{className:"h-6 w-6 rounded-full bg-gray-700 flex-shrink-0"}),f.jsxs("div",{className:"bg-gray-800 rounded-lg p-2 text-sm flex-1",children:[f.jsx("span",{className:"font-bold text-white mr-2",children:"Unknown"})," ",f.jsx("span",{className:"text-gray-300",children:Q.content})]})]},Q.id))}),f.jsxs("form",{onSubmit:R,className:"flex gap-2",children:[f.jsx("input",{type:"text",value:E,onChange:Q=>x(Q.target.value),placeholder:"Write a comment...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-primary"}),f.jsx("button",{type:"submit",disabled:A||!E.trim(),className:"text-primary font-medium text-sm disabled:opacity-50",children:"Post"})]})]})]})},rU=()=>{const[n,e]=P.useState("feed"),[t,r]=P.useState([]),[a,l]=P.useState(!0),[c,d]=P.useState([]),[m,g]=P.useState({sent:[],received:[]});P.useEffect(()=>{if(!Be.currentUser)return;const x=Uy(Ye(Se,"users",Be.currentUser.uid),A=>{if(A.exists()){const C=A.data();d(C.friends||[]),g(C.friendRequests||{sent:[],received:[]})}});return()=>x()},[]),P.useEffect(()=>{const x=ls(gt(Se,"posts"),ii("createdAt","desc")),A=Uy(x,C=>{const R=C.docs.map(U=>({id:U.id,...U.data()})).filter(U=>U.uid===Be.currentUser?.uid||U.privacy==="public"?!0:U.privacy==="friends"?c.includes(U.uid):!1);r(R),l(!1)});return()=>A()},[c]);const v=async x=>{try{const A=Ye(Se,"users",Be.currentUser.uid),C=Ye(Se,"users",x);await Os(A,{friends:Vy(x),"friendRequests.received":zu(x)}),await Os(C,{friends:Vy(Be.currentUser.uid),"friendRequests.sent":zu(Be.currentUser.uid)}),alert("Friend request accepted!")}catch(A){console.error("Error accepting friend:",A)}},E=async x=>{try{const A=Ye(Se,"users",Be.currentUser.uid),C=Ye(Se,"users",x);await Os(A,{"friendRequests.received":zu(x)}),await Os(C,{"friendRequests.sent":zu(Be.currentUser.uid)})}catch(A){console.error("Error rejecting friend:",A)}};return f.jsx("div",{className:"min-h-screen bg-background pt-20 pb-10",children:f.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:"Traders Community"}),f.jsxs("div",{className:"flex space-x-1 bg-surface p-1 rounded-lg border border-gray-800",children:[f.jsx("button",{onClick:()=>e("feed"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="feed"?"bg-primary text-white":"text-gray-400 hover:text-white"}`,children:"Feed"}),f.jsxs("button",{onClick:()=>e("friends"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="friends"?"bg-primary text-white":"text-gray-400 hover:text-white"}`,children:["Friends ",f.jsx("span",{className:"ml-1 bg-gray-800 text-xs px-2 py-0.5 rounded-full",children:c.length})]}),f.jsxs("button",{onClick:()=>e("requests"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="requests"?"bg-primary text-white":"text-gray-400 hover:text-white"}`,children:["Requests ",f.jsx("span",{className:"ml-1 bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:m.received?.length||0})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[f.jsx("div",{className:"hidden md:block col-span-1",children:f.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 p-6 sticky top-24",children:f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx(rt,{to:`/profile/${Be.currentUser?.displayName}`,className:"h-20 w-20 rounded-full bg-gray-700 overflow-hidden mb-4",children:f.jsx("img",{src:Be.currentUser?.photoURL||"https://ui-avatars.com/api/?name=User",alt:"Me",className:"w-full h-full object-cover"})}),f.jsx("h3",{className:"text-lg font-bold text-white",children:Be.currentUser?.displayName||"Trader"}),f.jsx("p",{className:"text-sm text-gray-400",children:"Community Member"}),f.jsx("div",{className:"w-full border-t border-gray-800 my-4"}),f.jsxs("div",{className:"w-full flex justify-between text-sm mb-2",children:[f.jsx("span",{className:"text-gray-400",children:"Posts"}),f.jsx("span",{className:"text-white font-bold",children:t.filter(x=>x.uid===Be.currentUser?.uid).length})]}),f.jsxs("div",{className:"w-full flex justify-between text-sm",children:[f.jsx("span",{className:"text-gray-400",children:"Friends"}),f.jsx("span",{className:"text-white font-bold",children:c.length})]})]})})}),f.jsxs("div",{className:"col-span-1 md:col-span-2",children:[n==="feed"&&f.jsxs(f.Fragment,{children:[f.jsx(tU,{}),a?f.jsx("div",{className:"text-center py-10 text-gray-400",children:"Loading community feed..."}):t.length>0?t.map(x=>f.jsx(nU,{post:x},x.id)):f.jsx("div",{className:"text-center py-10 bg-surface rounded-xl border border-gray-800",children:f.jsx("p",{className:"text-gray-400",children:"No posts yet. Be the first to share something!"})})]}),n==="friends"&&f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[f.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Your Friends"}),c.length>0?f.jsx("div",{className:"grid grid-cols-1 gap-4",children:c.map(x=>f.jsx(sU,{userId:x},x))}):f.jsx("p",{className:"text-gray-400",children:"No friends yet. Search for users to add them!"})]}),n==="requests"&&f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[f.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Friend Requests"}),m.received?.length>0?f.jsx("div",{className:"space-y-4",children:m.received.map(x=>f.jsx(iU,{userId:x,onAccept:()=>v(x),onReject:()=>E(x)},x))}):f.jsx("p",{className:"text-gray-400",children:"No pending requests."})]})]})]})]})})},sU=({userId:n})=>{const[e,t]=P.useState(null);return P.useEffect(()=>{hr(Ye(Se,"users",n)).then(r=>{r.exists()&&t(r.data())})},[n]),e?f.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(rt,{to:`/profile/${e.username}`,className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden",children:f.jsx("img",{src:e.avatar_url||`https://ui-avatars.com/api/?name=${e.username}`,alt:e.username,className:"w-full h-full object-cover"})}),f.jsxs("div",{children:[f.jsx(rt,{to:`/profile/${e.username}`,className:"font-bold text-white hover:underline",children:e.username}),f.jsx("p",{className:"text-xs text-gray-500",children:"Trader"})]})]}),f.jsx(rt,{to:`/profile/${e.username}`,className:"text-xs text-primary border border-primary px-3 py-1 rounded-full hover:bg-primary hover:text-white transition-colors",children:"View Profile"})]}):f.jsx("div",{className:"h-16 bg-gray-800 rounded-lg animate-pulse"})},iU=({userId:n,onAccept:e,onReject:t})=>{const[r,a]=P.useState(null);return P.useEffect(()=>{hr(Ye(Se,"users",n)).then(l=>{l.exists()&&a(l.data())})},[n]),r?f.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden",children:f.jsx("img",{src:r.avatar_url||`https://ui-avatars.com/api/?name=${r.username}`,alt:r.username,className:"w-full h-full object-cover"})}),f.jsxs("div",{children:[f.jsx("span",{className:"font-bold text-white",children:r.username}),f.jsx("p",{className:"text-xs text-gray-500",children:"Wants to be your friend"})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:e,className:"bg-primary hover:bg-green-600 text-white px-3 py-1 rounded-md text-xs font-bold",children:"Accept"}),f.jsx("button",{onClick:t,className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md text-xs font-bold",children:"Reject"})]})]}):f.jsx("div",{className:"h-16 bg-gray-800 rounded-lg animate-pulse"})},aU=()=>{const{username:n}=Mc(),[e,t]=P.useState(null),[r,a]=P.useState(!0);return P.useEffect(()=>{n&&(async()=>{try{a(!0);const c=ls(gt(Se,"users"),DS("username","==",n)),d=await Rn(c);if(d.empty)t(null);else{const m=d.docs[0].data();t(m)}}catch(c){console.error("Error fetching profile:",c)}finally{a(!1)}})()},[n]),r?f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsx("p",{className:"text-white text-lg",children:"Loading Profile..."})}):e?f.jsx("div",{className:"min-h-screen bg-background py-20 px-4 sm:px-6 lg:px-8 animate-fade-in",children:f.jsx("div",{className:"max-w-3xl mx-auto",children:f.jsxs("div",{className:"bg-surface rounded-2xl border border-gray-800 p-8 md:p-12 text-center relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 left-0 w-full h-32 bg-gradient-to-r from-primary/10 to-secondary/10"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"w-40 h-40 mx-auto rounded-full p-1 bg-gradient-to-br from-primary to-secondary mb-6",children:f.jsx("img",{src:e.avatar_url||`https://ui-avatars.com/api/?name=${e.username}`,alt:e.username,className:"w-full h-full rounded-full object-cover bg-black border-4 border-black"})}),f.jsx("h1",{className:"text-4xl font-extrabold text-white mb-2",children:e.username}),f.jsx("p",{className:"text-primary font-medium tracking-wide text-sm uppercase mb-8",children:"Volcano Member"}),f.jsx("div",{className:"max-w-xl mx-auto",children:f.jsx("p",{className:"text-gray-300 text-lg leading-relaxed whitespace-pre-wrap",children:e.bio||"This user hasn't written a bio yet."})}),f.jsxs("div",{className:"mt-10 pt-10 border-t border-gray-800 grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"p-4 bg-gray-900/50 rounded-xl",children:[f.jsx("span",{className:"block text-gray-500 text-xs uppercase mb-1",children:"Joined"}),f.jsx("span",{className:"text-white font-mono",children:e.createdAt?.seconds?new Date(e.createdAt.seconds*1e3).getFullYear():"Unknown"})]}),f.jsxs("div",{className:"p-4 bg-gray-900/50 rounded-xl",children:[f.jsx("span",{className:"block text-gray-500 text-xs uppercase mb-1",children:"Role"}),f.jsx("span",{className:"text-white font-mono capitalize",children:e.role||"Trader"})]})]})]})]})})}):f.jsxs("div",{className:"min-h-screen bg-background flex flex-col items-center justify-center text-center p-4",children:[f.jsx("div",{className:"w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mb-4",children:f.jsx("span",{className:"text-4xl",children:"?"})}),f.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Not Found"}),f.jsxs("p",{className:"text-gray-400",children:['The user "',n,'" does not exist or has changed their name.']})]})},ly=({children:n,adminOnly:e=!1})=>{const[t,r]=P.useState(null),[a,l]=P.useState(!0);return P.useEffect(()=>{const c=Eh(Be,d=>{r(d),l(!1)});return()=>c()},[]),a?f.jsx("div",{className:"text-center p-10 pt-32 text-white",children:"Loading..."}):t?n:f.jsx(E4,{to:"/login",replace:!0})};function oU(){return f.jsx(Q4,{children:f.jsxs("div",{className:"min-h-screen bg-background text-text font-sans flex flex-col",children:[f.jsx(xD,{}),f.jsx("main",{className:"flex-grow",children:f.jsxs(A4,{children:[f.jsx(mn,{path:"/",element:f.jsx(SD,{})}),f.jsx(mn,{path:"/analysis",element:f.jsx(ND,{})}),f.jsx(mn,{path:"/analysis/:id",element:f.jsx(CD,{})}),f.jsx(mn,{path:"/news",element:f.jsx(ID,{})}),f.jsx(mn,{path:"/news/:id",element:f.jsx(jD,{})}),f.jsx(mn,{path:"/login",element:f.jsx(OD,{})}),f.jsx(mn,{path:"/register",element:f.jsx(DD,{})}),f.jsx(mn,{path:"/community",element:f.jsx(ly,{children:f.jsx(rU,{})})}),f.jsx(mn,{path:"/academy",element:f.jsx(ZP,{})}),f.jsx(mn,{path:"/academy/:path",element:f.jsx(JP,{})}),f.jsx(mn,{path:"/academy/:path/:courseId",element:f.jsx(eU,{})}),f.jsx(mn,{path:"/profile/:username",element:f.jsx(aU,{})}),f.jsx(mn,{path:"/dashboard",element:f.jsx(ly,{children:f.jsx(MD,{})})}),f.jsx(mn,{path:"/dashboard/course/:courseId",element:f.jsx(ly,{children:f.jsx(WP,{})})}),f.jsxs(mn,{path:"/admin",element:f.jsx(PD,{}),children:[f.jsx(mn,{index:!0,element:f.jsx(UD,{})}),f.jsx(mn,{path:"news",element:f.jsx(HP,{})}),f.jsx(mn,{path:"analysis",element:f.jsx($P,{})}),f.jsx(mn,{path:"courses",element:f.jsx(QP,{})}),f.jsx(mn,{path:"profile",element:f.jsx(XP,{})})]})]})}),f.jsx(ED,{})]})})}RC.createRoot(document.getElementById("root")).render(f.jsx(P.StrictMode,{children:f.jsx(oU,{})}))});export default lU();
