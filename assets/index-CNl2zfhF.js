var _C=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var uU=_C((os,ls)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function n0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Rp={exports:{}},ju={};var W_;function xC(){if(W_)return ju;W_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return ju.Fragment=e,ju.jsx=t,ju.jsxs=t,ju}var Z_;function EC(){return Z_||(Z_=1,Rp.exports=xC()),Rp.exports}var f=EC(),Ip={exports:{}},$e={};var J_;function wC(){if(J_)return $e;J_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),E=Symbol.iterator;function A(q){return q===null||typeof q!="object"?null:(q=E&&q[E]||q["@@iterator"],typeof q=="function"?q:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,R={};function V(q,W,de){this.props=q,this.context=W,this.refs=R,this.updater=de||S}V.prototype.isReactComponent={},V.prototype.setState=function(q,W){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,W,"setState")},V.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function F(){}F.prototype=V.prototype;function Y(q,W,de){this.props=q,this.context=W,this.refs=R,this.updater=de||S}var Q=Y.prototype=new F;Q.constructor=Y,O(Q,V.prototype),Q.isPureReactComponent=!0;var ie=Array.isArray;function ve(){}var L={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function U(q,W,de){var me=de.ref;return{$$typeof:n,type:q,key:W,ref:me!==void 0?me:null,props:de}}function $(q,W){return U(q.type,W,q.props)}function N(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function M(q){var W={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(de){return W[de]})}var C=/\/+/g;function pe(q,W){return typeof q=="object"&&q!==null&&q.key!=null?M(""+q.key):W.toString(36)}function ge(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ve,ve):(q.status="pending",q.then(function(W){q.status==="pending"&&(q.status="fulfilled",q.value=W)},function(W){q.status==="pending"&&(q.status="rejected",q.reason=W)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function H(q,W,de,me,ye){var Ae=typeof q;(Ae==="undefined"||Ae==="boolean")&&(q=null);var De=!1;if(q===null)De=!0;else switch(Ae){case"bigint":case"string":case"number":De=!0;break;case"object":switch(q.$$typeof){case n:case e:De=!0;break;case v:return De=q._init,H(De(q._payload),W,de,me,ye)}}if(De)return ye=ye(q),De=me===""?"."+pe(q,0):me,ie(ye)?(de="",De!=null&&(de=De.replace(C,"$&/")+"/"),H(ye,W,de,"",function(Xe){return Xe})):ye!=null&&(N(ye)&&(ye=$(ye,de+(ye.key==null||q&&q.key===ye.key?"":(""+ye.key).replace(C,"$&/")+"/")+De)),W.push(ye)),1;De=0;var je=me===""?".":me+":";if(ie(q))for(var ke=0;ke<q.length;ke++)me=q[ke],Ae=je+pe(me,ke),De+=H(me,W,de,Ae,ye);else if(ke=A(q),typeof ke=="function")for(q=ke.call(q),ke=0;!(me=q.next()).done;)me=me.value,Ae=je+pe(me,ke++),De+=H(me,W,de,Ae,ye);else if(Ae==="object"){if(typeof q.then=="function")return H(ge(q),W,de,me,ye);throw W=String(q),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return De}function ee(q,W,de){if(q==null)return q;var me=[],ye=0;return H(q,me,"","",function(Ae){return W.call(de,Ae,ye++)}),me}function ue(q){if(q._status===-1){var W=q._result;W=W(),W.then(function(de){(q._status===0||q._status===-1)&&(q._status=1,q._result=de)},function(de){(q._status===0||q._status===-1)&&(q._status=2,q._result=de)}),q._status===-1&&(q._status=0,q._result=W)}if(q._status===1)return q._result.default;throw q._result}var _e=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},be={map:ee,forEach:function(q,W,de){ee(q,function(){W.apply(this,arguments)},de)},count:function(q){var W=0;return ee(q,function(){W++}),W},toArray:function(q){return ee(q,function(W){return W})||[]},only:function(q){if(!N(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return $e.Activity=x,$e.Children=be,$e.Component=V,$e.Fragment=t,$e.Profiler=a,$e.PureComponent=Y,$e.StrictMode=r,$e.Suspense=m,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,$e.__COMPILER_RUNTIME={__proto__:null,c:function(q){return L.H.useMemoCache(q)}},$e.cache=function(q){return function(){return q.apply(null,arguments)}},$e.cacheSignal=function(){return null},$e.cloneElement=function(q,W,de){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var me=O({},q.props),ye=q.key;if(W!=null)for(Ae in W.key!==void 0&&(ye=""+W.key),W)!k.call(W,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&W.ref===void 0||(me[Ae]=W[Ae]);var Ae=arguments.length-2;if(Ae===1)me.children=de;else if(1<Ae){for(var De=Array(Ae),je=0;je<Ae;je++)De[je]=arguments[je+2];me.children=De}return U(q.type,ye,me)},$e.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:l,_context:q},q},$e.createElement=function(q,W,de){var me,ye={},Ae=null;if(W!=null)for(me in W.key!==void 0&&(Ae=""+W.key),W)k.call(W,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ye[me]=W[me]);var De=arguments.length-2;if(De===1)ye.children=de;else if(1<De){for(var je=Array(De),ke=0;ke<De;ke++)je[ke]=arguments[ke+2];ye.children=je}if(q&&q.defaultProps)for(me in De=q.defaultProps,De)ye[me]===void 0&&(ye[me]=De[me]);return U(q,Ae,ye)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(q){return{$$typeof:d,render:q}},$e.isValidElement=N,$e.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:ue}},$e.memo=function(q,W){return{$$typeof:p,type:q,compare:W===void 0?null:W}},$e.startTransition=function(q){var W=L.T,de={};L.T=de;try{var me=q(),ye=L.S;ye!==null&&ye(de,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ve,_e)}catch(Ae){_e(Ae)}finally{W!==null&&de.types!==null&&(W.types=de.types),L.T=W}},$e.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},$e.use=function(q){return L.H.use(q)},$e.useActionState=function(q,W,de){return L.H.useActionState(q,W,de)},$e.useCallback=function(q,W){return L.H.useCallback(q,W)},$e.useContext=function(q){return L.H.useContext(q)},$e.useDebugValue=function(){},$e.useDeferredValue=function(q,W){return L.H.useDeferredValue(q,W)},$e.useEffect=function(q,W){return L.H.useEffect(q,W)},$e.useEffectEvent=function(q){return L.H.useEffectEvent(q)},$e.useId=function(){return L.H.useId()},$e.useImperativeHandle=function(q,W,de){return L.H.useImperativeHandle(q,W,de)},$e.useInsertionEffect=function(q,W){return L.H.useInsertionEffect(q,W)},$e.useLayoutEffect=function(q,W){return L.H.useLayoutEffect(q,W)},$e.useMemo=function(q,W){return L.H.useMemo(q,W)},$e.useOptimistic=function(q,W){return L.H.useOptimistic(q,W)},$e.useReducer=function(q,W,de){return L.H.useReducer(q,W,de)},$e.useRef=function(q){return L.H.useRef(q)},$e.useState=function(q){return L.H.useState(q)},$e.useSyncExternalStore=function(q,W,de){return L.H.useSyncExternalStore(q,W,de)},$e.useTransition=function(){return L.H.useTransition()},$e.version="19.2.1",$e}var ex;function r0(){return ex||(ex=1,Ip.exports=wC()),Ip.exports}var P=r0();const Ei=n0(P);var jp={exports:{}},Ou={},Op={exports:{}},Dp={};var tx;function TC(){return tx||(tx=1,(function(n){function e(H,ee){var ue=H.length;H.push(ee);e:for(;0<ue;){var _e=ue-1>>>1,be=H[_e];if(0<a(be,ee))H[_e]=ee,H[ue]=be,ue=_e;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ee=H[0],ue=H.pop();if(ue!==ee){H[0]=ue;e:for(var _e=0,be=H.length,q=be>>>1;_e<q;){var W=2*(_e+1)-1,de=H[W],me=W+1,ye=H[me];if(0>a(de,ue))me<be&&0>a(ye,de)?(H[_e]=ye,H[me]=ue,_e=me):(H[_e]=de,H[W]=ue,_e=W);else if(me<be&&0>a(ye,ue))H[_e]=ye,H[me]=ue,_e=me;else break e}}return ee}function a(H,ee){var ue=H.sortIndex-ee.sortIndex;return ue!==0?ue:H.id-ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],p=[],v=1,x=null,E=3,A=!1,S=!1,O=!1,R=!1,V=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function Q(H){for(var ee=t(p);ee!==null;){if(ee.callback===null)r(p);else if(ee.startTime<=H)r(p),ee.sortIndex=ee.expirationTime,e(m,ee);else break;ee=t(p)}}function ie(H){if(O=!1,Q(H),!S)if(t(m)!==null)S=!0,ve||(ve=!0,M());else{var ee=t(p);ee!==null&&ge(ie,ee.startTime-H)}}var ve=!1,L=-1,k=5,U=-1;function $(){return R?!0:!(n.unstable_now()-U<k)}function N(){if(R=!1,ve){var H=n.unstable_now();U=H;var ee=!0;try{e:{S=!1,O&&(O=!1,F(L),L=-1),A=!0;var ue=E;try{t:{for(Q(H),x=t(m);x!==null&&!(x.expirationTime>H&&$());){var _e=x.callback;if(typeof _e=="function"){x.callback=null,E=x.priorityLevel;var be=_e(x.expirationTime<=H);if(H=n.unstable_now(),typeof be=="function"){x.callback=be,Q(H),ee=!0;break t}x===t(m)&&r(m),Q(H)}else r(m);x=t(m)}if(x!==null)ee=!0;else{var q=t(p);q!==null&&ge(ie,q.startTime-H),ee=!1}}break e}finally{x=null,E=ue,A=!1}ee=void 0}}finally{ee?M():ve=!1}}}var M;if(typeof Y=="function")M=function(){Y(N)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,pe=C.port2;C.port1.onmessage=N,M=function(){pe.postMessage(null)}}else M=function(){V(N,0)};function ge(H,ee){L=V(function(){H(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(H){switch(E){case 1:case 2:case 3:var ee=3;break;default:ee=E}var ue=E;E=ee;try{return H()}finally{E=ue}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ue=E;E=H;try{return ee()}finally{E=ue}},n.unstable_scheduleCallback=function(H,ee,ue){var _e=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?_e+ue:_e):ue=_e,H){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ue+be,H={id:v++,callback:ee,priorityLevel:H,startTime:ue,expirationTime:be,sortIndex:-1},ue>_e?(H.sortIndex=ue,e(p,H),t(m)===null&&H===t(p)&&(O?(F(L),L=-1):O=!0,ge(ie,ue-_e))):(H.sortIndex=be,e(m,H),S||A||(S=!0,ve||(ve=!0,M()))),H},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(H){var ee=E;return function(){var ue=E;E=ee;try{return H.apply(this,arguments)}finally{E=ue}}}})(Dp)),Dp}var nx;function AC(){return nx||(nx=1,Op.exports=TC()),Op.exports}var Lp={exports:{}},ir={};var rx;function SC(){if(rx)return ir;rx=1;var n=r0();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:m,containerInfo:p,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ir.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ir.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,v)},ir.flushSync=function(m){var p=c.T,v=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=p,r.p=v,r.d.f()}},ir.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},ir.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},ir.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,x=d(v,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:E,fetchPriority:A}):v==="script"&&r.d.X(m,{crossOrigin:x,integrity:E,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ir.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},ir.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,x=d(v,p.crossOrigin);r.d.L(m,v,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ir.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=d(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},ir.requestFormReset=function(m){r.d.r(m)},ir.unstable_batchedUpdates=function(m,p){return m(p)},ir.useFormState=function(m,p,v){return c.H.useFormState(m,p,v)},ir.useFormStatus=function(){return c.H.useHostTransitionStatus()},ir.version="19.2.1",ir}var sx;function NC(){if(sx)return Lp.exports;sx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lp.exports=SC(),Lp.exports}var ix;function CC(){if(ix)return Ou;ix=1;var n=AC(),e=r0(),t=NC();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function c(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function d(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function m(s){if(l(s)!==s)throw Error(r(188))}function p(s){var i=s.alternate;if(!i){if(i=l(s),i===null)throw Error(r(188));return i!==s?null:s}for(var o=s,u=i;;){var g=o.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===o)return m(g),s;if(y===u)return m(g),i;y=y.sibling}throw Error(r(188))}if(o.return!==u.return)o=g,u=y;else{for(var w=!1,I=g.child;I;){if(I===o){w=!0,o=g,u=y;break}if(I===u){w=!0,u=g,o=y;break}I=I.sibling}if(!w){for(I=y.child;I;){if(I===o){w=!0,o=y,u=g;break}if(I===u){w=!0,u=y,o=g;break}I=I.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:i}function v(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=v(s),i!==null)return i;s=s.sibling}return null}var x=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function M(s){return s===null||typeof s!="object"?null:(s=N&&s[N]||s["@@iterator"],typeof s=="function"?s:null)}var C=Symbol.for("react.client.reference");function pe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===C?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case O:return"Fragment";case V:return"Profiler";case R:return"StrictMode";case ie:return"Suspense";case ve:return"SuspenseList";case U:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case Y:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case Q:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return i=s.displayName||null,i!==null?i:pe(s.type)||"Memo";case k:i=s._payload,s=s._init;try{return pe(s(i))}catch{}}return null}var ge=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},_e=[],be=-1;function q(s){return{current:s}}function W(s){0>be||(s.current=_e[be],_e[be]=null,be--)}function de(s,i){be++,_e[be]=s.current,s.current=i}var me=q(null),ye=q(null),Ae=q(null),De=q(null);function je(s,i){switch(de(Ae,i),de(ye,s),de(me,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?__(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=__(i),s=x_(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}W(me),de(me,s)}function ke(){W(me),W(ye),W(Ae)}function Xe(s){s.memoizedState!==null&&de(De,s);var i=me.current,o=x_(i,s.type);i!==o&&(de(ye,s),de(me,o))}function et(s){ye.current===s&&(W(me),W(ye)),De.current===s&&(W(De),Nu._currentValue=ue)}var st,ut;function yt(s){if(st===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);st=i&&i[1]||"",ut=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+st+s+ut}var tn=!1;function zr(s,i){if(!s||tn)return"";tn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(se){var te=se}Reflect.construct(s,[],he)}else{try{he.call()}catch(se){te=se}s.call(he.prototype)}}else{try{throw Error()}catch(se){te=se}(he=s())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(se){if(se&&te&&typeof se.stack=="string")return[se.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),w=y[0],I=y[1];if(w&&I){var z=w.split(`
`),J=I.split(`
`);for(g=u=0;u<z.length&&!z[u].includes("DetermineComponentFrameRoot");)u++;for(;g<J.length&&!J[g].includes("DetermineComponentFrameRoot");)g++;if(u===z.length||g===J.length)for(u=z.length-1,g=J.length-1;1<=u&&0<=g&&z[u]!==J[g];)g--;for(;1<=u&&0<=g;u--,g--)if(z[u]!==J[g]){if(u!==1||g!==1)do if(u--,g--,0>g||z[u]!==J[g]){var ae=`
`+z[u].replace(" at new "," at ");return s.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",s.displayName)),ae}while(1<=u&&0<=g);break}}}finally{tn=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?yt(o):""}function li(s,i){switch(s.tag){case 26:case 27:case 5:return yt(s.type);case 16:return yt("Lazy");case 13:return s.child!==i&&i!==null?yt("Suspense Fallback"):yt("Suspense");case 19:return yt("SuspenseList");case 0:case 15:return zr(s.type,!1);case 11:return zr(s.type.render,!1);case 1:return zr(s.type,!0);case 31:return yt("Activity");default:return""}}function Ui(s){try{var i="",o=null;do i+=li(s,o),o=s,s=s.return;while(s);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ht=Object.prototype.hasOwnProperty,jt=n.unstable_scheduleCallback,Ar=n.unstable_cancelCallback,Da=n.unstable_shouldYield,Vi=n.unstable_requestPaint,Ot=n.unstable_now,Sr=n.unstable_getCurrentPriorityLevel,qi=n.unstable_ImmediatePriority,Hr=n.unstable_UserBlockingPriority,fr=n.unstable_NormalPriority,Bi=n.unstable_LowPriority,kn=n.unstable_IdlePriority,zi=n.log,Hi=n.unstable_setDisableYieldValue,mr=null,Zt=null;function Sn(s){if(typeof zi=="function"&&Hi(s),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(mr,s)}catch{}}var Dt=Math.clz32?Math.clz32:Zn,Us=Math.log,Nr=Math.LN2;function Zn(s){return s>>>=0,s===0?32:31-(Us(s)/Nr|0)|0}var Mn=256,Fr=262144,At=4194304;function Jn(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function In(s,i,o){var u=s.pendingLanes;if(u===0)return 0;var g=0,y=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var I=u&134217727;return I!==0?(u=I&~y,u!==0?g=Jn(u):(w&=I,w!==0?g=Jn(w):o||(o=I&~s,o!==0&&(g=Jn(o))))):(I=u&~y,I!==0?g=Jn(I):w!==0?g=Jn(w):o||(o=u&~s,o!==0&&(g=Jn(o)))),g===0?0:i!==0&&i!==g&&(i&y)===0&&(y=g&-g,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:g}function Pn(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function Fi(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ci(){var s=At;return At<<=1,(At&62914560)===0&&(At=4194304),s}function Nn(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function hs(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function $r(s,i,o,u,g,y){var w=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var I=s.entanglements,z=s.expirationTimes,J=s.hiddenUpdates;for(o=w&~o;0<o;){var ae=31-Dt(o),he=1<<ae;I[ae]=0,z[ae]=-1;var te=J[ae];if(te!==null)for(J[ae]=null,ae=0;ae<te.length;ae++){var se=te[ae];se!==null&&(se.lane&=-536870913)}o&=~he}u!==0&&Vs(s,u,0),y!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=y&~(w&~i))}function Vs(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-Dt(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|o&261930}function $i(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var u=31-Dt(o),g=1<<u;g&i|s[u]&i&&(s[u]|=i),o&=~g}}function Gi(s,i){var o=i&-i;return o=(o&42)!==0?1:ds(o),(o&(s.suspendedLanes|i))!==0?0:o}function ds(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function gr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function nn(){var s=ee.p;return s!==0?s:(s=window.event,s===void 0?32:F_(s.type))}function pr(s,i){var o=ee.p;try{return ee.p=s,i()}finally{ee.p=o}}var yr=Math.random().toString(36).slice(2),Ft="__reactFiber$"+yr,rn="__reactProps$"+yr,Cr="__reactContainer$"+yr,Jt="__reactEvents$"+yr,Vo="__reactListeners$"+yr,La="__reactHandles$"+yr,ka="__reactResources$"+yr,Rr="__reactMarker$"+yr;function ui(s){delete s[Ft],delete s[rn],delete s[Jt],delete s[Vo],delete s[La]}function Mt(s){var i=s[Ft];if(i)return i;for(var o=s.parentNode;o;){if(i=o[Cr]||o[Ft]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=C_(s);s!==null;){if(o=s[Ft])return o;s=C_(s)}return i}s=o,o=s.parentNode}return null}function er(s){if(s=s[Ft]||s[Cr]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function Un(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function Ir(s){var i=s[ka];return i||(i=s[ka]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function $t(s){s[Rr]=!0}var Ki=new Set,fs={};function vr(s,i){Vn(s,i),Vn(s+"Capture",i)}function Vn(s,i){for(fs[s]=i,s=0;s<i.length;s++)Ki.add(i[s])}var tr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qs={},Yi={};function Ma(s){return Ht.call(Yi,s)?!0:Ht.call(qs,s)?!1:tr.test(s)?Yi[s]=!0:(qs[s]=!0,!1)}function hi(s,i,o){if(Ma(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function qn(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function Gt(s,i,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+u)}}function Pt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function jr(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Gr(s,i,o){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(w){o=""+w,y.call(this,w)}}),Object.defineProperty(s,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function dt(s){if(!s._valueTracker){var i=jr(s)?"checked":"value";s._valueTracker=Gr(s,i,""+s[i])}}function ms(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return s&&(u=jr(s)?s.checked?"true":"false":s.value),s=u,s!==o?(i.setValue(s),!0):!1}function Or(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Bs=/[\n"\\]/g;function jn(s){return s.replace(Bs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function di(s,i,o,u,g,y,w,I){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),i!=null?w==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+Pt(i)):s.value!==""+Pt(i)&&(s.value=""+Pt(i)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),i!=null?Qi(s,w,Pt(i)):o!=null?Qi(s,w,Pt(o)):u!=null&&s.removeAttribute("value"),g==null&&y!=null&&(s.defaultChecked=!!y),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+Pt(I):s.removeAttribute("name")}function fi(s,i,o,u,g,y,w,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){dt(s);return}o=o!=null?""+Pt(o):"",i=i!=null?""+Pt(i):o,I||i===s.value||(s.value=i),s.defaultValue=i}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=I?s.checked:!!u,s.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w),dt(s)}function Qi(s,i,o){i==="number"&&Or(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function gs(s,i,o,u){if(s=s.options,i){i={};for(var g=0;g<o.length;g++)i["$"+o[g]]=!0;for(o=0;o<s.length;o++)g=i.hasOwnProperty("$"+s[o].value),s[o].selected!==g&&(s[o].selected=g),g&&u&&(s[o].defaultSelected=!0)}else{for(o=""+Pt(o),i=null,g=0;g<s.length;g++){if(s[g].value===o){s[g].selected=!0,u&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function ps(s,i,o){if(i!=null&&(i=""+Pt(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+Pt(o):""}function pn(s,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(ge(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Pt(i),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u),dt(s)}function Kt(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var Dr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xi(s,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,o):typeof o!="number"||o===0||Dr.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function nr(s,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var g in i)u=i[g],i.hasOwnProperty(g)&&o[g]!==u&&Xi(s,g,u)}else for(var y in i)i.hasOwnProperty(y)&&Xi(s,y,i[y])}function mi(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pa=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ys=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gi(s){return ys.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function rr(){}var cn=null;function Bn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Kr=null,zn=null;function Yr(s){var i=er(s);if(i&&(s=i.stateNode)){var o=s[rn]||null;e:switch(s=i.stateNode,i.type){case"input":if(di(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+jn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==s&&u.form===s.form){var g=u[rn]||null;if(!g)throw Error(r(90));di(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===s.form&&ms(u)}break e;case"textarea":ps(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&gs(s,!!o.multiple,i,!1)}}}var Qr=!1;function vs(s,i,o){if(Qr)return s(i,o);Qr=!0;try{var u=s(i);return u}finally{if(Qr=!1,(Kr!==null||zn!==null)&&(Ad(),Kr&&(i=Kr,s=zn,zn=Kr=null,Yr(i),s)))for(i=0;i<s.length;i++)Yr(s[i])}}function sr(s,i){var o=s.stateNode;if(o===null)return null;var u=o[rn]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bs=!1;if(On)try{var We={};Object.defineProperty(We,"passive",{get:function(){bs=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch{bs=!1}var br=null,zs=null,Hs=null;function Wi(){if(Hs)return Hs;var s,i=zs,o=i.length,u,g="value"in br?br.value:br.textContent,y=g.length;for(s=0;s<o&&i[s]===g[s];s++);var w=o-s;for(u=1;u<=w&&i[o-u]===g[y-u];u++);return Hs=g.slice(s,1<u?1-u:void 0)}function _(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function j(){return!0}function B(){return!1}function ne(s){function i(o,u,g,y,w){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(o=s[I],this[I]=o?o(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?j:B,this.isPropagationStopped=B,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=j)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=j)},persist:function(){},isPersistent:j}),i}var Ue={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Se=ne(Ue),Ye=x({},Ue,{view:0,detail:0}),Ze=ne(Ye),Et,tt,Rt,un=x({},Ye,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ua,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Rt&&(Rt&&s.type==="mousemove"?(Et=s.screenX-Rt.screenX,tt=s.screenY-Rt.screenY):tt=Et=0,Rt=s),Et)},movementY:function(s){return"movementY"in s?s.movementY:tt}}),Ut=ne(un),Yt=x({},un,{dataTransfer:0}),sn=ne(Yt),Xr=x({},Ye,{relatedTarget:0}),Hn=ne(Xr),Wr=x({},Ue,{animationName:0,elapsedTime:0,pseudoElement:0}),qo=ne(Wr),Fs=x({},Ue,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Zi=ne(Fs),Ph=x({},Ue,{data:0}),pi=ne(Ph),Uh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bh(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=qh[s])?!!i[s]:!1}function Ua(){return Bh}var _r=x({},Ye,{key:function(s){if(s.key){var i=Uh[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=_(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Vh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ua,charCode:function(s){return s.type==="keypress"?_(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?_(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),zh=ne(_r),Hh=x({},un,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ji=ne(Hh),h=x({},Ye,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ua}),b=ne(h),T=x({},Ue,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=ne(T),X=x({},un,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),re=ne(X),xe=x({},Ue,{newState:0,oldState:0}),Ge=ne(xe),hn=[9,13,27,32],vt=On&&"CompositionEvent"in window,Qt=null;On&&"documentMode"in document&&(Qt=document.documentMode);var _s=On&&"TextEvent"in window&&!Qt,yi=On&&(!vt||Qt&&8<Qt&&11>=Qt),$s=" ",Gs=!1;function Bo(s,i){switch(s){case"keyup":return hn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ol=!1;function FN(s,i){switch(s){case"compositionend":return jl(i);case"keypress":return i.which!==32?null:(Gs=!0,$s);case"textInput":return s=i.data,s===$s&&Gs?null:s;default:return null}}function $N(s,i){if(Ol)return s==="compositionend"||!vt&&Bo(s,i)?(s=Wi(),Hs=zs=br=null,Ol=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yi&&i.locale!=="ko"?null:i.data;default:return null}}var GN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iv(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!GN[s.type]:i==="textarea"}function jv(s,i,o,u){Kr?zn?zn.push(u):zn=[u]:Kr=u,i=Od(i,"onChange"),0<i.length&&(o=new Se("onChange","change",null,o,u),s.push({event:o,listeners:i}))}var Qc=null,Xc=null;function KN(s){m_(s,0)}function Fh(s){var i=Un(s);if(ms(i))return s}function Ov(s,i){if(s==="change")return i}var Dv=!1;if(On){var Mm;if(On){var Pm="oninput"in document;if(!Pm){var Lv=document.createElement("div");Lv.setAttribute("oninput","return;"),Pm=typeof Lv.oninput=="function"}Mm=Pm}else Mm=!1;Dv=Mm&&(!document.documentMode||9<document.documentMode)}function kv(){Qc&&(Qc.detachEvent("onpropertychange",Mv),Xc=Qc=null)}function Mv(s){if(s.propertyName==="value"&&Fh(Xc)){var i=[];jv(i,Xc,s,Bn(s)),vs(KN,i)}}function YN(s,i,o){s==="focusin"?(kv(),Qc=i,Xc=o,Qc.attachEvent("onpropertychange",Mv)):s==="focusout"&&kv()}function QN(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Fh(Xc)}function XN(s,i){if(s==="click")return Fh(i)}function WN(s,i){if(s==="input"||s==="change")return Fh(i)}function ZN(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Zr=typeof Object.is=="function"?Object.is:ZN;function Wc(s,i){if(Zr(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!Ht.call(i,g)||!Zr(s[g],i[g]))return!1}return!0}function Pv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Uv(s,i){var o=Pv(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=i&&u>=i)return{node:o,offset:i-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Pv(o)}}function Vv(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Vv(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function qv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=Or(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=Or(s.document)}return i}function Um(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var JN=On&&"documentMode"in document&&11>=document.documentMode,Dl=null,Vm=null,Zc=null,qm=!1;function Bv(s,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;qm||Dl==null||Dl!==Or(u)||(u=Dl,"selectionStart"in u&&Um(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Zc&&Wc(Zc,u)||(Zc=u,u=Od(Vm,"onSelect"),0<u.length&&(i=new Se("onSelect","select",null,i,o),s.push({event:i,listeners:u}),i.target=Dl)))}function zo(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var Ll={animationend:zo("Animation","AnimationEnd"),animationiteration:zo("Animation","AnimationIteration"),animationstart:zo("Animation","AnimationStart"),transitionrun:zo("Transition","TransitionRun"),transitionstart:zo("Transition","TransitionStart"),transitioncancel:zo("Transition","TransitionCancel"),transitionend:zo("Transition","TransitionEnd")},Bm={},zv={};On&&(zv=document.createElement("div").style,"AnimationEvent"in window||(delete Ll.animationend.animation,delete Ll.animationiteration.animation,delete Ll.animationstart.animation),"TransitionEvent"in window||delete Ll.transitionend.transition);function Ho(s){if(Bm[s])return Bm[s];if(!Ll[s])return s;var i=Ll[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in zv)return Bm[s]=i[o];return s}var Hv=Ho("animationend"),Fv=Ho("animationiteration"),$v=Ho("animationstart"),e2=Ho("transitionrun"),t2=Ho("transitionstart"),n2=Ho("transitioncancel"),Gv=Ho("transitionend"),Kv=new Map,zm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zm.push("scrollEnd");function Ks(s,i){Kv.set(s,i),vr(i,[s])}var $h=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},xs=[],kl=0,Hm=0;function Gh(){for(var s=kl,i=Hm=kl=0;i<s;){var o=xs[i];xs[i++]=null;var u=xs[i];xs[i++]=null;var g=xs[i];xs[i++]=null;var y=xs[i];if(xs[i++]=null,u!==null&&g!==null){var w=u.pending;w===null?g.next=g:(g.next=w.next,w.next=g),u.pending=g}y!==0&&Yv(o,g,y)}}function Kh(s,i,o,u){xs[kl++]=s,xs[kl++]=i,xs[kl++]=o,xs[kl++]=u,Hm|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Fm(s,i,o,u){return Kh(s,i,o,u),Yh(s)}function Fo(s,i){return Kh(s,null,null,i),Yh(s)}function Yv(s,i,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var g=!1,y=s.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(g=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,g&&i!==null&&(g=31-Dt(o),s=y.hiddenUpdates,u=s[g],u===null?s[g]=[i]:u.push(i),i.lane=o|536870912),y):null}function Yh(s){if(50<_u)throw _u=0,Jg=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Ml={};function r2(s,i,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(s,i,o,u){return new r2(s,i,o,u)}function $m(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ea(s,i){var o=s.alternate;return o===null?(o=Jr(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function Qv(s,i){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function Qh(s,i,o,u,g,y){var w=0;if(u=s,typeof s=="function")$m(s)&&(w=1);else if(typeof s=="string")w=lC(s,o,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case U:return s=Jr(31,o,i,g),s.elementType=U,s.lanes=y,s;case O:return $o(o.children,g,y,i);case R:w=8,g|=24;break;case V:return s=Jr(12,o,i,g|2),s.elementType=V,s.lanes=y,s;case ie:return s=Jr(13,o,i,g),s.elementType=ie,s.lanes=y,s;case ve:return s=Jr(19,o,i,g),s.elementType=ve,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Y:w=10;break e;case F:w=9;break e;case Q:w=11;break e;case L:w=14;break e;case k:w=16,u=null;break e}w=29,o=Error(r(130,s===null?"null":typeof s,"")),u=null}return i=Jr(w,o,i,g),i.elementType=s,i.type=u,i.lanes=y,i}function $o(s,i,o,u){return s=Jr(7,s,u,i),s.lanes=o,s}function Gm(s,i,o){return s=Jr(6,s,null,i),s.lanes=o,s}function Xv(s){var i=Jr(18,null,null,0);return i.stateNode=s,i}function Km(s,i,o){return i=Jr(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var Wv=new WeakMap;function Es(s,i){if(typeof s=="object"&&s!==null){var o=Wv.get(s);return o!==void 0?o:(i={value:s,source:i,stack:Ui(i)},Wv.set(s,i),i)}return{value:s,source:i,stack:Ui(i)}}var Pl=[],Ul=0,Xh=null,Jc=0,ws=[],Ts=0,Va=null,vi=1,bi="";function ta(s,i){Pl[Ul++]=Jc,Pl[Ul++]=Xh,Xh=s,Jc=i}function Zv(s,i,o){ws[Ts++]=vi,ws[Ts++]=bi,ws[Ts++]=Va,Va=s;var u=vi;s=bi;var g=32-Dt(u)-1;u&=~(1<<g),o+=1;var y=32-Dt(i)+g;if(30<y){var w=g-g%5;y=(u&(1<<w)-1).toString(32),u>>=w,g-=w,vi=1<<32-Dt(i)+g|o<<g|u,bi=y+s}else vi=1<<y|o<<g|u,bi=s}function Ym(s){s.return!==null&&(ta(s,1),Zv(s,1,0))}function Qm(s){for(;s===Xh;)Xh=Pl[--Ul],Pl[Ul]=null,Jc=Pl[--Ul],Pl[Ul]=null;for(;s===Va;)Va=ws[--Ts],ws[Ts]=null,bi=ws[--Ts],ws[Ts]=null,vi=ws[--Ts],ws[Ts]=null}function Jv(s,i){ws[Ts++]=vi,ws[Ts++]=bi,ws[Ts++]=Va,vi=i.id,bi=i.overflow,Va=s}var Fn=null,Vt=null,ht=!1,qa=null,As=!1,Xm=Error(r(519));function Ba(s){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw eu(Es(i,s)),Xm}function eb(s){var i=s.stateNode,o=s.type,u=s.memoizedProps;switch(i[Ft]=s,i[rn]=u,o){case"dialog":rt("cancel",i),rt("close",i);break;case"iframe":case"object":case"embed":rt("load",i);break;case"video":case"audio":for(o=0;o<Eu.length;o++)rt(Eu[o],i);break;case"source":rt("error",i);break;case"img":case"image":case"link":rt("error",i),rt("load",i);break;case"details":rt("toggle",i);break;case"input":rt("invalid",i),fi(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":rt("invalid",i);break;case"textarea":rt("invalid",i),pn(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||v_(i.textContent,o)?(u.popover!=null&&(rt("beforetoggle",i),rt("toggle",i)),u.onScroll!=null&&rt("scroll",i),u.onScrollEnd!=null&&rt("scrollend",i),u.onClick!=null&&(i.onclick=rr),i=!0):i=!1,i||Ba(s,!0)}function tb(s){for(Fn=s.return;Fn;)switch(Fn.tag){case 5:case 31:case 13:As=!1;return;case 27:case 3:As=!0;return;default:Fn=Fn.return}}function Vl(s){if(s!==Fn)return!1;if(!ht)return tb(s),ht=!0,!1;var i=s.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||mp(s.type,s.memoizedProps)),o=!o),o&&Vt&&Ba(s),tb(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Vt=N_(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Vt=N_(s)}else i===27?(i=Vt,to(s.type)?(s=bp,bp=null,Vt=s):Vt=i):Vt=Fn?Ns(s.stateNode.nextSibling):null;return!0}function Go(){Vt=Fn=null,ht=!1}function Wm(){var s=qa;return s!==null&&(Pr===null?Pr=s:Pr.push.apply(Pr,s),qa=null),s}function eu(s){qa===null?qa=[s]:qa.push(s)}var Zm=q(null),Ko=null,na=null;function za(s,i,o){de(Zm,i._currentValue),i._currentValue=o}function ra(s){s._currentValue=Zm.current,W(Zm)}function Jm(s,i,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===o)break;s=s.return}}function eg(s,i,o,u){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var y=g.dependencies;if(y!==null){var w=g.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=g;for(var z=0;z<i.length;z++)if(I.context===i[z]){y.lanes|=o,I=y.alternate,I!==null&&(I.lanes|=o),Jm(y.return,o,s),u||(w=null);break e}y=I.next}}else if(g.tag===18){if(w=g.return,w===null)throw Error(r(341));w.lanes|=o,y=w.alternate,y!==null&&(y.lanes|=o),Jm(w,o,s),w=null}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}}function ql(s,i,o,u){s=null;for(var g=i,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var w=g.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var I=g.type;Zr(g.pendingProps.value,w.value)||(s!==null?s.push(I):s=[I])}}else if(g===De.current){if(w=g.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Nu):s=[Nu])}g=g.return}s!==null&&eg(i,s,o,u),i.flags|=262144}function Wh(s){for(s=s.firstContext;s!==null;){if(!Zr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Yo(s){Ko=s,na=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function $n(s){return nb(Ko,s)}function Zh(s,i){return Ko===null&&Yo(s),nb(s,i)}function nb(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},na===null){if(s===null)throw Error(r(308));na=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else na=na.next=i;return o}var s2=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},i2=n.unstable_scheduleCallback,a2=n.unstable_NormalPriority,yn={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tg(){return{controller:new s2,data:new Map,refCount:0}}function tu(s){s.refCount--,s.refCount===0&&i2(a2,function(){s.controller.abort()})}var nu=null,ng=0,Bl=0,zl=null;function o2(s,i){if(nu===null){var o=nu=[];ng=0,Bl=ip(),zl={status:"pending",value:void 0,then:function(u){o.push(u)}}}return ng++,i.then(rb,rb),i}function rb(){if(--ng===0&&nu!==null){zl!==null&&(zl.status="fulfilled");var s=nu;nu=null,Bl=0,zl=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function l2(s,i){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var g=0;g<o.length;g++)(0,o[g])(i)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var sb=H.S;H.S=function(s,i){z1=Ot(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&o2(s,i),sb!==null&&sb(s,i)};var Qo=q(null);function rg(){var s=Qo.current;return s!==null?s:It.pooledCache}function Jh(s,i){i===null?de(Qo,Qo.current):de(Qo,i.pool)}function ib(){var s=rg();return s===null?null:{parent:yn._currentValue,pool:s}}var Hl=Error(r(460)),sg=Error(r(474)),ed=Error(r(542)),td={then:function(){}};function ab(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ob(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(rr,rr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,cb(s),s;default:if(typeof i.status=="string")i.then(rr,rr);else{if(s=It,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=u}},function(u){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,cb(s),s}throw Wo=i,Hl}}function Xo(s){try{var i=s._init;return i(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Wo=o,Hl):o}}var Wo=null;function lb(){if(Wo===null)throw Error(r(459));var s=Wo;return Wo=null,s}function cb(s){if(s===Hl||s===ed)throw Error(r(483))}var Fl=null,ru=0;function nd(s){var i=ru;return ru+=1,Fl===null&&(Fl=[]),ob(Fl,s,i)}function su(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function rd(s,i){throw i.$$typeof===E?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function ub(s){function i(K,G){if(s){var Z=K.deletions;Z===null?(K.deletions=[G],K.flags|=16):Z.push(G)}}function o(K,G){if(!s)return null;for(;G!==null;)i(K,G),G=G.sibling;return null}function u(K){for(var G=new Map;K!==null;)K.key!==null?G.set(K.key,K):G.set(K.index,K),K=K.sibling;return G}function g(K,G){return K=ea(K,G),K.index=0,K.sibling=null,K}function y(K,G,Z){return K.index=Z,s?(Z=K.alternate,Z!==null?(Z=Z.index,Z<G?(K.flags|=67108866,G):Z):(K.flags|=67108866,G)):(K.flags|=1048576,G)}function w(K){return s&&K.alternate===null&&(K.flags|=67108866),K}function I(K,G,Z,oe){return G===null||G.tag!==6?(G=Gm(Z,K.mode,oe),G.return=K,G):(G=g(G,Z),G.return=K,G)}function z(K,G,Z,oe){var Me=Z.type;return Me===O?ae(K,G,Z.props.children,oe,Z.key):G!==null&&(G.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===k&&Xo(Me)===G.type)?(G=g(G,Z.props),su(G,Z),G.return=K,G):(G=Qh(Z.type,Z.key,Z.props,null,K.mode,oe),su(G,Z),G.return=K,G)}function J(K,G,Z,oe){return G===null||G.tag!==4||G.stateNode.containerInfo!==Z.containerInfo||G.stateNode.implementation!==Z.implementation?(G=Km(Z,K.mode,oe),G.return=K,G):(G=g(G,Z.children||[]),G.return=K,G)}function ae(K,G,Z,oe,Me){return G===null||G.tag!==7?(G=$o(Z,K.mode,oe,Me),G.return=K,G):(G=g(G,Z),G.return=K,G)}function he(K,G,Z){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Gm(""+G,K.mode,Z),G.return=K,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case A:return Z=Qh(G.type,G.key,G.props,null,K.mode,Z),su(Z,G),Z.return=K,Z;case S:return G=Km(G,K.mode,Z),G.return=K,G;case k:return G=Xo(G),he(K,G,Z)}if(ge(G)||M(G))return G=$o(G,K.mode,Z,null),G.return=K,G;if(typeof G.then=="function")return he(K,nd(G),Z);if(G.$$typeof===Y)return he(K,Zh(K,G),Z);rd(K,G)}return null}function te(K,G,Z,oe){var Me=G!==null?G.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Me!==null?null:I(K,G,""+Z,oe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return Z.key===Me?z(K,G,Z,oe):null;case S:return Z.key===Me?J(K,G,Z,oe):null;case k:return Z=Xo(Z),te(K,G,Z,oe)}if(ge(Z)||M(Z))return Me!==null?null:ae(K,G,Z,oe,null);if(typeof Z.then=="function")return te(K,G,nd(Z),oe);if(Z.$$typeof===Y)return te(K,G,Zh(K,Z),oe);rd(K,Z)}return null}function se(K,G,Z,oe,Me){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return K=K.get(Z)||null,I(G,K,""+oe,Me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case A:return K=K.get(oe.key===null?Z:oe.key)||null,z(G,K,oe,Me);case S:return K=K.get(oe.key===null?Z:oe.key)||null,J(G,K,oe,Me);case k:return oe=Xo(oe),se(K,G,Z,oe,Me)}if(ge(oe)||M(oe))return K=K.get(Z)||null,ae(G,K,oe,Me,null);if(typeof oe.then=="function")return se(K,G,Z,nd(oe),Me);if(oe.$$typeof===Y)return se(K,G,Z,Zh(G,oe),Me);rd(G,oe)}return null}function Ne(K,G,Z,oe){for(var Me=null,gt=null,Re=G,Qe=G=0,at=null;Re!==null&&Qe<Z.length;Qe++){Re.index>Qe?(at=Re,Re=null):at=Re.sibling;var pt=te(K,Re,Z[Qe],oe);if(pt===null){Re===null&&(Re=at);break}s&&Re&&pt.alternate===null&&i(K,Re),G=y(pt,G,Qe),gt===null?Me=pt:gt.sibling=pt,gt=pt,Re=at}if(Qe===Z.length)return o(K,Re),ht&&ta(K,Qe),Me;if(Re===null){for(;Qe<Z.length;Qe++)Re=he(K,Z[Qe],oe),Re!==null&&(G=y(Re,G,Qe),gt===null?Me=Re:gt.sibling=Re,gt=Re);return ht&&ta(K,Qe),Me}for(Re=u(Re);Qe<Z.length;Qe++)at=se(Re,K,Qe,Z[Qe],oe),at!==null&&(s&&at.alternate!==null&&Re.delete(at.key===null?Qe:at.key),G=y(at,G,Qe),gt===null?Me=at:gt.sibling=at,gt=at);return s&&Re.forEach(function(ao){return i(K,ao)}),ht&&ta(K,Qe),Me}function Ve(K,G,Z,oe){if(Z==null)throw Error(r(151));for(var Me=null,gt=null,Re=G,Qe=G=0,at=null,pt=Z.next();Re!==null&&!pt.done;Qe++,pt=Z.next()){Re.index>Qe?(at=Re,Re=null):at=Re.sibling;var ao=te(K,Re,pt.value,oe);if(ao===null){Re===null&&(Re=at);break}s&&Re&&ao.alternate===null&&i(K,Re),G=y(ao,G,Qe),gt===null?Me=ao:gt.sibling=ao,gt=ao,Re=at}if(pt.done)return o(K,Re),ht&&ta(K,Qe),Me;if(Re===null){for(;!pt.done;Qe++,pt=Z.next())pt=he(K,pt.value,oe),pt!==null&&(G=y(pt,G,Qe),gt===null?Me=pt:gt.sibling=pt,gt=pt);return ht&&ta(K,Qe),Me}for(Re=u(Re);!pt.done;Qe++,pt=Z.next())pt=se(Re,K,Qe,pt.value,oe),pt!==null&&(s&&pt.alternate!==null&&Re.delete(pt.key===null?Qe:pt.key),G=y(pt,G,Qe),gt===null?Me=pt:gt.sibling=pt,gt=pt);return s&&Re.forEach(function(bC){return i(K,bC)}),ht&&ta(K,Qe),Me}function Ct(K,G,Z,oe){if(typeof Z=="object"&&Z!==null&&Z.type===O&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:e:{for(var Me=Z.key;G!==null;){if(G.key===Me){if(Me=Z.type,Me===O){if(G.tag===7){o(K,G.sibling),oe=g(G,Z.props.children),oe.return=K,K=oe;break e}}else if(G.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===k&&Xo(Me)===G.type){o(K,G.sibling),oe=g(G,Z.props),su(oe,Z),oe.return=K,K=oe;break e}o(K,G);break}else i(K,G);G=G.sibling}Z.type===O?(oe=$o(Z.props.children,K.mode,oe,Z.key),oe.return=K,K=oe):(oe=Qh(Z.type,Z.key,Z.props,null,K.mode,oe),su(oe,Z),oe.return=K,K=oe)}return w(K);case S:e:{for(Me=Z.key;G!==null;){if(G.key===Me)if(G.tag===4&&G.stateNode.containerInfo===Z.containerInfo&&G.stateNode.implementation===Z.implementation){o(K,G.sibling),oe=g(G,Z.children||[]),oe.return=K,K=oe;break e}else{o(K,G);break}else i(K,G);G=G.sibling}oe=Km(Z,K.mode,oe),oe.return=K,K=oe}return w(K);case k:return Z=Xo(Z),Ct(K,G,Z,oe)}if(ge(Z))return Ne(K,G,Z,oe);if(M(Z)){if(Me=M(Z),typeof Me!="function")throw Error(r(150));return Z=Me.call(Z),Ve(K,G,Z,oe)}if(typeof Z.then=="function")return Ct(K,G,nd(Z),oe);if(Z.$$typeof===Y)return Ct(K,G,Zh(K,Z),oe);rd(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,G!==null&&G.tag===6?(o(K,G.sibling),oe=g(G,Z),oe.return=K,K=oe):(o(K,G),oe=Gm(Z,K.mode,oe),oe.return=K,K=oe),w(K)):o(K,G)}return function(K,G,Z,oe){try{ru=0;var Me=Ct(K,G,Z,oe);return Fl=null,Me}catch(Re){if(Re===Hl||Re===ed)throw Re;var gt=Jr(29,Re,null,K.mode);return gt.lanes=oe,gt.return=K,gt}finally{}}}var Zo=ub(!0),hb=ub(!1),Ha=!1;function ig(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ag(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Fa(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function $a(s,i,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(bt&2)!==0){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,i=Yh(s),Yv(s,null,o),i}return Kh(s,u,i,o),Yh(s)}function iu(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,$i(s,o)}}function og(s,i){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?g=y=w:y=y.next=w,o=o.next}while(o!==null);y===null?g=y=i:y=y.next=i}else g=y=i;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var lg=!1;function au(){if(lg){var s=zl;if(s!==null)throw s}}function ou(s,i,o,u){lg=!1;var g=s.updateQueue;Ha=!1;var y=g.firstBaseUpdate,w=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var z=I,J=z.next;z.next=null,w===null?y=J:w.next=J,w=z;var ae=s.alternate;ae!==null&&(ae=ae.updateQueue,I=ae.lastBaseUpdate,I!==w&&(I===null?ae.firstBaseUpdate=J:I.next=J,ae.lastBaseUpdate=z))}if(y!==null){var he=g.baseState;w=0,ae=J=z=null,I=y;do{var te=I.lane&-536870913,se=te!==I.lane;if(se?(it&te)===te:(u&te)===te){te!==0&&te===Bl&&(lg=!0),ae!==null&&(ae=ae.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ne=s,Ve=I;te=i;var Ct=o;switch(Ve.tag){case 1:if(Ne=Ve.payload,typeof Ne=="function"){he=Ne.call(Ct,he,te);break e}he=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Ve.payload,te=typeof Ne=="function"?Ne.call(Ct,he,te):Ne,te==null)break e;he=x({},he,te);break e;case 2:Ha=!0}}te=I.callback,te!==null&&(s.flags|=64,se&&(s.flags|=8192),se=g.callbacks,se===null?g.callbacks=[te]:se.push(te))}else se={lane:te,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ae===null?(J=ae=se,z=he):ae=ae.next=se,w|=te;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;se=I,I=se.next,se.next=null,g.lastBaseUpdate=se,g.shared.pending=null}}while(!0);ae===null&&(z=he),g.baseState=z,g.firstBaseUpdate=J,g.lastBaseUpdate=ae,y===null&&(g.shared.lanes=0),Xa|=w,s.lanes=w,s.memoizedState=he}}function fb(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function mb(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)fb(o[s],i)}var $l=q(null),sd=q(0);function gb(s,i){s=da,de(sd,s),de($l,i),da=s|i.baseLanes}function cg(){de(sd,da),de($l,$l.current)}function ug(){da=sd.current,W($l),W(sd)}var es=q(null),Ss=null;function Ga(s){var i=s.alternate;de(dn,dn.current&1),de(es,s),Ss===null&&(i===null||$l.current!==null||i.memoizedState!==null)&&(Ss=s)}function hg(s){de(dn,dn.current),de(es,s),Ss===null&&(Ss=s)}function pb(s){s.tag===22?(de(dn,dn.current),de(es,s),Ss===null&&(Ss=s)):Ka()}function Ka(){de(dn,dn.current),de(es,es.current)}function ts(s){W(es),Ss===s&&(Ss=null),W(dn)}var dn=q(0);function id(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||yp(o)||vp(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var sa=0,Ke=null,St=null,vn=null,ad=!1,Gl=!1,Jo=!1,od=0,lu=0,Kl=null,c2=0;function an(){throw Error(r(321))}function dg(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!Zr(s[o],i[o]))return!1;return!0}function fg(s,i,o,u,g,y){return sa=y,Ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=s===null||s.memoizedState===null?Jb:Cg,Jo=!1,y=o(u,g),Jo=!1,Gl&&(y=vb(i,o,u,g)),yb(s),y}function yb(s){H.H=hu;var i=St!==null&&St.next!==null;if(sa=0,vn=St=Ke=null,ad=!1,lu=0,Kl=null,i)throw Error(r(300));s===null||bn||(s=s.dependencies,s!==null&&Wh(s)&&(bn=!0))}function vb(s,i,o,u){Ke=s;var g=0;do{if(Gl&&(Kl=null),lu=0,Gl=!1,25<=g)throw Error(r(301));if(g+=1,vn=St=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=e1,y=i(o,u)}while(Gl);return y}function u2(){var s=H.H,i=s.useState()[0];return i=typeof i.then=="function"?cu(i):i,s=s.useState()[0],(St!==null?St.memoizedState:null)!==s&&(Ke.flags|=1024),i}function mg(){var s=od!==0;return od=0,s}function gg(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function pg(s){if(ad){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}ad=!1}sa=0,vn=St=Ke=null,Gl=!1,lu=od=0,Kl=null}function xr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Ke.memoizedState=vn=s:vn=vn.next=s,vn}function fn(){if(St===null){var s=Ke.alternate;s=s!==null?s.memoizedState:null}else s=St.next;var i=vn===null?Ke.memoizedState:vn.next;if(i!==null)vn=i,St=s;else{if(s===null)throw Ke.alternate===null?Error(r(467)):Error(r(310));St=s,s={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},vn===null?Ke.memoizedState=vn=s:vn=vn.next=s}return vn}function ld(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cu(s){var i=lu;return lu+=1,Kl===null&&(Kl=[]),s=ob(Kl,s,i),i=Ke,(vn===null?i.memoizedState:vn.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?Jb:Cg),s}function cd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return cu(s);if(s.$$typeof===Y)return $n(s)}throw Error(r(438,String(s)))}function yg(s){var i=null,o=Ke.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Ke.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=ld(),Ke.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),u=0;u<s;u++)o[u]=$;return i.index++,o}function ia(s,i){return typeof i=="function"?i(s):i}function ud(s){var i=fn();return vg(i,St,s)}function vg(s,i,o){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var g=s.baseQueue,y=u.pending;if(y!==null){if(g!==null){var w=g.next;g.next=y.next,y.next=w}i.baseQueue=g=y,u.pending=null}if(y=s.baseState,g===null)s.memoizedState=y;else{i=g.next;var I=w=null,z=null,J=i,ae=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(it&he)===he:(sa&he)===he){var te=J.revertLane;if(te===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===Bl&&(ae=!0);else if((sa&te)===te){J=J.next,te===Bl&&(ae=!0);continue}else he={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},z===null?(I=z=he,w=y):z=z.next=he,Ke.lanes|=te,Xa|=te;he=J.action,Jo&&o(y,he),y=J.hasEagerState?J.eagerState:o(y,he)}else te={lane:he,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},z===null?(I=z=te,w=y):z=z.next=te,Ke.lanes|=he,Xa|=he;J=J.next}while(J!==null&&J!==i);if(z===null?w=y:z.next=I,!Zr(y,s.memoizedState)&&(bn=!0,ae&&(o=zl,o!==null)))throw o;s.memoizedState=y,s.baseState=w,s.baseQueue=z,u.lastRenderedState=y}return g===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function bg(s){var i=fn(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var u=o.dispatch,g=o.pending,y=i.memoizedState;if(g!==null){o.pending=null;var w=g=g.next;do y=s(y,w.action),w=w.next;while(w!==g);Zr(y,i.memoizedState)||(bn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function bb(s,i,o){var u=Ke,g=fn(),y=ht;if(y){if(o===void 0)throw Error(r(407));o=o()}else o=i();var w=!Zr((St||g).memoizedState,o);if(w&&(g.memoizedState=o,bn=!0),g=g.queue,Eg(Eb.bind(null,u,g,s),[s]),g.getSnapshot!==i||w||vn!==null&&vn.memoizedState.tag&1){if(u.flags|=2048,Yl(9,{destroy:void 0},xb.bind(null,u,g,o,i),null),It===null)throw Error(r(349));y||(sa&127)!==0||_b(u,i,o)}return o}function _b(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=Ke.updateQueue,i===null?(i=ld(),Ke.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function xb(s,i,o,u){i.value=o,i.getSnapshot=u,wb(i)&&Tb(s)}function Eb(s,i,o){return o(function(){wb(i)&&Tb(s)})}function wb(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!Zr(s,o)}catch{return!0}}function Tb(s){var i=Fo(s,2);i!==null&&Ur(i,s,2)}function _g(s){var i=xr();if(typeof s=="function"){var o=s;if(s=o(),Jo){Sn(!0);try{o()}finally{Sn(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:s},i}function Ab(s,i,o,u){return s.baseState=o,vg(s,St,typeof u=="function"?u:ia)}function h2(s,i,o,u,g){if(fd(s))throw Error(r(485));if(s=i.action,s!==null){var y={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};H.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,Sb(i,y)):(y.next=o.next,i.pending=o.next=y)}}function Sb(s,i){var o=i.action,u=i.payload,g=s.state;if(i.isTransition){var y=H.T,w={};H.T=w;try{var I=o(g,u),z=H.S;z!==null&&z(w,I),Nb(s,i,I)}catch(J){xg(s,i,J)}finally{y!==null&&w.types!==null&&(y.types=w.types),H.T=y}}else try{y=o(g,u),Nb(s,i,y)}catch(J){xg(s,i,J)}}function Nb(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Cb(s,i,u)},function(u){return xg(s,i,u)}):Cb(s,i,o)}function Cb(s,i,o){i.status="fulfilled",i.value=o,Rb(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,Sb(s,o)))}function xg(s,i,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Rb(i),i=i.next;while(i!==u)}s.action=null}function Rb(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function Ib(s,i){return i}function jb(s,i){if(ht){var o=It.formState;if(o!==null){e:{var u=Ke;if(ht){if(Vt){t:{for(var g=Vt,y=As;g.nodeType!==8;){if(!y){g=null;break t}if(g=Ns(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Vt=Ns(g.nextSibling),u=g.data==="F!";break e}}Ba(u)}u=!1}u&&(i=o[0])}}return o=xr(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ib,lastRenderedState:i},o.queue=u,o=Xb.bind(null,Ke,u),u.dispatch=o,u=_g(!1),y=Ng.bind(null,Ke,!1,u.queue),u=xr(),g={state:i,dispatch:null,action:s,pending:null},u.queue=g,o=h2.bind(null,Ke,g,y,o),g.dispatch=o,u.memoizedState=s,[i,o,!1]}function Ob(s){var i=fn();return Db(i,St,s)}function Db(s,i,o){if(i=vg(s,i,Ib)[0],s=ud(ia)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=cu(i)}catch(w){throw w===Hl?ed:w}else u=i;i=fn();var g=i.queue,y=g.dispatch;return o!==i.memoizedState&&(Ke.flags|=2048,Yl(9,{destroy:void 0},d2.bind(null,g,o),null)),[u,y,s]}function d2(s,i){s.action=i}function Lb(s){var i=fn(),o=St;if(o!==null)return Db(i,o,s);fn(),i=i.memoizedState,o=fn();var u=o.queue.dispatch;return o.memoizedState=s,[i,u,!1]}function Yl(s,i,o,u){return s={tag:s,create:o,deps:u,inst:i,next:null},i=Ke.updateQueue,i===null&&(i=ld(),Ke.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,i.lastEffect=s),s}function kb(){return fn().memoizedState}function hd(s,i,o,u){var g=xr();Ke.flags|=s,g.memoizedState=Yl(1|i,{destroy:void 0},o,u===void 0?null:u)}function dd(s,i,o,u){var g=fn();u=u===void 0?null:u;var y=g.memoizedState.inst;St!==null&&u!==null&&dg(u,St.memoizedState.deps)?g.memoizedState=Yl(i,y,o,u):(Ke.flags|=s,g.memoizedState=Yl(1|i,y,o,u))}function Mb(s,i){hd(8390656,8,s,i)}function Eg(s,i){dd(2048,8,s,i)}function f2(s){Ke.flags|=4;var i=Ke.updateQueue;if(i===null)i=ld(),Ke.updateQueue=i,i.events=[s];else{var o=i.events;o===null?i.events=[s]:o.push(s)}}function Pb(s){var i=fn().memoizedState;return f2({ref:i,nextImpl:s}),function(){if((bt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Ub(s,i){return dd(4,2,s,i)}function Vb(s,i){return dd(4,4,s,i)}function qb(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Bb(s,i,o){o=o!=null?o.concat([s]):null,dd(4,4,qb.bind(null,i,s),o)}function wg(){}function zb(s,i){var o=fn();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&dg(i,u[1])?u[0]:(o.memoizedState=[s,i],s)}function Hb(s,i){var o=fn();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&dg(i,u[1]))return u[0];if(u=s(),Jo){Sn(!0);try{s()}finally{Sn(!1)}}return o.memoizedState=[u,i],u}function Tg(s,i,o){return o===void 0||(sa&1073741824)!==0&&(it&261930)===0?s.memoizedState=i:(s.memoizedState=o,s=F1(),Ke.lanes|=s,Xa|=s,o)}function Fb(s,i,o,u){return Zr(o,i)?o:$l.current!==null?(s=Tg(s,o,u),Zr(s,i)||(bn=!0),s):(sa&42)===0||(sa&1073741824)!==0&&(it&261930)===0?(bn=!0,s.memoizedState=o):(s=F1(),Ke.lanes|=s,Xa|=s,i)}function $b(s,i,o,u,g){var y=ee.p;ee.p=y!==0&&8>y?y:8;var w=H.T,I={};H.T=I,Ng(s,!1,i,o);try{var z=g(),J=H.S;if(J!==null&&J(I,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ae=l2(z,u);uu(s,i,ae,ss(s))}else uu(s,i,u,ss(s))}catch(he){uu(s,i,{then:function(){},status:"rejected",reason:he},ss())}finally{ee.p=y,w!==null&&I.types!==null&&(w.types=I.types),H.T=w}}function m2(){}function Ag(s,i,o,u){if(s.tag!==5)throw Error(r(476));var g=Gb(s).queue;$b(s,g,i,ue,o===null?m2:function(){return Kb(s),o(u)})}function Gb(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:ue},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function Kb(s){var i=Gb(s);i.next===null&&(i=s.alternate.memoizedState),uu(s,i.next.queue,{},ss())}function Sg(){return $n(Nu)}function Yb(){return fn().memoizedState}function Qb(){return fn().memoizedState}function g2(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=ss();s=Fa(o);var u=$a(i,s,o);u!==null&&(Ur(u,i,o),iu(u,i,o)),i={cache:tg()},s.payload=i;return}i=i.return}}function p2(s,i,o){var u=ss();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},fd(s)?Wb(i,o):(o=Fm(s,i,o,u),o!==null&&(Ur(o,s,u),Zb(o,i,u)))}function Xb(s,i,o){var u=ss();uu(s,i,o,u)}function uu(s,i,o,u){var g={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(fd(s))Wb(i,g);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var w=i.lastRenderedState,I=y(w,o);if(g.hasEagerState=!0,g.eagerState=I,Zr(I,w))return Kh(s,i,g,0),It===null&&Gh(),!1}catch{}finally{}if(o=Fm(s,i,g,u),o!==null)return Ur(o,s,u),Zb(o,i,u),!0}return!1}function Ng(s,i,o,u){if(u={lane:2,revertLane:ip(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},fd(s)){if(i)throw Error(r(479))}else i=Fm(s,o,u,2),i!==null&&Ur(i,s,2)}function fd(s){var i=s.alternate;return s===Ke||i!==null&&i===Ke}function Wb(s,i){Gl=ad=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function Zb(s,i,o){if((o&4194048)!==0){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,$i(s,o)}}var hu={readContext:$n,use:cd,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};hu.useEffectEvent=an;var Jb={readContext:$n,use:cd,useCallback:function(s,i){return xr().memoizedState=[s,i===void 0?null:i],s},useContext:$n,useEffect:Mb,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,hd(4194308,4,qb.bind(null,i,s),o)},useLayoutEffect:function(s,i){return hd(4194308,4,s,i)},useInsertionEffect:function(s,i){hd(4,2,s,i)},useMemo:function(s,i){var o=xr();i=i===void 0?null:i;var u=s();if(Jo){Sn(!0);try{s()}finally{Sn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(s,i,o){var u=xr();if(o!==void 0){var g=o(i);if(Jo){Sn(!0);try{o(i)}finally{Sn(!1)}}}else g=i;return u.memoizedState=u.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},u.queue=s,s=s.dispatch=p2.bind(null,Ke,s),[u.memoizedState,s]},useRef:function(s){var i=xr();return s={current:s},i.memoizedState=s},useState:function(s){s=_g(s);var i=s.queue,o=Xb.bind(null,Ke,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:wg,useDeferredValue:function(s,i){var o=xr();return Tg(o,s,i)},useTransition:function(){var s=_g(!1);return s=$b.bind(null,Ke,s.queue,!0,!1),xr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var u=Ke,g=xr();if(ht){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),It===null)throw Error(r(349));(it&127)!==0||_b(u,i,o)}g.memoizedState=o;var y={value:o,getSnapshot:i};return g.queue=y,Mb(Eb.bind(null,u,y,s),[s]),u.flags|=2048,Yl(9,{destroy:void 0},xb.bind(null,u,y,o,i),null),o},useId:function(){var s=xr(),i=It.identifierPrefix;if(ht){var o=bi,u=vi;o=(u&~(1<<32-Dt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=od++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=c2++,i="_"+i+"r_"+o.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:Sg,useFormState:jb,useActionState:jb,useOptimistic:function(s){var i=xr();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Ng.bind(null,Ke,!0,o),o.dispatch=i,[s,i]},useMemoCache:yg,useCacheRefresh:function(){return xr().memoizedState=g2.bind(null,Ke)},useEffectEvent:function(s){var i=xr(),o={impl:s};return i.memoizedState=o,function(){if((bt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Cg={readContext:$n,use:cd,useCallback:zb,useContext:$n,useEffect:Eg,useImperativeHandle:Bb,useInsertionEffect:Ub,useLayoutEffect:Vb,useMemo:Hb,useReducer:ud,useRef:kb,useState:function(){return ud(ia)},useDebugValue:wg,useDeferredValue:function(s,i){var o=fn();return Fb(o,St.memoizedState,s,i)},useTransition:function(){var s=ud(ia)[0],i=fn().memoizedState;return[typeof s=="boolean"?s:cu(s),i]},useSyncExternalStore:bb,useId:Yb,useHostTransitionStatus:Sg,useFormState:Ob,useActionState:Ob,useOptimistic:function(s,i){var o=fn();return Ab(o,St,s,i)},useMemoCache:yg,useCacheRefresh:Qb};Cg.useEffectEvent=Pb;var e1={readContext:$n,use:cd,useCallback:zb,useContext:$n,useEffect:Eg,useImperativeHandle:Bb,useInsertionEffect:Ub,useLayoutEffect:Vb,useMemo:Hb,useReducer:bg,useRef:kb,useState:function(){return bg(ia)},useDebugValue:wg,useDeferredValue:function(s,i){var o=fn();return St===null?Tg(o,s,i):Fb(o,St.memoizedState,s,i)},useTransition:function(){var s=bg(ia)[0],i=fn().memoizedState;return[typeof s=="boolean"?s:cu(s),i]},useSyncExternalStore:bb,useId:Yb,useHostTransitionStatus:Sg,useFormState:Lb,useActionState:Lb,useOptimistic:function(s,i){var o=fn();return St!==null?Ab(o,St,s,i):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:yg,useCacheRefresh:Qb};e1.useEffectEvent=Pb;function Rg(s,i,o,u){i=s.memoizedState,o=o(u,i),o=o==null?i:x({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Ig={enqueueSetState:function(s,i,o){s=s._reactInternals;var u=ss(),g=Fa(u);g.payload=i,o!=null&&(g.callback=o),i=$a(s,g,u),i!==null&&(Ur(i,s,u),iu(i,s,u))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var u=ss(),g=Fa(u);g.tag=1,g.payload=i,o!=null&&(g.callback=o),i=$a(s,g,u),i!==null&&(Ur(i,s,u),iu(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=ss(),u=Fa(o);u.tag=2,i!=null&&(u.callback=i),i=$a(s,u,o),i!==null&&(Ur(i,s,o),iu(i,s,o))}};function t1(s,i,o,u,g,y,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,y,w):i.prototype&&i.prototype.isPureReactComponent?!Wc(o,u)||!Wc(g,y):!0}function n1(s,i,o,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==s&&Ig.enqueueReplaceState(i,i.state,null)}function el(s,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(s=s.defaultProps){o===i&&(o=x({},o));for(var g in s)o[g]===void 0&&(o[g]=s[g])}return o}function r1(s){$h(s)}function s1(s){console.error(s)}function i1(s){$h(s)}function md(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function a1(s,i,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function jg(s,i,o){return o=Fa(o),o.tag=3,o.payload={element:null},o.callback=function(){md(s,i)},o}function o1(s){return s=Fa(s),s.tag=3,s}function l1(s,i,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;s.payload=function(){return g(y)},s.callback=function(){a1(i,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){a1(i,o,u),typeof g!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function y2(s,i,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&ql(i,o,g,!0),o=es.current,o!==null){switch(o.tag){case 31:case 13:return Ss===null?Sd():o.alternate===null&&on===0&&(on=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===td?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),np(s,u,g)),!1;case 22:return o.flags|=65536,u===td?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),np(s,u,g)),!1}throw Error(r(435,o.tag))}return np(s,u,g),Sd(),!1}if(ht)return i=es.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,u!==Xm&&(s=Error(r(422),{cause:u}),eu(Es(s,o)))):(u!==Xm&&(i=Error(r(423),{cause:u}),eu(Es(i,o))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,u=Es(u,o),g=jg(s.stateNode,u,g),og(s,g),on!==4&&(on=2)),!1;var y=Error(r(520),{cause:u});if(y=Es(y,o),bu===null?bu=[y]:bu.push(y),on!==4&&(on=2),i===null)return!0;u=Es(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=g&-g,o.lanes|=s,s=jg(o.stateNode,u,s),og(o,s),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Wa===null||!Wa.has(y))))return o.flags|=65536,g&=-g,o.lanes|=g,g=o1(g),l1(g,s,o,u),og(o,g),!1}o=o.return}while(o!==null);return!1}var Og=Error(r(461)),bn=!1;function Gn(s,i,o,u){i.child=s===null?hb(i,null,o,u):Zo(i,s.child,o,u)}function c1(s,i,o,u,g){o=o.render;var y=i.ref;if("ref"in u){var w={};for(var I in u)I!=="ref"&&(w[I]=u[I])}else w=u;return Yo(i),u=fg(s,i,o,w,y,g),I=mg(),s!==null&&!bn?(gg(s,i,g),aa(s,i,g)):(ht&&I&&Ym(i),i.flags|=1,Gn(s,i,u,g),i.child)}function u1(s,i,o,u,g){if(s===null){var y=o.type;return typeof y=="function"&&!$m(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,h1(s,i,y,u,g)):(s=Qh(o.type,null,u,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(y=s.child,!qg(s,g)){var w=y.memoizedProps;if(o=o.compare,o=o!==null?o:Wc,o(w,u)&&s.ref===i.ref)return aa(s,i,g)}return i.flags|=1,s=ea(y,u),s.ref=i.ref,s.return=i,i.child=s}function h1(s,i,o,u,g){if(s!==null){var y=s.memoizedProps;if(Wc(y,u)&&s.ref===i.ref)if(bn=!1,i.pendingProps=u=y,qg(s,g))(s.flags&131072)!==0&&(bn=!0);else return i.lanes=s.lanes,aa(s,i,g)}return Dg(s,i,o,u,g)}function d1(s,i,o,u){var g=u.children,y=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,s!==null){for(u=i.child=s.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~y}else u=0,i.child=null;return f1(s,i,y,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&Jh(i,y!==null?y.cachePool:null),y!==null?gb(i,y):cg(),pb(i);else return u=i.lanes=536870912,f1(s,i,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(Jh(i,y.cachePool),gb(i,y),Ka(),i.memoizedState=null):(s!==null&&Jh(i,null),cg(),Ka());return Gn(s,i,g,o),i.child}function du(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function f1(s,i,o,u,g){var y=rg();return y=y===null?null:{parent:yn._currentValue,pool:y},i.memoizedState={baseLanes:o,cachePool:y},s!==null&&Jh(i,null),cg(),pb(i),s!==null&&ql(s,i,u,!0),i.childLanes=g,null}function gd(s,i){return i=yd({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function m1(s,i,o){return Zo(i,s.child,null,o),s=gd(i,i.pendingProps),s.flags|=2,ts(i),i.memoizedState=null,s}function v2(s,i,o){var u=i.pendingProps,g=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(ht){if(u.mode==="hidden")return s=gd(i,u),i.lanes=536870912,du(null,s);if(hg(i),(s=Vt)?(s=S_(s,As),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Va!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=Xv(s),o.return=i,i.child=o,Fn=i,Vt=null)):s=null,s===null)throw Ba(i);return i.lanes=536870912,null}return gd(i,u)}var y=s.memoizedState;if(y!==null){var w=y.dehydrated;if(hg(i),g)if(i.flags&256)i.flags&=-257,i=m1(s,i,o);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(r(558));else if(bn||ql(s,i,o,!1),g=(o&s.childLanes)!==0,bn||g){if(u=It,u!==null&&(w=Gi(u,o),w!==0&&w!==y.retryLane))throw y.retryLane=w,Fo(s,w),Ur(u,s,w),Og;Sd(),i=m1(s,i,o)}else s=y.treeContext,Vt=Ns(w.nextSibling),Fn=i,ht=!0,qa=null,As=!1,s!==null&&Jv(i,s),i=gd(i,u),i.flags|=4096;return i}return s=ea(s.child,{mode:u.mode,children:u.children}),s.ref=i.ref,i.child=s,s.return=i,s}function pd(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(i.flags|=4194816)}}function Dg(s,i,o,u,g){return Yo(i),o=fg(s,i,o,u,void 0,g),u=mg(),s!==null&&!bn?(gg(s,i,g),aa(s,i,g)):(ht&&u&&Ym(i),i.flags|=1,Gn(s,i,o,g),i.child)}function g1(s,i,o,u,g,y){return Yo(i),i.updateQueue=null,o=vb(i,u,o,g),yb(s),u=mg(),s!==null&&!bn?(gg(s,i,y),aa(s,i,y)):(ht&&u&&Ym(i),i.flags|=1,Gn(s,i,o,y),i.child)}function p1(s,i,o,u,g){if(Yo(i),i.stateNode===null){var y=Ml,w=o.contextType;typeof w=="object"&&w!==null&&(y=$n(w)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ig,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},ig(i),w=o.contextType,y.context=typeof w=="object"&&w!==null?$n(w):Ml,y.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Rg(i,o,w,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&Ig.enqueueReplaceState(y,y.state,null),ou(i,u,y,g),au(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){y=i.stateNode;var I=i.memoizedProps,z=el(o,I);y.props=z;var J=y.context,ae=o.contextType;w=Ml,typeof ae=="object"&&ae!==null&&(w=$n(ae));var he=o.getDerivedStateFromProps;ae=typeof he=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,ae||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||J!==w)&&n1(i,y,u,w),Ha=!1;var te=i.memoizedState;y.state=te,ou(i,u,y,g),au(),J=i.memoizedState,I||te!==J||Ha?(typeof he=="function"&&(Rg(i,o,he,u),J=i.memoizedState),(z=Ha||t1(i,o,z,u,te,J,w))?(ae||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=J),y.props=u,y.state=J,y.context=w,u=z):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,ag(s,i),w=i.memoizedProps,ae=el(o,w),y.props=ae,he=i.pendingProps,te=y.context,J=o.contextType,z=Ml,typeof J=="object"&&J!==null&&(z=$n(J)),I=o.getDerivedStateFromProps,(J=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==he||te!==z)&&n1(i,y,u,z),Ha=!1,te=i.memoizedState,y.state=te,ou(i,u,y,g),au();var se=i.memoizedState;w!==he||te!==se||Ha||s!==null&&s.dependencies!==null&&Wh(s.dependencies)?(typeof I=="function"&&(Rg(i,o,I,u),se=i.memoizedState),(ae=Ha||t1(i,o,ae,u,te,se,z)||s!==null&&s.dependencies!==null&&Wh(s.dependencies))?(J||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,se,z),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,se,z)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=se),y.props=u,y.state=se,y.context=z,u=ae):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),u=!1)}return y=u,pd(s,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,s!==null&&u?(i.child=Zo(i,s.child,null,g),i.child=Zo(i,null,o,g)):Gn(s,i,o,g),i.memoizedState=y.state,s=i.child):s=aa(s,i,g),s}function y1(s,i,o,u){return Go(),i.flags|=256,Gn(s,i,o,u),i.child}var Lg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kg(s){return{baseLanes:s,cachePool:ib()}}function Mg(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=rs),s}function v1(s,i,o){var u=i.pendingProps,g=!1,y=(i.flags&128)!==0,w;if((w=y)||(w=s!==null&&s.memoizedState===null?!1:(dn.current&2)!==0),w&&(g=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,s===null){if(ht){if(g?Ga(i):Ka(),(s=Vt)?(s=S_(s,As),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Va!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=Xv(s),o.return=i,i.child=o,Fn=i,Vt=null)):s=null,s===null)throw Ba(i);return vp(s)?i.lanes=32:i.lanes=536870912,null}var I=u.children;return u=u.fallback,g?(Ka(),g=i.mode,I=yd({mode:"hidden",children:I},g),u=$o(u,g,o,null),I.return=i,u.return=i,I.sibling=u,i.child=I,u=i.child,u.memoizedState=kg(o),u.childLanes=Mg(s,w,o),i.memoizedState=Lg,du(null,u)):(Ga(i),Pg(i,I))}var z=s.memoizedState;if(z!==null&&(I=z.dehydrated,I!==null)){if(y)i.flags&256?(Ga(i),i.flags&=-257,i=Ug(s,i,o)):i.memoizedState!==null?(Ka(),i.child=s.child,i.flags|=128,i=null):(Ka(),I=u.fallback,g=i.mode,u=yd({mode:"visible",children:u.children},g),I=$o(I,g,o,null),I.flags|=2,u.return=i,I.return=i,u.sibling=I,i.child=u,Zo(i,s.child,null,o),u=i.child,u.memoizedState=kg(o),u.childLanes=Mg(s,w,o),i.memoizedState=Lg,i=du(null,u));else if(Ga(i),vp(I)){if(w=I.nextSibling&&I.nextSibling.dataset,w)var J=w.dgst;w=J,u=Error(r(419)),u.stack="",u.digest=w,eu({value:u,source:null,stack:null}),i=Ug(s,i,o)}else if(bn||ql(s,i,o,!1),w=(o&s.childLanes)!==0,bn||w){if(w=It,w!==null&&(u=Gi(w,o),u!==0&&u!==z.retryLane))throw z.retryLane=u,Fo(s,u),Ur(w,s,u),Og;yp(I)||Sd(),i=Ug(s,i,o)}else yp(I)?(i.flags|=192,i.child=s.child,i=null):(s=z.treeContext,Vt=Ns(I.nextSibling),Fn=i,ht=!0,qa=null,As=!1,s!==null&&Jv(i,s),i=Pg(i,u.children),i.flags|=4096);return i}return g?(Ka(),I=u.fallback,g=i.mode,z=s.child,J=z.sibling,u=ea(z,{mode:"hidden",children:u.children}),u.subtreeFlags=z.subtreeFlags&65011712,J!==null?I=ea(J,I):(I=$o(I,g,o,null),I.flags|=2),I.return=i,u.return=i,u.sibling=I,i.child=u,du(null,u),u=i.child,I=s.child.memoizedState,I===null?I=kg(o):(g=I.cachePool,g!==null?(z=yn._currentValue,g=g.parent!==z?{parent:z,pool:z}:g):g=ib(),I={baseLanes:I.baseLanes|o,cachePool:g}),u.memoizedState=I,u.childLanes=Mg(s,w,o),i.memoizedState=Lg,du(s.child,u)):(Ga(i),o=s.child,s=o.sibling,o=ea(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,s!==null&&(w=i.deletions,w===null?(i.deletions=[s],i.flags|=16):w.push(s)),i.child=o,i.memoizedState=null,o)}function Pg(s,i){return i=yd({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function yd(s,i){return s=Jr(22,s,null,i),s.lanes=0,s}function Ug(s,i,o){return Zo(i,s.child,null,o),s=Pg(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function b1(s,i,o){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),Jm(s.return,i,o)}function Vg(s,i,o,u,g,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g,treeForkCount:y}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=o,w.tailMode=g,w.treeForkCount=y)}function _1(s,i,o){var u=i.pendingProps,g=u.revealOrder,y=u.tail;u=u.children;var w=dn.current,I=(w&2)!==0;if(I?(w=w&1|2,i.flags|=128):w&=1,de(dn,w),Gn(s,i,u,o),u=ht?Jc:0,!I&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&b1(s,o,i);else if(s.tag===19)b1(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(o=i.child,g=null;o!==null;)s=o.alternate,s!==null&&id(s)===null&&(g=o),o=o.sibling;o=g,o===null?(g=i.child,i.child=null):(g=o.sibling,o.sibling=null),Vg(i,!1,g,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&id(s)===null){i.child=g;break}s=g.sibling,g.sibling=o,o=g,g=s}Vg(i,!0,o,null,y,u);break;case"together":Vg(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function aa(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),Xa|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(ql(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,o=ea(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=ea(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function qg(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&Wh(s)))}function b2(s,i,o){switch(i.tag){case 3:je(i,i.stateNode.containerInfo),za(i,yn,s.memoizedState.cache),Go();break;case 27:case 5:Xe(i);break;case 4:je(i,i.stateNode.containerInfo);break;case 10:za(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,hg(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ga(i),i.flags|=128,null):(o&i.child.childLanes)!==0?v1(s,i,o):(Ga(i),s=aa(s,i,o),s!==null?s.sibling:null);Ga(i);break;case 19:var g=(s.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(ql(s,i,o,!1),u=(o&i.childLanes)!==0),g){if(u)return _1(s,i,o);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),de(dn,dn.current),u)break;return null;case 22:return i.lanes=0,d1(s,i,o,i.pendingProps);case 24:za(i,yn,s.memoizedState.cache)}return aa(s,i,o)}function x1(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)bn=!0;else{if(!qg(s,o)&&(i.flags&128)===0)return bn=!1,b2(s,i,o);bn=(s.flags&131072)!==0}else bn=!1,ht&&(i.flags&1048576)!==0&&Zv(i,Jc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(s=Xo(i.elementType),i.type=s,typeof s=="function")$m(s)?(u=el(s,u),i.tag=1,i=p1(null,i,s,u,o)):(i.tag=0,i=Dg(null,i,s,u,o));else{if(s!=null){var g=s.$$typeof;if(g===Q){i.tag=11,i=c1(null,i,s,u,o);break e}else if(g===L){i.tag=14,i=u1(null,i,s,u,o);break e}}throw i=pe(s)||s,Error(r(306,i,""))}}return i;case 0:return Dg(s,i,i.type,i.pendingProps,o);case 1:return u=i.type,g=el(u,i.pendingProps),p1(s,i,u,g,o);case 3:e:{if(je(i,i.stateNode.containerInfo),s===null)throw Error(r(387));u=i.pendingProps;var y=i.memoizedState;g=y.element,ag(s,i),ou(i,u,null,o);var w=i.memoizedState;if(u=w.cache,za(i,yn,u),u!==y.cache&&eg(i,[yn],o,!0),au(),u=w.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=y1(s,i,u,o);break e}else if(u!==g){g=Es(Error(r(424)),i),eu(g),i=y1(s,i,u,o);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Vt=Ns(s.firstChild),Fn=i,ht=!0,qa=null,As=!0,o=hb(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Go(),u===g){i=aa(s,i,o);break e}Gn(s,i,u,o)}i=i.child}return i;case 26:return pd(s,i),s===null?(o=O_(i.type,null,i.pendingProps,null))?i.memoizedState=o:ht||(o=i.type,s=i.pendingProps,u=Dd(Ae.current).createElement(o),u[Ft]=i,u[rn]=s,Kn(u,o,s),$t(u),i.stateNode=u):i.memoizedState=O_(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return Xe(i),s===null&&ht&&(u=i.stateNode=R_(i.type,i.pendingProps,Ae.current),Fn=i,As=!0,g=Vt,to(i.type)?(bp=g,Vt=Ns(u.firstChild)):Vt=g),Gn(s,i,i.pendingProps.children,o),pd(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&ht&&((g=u=Vt)&&(u=Q2(u,i.type,i.pendingProps,As),u!==null?(i.stateNode=u,Fn=i,Vt=Ns(u.firstChild),As=!1,g=!0):g=!1),g||Ba(i)),Xe(i),g=i.type,y=i.pendingProps,w=s!==null?s.memoizedProps:null,u=y.children,mp(g,y)?u=null:w!==null&&mp(g,w)&&(i.flags|=32),i.memoizedState!==null&&(g=fg(s,i,u2,null,null,o),Nu._currentValue=g),pd(s,i),Gn(s,i,u,o),i.child;case 6:return s===null&&ht&&((s=o=Vt)&&(o=X2(o,i.pendingProps,As),o!==null?(i.stateNode=o,Fn=i,Vt=null,s=!0):s=!1),s||Ba(i)),null;case 13:return v1(s,i,o);case 4:return je(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=Zo(i,null,u,o):Gn(s,i,u,o),i.child;case 11:return c1(s,i,i.type,i.pendingProps,o);case 7:return Gn(s,i,i.pendingProps,o),i.child;case 8:return Gn(s,i,i.pendingProps.children,o),i.child;case 12:return Gn(s,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,za(i,i.type,u.value),Gn(s,i,u.children,o),i.child;case 9:return g=i.type._context,u=i.pendingProps.children,Yo(i),g=$n(g),u=u(g),i.flags|=1,Gn(s,i,u,o),i.child;case 14:return u1(s,i,i.type,i.pendingProps,o);case 15:return h1(s,i,i.type,i.pendingProps,o);case 19:return _1(s,i,o);case 31:return v2(s,i,o);case 22:return d1(s,i,o,i.pendingProps);case 24:return Yo(i),u=$n(yn),s===null?(g=rg(),g===null&&(g=It,y=tg(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=o),g=y),i.memoizedState={parent:u,cache:g},ig(i),za(i,yn,g)):((s.lanes&o)!==0&&(ag(s,i),ou(i,null,null,o),au()),g=s.memoizedState,y=i.memoizedState,g.parent!==u?(g={parent:u,cache:u},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),za(i,yn,u)):(u=y.cache,za(i,yn,u),u!==g.cache&&eg(i,[yn],o,!0))),Gn(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function oa(s){s.flags|=4}function Bg(s,i,o,u,g){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(Y1())s.flags|=8192;else throw Wo=td,sg}else s.flags&=-16777217}function E1(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!P_(i))if(Y1())s.flags|=8192;else throw Wo=td,sg}function vd(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?ci():536870912,s.lanes|=i,Zl|=i)}function fu(s,i){if(!ht)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function qt(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(i)for(var g=s.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=u,s.childLanes=o,i}function _2(s,i,o){var u=i.pendingProps;switch(Qm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(i),null;case 1:return qt(i),null;case 3:return o=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ra(yn),ke(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(Vl(i)?oa(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Wm())),qt(i),null;case 26:var g=i.type,y=i.memoizedState;return s===null?(oa(i),y!==null?(qt(i),E1(i,y)):(qt(i),Bg(i,g,null,u,o))):y?y!==s.memoizedState?(oa(i),qt(i),E1(i,y)):(qt(i),i.flags&=-16777217):(s=s.memoizedProps,s!==u&&oa(i),qt(i),Bg(i,g,s,u,o)),null;case 27:if(et(i),o=Ae.current,g=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&oa(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return qt(i),null}s=me.current,Vl(i)?eb(i):(s=R_(g,u,o),i.stateNode=s,oa(i))}return qt(i),null;case 5:if(et(i),g=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&oa(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return qt(i),null}if(y=me.current,Vl(i))eb(i);else{var w=Dd(Ae.current);switch(y){case 1:y=w.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=w.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=w.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=w.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=w.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?w.createElement(g,{is:u.is}):w.createElement(g)}}y[Ft]=i,y[rn]=u;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)y.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=y;e:switch(Kn(y,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&oa(i)}}return qt(i),Bg(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,o),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&oa(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=Ae.current,Vl(i)){if(s=i.stateNode,o=i.memoizedProps,u=null,g=Fn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}s[Ft]=i,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||v_(s.nodeValue,o)),s||Ba(i,!0)}else s=Dd(s).createTextNode(u),s[Ft]=i,i.stateNode=s}return qt(i),null;case 31:if(o=i.memoizedState,s===null||s.memoizedState!==null){if(u=Vl(i),o!==null){if(s===null){if(!u)throw Error(r(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Ft]=i}else Go(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),s=!1}else o=Wm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return i.flags&256?(ts(i),i):(ts(i),null);if((i.flags&128)!==0)throw Error(r(558))}return qt(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Vl(i),u!==null&&u.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Ft]=i}else Go(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),g=!1}else g=Wm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(ts(i),i):(ts(i),null)}return ts(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,s=s!==null&&s.memoizedState!==null,o&&(u=i.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)),o!==s&&o&&(i.child.flags|=8192),vd(i,i.updateQueue),qt(i),null);case 4:return ke(),s===null&&cp(i.stateNode.containerInfo),qt(i),null;case 10:return ra(i.type),qt(i),null;case 19:if(W(dn),u=i.memoizedState,u===null)return qt(i),null;if(g=(i.flags&128)!==0,y=u.rendering,y===null)if(g)fu(u,!1);else{if(on!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(y=id(s),y!==null){for(i.flags|=128,fu(u,!1),s=y.updateQueue,i.updateQueue=s,vd(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)Qv(o,s),o=o.sibling;return de(dn,dn.current&1|2),ht&&ta(i,u.treeForkCount),i.child}s=s.sibling}u.tail!==null&&Ot()>wd&&(i.flags|=128,g=!0,fu(u,!1),i.lanes=4194304)}else{if(!g)if(s=id(y),s!==null){if(i.flags|=128,g=!0,s=s.updateQueue,i.updateQueue=s,vd(i,s),fu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!ht)return qt(i),null}else 2*Ot()-u.renderingStartTime>wd&&o!==536870912&&(i.flags|=128,g=!0,fu(u,!1),i.lanes=4194304);u.isBackwards?(y.sibling=i.child,i.child=y):(s=u.last,s!==null?s.sibling=y:i.child=y,u.last=y)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=Ot(),s.sibling=null,o=dn.current,de(dn,g?o&1|2:o&1),ht&&ta(i,u.treeForkCount),s):(qt(i),null);case 22:case 23:return ts(i),ug(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(qt(i),i.subtreeFlags&6&&(i.flags|=8192)):qt(i),o=i.updateQueue,o!==null&&vd(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),s!==null&&W(Qo),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ra(yn),qt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function x2(s,i){switch(Qm(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return ra(yn),ke(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return et(i),null;case 31:if(i.memoizedState!==null){if(ts(i),i.alternate===null)throw Error(r(340));Go()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(ts(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Go()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return W(dn),null;case 4:return ke(),null;case 10:return ra(i.type),null;case 22:case 23:return ts(i),ug(),s!==null&&W(Qo),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return ra(yn),null;case 25:return null;default:return null}}function w1(s,i){switch(Qm(i),i.tag){case 3:ra(yn),ke();break;case 26:case 27:case 5:et(i);break;case 4:ke();break;case 31:i.memoizedState!==null&&ts(i);break;case 13:ts(i);break;case 19:W(dn);break;case 10:ra(i.type);break;case 22:case 23:ts(i),ug(),s!==null&&W(Qo);break;case 24:ra(yn)}}function mu(s,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&s)===s){u=void 0;var y=o.create,w=o.inst;u=y(),w.destroy=u}o=o.next}while(o!==g)}}catch(I){Tt(i,i.return,I)}}function Ya(s,i,o){try{var u=i.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&s)===s){var w=u.inst,I=w.destroy;if(I!==void 0){w.destroy=void 0,g=i;var z=o,J=I;try{J()}catch(ae){Tt(g,z,ae)}}}u=u.next}while(u!==y)}}catch(ae){Tt(i,i.return,ae)}}function T1(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{mb(i,o)}catch(u){Tt(s,s.return,u)}}}function A1(s,i,o){o.props=el(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){Tt(s,i,u)}}function gu(s,i){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(g){Tt(s,i,g)}}function _i(s,i){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){Tt(s,i,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){Tt(s,i,g)}else o.current=null}function S1(s){var i=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){Tt(s,s.return,g)}}function zg(s,i,o){try{var u=s.stateNode;H2(u,s.type,o,i),u[rn]=i}catch(g){Tt(s,s.return,g)}}function N1(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&to(s.type)||s.tag===4}function Hg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||N1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&to(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Fg(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(s),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=rr));else if(u!==4&&(u===27&&to(s.type)&&(o=s.stateNode,i=null),s=s.child,s!==null))for(Fg(s,i,o),s=s.sibling;s!==null;)Fg(s,i,o),s=s.sibling}function bd(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(u!==4&&(u===27&&to(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(bd(s,i,o),s=s.sibling;s!==null;)bd(s,i,o),s=s.sibling}function C1(s){var i=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);Kn(i,u,o),i[Ft]=s,i[rn]=o}catch(y){Tt(s,s.return,y)}}var la=!1,_n=!1,$g=!1,R1=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function E2(s,i){if(s=s.containerInfo,dp=qd,s=qv(s),Um(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var w=0,I=-1,z=-1,J=0,ae=0,he=s,te=null;t:for(;;){for(var se;he!==o||g!==0&&he.nodeType!==3||(I=w+g),he!==y||u!==0&&he.nodeType!==3||(z=w+u),he.nodeType===3&&(w+=he.nodeValue.length),(se=he.firstChild)!==null;)te=he,he=se;for(;;){if(he===s)break t;if(te===o&&++J===g&&(I=w),te===y&&++ae===u&&(z=w),(se=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=se}o=I===-1||z===-1?null:{start:I,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(fp={focusedElem:s,selectionRange:o},qd=!1,Dn=i;Dn!==null;)if(i=Dn,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Dn=s;else for(;Dn!==null;){switch(i=Dn,y=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)g=s[o],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,o=i,g=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var Ne=el(o.type,g);s=u.getSnapshotBeforeUpdate(Ne,y),u.__reactInternalSnapshotBeforeUpdate=s}catch(Ve){Tt(o,o.return,Ve)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)pp(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":pp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Dn=s;break}Dn=i.return}}function I1(s,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ua(s,o),u&4&&mu(5,o);break;case 1:if(ua(s,o),u&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(w){Tt(o,o.return,w)}else{var g=el(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(g,i,s.__reactInternalSnapshotBeforeUpdate)}catch(w){Tt(o,o.return,w)}}u&64&&T1(o),u&512&&gu(o,o.return);break;case 3:if(ua(s,o),u&64&&(s=o.updateQueue,s!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{mb(s,i)}catch(w){Tt(o,o.return,w)}}break;case 27:i===null&&u&4&&C1(o);case 26:case 5:ua(s,o),i===null&&u&4&&S1(o),u&512&&gu(o,o.return);break;case 12:ua(s,o);break;case 31:ua(s,o),u&4&&D1(s,o);break;case 13:ua(s,o),u&4&&L1(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=j2.bind(null,o),W2(s,o))));break;case 22:if(u=o.memoizedState!==null||la,!u){i=i!==null&&i.memoizedState!==null||_n,g=la;var y=_n;la=u,(_n=i)&&!y?ha(s,o,(o.subtreeFlags&8772)!==0):ua(s,o),la=g,_n=y}break;case 30:break;default:ua(s,o)}}function j1(s){var i=s.alternate;i!==null&&(s.alternate=null,j1(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&ui(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Xt=null,Lr=!1;function ca(s,i,o){for(o=o.child;o!==null;)O1(s,i,o),o=o.sibling}function O1(s,i,o){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(mr,o)}catch{}switch(o.tag){case 26:_n||_i(o,i),ca(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:_n||_i(o,i);var u=Xt,g=Lr;to(o.type)&&(Xt=o.stateNode,Lr=!1),ca(s,i,o),Tu(o.stateNode),Xt=u,Lr=g;break;case 5:_n||_i(o,i);case 6:if(u=Xt,g=Lr,Xt=null,ca(s,i,o),Xt=u,Lr=g,Xt!==null)if(Lr)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(o.stateNode)}catch(y){Tt(o,i,y)}else try{Xt.removeChild(o.stateNode)}catch(y){Tt(o,i,y)}break;case 18:Xt!==null&&(Lr?(s=Xt,T_(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),ac(s)):T_(Xt,o.stateNode));break;case 4:u=Xt,g=Lr,Xt=o.stateNode.containerInfo,Lr=!0,ca(s,i,o),Xt=u,Lr=g;break;case 0:case 11:case 14:case 15:Ya(2,o,i),_n||Ya(4,o,i),ca(s,i,o);break;case 1:_n||(_i(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&A1(o,i,u)),ca(s,i,o);break;case 21:ca(s,i,o);break;case 22:_n=(u=_n)||o.memoizedState!==null,ca(s,i,o),_n=u;break;default:ca(s,i,o)}}function D1(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ac(s)}catch(o){Tt(i,i.return,o)}}}function L1(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ac(s)}catch(o){Tt(i,i.return,o)}}function w2(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new R1),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new R1),i;default:throw Error(r(435,s.tag))}}function _d(s,i){var o=w2(s);i.forEach(function(u){if(!o.has(u)){o.add(u);var g=O2.bind(null,s,u);u.then(g,g)}})}function kr(s,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],y=s,w=i,I=w;e:for(;I!==null;){switch(I.tag){case 27:if(to(I.type)){Xt=I.stateNode,Lr=!1;break e}break;case 5:Xt=I.stateNode,Lr=!1;break e;case 3:case 4:Xt=I.stateNode.containerInfo,Lr=!0;break e}I=I.return}if(Xt===null)throw Error(r(160));O1(y,w,g),Xt=null,Lr=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)k1(i,s),i=i.sibling}var Ys=null;function k1(s,i){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:kr(i,s),Mr(s),u&4&&(Ya(3,s,s.return),mu(3,s),Ya(5,s,s.return));break;case 1:kr(i,s),Mr(s),u&512&&(_n||o===null||_i(o,o.return)),u&64&&la&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=Ys;if(kr(i,s),Mr(s),u&512&&(_n||o===null||_i(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Rr]||y[Ft]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),Kn(y,u,o),y[Ft]=s,$t(y),u=y;break e;case"link":var w=k_("link","href",g).get(u+(o.href||""));if(w){for(var I=0;I<w.length;I++)if(y=w[I],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(I,1);break t}}y=g.createElement(u),Kn(y,u,o),g.head.appendChild(y);break;case"meta":if(w=k_("meta","content",g).get(u+(o.content||""))){for(I=0;I<w.length;I++)if(y=w[I],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(I,1);break t}}y=g.createElement(u),Kn(y,u,o),g.head.appendChild(y);break;default:throw Error(r(468,u))}y[Ft]=s,$t(y),u=y}s.stateNode=u}else M_(g,s.type,s.stateNode);else s.stateNode=L_(g,u,s.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?M_(g,s.type,s.stateNode):L_(g,u,s.memoizedProps)):u===null&&s.stateNode!==null&&zg(s,s.memoizedProps,o.memoizedProps)}break;case 27:kr(i,s),Mr(s),u&512&&(_n||o===null||_i(o,o.return)),o!==null&&u&4&&zg(s,s.memoizedProps,o.memoizedProps);break;case 5:if(kr(i,s),Mr(s),u&512&&(_n||o===null||_i(o,o.return)),s.flags&32){g=s.stateNode;try{Kt(g,"")}catch(Ne){Tt(s,s.return,Ne)}}u&4&&s.stateNode!=null&&(g=s.memoizedProps,zg(s,g,o!==null?o.memoizedProps:g)),u&1024&&($g=!0);break;case 6:if(kr(i,s),Mr(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(Ne){Tt(s,s.return,Ne)}}break;case 3:if(Md=null,g=Ys,Ys=Ld(i.containerInfo),kr(i,s),Ys=g,Mr(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ac(i.containerInfo)}catch(Ne){Tt(s,s.return,Ne)}$g&&($g=!1,M1(s));break;case 4:u=Ys,Ys=Ld(s.stateNode.containerInfo),kr(i,s),Mr(s),Ys=u;break;case 12:kr(i,s),Mr(s);break;case 31:kr(i,s),Mr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,_d(s,u)));break;case 13:kr(i,s),Mr(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ed=Ot()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,_d(s,u)));break;case 22:g=s.memoizedState!==null;var z=o!==null&&o.memoizedState!==null,J=la,ae=_n;if(la=J||g,_n=ae||z,kr(i,s),_n=ae,la=J,Mr(s),u&8192)e:for(i=s.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(o===null||z||la||_n||tl(s)),o=null,i=s;;){if(i.tag===5||i.tag===26){if(o===null){z=o=i;try{if(y=z.stateNode,g)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{I=z.stateNode;var he=z.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;I.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ne){Tt(z,z.return,Ne)}}}else if(i.tag===6){if(o===null){z=i;try{z.stateNode.nodeValue=g?"":z.memoizedProps}catch(Ne){Tt(z,z.return,Ne)}}}else if(i.tag===18){if(o===null){z=i;try{var se=z.stateNode;g?A_(se,!0):A_(z.stateNode,!1)}catch(Ne){Tt(z,z.return,Ne)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,_d(s,o))));break;case 19:kr(i,s),Mr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,_d(s,u)));break;case 30:break;case 21:break;default:kr(i,s),Mr(s)}}function Mr(s){var i=s.flags;if(i&2){try{for(var o,u=s.return;u!==null;){if(N1(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var g=o.stateNode,y=Hg(s);bd(s,y,g);break;case 5:var w=o.stateNode;o.flags&32&&(Kt(w,""),o.flags&=-33);var I=Hg(s);bd(s,I,w);break;case 3:case 4:var z=o.stateNode.containerInfo,J=Hg(s);Fg(s,J,z);break;default:throw Error(r(161))}}catch(ae){Tt(s,s.return,ae)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function M1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;M1(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function ua(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)I1(s,i.alternate,i),i=i.sibling}function tl(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Ya(4,i,i.return),tl(i);break;case 1:_i(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&A1(i,i.return,o),tl(i);break;case 27:Tu(i.stateNode);case 26:case 5:_i(i,i.return),tl(i);break;case 22:i.memoizedState===null&&tl(i);break;case 30:tl(i);break;default:tl(i)}s=s.sibling}}function ha(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,g=s,y=i,w=y.flags;switch(y.tag){case 0:case 11:case 15:ha(g,y,o),mu(4,y);break;case 1:if(ha(g,y,o),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(J){Tt(u,u.return,J)}if(u=y,g=u.updateQueue,g!==null){var I=u.stateNode;try{var z=g.shared.hiddenCallbacks;if(z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<z.length;g++)fb(z[g],I)}catch(J){Tt(u,u.return,J)}}o&&w&64&&T1(y),gu(y,y.return);break;case 27:C1(y);case 26:case 5:ha(g,y,o),o&&u===null&&w&4&&S1(y),gu(y,y.return);break;case 12:ha(g,y,o);break;case 31:ha(g,y,o),o&&w&4&&D1(g,y);break;case 13:ha(g,y,o),o&&w&4&&L1(g,y);break;case 22:y.memoizedState===null&&ha(g,y,o),gu(y,y.return);break;case 30:break;default:ha(g,y,o)}i=i.sibling}}function Gg(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&tu(o))}function Kg(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&tu(s))}function Qs(s,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)P1(s,i,o,u),i=i.sibling}function P1(s,i,o,u){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Qs(s,i,o,u),g&2048&&mu(9,i);break;case 1:Qs(s,i,o,u);break;case 3:Qs(s,i,o,u),g&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&tu(s)));break;case 12:if(g&2048){Qs(s,i,o,u),s=i.stateNode;try{var y=i.memoizedProps,w=y.id,I=y.onPostCommit;typeof I=="function"&&I(w,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(z){Tt(i,i.return,z)}}else Qs(s,i,o,u);break;case 31:Qs(s,i,o,u);break;case 13:Qs(s,i,o,u);break;case 23:break;case 22:y=i.stateNode,w=i.alternate,i.memoizedState!==null?y._visibility&2?Qs(s,i,o,u):pu(s,i):y._visibility&2?Qs(s,i,o,u):(y._visibility|=2,Ql(s,i,o,u,(i.subtreeFlags&10256)!==0||!1)),g&2048&&Gg(w,i);break;case 24:Qs(s,i,o,u),g&2048&&Kg(i.alternate,i);break;default:Qs(s,i,o,u)}}function Ql(s,i,o,u,g){for(g=g&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=s,w=i,I=o,z=u,J=w.flags;switch(w.tag){case 0:case 11:case 15:Ql(y,w,I,z,g),mu(8,w);break;case 23:break;case 22:var ae=w.stateNode;w.memoizedState!==null?ae._visibility&2?Ql(y,w,I,z,g):pu(y,w):(ae._visibility|=2,Ql(y,w,I,z,g)),g&&J&2048&&Gg(w.alternate,w);break;case 24:Ql(y,w,I,z,g),g&&J&2048&&Kg(w.alternate,w);break;default:Ql(y,w,I,z,g)}i=i.sibling}}function pu(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,u=i,g=u.flags;switch(u.tag){case 22:pu(o,u),g&2048&&Gg(u.alternate,u);break;case 24:pu(o,u),g&2048&&Kg(u.alternate,u);break;default:pu(o,u)}i=i.sibling}}var yu=8192;function Xl(s,i,o){if(s.subtreeFlags&yu)for(s=s.child;s!==null;)U1(s,i,o),s=s.sibling}function U1(s,i,o){switch(s.tag){case 26:Xl(s,i,o),s.flags&yu&&s.memoizedState!==null&&cC(o,Ys,s.memoizedState,s.memoizedProps);break;case 5:Xl(s,i,o);break;case 3:case 4:var u=Ys;Ys=Ld(s.stateNode.containerInfo),Xl(s,i,o),Ys=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=yu,yu=16777216,Xl(s,i,o),yu=u):Xl(s,i,o));break;default:Xl(s,i,o)}}function V1(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function vu(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Dn=u,B1(u,s)}V1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)q1(s),s=s.sibling}function q1(s){switch(s.tag){case 0:case 11:case 15:vu(s),s.flags&2048&&Ya(9,s,s.return);break;case 3:vu(s);break;case 12:vu(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,xd(s)):vu(s);break;default:vu(s)}}function xd(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Dn=u,B1(u,s)}V1(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Ya(8,i,i.return),xd(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,xd(i));break;default:xd(i)}s=s.sibling}}function B1(s,i){for(;Dn!==null;){var o=Dn;switch(o.tag){case 0:case 11:case 15:Ya(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:tu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Dn=u;else e:for(o=s;Dn!==null;){u=Dn;var g=u.sibling,y=u.return;if(j1(u),u===o){Dn=null;break e}if(g!==null){g.return=y,Dn=g;break e}Dn=y}}}var T2={getCacheForType:function(s){var i=$n(yn),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o},cacheSignal:function(){return $n(yn).controller.signal}},A2=typeof WeakMap=="function"?WeakMap:Map,bt=0,It=null,nt=null,it=0,wt=0,ns=null,Qa=!1,Wl=!1,Yg=!1,da=0,on=0,Xa=0,nl=0,Qg=0,rs=0,Zl=0,bu=null,Pr=null,Xg=!1,Ed=0,z1=0,wd=1/0,Td=null,Wa=null,Cn=0,Za=null,Jl=null,fa=0,Wg=0,Zg=null,H1=null,_u=0,Jg=null;function ss(){return(bt&2)!==0&&it!==0?it&-it:H.T!==null?ip():nn()}function F1(){if(rs===0)if((it&536870912)===0||ht){var s=Fr;Fr<<=1,(Fr&3932160)===0&&(Fr=262144),rs=s}else rs=536870912;return s=es.current,s!==null&&(s.flags|=32),rs}function Ur(s,i,o){(s===It&&(wt===2||wt===9)||s.cancelPendingCommit!==null)&&(ec(s,0),Ja(s,it,rs,!1)),hs(s,o),((bt&2)===0||s!==It)&&(s===It&&((bt&2)===0&&(nl|=o),on===4&&Ja(s,it,rs,!1)),xi(s))}function $1(s,i,o){if((bt&6)!==0)throw Error(r(327));var u=!o&&(i&127)===0&&(i&s.expiredLanes)===0||Pn(s,i),g=u?C2(s,i):tp(s,i,!0),y=u;do{if(g===0){Wl&&!u&&Ja(s,i,0,!1);break}else{if(o=s.current.alternate,y&&!S2(o)){g=tp(s,i,!1),y=!1;continue}if(g===2){if(y=i,s.errorRecoveryDisabledLanes&y)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var I=s;g=bu;var z=I.current.memoizedState.isDehydrated;if(z&&(ec(I,w).flags|=256),w=tp(I,w,!1),w!==2){if(Yg&&!z){I.errorRecoveryDisabledLanes|=y,nl|=y,g=4;break e}y=Pr,Pr=g,y!==null&&(Pr===null?Pr=y:Pr.push.apply(Pr,y))}g=w}if(y=!1,g!==2)continue}}if(g===1){ec(s,0),Ja(s,i,0,!0);break}e:{switch(u=s,y=g,y){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ja(u,i,rs,!Qa);break e;case 2:Pr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(g=Ed+300-Ot(),10<g)){if(Ja(u,i,rs,!Qa),In(u,0,!0)!==0)break e;fa=i,u.timeoutHandle=E_(G1.bind(null,u,o,Pr,Td,Xg,i,rs,nl,Zl,Qa,y,"Throttled",-0,0),g);break e}G1(u,o,Pr,Td,Xg,i,rs,nl,Zl,Qa,y,null,-0,0)}}break}while(!0);xi(s)}function G1(s,i,o,u,g,y,w,I,z,J,ae,he,te,se){if(s.timeoutHandle=-1,he=i.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rr},U1(i,y,he);var Ne=(y&62914560)===y?Ed-Ot():(y&4194048)===y?z1-Ot():0;if(Ne=uC(he,Ne),Ne!==null){fa=y,s.cancelPendingCommit=Ne(e_.bind(null,s,i,y,o,u,g,w,I,z,ae,he,null,te,se)),Ja(s,y,w,!J);return}}e_(s,i,y,o,u,g,w,I,z)}function S2(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],y=g.getSnapshot;g=g.value;try{if(!Zr(y(),g))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ja(s,i,o,u){i&=~Qg,i&=~nl,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var g=i;0<g;){var y=31-Dt(g),w=1<<y;u[y]=-1,g&=~w}o!==0&&Vs(s,o,i)}function Ad(){return(bt&6)===0?(xu(0),!1):!0}function ep(){if(nt!==null){if(wt===0)var s=nt.return;else s=nt,na=Ko=null,pg(s),Fl=null,ru=0,s=nt;for(;s!==null;)w1(s.alternate,s),s=s.return;nt=null}}function ec(s,i){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,G2(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),fa=0,ep(),It=s,nt=o=ea(s.current,null),it=i,wt=0,ns=null,Qa=!1,Wl=Pn(s,i),Yg=!1,Zl=rs=Qg=nl=Xa=on=0,Pr=bu=null,Xg=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var g=31-Dt(u),y=1<<g;i|=s[g],u&=~y}return da=i,Gh(),o}function K1(s,i){Ke=null,H.H=hu,i===Hl||i===ed?(i=lb(),wt=3):i===sg?(i=lb(),wt=4):wt=i===Og?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ns=i,nt===null&&(on=1,md(s,Es(i,s.current)))}function Y1(){var s=es.current;return s===null?!0:(it&4194048)===it?Ss===null:(it&62914560)===it||(it&536870912)!==0?s===Ss:!1}function Q1(){var s=H.H;return H.H=hu,s===null?hu:s}function X1(){var s=H.A;return H.A=T2,s}function Sd(){on=4,Qa||(it&4194048)!==it&&es.current!==null||(Wl=!0),(Xa&134217727)===0&&(nl&134217727)===0||It===null||Ja(It,it,rs,!1)}function tp(s,i,o){var u=bt;bt|=2;var g=Q1(),y=X1();(It!==s||it!==i)&&(Td=null,ec(s,i)),i=!1;var w=on;e:do try{if(wt!==0&&nt!==null){var I=nt,z=ns;switch(wt){case 8:ep(),w=6;break e;case 3:case 2:case 9:case 6:es.current===null&&(i=!0);var J=wt;if(wt=0,ns=null,tc(s,I,z,J),o&&Wl){w=0;break e}break;default:J=wt,wt=0,ns=null,tc(s,I,z,J)}}N2(),w=on;break}catch(ae){K1(s,ae)}while(!0);return i&&s.shellSuspendCounter++,na=Ko=null,bt=u,H.H=g,H.A=y,nt===null&&(It=null,it=0,Gh()),w}function N2(){for(;nt!==null;)W1(nt)}function C2(s,i){var o=bt;bt|=2;var u=Q1(),g=X1();It!==s||it!==i?(Td=null,wd=Ot()+500,ec(s,i)):Wl=Pn(s,i);e:do try{if(wt!==0&&nt!==null){i=nt;var y=ns;t:switch(wt){case 1:wt=0,ns=null,tc(s,i,y,1);break;case 2:case 9:if(ab(y)){wt=0,ns=null,Z1(i);break}i=function(){wt!==2&&wt!==9||It!==s||(wt=7),xi(s)},y.then(i,i);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:ab(y)?(wt=0,ns=null,Z1(i)):(wt=0,ns=null,tc(s,i,y,7));break;case 5:var w=null;switch(nt.tag){case 26:w=nt.memoizedState;case 5:case 27:var I=nt;if(w?P_(w):I.stateNode.complete){wt=0,ns=null;var z=I.sibling;if(z!==null)nt=z;else{var J=I.return;J!==null?(nt=J,Nd(J)):nt=null}break t}}wt=0,ns=null,tc(s,i,y,5);break;case 6:wt=0,ns=null,tc(s,i,y,6);break;case 8:ep(),on=6;break e;default:throw Error(r(462))}}R2();break}catch(ae){K1(s,ae)}while(!0);return na=Ko=null,H.H=u,H.A=g,bt=o,nt!==null?0:(It=null,it=0,Gh(),on)}function R2(){for(;nt!==null&&!Da();)W1(nt)}function W1(s){var i=x1(s.alternate,s,da);s.memoizedProps=s.pendingProps,i===null?Nd(s):nt=i}function Z1(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=g1(o,i,i.pendingProps,i.type,void 0,it);break;case 11:i=g1(o,i,i.pendingProps,i.type.render,i.ref,it);break;case 5:pg(i);default:w1(o,i),i=nt=Qv(i,da),i=x1(o,i,da)}s.memoizedProps=s.pendingProps,i===null?Nd(s):nt=i}function tc(s,i,o,u){na=Ko=null,pg(i),Fl=null,ru=0;var g=i.return;try{if(y2(s,g,i,o,it)){on=1,md(s,Es(o,s.current)),nt=null;return}}catch(y){if(g!==null)throw nt=g,y;on=1,md(s,Es(o,s.current)),nt=null;return}i.flags&32768?(ht||u===1?s=!0:Wl||(it&536870912)!==0?s=!1:(Qa=s=!0,(u===2||u===9||u===3||u===6)&&(u=es.current,u!==null&&u.tag===13&&(u.flags|=16384))),J1(i,s)):Nd(i)}function Nd(s){var i=s;do{if((i.flags&32768)!==0){J1(i,Qa);return}s=i.return;var o=_2(i.alternate,i,da);if(o!==null){nt=o;return}if(i=i.sibling,i!==null){nt=i;return}nt=i=s}while(i!==null);on===0&&(on=5)}function J1(s,i){do{var o=x2(s.alternate,s);if(o!==null){o.flags&=32767,nt=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){nt=s;return}nt=s=o}while(s!==null);on=6,nt=null}function e_(s,i,o,u,g,y,w,I,z){s.cancelPendingCommit=null;do Cd();while(Cn!==0);if((bt&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(y=i.lanes|i.childLanes,y|=Hm,$r(s,o,y,w,I,z),s===It&&(nt=It=null,it=0),Jl=i,Za=s,fa=o,Wg=y,Zg=g,H1=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,D2(fr,function(){return i_(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,g=ee.p,ee.p=2,w=bt,bt|=4;try{E2(s,i,o)}finally{bt=w,ee.p=g,H.T=u}}Cn=1,t_(),n_(),r_()}}function t_(){if(Cn===1){Cn=0;var s=Za,i=Jl,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null;var u=ee.p;ee.p=2;var g=bt;bt|=4;try{k1(i,s);var y=fp,w=qv(s.containerInfo),I=y.focusedElem,z=y.selectionRange;if(w!==I&&I&&I.ownerDocument&&Vv(I.ownerDocument.documentElement,I)){if(z!==null&&Um(I)){var J=z.start,ae=z.end;if(ae===void 0&&(ae=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(ae,I.value.length);else{var he=I.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var se=te.getSelection(),Ne=I.textContent.length,Ve=Math.min(z.start,Ne),Ct=z.end===void 0?Ve:Math.min(z.end,Ne);!se.extend&&Ve>Ct&&(w=Ct,Ct=Ve,Ve=w);var K=Uv(I,Ve),G=Uv(I,Ct);if(K&&G&&(se.rangeCount!==1||se.anchorNode!==K.node||se.anchorOffset!==K.offset||se.focusNode!==G.node||se.focusOffset!==G.offset)){var Z=he.createRange();Z.setStart(K.node,K.offset),se.removeAllRanges(),Ve>Ct?(se.addRange(Z),se.extend(G.node,G.offset)):(Z.setEnd(G.node,G.offset),se.addRange(Z))}}}}for(he=[],se=I;se=se.parentNode;)se.nodeType===1&&he.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<he.length;I++){var oe=he[I];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}qd=!!dp,fp=dp=null}finally{bt=g,ee.p=u,H.T=o}}s.current=i,Cn=2}}function n_(){if(Cn===2){Cn=0;var s=Za,i=Jl,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=H.T,H.T=null;var u=ee.p;ee.p=2;var g=bt;bt|=4;try{I1(s,i.alternate,i)}finally{bt=g,ee.p=u,H.T=o}}Cn=3}}function r_(){if(Cn===4||Cn===3){Cn=0,Vi();var s=Za,i=Jl,o=fa,u=H1;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Cn=5:(Cn=0,Jl=Za=null,s_(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Wa=null),gr(o),i=i.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(mr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=H.T,g=ee.p,ee.p=2,H.T=null;try{for(var y=s.onRecoverableError,w=0;w<u.length;w++){var I=u[w];y(I.value,{componentStack:I.stack})}}finally{H.T=i,ee.p=g}}(fa&3)!==0&&Cd(),xi(s),g=s.pendingLanes,(o&261930)!==0&&(g&42)!==0?s===Jg?_u++:(_u=0,Jg=s):_u=0,xu(0)}}function s_(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,tu(i)))}function Cd(){return t_(),n_(),r_(),i_()}function i_(){if(Cn!==5)return!1;var s=Za,i=Wg;Wg=0;var o=gr(fa),u=H.T,g=ee.p;try{ee.p=32>o?32:o,H.T=null,o=Zg,Zg=null;var y=Za,w=fa;if(Cn=0,Jl=Za=null,fa=0,(bt&6)!==0)throw Error(r(331));var I=bt;if(bt|=4,q1(y.current),P1(y,y.current,w,o),bt=I,xu(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(mr,y)}catch{}return!0}finally{ee.p=g,H.T=u,s_(s,i)}}function a_(s,i,o){i=Es(o,i),i=jg(s.stateNode,i,2),s=$a(s,i,2),s!==null&&(hs(s,2),xi(s))}function Tt(s,i,o){if(s.tag===3)a_(s,s,o);else for(;i!==null;){if(i.tag===3){a_(i,s,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Wa===null||!Wa.has(u))){s=Es(o,s),o=o1(2),u=$a(i,o,2),u!==null&&(l1(o,u,i,s),hs(u,2),xi(u));break}}i=i.return}}function np(s,i,o){var u=s.pingCache;if(u===null){u=s.pingCache=new A2;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(o)||(Yg=!0,g.add(o),s=I2.bind(null,s,i,o),i.then(s,s))}function I2(s,i,o){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,It===s&&(it&o)===o&&(on===4||on===3&&(it&62914560)===it&&300>Ot()-Ed?(bt&2)===0&&ec(s,0):Qg|=o,Zl===it&&(Zl=0)),xi(s)}function o_(s,i){i===0&&(i=ci()),s=Fo(s,i),s!==null&&(hs(s,i),xi(s))}function j2(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),o_(s,o)}function O2(s,i){var o=0;switch(s.tag){case 31:case 13:var u=s.stateNode,g=s.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),o_(s,o)}function D2(s,i){return jt(s,i)}var Rd=null,nc=null,rp=!1,Id=!1,sp=!1,eo=0;function xi(s){s!==nc&&s.next===null&&(nc===null?Rd=nc=s:nc=nc.next=s),Id=!0,rp||(rp=!0,k2())}function xu(s,i){if(!sp&&Id){sp=!0;do for(var o=!1,u=Rd;u!==null;){if(s!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var w=u.suspendedLanes,I=u.pingedLanes;y=(1<<31-Dt(42|s)+1)-1,y&=g&~(w&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,h_(u,y))}else y=it,y=In(u,u===It?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Pn(u,y)||(o=!0,h_(u,y));u=u.next}while(o);sp=!1}}function L2(){l_()}function l_(){Id=rp=!1;var s=0;eo!==0&&$2()&&(s=eo);for(var i=Ot(),o=null,u=Rd;u!==null;){var g=u.next,y=c_(u,i);y===0?(u.next=null,o===null?Rd=g:o.next=g,g===null&&(nc=o)):(o=u,(s!==0||(y&3)!==0)&&(Id=!0)),u=g}Cn!==0&&Cn!==5||xu(s),eo!==0&&(eo=0)}function c_(s,i){for(var o=s.suspendedLanes,u=s.pingedLanes,g=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var w=31-Dt(y),I=1<<w,z=g[w];z===-1?((I&o)===0||(I&u)!==0)&&(g[w]=Fi(I,i)):z<=i&&(s.expiredLanes|=I),y&=~I}if(i=It,o=it,o=In(s,s===i?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===i&&(wt===2||wt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Ar(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Pn(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(u!==null&&Ar(u),gr(o)){case 2:case 8:o=Hr;break;case 32:o=fr;break;case 268435456:o=kn;break;default:o=fr}return u=u_.bind(null,s),o=jt(o,u),s.callbackPriority=i,s.callbackNode=o,i}return u!==null&&u!==null&&Ar(u),s.callbackPriority=2,s.callbackNode=null,2}function u_(s,i){if(Cn!==0&&Cn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Cd()&&s.callbackNode!==o)return null;var u=it;return u=In(s,s===It?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:($1(s,u,i),c_(s,Ot()),s.callbackNode!=null&&s.callbackNode===o?u_.bind(null,s):null)}function h_(s,i){if(Cd())return null;$1(s,i,!0)}function k2(){K2(function(){(bt&6)!==0?jt(qi,L2):l_()})}function ip(){if(eo===0){var s=Bl;s===0&&(s=Mn,Mn<<=1,(Mn&261888)===0&&(Mn=256)),eo=s}return eo}function d_(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:gi(""+s)}function f_(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function M2(s,i,o,u,g){if(i==="submit"&&o&&o.stateNode===g){var y=d_((g[rn]||null).action),w=u.submitter;w&&(i=(i=w[rn]||null)?d_(i.formAction):w.getAttribute("formAction"),i!==null&&(y=i,w=null));var I=new Se("action","action",null,u,g);s.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(eo!==0){var z=w?f_(g,w):new FormData(g);Ag(o,{pending:!0,data:z,method:g.method,action:y},null,z)}}else typeof y=="function"&&(I.preventDefault(),z=w?f_(g,w):new FormData(g),Ag(o,{pending:!0,data:z,method:g.method,action:y},y,z))},currentTarget:g}]})}}for(var ap=0;ap<zm.length;ap++){var op=zm[ap],P2=op.toLowerCase(),U2=op[0].toUpperCase()+op.slice(1);Ks(P2,"on"+U2)}Ks(Hv,"onAnimationEnd"),Ks(Fv,"onAnimationIteration"),Ks($v,"onAnimationStart"),Ks("dblclick","onDoubleClick"),Ks("focusin","onFocus"),Ks("focusout","onBlur"),Ks(e2,"onTransitionRun"),Ks(t2,"onTransitionStart"),Ks(n2,"onTransitionCancel"),Ks(Gv,"onTransitionEnd"),Vn("onMouseEnter",["mouseout","mouseover"]),Vn("onMouseLeave",["mouseout","mouseover"]),Vn("onPointerEnter",["pointerout","pointerover"]),Vn("onPointerLeave",["pointerout","pointerover"]),vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vr("onBeforeInput",["compositionend","keypress","textInput","paste"]),vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eu));function m_(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],g=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var w=u.length-1;0<=w;w--){var I=u[w],z=I.instance,J=I.currentTarget;if(I=I.listener,z!==y&&g.isPropagationStopped())break e;y=I,g.currentTarget=J;try{y(g)}catch(ae){$h(ae)}g.currentTarget=null,y=z}else for(w=0;w<u.length;w++){if(I=u[w],z=I.instance,J=I.currentTarget,I=I.listener,z!==y&&g.isPropagationStopped())break e;y=I,g.currentTarget=J;try{y(g)}catch(ae){$h(ae)}g.currentTarget=null,y=z}}}}function rt(s,i){var o=i[Jt];o===void 0&&(o=i[Jt]=new Set);var u=s+"__bubble";o.has(u)||(g_(i,s,2,!1),o.add(u))}function lp(s,i,o){var u=0;i&&(u|=4),g_(o,s,u,i)}var jd="_reactListening"+Math.random().toString(36).slice(2);function cp(s){if(!s[jd]){s[jd]=!0,Ki.forEach(function(o){o!=="selectionchange"&&(V2.has(o)||lp(o,!1,s),lp(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[jd]||(i[jd]=!0,lp("selectionchange",!1,i))}}function g_(s,i,o,u){switch(F_(i)){case 2:var g=fC;break;case 8:g=mC;break;default:g=Tp}o=g.bind(null,i,o,s),g=void 0,!bs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?s.addEventListener(i,o,{capture:!0,passive:g}):s.addEventListener(i,o,!0):g!==void 0?s.addEventListener(i,o,{passive:g}):s.addEventListener(i,o,!1)}function up(s,i,o,u,g){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var I=u.stateNode.containerInfo;if(I===g)break;if(w===4)for(w=u.return;w!==null;){var z=w.tag;if((z===3||z===4)&&w.stateNode.containerInfo===g)return;w=w.return}for(;I!==null;){if(w=Mt(I),w===null)return;if(z=w.tag,z===5||z===6||z===26||z===27){u=y=w;continue e}I=I.parentNode}}u=u.return}vs(function(){var J=y,ae=Bn(o),he=[];e:{var te=Kv.get(s);if(te!==void 0){var se=Se,Ne=s;switch(s){case"keypress":if(_(o)===0)break e;case"keydown":case"keyup":se=zh;break;case"focusin":Ne="focus",se=Hn;break;case"focusout":Ne="blur",se=Hn;break;case"beforeblur":case"afterblur":se=Hn;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Ut;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=b;break;case Hv:case Fv:case $v:se=qo;break;case Gv:se=D;break;case"scroll":case"scrollend":se=Ze;break;case"wheel":se=re;break;case"copy":case"cut":case"paste":se=Zi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Ji;break;case"toggle":case"beforetoggle":se=Ge}var Ve=(i&4)!==0,Ct=!Ve&&(s==="scroll"||s==="scrollend"),K=Ve?te!==null?te+"Capture":null:te;Ve=[];for(var G=J,Z;G!==null;){var oe=G;if(Z=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Z===null||K===null||(oe=sr(G,K),oe!=null&&Ve.push(wu(G,oe,Z))),Ct)break;G=G.return}0<Ve.length&&(te=new se(te,Ne,null,o,ae),he.push({event:te,listeners:Ve}))}}if((i&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",se=s==="mouseout"||s==="pointerout",te&&o!==cn&&(Ne=o.relatedTarget||o.fromElement)&&(Mt(Ne)||Ne[Cr]))break e;if((se||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,se?(Ne=o.relatedTarget||o.toElement,se=J,Ne=Ne?Mt(Ne):null,Ne!==null&&(Ct=l(Ne),Ve=Ne.tag,Ne!==Ct||Ve!==5&&Ve!==27&&Ve!==6)&&(Ne=null)):(se=null,Ne=J),se!==Ne)){if(Ve=Ut,oe="onMouseLeave",K="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Ve=Ji,oe="onPointerLeave",K="onPointerEnter",G="pointer"),Ct=se==null?te:Un(se),Z=Ne==null?te:Un(Ne),te=new Ve(oe,G+"leave",se,o,ae),te.target=Ct,te.relatedTarget=Z,oe=null,Mt(ae)===J&&(Ve=new Ve(K,G+"enter",Ne,o,ae),Ve.target=Z,Ve.relatedTarget=Ct,oe=Ve),Ct=oe,se&&Ne)t:{for(Ve=q2,K=se,G=Ne,Z=0,oe=K;oe;oe=Ve(oe))Z++;oe=0;for(var Me=G;Me;Me=Ve(Me))oe++;for(;0<Z-oe;)K=Ve(K),Z--;for(;0<oe-Z;)G=Ve(G),oe--;for(;Z--;){if(K===G||G!==null&&K===G.alternate){Ve=K;break t}K=Ve(K),G=Ve(G)}Ve=null}else Ve=null;se!==null&&p_(he,te,se,Ve,!1),Ne!==null&&Ct!==null&&p_(he,Ct,Ne,Ve,!0)}}e:{if(te=J?Un(J):window,se=te.nodeName&&te.nodeName.toLowerCase(),se==="select"||se==="input"&&te.type==="file")var gt=Ov;else if(Iv(te))if(Dv)gt=WN;else{gt=QN;var Re=YN}else se=te.nodeName,!se||se.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&mi(J.elementType)&&(gt=Ov):gt=XN;if(gt&&(gt=gt(s,J))){jv(he,gt,o,ae);break e}Re&&Re(s,te,J),s==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&Qi(te,"number",te.value)}switch(Re=J?Un(J):window,s){case"focusin":(Iv(Re)||Re.contentEditable==="true")&&(Dl=Re,Vm=J,Zc=null);break;case"focusout":Zc=Vm=Dl=null;break;case"mousedown":qm=!0;break;case"contextmenu":case"mouseup":case"dragend":qm=!1,Bv(he,o,ae);break;case"selectionchange":if(JN)break;case"keydown":case"keyup":Bv(he,o,ae)}var Qe;if(vt)e:{switch(s){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Ol?Bo(s,o)&&(at="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(at="onCompositionStart");at&&(yi&&o.locale!=="ko"&&(Ol||at!=="onCompositionStart"?at==="onCompositionEnd"&&Ol&&(Qe=Wi()):(br=ae,zs="value"in br?br.value:br.textContent,Ol=!0)),Re=Od(J,at),0<Re.length&&(at=new pi(at,s,null,o,ae),he.push({event:at,listeners:Re}),Qe?at.data=Qe:(Qe=jl(o),Qe!==null&&(at.data=Qe)))),(Qe=_s?FN(s,o):$N(s,o))&&(at=Od(J,"onBeforeInput"),0<at.length&&(Re=new pi("onBeforeInput","beforeinput",null,o,ae),he.push({event:Re,listeners:at}),Re.data=Qe)),M2(he,s,J,o,ae)}m_(he,i)})}function wu(s,i,o){return{instance:s,listener:i,currentTarget:o}}function Od(s,i){for(var o=i+"Capture",u=[];s!==null;){var g=s,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=sr(s,o),g!=null&&u.unshift(wu(s,g,y)),g=sr(s,i),g!=null&&u.push(wu(s,g,y))),s.tag===3)return u;s=s.return}return[]}function q2(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function p_(s,i,o,u,g){for(var y=i._reactName,w=[];o!==null&&o!==u;){var I=o,z=I.alternate,J=I.stateNode;if(I=I.tag,z!==null&&z===u)break;I!==5&&I!==26&&I!==27||J===null||(z=J,g?(J=sr(o,y),J!=null&&w.unshift(wu(o,J,z))):g||(J=sr(o,y),J!=null&&w.push(wu(o,J,z)))),o=o.return}w.length!==0&&s.push({event:i,listeners:w})}var B2=/\r\n?/g,z2=/\u0000|\uFFFD/g;function y_(s){return(typeof s=="string"?s:""+s).replace(B2,`
`).replace(z2,"")}function v_(s,i){return i=y_(i),y_(s)===i}function Nt(s,i,o,u,g,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Kt(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Kt(s,""+u);break;case"className":qn(s,"class",u);break;case"tabIndex":qn(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":qn(s,o,u);break;case"style":nr(s,u,y);break;case"data":if(i!=="object"){qn(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=gi(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&Nt(s,i,"name",g.name,g,null),Nt(s,i,"formEncType",g.formEncType,g,null),Nt(s,i,"formMethod",g.formMethod,g,null),Nt(s,i,"formTarget",g.formTarget,g,null)):(Nt(s,i,"encType",g.encType,g,null),Nt(s,i,"method",g.method,g,null),Nt(s,i,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=gi(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=rr);break;case"onScroll":u!=null&&rt("scroll",s);break;case"onScrollEnd":u!=null&&rt("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=gi(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":rt("beforetoggle",s),rt("toggle",s),hi(s,"popover",u);break;case"xlinkActuate":Gt(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Gt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Gt(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Gt(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Gt(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Gt(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":hi(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Pa.get(o)||o,hi(s,o,u))}}function hp(s,i,o,u,g,y){switch(o){case"style":nr(s,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof u=="string"?Kt(s,u):(typeof u=="number"||typeof u=="bigint")&&Kt(s,""+u);break;case"onScroll":u!=null&&rt("scroll",s);break;case"onScrollEnd":u!=null&&rt("scrollend",s);break;case"onClick":u!=null&&(s.onclick=rr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fs.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),i=o.slice(2,g?o.length-7:void 0),y=s[rn]||null,y=y!=null?y[o]:null,typeof y=="function"&&s.removeEventListener(i,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,u,g);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):hi(s,o,u)}}}function Kn(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",s),rt("load",s);var u=!1,g=!1,y;for(y in o)if(o.hasOwnProperty(y)){var w=o[y];if(w!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Nt(s,i,y,w,o,null)}}g&&Nt(s,i,"srcSet",o.srcSet,o,null),u&&Nt(s,i,"src",o.src,o,null);return;case"input":rt("invalid",s);var I=y=w=g=null,z=null,J=null;for(u in o)if(o.hasOwnProperty(u)){var ae=o[u];if(ae!=null)switch(u){case"name":g=ae;break;case"type":w=ae;break;case"checked":z=ae;break;case"defaultChecked":J=ae;break;case"value":y=ae;break;case"defaultValue":I=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,i));break;default:Nt(s,i,u,ae,o,null)}}fi(s,y,I,z,J,w,g,!1);return;case"select":rt("invalid",s),u=w=y=null;for(g in o)if(o.hasOwnProperty(g)&&(I=o[g],I!=null))switch(g){case"value":y=I;break;case"defaultValue":w=I;break;case"multiple":u=I;default:Nt(s,i,g,I,o,null)}i=y,o=w,s.multiple=!!u,i!=null?gs(s,!!u,i,!1):o!=null&&gs(s,!!u,o,!0);return;case"textarea":rt("invalid",s),y=g=u=null;for(w in o)if(o.hasOwnProperty(w)&&(I=o[w],I!=null))switch(w){case"value":u=I;break;case"defaultValue":g=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:Nt(s,i,w,I,o,null)}pn(s,u,g,y);return;case"option":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Nt(s,i,z,u,o,null)}return;case"dialog":rt("beforetoggle",s),rt("toggle",s),rt("cancel",s),rt("close",s);break;case"iframe":case"object":rt("load",s);break;case"video":case"audio":for(u=0;u<Eu.length;u++)rt(Eu[u],s);break;case"image":rt("error",s),rt("load",s);break;case"details":rt("toggle",s);break;case"embed":case"source":case"link":rt("error",s),rt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in o)if(o.hasOwnProperty(J)&&(u=o[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Nt(s,i,J,u,o,null)}return;default:if(mi(i)){for(ae in o)o.hasOwnProperty(ae)&&(u=o[ae],u!==void 0&&hp(s,i,ae,u,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(u=o[I],u!=null&&Nt(s,i,I,u,o,null))}function H2(s,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,w=null,I=null,z=null,J=null,ae=null;for(se in o){var he=o[se];if(o.hasOwnProperty(se)&&he!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":z=he;default:u.hasOwnProperty(se)||Nt(s,i,se,null,u,he)}}for(var te in u){var se=u[te];if(he=o[te],u.hasOwnProperty(te)&&(se!=null||he!=null))switch(te){case"type":y=se;break;case"name":g=se;break;case"checked":J=se;break;case"defaultChecked":ae=se;break;case"value":w=se;break;case"defaultValue":I=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,i));break;default:se!==he&&Nt(s,i,te,se,u,he)}}di(s,w,I,z,J,ae,y,g);return;case"select":se=w=I=te=null;for(y in o)if(z=o[y],o.hasOwnProperty(y)&&z!=null)switch(y){case"value":break;case"multiple":se=z;default:u.hasOwnProperty(y)||Nt(s,i,y,null,u,z)}for(g in u)if(y=u[g],z=o[g],u.hasOwnProperty(g)&&(y!=null||z!=null))switch(g){case"value":te=y;break;case"defaultValue":I=y;break;case"multiple":w=y;default:y!==z&&Nt(s,i,g,y,u,z)}i=I,o=w,u=se,te!=null?gs(s,!!o,te,!1):!!u!=!!o&&(i!=null?gs(s,!!o,i,!0):gs(s,!!o,o?[]:"",!1));return;case"textarea":se=te=null;for(I in o)if(g=o[I],o.hasOwnProperty(I)&&g!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Nt(s,i,I,null,u,g)}for(w in u)if(g=u[w],y=o[w],u.hasOwnProperty(w)&&(g!=null||y!=null))switch(w){case"value":te=g;break;case"defaultValue":se=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&Nt(s,i,w,g,u,y)}ps(s,te,se);return;case"option":for(var Ne in o)if(te=o[Ne],o.hasOwnProperty(Ne)&&te!=null&&!u.hasOwnProperty(Ne))switch(Ne){case"selected":s.selected=!1;break;default:Nt(s,i,Ne,null,u,te)}for(z in u)if(te=u[z],se=o[z],u.hasOwnProperty(z)&&te!==se&&(te!=null||se!=null))switch(z){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Nt(s,i,z,te,u,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in o)te=o[Ve],o.hasOwnProperty(Ve)&&te!=null&&!u.hasOwnProperty(Ve)&&Nt(s,i,Ve,null,u,te);for(J in u)if(te=u[J],se=o[J],u.hasOwnProperty(J)&&te!==se&&(te!=null||se!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,i));break;default:Nt(s,i,J,te,u,se)}return;default:if(mi(i)){for(var Ct in o)te=o[Ct],o.hasOwnProperty(Ct)&&te!==void 0&&!u.hasOwnProperty(Ct)&&hp(s,i,Ct,void 0,u,te);for(ae in u)te=u[ae],se=o[ae],!u.hasOwnProperty(ae)||te===se||te===void 0&&se===void 0||hp(s,i,ae,te,u,se);return}}for(var K in o)te=o[K],o.hasOwnProperty(K)&&te!=null&&!u.hasOwnProperty(K)&&Nt(s,i,K,null,u,te);for(he in u)te=u[he],se=o[he],!u.hasOwnProperty(he)||te===se||te==null&&se==null||Nt(s,i,he,te,u,se)}function b_(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function F2(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var g=o[u],y=g.transferSize,w=g.initiatorType,I=g.duration;if(y&&I&&b_(w)){for(w=0,I=g.responseEnd,u+=1;u<o.length;u++){var z=o[u],J=z.startTime;if(J>I)break;var ae=z.transferSize,he=z.initiatorType;ae&&b_(he)&&(z=z.responseEnd,w+=ae*(z<I?1:(I-J)/(z-J)))}if(--u,i+=8*(y+w)/(g.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var dp=null,fp=null;function Dd(s){return s.nodeType===9?s:s.ownerDocument}function __(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function x_(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function mp(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var gp=null;function $2(){var s=window.event;return s&&s.type==="popstate"?s===gp?!1:(gp=s,!0):(gp=null,!1)}var E_=typeof setTimeout=="function"?setTimeout:void 0,G2=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,K2=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(s){return w_.resolve(null).then(s).catch(Y2)}:E_;function Y2(s){setTimeout(function(){throw s})}function to(s){return s==="head"}function T_(s,i){var o=i,u=0;do{var g=o.nextSibling;if(s.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"||o==="/&"){if(u===0){s.removeChild(g),ac(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Tu(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,Tu(o);for(var y=o.firstChild;y;){var w=y.nextSibling,I=y.nodeName;y[Rr]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=w}}else o==="body"&&Tu(s.ownerDocument.body);o=g}while(o);ac(i)}function A_(s,i){var o=s;s=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=u}while(o)}function pp(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":pp(o),ui(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function Q2(s,i,o,u){for(;s.nodeType===1;){var g=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Rr])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Ns(s.nextSibling),s===null)break}return null}function X2(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Ns(s.nextSibling),s===null))return null;return s}function S_(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=Ns(s.nextSibling),s===null))return null;return s}function yp(s){return s.data==="$?"||s.data==="$~"}function vp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function W2(s,i){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Ns(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var bp=null;function N_(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(i===0)return Ns(s.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}s=s.nextSibling}return null}function C_(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return s;i--}else o!=="/$"&&o!=="/&"||i++}s=s.previousSibling}return null}function R_(s,i,o){switch(i=Dd(o),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Tu(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);ui(s)}var Cs=new Map,I_=new Set;function Ld(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ma=ee.d;ee.d={f:Z2,r:J2,D:eC,C:tC,L:nC,m:rC,X:iC,S:sC,M:aC};function Z2(){var s=ma.f(),i=Ad();return s||i}function J2(s){var i=er(s);i!==null&&i.tag===5&&i.type==="form"?Kb(i):ma.r(s)}var rc=typeof document>"u"?null:document;function j_(s,i,o){var u=rc;if(u&&typeof i=="string"&&i){var g=jn(i);g='link[rel="'+s+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),I_.has(g)||(I_.add(g),s={rel:s,crossOrigin:o,href:i},u.querySelector(g)===null&&(i=u.createElement("link"),Kn(i,"link",s),$t(i),u.head.appendChild(i)))}}function eC(s){ma.D(s),j_("dns-prefetch",s,null)}function tC(s,i){ma.C(s,i),j_("preconnect",s,i)}function nC(s,i,o){ma.L(s,i,o);var u=rc;if(u&&s&&i){var g='link[rel="preload"][as="'+jn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+jn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+jn(o.imageSizes)+'"]')):g+='[href="'+jn(s)+'"]';var y=g;switch(i){case"style":y=sc(s);break;case"script":y=ic(s)}Cs.has(y)||(s=x({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),Cs.set(y,s),u.querySelector(g)!==null||i==="style"&&u.querySelector(Au(y))||i==="script"&&u.querySelector(Su(y))||(i=u.createElement("link"),Kn(i,"link",s),$t(i),u.head.appendChild(i)))}}function rC(s,i){ma.m(s,i);var o=rc;if(o&&s){var u=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+jn(u)+'"][href="'+jn(s)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=ic(s)}if(!Cs.has(y)&&(s=x({rel:"modulepreload",href:s},i),Cs.set(y,s),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Su(y)))return}u=o.createElement("link"),Kn(u,"link",s),$t(u),o.head.appendChild(u)}}}function sC(s,i,o){ma.S(s,i,o);var u=rc;if(u&&s){var g=Ir(u).hoistableStyles,y=sc(s);i=i||"default";var w=g.get(y);if(!w){var I={loading:0,preload:null};if(w=u.querySelector(Au(y)))I.loading=5;else{s=x({rel:"stylesheet",href:s,"data-precedence":i},o),(o=Cs.get(y))&&_p(s,o);var z=w=u.createElement("link");$t(z),Kn(z,"link",s),z._p=new Promise(function(J,ae){z.onload=J,z.onerror=ae}),z.addEventListener("load",function(){I.loading|=1}),z.addEventListener("error",function(){I.loading|=2}),I.loading|=4,kd(w,i,u)}w={type:"stylesheet",instance:w,count:1,state:I},g.set(y,w)}}}function iC(s,i){ma.X(s,i);var o=rc;if(o&&s){var u=Ir(o).hoistableScripts,g=ic(s),y=u.get(g);y||(y=o.querySelector(Su(g)),y||(s=x({src:s,async:!0},i),(i=Cs.get(g))&&xp(s,i),y=o.createElement("script"),$t(y),Kn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function aC(s,i){ma.M(s,i);var o=rc;if(o&&s){var u=Ir(o).hoistableScripts,g=ic(s),y=u.get(g);y||(y=o.querySelector(Su(g)),y||(s=x({src:s,async:!0,type:"module"},i),(i=Cs.get(g))&&xp(s,i),y=o.createElement("script"),$t(y),Kn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function O_(s,i,o,u){var g=(g=Ae.current)?Ld(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=sc(o.href),o=Ir(g).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=sc(o.href);var y=Ir(g).hoistableStyles,w=y.get(s);if(w||(g=g.ownerDocument||g,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,w),(y=g.querySelector(Au(s)))&&!y._p&&(w.instance=y,w.state.loading=5),Cs.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Cs.set(s,o),y||oC(g,s,o,w.state))),i&&u===null)throw Error(r(528,""));return w}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ic(o),o=Ir(g).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function sc(s){return'href="'+jn(s)+'"'}function Au(s){return'link[rel="stylesheet"]['+s+"]"}function D_(s){return x({},s,{"data-precedence":s.precedence,precedence:null})}function oC(s,i,o,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Kn(i,"link",o),$t(i),s.head.appendChild(i))}function ic(s){return'[src="'+jn(s)+'"]'}function Su(s){return"script[async]"+s}function L_(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+jn(o.href)+'"]');if(u)return i.instance=u,$t(u),u;var g=x({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),$t(u),Kn(u,"style",g),kd(u,o.precedence,s),i.instance=u;case"stylesheet":g=sc(o.href);var y=s.querySelector(Au(g));if(y)return i.state.loading|=4,i.instance=y,$t(y),y;u=D_(o),(g=Cs.get(g))&&_p(u,g),y=(s.ownerDocument||s).createElement("link"),$t(y);var w=y;return w._p=new Promise(function(I,z){w.onload=I,w.onerror=z}),Kn(y,"link",u),i.state.loading|=4,kd(y,o.precedence,s),i.instance=y;case"script":return y=ic(o.src),(g=s.querySelector(Su(y)))?(i.instance=g,$t(g),g):(u=o,(g=Cs.get(y))&&(u=x({},o),xp(u,g)),s=s.ownerDocument||s,g=s.createElement("script"),$t(g),Kn(g,"link",u),s.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,kd(u,o.precedence,s));return i.instance}function kd(s,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,w=0;w<u.length;w++){var I=u[w];if(I.dataset.precedence===i)y=I;else if(y!==g)break}y?y.parentNode.insertBefore(s,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function _p(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function xp(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Md=null;function k_(s,i,o){if(Md===null){var u=new Map,g=Md=new Map;g.set(o,u)}else g=Md,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),g=0;g<o.length;g++){var y=o[g];if(!(y[Rr]||y[Ft]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(i)||"";w=s+w;var I=u.get(w);I?I.push(y):u.set(w,[y])}}return u}function M_(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function lC(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function P_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function cC(s,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=sc(u.href),y=i.querySelector(Au(g));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=Pd.bind(s),i.then(s,s)),o.state.loading|=4,o.instance=y,$t(y);return}y=i.ownerDocument||i,u=D_(u),(g=Cs.get(g))&&_p(u,g),y=y.createElement("link"),$t(y);var w=y;w._p=new Promise(function(I,z){w.onload=I,w.onerror=z}),Kn(y,"link",u),o.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=Pd.bind(s),i.addEventListener("load",o),i.addEventListener("error",o))}}var Ep=0;function uC(s,i){return s.stylesheets&&s.count===0&&Vd(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var u=setTimeout(function(){if(s.stylesheets&&Vd(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+i);0<s.imgBytes&&Ep===0&&(Ep=62500*F2());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Vd(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>Ep?50:800)+i);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Pd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ud=null;function Vd(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ud=new Map,i.forEach(hC,s),Ud=null,Pd.call(s))}function hC(s,i){if(!(i.state.loading&4)){var o=Ud.get(s);if(o)var u=o.get(null);else{o=new Map,Ud.set(s,o);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var w=g[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}g=i.instance,w=g.getAttribute("data-precedence"),y=o.get(w)||u,y===u&&o.set(null,g),o.set(w,g),this.count++,u=Pd.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),i.state.loading|=4}}var Nu={$$typeof:Y,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function dC(s,i,o,u,g,y,w,I,z){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.hiddenUpdates=Nn(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function U_(s,i,o,u,g,y,w,I,z,J,ae,he){return s=new dC(s,i,o,w,z,J,ae,he,I),i=1,y===!0&&(i|=24),y=Jr(3,null,null,i),s.current=y,y.stateNode=s,i=tg(),i.refCount++,s.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},ig(y),s}function V_(s){return s?(s=Ml,s):Ml}function q_(s,i,o,u,g,y){g=V_(g),u.context===null?u.context=g:u.pendingContext=g,u=Fa(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=$a(s,u,i),o!==null&&(Ur(o,s,i),iu(o,s,i))}function B_(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function wp(s,i){B_(s,i),(s=s.alternate)&&B_(s,i)}function z_(s){if(s.tag===13||s.tag===31){var i=Fo(s,67108864);i!==null&&Ur(i,s,67108864),wp(s,67108864)}}function H_(s){if(s.tag===13||s.tag===31){var i=ss();i=ds(i);var o=Fo(s,i);o!==null&&Ur(o,s,i),wp(s,i)}}var qd=!0;function fC(s,i,o,u){var g=H.T;H.T=null;var y=ee.p;try{ee.p=2,Tp(s,i,o,u)}finally{ee.p=y,H.T=g}}function mC(s,i,o,u){var g=H.T;H.T=null;var y=ee.p;try{ee.p=8,Tp(s,i,o,u)}finally{ee.p=y,H.T=g}}function Tp(s,i,o,u){if(qd){var g=Ap(u);if(g===null)up(s,i,u,Bd,o),$_(s,u);else if(pC(g,s,i,o,u))u.stopPropagation();else if($_(s,u),i&4&&-1<gC.indexOf(s)){for(;g!==null;){var y=er(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=Jn(y.pendingLanes);if(w!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;w;){var z=1<<31-Dt(w);I.entanglements[1]|=z,w&=~z}xi(y),(bt&6)===0&&(wd=Ot()+500,xu(0))}}break;case 31:case 13:I=Fo(y,2),I!==null&&Ur(I,y,2),Ad(),wp(y,2)}if(y=Ap(u),y===null&&up(s,i,u,Bd,o),y===g)break;g=y}g!==null&&u.stopPropagation()}else up(s,i,u,null,o)}}function Ap(s){return s=Bn(s),Sp(s)}var Bd=null;function Sp(s){if(Bd=null,s=Mt(s),s!==null){var i=l(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=c(i),s!==null)return s;s=null}else if(o===31){if(s=d(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Bd=s,null}function F_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sr()){case qi:return 2;case Hr:return 8;case fr:case Bi:return 32;case kn:return 268435456;default:return 32}default:return 32}}var Np=!1,no=null,ro=null,so=null,Cu=new Map,Ru=new Map,io=[],gC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $_(s,i){switch(s){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":Cu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(i.pointerId)}}function Iu(s,i,o,u,g,y){return s===null||s.nativeEvent!==y?(s={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},i!==null&&(i=er(i),i!==null&&z_(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function pC(s,i,o,u,g){switch(i){case"focusin":return no=Iu(no,s,i,o,u,g),!0;case"dragenter":return ro=Iu(ro,s,i,o,u,g),!0;case"mouseover":return so=Iu(so,s,i,o,u,g),!0;case"pointerover":var y=g.pointerId;return Cu.set(y,Iu(Cu.get(y)||null,s,i,o,u,g)),!0;case"gotpointercapture":return y=g.pointerId,Ru.set(y,Iu(Ru.get(y)||null,s,i,o,u,g)),!0}return!1}function G_(s){var i=Mt(s.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){s.blockedOn=i,pr(s.priority,function(){H_(o)});return}}else if(i===31){if(i=d(o),i!==null){s.blockedOn=i,pr(s.priority,function(){H_(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function zd(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=Ap(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);cn=u,o.target.dispatchEvent(u),cn=null}else return i=er(o),i!==null&&z_(i),s.blockedOn=o,!1;i.shift()}return!0}function K_(s,i,o){zd(s)&&o.delete(i)}function yC(){Np=!1,no!==null&&zd(no)&&(no=null),ro!==null&&zd(ro)&&(ro=null),so!==null&&zd(so)&&(so=null),Cu.forEach(K_),Ru.forEach(K_)}function Hd(s,i){s.blockedOn===i&&(s.blockedOn=null,Np||(Np=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,yC)))}var Fd=null;function Y_(s){Fd!==s&&(Fd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Fd===s&&(Fd=null);for(var i=0;i<s.length;i+=3){var o=s[i],u=s[i+1],g=s[i+2];if(typeof u!="function"){if(Sp(u||o)===null)continue;break}var y=er(o);y!==null&&(s.splice(i,3),i-=3,Ag(y,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function ac(s){function i(z){return Hd(z,s)}no!==null&&Hd(no,s),ro!==null&&Hd(ro,s),so!==null&&Hd(so,s),Cu.forEach(i),Ru.forEach(i);for(var o=0;o<io.length;o++){var u=io[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<io.length&&(o=io[0],o.blockedOn===null);)G_(o),o.blockedOn===null&&io.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],y=o[u+1],w=g[rn]||null;if(typeof y=="function")w||Y_(o);else if(w){var I=null;if(y&&y.hasAttribute("formAction")){if(g=y,w=y[rn]||null)I=w.formAction;else if(Sp(g)!==null)continue}else I=w.action;typeof I=="function"?o[u+1]=I:(o.splice(u,3),u-=3),Y_(o)}}}function Q_(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(w){return g=w})},focusReset:"manual",scroll:"manual"})}function i(){g!==null&&(g(),g=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),g!==null&&(g(),g=null)}}}function Cp(s){this._internalRoot=s}$d.prototype.render=Cp.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=ss();q_(o,u,s,i,null,null)},$d.prototype.unmount=Cp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;q_(s.current,2,null,s,null,null),Ad(),i[Cr]=null}};function $d(s){this._internalRoot=s}$d.prototype.unstable_scheduleHydration=function(s){if(s){var i=nn();s={blockedOn:null,target:s,priority:i};for(var o=0;o<io.length&&i!==0&&i<io[o].priority;o++);io.splice(o,0,s),o===0&&G_(s)}};var X_=e.version;if(X_!=="19.2.1")throw Error(r(527,X_,"19.2.1"));ee.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=p(i),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var vC={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{mr=Gd.inject(vC),Zt=Gd}catch{}}return Ou.createRoot=function(s,i){if(!a(s))throw Error(r(299));var o=!1,u="",g=r1,y=s1,w=i1;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=U_(s,1,!1,null,null,o,u,null,g,y,w,Q_),s[Cr]=i.current,cp(s),new Cp(i)},Ou.hydrateRoot=function(s,i,o){if(!a(s))throw Error(r(299));var u=!1,g="",y=r1,w=s1,I=i1,z=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(z=o.formState)),i=U_(s,1,!0,i,o??null,u,g,z,y,w,I,Q_),i.context=V_(null),o=i.current,u=ss(),u=ds(u),g=Fa(u),g.callback=null,$a(o,g,u),o=u,i.current.lanes=o,hs(i,o),xi(i),s[Cr]=i.current,cp(s),new $d(i)},Ou.version="19.2.1",Ou}var ax;function RC(){if(ax)return jp.exports;ax=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),jp.exports=CC(),jp.exports}var IC=RC();var ox="popstate";function jC(n={}){function e(a,l){let{pathname:c="/",search:d="",hash:m=""}=bl(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),dy("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=a.location.href,p=m.indexOf("#");d=p===-1?m:m.slice(0,p)}return d+"#"+(typeof l=="string"?l:eh(l))}function r(a,l){cs(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return DC(e,t,r,n)}function Wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function cs(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OC(){return Math.random().toString(36).substring(2,10)}function lx(n,e){return{usr:n.state,key:n.key,idx:e}}function dy(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?bl(e):e,state:t,key:e&&e.key||r||OC()}}function eh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function bl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function DC(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",m=null,p=v();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function v(){return(c.state||{idx:null}).idx}function x(){d="POP";let R=v(),V=R==null?null:R-p;p=R,m&&m({action:d,location:O.location,delta:V})}function E(R,V){d="PUSH";let F=dy(O.location,R,V);t&&t(F,R),p=v()+1;let Y=lx(F,p),Q=O.createHref(F);try{c.pushState(Y,"",Q)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;a.location.assign(Q)}l&&m&&m({action:d,location:O.location,delta:1})}function A(R,V){d="REPLACE";let F=dy(O.location,R,V);t&&t(F,R),p=v();let Y=lx(F,p),Q=O.createHref(F);c.replaceState(Y,"",Q),l&&m&&m({action:d,location:O.location,delta:0})}function S(R){return LC(R)}let O={get action(){return d},get location(){return n(a,c)},listen(R){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(ox,x),m=R,()=>{a.removeEventListener(ox,x),m=null}},createHref(R){return e(a,R)},createURL:S,encodeLocation(R){let V=S(R);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:E,replace:A,go(R){return c.go(R)}};return O}function LC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:eh(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Ww(n,e,t="/"){return kC(n,e,t,!1)}function kC(n,e,t,r){let a=typeof e=="string"?bl(e):e,l=_a(a.pathname||"/",t);if(l==null)return null;let c=Zw(n);MC(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let p=KC(l);d=$C(c[m],p,r)}return d}function Zw(n,e=[],t=[],r="",a=!1){let l=(c,d,m=a,p)=>{let v={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&m)return;Wt(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let x=va([r,v.relativePath]),E=t.concat(v);c.children&&c.children.length>0&&(Wt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Zw(c.children,e,E,x,m)),!(c.path==null&&!c.index)&&e.push({path:x,score:HC(x,c.index),routesMeta:E})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let m of Jw(c.path))l(c,d,!0,m)}),e}function Jw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=Jw(r.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function MC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:FC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var PC=/^:[\w-]+$/,UC=3,VC=2,qC=1,BC=10,zC=-2,cx=n=>n==="*";function HC(n,e){let t=n.split("/"),r=t.length;return t.some(cx)&&(r+=zC),e&&(r+=VC),t.filter(a=>!cx(a)).reduce((a,l)=>a+(PC.test(l)?UC:l===""?qC:BC),r)}function FC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function $C(n,e,t=!1){let{routesMeta:r}=n,a={},l="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],p=d===r.length-1,v=l==="/"?e:e.slice(l.length)||"/",x=Sf({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},v),E=m.route;if(!x&&p&&t&&!r[r.length-1].route.index&&(x=Sf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!x)return null;Object.assign(a,x.params),c.push({params:a,pathname:va([l,x.pathname]),pathnameBase:ZC(va([l,x.pathnameBase])),route:E}),x.pathnameBase!=="/"&&(l=va([l,x.pathnameBase]))}return c}function Sf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=GC(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((p,{paramName:v,isOptional:x},E)=>{if(v==="*"){let S=d[E]||"";c=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const A=d[E];return x&&!A?p[v]=void 0:p[v]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:n}}function GC(n,e=!1,t=!0){cs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function KC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function _a(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var YC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,QC=n=>YC.test(n);function XC(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?bl(n):n,l;if(t)if(QC(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),cs(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=ux(t.substring(1),"/"):l=ux(t,e)}else l=e;return{pathname:l,search:JC(r),hash:eR(a)}}function ux(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function kp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function WC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function s0(n){let e=WC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function i0(n,e,t,r=!1){let a;typeof n=="string"?a=bl(n):(a={...n},Wt(!a.pathname||!a.pathname.includes("?"),kp("?","pathname","search",a)),Wt(!a.pathname||!a.pathname.includes("#"),kp("#","pathname","hash",a)),Wt(!a.search||!a.search.includes("#"),kp("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let x=e.length-1;if(!r&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),x-=1;a.pathname=E.join("/")}d=x>=0?e[x]:"/"}let m=XC(a,d),p=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||v)&&(m.pathname+="/"),m}var va=n=>n.join("/").replace(/\/\/+/g,"/"),ZC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),JC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,eR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function tR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function nR(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var eT=["POST","PUT","PATCH","DELETE"];new Set(eT);var rR=["GET",...eT];new Set(rR);var kc=P.createContext(null);kc.displayName="DataRouter";var em=P.createContext(null);em.displayName="DataRouterState";P.createContext(!1);var tT=P.createContext({isTransitioning:!1});tT.displayName="ViewTransition";var sR=P.createContext(new Map);sR.displayName="Fetchers";var iR=P.createContext(null);iR.displayName="Await";var Ms=P.createContext(null);Ms.displayName="Navigation";var ph=P.createContext(null);ph.displayName="Location";var Ps=P.createContext({outlet:null,matches:[],isDataRoute:!1});Ps.displayName="Route";var a0=P.createContext(null);a0.displayName="RouteError";function aR(n,{relative:e}={}){Wt(Mc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(Ms),{hash:a,pathname:l,search:c}=yh(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:va([t,l])),r.createHref({pathname:d,search:c,hash:a})}function Mc(){return P.useContext(ph)!=null}function Oo(){return Wt(Mc(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(ph).location}var nT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rT(n){P.useContext(Ms).static||P.useLayoutEffect(n)}function ki(){let{isDataRoute:n}=P.useContext(Ps);return n?xR():oR()}function oR(){Wt(Mc(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(kc),{basename:e,navigator:t}=P.useContext(Ms),{matches:r}=P.useContext(Ps),{pathname:a}=Oo(),l=JSON.stringify(s0(r)),c=P.useRef(!1);return rT(()=>{c.current=!0}),P.useCallback((m,p={})=>{if(cs(c.current,nT),!c.current)return;if(typeof m=="number"){t.go(m);return}let v=i0(m,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:va([e,v.pathname])),(p.replace?t.replace:t.push)(v,p.state,p)},[e,t,l,a,n])}var lR=P.createContext(null);function cR(n){let e=P.useContext(Ps).outlet;return P.useMemo(()=>e&&P.createElement(lR.Provider,{value:n},e),[e,n])}function Pc(){let{matches:n}=P.useContext(Ps),e=n[n.length-1];return e?e.params:{}}function yh(n,{relative:e}={}){let{matches:t}=P.useContext(Ps),{pathname:r}=Oo(),a=JSON.stringify(s0(t));return P.useMemo(()=>i0(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function uR(n,e){return sT(n,e)}function sT(n,e,t,r,a){Wt(Mc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=P.useContext(Ms),{matches:c}=P.useContext(Ps),d=c[c.length-1],m=d?d.params:{},p=d?d.pathname:"/",v=d?d.pathnameBase:"/",x=d&&d.route;{let F=x&&x.path||"";iT(p,!x||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let E=Oo(),A;if(e){let F=typeof e=="string"?bl(e):e;Wt(v==="/"||F.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${F.pathname}" was given in the \`location\` prop.`),A=F}else A=E;let S=A.pathname||"/",O=S;if(v!=="/"){let F=v.replace(/^\//,"").split("/");O="/"+S.replace(/^\//,"").split("/").slice(F.length).join("/")}let R=Ww(n,{pathname:O});cs(x||R!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),cs(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=gR(R&&R.map(F=>Object.assign({},F,{params:Object.assign({},m,F.params),pathname:va([v,l.encodeLocation?l.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?v:va([v,l.encodeLocation?l.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),c,t,r,a);return e&&V?P.createElement(ph.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},V):V}function hR(){let n=_R(),e=tR(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:l},"ErrorBoundary")," or"," ",P.createElement("code",{style:l},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:a},t):null,c)}var dR=P.createElement(hR,null),fR=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?P.createElement(Ps.Provider,{value:this.props.routeContext},P.createElement(a0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function mR({routeContext:n,match:e,children:t}){let r=P.useContext(kc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Ps.Provider,{value:n},t)}function gR(n,e=[],t=null,r=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let v=l.findIndex(x=>x.route.id&&c?.[x.route.id]!==void 0);Wt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,m=-1;if(t)for(let v=0;v<l.length;v++){let x=l[v];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=v),x.route.id){let{loaderData:E,errors:A}=t,S=x.route.loader&&!E.hasOwnProperty(x.route.id)&&(!A||A[x.route.id]===void 0);if(x.route.lazy||S){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let p=t&&r?(v,x)=>{r(v,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:nR(t.matches),errorInfo:x})}:void 0;return l.reduceRight((v,x,E)=>{let A,S=!1,O=null,R=null;t&&(A=c&&x.route.id?c[x.route.id]:void 0,O=x.route.errorElement||dR,d&&(m<0&&E===0?(iT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,R=null):m===E&&(S=!0,R=x.route.hydrateFallbackElement||null)));let V=e.concat(l.slice(0,E+1)),F=()=>{let Y;return A?Y=O:S?Y=R:x.route.Component?Y=P.createElement(x.route.Component,null):x.route.element?Y=x.route.element:Y=v,P.createElement(mR,{match:x,routeContext:{outlet:v,matches:V,isDataRoute:t!=null},children:Y})};return t&&(x.route.ErrorBoundary||x.route.errorElement||E===0)?P.createElement(fR,{location:t.location,revalidation:t.revalidation,component:O,error:A,children:F(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:p}):F()},null)}function o0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pR(n){let e=P.useContext(kc);return Wt(e,o0(n)),e}function yR(n){let e=P.useContext(em);return Wt(e,o0(n)),e}function vR(n){let e=P.useContext(Ps);return Wt(e,o0(n)),e}function l0(n){let e=vR(n),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function bR(){return l0("useRouteId")}function _R(){let n=P.useContext(a0),e=yR("useRouteError"),t=l0("useRouteError");return n!==void 0?n:e.errors?.[t]}function xR(){let{router:n}=pR("useNavigate"),e=l0("useNavigate"),t=P.useRef(!1);return rT(()=>{t.current=!0}),P.useCallback(async(a,l={})=>{cs(t.current,nT),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var hx={};function iT(n,e,t){!e&&!hx[n]&&(hx[n]=!0,cs(!1,t))}P.memo(ER);function ER({routes:n,future:e,state:t,unstable_onError:r}){return sT(n,void 0,t,r,e)}function wR({to:n,replace:e,state:t,relative:r}){Wt(Mc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=P.useContext(Ms);cs(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=P.useContext(Ps),{pathname:c}=Oo(),d=ki(),m=i0(n,s0(l),c,r==="path"),p=JSON.stringify(m);return P.useEffect(()=>{d(JSON.parse(p),{replace:e,state:t,relative:r})},[d,p,r,e,t]),null}function TR(n){return cR(n.context)}function mn(n){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function AR({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){Wt(!Mc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=P.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[d,a,l,c]);typeof t=="string"&&(t=bl(t));let{pathname:p="/",search:v="",hash:x="",state:E=null,key:A="default"}=t,S=P.useMemo(()=>{let O=_a(p,d);return O==null?null:{location:{pathname:O,search:v,hash:x,state:E,key:A},navigationType:r}},[d,p,v,x,E,A,r]);return cs(S!=null,`<Router basename="${d}"> is not able to match the URL "${p}${v}${x}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:P.createElement(Ms.Provider,{value:m},P.createElement(ph.Provider,{children:e,value:S}))}function SR({children:n,location:e}){return uR(fy(n),e)}function fy(n,e=[]){let t=[];return P.Children.forEach(n,(r,a)=>{if(!P.isValidElement(r))return;let l=[...e,a];if(r.type===P.Fragment){t.push.apply(t,fy(r.props.children,l));return}Wt(r.type===mn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=fy(r.props.children,l)),t.push(c)}),t}var ff="get",mf="application/x-www-form-urlencoded";function tm(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function NR(n){return tm(n)&&n.tagName.toLowerCase()==="button"}function CR(n){return tm(n)&&n.tagName.toLowerCase()==="form"}function RR(n){return tm(n)&&n.tagName.toLowerCase()==="input"}function IR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function jR(n,e){return n.button===0&&(!e||e==="_self")&&!IR(n)}var Kd=null;function OR(){if(Kd===null)try{new FormData(document.createElement("form"),0),Kd=!1}catch{Kd=!0}return Kd}var DR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mp(n){return n!=null&&!DR.has(n)?(cs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mf}"`),null):n}function LR(n,e){let t,r,a,l,c;if(CR(n)){let d=n.getAttribute("action");r=d?_a(d,e):null,t=n.getAttribute("method")||ff,a=Mp(n.getAttribute("enctype"))||mf,l=new FormData(n)}else if(NR(n)||RR(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(r=m?_a(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||ff,a=Mp(n.getAttribute("formenctype"))||Mp(d.getAttribute("enctype"))||mf,l=new FormData(d,n),!OR()){let{name:p,type:v,value:x}=n;if(v==="image"){let E=p?`${p}.`:"";l.append(`${E}x`,"0"),l.append(`${E}y`,"0")}else p&&l.append(p,x)}}else{if(tm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ff,r=null,a=mf,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function c0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function kR(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&_a(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function MR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function PR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function UR(n,e,t){let r=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await MR(l,t);return c.links?c.links():[]}return[]}));return zR(r.flat(1).filter(PR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function dx(n,e,t,r,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>t[p].pathname!==m.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,p)=>c(m,p)||d(m,p)):l==="data"?e.filter((m,p)=>{let v=r.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(c(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let x=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function VR(n,e,{includeHydrateFallback:t}={}){return qR(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function qR(n){return[...new Set(n)]}function BR(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function zR(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let l=JSON.stringify(BR(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function aT(){let n=P.useContext(kc);return c0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function HR(){let n=P.useContext(em);return c0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var u0=P.createContext(void 0);u0.displayName="FrameworkContext";function oT(){let n=P.useContext(u0);return c0(n,"You must render this element inside a <HydratedRouter> element"),n}function FR(n,e){let t=P.useContext(u0),[r,a]=P.useState(!1),[l,c]=P.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:v,onTouchStart:x}=e,E=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let O=V=>{V.forEach(F=>{c(F.isIntersecting)})},R=new IntersectionObserver(O,{threshold:.5});return E.current&&R.observe(E.current),()=>{R.disconnect()}}},[n]),P.useEffect(()=>{if(r){let O=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(O)}}},[r]);let A=()=>{a(!0)},S=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,E,{}]:[l,E,{onFocus:Du(d,A),onBlur:Du(m,S),onMouseEnter:Du(p,A),onMouseLeave:Du(v,S),onTouchStart:Du(x,A)}]:[!1,E,{}]}function Du(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function $R({page:n,...e}){let{router:t}=aT(),r=P.useMemo(()=>Ww(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(KR,{page:n,matches:r,...e}):null}function GR(n){let{manifest:e,routeModules:t}=oT(),[r,a]=P.useState([]);return P.useEffect(()=>{let l=!1;return UR(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),r}function KR({page:n,matches:e,...t}){let r=Oo(),{manifest:a,routeModules:l}=oT(),{basename:c}=aT(),{loaderData:d,matches:m}=HR(),p=P.useMemo(()=>dx(n,e,m,a,r,"data"),[n,e,m,a,r]),v=P.useMemo(()=>dx(n,e,m,a,r,"assets"),[n,e,m,a,r]),x=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let S=new Set,O=!1;if(e.forEach(V=>{let F=a.routes[V.route.id];!F||!F.hasLoader||(!p.some(Y=>Y.route.id===V.route.id)&&V.route.id in d&&l[V.route.id]?.shouldRevalidate||F.hasClientLoader?O=!0:S.add(V.route.id))}),S.size===0)return[];let R=kR(n,c,"data");return O&&S.size>0&&R.searchParams.set("_routes",e.filter(V=>S.has(V.route.id)).map(V=>V.route.id).join(",")),[R.pathname+R.search]},[c,d,r,a,p,e,n,l]),E=P.useMemo(()=>VR(v,a),[v,a]),A=GR(v);return P.createElement(P.Fragment,null,x.map(S=>P.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),E.map(S=>P.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),A.map(({key:S,link:O})=>P.createElement("link",{key:S,nonce:t.nonce,...O})))}function YR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var lT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lT&&(window.__reactRouterVersion="7.10.1")}catch{}function QR({basename:n,children:e,unstable_useTransitions:t,window:r}){let a=P.useRef();a.current==null&&(a.current=jC({window:r,v5Compat:!0}));let l=a.current,[c,d]=P.useState({action:l.action,location:l.location}),m=P.useCallback(p=>{t===!1?d(p):P.startTransition(()=>d(p))},[t]);return P.useLayoutEffect(()=>l.listen(m),[l,m]),P.createElement(AR,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t===!0})}var cT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Je=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:p,preventScrollReset:v,viewTransition:x,...E},A){let{basename:S,unstable_useTransitions:O}=P.useContext(Ms),R=typeof p=="string"&&cT.test(p),V,F=!1;if(typeof p=="string"&&R&&(V=p,lT))try{let $=new URL(window.location.href),N=p.startsWith("//")?new URL($.protocol+p):new URL(p),M=_a(N.pathname,S);N.origin===$.origin&&M!=null?p=M+N.search+N.hash:F=!0}catch{cs(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=aR(p,{relative:a}),[Q,ie,ve]=FR(r,E),L=ZR(p,{replace:c,state:d,target:m,preventScrollReset:v,relative:a,viewTransition:x,unstable_useTransitions:O});function k($){e&&e($),$.defaultPrevented||L($)}let U=P.createElement("a",{...E,...ve,href:V||Y,onClick:F||l?e:k,ref:YR(A,ie),target:m,"data-discover":!R&&t==="render"?"true":void 0});return Q&&!R?P.createElement(P.Fragment,null,U,P.createElement($R,{page:Y})):U});Je.displayName="Link";var uT=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...p},v){let x=yh(c,{relative:p.relative}),E=Oo(),A=P.useContext(em),{navigator:S,basename:O}=P.useContext(Ms),R=A!=null&&r4(x)&&d===!0,V=S.encodeLocation?S.encodeLocation(x).pathname:x.pathname,F=E.pathname,Y=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(F=F.toLowerCase(),Y=Y?Y.toLowerCase():null,V=V.toLowerCase()),Y&&O&&(Y=_a(Y,O)||Y);const Q=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let ie=F===V||!a&&F.startsWith(V)&&F.charAt(Q)==="/",ve=Y!=null&&(Y===V||!a&&Y.startsWith(V)&&Y.charAt(V.length)==="/"),L={isActive:ie,isPending:ve,isTransitioning:R},k=ie?e:void 0,U;typeof r=="function"?U=r(L):U=[r,ie?"active":null,ve?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let $=typeof l=="function"?l(L):l;return P.createElement(Je,{...p,"aria-current":k,className:U,ref:v,style:$,to:c,viewTransition:d},typeof m=="function"?m(L):m)});uT.displayName="NavLink";var XR=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=ff,action:d,onSubmit:m,relative:p,preventScrollReset:v,viewTransition:x,...E},A)=>{let{unstable_useTransitions:S}=P.useContext(Ms),O=t4(),R=n4(d,{relative:p}),V=c.toLowerCase()==="get"?"get":"post",F=typeof d=="string"&&cT.test(d),Y=Q=>{if(m&&m(Q),Q.defaultPrevented)return;Q.preventDefault();let ie=Q.nativeEvent.submitter,ve=ie?.getAttribute("formmethod")||c,L=()=>O(ie||Q.currentTarget,{fetcherKey:e,method:ve,navigate:t,replace:a,state:l,relative:p,preventScrollReset:v,viewTransition:x});S&&t!==!1?P.startTransition(()=>L()):L()};return P.createElement("form",{ref:A,method:V,action:R,onSubmit:r?m:Y,...E,"data-discover":!F&&n==="render"?"true":void 0})});XR.displayName="Form";function WR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hT(n){let e=P.useContext(kc);return Wt(e,WR(n)),e}function ZR(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c,unstable_useTransitions:d}={}){let m=ki(),p=Oo(),v=yh(n,{relative:l});return P.useCallback(x=>{if(jR(x,e)){x.preventDefault();let E=t!==void 0?t:eh(p)===eh(v),A=()=>m(n,{replace:E,state:r,preventScrollReset:a,relative:l,viewTransition:c});d?P.startTransition(()=>A()):A()}},[p,m,v,t,r,e,n,a,l,c,d])}var JR=0,e4=()=>`__${String(++JR)}__`;function t4(){let{router:n}=hT("useSubmit"),{basename:e}=P.useContext(Ms),t=bR(),r=n.fetch,a=n.navigate;return P.useCallback(async(l,c={})=>{let{action:d,method:m,encType:p,formData:v,body:x}=LR(l,e);if(c.navigate===!1){let E=c.fetcherKey||e4();await r(E,t,c.action||d,{preventScrollReset:c.preventScrollReset,formData:v,body:x,formMethod:c.method||m,formEncType:c.encType||p,flushSync:c.flushSync})}else await a(c.action||d,{preventScrollReset:c.preventScrollReset,formData:v,body:x,formMethod:c.method||m,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,a,e,t])}function n4(n,{relative:e}={}){let{basename:t}=P.useContext(Ms),r=P.useContext(Ps);Wt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...yh(n||".",{relative:e})},c=Oo();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(v=>v==="")){d.delete("index"),m.filter(x=>x).forEach(x=>d.append("index",x));let v=d.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:va([t,l.pathname])),eh(l)}function r4(n,{relative:e}={}){let t=P.useContext(tT);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=hT("useViewTransitionState"),a=yh(n,{relative:e});if(!t.isTransitioning)return!1;let l=_a(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=_a(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Sf(a.pathname,c)!=null||Sf(a.pathname,l)!=null}const s4=()=>{};var fx={};const dT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},i4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},fT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,v=l>>2,x=(l&3)<<4|d>>4;let E=(d&15)<<2|p>>6,A=p&63;m||(A=64,c||(E=64)),r.push(t[v],t[x],t[E],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(dT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):i4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const x=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||p==null||x==null)throw new a4;const E=l<<2|d>>4;if(r.push(E),p!==64){const A=d<<4&240|p>>2;if(r.push(A),x!==64){const S=p<<6&192|x;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class a4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o4=function(n){const e=dT(n);return fT.encodeByteArray(e,!0)},Nf=function(n){return o4(n).replace(/\./g,"")},mT=function(n){try{return fT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const c4=()=>l4().__FIREBASE_DEFAULTS__,u4=()=>{if(typeof process>"u"||typeof fx>"u")return;const n=fx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},h4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&mT(n[1]);return e&&JSON.parse(e)},nm=()=>{try{return s4()||c4()||u4()||h4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gT=n=>nm()?.emulatorHosts?.[n],d4=n=>{const e=gT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},pT=()=>nm()?.config,yT=n=>nm()?.[`_${n}`];class f4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Uc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vT(n){return(await fetch(n,{credentials:"include"})).ok}function m4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Nf(JSON.stringify(t)),Nf(JSON.stringify(c)),""].join(".")}const Gu={};function g4(){const n={prod:[],emulator:[]};for(const e of Object.keys(Gu))Gu[e]?n.emulator.push(e):n.prod.push(e);return n}function p4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let mx=!1;function bT(n,e){if(typeof window>"u"||typeof document>"u"||!Uc(window.location.host)||Gu[n]===e||Gu[n]||mx)return;Gu[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",l=g4().prod.length>0;function c(){const E=document.getElementById(r);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function m(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{mx=!0,c()},E}function v(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function x(){const E=p4(r),A=t("text"),S=document.getElementById(A)||document.createElement("span"),O=t("learnmore"),R=document.getElementById(O)||document.createElement("a"),V=t("preprendIcon"),F=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Y=E.element;d(Y),v(R,O);const Q=p();m(F,V),Y.append(F,S,R,Q),document.body.appendChild(Y)}l?(S.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function hr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hr())}function v4(){const n=nm()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function b4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function x4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function E4(){const n=hr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function w4(){return!v4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T4(){try{return typeof indexedDB=="object"}catch{return!1}}function A4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const S4="FirebaseError";class Ca extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=S4,Object.setPrototypeOf(this,Ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vh.prototype.create)}}class vh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?N4(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Ca(a,d,r)}}function N4(n,e){return n.replace(C4,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const C4=/\{\$([^}]+)}/g;function R4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function xa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],c=e[a];if(gx(l)&&gx(c)){if(!xa(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function gx(n){return n!==null&&typeof n=="object"}function bh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Uu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function I4(n,e){const t=new j4(n,e);return t.subscribe.bind(t)}class j4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");O4(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Pp),a.error===void 0&&(a.error=Pp),a.complete===void 0&&(a.complete=Pp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function O4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Pp(){}function Tn(n){return n&&n._delegate?n._delegate:n}class cl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const rl="[DEFAULT]";class D4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new f4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(k4(e))try{this.getOrInitializeService({instanceIdentifier:rl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=rl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rl){return this.instances.has(e)}getOptions(e=rl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:L4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rl){return this.component?this.component.multipleInstances?e:rl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function L4(n){return n===rl?void 0:n}function k4(n){return n.instantiationMode==="EAGER"}class M4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new D4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ot;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ot||(ot={}));const P4={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},U4=ot.INFO,V4={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},q4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=V4[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class h0{constructor(e){this.name=e,this._logLevel=U4,this._logHandler=q4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?P4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const B4=(n,e)=>e.some(t=>n instanceof t);let px,yx;function z4(){return px||(px=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H4(){return yx||(yx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _T=new WeakMap,my=new WeakMap,xT=new WeakMap,Up=new WeakMap,d0=new WeakMap;function F4(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(vo(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&_T.set(t,n)}).catch(()=>{}),d0.set(e,n),e}function $4(n){if(my.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});my.set(n,e)}let gy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return my.get(n);if(e==="objectStoreNames")return n.objectStoreNames||xT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function G4(n){gy=n(gy)}function K4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Vp(this),e,...t);return xT.set(r,e.sort?e.sort():[e]),vo(r)}:H4().includes(n)?function(...e){return n.apply(Vp(this),e),vo(_T.get(this))}:function(...e){return vo(n.apply(Vp(this),e))}}function Y4(n){return typeof n=="function"?K4(n):(n instanceof IDBTransaction&&$4(n),B4(n,z4())?new Proxy(n,gy):n)}function vo(n){if(n instanceof IDBRequest)return F4(n);if(Up.has(n))return Up.get(n);const e=Y4(n);return e!==n&&(Up.set(n,e),d0.set(e,n)),e}const Vp=n=>d0.get(n);function Q4(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=vo(c);return r&&c.addEventListener("upgradeneeded",m=>{r(vo(c.result),m.oldVersion,m.newVersion,vo(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const X4=["get","getKey","getAll","getAllKeys","count"],W4=["put","add","delete","clear"],qp=new Map;function vx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(qp.get(e))return qp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=W4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||X4.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&m.done]))[0]};return qp.set(e,l),l}G4(n=>({...n,get:(e,t,r)=>vx(e,t)||n.get(e,t,r),has:(e,t)=>!!vx(e,t)||n.has(e,t)}));class Z4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(J4(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function J4(n){return n.getComponent()?.type==="VERSION"}const py="@firebase/app",bx="0.14.6";const Ea=new h0("@firebase/app"),eI="@firebase/app-compat",tI="@firebase/analytics-compat",nI="@firebase/analytics",rI="@firebase/app-check-compat",sI="@firebase/app-check",iI="@firebase/auth",aI="@firebase/auth-compat",oI="@firebase/database",lI="@firebase/data-connect",cI="@firebase/database-compat",uI="@firebase/functions",hI="@firebase/functions-compat",dI="@firebase/installations",fI="@firebase/installations-compat",mI="@firebase/messaging",gI="@firebase/messaging-compat",pI="@firebase/performance",yI="@firebase/performance-compat",vI="@firebase/remote-config",bI="@firebase/remote-config-compat",_I="@firebase/storage",xI="@firebase/storage-compat",EI="@firebase/firestore",wI="@firebase/ai",TI="@firebase/firestore-compat",AI="firebase",SI="12.6.0";const yy="[DEFAULT]",NI={[py]:"fire-core",[eI]:"fire-core-compat",[nI]:"fire-analytics",[tI]:"fire-analytics-compat",[sI]:"fire-app-check",[rI]:"fire-app-check-compat",[iI]:"fire-auth",[aI]:"fire-auth-compat",[oI]:"fire-rtdb",[lI]:"fire-data-connect",[cI]:"fire-rtdb-compat",[uI]:"fire-fn",[hI]:"fire-fn-compat",[dI]:"fire-iid",[fI]:"fire-iid-compat",[mI]:"fire-fcm",[gI]:"fire-fcm-compat",[pI]:"fire-perf",[yI]:"fire-perf-compat",[vI]:"fire-rc",[bI]:"fire-rc-compat",[_I]:"fire-gcs",[xI]:"fire-gcs-compat",[EI]:"fire-fst",[TI]:"fire-fst-compat",[wI]:"fire-vertex","fire-js":"fire-js",[AI]:"fire-js-all"};const Cf=new Map,CI=new Map,vy=new Map;function _x(n,e){try{n.container.addComponent(e)}catch(t){Ea.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ec(n){const e=n.name;if(vy.has(e))return Ea.debug(`There were multiple attempts to register component ${e}.`),!1;vy.set(e,n);for(const t of Cf.values())_x(t,n);for(const t of CI.values())_x(t,n);return!0}function f0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function is(n){return n==null?!1:n.settings!==void 0}const RI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bo=new vh("app","Firebase",RI);class II{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bo.create("app-deleted",{appName:this._name})}}const Vc=SI;function ET(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:yy,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw bo.create("bad-app-name",{appName:String(a)});if(t||(t=pT()),!t)throw bo.create("no-options");const l=Cf.get(a);if(l){if(xa(t,l.options)&&xa(r,l.config))return l;throw bo.create("duplicate-app",{appName:a})}const c=new M4(a);for(const m of vy.values())c.addComponent(m);const d=new II(t,r,c);return Cf.set(a,d),d}function wT(n=yy){const e=Cf.get(n);if(!e&&n===yy&&pT())return ET();if(!e)throw bo.create("no-app",{appName:n});return e}function _o(n,e,t){let r=NI[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ea.warn(c.join(" "));return}Ec(new cl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const jI="firebase-heartbeat-database",OI=1,th="firebase-heartbeat-store";let Bp=null;function TT(){return Bp||(Bp=Q4(jI,OI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(th)}catch(t){console.warn(t)}}}}).catch(n=>{throw bo.create("idb-open",{originalErrorMessage:n.message})})),Bp}async function DI(n){try{const t=(await TT()).transaction(th),r=await t.objectStore(th).get(AT(n));return await t.done,r}catch(e){if(e instanceof Ca)Ea.warn(e.message);else{const t=bo.create("idb-get",{originalErrorMessage:e?.message});Ea.warn(t.message)}}}async function xx(n,e){try{const r=(await TT()).transaction(th,"readwrite");await r.objectStore(th).put(e,AT(n)),await r.done}catch(t){if(t instanceof Ca)Ea.warn(t.message);else{const r=bo.create("idb-set",{originalErrorMessage:t?.message});Ea.warn(r.message)}}}function AT(n){return`${n.name}!${n.options.appId}`}const LI=1024,kI=30;class MI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new UI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ex();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>kI){const a=VI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ea.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ex(),{heartbeatsToSend:t,unsentEntries:r}=PI(this._heartbeatsCache.heartbeats),a=Nf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ea.warn(e),""}}}function Ex(){return new Date().toISOString().substring(0,10)}function PI(n,e=LI){const t=[];let r=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),wx(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),wx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class UI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T4()?A4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await DI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return xx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return xx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function wx(n){return Nf(JSON.stringify({version:2,heartbeats:n})).length}function VI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function qI(n){Ec(new cl("platform-logger",e=>new Z4(e),"PRIVATE")),Ec(new cl("heartbeat",e=>new MI(e),"PRIVATE")),_o(py,bx,n),_o(py,bx,"esm2020"),_o("fire-js","")}qI("");var BI="firebase",zI="12.6.0";_o(BI,zI,"app");function ST(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HI=ST,NT=new vh("auth","Firebase",ST());const Rf=new h0("@firebase/auth");function FI(n,...e){Rf.logLevel<=ot.WARN&&Rf.warn(`Auth (${Vc}): ${n}`,...e)}function gf(n,...e){Rf.logLevel<=ot.ERROR&&Rf.error(`Auth (${Vc}): ${n}`,...e)}function ks(n,...e){throw g0(n,...e)}function ti(n,...e){return g0(n,...e)}function m0(n,e,t){const r={...HI(),[e]:t};return new vh("auth","Firebase",r).create(e,{appName:n.name})}function ba(n){return m0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $I(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ks(n,"argument-error"),m0(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function g0(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return NT.create(n,...e)}function qe(n,e,...t){if(!n)throw g0(e,...t)}function pa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw gf(e),new Error(e)}function wa(n,e){n||pa(e)}function by(){return typeof self<"u"&&self.location?.href||""}function GI(){return Tx()==="http:"||Tx()==="https:"}function Tx(){return typeof self<"u"&&self.location?.protocol||null}function KI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GI()||_4()||"connection"in navigator)?navigator.onLine:!0}function YI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class _h{constructor(e,t){this.shortDelay=e,this.longDelay=t,wa(t>e,"Short delay should be less than long delay!"),this.isMobile=y4()||x4()}get(){return KI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function p0(n,e){wa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class CT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const QI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const XI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],WI=new _h(3e4,6e4);function Do(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ra(n,e,t,r,a={}){return RT(n,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=bh({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...l};return b4()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Uc(n.emulatorConfig.host)&&(p.credentials="include"),CT.fetch()(await IT(n,n.config.apiHost,t,d),p)})}async function RT(n,e,t){n._canInitEmulator=!1;const r={...QI,...e};try{const a=new JI(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Yd(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,p]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yd(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Yd(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Yd(n,"user-disabled",c);const v=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw m0(n,v,p);ks(n,v)}}catch(a){if(a instanceof Ca)throw a;ks(n,"network-request-failed",{message:String(a)})}}async function xh(n,e,t,r,a={}){const l=await Ra(n,e,t,r,a);return"mfaPendingCredential"in l&&ks(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function IT(n,e,t,r){const a=`${e}${t}?${r}`,l=n,c=l.config.emulator?p0(n.config,a):`${n.config.apiScheme}://${a}`;return XI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function ZI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ti(this.auth,"network-request-failed")),WI.get())})}}function Yd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=ti(n,e,r);return a.customData._tokenResponse=t,a}function Ax(n){return n!==void 0&&n.enterprise!==void 0}class e3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ZI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function t3(n,e){return Ra(n,"GET","/v2/recaptchaConfig",Do(n,e))}async function n3(n,e){return Ra(n,"POST","/v1/accounts:delete",e)}async function If(n,e){return Ra(n,"POST","/v1/accounts:lookup",e)}function Ku(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function r3(n,e=!1){const t=Tn(n),r=await t.getIdToken(e),a=y0(r);qe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Ku(zp(a.auth_time)),issuedAtTime:Ku(zp(a.iat)),expirationTime:Ku(zp(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function zp(n){return Number(n)*1e3}function y0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return gf("JWT malformed, contained fewer than 3 sections"),null;try{const a=mT(t);return a?JSON.parse(a):(gf("Failed to decode base64 JWT payload"),null)}catch(a){return gf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Sx(n){const e=y0(n);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function wc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ca&&s3(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function s3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class i3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class _y{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function jf(n){const e=n.auth,t=await n.getIdToken(),r=await wc(n,If(e,{idToken:t}));qe(r?.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?jT(a.providerUserInfo):[],c=o3(n.providerData,l),d=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!c?.length,p=d?m:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new _y(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function a3(n){const e=Tn(n);await jf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function o3(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function jT(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function l3(n,e){const t=await RT(n,{},async()=>{const r=bh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await IT(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:r};return n.emulatorConfig&&Uc(n.emulatorConfig.host)&&(m.credentials="include"),CT.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function c3(n,e){return Ra(n,"POST","/v2/accounts:revokeToken",Do(n,e))}class gc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const t=Sx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await l3(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new gc;return r&&(qe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(qe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(qe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gc,this.toJSON())}_performRefresh(){return pa("not implemented")}}function oo(n,e){qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ei{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new i3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new _y(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await wc(this,this.stsTokenManager.getToken(this.auth,e));return qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return r3(this,e)}reload(){return a3(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ei({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await jf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(is(this.auth.app))return Promise.reject(ba(this.auth));const e=await this.getIdToken();return await wc(this,n3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:x,emailVerified:E,isAnonymous:A,providerData:S,stsTokenManager:O}=t;qe(x&&O,e,"internal-error");const R=gc.fromJSON(this.name,O);qe(typeof x=="string",e,"internal-error"),oo(r,e.name),oo(a,e.name),qe(typeof E=="boolean",e,"internal-error"),qe(typeof A=="boolean",e,"internal-error"),oo(l,e.name),oo(c,e.name),oo(d,e.name),oo(m,e.name),oo(p,e.name),oo(v,e.name);const V=new ei({uid:x,auth:e,email:a,emailVerified:E,displayName:r,isAnonymous:A,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:R,createdAt:p,lastLoginAt:v});return S&&Array.isArray(S)&&(V.providerData=S.map(F=>({...F}))),m&&(V._redirectEventId=m),V}static async _fromIdTokenResponse(e,t,r=!1){const a=new gc;a.updateFromServerResponse(t);const l=new ei({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await jf(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];qe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?jT(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new gc;d.updateFromIdToken(r);const m=new ei({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new _y(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,p),m}}const Nx=new Map;function ya(n){wa(n instanceof Function,"Expected a class definition");let e=Nx.get(n);return e?(wa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Nx.set(n,e),e)}class OT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}OT.type="NONE";const Cx=OT;function pf(n,e,t){return`firebase:${n}:${e}:${t}`}class pc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=pf(this.userKey,a.apiKey,l),this.fullPersistenceKey=pf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await If(this.auth,{idToken:e}).catch(()=>{});return t?ei._fromGetAccountInfoResponse(this.auth,t,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new pc(ya(Cx),e,r);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||ya(Cx);const c=pf(r,e.config.apiKey,e.name);let d=null;for(const p of t)try{const v=await p._get(c);if(v){let x;if(typeof v=="string"){const E=await If(e,{idToken:v}).catch(()=>{});if(!E)break;x=await ei._fromGetAccountInfoResponse(e,E,v)}else x=ei._fromJSON(e,v);p!==l&&(d=x),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new pc(l,e,r):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new pc(l,e,r))}}function Rx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UT(e))return"Blackberry";if(VT(e))return"Webos";if(LT(e))return"Safari";if((e.includes("chrome/")||kT(e))&&!e.includes("edge/"))return"Chrome";if(PT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function DT(n=hr()){return/firefox\//i.test(n)}function LT(n=hr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kT(n=hr()){return/crios\//i.test(n)}function MT(n=hr()){return/iemobile/i.test(n)}function PT(n=hr()){return/android/i.test(n)}function UT(n=hr()){return/blackberry/i.test(n)}function VT(n=hr()){return/webos/i.test(n)}function v0(n=hr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function u3(n=hr()){return v0(n)&&!!window.navigator?.standalone}function h3(){return E4()&&document.documentMode===10}function qT(n=hr()){return v0(n)||PT(n)||VT(n)||UT(n)||/windows phone/i.test(n)||MT(n)}function BT(n,e=[]){let t;switch(n){case"Browser":t=Rx(hr());break;case"Worker":t=`${Rx(hr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vc}/${r}`}class d3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function f3(n,e={}){return Ra(n,"GET","/v2/passwordPolicy",Do(n,e))}const m3=6;class g3{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??m3,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class p3{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ix(this),this.idTokenSubscription=new Ix(this),this.beforeStateQueue=new d3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ya(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await pc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await If(this,{idToken:e}),r=await ei._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(is(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(r=d.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await jf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(is(this.app))return Promise.reject(ba(this));const t=e?Tn(e):null;return t&&qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return is(this.app)?Promise.reject(ba(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return is(this.app)?Promise.reject(ba(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ya(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await f3(this),t=new g3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await c3(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ya(e)||this._popupRedirectResolver;qe(t,this,"argument-error"),this.redirectPersistenceManager=await pc.create(this,[ya(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(is(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&FI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Lo(n){return Tn(n)}class Ix{constructor(e){this.auth=e,this.observer=null,this.addObserver=I4(t=>this.observer=t)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let rm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y3(n){rm=n}function zT(n){return rm.loadJS(n)}function v3(){return rm.recaptchaEnterpriseScript}function b3(){return rm.gapiScript}function _3(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class x3{constructor(){this.enterprise=new E3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class E3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const w3="recaptcha-enterprise",HT="NO_RECAPTCHA";class T3{constructor(e){this.type=w3,this.auth=Lo(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{t3(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new e3(m);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(m=>{d(m)})})}function a(l,c,d){const m=window.grecaptcha;Ax(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(HT)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new x3().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!t&&Ax(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=v3();m.length!==0&&(m+=d),zT(m).then(()=>{a(d,l,c)}).catch(p=>{c(p)})}}).catch(d=>{c(d)})})}}async function jx(n,e,t,r=!1,a=!1){const l=new T3(n);let c;if(a)c=HT;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function xy(n,e,t,r,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await jx(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await jx(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}function A3(n,e){const t=f0(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(xa(l,e??{}))return a;ks(a,"already-initialized")}return t.initialize({options:e})}function S3(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ya);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function N3(n,e,t){const r=Lo(n);qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=FT(e),{host:c,port:d}=C3(e),m=d===null?"":`:${d}`,p={url:`${l}//${c}${m}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),qe(xa(p,r.config.emulator)&&xa(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Uc(c)?(vT(`${l}//${c}${m}`),bT("Auth",!0)):R3()}function FT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function C3(n){const e=FT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Ox(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Ox(c)}}}function Ox(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function R3(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class b0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pa("not implemented")}_getIdTokenResponse(e){return pa("not implemented")}_linkToIdToken(e,t){return pa("not implemented")}_getReauthenticationResolver(e){return pa("not implemented")}}async function I3(n,e){return Ra(n,"POST","/v1/accounts:signUp",e)}async function j3(n,e){return xh(n,"POST","/v1/accounts:signInWithPassword",Do(n,e))}async function O3(n,e){return xh(n,"POST","/v1/accounts:signInWithEmailLink",Do(n,e))}async function D3(n,e){return xh(n,"POST","/v1/accounts:signInWithEmailLink",Do(n,e))}class nh extends b0{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new nh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new nh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xy(e,t,"signInWithPassword",j3);case"emailLink":return O3(e,{email:this._email,oobCode:this._password});default:ks(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xy(e,r,"signUpPassword",I3);case"emailLink":return D3(e,{idToken:t,email:this._email,oobCode:this._password});default:ks(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function yc(n,e){return xh(n,"POST","/v1/accounts:signInWithIdp",Do(n,e))}const L3="http://localhost";class ul extends b0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ul(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ks("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new ul(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return yc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,yc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yc(e,t)}buildRequest(){const e={requestUri:L3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bh(t)}return e}}function k3(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function M3(n){const e=Pu(Uu(n)).link,t=e?Pu(Uu(e)).deep_link_id:null,r=Pu(Uu(n)).deep_link_id;return(r?Pu(Uu(r)).link:null)||r||t||e||n}class _0{constructor(e){const t=Pu(Uu(e)),r=t.apiKey??null,a=t.oobCode??null,l=k3(t.mode??null);qe(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=M3(e);try{return new _0(t)}catch{return null}}}class qc{constructor(){this.providerId=qc.PROVIDER_ID}static credential(e,t){return nh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=_0.parseLink(t);return qe(r,"argument-error"),nh._fromEmailAndCode(e,r.code,r.tenantId)}}qc.PROVIDER_ID="password";qc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class x0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Eh extends x0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class co extends Eh{constructor(){super("facebook.com")}static credential(e){return ul._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return co.credential(e.oauthAccessToken)}catch{return null}}}co.FACEBOOK_SIGN_IN_METHOD="facebook.com";co.PROVIDER_ID="facebook.com";class Ti extends Eh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ul._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ti.credential(t,r)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";class uo extends Eh{constructor(){super("github.com")}static credential(e){return ul._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uo.credential(e.oauthAccessToken)}catch{return null}}}uo.GITHUB_SIGN_IN_METHOD="github.com";uo.PROVIDER_ID="github.com";class ho extends Eh{constructor(){super("twitter.com")}static credential(e,t){return ul._fromParams({providerId:ho.PROVIDER_ID,signInMethod:ho.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ho.credentialFromTaggedObject(e)}static credentialFromError(e){return ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ho.credential(t,r)}catch{return null}}}ho.TWITTER_SIGN_IN_METHOD="twitter.com";ho.PROVIDER_ID="twitter.com";async function P3(n,e){return xh(n,"POST","/v1/accounts:signUp",Do(n,e))}class hl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await ei._fromIdTokenResponse(e,r,a),c=Dx(r);return new hl({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=Dx(r);return new hl({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function Dx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Of extends Ca{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Of.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Of(e,t,r,a)}}function $T(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Of._fromErrorAndOperation(n,l,e,r):l})}async function U3(n,e,t=!1){const r=await wc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return hl._forOperation(n,"link",r)}async function V3(n,e,t=!1){const{auth:r}=n;if(is(r.app))return Promise.reject(ba(r));const a="reauthenticate";try{const l=await wc(n,$T(r,a,e,n),t);qe(l.idToken,r,"internal-error");const c=y0(l.idToken);qe(c,r,"internal-error");const{sub:d}=c;return qe(n.uid===d,r,"user-mismatch"),hl._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&ks(r,"user-mismatch"),l}}async function GT(n,e,t=!1){if(is(n.app))return Promise.reject(ba(n));const r="signIn",a=await $T(n,r,e),l=await hl._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function q3(n,e){return GT(Lo(n),e)}async function KT(n){const e=Lo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function B3(n,e,t){if(is(n.app))return Promise.reject(ba(n));const r=Lo(n),c=await xy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",P3).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&KT(n),m}),d=await hl._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function z3(n,e,t){return is(n.app)?Promise.reject(ba(n)):q3(Tn(n),qc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&KT(n),r})}async function H3(n,e){return Ra(n,"POST","/v1/accounts:update",e)}async function F3(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Tn(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await wc(r,H3(r.auth,l));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const d=r.providerData.find(({providerId:m})=>m==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function $3(n,e,t,r){return Tn(n).onIdTokenChanged(e,t,r)}function G3(n,e,t){return Tn(n).beforeAuthStateChanged(e,t)}function wh(n,e,t,r){return Tn(n).onAuthStateChanged(e,t,r)}function K3(n){return Tn(n).signOut()}const Df="__sak";class YT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Df,"1"),this.storage.removeItem(Df),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Y3=1e3,Q3=10;class QT extends YT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);h3()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Q3):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Y3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}QT.type="LOCAL";const X3=QT;class XT extends YT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}XT.type="SESSION";const WT=XT;function W3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class sm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new sm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async p=>p(t.origin,l)),m=await W3(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sm.receivers=[];function E0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class Z3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const p=E0("",20);a.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(x){const E=x;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(E.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ai(){return window}function J3(n){Ai().location.href=n}function ZT(){return typeof Ai().WorkerGlobalScope<"u"&&typeof Ai().importScripts=="function"}async function e6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function t6(){return navigator?.serviceWorker?.controller||null}function n6(){return ZT()?self:null}const JT="firebaseLocalStorageDb",r6=1,Lf="firebaseLocalStorage",eA="fbase_key";class Th{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function im(n,e){return n.transaction([Lf],e?"readwrite":"readonly").objectStore(Lf)}function s6(){const n=indexedDB.deleteDatabase(JT);return new Th(n).toPromise()}function Ey(){const n=indexedDB.open(JT,r6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Lf,{keyPath:eA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Lf)?e(r):(r.close(),await s6(),e(await Ey()))})})}async function Lx(n,e,t){const r=im(n,!0).put({[eA]:e,value:t});return new Th(r).toPromise()}async function i6(n,e){const t=im(n,!1).get(e),r=await new Th(t).toPromise();return r===void 0?null:r.value}function kx(n,e){const t=im(n,!0).delete(e);return new Th(t).toPromise()}const a6=800,o6=3;class tA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ey(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>o6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sm._getInstance(n6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await e6(),!this.activeServiceWorker)return;this.sender=new Z3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||t6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ey();return await Lx(e,Df,"1"),await kx(e,Df),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Lx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>i6(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>kx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=im(a,!1).getAll();return new Th(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),a6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tA.type="LOCAL";const l6=tA;new _h(3e4,6e4);function nA(n,e){return e?ya(e):(qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class w0 extends b0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function c6(n){return GT(n.auth,new w0(n),n.bypassAuthState)}function u6(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),V3(t,new w0(n),n.bypassAuthState)}async function h6(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),U3(t,new w0(n),n.bypassAuthState)}class rA{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return c6;case"linkViaPopup":case"linkViaRedirect":return h6;case"reauthViaPopup":case"reauthViaRedirect":return u6;default:ks(this.auth,"internal-error")}}resolve(e){wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const d6=new _h(2e3,1e4);async function sA(n,e,t){if(is(n.app))return Promise.reject(ti(n,"operation-not-supported-in-this-environment"));const r=Lo(n);$I(n,e,x0);const a=nA(r,t);return new sl(r,"signInViaPopup",e,a).executeNotNull()}class sl extends rA{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,sl.currentPopupAction&&sl.currentPopupAction.cancel(),sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){wa(this.filter.length===1,"Popup operations only handle one event");const e=E0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,d6.get())};e()}}sl.currentPopupAction=null;const f6="pendingRedirect",yf=new Map;class m6 extends rA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=yf.get(this.auth._key());if(!e){try{const r=await g6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}yf.set(this.auth._key(),e)}return this.bypassAuthState||yf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function g6(n,e){const t=v6(e),r=y6(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function p6(n,e){yf.set(n._key(),e)}function y6(n){return ya(n._redirectPersistence)}function v6(n){return pf(f6,n.config.apiKey,n.name)}async function b6(n,e,t=!1){if(is(n.app))return Promise.reject(ba(n));const r=Lo(n),a=nA(r,e),c=await new m6(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const _6=600*1e3;class x6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!iA(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ti(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_6&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mx(e))}saveEventToCache(e){this.cachedEventUids.add(Mx(e)),this.lastProcessedEventTime=Date.now()}}function Mx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function iA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function E6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iA(n);default:return!1}}async function w6(n,e={}){return Ra(n,"GET","/v1/projects",e)}const T6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A6=/^https?/;async function S6(n){if(n.config.emulator)return;const{authorizedDomains:e}=await w6(n);for(const t of e)try{if(N6(t))return}catch{}ks(n,"unauthorized-domain")}function N6(n){const e=by(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!A6.test(t))return!1;if(T6.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const C6=new _h(3e4,6e4);function Px(){const n=Ai().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function R6(n){return new Promise((e,t)=>{function r(){Px(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Px(),t(ti(n,"network-request-failed"))},timeout:C6.get()})}if(Ai().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ai().gapi?.load)r();else{const a=_3("iframefcb");return Ai()[a]=()=>{gapi.load?r():t(ti(n,"network-request-failed"))},zT(`${b3()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw vf=null,e})}let vf=null;function I6(n){return vf=vf||R6(n),vf}const j6=new _h(5e3,15e3),O6="__/auth/iframe",D6="emulator/auth/iframe",L6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},k6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M6(n){const e=n.config;qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?p0(e,D6):`https://${n.config.authDomain}/${O6}`,r={apiKey:e.apiKey,appName:n.name,v:Vc},a=k6.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${bh(r).slice(1)}`}async function P6(n){const e=await I6(n),t=Ai().gapi;return qe(t,n,"internal-error"),e.open({where:document.body,url:M6(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:L6,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=ti(n,"network-request-failed"),d=Ai().setTimeout(()=>{l(c)},j6.get());function m(){Ai().clearTimeout(d),a(r)}r.ping(m).then(m,()=>{l(c)})}))}const U6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V6=500,q6=600,B6="_blank",z6="http://localhost";class Ux{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function H6(n,e,t,r=V6,a=q6){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m={...U6,width:r.toString(),height:a.toString(),top:l,left:c},p=hr().toLowerCase();t&&(d=kT(p)?B6:t),DT(p)&&(e=e||z6,m.scrollbars="yes");const v=Object.entries(m).reduce((E,[A,S])=>`${E}${A}=${S},`,"");if(u3(p)&&d!=="_self")return F6(e||"",d),new Ux(null);const x=window.open(e||"",d,v);qe(x,n,"popup-blocked");try{x.focus()}catch{}return new Ux(x)}function F6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const $6="__/auth/handler",G6="emulator/auth/handler",K6=encodeURIComponent("fac");async function Vx(n,e,t,r,a,l){qe(n.config.authDomain,n,"auth-domain-config-required"),qe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Vc,eventId:a};if(e instanceof x0){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",R4(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,x]of Object.entries({}))c[v]=x}if(e instanceof Eh){const v=e.getScopes().filter(x=>x!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const m=await n._getAppCheckToken(),p=m?`#${K6}=${encodeURIComponent(m)}`:"";return`${Y6(n)}?${bh(d).slice(1)}${p}`}function Y6({config:n}){return n.emulator?p0(n,G6):`https://${n.authDomain}/${$6}`}const Hp="webStorageSupport";class Q6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WT,this._completeRedirectFn=b6,this._overrideRedirectResult=p6}async _openPopup(e,t,r,a){wa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Vx(e,t,r,by(),a);return H6(e,l,E0())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await Vx(e,t,r,by(),a);return J3(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(wa(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await P6(e),r=new x6(e);return t.register("authEvent",a=>(qe(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Hp,{type:Hp},a=>{const l=a?.[0]?.[Hp];l!==void 0&&t(!!l),ks(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=S6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qT()||LT()||v0()}}const X6=Q6;var qx="@firebase/auth",Bx="1.11.1";class W6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Z6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J6(n){Ec(new cl("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;qe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BT(n)},p=new p3(r,a,l,m);return S3(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ec(new cl("auth-internal",e=>{const t=Lo(e.getProvider("auth").getImmediate());return(r=>new W6(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_o(qx,Bx,Z6(n)),_o(qx,Bx,"esm2020")}const ej=300,tj=yT("authIdTokenMaxAge")||ej;let zx=null;const nj=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>tj)return;const a=t?.token;zx!==a&&(zx=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function rj(n=wT()){const e=f0(n,"auth");if(e.isInitialized())return e.getImmediate();const t=A3(n,{popupRedirectResolver:X6,persistence:[l6,X3,WT]}),r=yT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=nj(l.toString());G3(t,c,()=>c(t.currentUser)),$3(t,d=>c(d))}}const a=gT("auth");return a&&N3(t,`http://${a}`),t}function sj(){return document.getElementsByTagName("head")?.[0]??document}y3({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=ti("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",sj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J6("Browser");var Hx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xo,aA;(function(){var n;function e(L,k){function U(){}U.prototype=k.prototype,L.F=k.prototype,L.prototype=new U,L.prototype.constructor=L,L.D=function($,N,M){for(var C=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)C[pe-2]=arguments[pe];return k.prototype[N].apply($,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(L,k,U){U||(U=0);const $=Array(16);if(typeof k=="string")for(var N=0;N<16;++N)$[N]=k.charCodeAt(U++)|k.charCodeAt(U++)<<8|k.charCodeAt(U++)<<16|k.charCodeAt(U++)<<24;else for(N=0;N<16;++N)$[N]=k[U++]|k[U++]<<8|k[U++]<<16|k[U++]<<24;k=L.g[0],U=L.g[1],N=L.g[2];let M=L.g[3],C;C=k+(M^U&(N^M))+$[0]+3614090360&4294967295,k=U+(C<<7&4294967295|C>>>25),C=M+(N^k&(U^N))+$[1]+3905402710&4294967295,M=k+(C<<12&4294967295|C>>>20),C=N+(U^M&(k^U))+$[2]+606105819&4294967295,N=M+(C<<17&4294967295|C>>>15),C=U+(k^N&(M^k))+$[3]+3250441966&4294967295,U=N+(C<<22&4294967295|C>>>10),C=k+(M^U&(N^M))+$[4]+4118548399&4294967295,k=U+(C<<7&4294967295|C>>>25),C=M+(N^k&(U^N))+$[5]+1200080426&4294967295,M=k+(C<<12&4294967295|C>>>20),C=N+(U^M&(k^U))+$[6]+2821735955&4294967295,N=M+(C<<17&4294967295|C>>>15),C=U+(k^N&(M^k))+$[7]+4249261313&4294967295,U=N+(C<<22&4294967295|C>>>10),C=k+(M^U&(N^M))+$[8]+1770035416&4294967295,k=U+(C<<7&4294967295|C>>>25),C=M+(N^k&(U^N))+$[9]+2336552879&4294967295,M=k+(C<<12&4294967295|C>>>20),C=N+(U^M&(k^U))+$[10]+4294925233&4294967295,N=M+(C<<17&4294967295|C>>>15),C=U+(k^N&(M^k))+$[11]+2304563134&4294967295,U=N+(C<<22&4294967295|C>>>10),C=k+(M^U&(N^M))+$[12]+1804603682&4294967295,k=U+(C<<7&4294967295|C>>>25),C=M+(N^k&(U^N))+$[13]+4254626195&4294967295,M=k+(C<<12&4294967295|C>>>20),C=N+(U^M&(k^U))+$[14]+2792965006&4294967295,N=M+(C<<17&4294967295|C>>>15),C=U+(k^N&(M^k))+$[15]+1236535329&4294967295,U=N+(C<<22&4294967295|C>>>10),C=k+(N^M&(U^N))+$[1]+4129170786&4294967295,k=U+(C<<5&4294967295|C>>>27),C=M+(U^N&(k^U))+$[6]+3225465664&4294967295,M=k+(C<<9&4294967295|C>>>23),C=N+(k^U&(M^k))+$[11]+643717713&4294967295,N=M+(C<<14&4294967295|C>>>18),C=U+(M^k&(N^M))+$[0]+3921069994&4294967295,U=N+(C<<20&4294967295|C>>>12),C=k+(N^M&(U^N))+$[5]+3593408605&4294967295,k=U+(C<<5&4294967295|C>>>27),C=M+(U^N&(k^U))+$[10]+38016083&4294967295,M=k+(C<<9&4294967295|C>>>23),C=N+(k^U&(M^k))+$[15]+3634488961&4294967295,N=M+(C<<14&4294967295|C>>>18),C=U+(M^k&(N^M))+$[4]+3889429448&4294967295,U=N+(C<<20&4294967295|C>>>12),C=k+(N^M&(U^N))+$[9]+568446438&4294967295,k=U+(C<<5&4294967295|C>>>27),C=M+(U^N&(k^U))+$[14]+3275163606&4294967295,M=k+(C<<9&4294967295|C>>>23),C=N+(k^U&(M^k))+$[3]+4107603335&4294967295,N=M+(C<<14&4294967295|C>>>18),C=U+(M^k&(N^M))+$[8]+1163531501&4294967295,U=N+(C<<20&4294967295|C>>>12),C=k+(N^M&(U^N))+$[13]+2850285829&4294967295,k=U+(C<<5&4294967295|C>>>27),C=M+(U^N&(k^U))+$[2]+4243563512&4294967295,M=k+(C<<9&4294967295|C>>>23),C=N+(k^U&(M^k))+$[7]+1735328473&4294967295,N=M+(C<<14&4294967295|C>>>18),C=U+(M^k&(N^M))+$[12]+2368359562&4294967295,U=N+(C<<20&4294967295|C>>>12),C=k+(U^N^M)+$[5]+4294588738&4294967295,k=U+(C<<4&4294967295|C>>>28),C=M+(k^U^N)+$[8]+2272392833&4294967295,M=k+(C<<11&4294967295|C>>>21),C=N+(M^k^U)+$[11]+1839030562&4294967295,N=M+(C<<16&4294967295|C>>>16),C=U+(N^M^k)+$[14]+4259657740&4294967295,U=N+(C<<23&4294967295|C>>>9),C=k+(U^N^M)+$[1]+2763975236&4294967295,k=U+(C<<4&4294967295|C>>>28),C=M+(k^U^N)+$[4]+1272893353&4294967295,M=k+(C<<11&4294967295|C>>>21),C=N+(M^k^U)+$[7]+4139469664&4294967295,N=M+(C<<16&4294967295|C>>>16),C=U+(N^M^k)+$[10]+3200236656&4294967295,U=N+(C<<23&4294967295|C>>>9),C=k+(U^N^M)+$[13]+681279174&4294967295,k=U+(C<<4&4294967295|C>>>28),C=M+(k^U^N)+$[0]+3936430074&4294967295,M=k+(C<<11&4294967295|C>>>21),C=N+(M^k^U)+$[3]+3572445317&4294967295,N=M+(C<<16&4294967295|C>>>16),C=U+(N^M^k)+$[6]+76029189&4294967295,U=N+(C<<23&4294967295|C>>>9),C=k+(U^N^M)+$[9]+3654602809&4294967295,k=U+(C<<4&4294967295|C>>>28),C=M+(k^U^N)+$[12]+3873151461&4294967295,M=k+(C<<11&4294967295|C>>>21),C=N+(M^k^U)+$[15]+530742520&4294967295,N=M+(C<<16&4294967295|C>>>16),C=U+(N^M^k)+$[2]+3299628645&4294967295,U=N+(C<<23&4294967295|C>>>9),C=k+(N^(U|~M))+$[0]+4096336452&4294967295,k=U+(C<<6&4294967295|C>>>26),C=M+(U^(k|~N))+$[7]+1126891415&4294967295,M=k+(C<<10&4294967295|C>>>22),C=N+(k^(M|~U))+$[14]+2878612391&4294967295,N=M+(C<<15&4294967295|C>>>17),C=U+(M^(N|~k))+$[5]+4237533241&4294967295,U=N+(C<<21&4294967295|C>>>11),C=k+(N^(U|~M))+$[12]+1700485571&4294967295,k=U+(C<<6&4294967295|C>>>26),C=M+(U^(k|~N))+$[3]+2399980690&4294967295,M=k+(C<<10&4294967295|C>>>22),C=N+(k^(M|~U))+$[10]+4293915773&4294967295,N=M+(C<<15&4294967295|C>>>17),C=U+(M^(N|~k))+$[1]+2240044497&4294967295,U=N+(C<<21&4294967295|C>>>11),C=k+(N^(U|~M))+$[8]+1873313359&4294967295,k=U+(C<<6&4294967295|C>>>26),C=M+(U^(k|~N))+$[15]+4264355552&4294967295,M=k+(C<<10&4294967295|C>>>22),C=N+(k^(M|~U))+$[6]+2734768916&4294967295,N=M+(C<<15&4294967295|C>>>17),C=U+(M^(N|~k))+$[13]+1309151649&4294967295,U=N+(C<<21&4294967295|C>>>11),C=k+(N^(U|~M))+$[4]+4149444226&4294967295,k=U+(C<<6&4294967295|C>>>26),C=M+(U^(k|~N))+$[11]+3174756917&4294967295,M=k+(C<<10&4294967295|C>>>22),C=N+(k^(M|~U))+$[2]+718787259&4294967295,N=M+(C<<15&4294967295|C>>>17),C=U+(M^(N|~k))+$[9]+3951481745&4294967295,L.g[0]=L.g[0]+k&4294967295,L.g[1]=L.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,L.g[2]=L.g[2]+N&4294967295,L.g[3]=L.g[3]+M&4294967295}r.prototype.v=function(L,k){k===void 0&&(k=L.length);const U=k-this.blockSize,$=this.C;let N=this.h,M=0;for(;M<k;){if(N==0)for(;M<=U;)a(this,L,M),M+=this.blockSize;if(typeof L=="string"){for(;M<k;)if($[N++]=L.charCodeAt(M++),N==this.blockSize){a(this,$),N=0;break}}else for(;M<k;)if($[N++]=L[M++],N==this.blockSize){a(this,$),N=0;break}}this.h=N,this.o+=k},r.prototype.A=function(){var L=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);L[0]=128;for(var k=1;k<L.length-8;++k)L[k]=0;k=this.o*8;for(var U=L.length-8;U<L.length;++U)L[U]=k&255,k/=256;for(this.v(L),L=Array(16),k=0,U=0;U<4;++U)for(let $=0;$<32;$+=8)L[k++]=this.g[U]>>>$&255;return L};function l(L,k){var U=d;return Object.prototype.hasOwnProperty.call(U,L)?U[L]:U[L]=k(L)}function c(L,k){this.h=k;const U=[];let $=!0;for(let N=L.length-1;N>=0;N--){const M=L[N]|0;$&&M==k||(U[N]=M,$=!1)}this.g=U}var d={};function m(L){return-128<=L&&L<128?l(L,function(k){return new c([k|0],k<0?-1:0)}):new c([L|0],L<0?-1:0)}function p(L){if(isNaN(L)||!isFinite(L))return x;if(L<0)return R(p(-L));const k=[];let U=1;for(let $=0;L>=U;$++)k[$]=L/U|0,U*=4294967296;return new c(k,0)}function v(L,k){if(L.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(L.charAt(0)=="-")return R(v(L.substring(1),k));if(L.indexOf("-")>=0)throw Error('number format error: interior "-" character');const U=p(Math.pow(k,8));let $=x;for(let M=0;M<L.length;M+=8){var N=Math.min(8,L.length-M);const C=parseInt(L.substring(M,M+N),k);N<8?(N=p(Math.pow(k,N)),$=$.j(N).add(p(C))):($=$.j(U),$=$.add(p(C)))}return $}var x=m(0),E=m(1),A=m(16777216);n=c.prototype,n.m=function(){if(O(this))return-R(this).m();let L=0,k=1;for(let U=0;U<this.g.length;U++){const $=this.i(U);L+=($>=0?$:4294967296+$)*k,k*=4294967296}return L},n.toString=function(L){if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(S(this))return"0";if(O(this))return"-"+R(this).toString(L);const k=p(Math.pow(L,6));var U=this;let $="";for(;;){const N=Q(U,k).g;U=V(U,N.j(k));let M=((U.g.length>0?U.g[0]:U.h)>>>0).toString(L);if(U=N,S(U))return M+$;for(;M.length<6;)M="0"+M;$=M+$}},n.i=function(L){return L<0?0:L<this.g.length?this.g[L]:this.h};function S(L){if(L.h!=0)return!1;for(let k=0;k<L.g.length;k++)if(L.g[k]!=0)return!1;return!0}function O(L){return L.h==-1}n.l=function(L){return L=V(this,L),O(L)?-1:S(L)?0:1};function R(L){const k=L.g.length,U=[];for(let $=0;$<k;$++)U[$]=~L.g[$];return new c(U,~L.h).add(E)}n.abs=function(){return O(this)?R(this):this},n.add=function(L){const k=Math.max(this.g.length,L.g.length),U=[];let $=0;for(let N=0;N<=k;N++){let M=$+(this.i(N)&65535)+(L.i(N)&65535),C=(M>>>16)+(this.i(N)>>>16)+(L.i(N)>>>16);$=C>>>16,M&=65535,C&=65535,U[N]=C<<16|M}return new c(U,U[U.length-1]&-2147483648?-1:0)};function V(L,k){return L.add(R(k))}n.j=function(L){if(S(this)||S(L))return x;if(O(this))return O(L)?R(this).j(R(L)):R(R(this).j(L));if(O(L))return R(this.j(R(L)));if(this.l(A)<0&&L.l(A)<0)return p(this.m()*L.m());const k=this.g.length+L.g.length,U=[];for(var $=0;$<2*k;$++)U[$]=0;for($=0;$<this.g.length;$++)for(let N=0;N<L.g.length;N++){const M=this.i($)>>>16,C=this.i($)&65535,pe=L.i(N)>>>16,ge=L.i(N)&65535;U[2*$+2*N]+=C*ge,F(U,2*$+2*N),U[2*$+2*N+1]+=M*ge,F(U,2*$+2*N+1),U[2*$+2*N+1]+=C*pe,F(U,2*$+2*N+1),U[2*$+2*N+2]+=M*pe,F(U,2*$+2*N+2)}for(L=0;L<k;L++)U[L]=U[2*L+1]<<16|U[2*L];for(L=k;L<2*k;L++)U[L]=0;return new c(U,0)};function F(L,k){for(;(L[k]&65535)!=L[k];)L[k+1]+=L[k]>>>16,L[k]&=65535,k++}function Y(L,k){this.g=L,this.h=k}function Q(L,k){if(S(k))throw Error("division by zero");if(S(L))return new Y(x,x);if(O(L))return k=Q(R(L),k),new Y(R(k.g),R(k.h));if(O(k))return k=Q(L,R(k)),new Y(R(k.g),k.h);if(L.g.length>30){if(O(L)||O(k))throw Error("slowDivide_ only works with positive integers.");for(var U=E,$=k;$.l(L)<=0;)U=ie(U),$=ie($);var N=ve(U,1),M=ve($,1);for($=ve($,2),U=ve(U,2);!S($);){var C=M.add($);C.l(L)<=0&&(N=N.add(U),M=C),$=ve($,1),U=ve(U,1)}return k=V(L,N.j(k)),new Y(N,k)}for(N=x;L.l(k)>=0;){for(U=Math.max(1,Math.floor(L.m()/k.m())),$=Math.ceil(Math.log(U)/Math.LN2),$=$<=48?1:Math.pow(2,$-48),M=p(U),C=M.j(k);O(C)||C.l(L)>0;)U-=$,M=p(U),C=M.j(k);S(M)&&(M=E),N=N.add(M),L=V(L,C)}return new Y(N,L)}n.B=function(L){return Q(this,L).h},n.and=function(L){const k=Math.max(this.g.length,L.g.length),U=[];for(let $=0;$<k;$++)U[$]=this.i($)&L.i($);return new c(U,this.h&L.h)},n.or=function(L){const k=Math.max(this.g.length,L.g.length),U=[];for(let $=0;$<k;$++)U[$]=this.i($)|L.i($);return new c(U,this.h|L.h)},n.xor=function(L){const k=Math.max(this.g.length,L.g.length),U=[];for(let $=0;$<k;$++)U[$]=this.i($)^L.i($);return new c(U,this.h^L.h)};function ie(L){const k=L.g.length+1,U=[];for(let $=0;$<k;$++)U[$]=L.i($)<<1|L.i($-1)>>>31;return new c(U,L.h)}function ve(L,k){const U=k>>5;k%=32;const $=L.g.length-U,N=[];for(let M=0;M<$;M++)N[M]=k>0?L.i(M+U)>>>k|L.i(M+U+1)<<32-k:L.i(M+U);return new c(N,L.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,aA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,xo=c}).apply(typeof Hx<"u"?Hx:typeof self<"u"?self:typeof window<"u"?window:{});var Qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var oA,Vu,lA,bf,wy,cA,uA,hA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qd=="object"&&Qd];for(var b=0;b<h.length;++b){var T=h[b];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function a(h,b){if(b)e:{var T=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var X=h[D];if(!(X in T))break e;T=T[X]}h=h[h.length-1],D=T[h],b=b(D),b!=D&&b!=null&&e(T,h,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(b){var T=[],D;for(D in b)Object.prototype.hasOwnProperty.call(b,D)&&T.push([D,b[D]]);return T}});var l=l||{},c=this||self;function d(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function m(h,b,T){return h.call.apply(h.bind,arguments)}function p(h,b,T){return p=m,p.apply(null,arguments)}function v(h,b){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function x(h,b){function T(){}T.prototype=b.prototype,h.Z=b.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(D,X,re){for(var xe=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)xe[Ge-2]=arguments[Ge];return b.prototype[X].apply(D,xe)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function A(h){const b=h.length;if(b>0){const T=Array(b);for(let D=0;D<b;D++)T[D]=h[D];return T}return[]}function S(h,b){for(let D=1;D<arguments.length;D++){const X=arguments[D];var T=typeof X;if(T=T!="object"?T:X?Array.isArray(X)?"array":T:"null",T=="array"||T=="object"&&typeof X.length=="number"){T=h.length||0;const re=X.length||0;h.length=T+re;for(let xe=0;xe<re;xe++)h[T+xe]=X[xe]}else h.push(X)}}class O{constructor(b,T){this.i=b,this.j=T,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function R(h){c.setTimeout(()=>{throw h},0)}function V(){var h=L;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class F{constructor(){this.h=this.g=null}add(b,T){const D=Y.get();D.set(b,T),this.h?this.h.next=D:this.g=D,this.h=D}}var Y=new O(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(b,T){this.h=b,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ve=!1,L=new F,k=()=>{const h=Promise.resolve(void 0);ie=()=>{h.then(U)}};function U(){for(var h;h=V();){try{h.h.call(h.g)}catch(T){R(T)}var b=Y;b.j(h),b.h<100&&(b.h++,h.next=b.g,b.g=h)}ve=!1}function $(){this.u=this.u,this.C=this.C}$.prototype.u=!1,$.prototype.dispose=function(){this.u||(this.u=!0,this.N())},$.prototype[Symbol.dispose]=function(){this.dispose()},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,b),c.removeEventListener("test",T,b)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function pe(h,b){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,b)}x(pe,N),pe.prototype.init=function(h,b){const T=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget,b||(T=="mouseover"?b=h.fromElement:T=="mouseout"&&(b=h.toElement)),this.relatedTarget=b,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),H=0;function ee(h,b,T,D,X){this.listener=h,this.proxy=null,this.src=b,this.type=T,this.capture=!!D,this.ha=X,this.key=++H,this.da=this.fa=!1}function ue(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _e(h,b,T){for(const D in h)b.call(T,h[D],D,h)}function be(h,b){for(const T in h)b.call(void 0,h[T],T,h)}function q(h){const b={};for(const T in h)b[T]=h[T];return b}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(h,b){let T,D;for(let X=1;X<arguments.length;X++){D=arguments[X];for(T in D)h[T]=D[T];for(let re=0;re<W.length;re++)T=W[re],Object.prototype.hasOwnProperty.call(D,T)&&(h[T]=D[T])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,b,T,D,X){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const xe=Ae(h,b,D,X);return xe>-1?(b=h[xe],T||(b.fa=!1)):(b=new ee(b,this.src,re,!!D,X),b.fa=T,h.push(b)),b};function ye(h,b){const T=b.type;if(T in h.g){var D=h.g[T],X=Array.prototype.indexOf.call(D,b,void 0),re;(re=X>=0)&&Array.prototype.splice.call(D,X,1),re&&(ue(b),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Ae(h,b,T,D){for(let X=0;X<h.length;++X){const re=h[X];if(!re.da&&re.listener==b&&re.capture==!!T&&re.ha==D)return X}return-1}var De="closure_lm_"+(Math.random()*1e6|0),je={};function ke(h,b,T,D,X){if(Array.isArray(b)){for(let re=0;re<b.length;re++)ke(h,b[re],T,D,X);return null}return T=Ui(T),h&&h[ge]?h.J(b,T,d(D)?!!D.capture:!1,X):Xe(h,b,T,!1,D,X)}function Xe(h,b,T,D,X,re){if(!b)throw Error("Invalid event type");const xe=d(X)?!!X.capture:!!X;let Ge=zr(h);if(Ge||(h[De]=Ge=new me(h)),T=Ge.add(b,T,D,xe,re),T.proxy)return T;if(D=et(),T.proxy=D,D.src=h,D.listener=T,h.addEventListener)M||(X=xe),X===void 0&&(X=!1),h.addEventListener(b.toString(),D,X);else if(h.attachEvent)h.attachEvent(yt(b.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function et(){function h(T){return b.call(h.src,h.listener,T)}const b=tn;return h}function st(h,b,T,D,X){if(Array.isArray(b))for(var re=0;re<b.length;re++)st(h,b[re],T,D,X);else D=d(D)?!!D.capture:!!D,T=Ui(T),h&&h[ge]?(h=h.i,re=String(b).toString(),re in h.g&&(b=h.g[re],T=Ae(b,T,D,X),T>-1&&(ue(b[T]),Array.prototype.splice.call(b,T,1),b.length==0&&(delete h.g[re],h.h--)))):h&&(h=zr(h))&&(b=h.g[b.toString()],h=-1,b&&(h=Ae(b,T,D,X)),(T=h>-1?b[h]:null)&&ut(T))}function ut(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[ge])ye(b.i,h);else{var T=h.type,D=h.proxy;b.removeEventListener?b.removeEventListener(T,D,h.capture):b.detachEvent?b.detachEvent(yt(T),D):b.addListener&&b.removeListener&&b.removeListener(D),(T=zr(b))?(ye(T,h),T.h==0&&(T.src=null,b[De]=null)):ue(h)}}}function yt(h){return h in je?je[h]:je[h]="on"+h}function tn(h,b){if(h.da)h=!0;else{b=new pe(b,this);const T=h.listener,D=h.ha||h.src;h.fa&&ut(h),h=T.call(D,b)}return h}function zr(h){return h=h[De],h instanceof me?h:null}var li="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ui(h){return typeof h=="function"?h:(h[li]||(h[li]=function(b){return h.handleEvent(b)}),h[li])}function Ht(){$.call(this),this.i=new me(this),this.M=this,this.G=null}x(Ht,$),Ht.prototype[ge]=!0,Ht.prototype.removeEventListener=function(h,b,T,D){st(this,h,b,T,D)};function jt(h,b){var T,D=h.G;if(D)for(T=[];D;D=D.G)T.push(D);if(h=h.M,D=b.type||b,typeof b=="string")b=new N(b,h);else if(b instanceof N)b.target=b.target||h;else{var X=b;b=new N(D,h),de(b,X)}X=!0;let re,xe;if(T)for(xe=T.length-1;xe>=0;xe--)re=b.g=T[xe],X=Ar(re,D,!0,b)&&X;if(re=b.g=h,X=Ar(re,D,!0,b)&&X,X=Ar(re,D,!1,b)&&X,T)for(xe=0;xe<T.length;xe++)re=b.g=T[xe],X=Ar(re,D,!1,b)&&X}Ht.prototype.N=function(){if(Ht.Z.N.call(this),this.i){var h=this.i;for(const b in h.g){const T=h.g[b];for(let D=0;D<T.length;D++)ue(T[D]);delete h.g[b],h.h--}}this.G=null},Ht.prototype.J=function(h,b,T,D){return this.i.add(String(h),b,!1,T,D)},Ht.prototype.K=function(h,b,T,D){return this.i.add(String(h),b,!0,T,D)};function Ar(h,b,T,D){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();let X=!0;for(let re=0;re<b.length;++re){const xe=b[re];if(xe&&!xe.da&&xe.capture==T){const Ge=xe.listener,hn=xe.ha||xe.src;xe.fa&&ye(h.i,xe),X=Ge.call(hn,D)!==!1&&X}}return X&&!D.defaultPrevented}function Da(h,b){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:c.setTimeout(h,b||0)}function Vi(h){h.g=Da(()=>{h.g=null,h.i&&(h.i=!1,Vi(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class Ot extends ${constructor(b,T){super(),this.m=b,this.l=T,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Vi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(h){$.call(this),this.h=h,this.g={}}x(Sr,$);var qi=[];function Hr(h){_e(h.g,function(b,T){this.g.hasOwnProperty(T)&&ut(b)},h),h.g={}}Sr.prototype.N=function(){Sr.Z.N.call(this),Hr(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fr=c.JSON.stringify,Bi=c.JSON.parse,kn=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function zi(){}function Hi(){}var mr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){N.call(this,"d")}x(Zt,N);function Sn(){N.call(this,"c")}x(Sn,N);var Dt={},Us=null;function Nr(){return Us=Us||new Ht}Dt.Ia="serverreachability";function Zn(h){N.call(this,Dt.Ia,h)}x(Zn,N);function Mn(h){const b=Nr();jt(b,new Zn(b))}Dt.STAT_EVENT="statevent";function Fr(h,b){N.call(this,Dt.STAT_EVENT,h),this.stat=b}x(Fr,N);function At(h){const b=Nr();jt(b,new Fr(b,h))}Dt.Ja="timingevent";function Jn(h,b){N.call(this,Dt.Ja,h),this.size=b}x(Jn,N);function In(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},b)}function Pn(){this.g=!0}Pn.prototype.ua=function(){this.g=!1};function Fi(h,b,T,D,X,re){h.info(function(){if(h.g)if(re){var xe="",Ge=re.split("&");for(let vt=0;vt<Ge.length;vt++){var hn=Ge[vt].split("=");if(hn.length>1){const Qt=hn[0];hn=hn[1];const _s=Qt.split("_");xe=_s.length>=2&&_s[1]=="type"?xe+(Qt+"="+hn+"&"):xe+(Qt+"=redacted&")}}}else xe=null;else xe=re;return"XMLHTTP REQ ("+D+") [attempt "+X+"]: "+b+`
`+T+`
`+xe})}function ci(h,b,T,D,X,re,xe){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+X+"]: "+b+`
`+T+`
`+re+" "+xe})}function Nn(h,b,T,D){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+$r(h,T)+(D?" "+D:"")})}function hs(h,b){h.info(function(){return"TIMEOUT: "+b})}Pn.prototype.info=function(){};function $r(h,b){if(!h.g)return b;if(!b)return null;try{const re=JSON.parse(b);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var T=re[h];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var X=D[0];if(X!="noop"&&X!="stop"&&X!="close")for(let xe=1;xe<D.length;xe++)D[xe]=""}}}}return fr(re)}catch{return b}}var Vs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$i={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gi;function ds(){}x(ds,zi),ds.prototype.g=function(){return new XMLHttpRequest},Gi=new ds;function gr(h){return encodeURIComponent(String(h))}function nn(h){var b=1;h=h.split(":");const T=[];for(;b>0&&h.length;)T.push(h.shift()),b--;return h.length&&T.push(h.join(":")),T}function pr(h,b,T,D){this.j=h,this.i=b,this.l=T,this.S=D||1,this.V=new Sr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yr}function yr(){this.i=null,this.g="",this.h=!1}var Ft={},rn={};function Cr(h,b,T){h.M=1,h.A=ms(Gt(b)),h.u=T,h.R=!0,Jt(h,null)}function Jt(h,b){h.F=Date.now(),Rr(h),h.B=Gt(h.A);var T=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),mi(T.i,"t",D),h.C=0,T=h.j.L,h.h=new yr,h.g=qh(h.j,T?b:null,!h.u),h.P>0&&(h.O=new Ot(p(h.Y,h,h.g),h.P)),b=h.V,T=h.g,D=h.ba;var X="readystatechange";Array.isArray(X)||(X&&(qi[0]=X.toString()),X=qi);for(let re=0;re<X.length;re++){const xe=ke(T,X[re],D||b.handleEvent,!1,b.h||b);if(!xe)break;b.g[xe.key]=xe}b=h.J?q(h.J):{},h.u?(h.v||(h.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,b)):(h.v="GET",h.g.ea(h.B,h.v,null,b)),Mn(),Fi(h.i,h.v,h.B,h.l,h.S,h.u)}pr.prototype.ba=function(h){h=h.target;const b=this.O;b&&B(h)==3?b.j():this.Y(h)},pr.prototype.Y=function(h){try{if(h==this.g)e:{const Ge=B(this.g),hn=this.g.ya(),vt=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||ne(this.g)))){this.K||Ge!=4||hn==7||(hn==8||vt<=0?Mn(3):Mn(2)),Mt(this);var b=this.g.ca();this.X=b;var T=Vo(this);if(this.o=b==200,ci(this.i,this.v,this.B,this.l,this.S,Ge,b),this.o){if(this.U&&!this.L){t:{if(this.g){var D,X=this.g;if((D=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(D)){var re=D;break t}}re=null}if(h=re)Nn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ir(this,h);else{this.o=!1,this.m=3,At(12),Un(this),er(this);break e}}if(this.R){h=!0;let Qt;for(;!this.K&&this.C<T.length;)if(Qt=ka(this,T),Qt==rn){Ge==4&&(this.m=4,At(14),h=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Ft){this.m=4,At(15),Nn(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Nn(this.i,this.l,Qt,null),Ir(this,Qt);if(La(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||T.length!=0||this.h.h||(this.m=1,At(16),h=!1),this.o=this.o&&h,!h)Nn(this.i,this.l,T,"[Invalid Chunked Response]"),Un(this),er(this);else if(T.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Wr(xe),xe.P=!0,At(11))}}else Nn(this.i,this.l,T,null),Ir(this,T);Ge==4&&Un(this),this.o&&!this.K&&(Ge==4?Zi(this.j,this):(this.o=!1,Rr(this)))}else Ue(this.g),b==400&&T.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Un(this),er(this)}}}catch{}finally{}};function Vo(h){if(!La(h))return h.g.la();const b=ne(h.g);if(b==="")return"";let T="";const D=b.length,X=B(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Un(h),er(h),"";h.h.i=new c.TextDecoder}for(let re=0;re<D;re++)h.h.h=!0,T+=h.h.i.decode(b[re],{stream:!(X&&re==D-1)});return b.length=0,h.h.g+=T,h.C=0,h.h.g}function La(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function ka(h,b){var T=h.C,D=b.indexOf(`
`,T);return D==-1?rn:(T=Number(b.substring(T,D)),isNaN(T)?Ft:(D+=1,D+T>b.length?rn:(b=b.slice(D,D+T),h.C=D+T,b)))}pr.prototype.cancel=function(){this.K=!0,Un(this)};function Rr(h){h.T=Date.now()+h.H,ui(h,h.H)}function ui(h,b){if(h.D!=null)throw Error("WatchDog timer not null");h.D=In(p(h.aa,h),b)}function Mt(h){h.D&&(c.clearTimeout(h.D),h.D=null)}pr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(hs(this.i,this.B),this.M!=2&&(Mn(),At(17)),Un(this),this.m=2,er(this)):ui(this,this.T-h)};function er(h){h.j.I==0||h.K||Zi(h.j,h)}function Un(h){Mt(h);var b=h.O;b&&typeof b.dispose=="function"&&b.dispose(),h.O=null,Hr(h.V),h.g&&(b=h.g,h.g=null,b.abort(),b.dispose())}function Ir(h,b){try{var T=h.j;if(T.I!=0&&(T.g==h||Vn(T.h,h))){if(!h.L&&Vn(T.h,h)&&T.I==3){try{var D=T.Ba.g.parse(b)}catch{D=null}if(Array.isArray(D)&&D.length==3){var X=D;if(X[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Fs(T),Et(T);else break e;Hn(T),At(18)}}else T.xa=X[1],0<T.xa-T.K&&X[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=In(p(T.Va,T),6e3));vr(T.h)<=1&&T.ta&&(T.ta=void 0)}else pi(T,11)}else if((h.L||T.g==h)&&Fs(T),!C(b))for(X=T.Ba.g.parse(b),b=0;b<X.length;b++){let vt=X[b];const Qt=vt[0];if(!(Qt<=T.K))if(T.K=Qt,vt=vt[1],T.I==2)if(vt[0]=="c"){T.M=vt[1],T.ba=vt[2];const _s=vt[3];_s!=null&&(T.ka=_s,T.j.info("VER="+T.ka));const yi=vt[4];yi!=null&&(T.za=yi,T.j.info("SVER="+T.za));const $s=vt[5];$s!=null&&typeof $s=="number"&&$s>0&&(D=1.5*$s,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const Gs=h.g;if(Gs){const Bo=Gs.g?Gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bo){var re=D.h;re.g||Bo.indexOf("spdy")==-1&&Bo.indexOf("quic")==-1&&Bo.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(tr(re,re.h),re.h=null))}if(D.G){const jl=Gs.g?Gs.g.getResponseHeader("X-HTTP-Session-Id"):null;jl&&(D.wa=jl,dt(D.J,D.G,jl))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var xe=h;if(D.na=Vh(D,D.L?D.ba:null,D.W),xe.L){qs(D.h,xe);var Ge=xe,hn=D.O;hn&&(Ge.H=hn),Ge.D&&(Mt(Ge),Rr(Ge)),D.g=xe}else Xr(D);T.i.length>0&&Rt(T)}else vt[0]!="stop"&&vt[0]!="close"||pi(T,7);else T.I==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?pi(T,7):Ze(T):vt[0]!="noop"&&T.l&&T.l.qa(vt),T.A=0)}}Mn(4)}catch{}}var $t=class{constructor(h,b){this.g=h,this.map=b}};function Ki(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fs(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function vr(h){return h.h?1:h.g?h.g.size:0}function Vn(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function tr(h,b){h.g?h.g.add(b):h.h=b}function qs(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}Ki.prototype.cancel=function(){if(this.i=Yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Yi(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const T of h.g.values())b=b.concat(T.G);return b}return A(h.i)}var Ma=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hi(h,b){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const D=h[T].indexOf("=");let X,re=null;D>=0?(X=h[T].substring(0,D),re=h[T].substring(D+1)):X=h[T],b(X,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function qn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;h instanceof qn?(this.l=h.l,Pt(this,h.j),this.o=h.o,this.g=h.g,jr(this,h.u),this.h=h.h,Gr(this,Pa(h.i)),this.m=h.m):h&&(b=String(h).match(Ma))?(this.l=!1,Pt(this,b[1]||"",!0),this.o=Or(b[2]||""),this.g=Or(b[3]||"",!0),jr(this,b[4]),this.h=Or(b[5]||"",!0),Gr(this,b[6]||"",!0),this.m=Or(b[7]||"")):(this.l=!1,this.i=new pn(null,this.l))}qn.prototype.toString=function(){const h=[];var b=this.j;b&&h.push(Bs(b,di,!0),":");var T=this.g;return(T||b=="file")&&(h.push("//"),(b=this.o)&&h.push(Bs(b,di,!0),"@"),h.push(gr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Bs(T,T.charAt(0)=="/"?Qi:fi,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Bs(T,ps)),h.join("")},qn.prototype.resolve=function(h){const b=Gt(this);let T=!!h.j;T?Pt(b,h.j):T=!!h.o,T?b.o=h.o:T=!!h.g,T?b.g=h.g:T=h.u!=null;var D=h.h;if(T)jr(b,h.u);else if(T=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var X=b.h.lastIndexOf("/");X!=-1&&(D=b.h.slice(0,X+1)+D)}if(X=D,X==".."||X==".")D="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){D=X.lastIndexOf("/",0)==0,X=X.split("/");const re=[];for(let xe=0;xe<X.length;){const Ge=X[xe++];Ge=="."?D&&xe==X.length&&re.push(""):Ge==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),D&&xe==X.length&&re.push("")):(re.push(Ge),D=!0)}D=re.join("/")}else D=X}return T?b.h=D:T=h.i.toString()!=="",T?Gr(b,Pa(h.i)):T=!!h.m,T&&(b.m=h.m),b};function Gt(h){return new qn(h)}function Pt(h,b,T){h.j=T?Or(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function jr(h,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);h.u=b}else h.u=null}function Gr(h,b,T){b instanceof pn?(h.i=b,gi(h.i,h.l)):(T||(b=Bs(b,gs)),h.i=new pn(b,h.l))}function dt(h,b,T){h.i.set(b,T)}function ms(h){return dt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Or(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Bs(h,b,T){return typeof h=="string"?(h=encodeURI(h).replace(b,jn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function jn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var di=/[#\/\?@]/g,fi=/[#\?:]/g,Qi=/[#\?]/g,gs=/[#\?@]/g,ps=/#/g;function pn(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function Kt(h){h.g||(h.g=new Map,h.h=0,h.i&&hi(h.i,function(b,T){h.add(decodeURIComponent(b.replace(/\+/g," ")),T)}))}n=pn.prototype,n.add=function(h,b){Kt(this),this.i=null,h=ys(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(b),this.h+=1,this};function Dr(h,b){Kt(h),b=ys(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function Xi(h,b){return Kt(h),b=ys(h,b),h.g.has(b)}n.forEach=function(h,b){Kt(this),this.g.forEach(function(T,D){T.forEach(function(X){h.call(b,X,D,this)},this)},this)};function nr(h,b){Kt(h);let T=[];if(typeof b=="string")Xi(h,b)&&(T=T.concat(h.g.get(ys(h,b))));else for(h=Array.from(h.g.values()),b=0;b<h.length;b++)T=T.concat(h[b]);return T}n.set=function(h,b){return Kt(this),this.i=null,h=ys(this,h),Xi(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},n.get=function(h,b){return h?(h=nr(this,h),h.length>0?String(h[0]):b):b};function mi(h,b,T){Dr(h,b),T.length>0&&(h.i=null,h.g.set(ys(h,b),A(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(let D=0;D<b.length;D++){var T=b[D];const X=gr(T);T=nr(this,T);for(let re=0;re<T.length;re++){let xe=X;T[re]!==""&&(xe+="="+gr(T[re])),h.push(xe)}}return this.i=h.join("&")};function Pa(h){const b=new pn;return b.i=h.i,h.g&&(b.g=new Map(h.g),b.h=h.h),b}function ys(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function gi(h,b){b&&!h.j&&(Kt(h),h.i=null,h.g.forEach(function(T,D){const X=D.toLowerCase();D!=X&&(Dr(this,D),mi(this,X,T))},h)),h.j=b}function rr(h,b){const T=new Pn;if(c.Image){const D=new Image;D.onload=v(Bn,T,"TestLoadImage: loaded",!0,b,D),D.onerror=v(Bn,T,"TestLoadImage: error",!1,b,D),D.onabort=v(Bn,T,"TestLoadImage: abort",!1,b,D),D.ontimeout=v(Bn,T,"TestLoadImage: timeout",!1,b,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else b(!1)}function cn(h,b){const T=new Pn,D=new AbortController,X=setTimeout(()=>{D.abort(),Bn(T,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:D.signal}).then(re=>{clearTimeout(X),re.ok?Bn(T,"TestPingServer: ok",!0,b):Bn(T,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(X),Bn(T,"TestPingServer: error",!1,b)})}function Bn(h,b,T,D,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),D(T)}catch{}}function Kr(){this.g=new kn}function zn(h){this.i=h.Sb||null,this.h=h.ab||!1}x(zn,zi),zn.prototype.g=function(){return new Yr(this.i,this.h)};function Yr(h,b){Ht.call(this),this.H=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Yr,Ht),n=Yr.prototype,n.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=b,this.readyState=1,sr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(b.body=h),(this.H||c).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,sr(this)),this.g&&(this.readyState=3,sr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?vs(this):sr(this),this.readyState==3&&Qr(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,vs(this))},n.Na=function(h){this.g&&(this.response=h,vs(this))},n.ga=function(){this.g&&vs(this)};function vs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,sr(h)}n.setRequestHeader=function(h,b){this.A.append(h,b)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var T=b.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=b.next();return h.join(`\r
`)};function sr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Yr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function On(h){let b="";return _e(h,function(T,D){b+=D,b+=":",b+=T,b+=`\r
`}),b}function bs(h,b,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=On(T),typeof h=="string"?T!=null&&gr(T):dt(h,b,T))}function We(h){Ht.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(We,Ht);var br=/^https?$/i,zs=["POST","PUT"];n=We.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,b,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gi.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(re){Hs(this,re);return}if(h=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var X in D)T.set(X,D[X]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const re of D.keys())T.set(re,D.get(re));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(re=>re.toLowerCase()=="content-type"),X=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(zs,b,void 0)>=0)||D||X||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,xe]of T)this.g.setRequestHeader(re,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){Hs(this,re)}};function Hs(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.o=5,Wi(h),j(h)}function Wi(h){h.A||(h.A=!0,jt(h,"complete"),jt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,jt(this,"complete"),jt(this,"abort"),j(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),j(this,!0)),We.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?_(this):this.Xa())},n.Xa=function(){_(this)};function _(h){if(h.h&&typeof l<"u"){if(h.v&&B(h)==4)setTimeout(h.Ca.bind(h),0);else if(jt(h,"readystatechange"),B(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var T;if(!(T=b)){var D;if(D=re===0){let xe=String(h.D).match(Ma)[1]||null;!xe&&c.self&&c.self.location&&(xe=c.self.location.protocol.slice(0,-1)),D=!br.test(xe?xe.toLowerCase():"")}T=D}if(T)jt(h,"complete"),jt(h,"success");else{h.o=6;try{var X=B(h)>2?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.ca()+"]",Wi(h)}}finally{j(h)}}}}function j(h,b){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,b||jt(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function B(h){return h.g?h.g.readyState:0}n.ca=function(){try{return B(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),Bi(b)}};function ne(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ue(h){const b={};h=(h.g&&B(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(C(h[D]))continue;var T=nn(h[D]);const X=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const re=b[X]||[];b[X]=re,re.push(T)}be(b,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Se(h,b,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||b}function Ye(h){this.za=0,this.i=[],this.j=new Pn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Se("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Se("baseRetryDelayMs",5e3,h),this.Za=Se("retryDelaySeedMs",1e4,h),this.Ta=Se("forwardChannelMaxRetries",2,h),this.va=Se("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ki(h&&h.concurrentRequestLimit),this.Ba=new Kr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ye.prototype,n.ka=8,n.I=1,n.connect=function(h,b,T,D){At(0),this.W=h,this.H=b||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=Vh(this,null,this.W),Rt(this)};function Ze(h){if(tt(h),h.I==3){var b=h.V++,T=Gt(h.J);if(dt(T,"SID",h.M),dt(T,"RID",b),dt(T,"TYPE","terminate"),Yt(h,T),b=new pr(h,h.j,b),b.M=2,b.A=ms(Gt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(b.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=b.A,T=!0),T||(b.g=qh(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Rr(b)}Uh(h)}function Et(h){h.g&&(Wr(h),h.g.cancel(),h.g=null)}function tt(h){Et(h),h.v&&(c.clearTimeout(h.v),h.v=null),Fs(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Rt(h){if(!fs(h.h)&&!h.m){h.m=!0;var b=h.Ea;ie||k(),ve||(ie(),ve=!0),L.add(b,h),h.D=0}}function un(h,b){return vr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=b.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=In(p(h.Ea,h,b),Ph(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const X=new pr(this,this.j,h);let re=this.o;if(this.U&&(re?(re=q(re),de(re,this.U)):re=this.U),this.u!==null||this.R||(X.J=re,re=null),this.S)e:{for(var b=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(b+=D,b>4096){b=T;break e}if(b===4096||T===this.i.length-1){b=T+1;break e}}b=1e3}else b=1e3;b=sn(this,X,b),T=Gt(this.J),dt(T,"RID",h),dt(T,"CVER",22),this.G&&dt(T,"X-HTTP-Session-Id",this.G),Yt(this,T),re&&(this.R?b="headers="+gr(On(re))+"&"+b:this.u&&bs(T,this.u,re)),tr(this.h,X),this.Ra&&dt(T,"TYPE","init"),this.S?(dt(T,"$req",b),dt(T,"SID","null"),X.U=!0,Cr(X,T,null)):Cr(X,T,b),this.I=2}}else this.I==3&&(h?Ut(this,h):this.i.length==0||fs(this.h)||Ut(this))};function Ut(h,b){var T;b?T=b.l:T=h.V++;const D=Gt(h.J);dt(D,"SID",h.M),dt(D,"RID",T),dt(D,"AID",h.K),Yt(h,D),h.u&&h.o&&bs(D,h.u,h.o),T=new pr(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),b&&(h.i=b.G.concat(h.i)),b=sn(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),tr(h.h,T),Cr(T,D,b)}function Yt(h,b){h.H&&_e(h.H,function(T,D){dt(b,D,T)}),h.l&&_e({},function(T,D){dt(b,D,T)})}function sn(h,b,T){T=Math.min(h.i.length,T);const D=h.l?p(h.l.Ka,h.l,h):null;e:{var X=h.i;let Ge=-1;for(;;){const hn=["count="+T];Ge==-1?T>0?(Ge=X[0].g,hn.push("ofs="+Ge)):Ge=0:hn.push("ofs="+Ge);let vt=!0;for(let Qt=0;Qt<T;Qt++){var re=X[Qt].g;const _s=X[Qt].map;if(re-=Ge,re<0)Ge=Math.max(0,X[Qt].g-100),vt=!1;else try{re="req"+re+"_"||"";try{var xe=_s instanceof Map?_s:Object.entries(_s);for(const[yi,$s]of xe){let Gs=$s;d($s)&&(Gs=fr($s)),hn.push(re+yi+"="+encodeURIComponent(Gs))}}catch(yi){throw hn.push(re+"type="+encodeURIComponent("_badmap")),yi}}catch{D&&D(_s)}}if(vt){xe=hn.join("&");break e}}xe=void 0}return h=h.i.splice(0,T),b.G=h,xe}function Xr(h){if(!h.g&&!h.v){h.Y=1;var b=h.Da;ie||k(),ve||(ie(),ve=!0),L.add(b,h),h.A=0}}function Hn(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=In(p(h.Da,h),Ph(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,qo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=In(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Et(this),qo(this))};function Wr(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function qo(h){h.g=new pr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var b=Gt(h.na);dt(b,"RID","rpc"),dt(b,"SID",h.M),dt(b,"AID",h.K),dt(b,"CI",h.F?"0":"1"),!h.F&&h.ia&&dt(b,"TO",h.ia),dt(b,"TYPE","xmlhttp"),Yt(h,b),h.u&&h.o&&bs(b,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=ms(Gt(b)),T.u=null,T.R=!0,Jt(T,h)}n.Va=function(){this.C!=null&&(this.C=null,Et(this),Hn(this),At(19))};function Fs(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Zi(h,b){var T=null;if(h.g==b){Fs(h),Wr(h),h.g=null;var D=2}else if(Vn(h.h,b))T=b.G,qs(h.h,b),D=1;else return;if(h.I!=0){if(b.o)if(D==1){T=b.u?b.u.length:0,b=Date.now()-b.F;var X=h.D;D=Nr(),jt(D,new Jn(D,T)),Rt(h)}else Xr(h);else if(X=b.m,X==3||X==0&&b.X>0||!(D==1&&un(h,b)||D==2&&Hn(h)))switch(T&&T.length>0&&(b=h.h,b.i=b.i.concat(T)),X){case 1:pi(h,5);break;case 4:pi(h,10);break;case 3:pi(h,6);break;default:pi(h,2)}}}function Ph(h,b){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*b}function pi(h,b){if(h.j.info("Error code "+b),b==2){var T=p(h.bb,h),D=h.Ua;const X=!D;D=new qn(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Pt(D,"https"),ms(D),X?rr(D.toString(),T):cn(D.toString(),T)}else At(2);h.I=0,h.l&&h.l.pa(b),Uh(h),tt(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Uh(h){if(h.I=0,h.ja=[],h.l){const b=Yi(h.h);(b.length!=0||h.i.length!=0)&&(S(h.ja,b),S(h.ja,h.i),h.h.i.length=0,A(h.i),h.i.length=0),h.l.oa()}}function Vh(h,b,T){var D=T instanceof qn?Gt(T):new qn(T);if(D.g!="")b&&(D.g=b+"."+D.g),jr(D,D.u);else{var X=c.location;D=X.protocol,b=b?b+"."+X.hostname:X.hostname,X=+X.port;const re=new qn(null);D&&Pt(re,D),b&&(re.g=b),X&&jr(re,X),T&&(re.h=T),D=re}return T=h.G,b=h.wa,T&&b&&dt(D,T,b),dt(D,"VER",h.ka),Yt(h,D),D}function qh(h,b,T){if(b&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Aa&&!h.ma?new We(new zn({ab:T})):new We(h.ma),b.Fa(h.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bh(){}n=Bh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ua(){}Ua.prototype.g=function(h,b){return new _r(h,b)};function _r(h,b){Ht.call(this),this.g=new Ye(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(h?h["X-WebChannel-Client-Profile"]=b.sa:h={"X-WebChannel-Client-Profile":b.sa}),this.g.U=h,(h=b&&b.Qb)&&!C(h)&&(this.g.u=h),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!C(b)&&(this.g.G=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new Ji(this)}x(_r,Ht),_r.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_r.prototype.close=function(){Ze(this.g)},_r.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=fr(h),h=T);b.i.push(new $t(b.Ya++,h)),b.I==3&&Rt(b)},_r.prototype.N=function(){this.g.l=null,delete this.j,Ze(this.g),delete this.g,_r.Z.N.call(this)};function zh(h){Zt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const T in b){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}x(zh,Zt);function Hh(){Sn.call(this),this.status=1}x(Hh,Sn);function Ji(h){this.g=h}x(Ji,Bh),Ji.prototype.ra=function(){jt(this.g,"a")},Ji.prototype.qa=function(h){jt(this.g,new zh(h))},Ji.prototype.pa=function(h){jt(this.g,new Hh)},Ji.prototype.oa=function(){jt(this.g,"b")},Ua.prototype.createWebChannel=Ua.prototype.g,_r.prototype.send=_r.prototype.o,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,hA=function(){return new Ua},uA=function(){return Nr()},cA=Dt,wy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vs.NO_ERROR=0,Vs.TIMEOUT=8,Vs.HTTP_ERROR=6,bf=Vs,$i.COMPLETE="complete",lA=$i,Hi.EventType=mr,mr.OPEN="a",mr.CLOSE="b",mr.ERROR="c",mr.MESSAGE="d",Ht.prototype.listen=Ht.prototype.J,Vu=Hi,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,oA=We}).apply(typeof Qd<"u"?Qd:typeof self<"u"?self:typeof window<"u"?window:{});const Fx="@firebase/firestore",$x="4.9.2";class or{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}or.UNAUTHENTICATED=new or(null),or.GOOGLE_CREDENTIALS=new or("google-credentials-uid"),or.FIRST_PARTY=new or("first-party-uid"),or.MOCK_USER=new or("mock-user");let Bc="12.3.0";const dl=new h0("@firebase/firestore");function oc(){return dl.logLevel}function Te(n,...e){if(dl.logLevel<=ot.DEBUG){const t=e.map(T0);dl.debug(`Firestore (${Bc}): ${n}`,...t)}}function Ta(n,...e){if(dl.logLevel<=ot.ERROR){const t=e.map(T0);dl.error(`Firestore (${Bc}): ${n}`,...t)}}function Tc(n,...e){if(dl.logLevel<=ot.WARN){const t=e.map(T0);dl.warn(`Firestore (${Bc}): ${n}`,...t)}}function T0(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Be(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,dA(n,r,t)}function dA(n,e,t){let r=`FIRESTORE (${Bc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ta(r),new Error(r)}function _t(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||dA(e,a,r)}function ze(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Ca{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Si{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class fA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ij{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(or.UNAUTHENTICATED)))}shutdown(){}}class aj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class oj{constructor(e){this.t=e,this.currentUser=or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_t(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new Si;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Si,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Si)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t(typeof r.accessToken=="string",31837,{l:r}),new fA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string",2055,{h:e}),new or(e)}}class lj{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=or.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cj{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new lj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(or.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Gx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,is(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_t(this.o===void 0,3512);const r=l=>{l.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Te("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Gx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(_t(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Gx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function hj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class A0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=hj(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function Ty(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),l=e.charAt(r);if(a!==l)return Fp(a)===Fp(l)?lt(a,l):Fp(a)?1:-1}return lt(n.length,e.length)}const dj=55296,fj=57343;function Fp(n){const e=n.charCodeAt(0);return e>=dj&&e<=fj}function Ac(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}const Kx="__name__";class wi{constructor(e,t,r){t===void 0?t=0:t>e.length&&Be(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Be(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return wi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=wi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return lt(e.length,t.length)}static compareSegments(e,t){const r=wi.isNumericId(e),a=wi.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?wi.extractNumericId(e).compare(wi.extractNumericId(t)):Ty(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xo.fromString(e.substring(4,e.length-2))}}class kt extends wi{construct(e,t,r){return new kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new kt(t)}static emptyPath(){return new kt([])}}const mj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends wi{construct(e,t,r){return new Qn(e,t,r)}static isValidIdentifier(e){return mj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Kx}static keyField(){return new Qn([Kx])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new we(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new we(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new we(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(t)}static emptyPath(){return new Qn([])}}class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(kt.fromString(e))}static fromName(e){return new Pe(kt.fromString(e).popFirst(5))}static empty(){return new Pe(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new kt(e.slice()))}}function mA(n,e,t){if(!t)throw new we(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gj(n,e,t,r){if(e===!0&&r===!0)throw new we(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Yx(n){if(!Pe.isDocumentKey(n))throw new we(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Qx(n){if(Pe.isDocumentKey(n))throw new we(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function am(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Be(12329,{type:typeof n})}function wr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=am(n);throw new we(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ah(n,e){if(!gA(n))throw new we(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new we(ce.INVALID_ARGUMENT,t);return!0}const Xx=-62135596800,Wx=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Wx);return new zt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Xx)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Wx}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ah(e,zt._jsonSchema))return new zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zt._jsonSchemaVersion="firestore/timestamp/1.0",zt._jsonSchema={type:wn("string",zt._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new zt(0,0))}static max(){return new He(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rh=-1;function pj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=He.fromTimestamp(r===1e9?new zt(t+1,0):new zt(t,r));return new Ao(a,Pe.empty(),e)}function yj(n){return new Ao(n.readTime,n.key,rh)}class Ao{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ao(He.min(),Pe.empty(),rh)}static max(){return new Ao(He.max(),Pe.empty(),rh)}}function vj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Pe.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}const bj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _j{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function zc(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==bj)throw n;Te("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,r)=>{t(e)}))}static reject(e){return new fe(((t,r)=>{r(e)}))}static waitFor(e){return new fe(((t,r)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(m=>r(m)))})),c=!0,l===a&&t()}))}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next((a=>a?fe.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new fe(((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((v=>{c[p]=v,++d,d===l&&r(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new fe(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}function xj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Hc(n){return n.name==="IndexedDbTransactionError"}class om{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}om.ce=-1;const S0=-1;function lm(n){return n==null}function kf(n){return n===0&&1/n==-1/0}function Ej(n){return typeof n=="number"&&Number.isInteger(n)&&!kf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const pA="";function wj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Zx(e)),e=Tj(n.get(t),e);return Zx(e)}function Tj(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case pA:t+="";break;default:t+=l}}return t}function Zx(n){return n+pA+""}function Jx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ko(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Aj(n,e){const t=[];for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.push(e(n[r],r,n));return t}function yA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class en{constructor(e,t){this.comparator=e,this.root=t||Yn.EMPTY}insert(e,t){return new en(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xd(this.root,e,this.comparator,!0)}}class Xd{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Yn.RED,this.left=a??Yn.EMPTY,this.right=l??Yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Yn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Yn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1;Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Yn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eE(this.data.getIterator())}getIteratorFrom(e){return new eE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class eE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class as{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new as([])}unionWith(e){let t=new Rn(Qn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new as(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ac(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class vA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new vA("Invalid base64 string: "+l):l}})(e);return new Wn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Wn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wn.EMPTY_BYTE_STRING=new Wn("");const Sj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function So(n){if(_t(!!n,39018),typeof n=="string"){let e=0;const t=Sj.exec(n);if(_t(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gn(n.seconds),nanos:gn(n.nanos)}}function gn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function No(n){return typeof n=="string"?Wn.fromBase64String(n):Wn.fromUint8Array(n)}const bA="server_timestamp",_A="__type__",xA="__previous_value__",EA="__local_write_time__";function N0(n){return(n?.mapValue?.fields||{})[_A]?.stringValue===bA}function cm(n){const e=n.mapValue.fields[xA];return N0(e)?cm(e):e}function sh(n){const e=So(n.mapValue.fields[EA].timestampValue);return new zt(e.seconds,e.nanos)}class Nj{constructor(e,t,r,a,l,c,d,m,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=v}}const Mf="(default)";class ih{constructor(e,t){this.projectId=e,this.database=t||Mf}static empty(){return new ih("","")}get isDefaultDatabase(){return this.database===Mf}isEqual(e){return e instanceof ih&&e.projectId===this.projectId&&e.database===this.database}}const wA="__type__",Cj="__max__",Wd={mapValue:{}},TA="__vector__",Pf="value";function Co(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?N0(n)?4:Ij(n)?9007199254740991:Rj(n)?10:11:Be(28295,{value:n})}function Oi(n,e){if(n===e)return!0;const t=Co(n);if(t!==Co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sh(n).isEqual(sh(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=So(a.timestampValue),d=So(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return No(a.bytesValue).isEqual(No(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return gn(a.geoPointValue.latitude)===gn(l.geoPointValue.latitude)&&gn(a.geoPointValue.longitude)===gn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return gn(a.integerValue)===gn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=gn(a.doubleValue),d=gn(l.doubleValue);return c===d?kf(c)===kf(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Ac(n.arrayValue.values||[],e.arrayValue.values||[],Oi);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(Jx(c)!==Jx(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Oi(c[m],d[m])))return!1;return!0})(n,e);default:return Be(52216,{left:n})}}function ah(n,e){return(n.values||[]).find((t=>Oi(t,e)))!==void 0}function Sc(n,e){if(n===e)return 0;const t=Co(n),r=Co(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=gn(l.integerValue||l.doubleValue),m=gn(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return tE(n.timestampValue,e.timestampValue);case 4:return tE(sh(n),sh(e));case 5:return Ty(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=No(l),m=No(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const v=lt(d[p],m[p]);if(v!==0)return v}return lt(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=lt(gn(l.latitude),gn(c.latitude));return d!==0?d:lt(gn(l.longitude),gn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return nE(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},m=c.fields||{},p=d[Pf]?.arrayValue,v=m[Pf]?.arrayValue,x=lt(p?.values?.length||0,v?.values?.length||0);return x!==0?x:nE(p,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Wd.mapValue&&c===Wd.mapValue)return 0;if(l===Wd.mapValue)return 1;if(c===Wd.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let x=0;x<m.length&&x<v.length;++x){const E=Ty(m[x],v[x]);if(E!==0)return E;const A=Sc(d[m[x]],p[v[x]]);if(A!==0)return A}return lt(m.length,v.length)})(n.mapValue,e.mapValue);default:throw Be(23264,{he:t})}}function tE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=So(n),r=So(e),a=lt(t.seconds,r.seconds);return a!==0?a:lt(t.nanos,r.nanos)}function nE(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Sc(t[a],r[a]);if(l)return l}return lt(t.length,r.length)}function Nc(n){return Ay(n)}function Ay(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=So(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return No(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Ay(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Ay(t.fields[c])}`;return a+"}"})(n.mapValue):Be(61005,{value:n})}function _f(n){switch(Co(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cm(n);return e?16+_f(e):16;case 5:return 2*n.stringValue.length;case 6:return No(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+_f(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return ko(r.fields,((l,c)=>{a+=l.length+_f(c)})),a})(n.mapValue);default:throw Be(13486,{value:n})}}function rE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sy(n){return!!n&&"integerValue"in n}function C0(n){return!!n&&"arrayValue"in n}function sE(n){return!!n&&"nullValue"in n}function iE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xf(n){return!!n&&"mapValue"in n}function Rj(n){return(n?.mapValue?.fields||{})[wA]?.stringValue===TA}function Yu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ko(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Yu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yu(n.arrayValue.values[t]);return e}return{...n}}function Ij(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Cj}class qr{constructor(e){this.value=e}static empty(){return new qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yu(t)}setAll(e){let t=Qn.emptyPath(),r={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Yu(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());xf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];xf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){ko(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new qr(Yu(this.value))}}function AA(n){const e=[];return ko(n.fields,((t,r)=>{const a=new Qn([t]);if(xf(r)){const l=AA(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new as(e)}class lr{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new lr(e,0,He.min(),He.min(),He.min(),qr.empty(),0)}static newFoundDocument(e,t,r,a){return new lr(e,1,t,He.min(),r,a,0)}static newNoDocument(e,t){return new lr(e,2,t,He.min(),He.min(),qr.empty(),0)}static newUnknownDocument(e,t){return new lr(e,3,t,He.min(),He.min(),qr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Uf{constructor(e,t){this.position=e,this.inclusive=t}}function aE(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?r=Pe.comparator(Pe.fromName(c.referenceValue),t.key):r=Sc(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function oE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oi(n.position[t],e.position[t]))return!1;return!0}class oh{constructor(e,t="asc"){this.field=e,this.dir=t}}function jj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class SA{}class En extends SA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Dj(e,t,r):t==="array-contains"?new Mj(e,r):t==="in"?new Pj(e,r):t==="not-in"?new Uj(e,r):t==="array-contains-any"?new Vj(e,r):new En(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Lj(e,r):new kj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Sc(t,this.value)):t!==null&&Co(this.value)===Co(t)&&this.matchesComparison(Sc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends SA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ri(e,t)}matches(e){return NA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function NA(n){return n.op==="and"}function CA(n){return Oj(n)&&NA(n)}function Oj(n){for(const e of n.filters)if(e instanceof ri)return!1;return!0}function Ny(n){if(n instanceof En)return n.field.canonicalString()+n.op.toString()+Nc(n.value);if(CA(n))return n.filters.map((e=>Ny(e))).join(",");{const e=n.filters.map((t=>Ny(t))).join(",");return`${n.op}(${e})`}}function RA(n,e){return n instanceof En?(function(r,a){return a instanceof En&&r.op===a.op&&r.field.isEqual(a.field)&&Oi(r.value,a.value)})(n,e):n instanceof ri?(function(r,a){return a instanceof ri&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,d)=>l&&RA(c,a.filters[d])),!0):!1})(n,e):void Be(19439)}function IA(n){return n instanceof En?(function(t){return`${t.field.canonicalString()} ${t.op} ${Nc(t.value)}`})(n):n instanceof ri?(function(t){return t.op.toString()+" {"+t.getFilters().map(IA).join(" ,")+"}"})(n):"Filter"}class Dj extends En{constructor(e,t,r){super(e,t,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Lj extends En{constructor(e,t){super(e,"in",t),this.keys=jA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class kj extends En{constructor(e,t){super(e,"not-in",t),this.keys=jA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function jA(n,e){return(e.arrayValue?.values||[]).map((t=>Pe.fromName(t.referenceValue)))}class Mj extends En{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return C0(t)&&ah(t.arrayValue,this.value)}}class Pj extends En{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ah(this.value.arrayValue,t)}}class Uj extends En{constructor(e,t){super(e,"not-in",t)}matches(e){if(ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ah(this.value.arrayValue,t)}}class Vj extends En{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!C0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ah(this.value.arrayValue,r)))}}class qj{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function lE(n,e=null,t=[],r=[],a=null,l=null,c=null){return new qj(n,e,t,r,a,l,c)}function R0(n){const e=ze(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Ny(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),lm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Nc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Nc(r))).join(",")),e.Te=t}return e.Te}function I0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!RA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oE(n.startAt,e.startAt)&&oE(n.endAt,e.endAt)}function Cy(n){return Pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Fc{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Bj(n,e,t,r,a,l,c,d){return new Fc(n,e,t,r,a,l,c,d)}function um(n){return new Fc(n)}function cE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function OA(n){return n.collectionGroup!==null}function Qu(n){const e=ze(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Rn(Qn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new oh(l,r))})),t.has(Qn.keyField().canonicalString())||e.Ie.push(new oh(Qn.keyField(),r))}return e.Ie}function Ni(n){const e=ze(n);return e.Ee||(e.Ee=DA(e,Qu(n))),e.Ee}function zj(n){const e=ze(n);return e.de||(e.de=DA(e,n.explicitOrderBy)),e.de}function DA(n,e){if(n.limitType==="F")return lE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new oh(a.field,l)}));const t=n.endAt?new Uf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Uf(n.startAt.position,n.startAt.inclusive):null;return lE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ry(n,e){const t=n.filters.concat([e]);return new Fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vf(n,e,t){return new Fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hm(n,e){return I0(Ni(n),Ni(e))&&n.limitType===e.limitType}function LA(n){return`${R0(Ni(n))}|lt:${n.limitType}`}function lc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>IA(a))).join(", ")}]`),lm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Nc(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Nc(a))).join(",")),`Target(${r})`})(Ni(n))}; limitType=${n.limitType})`}function dm(n,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Pe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,a){for(const l of Qu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(c,d,m){const p=aE(c,d,m);return c.inclusive?p<=0:p<0})(r.startAt,Qu(r),a)||r.endAt&&!(function(c,d,m){const p=aE(c,d,m);return c.inclusive?p>=0:p>0})(r.endAt,Qu(r),a))})(n,e)}function Hj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kA(n){return(e,t)=>{let r=!1;for(const a of Qu(n)){const l=Fj(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function Fj(n,e,t){const r=n.field.isKeyField()?Pe.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?Sc(m,p):Be(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Be(19790,{direction:n.dir})}}class _l{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return yA(this.inner)}size(){return this.innerSize}}const $j=new en(Pe.comparator);function Aa(){return $j}const MA=new en(Pe.comparator);function qu(...n){let e=MA;for(const t of n)e=e.insert(t.key,t);return e}function PA(n){let e=MA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function il(){return Xu()}function UA(){return Xu()}function Xu(){return new _l((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Gj=new en(Pe.comparator),Kj=new Rn(Pe.comparator);function ct(...n){let e=Kj;for(const t of n)e=e.add(t);return e}const Yj=new Rn(lt);function Qj(){return Yj}function j0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kf(e)?"-0":e}}function VA(n){return{integerValue:""+n}}function Xj(n,e){return Ej(e)?VA(e):j0(n,e)}class fm{constructor(){this._=void 0}}function Wj(n,e,t){return n instanceof lh?(function(a,l){const c={fields:{[_A]:{stringValue:bA},[EA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&N0(l)&&(l=cm(l)),l&&(c.fields[xA]=l),{mapValue:c}})(t,e):n instanceof Cc?BA(n,e):n instanceof Rc?zA(n,e):(function(a,l){const c=qA(a,l),d=uE(c)+uE(a.Ae);return Sy(c)&&Sy(a.Ae)?VA(d):j0(a.serializer,d)})(n,e)}function Zj(n,e,t){return n instanceof Cc?BA(n,e):n instanceof Rc?zA(n,e):t}function qA(n,e){return n instanceof qf?(function(r){return Sy(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class lh extends fm{}class Cc extends fm{constructor(e){super(),this.elements=e}}function BA(n,e){const t=HA(e);for(const r of n.elements)t.some((a=>Oi(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Rc extends fm{constructor(e){super(),this.elements=e}}function zA(n,e){let t=HA(e);for(const r of n.elements)t=t.filter((a=>!Oi(a,r)));return{arrayValue:{values:t}}}class qf extends fm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function uE(n){return gn(n.integerValue||n.doubleValue)}function HA(n){return C0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class O0{constructor(e,t){this.field=e,this.transform=t}}function Jj(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof Cc&&a instanceof Cc||r instanceof Rc&&a instanceof Rc?Ac(r.elements,a.elements,Oi):r instanceof qf&&a instanceof qf?Oi(r.Ae,a.Ae):r instanceof lh&&a instanceof lh})(n.transform,e.transform)}class e5{constructor(e,t){this.version=e,this.transformResults=t}}class Ls{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ls}static exists(e){return new Ls(void 0,e)}static updateTime(e){return new Ls(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ef(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class mm{}function FA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new D0(n.key,Ls.none()):new Sh(n.key,n.data,Ls.none());{const t=n.data,r=qr.empty();let a=new Rn(Qn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Mo(n.key,r,new as(a.toArray()),Ls.none())}}function t5(n,e,t){n instanceof Sh?(function(a,l,c){const d=a.value.clone(),m=dE(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Mo?(function(a,l,c){if(!Ef(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=dE(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll($A(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Wu(n,e,t,r){return n instanceof Sh?(function(l,c,d,m){if(!Ef(l.precondition,c))return d;const p=l.value.clone(),v=fE(l.fieldTransforms,m,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Mo?(function(l,c,d,m){if(!Ef(l.precondition,c))return d;const p=fE(l.fieldTransforms,m,c),v=c.data;return v.setAll($A(l)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((x=>x.field)))})(n,e,t,r):(function(l,c,d){return Ef(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function n5(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=qA(r.transform,a||null);l!=null&&(t===null&&(t=qr.empty()),t.set(r.field,l))}return t||null}function hE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Ac(r,a,((l,c)=>Jj(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Sh extends mm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Mo extends mm{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function $A(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function dE(n,e,t){const r=new Map;_t(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,Zj(c,d,t[a]))}return r}function fE(n,e,t){const r=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);r.set(a.field,Wj(l,c,e))}return r}class D0 extends mm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class r5 extends mm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class s5{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&t5(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Wu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=UA();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=FA(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(He.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ct())}isEqual(e){return this.batchId===e.batchId&&Ac(this.mutations,e.mutations,((t,r)=>hE(t,r)))&&Ac(this.baseMutations,e.baseMutations,((t,r)=>hE(t,r)))}}class L0{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){_t(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return Gj})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new L0(e,t,r,a)}}class i5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class a5{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}class o5{constructor(e,t){this.count=e,this.unchangedNames=t}}var xn,ft;function l5(n){switch(n){case ce.OK:return Be(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Be(15467,{code:n})}}function GA(n){if(n===void 0)return Ta("GRPC error has no .code"),ce.UNKNOWN;switch(n){case xn.OK:return ce.OK;case xn.CANCELLED:return ce.CANCELLED;case xn.UNKNOWN:return ce.UNKNOWN;case xn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case xn.INTERNAL:return ce.INTERNAL;case xn.UNAVAILABLE:return ce.UNAVAILABLE;case xn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case xn.NOT_FOUND:return ce.NOT_FOUND;case xn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case xn.ABORTED:return ce.ABORTED;case xn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case xn.DATA_LOSS:return ce.DATA_LOSS;default:return Be(39323,{code:n})}}(ft=xn||(xn={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";function c5(){return new TextEncoder}const u5=new xo([4294967295,4294967295],0);function mE(n){const e=c5().encode(n),t=new aA;return t.update(e),new Uint8Array(t.digest())}function gE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new xo([t,r],0),new xo([a,l],0)]}class k0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bu(`Invalid padding: ${t}`);if(r<0)throw new Bu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xo.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(xo.fromNumber(r)));return a.compare(u5)===1&&(a=new xo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=mE(e),[r,a]=gE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new k0(l,a,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=mE(e),[r,a]=gE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gm{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Nh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new gm(He.min(),a,new en(lt),Aa(),ct())}}class Nh{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Nh(r,t,ct(),ct(),ct())}}class wf{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class KA{constructor(e,t){this.targetId=e,this.Ce=t}}class YA{constructor(e,t,r=Wn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class pE{constructor(){this.ve=0,this.Fe=yE(),this.Me=Wn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ct(),t=ct(),r=ct();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Be(38017,{changeType:l})}})),new Nh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=yE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class h5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Aa(),this.Je=Zd(),this.He=Zd(),this.Ye=new en(lt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Cy(l))if(r===0){const c=new Pe(l.path);this.et(t,c,lr.newNoDocument(c,He.min()))}else _t(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=No(r).toUint8Array()}catch(m){if(m instanceof vA)return Tc("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new k0(c,a,l)}catch(m){return Tc(m instanceof Bu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Cy(d.target)){const m=new Pe(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,lr.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let r=ct();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new gm(e,t,this.Ye,this.je,r);return this.je=Aa(),this.Je=Zd(),this.He=Zd(),this.Ye=new en(lt),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new pE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Rn(lt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Rn(lt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new pE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Zd(){return new en(Pe.comparator)}function yE(){return new en(Pe.comparator)}const d5={asc:"ASCENDING",desc:"DESCENDING"},f5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},m5={and:"AND",or:"OR"};class g5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Iy(n,e){return n.useProto3Json||lm(e)?e:{value:e}}function Bf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function p5(n,e){return Bf(n,e.toTimestamp())}function Ci(n){return _t(!!n,49232),He.fromTimestamp((function(t){const r=So(t);return new zt(r.seconds,r.nanos)})(n))}function M0(n,e){return jy(n,e).canonicalString()}function jy(n,e){const t=(function(a){return new kt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function XA(n){const e=kt.fromString(n);return _t(nS(e),10190,{key:e.toString()}),e}function Oy(n,e){return M0(n.databaseId,e.path)}function $p(n,e){const t=XA(e);if(t.get(1)!==n.databaseId.projectId)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(ZA(t))}function WA(n,e){return M0(n.databaseId,e)}function y5(n){const e=XA(n);return e.length===4?kt.emptyPath():ZA(e)}function Dy(n){return new kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZA(n){return _t(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function vE(n,e,t){return{name:Oy(n,e),fields:t.value.mapValue.fields}}function v5(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Be(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,v){return p.useProto3Json?(_t(v===void 0||typeof v=="string",58123),Wn.fromBase64String(v||"")):(_t(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Wn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(p){const v=p.code===void 0?ce.UNKNOWN:GA(p.code);return new we(v,p.message||"")})(c);t=new YA(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=$p(n,r.document.name),l=Ci(r.document.updateTime),c=r.document.createTime?Ci(r.document.createTime):He.min(),d=new qr({mapValue:{fields:r.document.fields}}),m=lr.newFoundDocument(a,l,c,d),p=r.targetIds||[],v=r.removedTargetIds||[];t=new wf(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=$p(n,r.document),l=r.readTime?Ci(r.readTime):He.min(),c=lr.newNoDocument(a,l),d=r.removedTargetIds||[];t=new wf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=$p(n,r.document),l=r.removedTargetIds||[];t=new wf([],l,a,null)}else{if(!("filter"in e))return Be(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new o5(a,l),d=r.targetId;t=new KA(d,c)}}return t}function b5(n,e){let t;if(e instanceof Sh)t={update:vE(n,e.key,e.value)};else if(e instanceof D0)t={delete:Oy(n,e.key)};else if(e instanceof Mo)t={update:vE(n,e.key,e.data),updateMask:C5(e.fieldMask)};else{if(!(e instanceof r5))return Be(16599,{Vt:e.type});t={verify:Oy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof lh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Cc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Rc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof qf)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Be(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:p5(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Be(27497)})(n,e.precondition)),t}function _5(n,e){return n&&n.length>0?(_t(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?Ci(a.updateTime):Ci(l);return c.isEqual(He.min())&&(c=Ci(l)),new e5(c,a.transformResults||[])})(t,e)))):[]}function x5(n,e){return{documents:[WA(n,e.path)]}}function JA(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=WA(n,a);const l=(function(p){if(p.length!==0)return tS(ri.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((v=>(function(E){return{field:fo(E.field),direction:A5(E.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Iy(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function E5(n,e,t,r){const{ft:a,parent:l}=JA(n,e),c={},d=[];let m=0;return t.forEach((p=>{const v="aggregate_"+m++;c[v]=p.alias,p.aggregateType==="count"?d.push({alias:v,count:{}}):p.aggregateType==="avg"?d.push({alias:v,avg:{field:fo(p.fieldPath)}}):p.aggregateType==="sum"&&d.push({alias:v,sum:{field:fo(p.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:d,structuredQuery:a.structuredQuery},parent:a.parent},gt:c,parent:l}}function w5(n){let e=y5(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){_t(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(x){const E=eS(x);return E instanceof ri&&CA(E)?E.getFilters():[E]})(t.where));let c=[];t.orderBy&&(c=(function(x){return x.map((E=>(function(S){return new oh(cc(S.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(E)))})(t.orderBy));let d=null;t.limit&&(d=(function(x){let E;return E=typeof x=="object"?x.value:x,lm(E)?null:E})(t.limit));let m=null;t.startAt&&(m=(function(x){const E=!!x.before,A=x.values||[];return new Uf(A,E)})(t.startAt));let p=null;return t.endAt&&(p=(function(x){const E=!x.before,A=x.values||[];return new Uf(A,E)})(t.endAt)),Bj(e,a,c,l,d,"F",m,p)}function T5(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function eS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=cc(t.unaryFilter.field);return En.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=cc(t.unaryFilter.field);return En.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=cc(t.unaryFilter.field);return En.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=cc(t.unaryFilter.field);return En.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(n):n.fieldFilter!==void 0?(function(t){return En.create(cc(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ri.create(t.compositeFilter.filters.map((r=>eS(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(t.compositeFilter.op))})(n):Be(30097,{filter:n})}function A5(n){return d5[n]}function S5(n){return f5[n]}function N5(n){return m5[n]}function fo(n){return{fieldPath:n.canonicalString()}}function cc(n){return Qn.fromServerFormat(n.fieldPath)}function tS(n){return n instanceof En?(function(t){if(t.op==="=="){if(iE(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NAN"}};if(sE(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(iE(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NOT_NAN"}};if(sE(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(t.field),op:S5(t.op),value:t.value}}})(n):n instanceof ri?(function(t){const r=t.getFilters().map((a=>tS(a)));return r.length===1?r[0]:{compositeFilter:{op:N5(t.op),filters:r}}})(n):Be(54877,{filter:n})}function C5(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function nS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class po{constructor(e,t,r,a,l=He.min(),c=He.min(),d=Wn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new po(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class R5{constructor(e){this.yt=e}}function I5(n){const e=w5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vf(e,e.limit,"L"):e}class j5{constructor(){this.Cn=new O5}addToCollectionParentIndex(e,t){return this.Cn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Ao.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(Ao.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class O5{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Rn(kt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Rn(kt.comparator)).toArray()}}const bE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rS=41943040;class Vr{static withCacheSize(e){return new Vr(e,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}Vr.DEFAULT_COLLECTION_PERCENTILE=10,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vr.DEFAULT=new Vr(rS,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vr.DISABLED=new Vr(-1,0,0);class Ic{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ic(0)}static cr(){return new Ic(-1)}}const _E="LruGarbageCollector",D5=1048576;function xE([n,e],[t,r]){const a=lt(n,t);return a===0?lt(e,r):a}class L5{constructor(e){this.Ir=e,this.buffer=new Rn(xE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();xE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class k5{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(_E,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hc(t)?Te(_E,"Ignoring IndexedDB error during garbage collection: ",t):await zc(t)}await this.Vr(3e5)}))}}class M5{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(om.ce);const r=new L5(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(bE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,c,d,m,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,c=Date.now(),this.nthSequenceNumber(e,a)))).next((x=>(r=x,d=Date.now(),this.removeTargets(e,r,t)))).next((x=>(l=x,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((x=>(p=Date.now(),oc()<=ot.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${x} documents in `+(p-m)+`ms
Total Duration: ${p-v}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:x}))))}}function P5(n,e){return new M5(n,e)}class U5{constructor(){this.changes=new _l((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,lr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class V5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class q5{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Wu(r.mutation,a,as.empty(),zt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ct()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ct()){const a=il();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=qu();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=il();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ct())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,a){let l=Aa();const c=Xu(),d=(function(){return Xu()})();return t.forEach(((m,p)=>{const v=r.get(p.key);a.has(p.key)&&(v===void 0||v.mutation instanceof Mo)?l=l.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Wu(v.mutation,p,v.mutation.getFieldMask(),zt.now())):c.set(p.key,as.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,v)=>c.set(p,v))),t.forEach(((p,v)=>d.set(p,new V5(v,c.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Xu();let a=new en(((c,d)=>c-d)),l=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let v=r.get(m)||as.empty();v=d.applyToLocalView(p,v),r.set(m,v);const x=(a.get(d.batchId)||ct()).add(m);a=a.insert(d.batchId,x)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,v=m.value,x=UA();v.forEach((E=>{if(!l.has(E)){const A=FA(t.get(E),r.get(E));A!==null&&x.set(E,A),l=l.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,x))}return fe.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return Pe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):OA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):fe.resolve(il());let d=rh,m=l;return c.next((p=>fe.forEach(p,((v,x)=>(d<x.largestBatchId&&(d=x.largestBatchId),l.get(v)?fe.resolve():this.remoteDocumentCache.getEntry(e,v).next((E=>{m=m.insert(v,E)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,ct()))).next((v=>({batchId:d,changes:PA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next((r=>{let a=qu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=qu();return this.indexManager.getCollectionParents(e,l).next((d=>fe.forEach(d,(m=>{const p=(function(x,E){return new Fc(E,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next((v=>{v.forEach(((x,E)=>{c=c.insert(x,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((m,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,lr.newInvalidDocument(v)))}));let d=qu();return c.forEach(((m,p)=>{const v=l.get(m);v!==void 0&&Wu(v.mutation,p,as.empty(),zt.now()),dm(t,p)&&(d=d.insert(m,p))})),d}))}}class B5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return fe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ci(a.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:I5(a.bundledQuery),readTime:Ci(a.readTime)}})(t)),fe.resolve()}}class z5{constructor(){this.overlays=new en(Pe.comparator),this.qr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=il();return fe.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.St(e,t,l)})),fe.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const a=il(),l=t.length+1,c=new Pe(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return fe.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new en(((p,v)=>p-v));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=l.get(p.largestBatchId);v===null&&(v=il(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=il(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=a)););return fe.resolve(d)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new i5(t,r));let l=this.qr.get(t);l===void 0&&(l=ct(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}class H5{constructor(){this.sessionToken=Wn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}class P0{constructor(){this.Qr=new Rn(Ln.$r),this.Ur=new Rn(Ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ln(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Ln(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Pe(new kt([])),r=new Ln(t,e),a=new Ln(t,e+1),l=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Pe(new kt([])),r=new Ln(t,e),a=new Ln(t,e+1);let l=ct();return this.Ur.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ln(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ln{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Pe.comparator(e.key,t.key)||lt(e.Yr,t.Yr)}static Kr(e,t){return lt(e.Yr,t.Yr)||Pe.comparator(e.key,t.key)}}class F5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Rn(Ln.$r)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new s5(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new Ln(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return fe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?S0:this.tr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ln(t,0),a=new Ln(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(lt);return t.forEach((a=>{const l=new Ln(a,0),c=new Ln(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{r=r.add(d.Yr)}))})),fe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;Pe.isDocumentKey(l)||(l=l.child(""));const c=new Ln(new Pe(l),0);let d=new Rn(lt);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Yr)),!0)}),c),fe.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){_t(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return fe.forEach(t.mutations,(a=>{const l=new Ln(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Ln(t,0),a=this.Zr.firstAfterOrEqual(r);return fe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $5{constructor(e){this.ri=e,this.docs=(function(){return new en(Pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():lr.newInvalidDocument(t))}getEntries(e,t){let r=Aa();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():lr.newInvalidDocument(a))})),fe.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Aa();const c=t.path,d=new Pe(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||vj(yj(v),r)<=0||(a.has(v.key)||dm(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return fe.resolve(l)}getAllFromCollectionGroup(e,t,r,a){Be(9500)}ii(e,t){return fe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new G5(this)}getSize(e){return fe.resolve(this.size)}}class G5 extends U5{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),fe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class K5{constructor(e){this.persistence=e,this.si=new _l((t=>R0(t)),I0),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new P0,this.targetCount=0,this.ai=Ic.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),fe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ic(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Pr(t),fe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),fe.waitFor(l).next((()=>a))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this._i.containsKey(t))}}class sS{constructor(e,t){this.ui={},this.overlays={},this.ci=new om(0),this.li=!1,this.li=!0,this.hi=new H5,this.referenceDelegate=e(this),this.Pi=new K5(this),this.indexManager=new j5,this.remoteDocumentCache=(function(a){return new $5(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new R5(t),this.Ii=new B5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new z5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new F5(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Te("MemoryPersistence","Starting transaction:",e);const a=new Y5(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return fe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class Y5 extends _j{constructor(e){super(),this.currentSequenceNumber=e}}class U0{constructor(e){this.persistence=e,this.Ri=new P0,this.Vi=null}static mi(e){return new U0(e)}get fi(){if(this.Vi)return this.Vi;throw Be(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,(r=>{const a=Pe.fromPath(r);return this.gi(e,a).next((l=>{l||t.removeEntry(a,He.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class zf{constructor(e,t){this.persistence=e,this.pi=new _l((r=>wj(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=P5(this,t)}static mi(e,t){return new zf(e,t)}Ei(){}di(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return fe.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?fe.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(r++,l.removeEntry(c,He.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_f(e.data.value)),t}br(e,t,r){return fe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return fe.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class V0{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=ct(),a=ct();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new V0(e,t.fromCache,r,a)}}class Q5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class X5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return w4()?8:xj(hr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new Q5;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(oc()<=ot.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",lc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(oc()<=ot.DEBUG&&Te("QueryEngine","Query:",lc(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(oc()<=ot.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",lc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(t))):fe.resolve())}ys(e,t){if(cE(t))return fe.resolve(null);let r=Ni(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Vf(t,null,"F"),r=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=ct(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((m=>{const p=this.Ds(t,d);return this.Cs(t,p,c,m.readTime)?this.ys(e,Vf(t,null,"F")):this.vs(e,p,t,m)}))))})))))}ws(e,t,r,a){return cE(t)||a.isEqual(He.min())?fe.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,a)?fe.resolve(null):(oc()<=ot.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),lc(t)),this.vs(e,c,t,pj(a,rh)).next((d=>d)))}))}Ds(e,t){let r=new Rn(kA(e));return t.forEach(((a,l)=>{dm(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return oc()<=ot.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",lc(t)),this.ps.getDocumentsMatchingQuery(e,t,Ao.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const q0="LocalStore",W5=3e8;class Z5{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new en(lt),this.xs=new _l((l=>R0(l)),I0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function J5(n,e,t,r){return new Z5(n,e,t,r)}async function iS(n,e){const t=ze(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let m=ct();for(const p of a){c.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of l){d.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(r,m).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:d})))}))}))}function eO(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,p,v){const x=p.batch,E=x.keys();let A=fe.resolve();return E.forEach((S=>{A=A.next((()=>v.getEntry(m,S))).next((O=>{const R=p.docVersions.get(S);_t(R!==null,48541),O.version.compareTo(R)<0&&(x.applyToRemoteDocument(O,p),O.isValidDocument()&&(O.setReadTime(p.commitVersion),v.addEntry(O)))}))})),A.next((()=>d.mutationQueue.removeMutationBatch(m,x)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let m=ct();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function aS(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function tO(n,e){const t=ze(n),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((v,x)=>{const E=a.get(x);if(!E)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,x).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,x))));let A=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?A=A.withResumeToken(Wn.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,r)),a=a.insert(x,A),(function(O,R,V){return O.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=W5?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(E,A,v)&&d.push(t.Pi.updateTargetData(l,A))}));let m=Aa(),p=ct();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(nO(l,c,e.documentUpdates).next((v=>{m=v.ks,p=v.qs}))),!r.isEqual(He.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((x=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(v)}return fe.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function nO(n,e,t){let r=ct(),a=ct();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=Aa();return t.forEach(((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(He.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):Te(q0,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function rO(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=S0),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function sO(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((l=>l?(a=l,fe.resolve(a)):t.Pi.allocateTargetId(r).next((c=>(a=new po(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Ly(n,e,t){const r=ze(n),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Hc(c))throw c;Te(q0,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function EE(n,e,t){const r=ze(n);let a=He.min(),l=ct();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,p,v){const x=ze(m),E=x.xs.get(v);return E!==void 0?fe.resolve(x.Ms.get(E)):x.Pi.getTargetData(p,v)})(r,c,Ni(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:He.min(),t?l:ct()))).next((d=>(iO(r,Hj(e),d),{documents:d,Qs:l})))))}function iO(n,e,t){let r=n.Os.get(e)||He.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Os.set(e,r)}class wE{constructor(){this.activeTargetIds=Qj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aO{constructor(){this.Mo=new wE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class oO{Oo(e){}shutdown(){}}const TE="ConnectivityMonitor";class AE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(TE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(TE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Jd=null;function ky(){return Jd===null?Jd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jd++,"0x"+Jd.toString(16)}const Gp="RestConnection",lO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===Mf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const c=ky(),d=this.zo(e,t.toUriEncodedString());Te(Gp,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:p}=new URL(d),v=Uc(p);return this.Jo(e,d,m,r,v).then((x=>(Te(Gp,`Received RPC '${e}' ${c}: `,x),x)),(x=>{throw Tc(Gp,`RPC '${e}' ${c} failed with error: `,x,"url: ",d,"request:",r),x}))}Ho(e,t,r,a,l,c){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const r=lO[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class uO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ar="WebChannelConnection";class hO extends cO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=ky();return new Promise(((d,m)=>{const p=new oA;p.setWithCredentials(!0),p.listenOnce(lA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case bf.NO_ERROR:const x=p.getResponseJson();Te(ar,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(x)),d(x);break;case bf.TIMEOUT:Te(ar,`RPC '${e}' ${c} timed out`),m(new we(ce.DEADLINE_EXCEEDED,"Request time out"));break;case bf.HTTP_ERROR:const E=p.getStatus();if(Te(ar,`RPC '${e}' ${c} failed with status:`,E,"response text:",p.getResponseText()),E>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const S=A?.error;if(S&&S.status&&S.message){const O=(function(V){const F=V.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(F)>=0?F:ce.UNKNOWN})(S.status);m(new we(O,S.message))}else m(new we(ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new we(ce.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Te(ar,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);Te(ar,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=ky(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=hA(),d=uA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=l.join("");Te(ar,`Creating RPC '${e}' stream ${a}: ${v}`,m);const x=c.createWebChannel(v,m);this.I_(x);let E=!1,A=!1;const S=new uO({Yo:R=>{A?Te(ar,`Not sending because RPC '${e}' stream ${a} is closed:`,R):(E||(Te(ar,`Opening RPC '${e}' stream ${a} transport.`),x.open(),E=!0),Te(ar,`RPC '${e}' stream ${a} sending:`,R),x.send(R))},Zo:()=>x.close()}),O=(R,V,F)=>{R.listen(V,(Y=>{try{F(Y)}catch(Q){setTimeout((()=>{throw Q}),0)}}))};return O(x,Vu.EventType.OPEN,(()=>{A||(Te(ar,`RPC '${e}' stream ${a} transport opened.`),S.o_())})),O(x,Vu.EventType.CLOSE,(()=>{A||(A=!0,Te(ar,`RPC '${e}' stream ${a} transport closed`),S.a_(),this.E_(x))})),O(x,Vu.EventType.ERROR,(R=>{A||(A=!0,Tc(ar,`RPC '${e}' stream ${a} transport errored. Name:`,R.name,"Message:",R.message),S.a_(new we(ce.UNAVAILABLE,"The operation could not be completed")))})),O(x,Vu.EventType.MESSAGE,(R=>{if(!A){const V=R.data[0];_t(!!V,16349);const F=V,Y=F?.error||F[0]?.error;if(Y){Te(ar,`RPC '${e}' stream ${a} received error:`,Y);const Q=Y.status;let ie=(function(k){const U=xn[k];if(U!==void 0)return GA(U)})(Q),ve=Y.message;ie===void 0&&(ie=ce.INTERNAL,ve="Unknown error status: "+Q+" with message "+Y.message),A=!0,S.a_(new we(ie,ve)),x.close()}else Te(ar,`RPC '${e}' stream ${a} received:`,V),S.u_(V)}})),O(d,cA.STAT_EVENT,(R=>{R.stat===wy.PROXY?Te(ar,`RPC '${e}' stream ${a} detected buffering proxy`):R.stat===wy.NOPROXY&&Te(ar,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Kp(){return typeof document<"u"?document:null}function pm(n){return new g5(n,!0)}class oS{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&Te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const SE="PersistentStream";class lS{constructor(e,t,r,a,l,c,d,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new oS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Ta(t.toString()),Ta("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new we(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(SE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Te(SE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dO extends lS{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=v5(this.serializer,e),r=(function(l){if(!("targetChange"in l))return He.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?He.min():c.readTime?Ci(c.readTime):He.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Dy(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=Cy(m)?{documents:x5(l,m)}:{query:JA(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=QA(l,c.resumeToken);const p=Iy(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(He.min())>0){d.readTime=Bf(l,c.snapshotVersion.toTimestamp());const p=Iy(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const r=T5(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Dy(this.serializer),t.removeTarget=e,this.q_(t)}}class fO extends lS{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return _t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=_5(e.writeResults,e.commitTime),r=Ci(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Dy(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>b5(this.serializer,r)))};this.q_(t)}}class mO{}class gO extends mO{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,jy(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(ce.UNKNOWN,l.toString())}))}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,jy(t,r),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new we(ce.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class pO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ta(t),this.aa=!1):Te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const fl="RemoteStore";class yO{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{xl(this)&&(Te(fl,"Restarting streams for network reachability change."),await(async function(m){const p=ze(m);p.Ea.add(4),await Ch(p),p.Ra.set("Unknown"),p.Ea.delete(4),await ym(p)})(this))}))})),this.Ra=new pO(r,a)}}async function ym(n){if(xl(n))for(const e of n.da)await e(!0)}async function Ch(n){for(const e of n.da)await e(!1)}function cS(n,e){const t=ze(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),F0(t)?H0(t):$c(t).O_()&&z0(t,e))}function B0(n,e){const t=ze(n),r=$c(t);t.Ia.delete(e),r.O_()&&uS(t,e),t.Ia.size===0&&(r.O_()?r.L_():xl(t)&&t.Ra.set("Unknown"))}function z0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$c(n).Y_(e)}function uS(n,e){n.Va.Ue(e),$c(n).Z_(e)}function H0(n){n.Va=new h5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),$c(n).start(),n.Ra.ua()}function F0(n){return xl(n)&&!$c(n).x_()&&n.Ia.size>0}function xl(n){return ze(n).Ea.size===0}function hS(n){n.Va=void 0}async function vO(n){n.Ra.set("Online")}async function bO(n){n.Ia.forEach(((e,t)=>{z0(n,e)}))}async function _O(n,e){hS(n),F0(n)?(n.Ra.ha(e),H0(n)):n.Ra.set("Unknown")}async function xO(n,e,t){if(n.Ra.set("Online"),e instanceof YA&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(n,e)}catch(r){Te(fl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hf(n,r)}else if(e instanceof wf?n.Va.Ze(e):e instanceof KA?n.Va.st(e):n.Va.tt(e),!t.isEqual(He.min()))try{const r=await aS(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ia.get(p);v&&l.Ia.set(p,v.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,p)=>{const v=l.Ia.get(m);if(!v)return;l.Ia.set(m,v.withResumeToken(Wn.EMPTY_BYTE_STRING,v.snapshotVersion)),uS(l,m);const x=new po(v.target,m,p,v.sequenceNumber);z0(l,x)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){Te(fl,"Failed to raise snapshot:",r),await Hf(n,r)}}async function Hf(n,e,t){if(!Hc(e))throw e;n.Ea.add(1),await Ch(n),n.Ra.set("Offline"),t||(t=()=>aS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Te(fl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ym(n)}))}function dS(n,e){return e().catch((t=>Hf(n,t,e)))}async function vm(n){const e=ze(n),t=Ro(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:S0;for(;EO(e);)try{const a=await rO(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,wO(e,a)}catch(a){await Hf(e,a)}fS(e)&&mS(e)}function EO(n){return xl(n)&&n.Ta.length<10}function wO(n,e){n.Ta.push(e);const t=Ro(n);t.O_()&&t.X_&&t.ea(e.mutations)}function fS(n){return xl(n)&&!Ro(n).x_()&&n.Ta.length>0}function mS(n){Ro(n).start()}async function TO(n){Ro(n).ra()}async function AO(n){const e=Ro(n);for(const t of n.Ta)e.ea(t.mutations)}async function SO(n,e,t){const r=n.Ta.shift(),a=L0.from(r,e,t);await dS(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await vm(n)}async function NO(n,e){e&&Ro(n).X_&&await(async function(r,a){if((function(c){return l5(c)&&c!==ce.ABORTED})(a.code)){const l=r.Ta.shift();Ro(r).B_(),await dS(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await vm(r)}})(n,e),fS(n)&&mS(n)}async function NE(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),Te(fl,"RemoteStore received new credentials");const r=xl(t);t.Ea.add(3),await Ch(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ym(t)}async function CO(n,e){const t=ze(n);e?(t.Ea.delete(2),await ym(t)):e||(t.Ea.add(2),await Ch(t),t.Ra.set("Unknown"))}function $c(n){return n.ma||(n.ma=(function(t,r,a){const l=ze(t);return l.sa(),new dO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:vO.bind(null,n),t_:bO.bind(null,n),r_:_O.bind(null,n),H_:xO.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),F0(n)?H0(n):n.Ra.set("Unknown")):(await n.ma.stop(),hS(n))}))),n.ma}function Ro(n){return n.fa||(n.fa=(function(t,r,a){const l=ze(t);return l.sa(),new fO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:TO.bind(null,n),r_:NO.bind(null,n),ta:AO.bind(null,n),na:SO.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await vm(n)):(await n.fa.stop(),n.Ta.length>0&&(Te(fl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class $0{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new $0(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function G0(n,e){if(Ta("AsyncQueue",`${e}: ${n}`),Hc(n))return new we(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class vc{static emptySet(e){return new vc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pe.comparator(t.key,r.key):(t,r)=>Pe.comparator(t.key,r.key),this.keyedMap=qu(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new vc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class CE{constructor(){this.ga=new en(Pe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Be(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class jc{constructor(e,t,r,a,l,c,d,m,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new jc(e,t,vc.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class RO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class IO{constructor(){this.queries=RE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=ze(t),l=a.queries;a.queries=RE(),l.forEach(((c,d)=>{for(const m of d.Sa)m.onError(r)}))})(this,new we(ce.ABORTED,"Firestore shutting down"))}}function RE(){return new _l((n=>LA(n)),hm)}async function K0(n,e){const t=ze(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new RO,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=G0(c,`Initialization of query '${lc(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Q0(t)}async function Y0(n,e){const t=ze(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function jO(n,e){const t=ze(n);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(r=!0);c.wa=a}}r&&Q0(t)}function OO(n,e,t){const r=ze(n),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function Q0(n){n.Ca.forEach((e=>{e.next()}))}var My,IE;(IE=My||(My={})).Ma="default",IE.Cache="cache";class X0{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new jc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=jc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==My.Cache}}class gS{constructor(e){this.key=e}}class pS{constructor(e){this.key=e}}class DO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ct(),this.mutatedKeys=ct(),this.eu=kA(e),this.tu=new vc(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new CE,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,x)=>{const E=a.get(v),A=dm(this.query,x)?x:null,S=!!E&&this.mutatedKeys.has(E.key),O=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let R=!1;E&&A?E.data.isEqual(A.data)?S!==O&&(r.track({type:3,doc:A}),R=!0):this.su(E,A)||(r.track({type:2,doc:A}),R=!0,(m&&this.eu(A,m)>0||p&&this.eu(A,p)<0)&&(d=!0)):!E&&A?(r.track({type:0,doc:A}),R=!0):E&&!A&&(r.track({type:1,doc:E}),R=!0,(m||p)&&(d=!0)),R&&(A?(c=c.add(A),l=O?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:c,iu:r,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,x)=>(function(A,S){const O=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{Rt:R})}};return O(A)-O(S)})(v.type,x.type)||this.eu(v.doc,x.doc))),this.ou(r),a=a??!1;const d=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,p=m!==this.Za;return this.Za=m,c.length!==0||p?{snapshot:new jc(this.query,e.tu,l,c,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new CE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ct(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new pS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new gS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ct();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return jc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const W0="SyncEngine";class LO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class kO{constructor(e){this.key=e,this.hu=!1}}class MO{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new _l((d=>LA(d)),hm),this.Iu=new Map,this.Eu=new Set,this.du=new en(Pe.comparator),this.Au=new Map,this.Ru=new P0,this.Vu={},this.mu=new Map,this.fu=Ic.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PO(n,e,t=!0){const r=ES(n);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await yS(r,e,t,!0),a}async function UO(n,e){const t=ES(n);await yS(t,e,!0,!1)}async function yS(n,e,t,r){const a=await sO(n.localStore,Ni(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await VO(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&cS(n.remoteStore,a),d}async function VO(n,e,t,r,a){n.pu=(x,E,A)=>(async function(O,R,V,F){let Y=R.view.ru(V);Y.Cs&&(Y=await EE(O.localStore,R.query,!1).then((({documents:L})=>R.view.ru(L,Y))));const Q=F&&F.targetChanges.get(R.targetId),ie=F&&F.targetMismatches.get(R.targetId)!=null,ve=R.view.applyChanges(Y,O.isPrimaryClient,Q,ie);return OE(O,R.targetId,ve.au),ve.snapshot})(n,x,E,A);const l=await EE(n.localStore,e,!0),c=new DO(e,l.Qs),d=c.ru(l.documents),m=Nh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),p=c.applyChanges(d,n.isPrimaryClient,m);OE(n,t,p.au);const v=new LO(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function qO(n,e,t){const r=ze(n),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!hm(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Ly(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&B0(r.remoteStore,a.targetId),Py(r,a.targetId)})).catch(zc)):(Py(r,a.targetId),await Ly(r.localStore,a.targetId,!0))}async function BO(n,e){const t=ze(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),B0(t.remoteStore,r.targetId))}async function zO(n,e,t){const r=QO(n);try{const a=await(function(c,d){const m=ze(c),p=zt.now(),v=d.reduce(((A,S)=>A.add(S.key)),ct());let x,E;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let S=Aa(),O=ct();return m.Ns.getEntries(A,v).next((R=>{S=R,S.forEach(((V,F)=>{F.isValidDocument()||(O=O.add(V))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,S))).next((R=>{x=R;const V=[];for(const F of d){const Y=n5(F,x.get(F.key).overlayedDocument);Y!=null&&V.push(new Mo(F.key,Y,AA(Y.value.mapValue),Ls.exists(!0)))}return m.mutationQueue.addMutationBatch(A,p,V,d)})).next((R=>{E=R;const V=R.applyToLocalDocumentSet(x,O);return m.documentOverlayCache.saveOverlays(A,R.batchId,V)}))})).then((()=>({batchId:E.batchId,changes:PA(x)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,d,m){let p=c.Vu[c.currentUser.toKey()];p||(p=new en(lt)),p=p.insert(d,m),c.Vu[c.currentUser.toKey()]=p})(r,a.batchId,t),await Rh(r,a.changes),await vm(r.remoteStore)}catch(a){const l=G0(a,"Failed to persist write");t.reject(l)}}async function vS(n,e){const t=ze(n);try{const r=await tO(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(_t(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?_t(c.hu,14607):a.removedDocuments.size>0&&(_t(c.hu,42227),c.hu=!1))})),await Rh(t,r,e)}catch(r){await zc(r)}}function jE(n,e,t){const r=ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const m=ze(c);m.onlineState=d;let p=!1;m.queries.forEach(((v,x)=>{for(const E of x.Sa)E.va(d)&&(p=!0)})),p&&Q0(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function HO(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new en(Pe.comparator);c=c.insert(l,lr.newNoDocument(l,He.min()));const d=ct().add(l),m=new gm(He.min(),new Map,new en(lt),c,d);await vS(r,m),r.du=r.du.remove(l),r.Au.delete(e),Z0(r)}else await Ly(r.localStore,e,!1).then((()=>Py(r,e,t))).catch(zc)}async function FO(n,e){const t=ze(n),r=e.batch.batchId;try{const a=await eO(t.localStore,e);_S(t,r,null),bS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Rh(t,a)}catch(a){await zc(a)}}async function $O(n,e,t){const r=ze(n);try{const a=await(function(c,d){const m=ze(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return m.mutationQueue.lookupMutationBatch(p,d).next((x=>(_t(x!==null,37113),v=x.keys(),m.mutationQueue.removeMutationBatch(p,x)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>m.localDocuments.getDocuments(p,v)))}))})(r.localStore,e);_S(r,e,t),bS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Rh(r,a)}catch(a){await zc(a)}}function bS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function _S(n,e,t){const r=ze(n);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function Py(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||xS(n,r)}))}function xS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(B0(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Z0(n))}function OE(n,e,t){for(const r of t)r instanceof gS?(n.Ru.addReference(r.key,e),GO(n,r)):r instanceof pS?(Te(W0,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||xS(n,r.key)):Be(19791,{wu:r})}function GO(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Te(W0,"New document in limbo: "+t),n.Eu.add(r),Z0(n))}function Z0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Pe(kt.fromString(e)),r=n.fu.next();n.Au.set(r,new kO(t)),n.du=n.du.insert(t,r),cS(n.remoteStore,new po(Ni(um(t.path)),r,"TargetPurposeLimboResolution",om.ce))}}async function Rh(n,e,t){const r=ze(n),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,m)=>{c.push(r.pu(m,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){a.push(p);const v=V0.As(m.targetId,p);l.push(v)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(m,p){const v=ze(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>fe.forEach(p,(E=>fe.forEach(E.Es,(A=>v.persistence.referenceDelegate.addReference(x,E.targetId,A))).next((()=>fe.forEach(E.ds,(A=>v.persistence.referenceDelegate.removeReference(x,E.targetId,A)))))))))}catch(x){if(!Hc(x))throw x;Te(q0,"Failed to update sequence numbers: "+x)}for(const x of p){const E=x.targetId;if(!x.fromCache){const A=v.Ms.get(E),S=A.snapshotVersion,O=A.withLastLimboFreeSnapshotVersion(S);v.Ms=v.Ms.insert(E,O)}}})(r.localStore,l))}async function KO(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){Te(W0,"User change. New user:",e.toKey());const r=await iS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new we(ce.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Rh(t,r.Ls)}}function YO(n,e){const t=ze(n),r=t.Au.get(e);if(r&&r.hu)return ct().add(r.key);{let a=ct();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function ES(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HO.bind(null,e),e.Pu.H_=jO.bind(null,e.eventManager),e.Pu.yu=OO.bind(null,e.eventManager),e}function QO(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$O.bind(null,e),e}class Ff{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return J5(this.persistence,new X5,e.initialUser,this.serializer)}Cu(e){return new sS(U0.mi,this.serializer)}Du(e){return new aO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ff.provider={build:()=>new Ff};class XO extends Ff{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){_t(this.persistence.referenceDelegate instanceof zf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new k5(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Vr.withCacheSize(this.cacheSizeBytes):Vr.DEFAULT;return new sS((r=>zf.mi(r,t)),this.serializer)}}class Uy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KO.bind(null,this.syncEngine),await CO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new IO})()}createDatastore(e){const t=pm(e.databaseInfo.databaseId),r=(function(l){return new hO(l)})(e.databaseInfo);return(function(l,c,d,m){return new gO(l,c,d,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,d){return new yO(r,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>jE(this.syncEngine,t,0)),(function(){return AE.v()?new AE:new oO})())}createSyncEngine(e,t){return(function(a,l,c,d,m,p,v){const x=new MO(a,l,c,d,m,p);return v&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ze(t);Te(fl,"RemoteStore shutting down."),r.Ea.add(5),await Ch(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Uy.provider={build:()=>new Uy};class J0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ta("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Io="FirestoreClient";class WO{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=or.UNAUTHENTICATED,this.clientId=A0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{Te(Io,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(Te(Io,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=G0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Yp(n,e){n.asyncQueue.verifyOperationInProgress(),Te(Io,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await iS(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function DE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ZO(n);Te(Io,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>NE(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>NE(e.remoteStore,a))),n._onlineComponents=e}async function ZO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(Io,"Using user provided OfflineComponentProvider");try{await Yp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ce.FAILED_PRECONDITION||a.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Tc("Error using user provided cache. Falling back to memory cache: "+t),await Yp(n,new Ff)}}else Te(Io,"Using default OfflineComponentProvider"),await Yp(n,new XO(void 0));return n._offlineComponents}async function ev(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(Io,"Using user provided OnlineComponentProvider"),await DE(n,n._uninitializedComponentsProvider._online)):(Te(Io,"Using default OnlineComponentProvider"),await DE(n,new Uy))),n._onlineComponents}function JO(n){return ev(n).then((e=>e.syncEngine))}function eD(n){return ev(n).then((e=>e.datastore))}async function $f(n){const e=await ev(n),t=e.eventManager;return t.onListen=PO.bind(null,e.syncEngine),t.onUnlisten=qO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=UO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=BO.bind(null,e.syncEngine),t}function tD(n,e,t={}){const r=new Si;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,p){const v=new J0({next:E=>{v.Nu(),c.enqueueAndForget((()=>Y0(l,x)));const A=E.docs.has(d);!A&&E.fromCache?p.reject(new we(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&m&&m.source==="server"?p.reject(new we(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),x=new X0(um(d.path),v,{includeMetadataChanges:!0,qa:!0});return K0(l,x)})(await $f(n),n.asyncQueue,e,t,r))),r.promise}function nD(n,e,t={}){const r=new Si;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,p){const v=new J0({next:E=>{v.Nu(),c.enqueueAndForget((()=>Y0(l,x))),E.fromCache&&m.source==="server"?p.reject(new we(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),x=new X0(d,v,{includeMetadataChanges:!0,qa:!0});return K0(l,x)})(await $f(n),n.asyncQueue,e,t,r))),r.promise}function rD(n,e,t){const r=new Si;return n.asyncQueue.enqueueAndForget((async()=>{try{const a=await eD(n);r.resolve((async function(c,d,m){const p=ze(c),{request:v,gt:x,parent:E}=E5(p.serializer,zj(d),m);p.connection.$o||delete v.parent;const A=(await p.Ho("RunAggregationQuery",p.serializer.databaseId,E,v,1)).filter((O=>!!O.result));_t(A.length===1,64727);const S=A[0].result?.aggregateFields;return Object.keys(S).reduce(((O,R)=>(O[x[R]]=S[R],O)),{})})(a,e,t))}catch(a){r.reject(a)}})),r.promise}function wS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const LE=new Map;const TS="firestore.googleapis.com",kE=!0;class ME{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TS,this.ssl=kE}else this.host=e.host,this.ssl=e.ssl??kE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<D5)throw new we(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bm{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ME({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ME(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ij;switch(r.type){case"firstParty":return new cj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=LE.get(t);r&&(Te("ComponentProvider","Removing Datastore"),LE.delete(t),r.terminate())})(this),Promise.resolve()}}function sD(n,e,t,r={}){n=wr(n,bm);const a=Uc(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;a&&(vT(`https://${d}`),bT("Firestore",!0)),l.host!==TS&&l.host!==d&&Tc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:a,emulatorOptions:r};if(!xa(m,c)&&(n._setSettings(m),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=or.MOCK_USER;else{p=m4(r.mockUserToken,n._app?.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new we(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new or(x)}n._authCredentials=new aj(new fA(p,v))}}class Ia{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ia(this.firestore,e,this._query)}}class ln{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ah(t,ln._jsonSchema))return new ln(e,r||null,new Pe(kt.fromString(t.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:wn("string",ln._jsonSchemaVersion),referencePath:wn("string")};class Eo extends Ia{constructor(e,t,r){super(e,t,um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Pe(e))}withConverter(e){return new Eo(this.firestore,e,this._path)}}function mt(n,e,...t){if(n=Tn(n),mA("collection","path",e),n instanceof bm){const r=kt.fromString(e,...t);return Qx(r),new Eo(n,null,r)}{if(!(n instanceof ln||n instanceof Eo))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return Qx(r),new Eo(n.firestore,null,r)}}function Fe(n,e,...t){if(n=Tn(n),arguments.length===1&&(e=A0.newId()),mA("doc","path",e),n instanceof bm){const r=kt.fromString(e,...t);return Yx(r),new ln(n,null,new Pe(r))}{if(!(n instanceof ln||n instanceof Eo))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return Yx(r),new ln(n.firestore,n instanceof Eo?n.converter:null,new Pe(r))}}const PE="AsyncQueue";class UE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new oS(this,"async_queue_retry"),this._c=()=>{const r=Kp();r&&Te(PE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Kp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Kp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Si;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hc(e))throw e;Te(PE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ta("INTERNAL UNHANDLED ERROR: ",VE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=$0.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Be(47125,{Pc:VE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function VE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function qE(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Di extends bm{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new UE,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new UE(e),this._firestoreClient=void 0,await e}}}function iD(n,e){const t=typeof n=="object"?n:wT(),r=typeof n=="string"?n:Mf,a=f0(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=d4("firestore");l&&sD(a,...l)}return a}function Ih(n){if(n._terminated)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||aD(n),n._firestoreClient}function aD(n){const e=n._freezeSettings(),t=(function(a,l,c,d){return new Nj(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,wS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new WO(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}class oD{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class lD{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new js(Wn.fromBase64String(e))}catch(t){throw new we(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new js(Wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:js._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ah(e,js._jsonSchema))return js.fromBase64String(e.bytes)}}js._jsonSchemaVersion="firestore/bytes/1.0",js._jsonSchema={type:wn("string",js._jsonSchemaVersion),bytes:wn("string")};class _m{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gc{constructor(e){this._methodName=e}}class Ri{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ri._jsonSchemaVersion}}static fromJSON(e){if(Ah(e,Ri._jsonSchema))return new Ri(e.latitude,e.longitude)}}Ri._jsonSchemaVersion="firestore/geoPoint/1.0",Ri._jsonSchema={type:wn("string",Ri._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};class Ii{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ii._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ah(e,Ii._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ii(e.vectorValues);throw new we(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ii._jsonSchemaVersion="firestore/vectorValue/1.0",Ii._jsonSchema={type:wn("string",Ii._jsonSchemaVersion),vectorValues:wn("object")};const cD=/^__.*__$/;class uD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Mo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sh(e,this.data,t,this.fieldTransforms)}}class AS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Mo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function SS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ac:n})}}class xm{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Gf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(SS(this.Ac)&&cD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class hD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pm(e)}Cc(e,t,r,a=!1){return new xm({Ac:e,methodName:t,Dc:r,path:Qn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Em(n){const e=n._freezeSettings(),t=pm(n._databaseId);return new hD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function NS(n,e,t,r,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);sv("Data must be an object, but it was:",c,r);const d=RS(r,c);let m,p;if(l.merge)m=new as(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const x of l.mergeFields){const E=Vy(e,x,t);if(!c.contains(E))throw new we(ce.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);jS(v,E)||v.push(E)}m=new as(v),p=c.fieldTransforms.filter((x=>m.covers(x.field)))}else m=null,p=c.fieldTransforms;return new uD(new qr(d),m,p)}class wm extends Gc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wm}}function CS(n,e,t){return new xm({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class tv extends Gc{_toFieldTransform(e){return new O0(e.path,new lh)}isEqual(e){return e instanceof tv}}class nv extends Gc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=CS(this,e,!0),r=this.vc.map((l=>El(l,t))),a=new Cc(r);return new O0(e.path,a)}isEqual(e){return e instanceof nv&&xa(this.vc,e.vc)}}class rv extends Gc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=CS(this,e,!0),r=this.vc.map((l=>El(l,t))),a=new Rc(r);return new O0(e.path,a)}isEqual(e){return e instanceof rv&&xa(this.vc,e.vc)}}function dD(n,e,t,r){const a=n.Cc(1,e,t);sv("Data must be an object, but it was:",a,r);const l=[],c=qr.empty();ko(r,((m,p)=>{const v=iv(e,m,t);p=Tn(p);const x=a.yc(v);if(p instanceof wm)l.push(v);else{const E=El(p,x);E!=null&&(l.push(v),c.set(v,E))}}));const d=new as(l);return new AS(c,d,a.fieldTransforms)}function fD(n,e,t,r,a,l){const c=n.Cc(1,e,t),d=[Vy(e,r,t)],m=[a];if(l.length%2!=0)throw new we(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)d.push(Vy(e,l[E])),m.push(l[E+1]);const p=[],v=qr.empty();for(let E=d.length-1;E>=0;--E)if(!jS(p,d[E])){const A=d[E];let S=m[E];S=Tn(S);const O=c.yc(A);if(S instanceof wm)p.push(A);else{const R=El(S,O);R!=null&&(p.push(A),v.set(A,R))}}const x=new as(p);return new AS(v,x,c.fieldTransforms)}function mD(n,e,t,r=!1){return El(t,n.Cc(r?4:3,e))}function El(n,e){if(IS(n=Tn(n)))return sv("Unsupported field value:",e,n),RS(n,e);if(n instanceof Gc)return(function(r,a){if(!SS(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const d of r){let m=El(d,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,a){if((r=Tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Xj(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=zt.fromDate(r);return{timestampValue:Bf(a.serializer,l)}}if(r instanceof zt){const l=new zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bf(a.serializer,l)}}if(r instanceof Ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof js)return{bytesValue:QA(a.serializer,r._byteString)};if(r instanceof ln){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:M0(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Ii)return(function(c,d){return{mapValue:{fields:{[wA]:{stringValue:TA},[Pf]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return j0(d.serializer,p)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${am(r)}`)})(n,e)}function RS(n,e){const t={};return yA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(n,((r,a)=>{const l=El(a,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function IS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof zt||n instanceof Ri||n instanceof js||n instanceof ln||n instanceof Gc||n instanceof Ii)}function sv(n,e,t){if(!IS(t)||!gA(t)){const r=am(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Vy(n,e,t){if((e=Tn(e))instanceof _m)return e._internalPath;if(typeof e=="string")return iv(n,e);throw Gf("Field path arguments must be of type string or ",n,!1,void 0,t)}const gD=new RegExp("[~\\*/\\[\\]]");function iv(n,e,t){if(e.search(gD)>=0)throw Gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _m(...e.split("."))._internalPath}catch{throw Gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gf(n,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new we(ce.INVALID_ARGUMENT,d+n+m)}function jS(n,e){return n.some((t=>t.isEqual(e)))}class OS{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pD extends OS{data(){return super.data()}}function Tm(n,e){return typeof e=="string"?iv(n,e):e instanceof _m?e._internalPath:e._delegate._internalPath}function DS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class av{}class ov extends av{}function Br(n,e,...t){let r=[];e instanceof av&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((m=>m instanceof lv)).length,d=l.filter((m=>m instanceof Am)).length;if(c>1||c>0&&d>0)throw new we(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class Am extends ov{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Am(e,t,r)}_apply(e){const t=this._parse(e);return kS(e._query,t),new Ia(e.firestore,e.converter,Ry(e._query,t))}_parse(e){const t=Em(e.firestore);return(function(l,c,d,m,p,v,x){let E;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new we(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){zE(x,v);const S=[];for(const O of x)S.push(BE(m,l,O));E={arrayValue:{values:S}}}else E=BE(m,l,x)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||zE(x,v),E=mD(d,c,x,v==="in"||v==="not-in");return En.create(p,v,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function LS(n,e,t){const r=e,a=Tm("where",n);return Am._create(a,r,t)}class lv extends av{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ri.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)kS(c,m),c=Ry(c,m)})(e._query,t),new Ia(e.firestore,e.converter,Ry(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cv extends ov{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cv(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oh(l,c)})(e._query,this._field,this._direction);return new Ia(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new Fc(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function ii(n,e="asc"){const t=e,r=Tm("orderBy",n);return cv._create(r,t)}class uv extends ov{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new uv(e,t,r)}_apply(e){return new Ia(e.firestore,e.converter,Vf(e._query,this._limit,this._limitType))}}function yD(n){return uv._create("limit",n,"F")}function BE(n,e,t){if(typeof(t=Tn(t))=="string"){if(t==="")throw new we(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OA(e)&&t.indexOf("/")!==-1)throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(kt.fromString(t));if(!Pe.isDocumentKey(r))throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rE(n,new Pe(r))}if(t instanceof ln)return rE(n,t._key);throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${am(t)}.`)}function zE(n,e){if(!Array.isArray(n)||n.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kS(n,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class vD{convertValue(e,t="none"){switch(Co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(No(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ko(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[Pf].arrayValue?.values?.map((r=>gn(r.doubleValue)));return new Ii(t)}convertGeoPoint(e){return new Ri(gn(e.latitude),gn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=cm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sh(e));default:return null}}convertTimestamp(e){const t=So(e);return new zt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=kt.fromString(e);_t(nS(r),9688,{name:e});const a=new ih(r.get(1),r.get(3)),l=new Pe(r.popFirst(5));return a.isEqual(t)||Ta(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function MS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}function bD(){return new oD("count")}class zu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ol extends OS{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Tm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ol._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ol._jsonSchemaVersion="firestore/documentSnapshot/1.0",ol._jsonSchema={type:wn("string",ol._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class Tf extends ol{data(e={}){return super.data(e)}}class ll{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new zu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Tf(this._firestore,this._userDataWriter,r.key,r,new zu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const m=new Tf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new zu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new Tf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new zu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,v=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:_D(d.type),doc:m,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ll._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=A0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _D(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:n})}}function dr(n){n=wr(n,ln);const e=wr(n.firestore,Di);return tD(Ih(e),n._key).then((t=>PS(e,n,t)))}ll._jsonSchemaVersion="firestore/querySnapshot/1.0",ll._jsonSchema={type:wn("string",ll._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")};class Sm extends vD{constructor(e){super(),this.firestore=e}convertBytes(e){return new js(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function An(n){n=wr(n,Ia);const e=wr(n.firestore,Di),t=Ih(e),r=new Sm(e);return DS(n._query),nD(t,n._query).then((a=>new ll(e,r,n,a)))}function Oc(n,e,t){n=wr(n,ln);const r=wr(n.firestore,Di),a=MS(n.converter,e,t);return Nm(r,[NS(Em(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Ls.none())])}function ur(n,e,t,...r){n=wr(n,ln);const a=wr(n.firestore,Di),l=Em(a);let c;return c=typeof(e=Tn(e))=="string"||e instanceof _m?fD(l,"updateDoc",n._key,e,t,r):dD(l,"updateDoc",n._key,e),Nm(a,[c.toMutation(n._key,Ls.exists(!0))])}function jh(n){return Nm(wr(n.firestore,Di),[new D0(n._key,Ls.none())])}function wl(n,e){const t=wr(n.firestore,Di),r=Fe(n),a=MS(n.converter,e);return Nm(t,[NS(Em(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,Ls.exists(!1))]).then((()=>r))}function Kf(n,...e){n=Tn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||qE(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(qE(e[r])){const m=e[r];e[r]=m.next?.bind(m),e[r+1]=m.error?.bind(m),e[r+2]=m.complete?.bind(m)}let l,c,d;if(n instanceof ln)c=wr(n.firestore,Di),d=um(n._key.path),l={next:m=>{e[r]&&e[r](PS(c,n,m))},error:e[r+1],complete:e[r+2]};else{const m=wr(n,Ia);c=wr(m.firestore,Di),d=m._query;const p=new Sm(c);l={next:v=>{e[r]&&e[r](new ll(c,p,m,v))},error:e[r+1],complete:e[r+2]},DS(n._query)}return(function(p,v,x,E){const A=new J0(E),S=new X0(v,A,x);return p.asyncQueue.enqueueAndForget((async()=>K0(await $f(p),S))),()=>{A.Nu(),p.asyncQueue.enqueueAndForget((async()=>Y0(await $f(p),S)))}})(Ih(c),d,a,l)}function Nm(n,e){return(function(r,a){const l=new Si;return r.asyncQueue.enqueueAndForget((async()=>zO(await JO(r),a,l))),l.promise})(Ih(n),e)}function PS(n,e,t){const r=t.docs.get(e._key),a=new Sm(n);return new ol(n,a,e._key,r,new zu(t.hasPendingWrites,t.fromCache),e.converter)}function ef(n){return xD(n,{count:bD()})}function xD(n,e){const t=wr(n.firestore,Di),r=Ih(t),a=Aj(e,((l,c)=>new a5(c,l.aggregateType,l._internalFieldPath)));return rD(r,n._query,a).then((l=>(function(d,m,p){const v=new Sm(d);return new lD(m,v,p)})(t,n,l)))}function ml(){return new tv("serverTimestamp")}function ch(...n){return new nv("arrayUnion",n)}function al(...n){return new rv("arrayRemove",n)}(function(e,t=!0){(function(a){Bc=a})(Vc),Ec(new cl("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Di(new oj(r.getProvider("auth-internal")),new uj(c,r.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new we(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ih(p.options.projectId,v)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),_o(Fx,$x,e),_o(Fx,$x,"esm2020")})();const ED={apiKey:"AIzaSyB3nTJlyM3K-XpvEUrXyk3leiVeMxzkTiU",authDomain:"forexvolcano-21180.firebaseapp.com",projectId:"forexvolcano-21180",storageBucket:"forexvolcano-21180.firebasestorage.app",messagingSenderId:"264687169302",appId:"1:264687169302:web:83322d7adc303b1f0c2a37",measurementId:"G-XTB0D1TPS6"},US=ET(ED),Le=rj(US),Ee=iD(US),wD=()=>{const[n,e]=P.useState(null),[t,r]=P.useState(!1),a=ki();P.useEffect(()=>{const c=wh(Le,async d=>{if(e(d),d)try{const m=await dr(Fe(Ee,"users",d.uid));m.exists()&&m.data().role==="admin"?r(!0):r(!1)}catch(m){console.error("Error checking admin role:",m),r(!1)}else r(!1)});return()=>c()},[]);const l=async()=>{try{await K3(Le),a("/")}catch(c){console.error("Error logging out",c)}};return f.jsx("nav",{className:"bg-surface border-b border-gray-800 sticky top-0 z-50",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex items-center justify-between h-16",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(Je,{to:"/",className:"flex-shrink-0",children:f.jsxs("span",{className:"text-secondary text-2xl font-bold tracking-tighter",children:["Forex",f.jsx("span",{className:"text-accent",children:"Volcano"})]})}),f.jsx("div",{className:"hidden md:block",children:f.jsxs("div",{className:"ml-10 flex items-baseline space-x-4",children:[f.jsx(Je,{to:"/analysis",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Analysis"}),f.jsx(Je,{to:"/academy",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Academy"}),f.jsx(Je,{to:"/news",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"News"})]})})]}),f.jsx("div",{className:"hidden md:block",children:f.jsx("div",{className:"ml-4 flex items-center md:ml-6",children:n?f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(Je,{to:"/community",className:"text-secondary hover:text-green-400 font-medium px-3 py-2",children:"Community"}),f.jsx(Je,{to:"/dashboard",className:"text-primary hover:text-green-400 font-medium px-3 py-2",children:"Dashboard"}),t&&f.jsx(Je,{to:"/admin",className:"text-accent hover:text-orange-400 font-medium px-3 py-2",children:"Admin Panel"}),f.jsx("button",{onClick:l,className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-md text-sm font-medium",children:"Logout"})]}):f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(Je,{to:"/login",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Login"}),f.jsx(Je,{to:"/register",className:"bg-primary hover:bg-green-600 text-white px-3 py-2 rounded-md text-sm font-medium",children:"Get Started"})]})})}),f.jsx("div",{className:"-mr-2 flex md:hidden",children:f.jsxs("button",{type:"button",className:"bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none","aria-controls":"mobile-menu","aria-expanded":"false",children:[f.jsx("span",{className:"sr-only",children:"Open main menu"}),f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})})})},TD=()=>f.jsx("footer",{className:"bg-[#05080f] border-t border-gray-800/50 py-12",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[f.jsxs("div",{className:"mb-6 md:mb-0 text-center md:text-left",children:[f.jsxs(Je,{to:"/",className:"text-2xl font-bold tracking-tighter text-secondary",children:["Forex",f.jsx("span",{className:"text-accent",children:"Volcano"})]}),f.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[" ",new Date().getFullYear()," ForexVolcano. All rights reserved."]})]}),f.jsxs("div",{className:"flex space-x-8",children:[f.jsx(Je,{to:"/analysis",className:"text-gray-400 hover:text-white transition-colors",children:"Analysis"}),f.jsx(Je,{to:"/news",className:"text-gray-400 hover:text-white transition-colors",children:"News"}),f.jsx(Je,{to:"/login",className:"text-gray-400 hover:text-white transition-colors",children:"Login"})]})]})})}),HE={primary:"bg-primary hover:bg-green-500 text-white shadow-lg shadow-green-900/20",secondary:"bg-secondary hover:bg-red-500 text-white shadow-lg shadow-red-900/20",accent:"bg-accent hover:bg-orange-500 text-white shadow-lg shadow-orange-900/20",outline:"border-2 border-slate-700 hover:border-slate-500 text-slate-300 hover:text-white bg-transparent",ghost:"text-slate-400 hover:text-white hover:bg-white/5"},FE={sm:"px-3 py-1.5 text-sm",md:"px-6 py-3 text-base font-semibold",lg:"px-8 py-4 text-lg font-bold"},xt=({children:n,variant:e="primary",size:t="md",to:r=null,onClick:a,className:l="",...c})=>{const d="inline-flex items-center justify-center rounded-lg transition-all duration-300 transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0a0e17] focus:ring-slate-400",m=HE[e]||HE.primary,p=FE[t]||FE.md,v=`${d} ${m} ${p} ${l}`;return r?f.jsx(Je,{to:r,className:v,...c,children:n}):f.jsx("button",{onClick:a,className:v,...c,children:n})},AD=()=>f.jsxs("div",{className:"relative overflow-hidden bg-background pt-16 pb-32 lg:pt-32 lg:pb-40",children:[f.jsxs("div",{className:"absolute top-0 left-1/2 w-full -translate-x-1/2 h-full z-0 pointer-events-none",children:[f.jsx("div",{className:"absolute top-[-10%] left-[20%] w-[500px] h-[500px] bg-secondary/10 rounded-full blur-[100px] animate-pulse"}),f.jsx("div",{className:"absolute top-[10%] right-[20%] w-[400px] h-[400px] bg-accent/10 rounded-full blur-[80px]"})]}),f.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[f.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold tracking-tight text-white mb-6",children:["Predict the ",f.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-secondary to-accent",children:"Eruption"})]}),f.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-xl text-gray-400 mb-10",children:"Professional Forex education and institutional-grade analysis. Stop guessing. Start trading with the precision of a geologist."}),f.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[f.jsx(xt,{to:"/register",variant:"primary",size:"lg",children:"Start Learning Free"}),f.jsx(xt,{to:"/analysis",variant:"outline",size:"lg",children:"View Daily Analysis"})]}),f.jsxs("div",{className:"mt-16 relative",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background to-transparent z-10 h-20 bottom-0 pointer-events-none"}),f.jsxs("div",{className:"inline-flex items-center gap-8 py-3 px-8 rounded-full bg-white/5 border border-white/10 backdrop-blur-sm shadow-2xl",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-bold text-white",children:"EUR/USD"}),f.jsx("span",{className:"text-primary text-sm",children:" 1.0842"})]}),f.jsx("div",{className:"w-px h-4 bg-gray-700"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-bold text-white",children:"GBP/USD"}),f.jsx("span",{className:"text-secondary text-sm",children:" 1.2615"})]}),f.jsx("div",{className:"w-px h-4 bg-gray-700"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-bold text-white",children:"XAU/USD"}),f.jsx("span",{className:"text-accent text-sm",children:" 2045.50"})]})]})]})]})]}),SD=[{title:"Structured Learning Path",description:'From "What is a Pip?" to institutional order flow. Our curriculum guides you step-by-step through the chaos.',icon:f.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),borderColor:"border-primary/20",iconBg:"bg-primary/10"},{title:"Daily Market Analysis",description:`Don't trade alone. Get daily "Volcano Watch" reports identifying high-probability setups before they erupt.`,icon:f.jsx("svg",{className:"w-6 h-6 text-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),borderColor:"border-secondary/20",iconBg:"bg-secondary/10"},{title:"Risk Management",description:"The volcano is dangerous. Learn how to survive. Our strict risk protocols are the core of our philosophy.",icon:f.jsx("svg",{className:"w-6 h-6 text-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),borderColor:"border-accent/20",iconBg:"bg-accent/10"}],ND=()=>f.jsx("div",{className:"py-24 bg-surface",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-16",children:[f.jsx("h2",{className:"text-base text-accent font-semibold tracking-wide uppercase",children:"Why Choose Us"}),f.jsx("p",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl",children:"A Better Way to Trade"})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:SD.map((n,e)=>f.jsxs("div",{className:`p-8 bg-background/50 border ${n.borderColor} rounded-2xl hover:bg-background transition-all duration-300`,children:[f.jsx("div",{className:`w-12 h-12 ${n.iconBg} rounded-lg flex items-center justify-center mb-6`,children:n.icon}),f.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:n.title}),f.jsx("p",{className:"text-gray-400 leading-relaxed",children:n.description})]},e))})]})}),CD=()=>f.jsxs("div",{className:"flex flex-col min-h-screen",children:[f.jsx(AD,{}),f.jsx(ND,{})]}),VS=({title:n,subtitle:e,image:t,content:r,footer:a,badges:l=[],className:c=""})=>f.jsxs("div",{className:`group relative flex flex-col overflow-hidden rounded-2xl bg-surface border border-gray-800 transition-all duration-300 hover:border-gray-700 hover:shadow-2xl hover:shadow-primary/5 ${c}`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent opacity-0 transition-opacity duration-500 group-hover:opacity-100 pointer-events-none"}),t&&f.jsxs("div",{className:"relative h-48 w-full overflow-hidden bg-gray-900",children:[f.jsx("img",{src:t,alt:n,className:"h-full w-full object-cover transition-transform duration-700 group-hover:scale-105",onError:d=>{d.target.style.display="none",d.target.parentElement.classList.add("flex","items-center","justify-center","bg-gray-800"),d.target.parentElement.innerHTML='<span class="text-4xl"></span>'}}),l.length>0&&f.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2",children:l.map((d,m)=>f.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded uppercase tracking-wider ${d.color||"bg-gray-800 text-white"}`,children:d.text},m))})]}),f.jsxs("div",{className:"flex flex-1 flex-col p-6 z-10",children:[e&&f.jsx("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-400",children:e}),f.jsx("h3",{className:"mb-3 text-xl font-bold text-white group-hover:text-primary transition-colors",children:n}),f.jsx("p",{className:"flex-1 text-gray-400 line-clamp-3 mb-6",children:r}),a&&f.jsx("div",{className:"mt-auto border-t border-gray-800 pt-4",children:a})]})]}),$E=[{id:"1",pair:"EUR/USD",direction:"Bearish",title:"EUR/USD Forming Head and Shoulders on 4H",content:"Price has failed to break the 1.0900 resistance level multiple times. We are observing a clear H&S pattern formation. If the neckline at 1.0820 breaks, we expect a sharp decline towards the 1.0750 liquidity zone.",author:"Volcano Chief",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=1000&auto=format&fit=crop"},{id:"2",pair:"XAU/USD",direction:"Bullish",title:"Gold Preparing for Eruption Above 2050",content:"Geopolitical tensions and a weakening dollar suggest Gold is accumulating for a massive leg up. Watch for a retest of 2035 as a potential entry point for long positions targeting new highs.",author:"Analyst Sarah",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1000&auto=format&fit=crop"},{id:"3",pair:"GBP/JPY",direction:"Bullish",title:"The Dragon is Waking Up",content:"GJ is respecting the ascending trendline perfectly. The recent pullback to 182.00 was rejected strongly. We are looking for continuation towards 185.00 level.",author:"Volcano Chief",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1526304640151-b59310398691?q=80&w=1000&auto=format&fit=crop"}],RD=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0),[a,l]=P.useState("All");P.useEffect(()=>{(async()=>{try{const v=Br(mt(Ee,"analysis"),ii("timestamp","desc"));let E=(await An(v)).docs.map(A=>({id:A.id,...A.data()}));if(Le.currentUser){const A=await dr(Fe(Ee,"users",Le.currentUser.uid));if(A.exists()){const S=A.data().preferences;S&&S.analysisCurrencies&&S.analysisCurrencies.length>0&&(E=E.filter(O=>S.analysisCurrencies.includes(O.pair)))}}E.length>0?e(E):Le.currentUser?e([]):e($E)}catch(v){console.error("Error fetching analysis:",v),e($E)}finally{r(!1)}})()},[]);const c=a==="All"?n:n.filter(p=>p.pair===a),d=["All",...new Set(n.map(p=>p.pair))],m=p=>{if(!p)return"";const v=p.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),x=document.createElement("DIV");return x.innerHTML=v,(x.textContent||x.innerText||"").trim()};return f.jsx("div",{className:"bg-background min-h-screen py-12",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsxs("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl tracking-tight",children:["Market ",f.jsx("span",{className:"text-primary",children:"Analysis"})]}),f.jsx("p",{className:"mt-4 text-xl text-gray-400",children:"Daily technical breakdowns and trade setups from our experts."})]}),f.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-12",children:d.map(p=>f.jsx("button",{onClick:()=>l(p),className:`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-200 ${a===p?"bg-primary text-white shadow-lg shadow-primary/25":"bg-surface text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:p},p))}),t?f.jsx("div",{className:"text-center text-white py-20",children:"Loading Volcano Data..."}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:c.map(p=>{const v=p.direction==="Bullish"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary";return f.jsx(Je,{to:`/analysis/${p.id}`,className:"block group",children:f.jsx(VS,{title:p.title,image:p.image||p.chart_image_url,content:m(p.content),subtitle:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-gray-500 text-xs",children:p.timestamp?.seconds?new Date(p.timestamp.seconds*1e3).toLocaleDateString():p.timestamp||new Date().toLocaleDateString()}),f.jsx("span",{className:"text-gray-600",children:""}),f.jsxs("span",{className:"text-gray-500 text-xs text-accent",children:["By ",p.analystName||p.author||"Admin"]})]}),badges:[{text:p.pair,color:"bg-surface border border-gray-700 text-white"},{text:p.direction,color:v}],footer:f.jsxs(xt,{variant:"ghost",size:"sm",className:"w-full justify-between group-hover:text-white",children:["Read Full Breakdown",f.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})},p.id)})})]})})},ID=()=>{const{id:n}=Pc(),e=ki(),[t,r]=P.useState(null),[a,l]=P.useState(!0);if(P.useEffect(()=>{(async()=>{try{const p=Fe(Ee,"analysis",n),v=await dr(p);v.exists()?r({id:v.id,...v.data()}):(console.log("No such document!"),e("/analysis"))}catch(p){console.error("Error fetching analysis detail:",p)}finally{l(!1)}})()},[n,e]),a)return f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:"Loading..."});if(!t)return null;const c=t.timestamp?.seconds?new Date(t.timestamp.seconds*1e3).toLocaleDateString():t.timestamp||new Date().toLocaleDateString(),d=t.direction==="Bullish"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary";return f.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx(xt,{variant:"ghost",onClick:()=>e("/analysis"),className:"mb-6 text-gray-400 hover:text-white",children:" Back to Analysis"}),f.jsxs("article",{className:"bg-surface rounded-2xl overflow-hidden border border-gray-800 shadow-2xl",children:[(t.image||t.chart_image_url)&&f.jsxs("div",{className:"w-full h-64 sm:h-96 relative",children:[f.jsx("img",{src:t.image||t.chart_image_url,alt:t.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent"})]}),f.jsxs("div",{className:"p-8 sm:p-12",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[f.jsx("span",{className:"text-gray-400 text-sm",children:c}),f.jsx("span",{className:"text-gray-600",children:""}),f.jsx("span",{className:"text-accent text-sm uppercase tracking-wider font-bold",children:t.analysisType||"Technical Analysis"})]}),f.jsxs("div",{className:"flex gap-3 mb-6",children:[f.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide bg-surface border border-gray-700 text-white",children:t.pair}),f.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${d}`,children:t.direction})]}),f.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-white mb-8 leading-tight",children:t.title}),f.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300 mb-16",dangerouslySetInnerHTML:{__html:t.content}}),(t.analystName||t.analystBio)&&f.jsxs("div",{className:"border-t border-gray-800 pt-12 mt-12 mb-8",children:[f.jsx("h3",{className:"text-2xl font-bold text-white mb-8",children:"Meet Your Analyst"}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-8 bg-black/20 p-8 rounded-2xl border border-gray-800/50",children:[f.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 shrink-0 rounded-full overflow-hidden ring-4 ring-primary/20",children:f.jsx("img",{src:t.analystImage||"https://images.unsplash.com/photo-1633332755192-727a05c4013d?w=400&auto=format&fit=crop&q=60",alt:t.analystName||"Analyst",className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"text-center sm:text-left",children:[f.jsx("h4",{className:"text-xl font-bold text-white mb-2",children:t.analystName||"Volcano Analyst"}),f.jsx("p",{className:"text-gray-400 leading-relaxed mb-4 whitespace-pre-wrap",children:t.analystBio||"Professional market analyst at Forex Volcano."}),f.jsxs("div",{className:"flex gap-4",children:[t.twitter&&f.jsx("a",{href:t.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),t.linkedin&&f.jsx("a",{href:t.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z",clipRule:"evenodd"})})}),t.telegram&&f.jsx("a",{href:t.telegram,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]})]})]})]})]})]})]})})},GE=[{id:"1",title:"NFP Smashes Expectations: 350k Jobs Added",impact:"High",affectedCurrencies:["USD","XAU","JPY"],content:"The Non-Farm Payrolls report showed a surprise surge in job creation, sending the Dollar Index (DXY) rocketing past 104.50. Traders should watch for pullbacks on Gold.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=1000&auto=format&fit=crop"},{id:"2",title:"ECB Signals Rate Cuts in June",impact:"Medium",affectedCurrencies:["EUR","GBP"],content:"Lagarde hinted that inflation is under control, opening the door for a 25bps cut. Euro is showing weakness against the Pound.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1526304640151-b59310398691?q=80&w=1000&auto=format&fit=crop"},{id:"3",title:"BoJ Maintains Ultra-Loose Policy",impact:"Low",affectedCurrencies:["JPY"],content:"No surprises from the Bank of Japan. Yield Curve Control remains in place. USD/JPY is drifting sideways in a tight range.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1000&auto=format&fit=crop"}],jD={High:"bg-red-500/20 text-red-500 border border-red-500/50",Medium:"bg-orange-500/20 text-orange-500 border border-orange-500/50",Low:"bg-yellow-500/20 text-yellow-500 border border-yellow-500/50"},OD=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0),a=l=>{if(!l)return"";const c=l.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),d=document.createElement("DIV");return d.innerHTML=c,(d.textContent||d.innerText||"").trim()};return P.useEffect(()=>{(async()=>{try{const c=Br(mt(Ee,"news"),ii("timestamp","desc"));let m=(await An(c)).docs.map(p=>({id:p.id,...p.data()}));if(Le.currentUser){const p=await dr(Fe(Ee,"users",Le.currentUser.uid));if(p.exists()){const v=p.data().preferences;v&&v.newsImpacts&&v.newsImpacts.length>0&&(m=m.filter(x=>v.newsImpacts.includes(x.impact)))}}m.length>0?e(m):Le.currentUser?e([]):e(GE)}catch(c){console.error("Error fetching news:",c),e(GE)}finally{r(!1)}})()},[]),f.jsx("div",{className:"bg-background min-h-screen py-12",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsxs("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl tracking-tight",children:["Market ",f.jsx("span",{className:"text-accent",children:"News"})]}),f.jsx("p",{className:"mt-4 text-xl text-gray-400",children:"Stay ahead of the volatility with real-time economic updates."})]}),t?f.jsx("div",{className:"text-center text-white py-20",children:"Loading Earth-shaking Events..."}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(l=>f.jsx(Je,{to:`/news/${l.id}`,className:"block group",children:f.jsx(VS,{title:l.title,image:l.image,content:a(l.content),subtitle:f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-gray-500 text-xs",children:l.timestamp?.seconds?new Date(l.timestamp.seconds*1e3).toLocaleDateString():l.timestamp||new Date().toLocaleDateString()})}),badges:[{text:l.impact,color:jD[l.impact]||"bg-gray-800 text-white"},...(l.affectedCurrencies||[]).map(c=>({text:c,color:"bg-surface border border-gray-700 text-white"}))]})},l.id))})]})})},DD=()=>{const{id:n}=Pc(),e=ki(),[t,r]=P.useState(null),[a,l]=P.useState(!0);if(P.useEffect(()=>{(async()=>{try{const m=Fe(Ee,"news",n),p=await dr(m);p.exists()?r({id:p.id,...p.data()}):(console.log("No such document!"),e("/news"))}catch(m){console.error("Error fetching news detail:",m)}finally{l(!1)}})()},[n,e]),a)return f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:"Loading..."});if(!t)return null;const c=t.timestamp?.seconds?new Date(t.timestamp.seconds*1e3).toLocaleDateString():t.timestamp||new Date().toLocaleDateString();return f.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx(xt,{variant:"ghost",onClick:()=>e("/news"),className:"mb-6 text-gray-400 hover:text-white",children:" Back to News"}),f.jsxs("article",{className:"bg-surface rounded-2xl overflow-hidden border border-gray-800 shadow-2xl",children:[t.image&&f.jsxs("div",{className:"w-full h-64 sm:h-96 relative",children:[f.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent"})]}),f.jsxs("div",{className:"p-8 sm:p-12",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[f.jsx("span",{className:"text-gray-400 text-sm",children:c}),f.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide
                                ${t.impact==="High"?"bg-red-500/20 text-red-400":t.impact==="Medium"?"bg-orange-500/20 text-orange-400":"bg-green-500/20 text-green-400"}`,children:[t.impact," Impact"]}),t.affectedCurrencies&&t.affectedCurrencies.map&&t.affectedCurrencies.map(d=>f.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gray-800 text-gray-300 border border-gray-700",children:d},d))]}),f.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-white mb-8 leading-tight",children:t.title}),f.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300",dangerouslySetInnerHTML:{__html:t.content}})]})]})]})})},LD=()=>{const[n,e]=P.useState(""),[t,r]=P.useState(""),[a,l]=P.useState(""),[c,d]=P.useState(!1),m=ki(),p=async E=>{try{const A=await dr(Fe(Ee,"users",E));A.exists()&&A.data().role==="admin"?m("/admin"):m("/dashboard")}catch(A){console.error("Error checking role:",A),m("/dashboard")}},v=async E=>{E.preventDefault(),l(""),d(!0);try{const A=await z3(Le,n,t);await p(A.user.uid)}catch(A){console.error(A),l("Failed to login. Please check your credentials.")}finally{d(!1)}},x=async()=>{try{const E=new Ti,A=await sA(Le,E);await p(A.user.uid)}catch(E){console.error(E),l("Failed to sign in with Google")}};return f.jsxs("div",{className:"min-h-screen bg-background flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[f.jsxs("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:["Sign in to ",f.jsx("span",{className:"text-secondary",children:"Volcano"})]}),f.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Or"," ",f.jsx(Je,{to:"/register",className:"font-medium text-primary hover:text-green-400",children:"start your 14-day free trial"})]})]}),f.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:f.jsxs("div",{className:"bg-surface py-8 px-4 shadow sm:rounded-lg sm:px-10 border border-gray-800",children:[f.jsxs("form",{className:"space-y-6",onSubmit:v,children:[a&&f.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 p-3 rounded text-sm text-center",children:a}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:E=>e(E.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:E=>r(E.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsx("div",{children:f.jsx(xt,{type:"submit",variant:"primary",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",disabled:c,children:c?"Signing in...":"Sign in"})})]}),f.jsxs("div",{className:"mt-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-700"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-surface text-gray-400",children:"Or continue with"})})]}),f.jsx("div",{className:"mt-6 grid grid-cols-1 gap-3",children:f.jsx("div",{children:f.jsxs("button",{type:"button",onClick:x,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-700 rounded-md shadow-sm bg-gray-800 text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[f.jsx("span",{className:"sr-only",children:"Sign in with Google"}),f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 0.507 5.387 0 12s5.36 12 12 12c3.627 0 6.627-1.2 8.52-3.387 1.947-2.207 2.48-5.747 2.48-6.173 0-.613-.053-1.12-.133-1.507H12.48z"})})]})})})]})]})})]})},kD=()=>{const[n,e]=P.useState(""),[t,r]=P.useState(""),[a,l]=P.useState(""),[c,d]=P.useState(""),[m,p]=P.useState(!1),v=ki(),x=async A=>{A.preventDefault(),d(""),p(!0);try{const O=(await B3(Le,t,a)).user;await F3(O,{displayName:n}),await Oc(Fe(Ee,"users",O.uid),{uid:O.uid,username:n,email:t,role:"user",createdAt:new Date().toISOString(),avatar_url:`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=random`}),v("/dashboard")}catch(S){console.error(S),S.code==="auth/email-already-in-use"?d("Email already in use."):d("Failed to create account. Please try again.")}finally{p(!1)}},E=async()=>{try{const A=new Ti,O=(await sA(Le,A)).user;await Oc(Fe(Ee,"users",O.uid),{uid:O.uid,username:O.displayName,email:O.email,role:"user",createdAt:new Date().toISOString(),avatar_url:O.photoURL},{merge:!0}),v("/dashboard")}catch(A){console.error(A),d("Failed to sign up with Google")}};return f.jsxs("div",{className:"min-h-screen bg-background flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[f.jsxs("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:["Join the ",f.jsx("span",{className:"text-secondary",children:"Eruption"})]}),f.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Already have an account?"," ",f.jsx(Je,{to:"/login",className:"font-medium text-primary hover:text-green-400",children:"Sign in"})]})]}),f.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[f.jsx("div",{className:"bg-surface py-8 px-4 shadow sm:rounded-lg sm:px-10 border border-gray-800",children:f.jsxs("form",{className:"space-y-6",onSubmit:x,children:[c&&f.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 p-3 rounded text-sm text-center",children:c}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300",children:"Full Name"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:n,onChange:A=>e(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:A=>r(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,minLength:6,value:a,onChange:A=>l(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsx("div",{children:f.jsx(xt,{type:"submit",variant:"primary",className:"w-full justify-center",disabled:m,children:m?"Creating Account...":"Sign up"})})]})}),f.jsxs("div",{className:"mt-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-700"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-surface text-gray-400",children:"Or continue with"})})]}),f.jsx("div",{className:"mt-6 grid grid-cols-1 gap-3",children:f.jsx("div",{children:f.jsxs("button",{type:"button",onClick:E,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-700 rounded-md shadow-sm bg-gray-800 text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[f.jsx("span",{className:"sr-only",children:"Sign up with Google"}),f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 0.507 5.387 0 12s5.36 12 12 12c3.627 0 6.627-1.2 8.52-3.387 1.947-2.207 2.48-5.747 2.48-6.173 0-.613-.053-1.12-.133-1.507H12.48z"})})]})})})]})]})]})},MD=({userProfile:n,setUserProfile:e})=>{const[t,r]=P.useState(n?.preferences||{newsImpacts:["High","Medium","Low"],analysisCurrencies:["XAUUSD","EURUSD","GBPUSD","BTCUSD","US30"],analysisTypes:["Technical","Fundamental"]}),[a,l]=P.useState(!1);P.useEffect(()=>{n?.preferences&&r(n.preferences)},[n]);const c=async()=>{l(!0);try{await Oc(Fe(Ee,"users",Le.currentUser.uid),{preferences:t},{merge:!0}),e({...n,preferences:t}),alert("Preferences saved!")}catch(m){console.error("Error saving preferences:",m),alert("Failed to save.")}finally{l(!1)}},d=(m,p)=>{r(v=>{const x=v[m]||[];return x.includes(p)?{...v,[m]:x.filter(E=>E!==p)}:{...v,[m]:[...x,p]}})};return f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Dashboard Customization"}),f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"News Notifications"}),f.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select which news impacts you want to see."}),f.jsx("div",{className:"flex gap-4",children:["High","Medium","Low"].map(m=>f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:t.newsImpacts?.includes(m),onChange:()=>d("newsImpacts",m),className:"form-checkbox text-primary rounded bg-gray-900 border-gray-700"}),f.jsxs("span",{className:"text-gray-300",children:[m," Impact"]})]},m))})]}),f.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[f.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Analysis Filters"}),f.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Choose your favorite pairs to track."}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["XAUUSD","EURUSD","GBPUSD","USDJPY","BTCUSD","ETHUSD","US30","NAS100"].map(m=>f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:t.analysisCurrencies?.includes(m),onChange:()=>d("analysisCurrencies",m),className:"form-checkbox text-primary rounded bg-gray-900 border-gray-700"}),f.jsx("span",{className:"text-gray-300",children:m})]},m))})]})]}),f.jsx("div",{className:"mt-8",children:f.jsx(xt,{onClick:c,disabled:a,children:a?"Saving...":"Save Preferences"})})]})},PD=({userProfile:n,setUserProfile:e})=>{const[t,r]=P.useState(n?.username||""),[a,l]=P.useState(n?.bio||""),[c,d]=P.useState(!1),[m,p]=P.useState(!1);P.useEffect(()=>{n&&(r(n.username||""),l(n.bio||""))},[n]);const v=A=>new Promise((S,O)=>{const R=new FileReader;R.readAsDataURL(A),R.onload=V=>{const F=new Image;F.src=V.target.result,F.onload=()=>{const Y=document.createElement("canvas"),Q=300,ie=300;let ve=F.width,L=F.height;ve>L?ve>Q&&(L*=Q/ve,ve=Q):L>ie&&(ve*=ie/L,L=ie),Y.width=ve,Y.height=L,Y.getContext("2d").drawImage(F,0,0,ve,L);const U=Y.toDataURL("image/jpeg",.7);S(U)},F.onerror=Y=>O(Y)},R.onerror=V=>O(V)}),x=async A=>{const S=A.target.files[0];if(S){S.size>5*1024*1024&&console.log("Large file detected, compression will be applied."),d(!0);try{const O=await v(S);O.length>5e5&&console.warn("Image might be too large for smooth database performance"),await Oc(Fe(Ee,"users",Le.currentUser.uid),{avatar_url:O},{merge:!0}),e({...n,avatar_url:O})}catch(O){console.error("Error processing image:",O),alert("Failed to process image.")}finally{d(!1)}}},E=async()=>{p(!0);try{if(t!==n?.username){if(!t.trim()){alert("Username cannot be empty"),p(!1);return}const A=Br(mt(Ee,"users"),LS("username","==",t));if(!(await An(A)).empty){alert("Username is already taken. Please choose another."),p(!1);return}}await Oc(Fe(Ee,"users",Le.currentUser.uid),{username:t,bio:a},{merge:!0}),e({...n,username:t,bio:a}),alert("Profile updated!")}catch(A){console.error("Error saving profile:",A),alert("Failed to save profile.")}finally{p(!1)}};return f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Profile Settings"}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[f.jsxs("div",{className:"flex flex-col items-center gap-4",children:[f.jsxs("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-800 relative group",children:[f.jsx("img",{src:n?.avatar_url||`https://ui-avatars.com/api/?name=${n?.username||"User"}`,alt:"Avatar",className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:f.jsx("span",{className:"text-xs text-white",children:"Change"})}),f.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"absolute inset-0 opacity-0 cursor-pointer"})]}),c&&f.jsx("span",{className:"text-xs text-primary",children:"Compressing & Saving..."})]}),f.jsxs("div",{className:"flex-1 space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Username (Public)"}),f.jsx("input",{type:"text",value:t,onChange:A=>r(A.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g. CryptoKing"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique handle for your public profile."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bio"}),f.jsx("textarea",{value:a,onChange:A=>l(A.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:outline-none h-24 resize-none",placeholder:"Tell us about your trading journey..."})]}),f.jsx("div",{children:f.jsx(xt,{onClick:E,disabled:m,children:m?"Saving...":"Save Changes"})}),n?.username&&f.jsxs("div",{className:"mt-4 p-4 bg-gray-900/50 rounded-lg border border-gray-800 flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-gray-400",children:"Your Public Profile:"}),f.jsx(Je,{to:`/profile/${n.username}`,className:"text-primary hover:underline text-sm font-medium",children:"View Public Page "})]})]})]})]})},UD=()=>{const[n,e]=P.useState(null),[t,r]=P.useState(!0),[a,l]=P.useState("overview"),[c,d]=P.useState([]),[m,p]=P.useState({totalProgress:0,completed:0,avgQuiz:0});P.useEffect(()=>{(async()=>{if(Le.currentUser)try{const E=Fe(Ee,"users",Le.currentUser.uid),A=await dr(E);A.exists()&&e(A.data());const S=await An(mt(Ee,"users",Le.currentUser.uid,"course_progress")),O={};if(S.docs.forEach(R=>{O[R.id]=R.data()}),Object.keys(O).length>0){const F=(await An(mt(Ee,"courses"))).docs.map(Q=>({id:Q.id,...Q.data()})).filter(Q=>O[Q.id]).map(Q=>{const ie=O[Q.id],ve=ie.completedLessonIds?.length||0;return{...Q,completedCount:ve,lastAccessed:ie.lastAccessed}});d(F);const Y=F.reduce((Q,ie)=>Q+ie.completedCount,0);p({totalProgress:Y,completed:F.length,avgQuiz:0})}}catch(E){console.error("Error fetching user data:",E)}finally{r(!1)}})()},[]);const v=n?.username||Le.currentUser?.displayName||"Trader";return console.log("Dashboard Render",{loading:t,userProfile:n,activeTab:a}),f.jsxs("div",{className:"min-h-screen bg-background text-white animate-fade-in",children:[f.jsx("div",{className:"bg-surface border-b border-gray-800",children:f.jsx("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-primary to-secondary p-[2px]",children:f.jsx("img",{src:n?.avatar_url||`https://ui-avatars.com/api/?name=${v}`,alt:"Profile",className:"h-full w-full rounded-full bg-background object-cover"})}),f.jsxs("div",{children:[f.jsxs("h1",{className:"text-3xl font-bold text-white",children:["Welcome back, ",f.jsx("span",{className:"text-primary",children:v})]}),f.jsx("p",{className:"mt-1 text-gray-400",children:"Ready to dominate the markets today?"})]})]})})}),f.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"flex space-x-6 mb-8 border-b border-gray-800 overflow-x-auto",children:[f.jsx("button",{onClick:()=>l("overview"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="overview"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Overview"}),f.jsx("button",{onClick:()=>l("profile"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="profile"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Profile"}),f.jsx("button",{onClick:()=>l("settings"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="settings"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Settings & Preferences"}),f.jsx("button",{onClick:()=>l("learning"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="learning"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"My Learning"})]}),a==="overview"&&f.jsxs("div",{className:"animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Account Overview"}),f.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3 mb-12",children:[f.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:f.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[f.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Lessons Completed"}),f.jsx("dd",{className:"mt-1 text-3xl font-semibold text-white",children:m.totalProgress})]})}),f.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:f.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[f.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Active Courses"}),f.jsx("dd",{className:"mt-1 text-3xl font-semibold text-primary",children:m.completed})]})}),f.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:f.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[f.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Quiz Score Avg"}),f.jsx("dd",{className:"mt-1 text-3xl font-semibold text-secondary",children:"N/A"})]})})]}),c.length>0&&f.jsxs("div",{className:"mb-8",children:[f.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Jump Back In"}),f.jsxs("div",{className:"bg-surface rounded-xl p-6 border border-gray-800 flex flex-col md:flex-row items-center gap-6",children:[f.jsx("div",{className:"w-full md:w-1/3 aspect-video rounded-lg overflow-hidden",children:f.jsx("img",{src:c[0].image,alt:c[0].title,className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"flex-1 w-full text-center md:text-left",children:[f.jsx("h4",{className:"text-xl font-bold text-white",children:c[0].title}),f.jsx("p",{className:"text-gray-400 mt-2 mb-4",children:"Continue where you left off."}),f.jsx(Je,{to:`/academy/${c[0].path||"General"}/${c[0].id}`,children:f.jsx(xt,{variant:"primary",children:"Continue Learning"})})]})]})]})]}),a==="profile"&&f.jsx(PD,{userProfile:n,setUserProfile:e}),a==="settings"&&f.jsx(MD,{userProfile:n,setUserProfile:e}),a==="learning"&&f.jsxs("div",{className:"animate-fade-in",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Courses"}),f.jsx(Je,{to:"/academy",className:"text-primary text-sm hover:underline",children:"Browse All Courses"})]}),c.length>0?f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:c.map(x=>f.jsxs("div",{className:"bg-surface rounded-xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-colors group",children:[f.jsxs("div",{className:"h-48 overflow-hidden relative",children:[f.jsx("img",{src:x.image,alt:x.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),f.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(Je,{to:`/academy/${x.path||"General"}/${x.id}`,children:f.jsx(xt,{variant:"primary",size:"sm",children:"Continue Learning"})})})]}),f.jsxs("div",{className:"p-6",children:[f.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:x.title}),f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[f.jsx("span",{children:"Lessons Completed"}),f.jsx("span",{children:x.completedCount})]}),f.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:f.jsx("div",{className:"h-2 rounded-full bg-secondary",style:{width:`${Math.min(x.completedCount/10*100,100)}%`}})})]})]})]},x.id))}):f.jsxs("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:[f.jsx("p",{className:"text-gray-400 mb-4",children:"You haven't started any courses yet."}),f.jsx(Je,{to:"/academy",children:f.jsx(xt,{children:"Explore Academy"})})]})]})]})]})},VD=()=>{const[n,e]=P.useState(!1),[t,r]=P.useState(!0),a=ki();return P.useEffect(()=>{const l=wh(Le,async c=>{if(c)try{const d=await dr(Fe(Ee,"users",c.uid));d.exists()&&d.data().role==="admin"?e(!0):a("/dashboard")}catch(d){console.error("Admin check failed",d),a("/dashboard")}else a("/login");r(!1)});return()=>l()},[a]),t?f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold mb-2",children:"Verifying Clearance..."}),f.jsx("div",{className:"text-gray-400",children:"Please wait."})]})}):n?f.jsxs("div",{className:"min-h-screen bg-background flex",children:[f.jsxs("aside",{className:"w-64 bg-surface border-r border-gray-800 flex-shrink-0 hidden md:flex flex-col",children:[f.jsx("div",{className:"p-6 border-b border-gray-800",children:f.jsxs("span",{className:"text-xl font-bold text-white tracking-wider",children:["VOLCANO ",f.jsx("span",{className:"text-secondary text-base",children:"ADMIN"})]})}),f.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[f.jsx(Lu,{to:"/admin",end:!0,children:"Dashboard"}),f.jsx(Lu,{to:"/admin/news",children:"Manage News"}),f.jsx(Lu,{to:"/admin/analysis",children:"Manage Analysis"}),f.jsx(Lu,{to:"/admin/courses",children:"Manage Courses"}),f.jsx(Lu,{to:"/admin/profile",children:"Analyst Profile"})]}),f.jsxs("div",{className:"p-4 border-t border-gray-800",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold",children:"A"}),f.jsxs("div",{className:"text-sm",children:[f.jsx("div",{className:"text-white font-medium",children:"Administrator"}),f.jsx("div",{className:"text-gray-500 text-xs",children:"Super User"})]})]}),f.jsx(xt,{variant:"outline",size:"sm",className:"w-full",onClick:()=>a("/"),children:"Exit to Site"})]})]}),f.jsxs("div",{className:"md:hidden absolute top-0 left-0 right-0 h-16 bg-surface border-b border-gray-800 flex items-center px-4 justify-between z-20",children:[f.jsx("span",{className:"font-bold text-white",children:"Admin Panel"}),f.jsx(xt,{size:"sm",onClick:()=>a("/"),children:"Exit"})]}),f.jsx("main",{className:"flex-1 overflow-auto p-8 pt-24 md:pt-8",children:f.jsx(TR,{})})]}):null},Lu=({to:n,children:e,end:t=!1})=>f.jsx(uT,{to:n,end:t,className:({isActive:r})=>`block px-4 py-3 rounded-lg text-sm font-medium transition-colors ${r?"bg-primary/10 text-primary border border-primary/20":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:e}),qD=()=>{const[n,e]=P.useState({users:0,courses:0,analysis:0,news:0}),[t,r]=P.useState(!0);return P.useEffect(()=>{(async()=>{try{const l=await ef(mt(Ee,"users")),c=await ef(mt(Ee,"courses")),d=await ef(mt(Ee,"analysis")),m=await ef(mt(Ee,"news"));e({users:l.data().count,courses:c.data().count,analysis:d.data().count,news:m.data().count})}catch(l){console.error("Error fetching stats:",l)}finally{r(!1)}})()},[]),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"System Overview"}),f.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[f.jsx(tf,{title:"Total Users",value:t?"...":n.users,change:"Registered",color:"primary"}),f.jsx(tf,{title:"Active Courses",value:t?"...":n.courses,change:"Live",color:"white"}),f.jsx(tf,{title:"Analysis Posts",value:t?"...":n.analysis,change:"Market Updates",color:"secondary"}),f.jsx(tf,{title:"News Alerts",value:t?"...":n.news,change:"Published",color:"accent"})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Quick Actions"}),f.jsxs("div",{className:"space-y-3",children:[f.jsx(Qp,{label:"Post New Analysis",to:"/admin/analysis"}),f.jsx(Qp,{label:"Broadcast News Alert",to:"/admin/news"}),f.jsx(Qp,{label:"Review New User Signups",to:"#"})]})]}),f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"System Status"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(Xp,{label:"Database Connection",status:"Healthy"}),f.jsx(Xp,{label:"Auth Service",status:"Healthy"}),f.jsx(Xp,{label:"API Latency",status:"24ms"})]})]})]})]})},tf=({title:n,value:e,change:t,color:r})=>{const a={primary:"text-primary",secondary:"text-secondary",accent:"text-accent",white:"text-white"};return f.jsxs("div",{className:"bg-surface rounded-xl p-6 border border-gray-800",children:[f.jsx("p",{className:"text-sm font-medium text-gray-400",children:n}),f.jsxs("div",{className:"mt-2 flex items-baseline",children:[f.jsx("p",{className:`text-3xl font-semibold ${a[r]||"text-white"}`,children:e}),f.jsx("p",{className:"ml-2 text-sm text-gray-500",children:t})]})]})},Qp=({label:n,to:e})=>f.jsxs(Je,{to:e,className:"flex items-center justify-between p-3 bg-background rounded-lg hover:bg-gray-800 cursor-pointer transition-colors",children:[f.jsx("span",{className:"text-gray-300",children:n}),f.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),Xp=({label:n,status:e})=>f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-400",children:n}),f.jsxs("span",{className:"flex items-center text-primary text-sm font-medium",children:[f.jsx("span",{className:"w-2 h-2 bg-primary rounded-full mr-2"}),e]})]});var qS=typeof global=="object"&&global&&global.Object===Object&&global,BD=typeof self=="object"&&self&&self.Object===Object&&self,Mi=qS||BD||Function("return this")(),jo=Mi.Symbol,BS=Object.prototype,zD=BS.hasOwnProperty,HD=BS.toString,ku=jo?jo.toStringTag:void 0;function FD(n){var e=zD.call(n,ku),t=n[ku];try{n[ku]=void 0;var r=!0}catch{}var a=HD.call(n);return r&&(e?n[ku]=t:delete n[ku]),a}var $D=Object.prototype,GD=$D.toString;function KD(n){return GD.call(n)}var YD="[object Null]",QD="[object Undefined]",KE=jo?jo.toStringTag:void 0;function Kc(n){return n==null?n===void 0?QD:YD:KE&&KE in Object(n)?FD(n):KD(n)}function Sa(n){return n!=null&&typeof n=="object"}var gl=Array.isArray;function Po(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}function zS(n){return n}var XD="[object AsyncFunction]",WD="[object Function]",ZD="[object GeneratorFunction]",JD="[object Proxy]";function hv(n){if(!Po(n))return!1;var e=Kc(n);return e==WD||e==ZD||e==XD||e==JD}var Wp=Mi["__core-js_shared__"],YE=(function(){var n=/[^.]+$/.exec(Wp&&Wp.keys&&Wp.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function eL(n){return!!YE&&YE in n}var tL=Function.prototype,nL=tL.toString;function Tl(n){if(n!=null){try{return nL.call(n)}catch{}try{return n+""}catch{}}return""}var rL=/[\\^$.*+?()[\]{}|]/g,sL=/^\[object .+?Constructor\]$/,iL=Function.prototype,aL=Object.prototype,oL=iL.toString,lL=aL.hasOwnProperty,cL=RegExp("^"+oL.call(lL).replace(rL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function uL(n){if(!Po(n)||eL(n))return!1;var e=hv(n)?cL:sL;return e.test(Tl(n))}function hL(n,e){return n?.[e]}function Al(n,e){var t=hL(n,e);return uL(t)?t:void 0}var qy=Al(Mi,"WeakMap"),QE=Object.create,dL=(function(){function n(){}return function(e){if(!Po(e))return{};if(QE)return QE(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}})();function fL(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function mL(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var gL=800,pL=16,yL=Date.now;function vL(n){var e=0,t=0;return function(){var r=yL(),a=pL-(r-t);if(t=r,a>0){if(++e>=gL)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function bL(n){return function(){return n}}var Yf=(function(){try{var n=Al(Object,"defineProperty");return n({},"",{}),n}catch{}})(),_L=Yf?function(n,e){return Yf(n,"toString",{configurable:!0,enumerable:!1,value:bL(e),writable:!0})}:zS,xL=vL(_L);function EL(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var wL=9007199254740991,TL=/^(?:0|[1-9]\d*)$/;function HS(n,e){var t=typeof n;return e=e??wL,!!e&&(t=="number"||t!="symbol"&&TL.test(n))&&n>-1&&n%1==0&&n<e}function dv(n,e,t){e=="__proto__"&&Yf?Yf(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function Oh(n,e){return n===e||n!==n&&e!==e}var AL=Object.prototype,SL=AL.hasOwnProperty;function FS(n,e,t){var r=n[e];(!(SL.call(n,e)&&Oh(r,t))||t===void 0&&!(e in n))&&dv(n,e,t)}function NL(n,e,t,r){var a=!t;t||(t={});for(var l=-1,c=e.length;++l<c;){var d=e[l],m=void 0;m===void 0&&(m=n[d]),a?dv(t,d,m):FS(t,d,m)}return t}var XE=Math.max;function CL(n,e,t){return e=XE(e===void 0?n.length-1:e,0),function(){for(var r=arguments,a=-1,l=XE(r.length-e,0),c=Array(l);++a<l;)c[a]=r[e+a];a=-1;for(var d=Array(e+1);++a<e;)d[a]=r[a];return d[e]=t(c),fL(n,this,d)}}function RL(n,e){return xL(CL(n,e,zS),n+"")}var IL=9007199254740991;function $S(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=IL}function Cm(n){return n!=null&&$S(n.length)&&!hv(n)}function jL(n,e,t){if(!Po(t))return!1;var r=typeof e;return(r=="number"?Cm(t)&&HS(e,t.length):r=="string"&&e in t)?Oh(t[e],n):!1}function OL(n){return RL(function(e,t){var r=-1,a=t.length,l=a>1?t[a-1]:void 0,c=a>2?t[2]:void 0;for(l=n.length>3&&typeof l=="function"?(a--,l):void 0,c&&jL(t[0],t[1],c)&&(l=a<3?void 0:l,a=1),e=Object(e);++r<a;){var d=t[r];d&&n(e,d,r,l)}return e})}var DL=Object.prototype;function fv(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||DL;return n===t}function LL(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var kL="[object Arguments]";function WE(n){return Sa(n)&&Kc(n)==kL}var GS=Object.prototype,ML=GS.hasOwnProperty,PL=GS.propertyIsEnumerable,By=WE((function(){return arguments})())?WE:function(n){return Sa(n)&&ML.call(n,"callee")&&!PL.call(n,"callee")};function UL(){return!1}var KS=typeof os=="object"&&os&&!os.nodeType&&os,ZE=KS&&typeof ls=="object"&&ls&&!ls.nodeType&&ls,VL=ZE&&ZE.exports===KS,JE=VL?Mi.Buffer:void 0,qL=JE?JE.isBuffer:void 0,uh=qL||UL,BL="[object Arguments]",zL="[object Array]",HL="[object Boolean]",FL="[object Date]",$L="[object Error]",GL="[object Function]",KL="[object Map]",YL="[object Number]",QL="[object Object]",XL="[object RegExp]",WL="[object Set]",ZL="[object String]",JL="[object WeakMap]",ek="[object ArrayBuffer]",tk="[object DataView]",nk="[object Float32Array]",rk="[object Float64Array]",sk="[object Int8Array]",ik="[object Int16Array]",ak="[object Int32Array]",ok="[object Uint8Array]",lk="[object Uint8ClampedArray]",ck="[object Uint16Array]",uk="[object Uint32Array]",Bt={};Bt[nk]=Bt[rk]=Bt[sk]=Bt[ik]=Bt[ak]=Bt[ok]=Bt[lk]=Bt[ck]=Bt[uk]=!0;Bt[BL]=Bt[zL]=Bt[ek]=Bt[HL]=Bt[tk]=Bt[FL]=Bt[$L]=Bt[GL]=Bt[KL]=Bt[YL]=Bt[QL]=Bt[XL]=Bt[WL]=Bt[ZL]=Bt[JL]=!1;function hk(n){return Sa(n)&&$S(n.length)&&!!Bt[Kc(n)]}function mv(n){return function(e){return n(e)}}var YS=typeof os=="object"&&os&&!os.nodeType&&os,Zu=YS&&typeof ls=="object"&&ls&&!ls.nodeType&&ls,dk=Zu&&Zu.exports===YS,Zp=dk&&qS.process,Dc=(function(){try{var n=Zu&&Zu.require&&Zu.require("util").types;return n||Zp&&Zp.binding&&Zp.binding("util")}catch{}})(),ew=Dc&&Dc.isTypedArray,gv=ew?mv(ew):hk,fk=Object.prototype,mk=fk.hasOwnProperty;function QS(n,e){var t=gl(n),r=!t&&By(n),a=!t&&!r&&uh(n),l=!t&&!r&&!a&&gv(n),c=t||r||a||l,d=c?LL(n.length,String):[],m=d.length;for(var p in n)(e||mk.call(n,p))&&!(c&&(p=="length"||a&&(p=="offset"||p=="parent")||l&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||HS(p,m)))&&d.push(p);return d}function XS(n,e){return function(t){return n(e(t))}}var gk=XS(Object.keys,Object),pk=Object.prototype,yk=pk.hasOwnProperty;function vk(n){if(!fv(n))return gk(n);var e=[];for(var t in Object(n))yk.call(n,t)&&t!="constructor"&&e.push(t);return e}function bk(n){return Cm(n)?QS(n):vk(n)}function _k(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var xk=Object.prototype,Ek=xk.hasOwnProperty;function wk(n){if(!Po(n))return _k(n);var e=fv(n),t=[];for(var r in n)r=="constructor"&&(e||!Ek.call(n,r))||t.push(r);return t}function WS(n){return Cm(n)?QS(n,!0):wk(n)}var hh=Al(Object,"create");function Tk(){this.__data__=hh?hh(null):{},this.size=0}function Ak(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Sk="__lodash_hash_undefined__",Nk=Object.prototype,Ck=Nk.hasOwnProperty;function Rk(n){var e=this.__data__;if(hh){var t=e[n];return t===Sk?void 0:t}return Ck.call(e,n)?e[n]:void 0}var Ik=Object.prototype,jk=Ik.hasOwnProperty;function Ok(n){var e=this.__data__;return hh?e[n]!==void 0:jk.call(e,n)}var Dk="__lodash_hash_undefined__";function Lk(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=hh&&e===void 0?Dk:e,this}function pl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}pl.prototype.clear=Tk;pl.prototype.delete=Ak;pl.prototype.get=Rk;pl.prototype.has=Ok;pl.prototype.set=Lk;function kk(){this.__data__=[],this.size=0}function Rm(n,e){for(var t=n.length;t--;)if(Oh(n[t][0],e))return t;return-1}var Mk=Array.prototype,Pk=Mk.splice;function Uk(n){var e=this.__data__,t=Rm(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():Pk.call(e,t,1),--this.size,!0}function Vk(n){var e=this.__data__,t=Rm(e,n);return t<0?void 0:e[t][1]}function qk(n){return Rm(this.__data__,n)>-1}function Bk(n,e){var t=this.__data__,r=Rm(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function ja(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ja.prototype.clear=kk;ja.prototype.delete=Uk;ja.prototype.get=Vk;ja.prototype.has=qk;ja.prototype.set=Bk;var dh=Al(Mi,"Map");function zk(){this.size=0,this.__data__={hash:new pl,map:new(dh||ja),string:new pl}}function Hk(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Im(n,e){var t=n.__data__;return Hk(e)?t[typeof e=="string"?"string":"hash"]:t.map}function Fk(n){var e=Im(this,n).delete(n);return this.size-=e?1:0,e}function $k(n){return Im(this,n).get(n)}function Gk(n){return Im(this,n).has(n)}function Kk(n,e){var t=Im(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function Sl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Sl.prototype.clear=zk;Sl.prototype.delete=Fk;Sl.prototype.get=$k;Sl.prototype.has=Gk;Sl.prototype.set=Kk;function Yk(n,e){for(var t=-1,r=e.length,a=n.length;++t<r;)n[a+t]=e[t];return n}var ZS=XS(Object.getPrototypeOf,Object),Qk="[object Object]",Xk=Function.prototype,Wk=Object.prototype,JS=Xk.toString,Zk=Wk.hasOwnProperty,Jk=JS.call(Object);function eM(n){if(!Sa(n)||Kc(n)!=Qk)return!1;var e=ZS(n);if(e===null)return!0;var t=Zk.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&JS.call(t)==Jk}function tM(){this.__data__=new ja,this.size=0}function nM(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function rM(n){return this.__data__.get(n)}function sM(n){return this.__data__.has(n)}var iM=200;function aM(n,e){var t=this.__data__;if(t instanceof ja){var r=t.__data__;if(!dh||r.length<iM-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Sl(r)}return t.set(n,e),this.size=t.size,this}function ji(n){var e=this.__data__=new ja(n);this.size=e.size}ji.prototype.clear=tM;ji.prototype.delete=nM;ji.prototype.get=rM;ji.prototype.has=sM;ji.prototype.set=aM;var eN=typeof os=="object"&&os&&!os.nodeType&&os,tw=eN&&typeof ls=="object"&&ls&&!ls.nodeType&&ls,oM=tw&&tw.exports===eN,nw=oM?Mi.Buffer:void 0,rw=nw?nw.allocUnsafe:void 0;function tN(n,e){if(e)return n.slice();var t=n.length,r=rw?rw(t):new n.constructor(t);return n.copy(r),r}function lM(n,e){for(var t=-1,r=n==null?0:n.length,a=0,l=[];++t<r;){var c=n[t];e(c,t,n)&&(l[a++]=c)}return l}function cM(){return[]}var uM=Object.prototype,hM=uM.propertyIsEnumerable,sw=Object.getOwnPropertySymbols,dM=sw?function(n){return n==null?[]:(n=Object(n),lM(sw(n),function(e){return hM.call(n,e)}))}:cM;function fM(n,e,t){var r=e(n);return gl(n)?r:Yk(r,t(n))}function zy(n){return fM(n,bk,dM)}var Hy=Al(Mi,"DataView"),Fy=Al(Mi,"Promise"),$y=Al(Mi,"Set"),iw="[object Map]",mM="[object Object]",aw="[object Promise]",ow="[object Set]",lw="[object WeakMap]",cw="[object DataView]",gM=Tl(Hy),pM=Tl(dh),yM=Tl(Fy),vM=Tl($y),bM=Tl(qy),Ws=Kc;(Hy&&Ws(new Hy(new ArrayBuffer(1)))!=cw||dh&&Ws(new dh)!=iw||Fy&&Ws(Fy.resolve())!=aw||$y&&Ws(new $y)!=ow||qy&&Ws(new qy)!=lw)&&(Ws=function(n){var e=Kc(n),t=e==mM?n.constructor:void 0,r=t?Tl(t):"";if(r)switch(r){case gM:return cw;case pM:return iw;case yM:return aw;case vM:return ow;case bM:return lw}return e});var _M=Object.prototype,xM=_M.hasOwnProperty;function EM(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&xM.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var Qf=Mi.Uint8Array;function pv(n){var e=new n.constructor(n.byteLength);return new Qf(e).set(new Qf(n)),e}function wM(n,e){var t=pv(n.buffer);return new n.constructor(t,n.byteOffset,n.byteLength)}var TM=/\w*$/;function AM(n){var e=new n.constructor(n.source,TM.exec(n));return e.lastIndex=n.lastIndex,e}var uw=jo?jo.prototype:void 0,hw=uw?uw.valueOf:void 0;function SM(n){return hw?Object(hw.call(n)):{}}function nN(n,e){var t=e?pv(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var NM="[object Boolean]",CM="[object Date]",RM="[object Map]",IM="[object Number]",jM="[object RegExp]",OM="[object Set]",DM="[object String]",LM="[object Symbol]",kM="[object ArrayBuffer]",MM="[object DataView]",PM="[object Float32Array]",UM="[object Float64Array]",VM="[object Int8Array]",qM="[object Int16Array]",BM="[object Int32Array]",zM="[object Uint8Array]",HM="[object Uint8ClampedArray]",FM="[object Uint16Array]",$M="[object Uint32Array]";function GM(n,e,t){var r=n.constructor;switch(e){case kM:return pv(n);case NM:case CM:return new r(+n);case MM:return wM(n);case PM:case UM:case VM:case qM:case BM:case zM:case HM:case FM:case $M:return nN(n,t);case RM:return new r;case IM:case DM:return new r(n);case jM:return AM(n);case OM:return new r;case LM:return SM(n)}}function rN(n){return typeof n.constructor=="function"&&!fv(n)?dL(ZS(n)):{}}var KM="[object Map]";function YM(n){return Sa(n)&&Ws(n)==KM}var dw=Dc&&Dc.isMap,QM=dw?mv(dw):YM,XM="[object Set]";function WM(n){return Sa(n)&&Ws(n)==XM}var fw=Dc&&Dc.isSet,ZM=fw?mv(fw):WM,JM=1,sN="[object Arguments]",e8="[object Array]",t8="[object Boolean]",n8="[object Date]",r8="[object Error]",iN="[object Function]",s8="[object GeneratorFunction]",i8="[object Map]",a8="[object Number]",aN="[object Object]",o8="[object RegExp]",l8="[object Set]",c8="[object String]",u8="[object Symbol]",h8="[object WeakMap]",d8="[object ArrayBuffer]",f8="[object DataView]",m8="[object Float32Array]",g8="[object Float64Array]",p8="[object Int8Array]",y8="[object Int16Array]",v8="[object Int32Array]",b8="[object Uint8Array]",_8="[object Uint8ClampedArray]",x8="[object Uint16Array]",E8="[object Uint32Array]",Lt={};Lt[sN]=Lt[e8]=Lt[d8]=Lt[f8]=Lt[t8]=Lt[n8]=Lt[m8]=Lt[g8]=Lt[p8]=Lt[y8]=Lt[v8]=Lt[i8]=Lt[a8]=Lt[aN]=Lt[o8]=Lt[l8]=Lt[c8]=Lt[u8]=Lt[b8]=Lt[_8]=Lt[x8]=Lt[E8]=!0;Lt[r8]=Lt[iN]=Lt[h8]=!1;function Af(n,e,t,r,a,l){var c,d=e&JM;if(c!==void 0)return c;if(!Po(n))return n;var m=gl(n);if(m)c=EM(n);else{var p=Ws(n),v=p==iN||p==s8;if(uh(n))return tN(n,d);if(p==aN||p==sN||v&&!a)c=v?{}:rN(n);else{if(!Lt[p])return a?n:{};c=GM(n,p,d)}}l||(l=new ji);var x=l.get(n);if(x)return x;l.set(n,c),ZM(n)?n.forEach(function(S){c.add(Af(S,e,t,S,n,l))}):QM(n)&&n.forEach(function(S,O){c.set(O,Af(S,e,t,O,n,l))});var E=zy,A=m?void 0:E(n);return EL(A||n,function(S,O){A&&(O=S,S=n[O]),FS(c,O,Af(S,e,t,O,n,l))}),c}var w8=1,T8=4;function bc(n){return Af(n,w8|T8)}var A8="__lodash_hash_undefined__";function S8(n){return this.__data__.set(n,A8),this}function N8(n){return this.__data__.has(n)}function Xf(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Sl;++e<t;)this.add(n[e])}Xf.prototype.add=Xf.prototype.push=S8;Xf.prototype.has=N8;function C8(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function R8(n,e){return n.has(e)}var I8=1,j8=2;function oN(n,e,t,r,a,l){var c=t&I8,d=n.length,m=e.length;if(d!=m&&!(c&&m>d))return!1;var p=l.get(n),v=l.get(e);if(p&&v)return p==e&&v==n;var x=-1,E=!0,A=t&j8?new Xf:void 0;for(l.set(n,e),l.set(e,n);++x<d;){var S=n[x],O=e[x];if(r)var R=c?r(O,S,x,e,n,l):r(S,O,x,n,e,l);if(R!==void 0){if(R)continue;E=!1;break}if(A){if(!C8(e,function(V,F){if(!R8(A,F)&&(S===V||a(S,V,t,r,l)))return A.push(F)})){E=!1;break}}else if(!(S===O||a(S,O,t,r,l))){E=!1;break}}return l.delete(n),l.delete(e),E}function O8(n){var e=-1,t=Array(n.size);return n.forEach(function(r,a){t[++e]=[a,r]}),t}function D8(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var L8=1,k8=2,M8="[object Boolean]",P8="[object Date]",U8="[object Error]",V8="[object Map]",q8="[object Number]",B8="[object RegExp]",z8="[object Set]",H8="[object String]",F8="[object Symbol]",$8="[object ArrayBuffer]",G8="[object DataView]",mw=jo?jo.prototype:void 0,Jp=mw?mw.valueOf:void 0;function K8(n,e,t,r,a,l,c){switch(t){case G8:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case $8:return!(n.byteLength!=e.byteLength||!l(new Qf(n),new Qf(e)));case M8:case P8:case q8:return Oh(+n,+e);case U8:return n.name==e.name&&n.message==e.message;case B8:case H8:return n==e+"";case V8:var d=O8;case z8:var m=r&L8;if(d||(d=D8),n.size!=e.size&&!m)return!1;var p=c.get(n);if(p)return p==e;r|=k8,c.set(n,e);var v=oN(d(n),d(e),r,a,l,c);return c.delete(n),v;case F8:if(Jp)return Jp.call(n)==Jp.call(e)}return!1}var Y8=1,Q8=Object.prototype,X8=Q8.hasOwnProperty;function W8(n,e,t,r,a,l){var c=t&Y8,d=zy(n),m=d.length,p=zy(e),v=p.length;if(m!=v&&!c)return!1;for(var x=m;x--;){var E=d[x];if(!(c?E in e:X8.call(e,E)))return!1}var A=l.get(n),S=l.get(e);if(A&&S)return A==e&&S==n;var O=!0;l.set(n,e),l.set(e,n);for(var R=c;++x<m;){E=d[x];var V=n[E],F=e[E];if(r)var Y=c?r(F,V,E,e,n,l):r(V,F,E,n,e,l);if(!(Y===void 0?V===F||a(V,F,t,r,l):Y)){O=!1;break}R||(R=E=="constructor")}if(O&&!R){var Q=n.constructor,ie=e.constructor;Q!=ie&&"constructor"in n&&"constructor"in e&&!(typeof Q=="function"&&Q instanceof Q&&typeof ie=="function"&&ie instanceof ie)&&(O=!1)}return l.delete(n),l.delete(e),O}var Z8=1,gw="[object Arguments]",pw="[object Array]",nf="[object Object]",J8=Object.prototype,yw=J8.hasOwnProperty;function e9(n,e,t,r,a,l){var c=gl(n),d=gl(e),m=c?pw:Ws(n),p=d?pw:Ws(e);m=m==gw?nf:m,p=p==gw?nf:p;var v=m==nf,x=p==nf,E=m==p;if(E&&uh(n)){if(!uh(e))return!1;c=!0,v=!1}if(E&&!v)return l||(l=new ji),c||gv(n)?oN(n,e,t,r,a,l):K8(n,e,m,t,r,a,l);if(!(t&Z8)){var A=v&&yw.call(n,"__wrapped__"),S=x&&yw.call(e,"__wrapped__");if(A||S){var O=A?n.value():n,R=S?e.value():e;return l||(l=new ji),a(O,R,t,r,l)}}return E?(l||(l=new ji),W8(n,e,t,r,a,l)):!1}function lN(n,e,t,r,a){return n===e?!0:n==null||e==null||!Sa(n)&&!Sa(e)?n!==n&&e!==e:e9(n,e,t,r,lN,a)}function t9(n){return function(e,t,r){for(var a=-1,l=Object(e),c=r(e),d=c.length;d--;){var m=c[++a];if(t(l[m],m,l)===!1)break}return e}}var n9=t9();function Gy(n,e,t){(t!==void 0&&!Oh(n[e],t)||t===void 0&&!(e in n))&&dv(n,e,t)}function r9(n){return Sa(n)&&Cm(n)}function Ky(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function s9(n){return NL(n,WS(n))}function i9(n,e,t,r,a,l,c){var d=Ky(n,t),m=Ky(e,t),p=c.get(m);if(p){Gy(n,t,p);return}var v=l?l(d,m,t+"",n,e,c):void 0,x=v===void 0;if(x){var E=gl(m),A=!E&&uh(m),S=!E&&!A&&gv(m);v=m,E||A||S?gl(d)?v=d:r9(d)?v=mL(d):A?(x=!1,v=tN(m,!0)):S?(x=!1,v=nN(m,!0)):v=[]:eM(m)||By(m)?(v=d,By(d)?v=s9(d):(!Po(d)||hv(d))&&(v=rN(m))):x=!1}x&&(c.set(m,v),a(v,m,r,l,c),c.delete(m)),Gy(n,t,v)}function cN(n,e,t,r,a){n!==e&&n9(e,function(l,c){if(a||(a=new ji),Po(l))i9(n,e,c,t,cN,r,a);else{var d=r?r(Ky(n,c),l,c+"",n,e,a):void 0;d===void 0&&(d=l),Gy(n,c,d)}},WS)}function mo(n,e){return lN(n,e)}var wo=OL(function(n,e,t){cN(n,e,t)}),Oe=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(Oe||{});class Li{constructor(e,t,r={}){this.attrName=e,this.keyName=t;const a=Oe.TYPE&Oe.ATTRIBUTE;this.scope=r.scope!=null?r.scope&Oe.LEVEL|a:Oe.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}}class _c extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const uN=class Yy{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,t)}return null}create(e,t,r){const a=this.query(t);if(a==null)throw new _c(`Unable to create ${t} blot`);const l=a,c=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:l.create(r),d=new l(e,c,r);return Yy.blots.set(d.domNode,d),d}find(e,t=!1){return Yy.find(e,t)}query(e,t=Oe.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&Oe.LEVEL&Oe.BLOCK?r=this.types.block:e&Oe.LEVEL&Oe.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(a=>(r=this.classes[a],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&t&Oe.LEVEL&r.scope&&t&Oe.TYPE&r.scope?r:null}register(...e){return e.map(t=>{const r="blotName"in t,a="attrName"in t;if(!r&&!a)throw new _c("Invalid definition");if(r&&t.blotName==="abstract")throw new _c("Cannot register abstract class");const l=r?t.blotName:a?t.attrName:void 0;return this.types[l]=t,a?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):r&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(c=>c.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(c=>{(this.tags[c]==null||t.className==null)&&(this.tags[c]=t)}))),t})}};uN.blots=new WeakMap;let Lc=uN;function vw(n,e){return(n.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}class a9 extends Li{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){vw(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const t=(vw(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}}const ai=a9;function ey(n){const e=n.split("-"),t=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+t}class o9 extends Li{static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[ey(this.keyName)]=t,!0):!1}remove(e){e.style[ey(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const t=e.style[ey(this.keyName)];return this.canAdd(e,t)?t:""}}const Uo=o9;class l9{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Lc.find(this.domNode);if(e==null)return;const t=Li.keys(this.domNode),r=ai.keys(this.domNode),a=Uo.keys(this.domNode);t.concat(r).concat(a).forEach(l=>{const c=e.scroll.query(l,Oe.ATTRIBUTE);c instanceof Li&&(this.attributes[c.attrName]=c)})}copy(e){Object.keys(this.attributes).forEach(t=>{const r=this.attributes[t].value(this.domNode);e.format(t,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}}const jm=l9,hN=class{constructor(e,t){this.scroll=e,this.domNode=t,Lc.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new _c("Blot definition missing tagName");let t,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?t=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?t=document.createElement(r):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Lc.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,r,a){const l=this.isolate(e,t);if(this.scroll.query(r,Oe.BLOT)!=null&&a)l.wrap(r,a);else if(this.scroll.query(r,Oe.ATTRIBUTE)!=null){const c=this.scroll.create(this.statics.scope);l.wrap(c),c.format(r,a)}}insertAt(e,t,r){const a=r==null?this.scroll.create("text",t):this.scroll.create(t,r),l=this.split(e);this.parent.insertBefore(a,l||void 0)}isolate(e,t){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(t),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new _c(`Cannot wrap ${e}`);return r.appendChild(this),r}};hN.blotName="abstract";let dN=hN;const fN=class extends dN{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};fN.scope=Oe.INLINE_BLOT;let c9=fN;const cr=c9;class u9{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const t=e.slice(1);this.append(...t)}}at(e){const t=this.iterator();let r=t();for(;r&&e>0;)e-=1,r=t();return r}contains(e){const t=this.iterator();let r=t();for(;r;){if(r===e)return!0;r=t()}return!1}indexOf(e){const t=this.iterator();let r=t(),a=0;for(;r;){if(r===e)return a;a+=1,r=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,r=this.head;for(;r!=null;){if(r===e)return t;t+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){const r=this.iterator();let a=r();for(;a;){const l=a.length();if(e<l||t&&e===l&&(a.next==null||a.next.length()!==0))return[a,e];e-=l,a=r()}return[null,0]}forEach(e){const t=this.iterator();let r=t();for(;r;)e(r),r=t()}forEachAt(e,t,r){if(t<=0)return;const[a,l]=this.find(e);let c=e-l;const d=this.iterator(a);let m=d();for(;m&&c<e+t;){const p=m.length();e>c?r(m,e-c,Math.min(t,c+p-e)):r(m,0,Math.min(p,e+t-c)),c+=p,m=d()}}map(e){return this.reduce((t,r)=>(t.push(e(r)),t),[])}reduce(e,t){const r=this.iterator();let a=r();for(;a;)t=e(t,a),a=r();return t}}function bw(n,e){const t=e.find(n);if(t)return t;try{return e.create(n)}catch{const r=e.create(Oe.INLINE);return Array.from(n.childNodes).forEach(a=>{r.domNode.appendChild(a)}),n.parentNode&&n.parentNode.replaceChild(r.domNode,n),r.attach(),r}}const mN=class lo extends dN{constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,lo.uiClass&&this.uiNode.classList.add(lo.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new u9,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const t=bw(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof _c)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(r,a,l)=>{r.deleteAt(a,l)})}descendant(e,t=0){const[r,a]=this.children.find(t);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,a]:r instanceof lo?r.descendant(e,a):[null,-1]}descendants(e,t=0,r=Number.MAX_VALUE){let a=[],l=r;return this.children.forEachAt(t,r,(c,d,m)=>{(e.blotName==null&&e(c)||e.blotName!=null&&c instanceof e)&&a.push(c),c instanceof lo&&(a=a.concat(c.descendants(e,d,l))),l-=m}),a}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(r=>t instanceof r)||(t.statics.scope===Oe.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof lo?t.unwrap():t.remove())})}formatAt(e,t,r,a){this.children.forEachAt(e,t,(l,c,d)=>{l.formatAt(c,d,r,a)})}insertAt(e,t,r){const[a,l]=this.children.find(e);if(a)a.insertAt(l,t,r);else{const c=r==null?this.scroll.create("text",t):this.scroll.create(t,r);this.appendChild(c)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(r=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(r=>{e.insertBefore(r,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){const[r,a]=this.children.find(e,t),l=[[this,e]];return r instanceof lo?l.concat(r.path(a,t)):(r!=null&&l.push([r,a]),l)}removeChild(e){this.children.remove(e)}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return r instanceof lo&&this.moveChildren(r),super.replaceWith(r)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(a,l,c)=>{const d=a.split(l,t);d!=null&&r.appendChild(d)}),r}splitAfter(e){const t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){const r=[],a=[];e.forEach(l=>{l.target===this.domNode&&l.type==="childList"&&(r.push(...l.addedNodes),a.push(...l.removedNodes))}),a.forEach(l=>{if(l.parentNode!=null&&l.tagName!=="IFRAME"&&document.body.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const c=this.scroll.find(l);c!=null&&(c.domNode.parentNode==null||c.domNode.parentNode===this.domNode)&&c.detach()}),r.filter(l=>l.parentNode===this.domNode&&l!==this.uiNode).sort((l,c)=>l===c?0:l.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(l=>{let c=null;l.nextSibling!=null&&(c=this.scroll.find(l.nextSibling));const d=bw(l,this.scroll);(d.next!==c||d.next==null)&&(d.parent!=null&&d.parent.removeChild(this),this.insertBefore(d,c||void 0))}),this.enforceAllowedChildren()}};mN.uiClass="";let h9=mN;const ni=h9;function d9(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}const uc=class hc extends ni{static create(e){return super.create(e)}static formats(e,t){const r=t.query(hc.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new jm(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(r=>{r instanceof hc||(r=r.wrap(hc.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,Oe.INLINE);if(r==null)return;r instanceof Li?this.attributes.attribute(r,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,a){this.formats()[r]!=null||this.scroll.query(r,Oe.ATTRIBUTE)?this.isolate(e,t).format(r,a):super.formatAt(e,t,r,a)}optimize(e){super.optimize(e);const t=this.formats();if(Object.keys(t).length===0)return this.unwrap();const r=this.next;r instanceof hc&&r.prev===this&&d9(t,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,t){const r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,t){const r=super.wrap(e,t);return r instanceof hc&&this.attributes.move(r),r}};uc.allowedChildren=[uc,cr],uc.blotName="inline",uc.scope=Oe.INLINE_BLOT,uc.tagName="SPAN";let f9=uc;const yv=f9,dc=class Qy extends ni{static create(e){return super.create(e)}static formats(e,t){const r=t.query(Qy.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new jm(this.domNode)}format(e,t){const r=this.scroll.query(e,Oe.BLOCK);r!=null&&(r instanceof Li?this.attributes.attribute(r,t):e===this.statics.blotName&&!t?this.replaceWith(Qy.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,a){this.scroll.query(r,Oe.BLOCK)!=null?this.format(r,a):super.formatAt(e,t,r,a)}insertAt(e,t,r){if(r==null||this.scroll.query(t,Oe.INLINE)!=null)super.insertAt(e,t,r);else{const a=this.split(e);if(a!=null){const l=this.scroll.create(t,r);a.parent.insertBefore(l,a)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){const r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};dc.blotName="block",dc.scope=Oe.BLOCK_BLOT,dc.tagName="P",dc.allowedChildren=[yv,dc,cr];let m9=dc;const fh=m9,Xy=class extends ni{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,r,a){super.formatAt(e,t,r,a),this.enforceAllowedChildren()}insertAt(e,t,r){super.insertAt(e,t,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Xy.blotName="container",Xy.scope=Oe.BLOCK_BLOT;let g9=Xy;const Om=g9;class p9 extends cr{static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,r,a){e===0&&t===this.length()?this.format(r,a):super.formatAt(e,t,r,a)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const us=p9,y9={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},v9=100,fc=class extends ni{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,y9),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const r=this.registry.find(e,t);return r?r.scroll===this?r:t?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,t=Oe.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,t)}formatAt(e,t,r,a){this.update(),super.formatAt(e,t,r,a)}insertAt(e,t,r){this.update(),super.insertAt(e,t,r)}optimize(e=[],t={}){super.optimize(t);const r=t.mutationsMap||new WeakMap;let a=Array.from(this.observer.takeRecords());for(;a.length>0;)e.push(a.pop());const l=(m,p=!0)=>{m==null||m===this||m.domNode.parentNode!=null&&(r.has(m.domNode)||r.set(m.domNode,[]),p&&l(m.parent))},c=m=>{r.has(m.domNode)&&(m instanceof ni&&m.children.forEach(c),r.delete(m.domNode),m.optimize(t))};let d=e;for(let m=0;d.length>0;m+=1){if(m>=v9)throw new Error("[Parchment] Maximum optimize iterations reached");for(d.forEach(p=>{const v=this.find(p.target,!0);v!=null&&(v.domNode===p.target&&(p.type==="childList"?(l(this.find(p.previousSibling,!1)),Array.from(p.addedNodes).forEach(x=>{const E=this.find(x,!1);l(E,!1),E instanceof ni&&E.children.forEach(A=>{l(A,!1)})})):p.type==="attributes"&&l(v.prev)),l(v))}),this.children.forEach(c),d=Array.from(this.observer.takeRecords()),a=d.slice();a.length>0;)e.push(a.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(a=>{const l=this.find(a.target,!0);return l==null?null:r.has(l.domNode)?(r.get(l.domNode).push(a),null):(r.set(l.domNode,[a]),l)}).forEach(a=>{a!=null&&a!==this&&r.has(a.domNode)&&a.update(r.get(a.domNode)||[],t)}),t.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),t),this.optimize(e,t)}};fc.blotName="scroll",fc.defaultChild=fh,fc.allowedChildren=[fh,Om],fc.scope=Oe.BLOCK_BLOT,fc.tagName="DIV";let b9=fc;const vv=b9,Wy=class gN extends cr{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,r){r==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof gN&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,t){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Wy.blotName="text",Wy.scope=Oe.INLINE_BLOT;let _9=Wy;const Wf=_9,x9=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Li,AttributorStore:jm,BlockBlot:fh,ClassAttributor:ai,ContainerBlot:Om,EmbedBlot:us,InlineBlot:yv,LeafBlot:cr,ParentBlot:ni,Registry:Lc,Scope:Oe,ScrollBlot:vv,StyleAttributor:Uo,TextBlot:Wf},Symbol.toStringTag,{value:"Module"}));var rf={exports:{}},ty,_w;function E9(){if(_w)return ty;_w=1;var n=-1,e=1,t=0;function r(N,M,C,pe,ge){if(N===M)return N?[[t,N]]:[];if(C!=null){var H=U(N,M,C);if(H)return H}var ee=d(N,M),ue=N.substring(0,ee);N=N.substring(ee),M=M.substring(ee),ee=p(N,M);var _e=N.substring(N.length-ee);N=N.substring(0,N.length-ee),M=M.substring(0,M.length-ee);var be=a(N,M);return ue&&be.unshift([t,ue]),_e&&be.push([t,_e]),F(be,ge),pe&&x(be),be}function a(N,M){var C;if(!N)return[[e,M]];if(!M)return[[n,N]];var pe=N.length>M.length?N:M,ge=N.length>M.length?M:N,H=pe.indexOf(ge);if(H!==-1)return C=[[e,pe.substring(0,H)],[t,ge],[e,pe.substring(H+ge.length)]],N.length>M.length&&(C[0][0]=C[2][0]=n),C;if(ge.length===1)return[[n,N],[e,M]];var ee=v(N,M);if(ee){var ue=ee[0],_e=ee[1],be=ee[2],q=ee[3],W=ee[4],de=r(ue,be),me=r(_e,q);return de.concat([[t,W]],me)}return l(N,M)}function l(N,M){for(var C=N.length,pe=M.length,ge=Math.ceil((C+pe)/2),H=ge,ee=2*ge,ue=new Array(ee),_e=new Array(ee),be=0;be<ee;be++)ue[be]=-1,_e[be]=-1;ue[H+1]=0,_e[H+1]=0;for(var q=C-pe,W=q%2!==0,de=0,me=0,ye=0,Ae=0,De=0;De<ge;De++){for(var je=-De+de;je<=De-me;je+=2){var ke=H+je,Xe;je===-De||je!==De&&ue[ke-1]<ue[ke+1]?Xe=ue[ke+1]:Xe=ue[ke-1]+1;for(var et=Xe-je;Xe<C&&et<pe&&N.charAt(Xe)===M.charAt(et);)Xe++,et++;if(ue[ke]=Xe,Xe>C)me+=2;else if(et>pe)de+=2;else if(W){var st=H+q-je;if(st>=0&&st<ee&&_e[st]!==-1){var ut=C-_e[st];if(Xe>=ut)return c(N,M,Xe,et)}}}for(var yt=-De+ye;yt<=De-Ae;yt+=2){var st=H+yt,ut;yt===-De||yt!==De&&_e[st-1]<_e[st+1]?ut=_e[st+1]:ut=_e[st-1]+1;for(var tn=ut-yt;ut<C&&tn<pe&&N.charAt(C-ut-1)===M.charAt(pe-tn-1);)ut++,tn++;if(_e[st]=ut,ut>C)Ae+=2;else if(tn>pe)ye+=2;else if(!W){var ke=H+q-yt;if(ke>=0&&ke<ee&&ue[ke]!==-1){var Xe=ue[ke],et=H+Xe-ke;if(ut=C-ut,Xe>=ut)return c(N,M,Xe,et)}}}}return[[n,N],[e,M]]}function c(N,M,C,pe){var ge=N.substring(0,C),H=M.substring(0,pe),ee=N.substring(C),ue=M.substring(pe),_e=r(ge,H),be=r(ee,ue);return _e.concat(be)}function d(N,M){if(!N||!M||N.charAt(0)!==M.charAt(0))return 0;for(var C=0,pe=Math.min(N.length,M.length),ge=pe,H=0;C<ge;)N.substring(H,ge)==M.substring(H,ge)?(C=ge,H=C):pe=ge,ge=Math.floor((pe-C)/2+C);return Y(N.charCodeAt(ge-1))&&ge--,ge}function m(N,M){var C=N.length,pe=M.length;if(C==0||pe==0)return 0;C>pe?N=N.substring(C-pe):C<pe&&(M=M.substring(0,C));var ge=Math.min(C,pe);if(N==M)return ge;for(var H=0,ee=1;;){var ue=N.substring(ge-ee),_e=M.indexOf(ue);if(_e==-1)return H;ee+=_e,(_e==0||N.substring(ge-ee)==M.substring(0,ee))&&(H=ee,ee++)}}function p(N,M){if(!N||!M||N.slice(-1)!==M.slice(-1))return 0;for(var C=0,pe=Math.min(N.length,M.length),ge=pe,H=0;C<ge;)N.substring(N.length-ge,N.length-H)==M.substring(M.length-ge,M.length-H)?(C=ge,H=C):pe=ge,ge=Math.floor((pe-C)/2+C);return Q(N.charCodeAt(N.length-ge))&&ge--,ge}function v(N,M){var C=N.length>M.length?N:M,pe=N.length>M.length?M:N;if(C.length<4||pe.length*2<C.length)return null;function ge(me,ye,Ae){for(var De=me.substring(Ae,Ae+Math.floor(me.length/4)),je=-1,ke="",Xe,et,st,ut;(je=ye.indexOf(De,je+1))!==-1;){var yt=d(me.substring(Ae),ye.substring(je)),tn=p(me.substring(0,Ae),ye.substring(0,je));ke.length<tn+yt&&(ke=ye.substring(je-tn,je)+ye.substring(je,je+yt),Xe=me.substring(0,Ae-tn),et=me.substring(Ae+yt),st=ye.substring(0,je-tn),ut=ye.substring(je+yt))}return ke.length*2>=me.length?[Xe,et,st,ut,ke]:null}var H=ge(C,pe,Math.ceil(C.length/4)),ee=ge(C,pe,Math.ceil(C.length/2)),ue;if(!H&&!ee)return null;ee?H?ue=H[4].length>ee[4].length?H:ee:ue=ee:ue=H;var _e,be,q,W;N.length>M.length?(_e=ue[0],be=ue[1],q=ue[2],W=ue[3]):(q=ue[0],W=ue[1],_e=ue[2],be=ue[3]);var de=ue[4];return[_e,be,q,W,de]}function x(N){for(var M=!1,C=[],pe=0,ge=null,H=0,ee=0,ue=0,_e=0,be=0;H<N.length;)N[H][0]==t?(C[pe++]=H,ee=_e,ue=be,_e=0,be=0,ge=N[H][1]):(N[H][0]==e?_e+=N[H][1].length:be+=N[H][1].length,ge&&ge.length<=Math.max(ee,ue)&&ge.length<=Math.max(_e,be)&&(N.splice(C[pe-1],0,[n,ge]),N[C[pe-1]+1][0]=e,pe--,pe--,H=pe>0?C[pe-1]:-1,ee=0,ue=0,_e=0,be=0,ge=null,M=!0)),H++;for(M&&F(N),V(N),H=1;H<N.length;){if(N[H-1][0]==n&&N[H][0]==e){var q=N[H-1][1],W=N[H][1],de=m(q,W),me=m(W,q);de>=me?(de>=q.length/2||de>=W.length/2)&&(N.splice(H,0,[t,W.substring(0,de)]),N[H-1][1]=q.substring(0,q.length-de),N[H+1][1]=W.substring(de),H++):(me>=q.length/2||me>=W.length/2)&&(N.splice(H,0,[t,q.substring(0,me)]),N[H-1][0]=e,N[H-1][1]=W.substring(0,W.length-me),N[H+1][0]=n,N[H+1][1]=q.substring(me),H++),H++}H++}}var E=/[^a-zA-Z0-9]/,A=/\s/,S=/[\r\n]/,O=/\n\r?\n$/,R=/^\r?\n\r?\n/;function V(N){function M(me,ye){if(!me||!ye)return 6;var Ae=me.charAt(me.length-1),De=ye.charAt(0),je=Ae.match(E),ke=De.match(E),Xe=je&&Ae.match(A),et=ke&&De.match(A),st=Xe&&Ae.match(S),ut=et&&De.match(S),yt=st&&me.match(O),tn=ut&&ye.match(R);return yt||tn?5:st||ut?4:je&&!Xe&&et?3:Xe||et?2:je||ke?1:0}for(var C=1;C<N.length-1;){if(N[C-1][0]==t&&N[C+1][0]==t){var pe=N[C-1][1],ge=N[C][1],H=N[C+1][1],ee=p(pe,ge);if(ee){var ue=ge.substring(ge.length-ee);pe=pe.substring(0,pe.length-ee),ge=ue+ge.substring(0,ge.length-ee),H=ue+H}for(var _e=pe,be=ge,q=H,W=M(pe,ge)+M(ge,H);ge.charAt(0)===H.charAt(0);){pe+=ge.charAt(0),ge=ge.substring(1)+H.charAt(0),H=H.substring(1);var de=M(pe,ge)+M(ge,H);de>=W&&(W=de,_e=pe,be=ge,q=H)}N[C-1][1]!=_e&&(_e?N[C-1][1]=_e:(N.splice(C-1,1),C--),N[C][1]=be,q?N[C+1][1]=q:(N.splice(C+1,1),C--))}C++}}function F(N,M){N.push([t,""]);for(var C=0,pe=0,ge=0,H="",ee="",ue;C<N.length;){if(C<N.length-1&&!N[C][1]){N.splice(C,1);continue}switch(N[C][0]){case e:ge++,ee+=N[C][1],C++;break;case n:pe++,H+=N[C][1],C++;break;case t:var _e=C-ge-pe-1;if(M){if(_e>=0&&ve(N[_e][1])){var be=N[_e][1].slice(-1);if(N[_e][1]=N[_e][1].slice(0,-1),H=be+H,ee=be+ee,!N[_e][1]){N.splice(_e,1),C--;var q=_e-1;N[q]&&N[q][0]===e&&(ge++,ee=N[q][1]+ee,q--),N[q]&&N[q][0]===n&&(pe++,H=N[q][1]+H,q--),_e=q}}if(ie(N[C][1])){var be=N[C][1].charAt(0);N[C][1]=N[C][1].slice(1),H+=be,ee+=be}}if(C<N.length-1&&!N[C][1]){N.splice(C,1);break}if(H.length>0||ee.length>0){H.length>0&&ee.length>0&&(ue=d(ee,H),ue!==0&&(_e>=0?N[_e][1]+=ee.substring(0,ue):(N.splice(0,0,[t,ee.substring(0,ue)]),C++),ee=ee.substring(ue),H=H.substring(ue)),ue=p(ee,H),ue!==0&&(N[C][1]=ee.substring(ee.length-ue)+N[C][1],ee=ee.substring(0,ee.length-ue),H=H.substring(0,H.length-ue)));var W=ge+pe;H.length===0&&ee.length===0?(N.splice(C-W,W),C=C-W):H.length===0?(N.splice(C-W,W,[e,ee]),C=C-W+1):ee.length===0?(N.splice(C-W,W,[n,H]),C=C-W+1):(N.splice(C-W,W,[n,H],[e,ee]),C=C-W+2)}C!==0&&N[C-1][0]===t?(N[C-1][1]+=N[C][1],N.splice(C,1)):C++,ge=0,pe=0,H="",ee="";break}}N[N.length-1][1]===""&&N.pop();var de=!1;for(C=1;C<N.length-1;)N[C-1][0]===t&&N[C+1][0]===t&&(N[C][1].substring(N[C][1].length-N[C-1][1].length)===N[C-1][1]?(N[C][1]=N[C-1][1]+N[C][1].substring(0,N[C][1].length-N[C-1][1].length),N[C+1][1]=N[C-1][1]+N[C+1][1],N.splice(C-1,1),de=!0):N[C][1].substring(0,N[C+1][1].length)==N[C+1][1]&&(N[C-1][1]+=N[C+1][1],N[C][1]=N[C][1].substring(N[C+1][1].length)+N[C+1][1],N.splice(C+1,1),de=!0)),C++;de&&F(N,M)}function Y(N){return N>=55296&&N<=56319}function Q(N){return N>=56320&&N<=57343}function ie(N){return Q(N.charCodeAt(0))}function ve(N){return Y(N.charCodeAt(N.length-1))}function L(N){for(var M=[],C=0;C<N.length;C++)N[C][1].length>0&&M.push(N[C]);return M}function k(N,M,C,pe){return ve(N)||ie(pe)?null:L([[t,N],[n,M],[e,C],[t,pe]])}function U(N,M,C){var pe=typeof C=="number"?{index:C,length:0}:C.oldRange,ge=typeof C=="number"?null:C.newRange,H=N.length,ee=M.length;if(pe.length===0&&(ge===null||ge.length===0)){var ue=pe.index,_e=N.slice(0,ue),be=N.slice(ue),q=ge?ge.index:null;e:{var W=ue+ee-H;if(q!==null&&q!==W||W<0||W>ee)break e;var de=M.slice(0,W),me=M.slice(W);if(me!==be)break e;var ye=Math.min(ue,W),Ae=_e.slice(0,ye),De=de.slice(0,ye);if(Ae!==De)break e;var je=_e.slice(ye),ke=de.slice(ye);return k(Ae,je,ke,be)}e:{if(q!==null&&q!==ue)break e;var Xe=ue,de=M.slice(0,Xe),me=M.slice(Xe);if(de!==_e)break e;var et=Math.min(H-Xe,ee-Xe),st=be.slice(be.length-et),ut=me.slice(me.length-et);if(st!==ut)break e;var je=be.slice(0,be.length-et),ke=me.slice(0,me.length-et);return k(_e,je,ke,st)}}if(pe.length>0&&ge&&ge.length===0)e:{var Ae=N.slice(0,pe.index),st=N.slice(pe.index+pe.length),ye=Ae.length,et=st.length;if(ee<ye+et)break e;var De=M.slice(0,ye),ut=M.slice(ee-et);if(Ae!==De||st!==ut)break e;var je=N.slice(ye,H-et),ke=M.slice(ye,ee-et);return k(Ae,je,ke,st)}return null}function $(N,M,C,pe){return r(N,M,C,pe,!0)}return $.INSERT=e,$.DELETE=n,$.EQUAL=t,ty=$,ty}var Hu={exports:{}};Hu.exports;var xw;function pN(){return xw||(xw=1,(function(n,e){var t=200,r="__lodash_hash_undefined__",a=9007199254740991,l="[object Arguments]",c="[object Array]",d="[object Boolean]",m="[object Date]",p="[object Error]",v="[object Function]",x="[object GeneratorFunction]",E="[object Map]",A="[object Number]",S="[object Object]",O="[object Promise]",R="[object RegExp]",V="[object Set]",F="[object String]",Y="[object Symbol]",Q="[object WeakMap]",ie="[object ArrayBuffer]",ve="[object DataView]",L="[object Float32Array]",k="[object Float64Array]",U="[object Int8Array]",$="[object Int16Array]",N="[object Int32Array]",M="[object Uint8Array]",C="[object Uint8ClampedArray]",pe="[object Uint16Array]",ge="[object Uint32Array]",H=/[\\^$.*+?()[\]{}|]/g,ee=/\w*$/,ue=/^\[object .+?Constructor\]$/,_e=/^(?:0|[1-9]\d*)$/,be={};be[l]=be[c]=be[ie]=be[ve]=be[d]=be[m]=be[L]=be[k]=be[U]=be[$]=be[N]=be[E]=be[A]=be[S]=be[R]=be[V]=be[F]=be[Y]=be[M]=be[C]=be[pe]=be[ge]=!0,be[p]=be[v]=be[Q]=!1;var q=typeof go=="object"&&go&&go.Object===Object&&go,W=typeof self=="object"&&self&&self.Object===Object&&self,de=q||W||Function("return this")(),me=e&&!e.nodeType&&e,ye=me&&!0&&n&&!n.nodeType&&n,Ae=ye&&ye.exports===me;function De(_,j){return _.set(j[0],j[1]),_}function je(_,j){return _.add(j),_}function ke(_,j){for(var B=-1,ne=_?_.length:0;++B<ne&&j(_[B],B,_)!==!1;);return _}function Xe(_,j){for(var B=-1,ne=j.length,Ue=_.length;++B<ne;)_[Ue+B]=j[B];return _}function et(_,j,B,ne){for(var Ue=-1,Se=_?_.length:0;++Ue<Se;)B=j(B,_[Ue],Ue,_);return B}function st(_,j){for(var B=-1,ne=Array(_);++B<_;)ne[B]=j(B);return ne}function ut(_,j){return _?.[j]}function yt(_){var j=!1;if(_!=null&&typeof _.toString!="function")try{j=!!(_+"")}catch{}return j}function tn(_){var j=-1,B=Array(_.size);return _.forEach(function(ne,Ue){B[++j]=[Ue,ne]}),B}function zr(_,j){return function(B){return _(j(B))}}function li(_){var j=-1,B=Array(_.size);return _.forEach(function(ne){B[++j]=ne}),B}var Ui=Array.prototype,Ht=Function.prototype,jt=Object.prototype,Ar=de["__core-js_shared__"],Da=(function(){var _=/[^.]+$/.exec(Ar&&Ar.keys&&Ar.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""})(),Vi=Ht.toString,Ot=jt.hasOwnProperty,Sr=jt.toString,qi=RegExp("^"+Vi.call(Ot).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hr=Ae?de.Buffer:void 0,fr=de.Symbol,Bi=de.Uint8Array,kn=zr(Object.getPrototypeOf,Object),zi=Object.create,Hi=jt.propertyIsEnumerable,mr=Ui.splice,Zt=Object.getOwnPropertySymbols,Sn=Hr?Hr.isBuffer:void 0,Dt=zr(Object.keys,Object),Us=pn(de,"DataView"),Nr=pn(de,"Map"),Zn=pn(de,"Promise"),Mn=pn(de,"Set"),Fr=pn(de,"WeakMap"),At=pn(Object,"create"),Jn=cn(Us),In=cn(Nr),Pn=cn(Zn),Fi=cn(Mn),ci=cn(Fr),Nn=fr?fr.prototype:void 0,hs=Nn?Nn.valueOf:void 0;function $r(_){var j=-1,B=_?_.length:0;for(this.clear();++j<B;){var ne=_[j];this.set(ne[0],ne[1])}}function Vs(){this.__data__=At?At(null):{}}function $i(_){return this.has(_)&&delete this.__data__[_]}function Gi(_){var j=this.__data__;if(At){var B=j[_];return B===r?void 0:B}return Ot.call(j,_)?j[_]:void 0}function ds(_){var j=this.__data__;return At?j[_]!==void 0:Ot.call(j,_)}function gr(_,j){var B=this.__data__;return B[_]=At&&j===void 0?r:j,this}$r.prototype.clear=Vs,$r.prototype.delete=$i,$r.prototype.get=Gi,$r.prototype.has=ds,$r.prototype.set=gr;function nn(_){var j=-1,B=_?_.length:0;for(this.clear();++j<B;){var ne=_[j];this.set(ne[0],ne[1])}}function pr(){this.__data__=[]}function yr(_){var j=this.__data__,B=Vn(j,_);if(B<0)return!1;var ne=j.length-1;return B==ne?j.pop():mr.call(j,B,1),!0}function Ft(_){var j=this.__data__,B=Vn(j,_);return B<0?void 0:j[B][1]}function rn(_){return Vn(this.__data__,_)>-1}function Cr(_,j){var B=this.__data__,ne=Vn(B,_);return ne<0?B.push([_,j]):B[ne][1]=j,this}nn.prototype.clear=pr,nn.prototype.delete=yr,nn.prototype.get=Ft,nn.prototype.has=rn,nn.prototype.set=Cr;function Jt(_){var j=-1,B=_?_.length:0;for(this.clear();++j<B;){var ne=_[j];this.set(ne[0],ne[1])}}function Vo(){this.__data__={hash:new $r,map:new(Nr||nn),string:new $r}}function La(_){return ps(this,_).delete(_)}function ka(_){return ps(this,_).get(_)}function Rr(_){return ps(this,_).has(_)}function ui(_,j){return ps(this,_).set(_,j),this}Jt.prototype.clear=Vo,Jt.prototype.delete=La,Jt.prototype.get=ka,Jt.prototype.has=Rr,Jt.prototype.set=ui;function Mt(_){this.__data__=new nn(_)}function er(){this.__data__=new nn}function Un(_){return this.__data__.delete(_)}function Ir(_){return this.__data__.get(_)}function $t(_){return this.__data__.has(_)}function Ki(_,j){var B=this.__data__;if(B instanceof nn){var ne=B.__data__;if(!Nr||ne.length<t-1)return ne.push([_,j]),this;B=this.__data__=new Jt(ne)}return B.set(_,j),this}Mt.prototype.clear=er,Mt.prototype.delete=Un,Mt.prototype.get=Ir,Mt.prototype.has=$t,Mt.prototype.set=Ki;function fs(_,j){var B=Yr(_)||zn(_)?st(_.length,String):[],ne=B.length,Ue=!!ne;for(var Se in _)Ot.call(_,Se)&&!(Ue&&(Se=="length"||Pa(Se,ne)))&&B.push(Se);return B}function vr(_,j,B){var ne=_[j];(!(Ot.call(_,j)&&Kr(ne,B))||B===void 0&&!(j in _))&&(_[j]=B)}function Vn(_,j){for(var B=_.length;B--;)if(Kr(_[B][0],j))return B;return-1}function tr(_,j){return _&&fi(j,zs(j),_)}function qs(_,j,B,ne,Ue,Se,Ye){var Ze;if(ne&&(Ze=Se?ne(_,Ue,Se,Ye):ne(_)),Ze!==void 0)return Ze;if(!We(_))return _;var Et=Yr(_);if(Et){if(Ze=Xi(_),!j)return di(_,Ze)}else{var tt=Dr(_),Rt=tt==v||tt==x;if(sr(_))return Pt(_,j);if(tt==S||tt==l||Rt&&!Se){if(yt(_))return Se?_:{};if(Ze=nr(Rt?{}:_),!j)return Qi(_,tr(Ze,_))}else{if(!be[tt])return Se?_:{};Ze=mi(_,tt,qs,j)}}Ye||(Ye=new Mt);var un=Ye.get(_);if(un)return un;if(Ye.set(_,Ze),!Et)var Ut=B?gs(_):zs(_);return ke(Ut||_,function(Yt,sn){Ut&&(sn=Yt,Yt=_[sn]),vr(Ze,sn,qs(Yt,j,B,ne,sn,_,Ye))}),Ze}function Yi(_){return We(_)?zi(_):{}}function Ma(_,j,B){var ne=j(_);return Yr(_)?ne:Xe(ne,B(_))}function hi(_){return Sr.call(_)}function qn(_){if(!We(_)||gi(_))return!1;var j=On(_)||yt(_)?qi:ue;return j.test(cn(_))}function Gt(_){if(!rr(_))return Dt(_);var j=[];for(var B in Object(_))Ot.call(_,B)&&B!="constructor"&&j.push(B);return j}function Pt(_,j){if(j)return _.slice();var B=new _.constructor(_.length);return _.copy(B),B}function jr(_){var j=new _.constructor(_.byteLength);return new Bi(j).set(new Bi(_)),j}function Gr(_,j){var B=j?jr(_.buffer):_.buffer;return new _.constructor(B,_.byteOffset,_.byteLength)}function dt(_,j,B){var ne=j?B(tn(_),!0):tn(_);return et(ne,De,new _.constructor)}function ms(_){var j=new _.constructor(_.source,ee.exec(_));return j.lastIndex=_.lastIndex,j}function Or(_,j,B){var ne=j?B(li(_),!0):li(_);return et(ne,je,new _.constructor)}function Bs(_){return hs?Object(hs.call(_)):{}}function jn(_,j){var B=j?jr(_.buffer):_.buffer;return new _.constructor(B,_.byteOffset,_.length)}function di(_,j){var B=-1,ne=_.length;for(j||(j=Array(ne));++B<ne;)j[B]=_[B];return j}function fi(_,j,B,ne){B||(B={});for(var Ue=-1,Se=j.length;++Ue<Se;){var Ye=j[Ue],Ze=void 0;vr(B,Ye,Ze===void 0?_[Ye]:Ze)}return B}function Qi(_,j){return fi(_,Kt(_),j)}function gs(_){return Ma(_,zs,Kt)}function ps(_,j){var B=_.__data__;return ys(j)?B[typeof j=="string"?"string":"hash"]:B.map}function pn(_,j){var B=ut(_,j);return qn(B)?B:void 0}var Kt=Zt?zr(Zt,Object):Hs,Dr=hi;(Us&&Dr(new Us(new ArrayBuffer(1)))!=ve||Nr&&Dr(new Nr)!=E||Zn&&Dr(Zn.resolve())!=O||Mn&&Dr(new Mn)!=V||Fr&&Dr(new Fr)!=Q)&&(Dr=function(_){var j=Sr.call(_),B=j==S?_.constructor:void 0,ne=B?cn(B):void 0;if(ne)switch(ne){case Jn:return ve;case In:return E;case Pn:return O;case Fi:return V;case ci:return Q}return j});function Xi(_){var j=_.length,B=_.constructor(j);return j&&typeof _[0]=="string"&&Ot.call(_,"index")&&(B.index=_.index,B.input=_.input),B}function nr(_){return typeof _.constructor=="function"&&!rr(_)?Yi(kn(_)):{}}function mi(_,j,B,ne){var Ue=_.constructor;switch(j){case ie:return jr(_);case d:case m:return new Ue(+_);case ve:return Gr(_,ne);case L:case k:case U:case $:case N:case M:case C:case pe:case ge:return jn(_,ne);case E:return dt(_,ne,B);case A:case F:return new Ue(_);case R:return ms(_);case V:return Or(_,ne,B);case Y:return Bs(_)}}function Pa(_,j){return j=j??a,!!j&&(typeof _=="number"||_e.test(_))&&_>-1&&_%1==0&&_<j}function ys(_){var j=typeof _;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?_!=="__proto__":_===null}function gi(_){return!!Da&&Da in _}function rr(_){var j=_&&_.constructor,B=typeof j=="function"&&j.prototype||jt;return _===B}function cn(_){if(_!=null){try{return Vi.call(_)}catch{}try{return _+""}catch{}}return""}function Bn(_){return qs(_,!0,!0)}function Kr(_,j){return _===j||_!==_&&j!==j}function zn(_){return vs(_)&&Ot.call(_,"callee")&&(!Hi.call(_,"callee")||Sr.call(_)==l)}var Yr=Array.isArray;function Qr(_){return _!=null&&bs(_.length)&&!On(_)}function vs(_){return br(_)&&Qr(_)}var sr=Sn||Wi;function On(_){var j=We(_)?Sr.call(_):"";return j==v||j==x}function bs(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=a}function We(_){var j=typeof _;return!!_&&(j=="object"||j=="function")}function br(_){return!!_&&typeof _=="object"}function zs(_){return Qr(_)?fs(_):Gt(_)}function Hs(){return[]}function Wi(){return!1}n.exports=Bn})(Hu,Hu.exports)),Hu.exports}var Fu={exports:{}};Fu.exports;var Ew;function yN(){return Ew||(Ew=1,(function(n,e){var t=200,r="__lodash_hash_undefined__",a=1,l=2,c=9007199254740991,d="[object Arguments]",m="[object Array]",p="[object AsyncFunction]",v="[object Boolean]",x="[object Date]",E="[object Error]",A="[object Function]",S="[object GeneratorFunction]",O="[object Map]",R="[object Number]",V="[object Null]",F="[object Object]",Y="[object Promise]",Q="[object Proxy]",ie="[object RegExp]",ve="[object Set]",L="[object String]",k="[object Symbol]",U="[object Undefined]",$="[object WeakMap]",N="[object ArrayBuffer]",M="[object DataView]",C="[object Float32Array]",pe="[object Float64Array]",ge="[object Int8Array]",H="[object Int16Array]",ee="[object Int32Array]",ue="[object Uint8Array]",_e="[object Uint8ClampedArray]",be="[object Uint16Array]",q="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,de=/^\[object .+?Constructor\]$/,me=/^(?:0|[1-9]\d*)$/,ye={};ye[C]=ye[pe]=ye[ge]=ye[H]=ye[ee]=ye[ue]=ye[_e]=ye[be]=ye[q]=!0,ye[d]=ye[m]=ye[N]=ye[v]=ye[M]=ye[x]=ye[E]=ye[A]=ye[O]=ye[R]=ye[F]=ye[ie]=ye[ve]=ye[L]=ye[$]=!1;var Ae=typeof go=="object"&&go&&go.Object===Object&&go,De=typeof self=="object"&&self&&self.Object===Object&&self,je=Ae||De||Function("return this")(),ke=e&&!e.nodeType&&e,Xe=ke&&!0&&n&&!n.nodeType&&n,et=Xe&&Xe.exports===ke,st=et&&Ae.process,ut=(function(){try{return st&&st.binding&&st.binding("util")}catch{}})(),yt=ut&&ut.isTypedArray;function tn(_,j){for(var B=-1,ne=_==null?0:_.length,Ue=0,Se=[];++B<ne;){var Ye=_[B];j(Ye,B,_)&&(Se[Ue++]=Ye)}return Se}function zr(_,j){for(var B=-1,ne=j.length,Ue=_.length;++B<ne;)_[Ue+B]=j[B];return _}function li(_,j){for(var B=-1,ne=_==null?0:_.length;++B<ne;)if(j(_[B],B,_))return!0;return!1}function Ui(_,j){for(var B=-1,ne=Array(_);++B<_;)ne[B]=j(B);return ne}function Ht(_){return function(j){return _(j)}}function jt(_,j){return _.has(j)}function Ar(_,j){return _?.[j]}function Da(_){var j=-1,B=Array(_.size);return _.forEach(function(ne,Ue){B[++j]=[Ue,ne]}),B}function Vi(_,j){return function(B){return _(j(B))}}function Ot(_){var j=-1,B=Array(_.size);return _.forEach(function(ne){B[++j]=ne}),B}var Sr=Array.prototype,qi=Function.prototype,Hr=Object.prototype,fr=je["__core-js_shared__"],Bi=qi.toString,kn=Hr.hasOwnProperty,zi=(function(){var _=/[^.]+$/.exec(fr&&fr.keys&&fr.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""})(),Hi=Hr.toString,mr=RegExp("^"+Bi.call(kn).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zt=et?je.Buffer:void 0,Sn=je.Symbol,Dt=je.Uint8Array,Us=Hr.propertyIsEnumerable,Nr=Sr.splice,Zn=Sn?Sn.toStringTag:void 0,Mn=Object.getOwnPropertySymbols,Fr=Zt?Zt.isBuffer:void 0,At=Vi(Object.keys,Object),Jn=Kt(je,"DataView"),In=Kt(je,"Map"),Pn=Kt(je,"Promise"),Fi=Kt(je,"Set"),ci=Kt(je,"WeakMap"),Nn=Kt(Object,"create"),hs=cn(Jn),$r=cn(In),Vs=cn(Pn),$i=cn(Fi),Gi=cn(ci),ds=Sn?Sn.prototype:void 0,gr=ds?ds.valueOf:void 0;function nn(_){var j=-1,B=_==null?0:_.length;for(this.clear();++j<B;){var ne=_[j];this.set(ne[0],ne[1])}}function pr(){this.__data__=Nn?Nn(null):{},this.size=0}function yr(_){var j=this.has(_)&&delete this.__data__[_];return this.size-=j?1:0,j}function Ft(_){var j=this.__data__;if(Nn){var B=j[_];return B===r?void 0:B}return kn.call(j,_)?j[_]:void 0}function rn(_){var j=this.__data__;return Nn?j[_]!==void 0:kn.call(j,_)}function Cr(_,j){var B=this.__data__;return this.size+=this.has(_)?0:1,B[_]=Nn&&j===void 0?r:j,this}nn.prototype.clear=pr,nn.prototype.delete=yr,nn.prototype.get=Ft,nn.prototype.has=rn,nn.prototype.set=Cr;function Jt(_){var j=-1,B=_==null?0:_.length;for(this.clear();++j<B;){var ne=_[j];this.set(ne[0],ne[1])}}function Vo(){this.__data__=[],this.size=0}function La(_){var j=this.__data__,B=Pt(j,_);if(B<0)return!1;var ne=j.length-1;return B==ne?j.pop():Nr.call(j,B,1),--this.size,!0}function ka(_){var j=this.__data__,B=Pt(j,_);return B<0?void 0:j[B][1]}function Rr(_){return Pt(this.__data__,_)>-1}function ui(_,j){var B=this.__data__,ne=Pt(B,_);return ne<0?(++this.size,B.push([_,j])):B[ne][1]=j,this}Jt.prototype.clear=Vo,Jt.prototype.delete=La,Jt.prototype.get=ka,Jt.prototype.has=Rr,Jt.prototype.set=ui;function Mt(_){var j=-1,B=_==null?0:_.length;for(this.clear();++j<B;){var ne=_[j];this.set(ne[0],ne[1])}}function er(){this.size=0,this.__data__={hash:new nn,map:new(In||Jt),string:new nn}}function Un(_){var j=pn(this,_).delete(_);return this.size-=j?1:0,j}function Ir(_){return pn(this,_).get(_)}function $t(_){return pn(this,_).has(_)}function Ki(_,j){var B=pn(this,_),ne=B.size;return B.set(_,j),this.size+=B.size==ne?0:1,this}Mt.prototype.clear=er,Mt.prototype.delete=Un,Mt.prototype.get=Ir,Mt.prototype.has=$t,Mt.prototype.set=Ki;function fs(_){var j=-1,B=_==null?0:_.length;for(this.__data__=new Mt;++j<B;)this.add(_[j])}function vr(_){return this.__data__.set(_,r),this}function Vn(_){return this.__data__.has(_)}fs.prototype.add=fs.prototype.push=vr,fs.prototype.has=Vn;function tr(_){var j=this.__data__=new Jt(_);this.size=j.size}function qs(){this.__data__=new Jt,this.size=0}function Yi(_){var j=this.__data__,B=j.delete(_);return this.size=j.size,B}function Ma(_){return this.__data__.get(_)}function hi(_){return this.__data__.has(_)}function qn(_,j){var B=this.__data__;if(B instanceof Jt){var ne=B.__data__;if(!In||ne.length<t-1)return ne.push([_,j]),this.size=++B.size,this;B=this.__data__=new Mt(ne)}return B.set(_,j),this.size=B.size,this}tr.prototype.clear=qs,tr.prototype.delete=Yi,tr.prototype.get=Ma,tr.prototype.has=hi,tr.prototype.set=qn;function Gt(_,j){var B=zn(_),ne=!B&&Kr(_),Ue=!B&&!ne&&Qr(_),Se=!B&&!ne&&!Ue&&br(_),Ye=B||ne||Ue||Se,Ze=Ye?Ui(_.length,String):[],Et=Ze.length;for(var tt in _)kn.call(_,tt)&&!(Ye&&(tt=="length"||Ue&&(tt=="offset"||tt=="parent")||Se&&(tt=="buffer"||tt=="byteLength"||tt=="byteOffset")||mi(tt,Et)))&&Ze.push(tt);return Ze}function Pt(_,j){for(var B=_.length;B--;)if(Bn(_[B][0],j))return B;return-1}function jr(_,j,B){var ne=j(_);return zn(_)?ne:zr(ne,B(_))}function Gr(_){return _==null?_===void 0?U:V:Zn&&Zn in Object(_)?Dr(_):rr(_)}function dt(_){return We(_)&&Gr(_)==d}function ms(_,j,B,ne,Ue){return _===j?!0:_==null||j==null||!We(_)&&!We(j)?_!==_&&j!==j:Or(_,j,B,ne,ms,Ue)}function Or(_,j,B,ne,Ue,Se){var Ye=zn(_),Ze=zn(j),Et=Ye?m:nr(_),tt=Ze?m:nr(j);Et=Et==d?F:Et,tt=tt==d?F:tt;var Rt=Et==F,un=tt==F,Ut=Et==tt;if(Ut&&Qr(_)){if(!Qr(j))return!1;Ye=!0,Rt=!1}if(Ut&&!Rt)return Se||(Se=new tr),Ye||br(_)?fi(_,j,B,ne,Ue,Se):Qi(_,j,Et,B,ne,Ue,Se);if(!(B&a)){var Yt=Rt&&kn.call(_,"__wrapped__"),sn=un&&kn.call(j,"__wrapped__");if(Yt||sn){var Xr=Yt?_.value():_,Hn=sn?j.value():j;return Se||(Se=new tr),Ue(Xr,Hn,B,ne,Se)}}return Ut?(Se||(Se=new tr),gs(_,j,B,ne,Ue,Se)):!1}function Bs(_){if(!bs(_)||ys(_))return!1;var j=sr(_)?mr:de;return j.test(cn(_))}function jn(_){return We(_)&&On(_.length)&&!!ye[Gr(_)]}function di(_){if(!gi(_))return At(_);var j=[];for(var B in Object(_))kn.call(_,B)&&B!="constructor"&&j.push(B);return j}function fi(_,j,B,ne,Ue,Se){var Ye=B&a,Ze=_.length,Et=j.length;if(Ze!=Et&&!(Ye&&Et>Ze))return!1;var tt=Se.get(_);if(tt&&Se.get(j))return tt==j;var Rt=-1,un=!0,Ut=B&l?new fs:void 0;for(Se.set(_,j),Se.set(j,_);++Rt<Ze;){var Yt=_[Rt],sn=j[Rt];if(ne)var Xr=Ye?ne(sn,Yt,Rt,j,_,Se):ne(Yt,sn,Rt,_,j,Se);if(Xr!==void 0){if(Xr)continue;un=!1;break}if(Ut){if(!li(j,function(Hn,Wr){if(!jt(Ut,Wr)&&(Yt===Hn||Ue(Yt,Hn,B,ne,Se)))return Ut.push(Wr)})){un=!1;break}}else if(!(Yt===sn||Ue(Yt,sn,B,ne,Se))){un=!1;break}}return Se.delete(_),Se.delete(j),un}function Qi(_,j,B,ne,Ue,Se,Ye){switch(B){case M:if(_.byteLength!=j.byteLength||_.byteOffset!=j.byteOffset)return!1;_=_.buffer,j=j.buffer;case N:return!(_.byteLength!=j.byteLength||!Se(new Dt(_),new Dt(j)));case v:case x:case R:return Bn(+_,+j);case E:return _.name==j.name&&_.message==j.message;case ie:case L:return _==j+"";case O:var Ze=Da;case ve:var Et=ne&a;if(Ze||(Ze=Ot),_.size!=j.size&&!Et)return!1;var tt=Ye.get(_);if(tt)return tt==j;ne|=l,Ye.set(_,j);var Rt=fi(Ze(_),Ze(j),ne,Ue,Se,Ye);return Ye.delete(_),Rt;case k:if(gr)return gr.call(_)==gr.call(j)}return!1}function gs(_,j,B,ne,Ue,Se){var Ye=B&a,Ze=ps(_),Et=Ze.length,tt=ps(j),Rt=tt.length;if(Et!=Rt&&!Ye)return!1;for(var un=Et;un--;){var Ut=Ze[un];if(!(Ye?Ut in j:kn.call(j,Ut)))return!1}var Yt=Se.get(_);if(Yt&&Se.get(j))return Yt==j;var sn=!0;Se.set(_,j),Se.set(j,_);for(var Xr=Ye;++un<Et;){Ut=Ze[un];var Hn=_[Ut],Wr=j[Ut];if(ne)var qo=Ye?ne(Wr,Hn,Ut,j,_,Se):ne(Hn,Wr,Ut,_,j,Se);if(!(qo===void 0?Hn===Wr||Ue(Hn,Wr,B,ne,Se):qo)){sn=!1;break}Xr||(Xr=Ut=="constructor")}if(sn&&!Xr){var Fs=_.constructor,Zi=j.constructor;Fs!=Zi&&"constructor"in _&&"constructor"in j&&!(typeof Fs=="function"&&Fs instanceof Fs&&typeof Zi=="function"&&Zi instanceof Zi)&&(sn=!1)}return Se.delete(_),Se.delete(j),sn}function ps(_){return jr(_,zs,Xi)}function pn(_,j){var B=_.__data__;return Pa(j)?B[typeof j=="string"?"string":"hash"]:B.map}function Kt(_,j){var B=Ar(_,j);return Bs(B)?B:void 0}function Dr(_){var j=kn.call(_,Zn),B=_[Zn];try{_[Zn]=void 0;var ne=!0}catch{}var Ue=Hi.call(_);return ne&&(j?_[Zn]=B:delete _[Zn]),Ue}var Xi=Mn?function(_){return _==null?[]:(_=Object(_),tn(Mn(_),function(j){return Us.call(_,j)}))}:Hs,nr=Gr;(Jn&&nr(new Jn(new ArrayBuffer(1)))!=M||In&&nr(new In)!=O||Pn&&nr(Pn.resolve())!=Y||Fi&&nr(new Fi)!=ve||ci&&nr(new ci)!=$)&&(nr=function(_){var j=Gr(_),B=j==F?_.constructor:void 0,ne=B?cn(B):"";if(ne)switch(ne){case hs:return M;case $r:return O;case Vs:return Y;case $i:return ve;case Gi:return $}return j});function mi(_,j){return j=j??c,!!j&&(typeof _=="number"||me.test(_))&&_>-1&&_%1==0&&_<j}function Pa(_){var j=typeof _;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?_!=="__proto__":_===null}function ys(_){return!!zi&&zi in _}function gi(_){var j=_&&_.constructor,B=typeof j=="function"&&j.prototype||Hr;return _===B}function rr(_){return Hi.call(_)}function cn(_){if(_!=null){try{return Bi.call(_)}catch{}try{return _+""}catch{}}return""}function Bn(_,j){return _===j||_!==_&&j!==j}var Kr=dt((function(){return arguments})())?dt:function(_){return We(_)&&kn.call(_,"callee")&&!Us.call(_,"callee")},zn=Array.isArray;function Yr(_){return _!=null&&On(_.length)&&!sr(_)}var Qr=Fr||Wi;function vs(_,j){return ms(_,j)}function sr(_){if(!bs(_))return!1;var j=Gr(_);return j==A||j==S||j==p||j==Q}function On(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=c}function bs(_){var j=typeof _;return _!=null&&(j=="object"||j=="function")}function We(_){return _!=null&&typeof _=="object"}var br=yt?Ht(yt):jn;function zs(_){return Yr(_)?Gt(_):di(_)}function Hs(){return[]}function Wi(){return!1}n.exports=vs})(Fu,Fu.exports)),Fu.exports}var sf={},ww;function w9(){if(ww)return sf;ww=1,Object.defineProperty(sf,"__esModule",{value:!0});const n=pN(),e=yN();var t;return(function(r){function a(m={},p={},v=!1){typeof m!="object"&&(m={}),typeof p!="object"&&(p={});let x=n(p);v||(x=Object.keys(x).reduce((E,A)=>(x[A]!=null&&(E[A]=x[A]),E),{}));for(const E in m)m[E]!==void 0&&p[E]===void 0&&(x[E]=m[E]);return Object.keys(x).length>0?x:void 0}r.compose=a;function l(m={},p={}){typeof m!="object"&&(m={}),typeof p!="object"&&(p={});const v=Object.keys(m).concat(Object.keys(p)).reduce((x,E)=>(e(m[E],p[E])||(x[E]=p[E]===void 0?null:p[E]),x),{});return Object.keys(v).length>0?v:void 0}r.diff=l;function c(m={},p={}){m=m||{};const v=Object.keys(p).reduce((x,E)=>(p[E]!==m[E]&&m[E]!==void 0&&(x[E]=p[E]),x),{});return Object.keys(m).reduce((x,E)=>(m[E]!==p[E]&&p[E]===void 0&&(x[E]=null),x),v)}r.invert=c;function d(m,p,v=!1){if(typeof m!="object")return p;if(typeof p!="object")return;if(!v)return p;const x=Object.keys(p).reduce((E,A)=>(m[A]===void 0&&(E[A]=p[A]),E),{});return Object.keys(x).length>0?x:void 0}r.transform=d})(t||(t={})),sf.default=t,sf}var af={},Tw;function vN(){if(Tw)return af;Tw=1,Object.defineProperty(af,"__esModule",{value:!0});var n;return(function(e){function t(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=t})(n||(n={})),af.default=n,af}var of={},Aw;function T9(){if(Aw)return of;Aw=1,Object.defineProperty(of,"__esModule",{value:!0});const n=vN();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const a=this.ops[this.index];if(a){const l=this.offset,c=n.default.length(a);if(r>=c-l?(r=c-l,this.index+=1,this.offset=0):this.offset+=r,typeof a.delete=="number")return{delete:r};{const d={};return a.attributes&&(d.attributes=a.attributes),typeof a.retain=="number"?d.retain=r:typeof a.retain=="object"&&a.retain!==null?d.retain=a.retain:typeof a.insert=="string"?d.insert=a.insert.substr(l,r):d.insert=a.insert,d}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?n.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,a=this.index,l=this.next(),c=this.ops.slice(this.index);return this.offset=r,this.index=a,[l].concat(c)}}else return[]}}return of.default=e,of}var Sw;function A9(){return Sw||(Sw=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const t=E9(),r=pN(),a=yN(),l=w9();e.AttributeMap=l.default;const c=vN();e.Op=c.default;const d=T9();e.OpIterator=d.default;const m="\0",p=(x,E)=>{if(typeof x!="object"||x===null)throw new Error(`cannot retain a ${typeof x}`);if(typeof E!="object"||E===null)throw new Error(`cannot retain a ${typeof E}`);const A=Object.keys(x)[0];if(!A||A!==Object.keys(E)[0])throw new Error(`embed types not matched: ${A} != ${Object.keys(E)[0]}`);return[A,x[A],E[A]]};class v{constructor(E){Array.isArray(E)?this.ops=E:E!=null&&Array.isArray(E.ops)?this.ops=E.ops:this.ops=[]}static registerEmbed(E,A){this.handlers[E]=A}static unregisterEmbed(E){delete this.handlers[E]}static getHandler(E){const A=this.handlers[E];if(!A)throw new Error(`no handlers for embed type "${E}"`);return A}insert(E,A){const S={};return typeof E=="string"&&E.length===0?this:(S.insert=E,A!=null&&typeof A=="object"&&Object.keys(A).length>0&&(S.attributes=A),this.push(S))}delete(E){return E<=0?this:this.push({delete:E})}retain(E,A){if(typeof E=="number"&&E<=0)return this;const S={retain:E};return A!=null&&typeof A=="object"&&Object.keys(A).length>0&&(S.attributes=A),this.push(S)}push(E){let A=this.ops.length,S=this.ops[A-1];if(E=r(E),typeof S=="object"){if(typeof E.delete=="number"&&typeof S.delete=="number")return this.ops[A-1]={delete:S.delete+E.delete},this;if(typeof S.delete=="number"&&E.insert!=null&&(A-=1,S=this.ops[A-1],typeof S!="object"))return this.ops.unshift(E),this;if(a(E.attributes,S.attributes)){if(typeof E.insert=="string"&&typeof S.insert=="string")return this.ops[A-1]={insert:S.insert+E.insert},typeof E.attributes=="object"&&(this.ops[A-1].attributes=E.attributes),this;if(typeof E.retain=="number"&&typeof S.retain=="number")return this.ops[A-1]={retain:S.retain+E.retain},typeof E.attributes=="object"&&(this.ops[A-1].attributes=E.attributes),this}}return A===this.ops.length?this.ops.push(E):this.ops.splice(A,0,E),this}chop(){const E=this.ops[this.ops.length-1];return E&&typeof E.retain=="number"&&!E.attributes&&this.ops.pop(),this}filter(E){return this.ops.filter(E)}forEach(E){this.ops.forEach(E)}map(E){return this.ops.map(E)}partition(E){const A=[],S=[];return this.forEach(O=>{(E(O)?A:S).push(O)}),[A,S]}reduce(E,A){return this.ops.reduce(E,A)}changeLength(){return this.reduce((E,A)=>A.insert?E+c.default.length(A):A.delete?E-A.delete:E,0)}length(){return this.reduce((E,A)=>E+c.default.length(A),0)}slice(E=0,A=1/0){const S=[],O=new d.default(this.ops);let R=0;for(;R<A&&O.hasNext();){let V;R<E?V=O.next(E-R):(V=O.next(A-R),S.push(V)),R+=c.default.length(V)}return new v(S)}compose(E){const A=new d.default(this.ops),S=new d.default(E.ops),O=[],R=S.peek();if(R!=null&&typeof R.retain=="number"&&R.attributes==null){let F=R.retain;for(;A.peekType()==="insert"&&A.peekLength()<=F;)F-=A.peekLength(),O.push(A.next());R.retain-F>0&&S.next(R.retain-F)}const V=new v(O);for(;A.hasNext()||S.hasNext();)if(S.peekType()==="insert")V.push(S.next());else if(A.peekType()==="delete")V.push(A.next());else{const F=Math.min(A.peekLength(),S.peekLength()),Y=A.next(F),Q=S.next(F);if(Q.retain){const ie={};if(typeof Y.retain=="number")ie.retain=typeof Q.retain=="number"?F:Q.retain;else if(typeof Q.retain=="number")Y.retain==null?ie.insert=Y.insert:ie.retain=Y.retain;else{const L=Y.retain==null?"insert":"retain",[k,U,$]=p(Y[L],Q.retain),N=v.getHandler(k);ie[L]={[k]:N.compose(U,$,L==="retain")}}const ve=l.default.compose(Y.attributes,Q.attributes,typeof Y.retain=="number");if(ve&&(ie.attributes=ve),V.push(ie),!S.hasNext()&&a(V.ops[V.ops.length-1],ie)){const L=new v(A.rest());return V.concat(L).chop()}}else typeof Q.delete=="number"&&(typeof Y.retain=="number"||typeof Y.retain=="object"&&Y.retain!==null)&&V.push(Q)}return V.chop()}concat(E){const A=new v(this.ops.slice());return E.ops.length>0&&(A.push(E.ops[0]),A.ops=A.ops.concat(E.ops.slice(1))),A}diff(E,A){if(this.ops===E.ops)return new v;const S=[this,E].map(Y=>Y.map(Q=>{if(Q.insert!=null)return typeof Q.insert=="string"?Q.insert:m;const ie=Y===E?"on":"with";throw new Error("diff() called "+ie+" non-document")}).join("")),O=new v,R=t(S[0],S[1],A,!0),V=new d.default(this.ops),F=new d.default(E.ops);return R.forEach(Y=>{let Q=Y[1].length;for(;Q>0;){let ie=0;switch(Y[0]){case t.INSERT:ie=Math.min(F.peekLength(),Q),O.push(F.next(ie));break;case t.DELETE:ie=Math.min(Q,V.peekLength()),V.next(ie),O.delete(ie);break;case t.EQUAL:ie=Math.min(V.peekLength(),F.peekLength(),Q);const ve=V.next(ie),L=F.next(ie);a(ve.insert,L.insert)?O.retain(ie,l.default.diff(ve.attributes,L.attributes)):O.push(L).delete(ie);break}Q-=ie}}),O.chop()}eachLine(E,A=`
`){const S=new d.default(this.ops);let O=new v,R=0;for(;S.hasNext();){if(S.peekType()!=="insert")return;const V=S.peek(),F=c.default.length(V)-S.peekLength(),Y=typeof V.insert=="string"?V.insert.indexOf(A,F)-F:-1;if(Y<0)O.push(S.next());else if(Y>0)O.push(S.next(Y));else{if(E(O,S.next(1).attributes||{},R)===!1)return;R+=1,O=new v}}O.length()>0&&E(O,{},R)}invert(E){const A=new v;return this.reduce((S,O)=>{if(O.insert)A.delete(c.default.length(O));else{if(typeof O.retain=="number"&&O.attributes==null)return A.retain(O.retain),S+O.retain;if(O.delete||typeof O.retain=="number"){const R=O.delete||O.retain;return E.slice(S,S+R).forEach(F=>{O.delete?A.push(F):O.retain&&O.attributes&&A.retain(c.default.length(F),l.default.invert(O.attributes,F.attributes))}),S+R}else if(typeof O.retain=="object"&&O.retain!==null){const R=E.slice(S,S+1),V=new d.default(R.ops).next(),[F,Y,Q]=p(O.retain,V.insert),ie=v.getHandler(F);return A.retain({[F]:ie.invert(Y,Q)},l.default.invert(O.attributes,V.attributes)),S+1}}return S},0),A.chop()}transform(E,A=!1){if(A=!!A,typeof E=="number")return this.transformPosition(E,A);const S=E,O=new d.default(this.ops),R=new d.default(S.ops),V=new v;for(;O.hasNext()||R.hasNext();)if(O.peekType()==="insert"&&(A||R.peekType()!=="insert"))V.retain(c.default.length(O.next()));else if(R.peekType()==="insert")V.push(R.next());else{const F=Math.min(O.peekLength(),R.peekLength()),Y=O.next(F),Q=R.next(F);if(Y.delete)continue;if(Q.delete)V.push(Q);else{const ie=Y.retain,ve=Q.retain;let L=typeof ve=="object"&&ve!==null?ve:F;if(typeof ie=="object"&&ie!==null&&typeof ve=="object"&&ve!==null){const k=Object.keys(ie)[0];if(k===Object.keys(ve)[0]){const U=v.getHandler(k);U&&(L={[k]:U.transform(ie[k],ve[k],A)})}}V.retain(L,l.default.transform(Y.attributes,Q.attributes,A))}}return V.chop()}transformPosition(E,A=!1){A=!!A;const S=new d.default(this.ops);let O=0;for(;S.hasNext()&&O<=E;){const R=S.peekLength(),V=S.peekType();if(S.next(),V==="delete"){E-=Math.min(R,E-O);continue}else V==="insert"&&(O<E||!A)&&(E+=R);O+=R}return E}}v.Op=c.default,v.OpIterator=d.default,v.AttributeMap=l.default,v.handlers={},e.default=v,n.exports=v,n.exports.default=v})(rf,rf.exports)),rf.exports}var Ds=A9();const Ie=n0(Ds);class oi extends us{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}oi.blotName="break";oi.tagName="BR";let si=class extends Wf{};const S9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Dm(n){return n.replace(/[&<>"']/g,e=>S9[e])}class Er extends yv{static allowedChildren=[Er,oi,us,si];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,t){const r=Er.order.indexOf(e),a=Er.order.indexOf(t);return r>=0||a>=0?r-a:e===t?0:e<t?-1:1}formatAt(e,t,r,a){if(Er.compare(this.statics.blotName,r)<0&&this.scroll.query(r,Oe.BLOT)){const l=this.isolate(e,t);a&&l.wrap(r,a)}else super.formatAt(e,t,r,a)}optimize(e){if(super.optimize(e),this.parent instanceof Er&&Er.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}const Nw=1;class Xn extends fh{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=bN(this)),this.cache.delta}deleteAt(e,t){super.deleteAt(e,t),this.cache={}}formatAt(e,t,r,a){t<=0||(this.scroll.query(r,Oe.BLOCK)?e+t===this.length()&&this.format(r,a):super.formatAt(e,Math.min(t,this.length()-e-1),r,a),this.cache={})}insertAt(e,t,r){if(r!=null){super.insertAt(e,t,r),this.cache={};return}if(t.length===0)return;const a=t.split(`
`),l=a.shift();l.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let c=this;a.reduce((d,m)=>(c=c.split(d,!0),c.insertAt(0,m),m.length),e+l.length)}insertBefore(e,t){const{head:r}=this.children;super.insertBefore(e,t),r instanceof oi&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Nw),this.cache.length}moveChildren(e,t){super.moveChildren(e,t),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t&&(e===0||e>=this.length()-Nw)){const a=this.clone();return e===0?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}const r=super.split(e,t);return this.cache={},r}}Xn.blotName="block";Xn.tagName="P";Xn.defaultChild=oi;Xn.allowedChildren=[oi,Er,us,si];class Os extends us{attach(){super.attach(),this.attributes=new jm(this.domNode)}delta(){return new Ie().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){const r=this.scroll.query(e,Oe.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,t)}formatAt(e,t,r,a){this.format(r,a)}insertAt(e,t,r){if(r!=null){super.insertAt(e,t,r);return}const a=t.split(`
`),l=a.pop(),c=a.map(m=>{const p=this.scroll.create(Xn.blotName);return p.insertAt(0,m),p}),d=this.split(e);c.forEach(m=>{this.parent.insertBefore(m,d)}),l&&this.parent.insertBefore(this.scroll.create("text",l),d)}}Os.scope=Oe.BLOCK_BLOT;function bN(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(cr).reduce((t,r)=>r.length()===0?t:t.insert(r.value(),Rs(r,{},e)),new Ie).insert(`
`,Rs(n))}function Rs(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(e={...e,...n.formats()},t&&delete e["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?e:Rs(n.parent,e,t)}class Zs extends us{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,t,r){super(e,t),this.selection=r,this.textNode=document.createTextNode(Zs.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let r=this,a=0;for(;r!=null&&r.statics.scope!==Oe.BLOCK_BLOT;)a+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Zs.CONTENTS.length,r.optimize(),r.formatAt(a,Zs.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const t=this.prev instanceof si?this.prev:null,r=t?t.length():0,a=this.next instanceof si?this.next:null,l=a?a.text:"",{textNode:c}=this,d=c.data.split(Zs.CONTENTS).join("");c.data=Zs.CONTENTS;let m;if(t)m=t,(d||a)&&(t.insertAt(t.length(),d+l),a&&a.remove());else if(a)m=a,a.insertAt(0,d);else{const p=document.createTextNode(d);m=this.scroll.create(p),this.parent.insertBefore(m,this)}if(this.remove(),e){const p=(E,A)=>t&&E===t.domNode?A:E===c?r+A-1:a&&E===a.domNode?r+d.length+A:null,v=p(e.start.node,e.start.offset),x=p(e.end.node,e.end.offset);if(v!==null&&x!==null)return{startNode:m.domNode,startOffset:v,endNode:m.domNode,endOffset:x}}return null}update(e,t){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(t.range=r)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=Zs.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}}var ny={exports:{}},Cw;function N9(){return Cw||(Cw=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function a(m,p,v){this.fn=m,this.context=p,this.once=v||!1}function l(m,p,v,x,E){if(typeof v!="function")throw new TypeError("The listener must be a function");var A=new a(v,x||m,E),S=t?t+p:p;return m._events[S]?m._events[S].fn?m._events[S]=[m._events[S],A]:m._events[S].push(A):(m._events[S]=A,m._eventsCount++),m}function c(m,p){--m._eventsCount===0?m._events=new r:delete m._events[p]}function d(){this._events=new r,this._eventsCount=0}d.prototype.eventNames=function(){var p=[],v,x;if(this._eventsCount===0)return p;for(x in v=this._events)e.call(v,x)&&p.push(t?x.slice(1):x);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(v)):p},d.prototype.listeners=function(p){var v=t?t+p:p,x=this._events[v];if(!x)return[];if(x.fn)return[x.fn];for(var E=0,A=x.length,S=new Array(A);E<A;E++)S[E]=x[E].fn;return S},d.prototype.listenerCount=function(p){var v=t?t+p:p,x=this._events[v];return x?x.fn?1:x.length:0},d.prototype.emit=function(p,v,x,E,A,S){var O=t?t+p:p;if(!this._events[O])return!1;var R=this._events[O],V=arguments.length,F,Y;if(R.fn){switch(R.once&&this.removeListener(p,R.fn,void 0,!0),V){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,v),!0;case 3:return R.fn.call(R.context,v,x),!0;case 4:return R.fn.call(R.context,v,x,E),!0;case 5:return R.fn.call(R.context,v,x,E,A),!0;case 6:return R.fn.call(R.context,v,x,E,A,S),!0}for(Y=1,F=new Array(V-1);Y<V;Y++)F[Y-1]=arguments[Y];R.fn.apply(R.context,F)}else{var Q=R.length,ie;for(Y=0;Y<Q;Y++)switch(R[Y].once&&this.removeListener(p,R[Y].fn,void 0,!0),V){case 1:R[Y].fn.call(R[Y].context);break;case 2:R[Y].fn.call(R[Y].context,v);break;case 3:R[Y].fn.call(R[Y].context,v,x);break;case 4:R[Y].fn.call(R[Y].context,v,x,E);break;default:if(!F)for(ie=1,F=new Array(V-1);ie<V;ie++)F[ie-1]=arguments[ie];R[Y].fn.apply(R[Y].context,F)}}return!0},d.prototype.on=function(p,v,x){return l(this,p,v,x,!1)},d.prototype.once=function(p,v,x){return l(this,p,v,x,!0)},d.prototype.removeListener=function(p,v,x,E){var A=t?t+p:p;if(!this._events[A])return this;if(!v)return c(this,A),this;var S=this._events[A];if(S.fn)S.fn===v&&(!E||S.once)&&(!x||S.context===x)&&c(this,A);else{for(var O=0,R=[],V=S.length;O<V;O++)(S[O].fn!==v||E&&!S[O].once||x&&S[O].context!==x)&&R.push(S[O]);R.length?this._events[A]=R.length===1?R[0]:R:c(this,A)}return this},d.prototype.removeAllListeners=function(p){var v;return p?(v=t?t+p:p,this._events[v]&&c(this,v)):(this._events=new r,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=t,d.EventEmitter=d,n.exports=d})(ny)),ny.exports}var C9=N9();const R9=n0(C9),Zy=new WeakMap,Jy=["error","warn","log","info"];let e0="warn";function _N(n){if(e0&&Jy.indexOf(n)<=Jy.indexOf(e0)){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];console[n](...t)}}function Oa(n){return Jy.reduce((e,t)=>(e[t]=_N.bind(console,t,n),e),{})}Oa.level=n=>{e0=n};_N.level=Oa.level;const ry=Oa("quill:events"),I9=["selectionchange","mousedown","mouseup","click"];I9.forEach(n=>{document.addEventListener(n,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(a=>{const l=Zy.get(a);l&&l.emitter&&l.emitter.handleDOM(...t)})})});class Ce extends R9{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",ry.error)}emit(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ry.log.call(ry,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];(this.domListeners[e.type]||[]).forEach(l=>{let{node:c,handler:d}=l;(e.target===c||c.contains(e.target))&&d(e,...r)})}listenDOM(e,t,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:r})}}const sy=Oa("quill:selection");class yl{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}}class j9{constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new yl(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Ce.sources.USER),1)}),this.emitter.on(Ce.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(Ce.events.SCROLL_UPDATE,(a,l)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const c=l.some(d=>d.type==="characterData"||d.type==="childList"||d.type==="attributes"&&d.target===this.root);this.update(c?Ce.sources.SILENT:a)}catch{}})}),this.emitter.on(Ce.events.SCROLL_OPTIMIZE,(r,a)=>{if(a.range){const{startNode:l,startOffset:c,endNode:d,endOffset:m}=a.range;this.setNativeRange(l,c,d,m),this.update(Ce.sources.SILENT)}}),this.update(Ce.sources.SILENT)}handleComposition(){this.emitter.on(Ce.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Ce.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Ce.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,Oe.BLOCK))){if(r.start.node!==this.cursor.textNode){const a=this.scroll.find(r.start.node,!1);if(a==null)return;if(a instanceof cr){const l=a.split(r.start.offset);a.parent.insertBefore(this.cursor,l)}else a.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;let a,[l,c]=this.scroll.leaf(e);if(l==null)return null;if(t>0&&c===l.length()){const[v]=this.scroll.leaf(e+1);if(v){const[x]=this.scroll.line(e),[E]=this.scroll.line(e+1);x===E&&(l=v,c=0)}}[a,c]=l.position(c,!0);const d=document.createRange();if(t>0)return d.setStart(a,c),[l,c]=this.scroll.leaf(e+t),l==null?null:([a,c]=l.position(c,!0),d.setEnd(a,c),d.getBoundingClientRect());let m="left",p;if(a instanceof Text){if(!a.data.length)return null;c<a.data.length?(d.setStart(a,c),d.setEnd(a,c+1)):(d.setStart(a,c-1),d.setEnd(a,c),m="right"),p=d.getBoundingClientRect()}else{if(!(l.domNode instanceof Element))return null;p=l.domNode.getBoundingClientRect(),c>0&&(m="right")}return{bottom:p.top+p.height,height:p.height,left:p[m],right:p[m],top:p.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const t=e.getRangeAt(0);if(t==null)return null;const r=this.normalizeNative(t);return sy.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&iy(this.root,document.activeElement)}normalizedToRange(e){const t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);const r=t.map(c=>{const[d,m]=c,p=this.scroll.find(d,!0),v=p.offset(this.scroll);return m===0?v:p instanceof cr?v+p.index(d,m):v+p.length()}),a=Math.min(Math.max(...r),this.scroll.length()-1),l=Math.min(a,...r);return new yl(l,a-l)}normalizeNative(e){if(!iy(this.root,e.startContainer)||!e.collapsed&&!iy(this.root,e.endContainer))return null;const t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(r=>{let{node:a,offset:l}=r;for(;!(a instanceof Text)&&a.childNodes.length>0;)if(a.childNodes.length>l)a=a.childNodes[l],l=0;else if(a.childNodes.length===l)a=a.lastChild,a instanceof Text?l=a.data.length:a.childNodes.length>0?l=a.childNodes.length:l=a.childNodes.length+1;else break;r.node=a,r.offset=l}),t}rangeToNative(e){const t=this.scroll.length(),r=(a,l)=>{a=Math.min(t-1,a);const[c,d]=this.scroll.leaf(a);return c?c.position(d,l):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(sy.info("setNativeRange",e,t,r,a),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const c=document.getSelection();if(c!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:d}=this.getNativeRange()||{};if(d==null||l||e!==d.startContainer||t!==d.startOffset||r!==d.endContainer||a!==d.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(a=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const m=document.createRange();m.setStart(e,t),m.setEnd(r,a),c.removeAllRanges(),c.addRange(m)}}else c.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.sources.API;if(typeof t=="string"&&(r=t,t=!1),sy.info("setRange",e),e!=null){const a=this.rangeToNative(e);this.setNativeRange(...a,t)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.sources.USER;const t=this.lastRange,[r,a]=this.getRange();if(this.lastRange=r,this.lastNative=a,this.lastRange!=null&&(this.savedRange=this.lastRange),!mo(t,this.lastRange)){if(!this.composing&&a!=null&&a.native.collapsed&&a.start.node!==this.cursor.textNode){const c=this.cursor.restore();c&&this.setNativeRange(c.startNode,c.startOffset,c.endNode,c.endOffset)}const l=[Ce.events.SELECTION_CHANGE,bc(this.lastRange),bc(t),e];this.emitter.emit(Ce.events.EDITOR_CHANGE,...l),e!==Ce.sources.SILENT&&this.emitter.emit(...l)}}}function iy(n,e){try{e.parentNode}catch{return!1}return n.contains(e)}const O9=/^[ -~]*$/;class D9{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();const r=Rw(e),a=new Ie;return k9(r.ops.slice()).reduce((c,d)=>{const m=Ds.Op.length(d);let p=d.attributes||{},v=!1,x=!1;if(d.insert!=null){if(a.retain(m),typeof d.insert=="string"){const S=d.insert;x=!S.endsWith(`
`)&&(t<=c||!!this.scroll.descendant(Os,c)[0]),this.scroll.insertAt(c,S);const[O,R]=this.scroll.line(c);let V=wo({},Rs(O));if(O instanceof Xn){const[F]=O.descendant(cr,R);F&&(V=wo(V,Rs(F)))}p=Ds.AttributeMap.diff(V,p)||{}}else if(typeof d.insert=="object"){const S=Object.keys(d.insert)[0];if(S==null)return c;const O=this.scroll.query(S,Oe.INLINE)!=null;if(O)(t<=c||this.scroll.descendant(Os,c)[0])&&(x=!0);else if(c>0){const[R,V]=this.scroll.descendant(cr,c-1);R instanceof si?R.value()[V]!==`
`&&(v=!0):R instanceof us&&R.statics.scope===Oe.INLINE_BLOT&&(v=!0)}if(this.scroll.insertAt(c,S,d.insert[S]),O){const[R]=this.scroll.descendant(cr,c);if(R){const V=wo({},Rs(R));p=Ds.AttributeMap.diff(V,p)||{}}}}t+=m}else if(a.push(d),d.retain!==null&&typeof d.retain=="object"){const S=Object.keys(d.retain)[0];if(S==null)return c;this.scroll.updateEmbedAt(c,S,d.retain[S])}Object.keys(p).forEach(S=>{this.scroll.formatAt(c,m,S,p[S])});const E=v?1:0,A=x?1:0;return t+=E+A,a.retain(E),a.delete(A),c+m+E+A},0),a.reduce((c,d)=>typeof d.delete=="number"?(this.scroll.deleteAt(c,d.delete),c):c+Ds.Op.length(d),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new Ie().retain(e).delete(t))}formatLine(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(l=>{this.scroll.lines(e,Math.max(t,1)).forEach(c=>{c.format(l,r[l])})}),this.scroll.optimize();const a=new Ie().retain(e).retain(t,bc(r));return this.update(a)}formatText(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(l=>{this.scroll.formatAt(e,t,l,r[l])});const a=new Ie().retain(e).retain(t,bc(r));return this.update(a)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new Ie)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],a=[];t===0?this.scroll.path(e).forEach(d=>{const[m]=d;m instanceof Xn?r.push(m):m instanceof cr&&a.push(m)}):(r=this.scroll.lines(e,t),a=this.scroll.descendants(cr,e,t));const[l,c]=[r,a].map(d=>{const m=d.shift();if(m==null)return{};let p=Rs(m);for(;Object.keys(p).length>0;){const v=d.shift();if(v==null)return p;p=L9(Rs(v),p)}return p});return{...l,...c}}getHTML(e,t){const[r,a]=this.scroll.line(e);if(r){const l=r.length();return r.length()>=a+t&&!(a===0&&t===l)?mh(r,a,t,!0):mh(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,t){const r=Rw(t),a=new Ie().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(a)}insertEmbed(e,t,r){return this.scroll.insertAt(e,t,r),this.update(new Ie().retain(e).insert({[t]:r}))}insertText(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(r).forEach(a=>{this.scroll.formatAt(e,t.length,a,r[a])}),this.update(new Ie().retain(e).insert(t,bc(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==Xn.blotName)return!1;const t=e;return t.children.length>1?!1:t.children.head instanceof oi}removeFormat(e,t){const r=this.getText(e,t),[a,l]=this.scroll.line(e+t);let c=0,d=new Ie;a!=null&&(c=a.length()-l,d=a.delta().slice(l,l+c-1).insert(`
`));const p=this.getContents(e,t+c).diff(new Ie().insert(r).concat(d)),v=new Ie().retain(e).concat(p);return this.applyDelta(v)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const a=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(O9)&&this.scroll.find(t[0].target)){const l=this.scroll.find(t[0].target),c=Rs(l),d=l.offset(this.scroll),m=t[0].oldValue.replace(Zs.CONTENTS,""),p=new Ie().insert(m),v=new Ie().insert(l.value()),x=r&&{oldRange:Iw(r.oldRange,-d),newRange:Iw(r.newRange,-d)};e=new Ie().retain(d).concat(p.diff(v,x)).reduce((A,S)=>S.insert?A.insert(S.insert,c):A.push(S),new Ie),this.delta=a.compose(e)}else this.delta=this.getDelta(),(!e||!mo(a.compose(e),this.delta))&&(e=a.diff(this.delta,r));return e}}function mc(n,e,t){if(n.length===0){const[A]=ay(t.pop());return e<=0?`</li></${A}>`:`</li></${A}>${mc([],e-1,t)}`}const[{child:r,offset:a,length:l,indent:c,type:d},...m]=n,[p,v]=ay(d);if(c>e)return t.push(d),c===e+1?`<${p}><li${v}>${mh(r,a,l)}${mc(m,c,t)}`:`<${p}><li>${mc(n,e+1,t)}`;const x=t[t.length-1];if(c===e&&d===x)return`</li><li${v}>${mh(r,a,l)}${mc(m,c,t)}`;const[E]=ay(t.pop());return`</li></${E}>${mc(n,e-1,t)}`}function mh(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(e,t);if(n instanceof si)return Dm(n.value().slice(e,e+t)).replaceAll(" ","&nbsp;");if(n instanceof ni){if(n.statics.blotName==="list-container"){const p=[];return n.children.forEachAt(e,t,(v,x,E)=>{const A="formats"in v&&typeof v.formats=="function"?v.formats():{};p.push({child:v,offset:x,length:E,indent:A.indent||0,type:A.list})}),mc(p,-1,[])}const a=[];if(n.children.forEachAt(e,t,(p,v,x)=>{a.push(mh(p,v,x))}),r||n.statics.blotName==="list")return a.join("");const{outerHTML:l,innerHTML:c}=n.domNode,[d,m]=l.split(`>${c}<`);return d==="<table"?`<table style="border: 1px solid #000;">${a.join("")}<${m}`:`${d}>${a.join("")}<${m}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}function L9(n,e){return Object.keys(e).reduce((t,r)=>{if(n[r]==null)return t;const a=e[r];return a===n[r]?t[r]=a:Array.isArray(a)?a.indexOf(n[r])<0?t[r]=a.concat([n[r]]):t[r]=a:t[r]=[a,n[r]],t},{})}function ay(n){const e=n==="ordered"?"ol":"ul";switch(n){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function Rw(n){return n.reduce((e,t)=>{if(typeof t.insert=="string"){const r=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,t.attributes)}return e.push(t)},new Ie)}function Iw(n,e){let{index:t,length:r}=n;return new yl(t+e,r)}function k9(n){const e=[];return n.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((a,l)=>{l&&e.push({insert:`
`,attributes:t.attributes}),a&&e.push({insert:a,attributes:t.attributes})}):e.push(t)}),e}class Pi{static DEFAULTS={};constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}}const lf="\uFEFF";class bv extends us{constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(lf),this.rightGuard=document.createTextNode(lf),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,r;const a=e.data.split(lf).join("");if(e===this.leftGuard)if(this.prev instanceof si){const l=this.prev.length();this.prev.insertAt(l,a),t={startNode:this.prev.domNode,startOffset:l+a.length}}else r=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(r),this),t={startNode:r,startOffset:a.length};else e===this.rightGuard&&(this.next instanceof si?(this.next.insertAt(0,a),t={startNode:this.next.domNode,startOffset:a.length}):(r=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(r),this.next),t={startNode:r,startOffset:a.length}));return e.data=lf,t}update(e,t){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const a=this.restore(r.target);a&&(t.range=a)}})}}class M9{isComposing=!1;constructor(e,t){this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof bv)&&(this.emitter.emit(Ce.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(Ce.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(Ce.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(Ce.events.COMPOSITION_END,e),this.isComposing=!1}}class Yc{static DEFAULTS={modules:{}};static themes={default:Yc};modules={};constructor(e,t){this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}const P9=n=>n.parentElement||n.getRootNode().host||null,U9=n=>{const e=n.getBoundingClientRect(),t="offsetWidth"in n&&Math.abs(e.width)/n.offsetWidth||1,r="offsetHeight"in n&&Math.abs(e.height)/n.offsetHeight||1;return{top:e.top,right:e.left+n.clientWidth*t,bottom:e.top+n.clientHeight*r,left:e.left}},cf=n=>{const e=parseInt(n,10);return Number.isNaN(e)?0:e},jw=(n,e,t,r,a,l)=>n<t&&e>r?0:n<t?-(t-n+a):e>r?e-n>r-t?n+a-t:e-r+l:0,V9=(n,e)=>{const t=n.ownerDocument;let r=e,a=n;for(;a;){const l=a===t.body,c=l?{top:0,right:window.visualViewport?.width??t.documentElement.clientWidth,bottom:window.visualViewport?.height??t.documentElement.clientHeight,left:0}:U9(a),d=getComputedStyle(a),m=jw(r.left,r.right,c.left,c.right,cf(d.scrollPaddingLeft),cf(d.scrollPaddingRight)),p=jw(r.top,r.bottom,c.top,c.bottom,cf(d.scrollPaddingTop),cf(d.scrollPaddingBottom));if(m||p)if(l)t.defaultView?.scrollBy(m,p);else{const{scrollLeft:v,scrollTop:x}=a;p&&(a.scrollTop+=p),m&&(a.scrollLeft+=m);const E=a.scrollLeft-v,A=a.scrollTop-x;r={left:r.left-E,top:r.top-A,right:r.right-E,bottom:r.bottom-A}}a=l||d.position==="fixed"?null:P9(a)}},q9=100,B9=["block","break","cursor","inline","scroll","text"],z9=(n,e,t)=>{const r=new Lc;return B9.forEach(a=>{const l=e.query(a);l&&r.register(l)}),n.forEach(a=>{let l=e.query(a);l||t.error(`Cannot register "${a}" specified in "formats" config. Are you sure it was registered?`);let c=0;for(;l;)if(r.register(l),l="blotName"in l?l.requiredContainer??null:null,c+=1,c>q9){t.error(`Cycle detected in registering blot requiredContainer: "${a}"`);break}}),r},xc=Oa("quill"),uf=new Lc;ni.uiClass="ql-ui";class le{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:uf,theme:"default"};static events=Ce.events;static sources=Ce.sources;static version="2.0.3";static imports={delta:Ie,parchment:x9,"core/module":Pi,"core/theme":Yc};static debug(e){e===!0&&(e="log"),Oa.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Zy.get(e)||uf.find(e,t)}static import(e){return this.imports[e]==null&&xc.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],t=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,t):Object.keys(e).forEach(a=>{this.register(a,e[a],t)})}else{const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&xc.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&uf.register(t),typeof t.register=="function"&&t.register(uf)}}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=H9(e,t),this.container=this.options.container,this.container==null){xc.error("Invalid Quill container",e);return}this.options.debug&&le.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Zy.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Ce;const a=vv.blotName,l=this.options.registry.query(a);if(!l||!("blotName"in l))throw new Error(`Cannot initialize Quill without "${a}" blot`);if(this.scroll=new l(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new D9(this.scroll),this.selection=new j9(this.scroll,this.emitter),this.composition=new M9(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Ce.events.EDITOR_CHANGE,c=>{c===Ce.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Ce.events.SCROLL_UPDATE,(c,d)=>{const m=this.selection.lastRange,[p]=this.selection.getRange(),v=m&&p?{oldRange:m,newRange:p}:void 0;Xs.call(this,()=>this.editor.update(null,d,v),c)}),this.emitter.on(Ce.events.SCROLL_EMBED_UPDATE,(c,d)=>{const m=this.selection.lastRange,[p]=this.selection.getRange(),v=m&&p?{oldRange:m,newRange:p}:void 0;Xs.call(this,()=>{const x=new Ie().retain(c.offset(this)).retain({[c.statics.blotName]:d});return this.editor.update(x,[],v)},le.sources.USER)}),r){const c=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(c)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,r){return[e,t,,r]=ga(e,t,r),Xs.call(this,()=>this.editor.deleteText(e,t),r,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.sources.API;return Xs.call(this,()=>{const a=this.getSelection(!0);let l=new Ie;if(a==null)return l;if(this.scroll.query(e,Oe.BLOCK))l=this.editor.formatLine(a.index,a.length,{[e]:t});else{if(a.length===0)return this.selection.format(e,t),l;l=this.editor.formatText(a.index,a.length,{[e]:t})}return this.setSelection(a,Ce.sources.SILENT),l},r)}formatLine(e,t,r,a,l){let c;return[e,t,c,l]=ga(e,t,r,a,l),Xs.call(this,()=>this.editor.formatLine(e,t,c),l,e,0)}formatText(e,t,r,a,l){let c;return[e,t,c,l]=ga(e,t,r,a,l),Xs.call(this,()=>this.editor.formatText(e,t,c),l,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,t):r=this.selection.getBounds(e.index,e.length),!r)return null;const a=this.container.getBoundingClientRect();return{bottom:r.bottom-a.top,height:r.height,left:r.left-a.left,right:r.right-a.left,top:r.top-a.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=ga(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=ga(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=ga(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:le.sources.API;return Xs.call(this,()=>this.editor.insertEmbed(e,t,r),a,e)}insertText(e,t,r,a,l){let c;return[e,,c,l]=ga(e,0,r,a,l),Xs.call(this,()=>this.editor.insertText(e,t,c),l,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,r){return[e,t,,r]=ga(e,t,r),Xs.call(this,()=>this.editor.removeFormat(e,t),r,e)}scrollRectIntoView(e){V9(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;return Xs.call(this,()=>{e=new Ie(e);const r=this.getLength(),a=this.editor.deleteText(0,r),l=this.editor.insertContents(0,e),c=this.editor.deleteText(this.getLength()-1,1);return a.compose(l).compose(c)},t)}setSelection(e,t,r){e==null?this.selection.setRange(null,t||le.sources.API):([e,t,,r]=ga(e,t,r),this.selection.setRange(new yl(Math.max(0,e),t),r),r!==Ce.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;const r=new Ie().insert(e);return this.setContents(r,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.sources.USER;const t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;return Xs.call(this,()=>(e=new Ie(e),this.editor.applyDelta(e)),t,!0)}}function Ow(n){return typeof n=="string"?document.querySelector(n):n}function oy(n){return Object.entries(n??{}).reduce((e,t)=>{let[r,a]=t;return{...e,[r]:a===!0?{}:a}},{})}function Dw(n){return Object.fromEntries(Object.entries(n).filter(e=>e[1]!==void 0))}function H9(n,e){const t=Ow(n);if(!t)throw new Error("Invalid Quill container");const a=!e.theme||e.theme===le.DEFAULTS.theme?Yc:le.import(`themes/${e.theme}`);if(!a)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:l,...c}=le.DEFAULTS,{modules:d,...m}=a.DEFAULTS;let p=oy(e.modules);p!=null&&p.toolbar&&p.toolbar.constructor!==Object&&(p={...p,toolbar:{container:p.toolbar}});const v=wo({},oy(l),oy(d),p),x={...c,...Dw(m),...Dw(e)};let E=e.registry;return E?e.formats&&xc.warn('Ignoring "formats" option because "registry" is specified'):E=e.formats?z9(e.formats,x.registry,xc):x.registry,{...x,registry:E,container:t,theme:a,modules:Object.entries(v).reduce((A,S)=>{let[O,R]=S;if(!R)return A;const V=le.import(`modules/${O}`);return V==null?(xc.error(`Cannot load ${O} module. Are you sure you registered it?`),A):{...A,[O]:wo({},V.DEFAULTS||{},R)}},{}),bounds:Ow(x.bounds)}}function Xs(n,e,t,r){if(!this.isEnabled()&&e===Ce.sources.USER&&!this.allowReadOnlyEdits)return new Ie;let a=t==null?null:this.getSelection();const l=this.editor.delta,c=n();if(a!=null&&(t===!0&&(t=a.index),r==null?a=Lw(a,c,e):r!==0&&(a=Lw(a,t,r,e)),this.setSelection(a,Ce.sources.SILENT)),c.length()>0){const d=[Ce.events.TEXT_CHANGE,c,l,e];this.emitter.emit(Ce.events.EDITOR_CHANGE,...d),e!==Ce.sources.SILENT&&this.emitter.emit(...d)}return c}function ga(n,e,t,r,a){let l={};return typeof n.index=="number"&&typeof n.length=="number"?typeof e!="number"?(a=r,r=t,t=e,e=n.length,n=n.index):(e=n.length,n=n.index):typeof e!="number"&&(a=r,r=t,t=e,e=0),typeof t=="object"?(l=t,a=r):typeof t=="string"&&(r!=null?l[t]=r:a=t),a=a||Ce.sources.API,[n,e,l,a]}function Lw(n,e,t,r){const a=typeof t=="number"?t:0;if(n==null)return null;let l,c;return e&&typeof e.transformPosition=="function"?[l,c]=[n.index,n.index+n.length].map(d=>e.transformPosition(d,r!==Ce.sources.USER)):[l,c]=[n.index,n.index+n.length].map(d=>d<e||d===e&&r===Ce.sources.USER?d:a>=0?d+a:Math.max(e,d+a)),new yl(l,c-l)}class Nl extends Om{}function kw(n){return n instanceof Xn||n instanceof Os}function Mw(n){return typeof n.updateContent=="function"}class F9 extends vv{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Xn;static allowedChildren=[Xn,Os,Nl];constructor(e,t,r){let{emitter:a}=r;super(e,t),this.emitter=a,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",l=>this.handleDragStart(l))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(Ce.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(Ce.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(Ce.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){const[r,a]=this.line(e),[l]=this.line(e+t);if(super.deleteAt(e,t),l!=null&&r!==l&&a>0){if(r instanceof Os||l instanceof Os){this.optimize();return}const c=l.children.head instanceof oi?null:l.children.head;r.moveChildren(l,c),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,r,a){super.formatAt(e,t,r,a),this.optimize()}insertAt(e,t,r){if(e>=this.length())if(r==null||this.scroll.query(t,Oe.BLOCK)==null){const a=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(a),r==null&&t.endsWith(`
`)?a.insertAt(0,t.slice(0,-1),r):a.insertAt(0,t,r)}else{const a=this.scroll.create(t,r);this.appendChild(a)}else super.insertAt(e,t,r);this.optimize()}insertBefore(e,t){if(e.statics.scope===Oe.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,t)}else super.insertBefore(e,t)}insertContents(e,t){const r=this.deltaToRenderBlocks(t.concat(new Ie().insert(`
`))),a=r.pop();if(a==null)return;this.batchStart();const l=r.shift();if(l){const m=l.type==="block"&&(l.delta.length()===0||!this.descendant(Os,e)[0]&&e<this.length()),p=l.type==="block"?l.delta:new Ie().insert({[l.key]:l.value});ly(this,e,p);const v=l.type==="block"?1:0,x=e+p.length()+v;m&&this.insertAt(x-1,`
`);const E=Rs(this.line(e)[0]),A=Ds.AttributeMap.diff(E,l.attributes)||{};Object.keys(A).forEach(S=>{this.formatAt(x-1,1,S,A[S])}),e=x}let[c,d]=this.children.find(e);if(r.length&&(c&&(c=c.split(d),d=0),r.forEach(m=>{if(m.type==="block"){const p=this.createBlock(m.attributes,c||void 0);ly(p,0,m.delta)}else{const p=this.create(m.key,m.value);this.insertBefore(p,c||void 0),Object.keys(m.attributes).forEach(v=>{p.format(v,m.attributes[v])})}})),a.type==="block"&&a.delta.length()){const m=c?c.offset(c.scroll)+d:this.length();ly(this,m,a.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const t=this.path(e).pop();if(!t)return[null,-1];const[r,a]=t;return r instanceof cr?[r,a]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(kw,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(a,l,c)=>{let d=[],m=c;return a.children.forEachAt(l,c,(p,v,x)=>{kw(p)?d.push(p):p instanceof Om&&(d=d.concat(r(p,v,m))),m-=x}),d};return r(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(Ce.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=Ce.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:a}=r;const l=this.find(a,!0);return l&&!Mw(l)}),e.length>0&&this.emitter.emit(Ce.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(Ce.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,r){const[a]=this.descendant(l=>l instanceof Os,e);a&&a.statics.blotName===t&&Mw(a)&&a.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const t=[];let r=new Ie;return e.forEach(a=>{const l=a?.insert;if(l)if(typeof l=="string"){const c=l.split(`
`);c.slice(0,-1).forEach(m=>{r.insert(m,a.attributes),t.push({type:"block",delta:r,attributes:a.attributes??{}}),r=new Ie});const d=c[c.length-1];d&&r.insert(d,a.attributes)}else{const c=Object.keys(l)[0];if(!c)return;this.query(c,Oe.INLINE)?r.push(a):(r.length()&&t.push({type:"block",delta:r,attributes:{}}),r=new Ie,t.push({type:"blockEmbed",key:c,value:l[c],attributes:a.attributes??{}}))}}),r.length()&&t.push({type:"block",delta:r,attributes:{}}),t}createBlock(e,t){let r;const a={};Object.entries(e).forEach(d=>{let[m,p]=d;this.query(m,Oe.BLOCK&Oe.BLOT)!=null?r=m:a[m]=p});const l=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(l,t||void 0);const c=l.length();return Object.entries(a).forEach(d=>{let[m,p]=d;l.formatAt(0,c,m,p)}),l}}function ly(n,e,t){t.reduce((r,a)=>{const l=Ds.Op.length(a);let c=a.attributes||{};if(a.insert!=null){if(typeof a.insert=="string"){const d=a.insert;n.insertAt(r,d);const[m]=n.descendant(cr,r),p=Rs(m);c=Ds.AttributeMap.diff(p,c)||{}}else if(typeof a.insert=="object"){const d=Object.keys(a.insert)[0];if(d==null)return r;if(n.insertAt(r,d,a.insert[d]),n.scroll.query(d,Oe.INLINE)!=null){const[p]=n.descendant(cr,r),v=Rs(p);c=Ds.AttributeMap.diff(v,c)||{}}}}return Object.keys(c).forEach(d=>{n.formatAt(r,l,d,c[d])}),r+l},e)}const _v={scope:Oe.BLOCK,whitelist:["right","center","justify"]},$9=new Li("align","align",_v),xN=new ai("align","ql-align",_v),EN=new Uo("align","text-align",_v);class wN extends Uo{value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(a=>`00${parseInt(a,10).toString(16)}`.slice(-2)).join("")}`):t}}const G9=new ai("color","ql-color",{scope:Oe.INLINE}),xv=new wN("color","color",{scope:Oe.INLINE}),K9=new ai("background","ql-bg",{scope:Oe.INLINE}),Ev=new wN("background","background-color",{scope:Oe.INLINE});class Cl extends Nl{static create(e){const t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${Dm(this.code(e,t))}
</pre>`}}class Tr extends Xn{static TAB="  ";static register(){le.register(Cl)}}class wv extends Er{}wv.blotName="code";wv.tagName="CODE";Tr.blotName="code-block";Tr.className="ql-code-block";Tr.tagName="DIV";Cl.blotName="code-block-container";Cl.className="ql-code-block-container";Cl.tagName="DIV";Cl.allowedChildren=[Tr];Tr.allowedChildren=[si,oi,Zs];Tr.requiredContainer=Cl;const Tv={scope:Oe.BLOCK,whitelist:["rtl"]},TN=new Li("direction","dir",Tv),AN=new ai("direction","ql-direction",Tv),SN=new Uo("direction","direction",Tv),NN={scope:Oe.INLINE,whitelist:["serif","monospace"]},CN=new ai("font","ql-font",NN);class Y9 extends Uo{value(e){return super.value(e).replace(/["']/g,"")}}const RN=new Y9("font","font-family",NN),IN=new ai("size","ql-size",{scope:Oe.INLINE,whitelist:["small","large","huge"]}),jN=new Uo("size","font-size",{scope:Oe.INLINE,whitelist:["10px","18px","32px"]}),Q9=Oa("quill:keyboard"),X9=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Lm extends Pi{static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!t[r]!==e[r]&&t[r]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=Z9(e);if(a==null){Q9.warn("Attempted to add invalid keyboard binding",a);return}typeof t=="function"&&(t={handler:t}),typeof r=="function"&&(r={handler:r}),(Array.isArray(a.key)?a.key:[a.key]).forEach(c=>{const d={...a,key:c,...t,...r};this.bindings[d.key]=this.bindings[d.key]||[],this.bindings[d.key].push(d)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const a=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(V=>Lm.match(e,V));if(a.length===0)return;const l=le.find(e.target,!0);if(l&&l.scroll!==this.quill.scroll)return;const c=this.quill.getSelection();if(c==null||!this.quill.hasFocus())return;const[d,m]=this.quill.getLine(c.index),[p,v]=this.quill.getLeaf(c.index),[x,E]=c.length===0?[p,v]:this.quill.getLeaf(c.index+c.length),A=p instanceof Wf?p.value().slice(0,v):"",S=x instanceof Wf?x.value().slice(E):"",O={collapsed:c.length===0,empty:c.length===0&&d.length()<=1,format:this.quill.getFormat(c),line:d,offset:m,prefix:A,suffix:S,event:e};a.some(V=>{if(V.collapsed!=null&&V.collapsed!==O.collapsed||V.empty!=null&&V.empty!==O.empty||V.offset!=null&&V.offset!==O.offset)return!1;if(Array.isArray(V.format)){if(V.format.every(F=>O.format[F]==null))return!1}else if(typeof V.format=="object"&&!Object.keys(V.format).every(F=>V.format[F]===!0?O.format[F]!=null:V.format[F]===!1?O.format[F]==null:mo(V.format[F],O.format[F])))return!1;return V.prefix!=null&&!V.prefix.test(O.prefix)||V.suffix!=null&&!V.suffix.test(O.suffix)?!1:V.handler.call(this,c,O,V)!==!0})&&e.preventDefault()})}handleBackspace(e,t){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let a={};const[l]=this.quill.getLine(e.index);let c=new Ie().retain(e.index-r).delete(r);if(t.offset===0){const[d]=this.quill.getLine(e.index-1);if(d&&!(d.statics.blotName==="block"&&d.length()<=1)){const p=l.formats(),v=this.quill.getFormat(e.index-1,1);if(a=Ds.AttributeMap.diff(p,v)||{},Object.keys(a).length>0){const x=new Ie().retain(e.index+l.length()-2).retain(1,a);c=c.compose(x)}}}this.quill.updateContents(c,le.sources.USER),this.quill.focus()}handleDelete(e,t){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let a={};const[l]=this.quill.getLine(e.index);let c=new Ie().retain(e.index).delete(r);if(t.offset>=l.length()-1){const[d]=this.quill.getLine(e.index+1);if(d){const m=l.formats(),p=this.quill.getFormat(e.index,1);a=Ds.AttributeMap.diff(m,p)||{},Object.keys(a).length>0&&(c=c.retain(d.length()-1).retain(1,a))}}this.quill.updateContents(c,le.sources.USER),this.quill.focus()}handleDeleteRange(e){Av({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){const r=Object.keys(t.format).reduce((l,c)=>(this.quill.scroll.query(c,Oe.BLOCK)&&!Array.isArray(t.format[c])&&(l[c]=t.format[c]),l),{}),a=new Ie().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(e.index+1,le.sources.SILENT),this.quill.focus()}}const W9={bindings:{bold:cy("bold"),italic:cy("italic"),underline:cy("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",le.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",le.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,e){e.format.indent!=null?this.quill.format("indent","-1",le.sources.USER):e.format.list!=null&&this.quill.format("list",!1,le.sources.USER)}},"indent code-block":Pw(!0),"outdent code-block":Pw(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,le.sources.USER)}},tab:{key:"Tab",handler(n,e){if(e.format.table)return!0;this.quill.history.cutoff();const t=new Ie().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(t,le.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,le.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,le.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,e){const t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(n.index,n.length,t,le.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){const[e,t]=this.quill.getLine(n.index),r={...e.formats(),list:"checked"},a=new Ie().retain(n.index).insert(`
`,r).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(n.index+1,le.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,e){const[t,r]=this.quill.getLine(n.index),a=new Ie().retain(n.index).insert(`
`,e.format).retain(t.length()-r-1).retain(1,{header:null});this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(n.index+1,le.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){const e=this.quill.getModule("table");if(e){const[t,r,a,l]=e.getTable(n),c=J9(t,r,a,l);if(c==null)return;let d=t.offset();if(c<0){const m=new Ie().retain(d).insert(`
`);this.quill.updateContents(m,le.sources.USER),this.quill.setSelection(n.index+1,n.length,le.sources.SILENT)}else if(c>0){d+=t.length();const m=new Ie().retain(d).insert(`
`);this.quill.updateContents(m,le.sources.USER),this.quill.setSelection(d,le.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,e){const{event:t,line:r}=e,a=r.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(a-1,le.sources.USER):this.quill.setSelection(a+r.length(),le.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,e){if(this.quill.scroll.query("list")==null)return!0;const{length:t}=e.prefix,[r,a]=this.quill.getLine(n.index);if(a>t)return!0;let l;switch(e.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(n.index," ",le.sources.USER),this.quill.history.cutoff();const c=new Ie().retain(n.index-a).delete(t+1).retain(r.length()-2-a).retain(1,{list:l});return this.quill.updateContents(c,le.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-t,le.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){const[e,t]=this.quill.getLine(n.index);let r=2,a=e;for(;a!=null&&a.length()<=1&&a.formats()["code-block"];)if(a=a.prev,r-=1,r<=0){const l=new Ie().retain(n.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(l,le.sources.USER),this.quill.setSelection(n.index-1,le.sources.SILENT),!1}return!0}},"embed left":hf("ArrowLeft",!1),"embed left shift":hf("ArrowLeft",!0),"embed right":hf("ArrowRight",!1),"embed right shift":hf("ArrowRight",!0),"table down":Uw(!1),"table up":Uw(!0)}};Lm.DEFAULTS=W9;function Pw(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(e,t){let{event:r}=t;const a=this.quill.scroll.query("code-block"),{TAB:l}=a;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,l,le.sources.USER),this.quill.setSelection(e.index+l.length,le.sources.SILENT);return}const c=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:d,length:m}=e;c.forEach((p,v)=>{n?(p.insertAt(0,l),v===0?d+=l.length:m+=l.length):p.domNode.textContent.startsWith(l)&&(p.deleteAt(0,l.length),v===0?d-=l.length:m-=l.length)}),this.quill.update(le.sources.USER),this.quill.setSelection(d,m,le.sources.SILENT)}}}function hf(n,e){return{key:n,shiftKey:e,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:a}=r;n==="ArrowRight"&&(a+=r.length+1);const[l]=this.quill.getLeaf(a);return l instanceof us?(n==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,le.sources.USER):this.quill.setSelection(r.index-1,le.sources.USER):e?this.quill.setSelection(r.index,r.length+1,le.sources.USER):this.quill.setSelection(r.index+r.length+1,le.sources.USER),!1):!0}}}function cy(n){return{key:n[0],shortKey:!0,handler(e,t){this.quill.format(n,!t.format[n],le.sources.USER)}}}function Uw(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){const r=n?"prev":"next",a=t.line,l=a.parent[r];if(l!=null){if(l.statics.blotName==="table-row"){let c=l.children.head,d=a;for(;d.prev!=null;)d=d.prev,c=c.next;const m=c.offset(this.quill.scroll)+Math.min(t.offset,c.length()-1);this.quill.setSelection(m,0,le.sources.USER)}}else{const c=a.table()[r];c!=null&&(n?this.quill.setSelection(c.offset(this.quill.scroll)+c.length()-1,0,le.sources.USER):this.quill.setSelection(c.offset(this.quill.scroll),0,le.sources.USER))}return!1}}}function Z9(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=bc(n);else return null;return n.shortKey&&(n[X9]=n.shortKey,delete n.shortKey),n}function Av(n){let{quill:e,range:t}=n;const r=e.getLines(t);let a={};if(r.length>1){const l=r[0].formats(),c=r[r.length-1].formats();a=Ds.AttributeMap.diff(c,l)||{}}e.deleteText(t,le.sources.USER),Object.keys(a).length>0&&e.formatLine(t.index,1,a,le.sources.USER),e.setSelection(t.index,le.sources.SILENT)}function J9(n,e,t,r){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?r===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const e7=/font-weight:\s*normal/,t7=["P","OL","UL"],Vw=n=>n&&t7.includes(n.tagName),n7=n=>{Array.from(n.querySelectorAll("br")).filter(e=>Vw(e.previousElementSibling)&&Vw(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},r7=n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(e7)).forEach(e=>{const t=n.createDocumentFragment();t.append(...e.childNodes),e.parentNode?.replaceChild(t,e)})};function s7(n){n.querySelector('[id^="docs-internal-guid-"]')&&(r7(n),n7(n))}const i7=/\bmso-list:[^;]*ignore/i,a7=/\bmso-list:[^;]*\bl(\d+)/i,o7=/\bmso-list:[^;]*\blevel(\d+)/i,l7=(n,e)=>{const t=n.getAttribute("style"),r=t?.match(a7);if(!r)return null;const a=Number(r[1]),l=t?.match(o7),c=l?Number(l[1]):1,d=new RegExp(`@list l${a}:level${c}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),m=e.match(d),p=m&&m[1]==="bullet"?"bullet":"ordered";return{id:a,indent:c,type:p,element:n}},c7=n=>{const e=Array.from(n.querySelectorAll("[style*=mso-list]")),t=[],r=[];e.forEach(c=>{(c.getAttribute("style")||"").match(i7)?t.push(c):r.push(c)}),t.forEach(c=>c.parentNode?.removeChild(c));const a=n.documentElement.innerHTML,l=r.map(c=>l7(c,a)).filter(c=>c);for(;l.length;){const c=[];let d=l.shift();for(;d;)c.push(d),d=l.length&&l[0]?.element===d.element.nextElementSibling&&l[0].id===d.id?l.shift():null;const m=document.createElement("ul");c.forEach(x=>{const E=document.createElement("li");E.setAttribute("data-list",x.type),x.indent>1&&E.setAttribute("class",`ql-indent-${x.indent-1}`),E.innerHTML=x.element.innerHTML,m.appendChild(E)});const p=c[0]?.element,{parentNode:v}=p??{};p&&v?.replaceChild(m,p),c.slice(1).forEach(x=>{let{element:E}=x;v?.removeChild(E)})}};function u7(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&c7(n)}const h7=[u7,s7],d7=n=>{n.documentElement&&h7.forEach(e=>{e(n)})},f7=Oa("quill:clipboard"),m7=[[Node.TEXT_NODE,N7],[Node.TEXT_NODE,Bw],["br",_7],[Node.ELEMENT_NODE,Bw],[Node.ELEMENT_NODE,b7],[Node.ELEMENT_NODE,v7],[Node.ELEMENT_NODE,A7],["li",w7],["ol, ul",T7],["pre",x7],["tr",S7],["b",uy("bold")],["i",uy("italic")],["strike",uy("strike")],["style",E7]],g7=[$9,TN].reduce((n,e)=>(n[e.keyName]=e,n),{}),qw=[EN,Ev,xv,SN,RN,jN].reduce((n,e)=>(n[e.keyName]=e,n),{});class p7 extends Pi{static DEFAULTS={matchers:[]};constructor(e,t){super(e,t),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],m7.concat(this.options.matchers??[]).forEach(r=>{let[a,l]=r;this.addMatcher(a,l)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:r}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a[Tr.blotName])return new Ie().insert(r||"",{[Tr.blotName]:a[Tr.blotName]});if(!t)return new Ie().insert(r||"",a);const l=this.convertHTML(t);return Dh(l,`
`)&&(l.ops[l.ops.length-1].attributes==null||a.table)?l.compose(new Ie().retain(l.length()-1).delete(1)):l}normalizeHTML(e){d7(e)}convertHTML(e){const t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);const r=t.body,a=new WeakMap,[l,c]=this.prepareMatching(r,a);return Sv(this.quill.scroll,r,l,c,a)}dangerouslyPasteHTML(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:le.sources.API;if(typeof e=="string"){const a=this.convert({html:e,text:""});this.quill.setContents(a,t),this.quill.setSelection(0,le.sources.SILENT)}else{const a=this.convert({html:t,text:""});this.quill.updateContents(new Ie().retain(e).concat(a),r),this.quill.setSelection(e+a.length(),le.sources.SILENT)}}onCaptureCopy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:a,text:l}=this.onCopy(r,t);e.clipboardData?.setData("text/plain",l),e.clipboardData?.setData("text/html",a),t&&Av({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const t=this.quill.getSelection(!0);if(t==null)return;const r=e.clipboardData?.getData("text/html");let a=e.clipboardData?.getData("text/plain");if(!r&&!a){const c=e.clipboardData?.getData("text/uri-list");c&&(a=this.normalizeURIList(c))}const l=Array.from(e.clipboardData?.files||[]);if(!r&&l.length>0){this.quill.uploader.upload(t,l);return}if(r&&l.length>0){const c=new DOMParser().parseFromString(r,"text/html");if(c.body.childElementCount===1&&c.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(t,l);return}}this.onPaste(t,{html:r,text:a})}onCopy(e){const t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:r,html:a}=t;const l=this.quill.getFormat(e.index),c=this.convert({text:r,html:a},l);f7.log("onPaste",c,{text:r,html:a});const d=new Ie().retain(e.index).delete(e.length).concat(c);this.quill.updateContents(d,le.sources.USER),this.quill.setSelection(d.length()-e.length,le.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){const r=[],a=[];return this.matchers.forEach(l=>{const[c,d]=l;switch(c){case Node.TEXT_NODE:a.push(d);break;case Node.ELEMENT_NODE:r.push(d);break;default:Array.from(e.querySelectorAll(c)).forEach(m=>{t.has(m)?t.get(m)?.push(d):t.set(m,[d])});break}}),[r,a]}}function Rl(n,e,t,r){return r.query(e)?n.reduce((a,l)=>{if(!l.insert)return a;if(l.attributes&&l.attributes[e])return a.push(l);const c=t?{[e]:t}:{};return a.insert(l.insert,{...c,...l.attributes})},new Ie):n}function Dh(n,e){let t="";for(let r=n.ops.length-1;r>=0&&t.length<e.length;--r){const a=n.ops[r];if(typeof a.insert!="string")break;t=a.insert+t}return t.slice(-1*e.length)===e}function yo(n,e){if(!(n instanceof Element))return!1;const t=e.query(n);return t&&t.prototype instanceof us?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}function y7(n,e){return n.previousElementSibling&&n.nextElementSibling&&!yo(n.previousElementSibling,e)&&!yo(n.nextElementSibling,e)}const df=new WeakMap;function ON(n){return n==null?!1:(df.has(n)||(n.tagName==="PRE"?df.set(n,!0):df.set(n,ON(n.parentNode))),df.get(n))}function Sv(n,e,t,r,a){return e.nodeType===e.TEXT_NODE?r.reduce((l,c)=>c(e,l,n),new Ie):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((l,c)=>{let d=Sv(n,c,t,r,a);return c.nodeType===e.ELEMENT_NODE&&(d=t.reduce((m,p)=>p(c,m,n),d),d=(a.get(c)||[]).reduce((m,p)=>p(c,m,n),d)),l.concat(d)},new Ie):new Ie}function uy(n){return(e,t,r)=>Rl(t,n,!0,r)}function v7(n,e,t){const r=Li.keys(n),a=ai.keys(n),l=Uo.keys(n),c={};return r.concat(a).concat(l).forEach(d=>{let m=t.query(d,Oe.ATTRIBUTE);m!=null&&(c[m.attrName]=m.value(n),c[m.attrName])||(m=g7[d],m!=null&&(m.attrName===d||m.keyName===d)&&(c[m.attrName]=m.value(n)||void 0),m=qw[d],m!=null&&(m.attrName===d||m.keyName===d)&&(m=qw[d],c[m.attrName]=m.value(n)||void 0))}),Object.entries(c).reduce((d,m)=>{let[p,v]=m;return Rl(d,p,v,t)},e)}function b7(n,e,t){const r=t.query(n);if(r==null)return e;if(r.prototype instanceof us){const a={},l=r.value(n);if(l!=null)return a[r.blotName]=l,new Ie().insert(a,r.formats(n,t))}else if(r.prototype instanceof fh&&!Dh(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return Rl(e,r.blotName,r.formats(n,t),t);return e}function _7(n,e){return Dh(e,`
`)||e.insert(`
`),e}function x7(n,e,t){const r=t.query("code-block"),a=r&&"formats"in r&&typeof r.formats=="function"?r.formats(n,t):!0;return Rl(e,"code-block",a,t)}function E7(){return new Ie}function w7(n,e,t){const r=t.query(n);if(r==null||r.blotName!=="list"||!Dh(e,`
`))return e;let a=-1,l=n.parentNode;for(;l!=null;)["OL","UL"].includes(l.tagName)&&(a+=1),l=l.parentNode;return a<=0?e:e.reduce((c,d)=>d.insert?d.attributes&&typeof d.attributes.indent=="number"?c.push(d):c.insert(d.insert,{indent:a,...d.attributes||{}}):c,new Ie)}function T7(n,e,t){const r=n;let a=r.tagName==="OL"?"ordered":"bullet";const l=r.getAttribute("data-checked");return l&&(a=l==="true"?"checked":"unchecked"),Rl(e,"list",a,t)}function Bw(n,e,t){if(!Dh(e,`
`)){if(yo(n,t)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&n.nextSibling){let r=n.nextSibling;for(;r!=null;){if(yo(r,t))return e.insert(`
`);const a=t.query(r);if(a&&a.prototype instanceof Os)return e.insert(`
`);r=r.firstChild}}}return e}function A7(n,e,t){const r={},a=n.style||{};return a.fontStyle==="italic"&&(r.italic=!0),a.textDecoration==="underline"&&(r.underline=!0),a.textDecoration==="line-through"&&(r.strike=!0),(a.fontWeight?.startsWith("bold")||parseInt(a.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((l,c)=>{let[d,m]=c;return Rl(l,d,m,t)},e),parseFloat(a.textIndent||0)>0?new Ie().insert("	").concat(e):e}function S7(n,e,t){const r=n.parentElement?.tagName==="TABLE"?n.parentElement:n.parentElement?.parentElement;if(r!=null){const l=Array.from(r.querySelectorAll("tr")).indexOf(n)+1;return Rl(e,"table",l,t)}return e}function N7(n,e,t){let r=n.data;if(n.parentElement?.tagName==="O:P")return e.insert(r.trim());if(!ON(n)){if(r.trim().length===0&&r.includes(`
`)&&!y7(n,t))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(n.previousSibling==null&&n.parentElement!=null&&yo(n.parentElement,t)||n.previousSibling instanceof Element&&yo(n.previousSibling,t))&&(r=r.replace(/^ /,"")),(n.nextSibling==null&&n.parentElement!=null&&yo(n.parentElement,t)||n.nextSibling instanceof Element&&yo(n.nextSibling,t))&&(r=r.replace(/ $/,"")),r=r.replaceAll(""," ")}return e.insert(r)}class C7 extends Pi{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,t){super(e,t),this.quill.on(le.events.EDITOR_CHANGE,(r,a,l,c)=>{r===le.events.SELECTION_CHANGE?a&&c!==le.sources.SILENT&&(this.currentRange=a):r===le.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||c===le.sources.USER?this.record(a,l):this.transform(a)),this.currentRange=t0(this.currentRange,a))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(e,t){if(this.stack[e].length===0)return;const r=this.stack[e].pop();if(!r)return;const a=this.quill.getContents(),l=r.delta.invert(a);this.stack[t].push({delta:l,range:t0(r.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,le.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,t){if(e.ops.length===0)return;this.stack.redo=[];let r=e.invert(t),a=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const c=this.stack.undo.pop();c&&(r=r.compose(c.delta),a=c.range)}else this.lastRecorded=l;r.length()!==0&&(this.stack.undo.push({delta:r,range:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){zw(this.stack.undo,e),zw(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,le.sources.USER);else{const t=I7(this.quill.scroll,e.delta);this.quill.setSelection(t,le.sources.USER)}}}function zw(n,e){let t=e;for(let r=n.length-1;r>=0;r-=1){const a=n[r];n[r]={delta:t.transform(a.delta,!0),range:a.range&&t0(a.range,t)},t=a.delta.transform(t),n[r].delta.length()===0&&n.splice(r,1)}}function R7(n,e){const t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(r=>n.query(r,Oe.BLOCK)!=null):!1}function I7(n,e){const t=e.reduce((a,l)=>a+(l.delete||0),0);let r=e.length()-t;return R7(n,e)&&(r-=1),r}function t0(n,e){if(!n)return n;const t=e.transformPosition(n.index),r=e.transformPosition(n.index+n.length);return{index:t,length:r-t}}class DN extends Pi{constructor(e,t){super(e,t),e.root.addEventListener("drop",r=>{r.preventDefault();let a=null;if(document.caretRangeFromPoint)a=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const c=document.caretPositionFromPoint(r.clientX,r.clientY);a=document.createRange(),a.setStart(c.offsetNode,c.offset),a.setEnd(c.offsetNode,c.offset)}const l=a&&e.selection.normalizeNative(a);if(l){const c=e.selection.normalizedToRange(l);r.dataTransfer?.files&&this.upload(c,r.dataTransfer.files)}})}upload(e,t){const r=[];Array.from(t).forEach(a=>{a&&this.options.mimetypes?.includes(a.type)&&r.push(a)}),r.length>0&&this.options.handler.call(this,e,r)}}DN.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,e){if(!this.quill.scroll.query("image"))return;const t=e.map(r=>new Promise(a=>{const l=new FileReader;l.onload=()=>{a(l.result)},l.readAsDataURL(r)}));Promise.all(t).then(r=>{const a=r.reduce((l,c)=>l.insert({image:c}),new Ie().retain(n.index).delete(n.length));this.quill.updateContents(a,Ce.sources.USER),this.quill.setSelection(n.index+r.length,Ce.sources.SILENT)})}};const j7=["insertText","insertReplacementText"];class O7 extends Pi{constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(le.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){Av({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Ie().retain(e.index).insert(t,r),le.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,le.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!j7.includes(e.inputType))return;const t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;const r=D7(e);if(r==null)return;const a=this.quill.selection.normalizeNative(t),l=a?this.quill.selection.normalizedToRange(a):null;l&&this.replaceText(l,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function D7(n){return typeof n.data=="string"?n.data:n.dataTransfer?.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}const L7=/Mac/i.test(navigator.platform),k7=100,M7=n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||L7&&n.key==="a"&&n.ctrlKey===!0);class P7 extends Pi{isListening=!1;selectionChangeDeadline=0;constructor(e,t){super(e,t),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,t){let{line:r,event:a}=t;if(!(r instanceof ni)||!r.uiNode)return!0;const l=getComputedStyle(r.domNode).direction==="rtl";return l&&a.key!=="ArrowRight"||!l&&a.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(a.shiftKey?1:0),le.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&M7(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+k7,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const t=e.getRangeAt(0);if(t.collapsed!==!0||t.startOffset!==0)return;const r=this.quill.scroll.find(t.startContainer);if(!(r instanceof ni)||!r.uiNode)return;const a=document.createRange();a.setStartAfter(r.uiNode),a.setEndAfter(r.uiNode),e.removeAllRanges(),e.addRange(a)}}le.register({"blots/block":Xn,"blots/block/embed":Os,"blots/break":oi,"blots/container":Nl,"blots/cursor":Zs,"blots/embed":bv,"blots/inline":Er,"blots/scroll":F9,"blots/text":si,"modules/clipboard":p7,"modules/history":C7,"modules/keyboard":Lm,"modules/uploader":DN,"modules/input":O7,"modules/uiNode":P7});class U7 extends ai{add(e,t){let r=0;if(t==="+1"||t==="-1"){const a=this.value(e)||0;r=t==="+1"?a+1:a-1}else typeof t=="number"&&(r=t);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}}const V7=new U7("indent","ql-indent",{scope:Oe.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class q7 extends Xn{static blotName="blockquote";static tagName="blockquote"}class B7 extends Xn{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class Lh extends Nl{}Lh.blotName="list-container";Lh.tagName="OL";class kh extends Xn{static create(e){const t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){le.register(Lh)}constructor(e,t){super(e,t);const r=t.ownerDocument.createElement("span"),a=l=>{if(!e.isEnabled())return;const c=this.statics.formats(t,e);c==="checked"?(this.format("list","unchecked"),l.preventDefault()):c==="unchecked"&&(this.format("list","checked"),l.preventDefault())};r.addEventListener("mousedown",a),r.addEventListener("touchstart",a),this.attachUI(r)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}}kh.blotName="list";kh.tagName="LI";Lh.allowedChildren=[kh];kh.requiredContainer=Lh;class Nv extends Er{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class z7 extends Nv{static blotName="italic";static tagName=["EM","I"]}class Zf extends Er{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return LN(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}}function LN(n,e){const t=document.createElement("a");t.href=n;const r=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(r)>-1}class H7 extends Er{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class F7 extends Nv{static blotName="strike";static tagName=["S","STRIKE"]}class $7 extends Er{static blotName="underline";static tagName="U"}class G7 extends bv{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const Hw=["alt","height","width"];let K7=class extends us{static blotName="image";static tagName="IMG";static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return Hw.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return LN(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){Hw.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}};const Fw=["height","width"];class Y7 extends Os{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return Fw.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}static sanitize(e){return Zf.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){Fw.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const $u=new ai("code-token","hljs",{scope:Oe.INLINE});class Na extends Er{static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(Tr.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,r){super(e,t,r),$u.add(this.domNode,r)}format(e,t){e!==Na.blotName?super.format(e,t):t?$u.add(this.domNode,t):($u.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),$u.value(this.domNode)||this.unwrap()}}Na.blotName="code-token";Na.className="ql-token";class Is extends Tr{static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),Na.blotName,!1),super.replaceWith(e,t)}}class Ju extends Cl{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===Is.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,t)}))}formatAt(e,t,r,a){r===Is.blotName&&(this.forceNext=!0),super.formatAt(e,t,r,a)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const a=`${Array.from(this.domNode.childNodes).filter(c=>c!==this.uiNode).map(c=>c.textContent).join(`
`)}
`,l=Is.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==a){if(a.trim().length>0||this.cachedText==null){const c=this.children.reduce((m,p)=>m.concat(bN(p,!1)),new Ie),d=e(a,l);c.diff(d).reduce((m,p)=>{let{retain:v,attributes:x}=p;return v?(x&&Object.keys(x).forEach(E=>{[Is.blotName,Na.blotName].includes(E)&&this.formatAt(m,v,E,x[E])}),m+v):m},0)}this.cachedText=a,this.forceNext=!1}}html(e,t){const[r]=this.children.find(e);return`<pre data-language="${r?Is.formats(r.domNode):"plain"}">
${Dm(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const t=Is.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}Ju.allowedChildren=[Is];Is.requiredContainer=Ju;Is.allowedChildren=[Na,Zs,si,oi];const Q7=(n,e,t)=>{if(typeof n.versionString=="string"){const r=n.versionString.split(".")[0];if(parseInt(r,10)>=11)return n.highlight(t,{language:e}).value}return n.highlight(e,t).value};class kN extends Pi{static register(){le.register(Na,!0),le.register(Is,!0),le.register(Ju,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,a)=>{let{key:l}=a;return r[l]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(le.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof Ju))return;const t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:a,label:l}=r;const c=t.ownerDocument.createElement("option");c.textContent=l,c.setAttribute("value",a),t.appendChild(c)}),t.addEventListener("change",()=>{e.format(Is.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=Is.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(le.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(le.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(Ju):[e]).forEach(l=>{l.highlight(this.highlightBlot,t)}),this.quill.update(le.sources.SILENT),r!=null&&this.quill.setSelection(r,le.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return Dm(e).split(`
`).reduce((a,l,c)=>(c!==0&&a.insert(`
`,{[Tr.blotName]:t}),a.insert(l)),new Ie);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(Tr.className),r.innerHTML=Q7(this.options.hljs,t,e),Sv(this.quill.scroll,r,[(a,l)=>{const c=$u.value(a);return c?l.compose(new Ie().retain(l.length(),{[Na.blotName]:c})):l}],[(a,l)=>a.data.split(`
`).reduce((c,d,m)=>(m!==0&&c.insert(`
`,{[Tr.blotName]:t}),c.insert(d)),l)],new WeakMap)}}kN.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Js extends Xn{static blotName="table";static tagName="TD";static create(e){const t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",Cv()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===Js.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class vl extends Nl{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),t=this.children.tail.formats(),r=this.next.children.head.formats(),a=this.next.children.tail.formats();return e.table===t.table&&e.table===r.table&&e.table===a.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;const r=t.formats(),a=t.next.formats();if(r.table!==a.table){const l=this.splitAfter(t);l&&l.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class To extends Nl{static blotName="table-body";static tagName="TBODY"}class Jf extends Nl{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(vl),t=e.reduce((r,a)=>Math.max(a.children.length,r),0);e.forEach(r=>{new Array(t-r.children.length).fill(0).forEach(()=>{let a;r.children.head!=null&&(a=Js.formats(r.children.head.domNode));const l=this.scroll.create(Js.blotName,a);r.appendChild(l),l.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){const[t]=this.descendant(To);t==null||t.children.head==null||t.children.forEach(r=>{const a=r.children.at(e);a?.remove()})}insertColumn(e){const[t]=this.descendant(To);t==null||t.children.head==null||t.children.forEach(r=>{const a=r.children.at(e),l=Js.formats(r.children.head.domNode),c=this.scroll.create(Js.blotName,l);r.insertBefore(c,a)})}insertRow(e){const[t]=this.descendant(To);if(t==null||t.children.head==null)return;const r=Cv(),a=this.scroll.create(vl.blotName);t.children.head.children.forEach(()=>{const c=this.scroll.create(Js.blotName,r);a.appendChild(c)});const l=t.children.at(e);t.insertBefore(a,l)}rows(){const e=this.children.head;return e==null?[]:e.children.map(t=>t)}}Jf.allowedChildren=[To];To.requiredContainer=Jf;To.allowedChildren=[vl];vl.requiredContainer=To;vl.allowedChildren=[Js];Js.requiredContainer=vl;function Cv(){return`row-${Math.random().toString(36).slice(2,6)}`}class X7 extends Pi{static register(){le.register(Js),le.register(vl),le.register(To),le.register(Jf)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Jf).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(le.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(le.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const t=e.offset();e.remove(),this.quill.update(le.sources.USER),this.quill.setSelection(t,le.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[t,r]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==Js.blotName)return[null,null,null,-1];const a=t.parent;return[a.parent.parent,a,t,r]}insertColumn(e){const t=this.quill.getSelection();if(!t)return;const[r,a,l]=this.getTable(t);if(l==null)return;const c=l.cellOffset();r.insertColumn(c+e),this.quill.update(le.sources.USER);let d=a.rowOffset();e===0&&(d+=1),this.quill.setSelection(t.index+d,t.length,le.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const t=this.quill.getSelection();if(!t)return;const[r,a,l]=this.getTable(t);if(l==null)return;const c=a.rowOffset();r.insertRow(c+e),this.quill.update(le.sources.USER),e>0?this.quill.setSelection(t,le.sources.SILENT):this.quill.setSelection(t.index+a.children.length,t.length,le.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){const r=this.quill.getSelection();if(r==null)return;const a=new Array(e).fill(0).reduce(l=>{const c=new Array(t).fill(`
`).join("");return l.insert(c,{table:Cv()})},new Ie().retain(r.index));this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(r.index,le.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(le.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(le.events.TEXT_CHANGE,(r,a,l)=>{l===le.sources.USER&&this.balanceTables()}),!0):!1)})}}const $w=Oa("quill:toolbar");class Rv extends Pi{constructor(e,t){if(super(e,t),Array.isArray(this.options.container)){const r=document.createElement("div");r.setAttribute("role","toolbar"),W7(r,this.options.container),e.container?.parentNode?.insertBefore(r,e.container),this.container=r}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){$w.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{const a=this.options.handlers?.[r];a&&this.addHandler(r,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(le.events.EDITOR_CHANGE,()=>{const[r]=this.quill.selection.getRange();this.update(r)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(a=>a.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){$w.warn("ignoring attaching to nonexistent format",t,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,a=>{let l;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const d=e.options[e.selectedIndex];d.hasAttribute("selected")?l=!1:l=d.value||!1}else e.classList.contains("ql-active")?l=!1:l=e.value||!e.hasAttribute("value"),a.preventDefault();this.quill.focus();const[c]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,l);else if(this.quill.scroll.query(t).prototype instanceof us){if(l=prompt(`Enter ${t}`),!l)return;this.quill.updateContents(new Ie().retain(c.index).delete(c.length).insert({[t]:l}),le.sources.USER)}else this.quill.format(t,l,le.sources.USER);this.update(c)}),this.controls.push([t,e])}update(e){const t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[a,l]=r;if(l.tagName==="SELECT"){let c=null;if(e==null)c=null;else if(t[a]==null)c=l.querySelector("option[selected]");else if(!Array.isArray(t[a])){let d=t[a];typeof d=="string"&&(d=d.replace(/"/g,'\\"')),c=l.querySelector(`option[value="${d}"]`)}c==null?(l.value="",l.selectedIndex=-1):c.selected=!0}else if(e==null)l.classList.remove("ql-active"),l.setAttribute("aria-pressed","false");else if(l.hasAttribute("value")){const c=t[a],d=c===l.getAttribute("value")||c!=null&&c.toString()===l.getAttribute("value")||c==null&&!l.getAttribute("value");l.classList.toggle("ql-active",d),l.setAttribute("aria-pressed",d.toString())}else{const c=t[a]!=null;l.classList.toggle("ql-active",c),l.setAttribute("aria-pressed",c.toString())}})}}Rv.DEFAULTS={};function Gw(n,e,t){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),t!=null?(r.value=t,r.setAttribute("aria-label",`${e}: ${t}`)):r.setAttribute("aria-label",e),n.appendChild(r)}function W7(n,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{const r=document.createElement("span");r.classList.add("ql-formats"),t.forEach(a=>{if(typeof a=="string")Gw(r,a);else{const l=Object.keys(a)[0],c=a[l];Array.isArray(c)?Z7(r,l,c):Gw(r,l,c)}}),n.appendChild(r)})}function Z7(n,e,t){const r=document.createElement("select");r.classList.add(`ql-${e}`),t.forEach(a=>{const l=document.createElement("option");a!==!1?l.setAttribute("value",String(a)):l.setAttribute("selected","selected"),r.appendChild(l)}),n.appendChild(r)}Rv.DEFAULTS={container:null,handlers:{clean(){const n=this.quill.getSelection();if(n!=null)if(n.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,Oe.INLINE)!=null&&this.quill.format(t,!1,le.sources.USER)})}else this.quill.removeFormat(n.index,n.length,le.sources.USER)},direction(n){const{align:e}=this.quill.getFormat();n==="rtl"&&e==null?this.quill.format("align","right",le.sources.USER):!n&&e==="right"&&this.quill.format("align",!1,le.sources.USER),this.quill.format("direction",n,le.sources.USER)},indent(n){const e=this.quill.getSelection(),t=this.quill.getFormat(e),r=parseInt(t.indent||0,10);if(n==="+1"||n==="-1"){let a=n==="+1"?1:-1;t.direction==="rtl"&&(a*=-1),this.quill.format("indent",r+a,le.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,le.sources.USER)},list(n){const e=this.quill.getSelection(),t=this.quill.getFormat(e);n==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,le.sources.USER):this.quill.format("list","unchecked",le.sources.USER):this.quill.format("list",n,le.sources.USER)}}};const J7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',eP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',tP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',nP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',rP='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',sP='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',iP='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',aP='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Kw='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',oP='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',lP='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',cP='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',uP='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',hP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',dP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',fP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',mP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',gP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',pP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',yP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',vP='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',bP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',_P='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',xP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',EP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',wP='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',TP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',AP='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',SP='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',NP='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',CP='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',RP='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',IP='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',gh={align:{"":J7,center:eP,right:tP,justify:nP},background:rP,blockquote:sP,bold:iP,clean:aP,code:Kw,"code-block":Kw,color:oP,direction:{"":lP,rtl:cP},formula:uP,header:{1:hP,2:dP,3:fP,4:mP,5:gP,6:pP},italic:yP,image:vP,indent:{"+1":bP,"-1":_P},link:xP,list:{bullet:EP,check:wP,ordered:TP},script:{sub:AP,super:SP},strike:NP,table:CP,underline:RP,video:IP},jP='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let Yw=0;function Qw(n,e){n.setAttribute(e,`${n.getAttribute(e)!=="true"}`)}class km{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Qw(this.label,"aria-expanded"),Qw(this.options,"aria-hidden")}buildItem(e){const t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&t.setAttribute("data-value",r),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",a=>{switch(a.key){case"Enter":this.selectItem(t,!0),a.preventDefault();break;case"Escape":this.escape(),a.preventDefault();break}}),t}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=jP,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${Yw}`,Yw+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{const r=this.buildItem(t);e.appendChild(r),t.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}}class MN extends km{constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);const r=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=a:r.style.fill=a)}}class PN extends km{constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=t[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const OP=n=>{const{overflowY:e}=getComputedStyle(n,null);return e!=="visible"&&e!=="clip"};class UN{constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,OP(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const a=this.boundsContainer.getBoundingClientRect(),l=this.root.getBoundingClientRect();let c=0;if(l.right>a.right&&(c=a.right-l.right,this.root.style.left=`${t+c}px`),l.left<a.left&&(c=a.left-l.left,this.root.style.left=`${t+c}px`),l.bottom>a.bottom){const d=l.bottom-l.top,m=e.bottom-e.top+d;this.root.style.top=`${r-m}px`,this.root.classList.add("ql-flip")}return c}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const DP=[!1,"center","right","justify"],LP=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],kP=[!1,"serif","monospace"],MP=["1","2","3",!1],PP=["small",!1,"large","huge"];class Mh extends Yc{constructor(e,t){super(e,t);const r=a=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(a.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(l=>{l.container.contains(a.target)||l.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(l=>{if(l.startsWith("ql-")&&(l=l.slice(3),t[l]!=null))if(l==="direction")r.innerHTML=t[l][""]+t[l].rtl;else if(typeof t[l]=="string")r.innerHTML=t[l];else{const c=r.value||"";c!=null&&t[l][c]&&(r.innerHTML=t[l][c])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(a=>{if(a.classList.contains("ql-align")&&(a.querySelector("option")==null&&Mu(a,DP),typeof t.align=="object"))return new PN(a,t.align);if(a.classList.contains("ql-background")||a.classList.contains("ql-color")){const l=a.classList.contains("ql-background")?"background":"color";return a.querySelector("option")==null&&Mu(a,LP,l==="background"?"#ffffff":"#000000"),new MN(a,t[l])}return a.querySelector("option")==null&&(a.classList.contains("ql-font")?Mu(a,kP):a.classList.contains("ql-header")?Mu(a,MP):a.classList.contains("ql-size")&&Mu(a,PP)),new km(a)});const r=()=>{this.pickers.forEach(a=>{a.update()})};this.quill.on(Ce.events.EDITOR_CHANGE,r)}}Mh.DEFAULTS=wo({},Yc.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class VN extends UN{constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,Ce.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,Ce.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=UP(e);case"formula":{if(!e)break;const t=this.quill.getSelection(!0);if(t!=null){const r=t.index+t.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,Ce.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",Ce.sources.USER),this.quill.setSelection(r+2,Ce.sources.USER)}break}}this.textbox.value="",this.hide()}}function UP(n){let e=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:n}function Mu(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const a=document.createElement("option");r===t?a.setAttribute("selected","selected"):a.setAttribute("value",String(r)),n.appendChild(a)})}const VP=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class qP extends VN{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,t){super(e,t),this.quill.on(Ce.events.EDITOR_CHANGE,(r,a,l,c)=>{if(r===Ce.events.SELECTION_CHANGE)if(a!=null&&a.length>0&&c===Ce.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const d=this.quill.getLines(a.index,a.length);if(d.length===1){const m=this.quill.getBounds(a);m!=null&&this.position(m)}else{const m=d[d.length-1],p=this.quill.getIndex(m),v=Math.min(m.length()-1,a.index+a.length-p),x=this.quill.getBounds(new yl(p,v));x!=null&&this.position(x)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Ce.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){const t=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",t!==0&&(r.style.marginLeft=`${-1*t-r.offsetWidth/2}px`),t}}class qN extends Mh{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=VP),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new qP(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),gh),this.buildPickers(e.container.querySelectorAll("select"),gh))}}qN.DEFAULTS=wo({},Mh.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1,le.sources.USER)}}}}});const BP=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class zP extends VN{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,Ce.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(Ce.events.SELECTION_CHANGE,(e,t,r)=>{if(e!=null){if(e.length===0&&r===Ce.sources.USER){const[a,l]=this.quill.scroll.descendant(Zf,e.index);if(a!=null){this.linkRange=new yl(e.index-l,a.length());const c=Zf.formats(a.domNode);this.preview.textContent=c,this.preview.setAttribute("href",c),this.show();const d=this.quill.getBounds(this.linkRange);d!=null&&this.position(d);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class BN extends Mh{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=BP),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),gh),this.buildPickers(e.container.querySelectorAll("select"),gh),this.tooltip=new zP(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,r)=>{e.handlers.link.call(e,!r.format.link)}))}}BN.DEFAULTS=wo({},Mh.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){const e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);const{tooltip:r}=this.quill.theme;r.edit("link",t)}else this.quill.format("link",!1,le.sources.USER)}}}}});le.register({"attributors/attribute/direction":TN,"attributors/class/align":xN,"attributors/class/background":K9,"attributors/class/color":G9,"attributors/class/direction":AN,"attributors/class/font":CN,"attributors/class/size":IN,"attributors/style/align":EN,"attributors/style/background":Ev,"attributors/style/color":xv,"attributors/style/direction":SN,"attributors/style/font":RN,"attributors/style/size":jN},!0);le.register({"formats/align":xN,"formats/direction":AN,"formats/indent":V7,"formats/background":Ev,"formats/color":xv,"formats/font":CN,"formats/size":IN,"formats/blockquote":q7,"formats/code-block":Tr,"formats/header":B7,"formats/list":kh,"formats/bold":Nv,"formats/code":wv,"formats/italic":z7,"formats/link":Zf,"formats/script":H7,"formats/strike":F7,"formats/underline":$7,"formats/formula":G7,"formats/image":K7,"formats/video":Y7,"modules/syntax":kN,"modules/table":X7,"modules/toolbar":Rv,"themes/bubble":qN,"themes/snow":BN,"ui/icons":gh,"ui/picker":km,"ui/icon-picker":PN,"ui/color-picker":MN,"ui/tooltip":UN},!0);class Il extends Ei.Component{constructor(e){super(e),this.editingAreaRef=P.createRef(),this.containerRef=P.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(r,a,l,c)=>{r==="text-change"?this.onEditorChangeText?.(this.editor.root.innerHTML,a,c,this.unprivilegedEditor):r==="selection-change"&&this.onEditorChangeSelection?.(a,c,this.unprivilegedEditor)};const t=this.isControlled()?e.value:e.defaultValue;this.value=t??""}validateProps(e){if(Ei.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Ei.Children.count(e.children)&&Ei.Children.only(e.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,t){if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){const r=this.getEditorContents(),a=e.value??"";this.isEqualValue(a,r)||this.setEditorContents(this.editor,a)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(r=>!mo(e[r],this.props[r]))}shouldComponentRegenerate(e){return this.dirtyProps.some(t=>!mo(e[t],this.props[t]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,t){if(this.editor&&this.shouldComponentRegenerate(e)){const r=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:r,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){const{delta:r,selection:a}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const l=this.editor;l.setContents(r),Xw(()=>this.setEditorSelection(l,a))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const e=this.props.modules?.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const r=this.containerRef.current?.querySelector(".ql-toolbar");r&&r.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,t){const r=new le(e,t);return t.tabIndex!=null&&this.setEditorTabIndex(r,t.tabIndex),this.hookEditor(r),r}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,t){return this.isDelta(e)&&this.isDelta(t)?mo(e.ops,t.ops):mo(e,t)}setEditorContents(e,t){this.value=t;const r=this.getEditorSelection();typeof t=="string"?e.setContents(e.clipboard.convert({html:t})):e.setContents(t),Xw(()=>this.setEditorSelection(e,r))}setEditorSelection(e,t){if(this.selection=t,t){const r=e.getLength();t.index=Math.max(0,Math.min(t.index,r-1)),t.length=Math.max(0,Math.min(t.length,r-1-t.index)),e.setSelection(t)}}setEditorTabIndex(e,t){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=t)}setEditorReadOnly(e,t){t?e.disable():e.enable()}makeUnprivilegedEditor(e){const t=e;return{getHTML:()=>t.root.innerHTML,getSemanticHTML:t.getSemanticHTML.bind(t),getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:t}=this.props,{generation:r}=this.state,a={key:r,ref:this.editingAreaRef};return Ei.Children.count(e)?Ei.cloneElement(Ei.Children.only(e),a):t?Ei.createElement("pre",{...a}):Ei.createElement("div",{...a})}render(){return Ei.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,t,r,a){if(!this.editor)return;const l=this.isDelta(this.value)?a.getContents():a.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=l,this.props.onChange?.(e,t,r,a))}onEditorChangeSelection(e,t,r){if(!this.editor)return;const a=this.getEditorSelection(),l=!a&&e,c=a&&!e;mo(e,a)||(this.selection=e,this.props.onChangeSelection?.(e,t,r),l?this.props.onFocus?.(e,t,r):c&&this.props.onBlur?.(a,t,r))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}Il.displayName="React Quill";Il.Quill=le;Il.defaultProps={theme:"snow",modules:{},readOnly:!1};function Xw(n){Promise.resolve().then(n)}const HP={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},FP=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],$P=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0),[a,l]=P.useState(!1),[c,d]=P.useState(null),[m,p]=P.useState({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""});P.useEffect(()=>{v()},[]);const v=async()=>{r(!0);try{const S=Br(mt(Ee,"news"),ii("timestamp","desc")),R=(await An(S)).docs.map(V=>({id:V.id,...V.data()}));e(R)}catch(S){console.error("Error fetching news:",S)}finally{r(!1)}},x=async S=>{if(window.confirm("Are you sure you want to delete this news item?"))try{await jh(Fe(Ee,"news",S)),v()}catch(O){console.error("Error deleting news:",O),alert("Failed to delete news item.")}},E=async S=>{S.preventDefault();try{const O=m.affectedCurrencies.split(",").map(R=>R.trim().toUpperCase()).filter(R=>R);c?await ur(Fe(Ee,"news",c),{title:m.title,impact:m.impact,content:m.content,image:m.image,affectedCurrencies:O,timestamp:ml()}):await wl(mt(Ee,"news"),{title:m.title,impact:m.impact,content:m.content,image:m.image,affectedCurrencies:O,timestamp:ml()}),l(!1),d(null),p({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""}),v()}catch(O){console.error("Error saving news:",O),alert("Failed to save news item.")}},A=S=>{p({title:S.title,impact:S.impact,content:S.content,image:S.image,affectedCurrencies:S.affectedCurrencies?S.affectedCurrencies.join(", "):""}),d(S.id),l(!0)};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage News"}),f.jsx(xt,{onClick:()=>{l(!a),a&&(d(null),p({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""}))},children:a?"Cancel":"Post New Alert"})]}),a&&f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:c?"Edit Market Update":"New Market Update"}),f.jsxs("form",{onSubmit:E,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:S=>p({...m,title:S.target.value}),placeholder:"e.g., NFP Beats Expectations"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Impact Level"}),f.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.impact,onChange:S=>p({...m,impact:S.target.value}),children:[f.jsx("option",{value:"Low",children:"Low (Yellow)"}),f.jsx("option",{value:"Medium",children:"Medium (Orange)"}),f.jsx("option",{value:"High",children:"High (Red)"})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Content/Summary"}),f.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:f.jsx(Il,{theme:"snow",value:m.content,onChange:S=>p({...m,content:S}),modules:HP,formats:FP,className:"h-96 mb-12"})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Image URL (Optional)"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.image,onChange:S=>p({...m,image:S.target.value}),placeholder:"https://..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Affected Currencies (comma separated)"}),f.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.affectedCurrencies,onChange:S=>p({...m,affectedCurrencies:S.target.value}),placeholder:"USD, EUR, JPY"})]})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsx(xt,{type:"submit",variant:"primary",children:c?"Update News":"Publish News"})})]})]}),f.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-800",children:[f.jsx("thead",{className:"bg-gray-900/50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Title"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Impact"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-800",children:t?f.jsx("tr",{children:f.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-400",children:"Loading data..."})}):n.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-400",children:"No news posted yet."})}):n.map(S=>f.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.timestamp?.seconds?new Date(S.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-medium",children:S.title}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${S.impact==="High"?"bg-red-500/20 text-red-400":S.impact==="Medium"?"bg-orange-500/20 text-orange-400":"bg-green-500/20 text-green-400"}`,children:S.impact})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[f.jsx("button",{onClick:()=>A(S),className:"text-primary hover:text-primary/80 transition-colors mr-4",children:"Edit"}),f.jsx("button",{onClick:()=>x(S.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Delete"})]})]},S.id))})]})})})]})},GP={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},KP=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],YP=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0),[a,l]=P.useState(!1),[c,d]=P.useState(null),[m,p]=P.useState({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}),[v,x]=P.useState({});P.useEffect(()=>{E();const R=wh(Le,async V=>{if(V)try{const F=Fe(Ee,"users",V.uid),Y=await dr(F);Y.exists()&&x(Y.data())}catch(F){console.error("Error fetching profile:",F)}});return()=>R()},[]);const E=async()=>{r(!0);try{const R=Br(mt(Ee,"analysis"),ii("timestamp","desc")),F=(await An(R)).docs.map(Y=>({id:Y.id,...Y.data()}));e(F)}catch(R){console.error("Error fetching analysis:",R)}finally{r(!1)}},A=async R=>{if(window.confirm("Are you sure you want to delete this analysis?"))try{await jh(Fe(Ee,"analysis",R)),E()}catch(V){console.error("Error deleting post:",V),alert("Failed to delete post.")}},S=async R=>{R.preventDefault();const V={...m,...v,timestamp:ml()};try{c?await ur(Fe(Ee,"analysis",c),V):await wl(mt(Ee,"analysis"),V),l(!1),d(null),p({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}),E()}catch(F){console.error("Error saving post:",F),alert("Failed to save analysis.")}},O=R=>{p({title:R.title,pair:R.pair,direction:R.direction,content:R.content,image:R.image,analysisType:R.analysisType||"Technical Analysis"}),d(R.id),l(!0)};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage Analysis"}),f.jsx(xt,{onClick:()=>{l(!a),a&&(d(null),p({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}))},children:a?"Cancel":"New Analysis"})]}),a&&f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:c?"Edit Analysis":"Post Technical Breakdown"}),f.jsxs("form",{onSubmit:S,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Pair / Asset"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none uppercase",value:m.pair,onChange:R=>p({...m,pair:R.target.value}),placeholder:"e.g. GBP/JPY"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Direction"}),f.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.direction,onChange:R=>p({...m,direction:R.target.value}),children:[f.jsx("option",{value:"Neutral",children:"Neutral (Gray)"}),f.jsx("option",{value:"Bullish",children:"Bullish (Green)"}),f.jsx("option",{value:"Bearish",children:"Bearish (Red)"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analysis Type"}),f.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.analysisType,onChange:R=>p({...m,analysisType:R.target.value}),children:[f.jsx("option",{value:"Technical Analysis",children:"Technical Analysis"}),f.jsx("option",{value:"Fundamental Analysis",children:"Fundamental Analysis"}),f.jsx("option",{value:"Sentiment Analysis",children:"Sentiment Analysis"})]})]})]}),f.jsx("div",{className:"grid grid-cols-1 gap-4",children:f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Image URL (Chart)"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.image,onChange:R=>p({...m,image:R.target.value}),placeholder:"https://..."})]})}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:R=>p({...m,title:R.target.value}),placeholder:"e.g. Double Top formation on 4H"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analysis Content"}),f.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:f.jsx(Il,{theme:"snow",value:m.content,onChange:R=>p({...m,content:R}),modules:GP,formats:KP,className:"h-96 mb-12"})})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsx(xt,{type:"submit",variant:"primary",children:c?"Update Analysis":"Post Analysis"})})]})]}),f.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-800",children:[f.jsx("thead",{className:"bg-gray-900/50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Pair"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Direction"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Title"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-800",children:t?f.jsx("tr",{children:f.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-400",children:"Loading data..."})}):n.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-400",children:"No analysis posted yet."})}):n.map(R=>f.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R.timestamp?.seconds?new Date(R.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-bold",children:R.pair}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${R.direction==="Bullish"?"bg-green-500/20 text-green-400":R.direction==="Bearish"?"bg-red-500/20 text-red-400":"bg-gray-700 text-gray-300"}`,children:R.direction})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white max-w-xs truncate",children:R.title}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[f.jsx("button",{onClick:()=>O(R),className:"text-primary hover:text-primary/80 transition-colors mr-4",children:"Edit"}),f.jsx("button",{onClick:()=>A(R.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Delete"})]})]},R.id))})]})})})]})},zN={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},HN=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],QP=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!1),[a,l]=P.useState({name:"",description:"",image:""}),[c,d]=P.useState(null),[m,p]=P.useState(!0);P.useEffect(()=>{v()},[]);const v=async()=>{p(!0);try{const A=await An(mt(Ee,"paths"));e(A.docs.map(S=>({id:S.id,...S.data()})))}catch(A){console.error("Error fetching paths:",A)}finally{p(!1)}},x=async A=>{A.preventDefault();try{c?await ur(Fe(Ee,"paths",c),a):await wl(mt(Ee,"paths"),{...a,createdAt:ml()}),r(!1),d(null),l({name:"",description:"",image:""}),v()}catch(S){console.error("Error saving path:",S),alert("Failed to save path")}},E=async A=>{if(window.confirm("Delete this path?"))try{await jh(Fe(Ee,"paths",A)),v()}catch(S){console.error("Error deleting path:",S)}};return f.jsxs("div",{className:"animate-fade-in",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-white",children:"Academy Paths"}),f.jsx(xt,{onClick:()=>{r(!t),t&&(d(null),l({name:"",description:"",image:""}))},children:t?"Cancel":"New Path"})]}),t&&f.jsx("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8",children:f.jsxs("form",{onSubmit:x,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Path Name"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.name,onChange:A=>l({...a,name:A.target.value}),placeholder:"e.g. Technical Analysis"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),f.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-24",value:a.description,onChange:A=>l({...a,description:A.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Cover Image URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.image,onChange:A=>l({...a,image:A.target.value})})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx(xt,{type:"submit",variant:"primary",children:c?"Update Path":"Create Path"})})]})}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(A=>f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden group",children:[f.jsxs("div",{className:"h-40 bg-gray-900 relative",children:[A.image&&f.jsx("img",{src:A.image,alt:A.name,className:"w-full h-full object-cover"}),f.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>{l(A),d(A.id),r(!0)},className:"bg-primary/80 p-1 rounded text-white hover:bg-primary",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),f.jsx("button",{onClick:()=>E(A.id),className:"bg-red-500/80 p-1 rounded text-white hover:bg-red-600",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("h3",{className:"font-bold text-white text-lg",children:A.name}),f.jsx("p",{className:"text-gray-400 text-sm mt-1 line-clamp-2",children:A.description})]})]},A.id))})]})},XP=()=>{const[n,e]=P.useState("paths"),[t,r]=P.useState([]),[a,l]=P.useState([]),[c,d]=P.useState(null),[m,p]=P.useState(!0),[v,x]=P.useState(!1),[E,A]=P.useState(null),[S,O]=P.useState({title:"",path:"",description:"",image:"",level:"Beginner",instructorName:"Forex Volcano",instructorBio:"",instructorImage:""});P.useEffect(()=>{R()},[]);const R=async()=>{p(!0);try{const ie=(await An(mt(Ee,"paths"))).docs.map(k=>k.data().name);l(ie);const ve=Br(mt(Ee,"courses"),ii("order","asc")),L=await An(ve);r(L.docs.map(k=>({id:k.id,...k.data()})))}catch(Q){console.error("Error fetching data:",Q)}finally{p(!1)}},V=async Q=>{Q.preventDefault();try{E?await ur(Fe(Ee,"courses",E),S):await wl(mt(Ee,"courses"),{...S,order:t.length+1,createdAt:ml()}),x(!1),A(null),O({title:"",path:"",description:"",image:"",level:"Beginner",instructorName:"Forex Volcano",instructorBio:"",instructorImage:""}),R()}catch(ie){console.error("Error saving course:",ie),alert("Failed to save course")}},F=Q=>{O({title:Q.title,description:Q.description,path:Q.path||"",image:Q.image,level:Q.level||"Beginner",instructorName:Q.instructorName||"Forex Volcano",instructorBio:Q.instructorBio||"",instructorImage:Q.instructorImage||""}),A(Q.id),x(!0)},Y=async Q=>{if(window.confirm("Delete this course? All lessons inside it might become orphaned."))try{await jh(Fe(Ee,"courses",Q)),R(),c?.id===Q&&d(null)}catch(ie){console.error("Error deleting course:",ie)}};return c?f.jsx(WP,{course:c,onBack:()=>d(null)}):f.jsxs("div",{children:[f.jsxs("div",{className:"flex space-x-6 mb-8 border-b border-gray-800",children:[f.jsx("button",{onClick:()=>e("paths"),className:`pb-4 px-2 font-medium transition-colors ${n==="paths"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"1. Manage Paths"}),f.jsx("button",{onClick:()=>e("courses"),className:`pb-4 px-2 font-medium transition-colors ${n==="courses"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"2. Manage Courses"})]}),n==="paths"?f.jsx(QP,{}):f.jsxs("div",{className:"animate-fade-in",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage Courses"}),f.jsx(xt,{onClick:()=>{x(!v),v&&A(null)},children:v?"Cancel":"New Course"})]}),v&&f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:E?"Edit Course":"Create New Course"}),f.jsxs("form",{onSubmit:V,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Course Title"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.title,onChange:Q=>O({...S,title:Q.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Path / Category"}),f.jsxs("select",{required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.path,onChange:Q=>O({...S,path:Q.target.value}),children:[f.jsx("option",{value:"",children:"Select Path..."}),a.map(Q=>f.jsx("option",{value:Q,children:Q},Q))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Level"}),f.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.level,onChange:Q=>O({...S,level:Q.target.value}),children:[f.jsx("option",{children:"Beginner"}),f.jsx("option",{children:"Intermediate"}),f.jsx("option",{children:"Advanced"})]})]})]}),f.jsxs("div",{className:"border-t border-gray-800 pt-4 mt-4",children:[f.jsx("h3",{className:"text-sm font-bold text-primary mb-3",children:"Instructor Details"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Name"}),f.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.instructorName,onChange:Q=>O({...S,instructorName:Q.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Image URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.instructorImage,onChange:Q=>O({...S,instructorImage:Q.target.value})})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Bio"}),f.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-20",value:S.instructorBio,onChange:Q=>O({...S,instructorBio:Q.target.value})})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),f.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:f.jsx(Il,{theme:"snow",value:S.description,onChange:Q=>O({...S,description:Q}),modules:zN,formats:HN,className:"h-48 mb-12"})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Cover Image URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.image,onChange:Q=>O({...S,image:Q.target.value})})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx(xt,{type:"submit",variant:"primary",children:E?"Update Course":"Create Course"})})]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m?f.jsx("div",{className:"text-gray-400",children:"Loading courses..."}):t.map(Q=>f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden group hover:border-gray-600 transition-all",children:[f.jsxs("div",{className:"h-40 bg-gray-900 relative",children:[Q.image&&f.jsx("img",{src:Q.image,alt:Q.title,className:"w-full h-full object-cover"}),f.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[f.jsx("button",{onClick:ie=>{ie.stopPropagation(),F(Q)},className:"bg-primary/80 p-1 rounded text-white hover:bg-primary",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),f.jsx("button",{onClick:ie=>{ie.stopPropagation(),Y(Q.id)},className:"bg-red-500/80 p-1 rounded text-white hover:bg-red-600",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),f.jsxs("div",{className:"p-5",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:Q.title}),Q.path&&f.jsx("span",{className:"bg-gray-800 text-xs text-gray-300 px-2 py-1 rounded",children:Q.path})]}),f.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:Q.description}),f.jsx(xt,{variant:"outline",size:"sm",className:"w-full",onClick:()=>d(Q),children:"Manage Lessons"})]})]},Q.id))})]})]})},WP=({course:n,onBack:e})=>{const[t,r]=P.useState([]),[a,l]=P.useState(!1),[c,d]=P.useState(null),[m,p]=P.useState({title:"",videoUrl:"",content:"",duration:"10 min"}),[v,x]=P.useState(!0);P.useEffect(()=>{E()},[n]);const E=async()=>{x(!0);try{const R=Br(mt(Ee,"courses",n.id,"lessons"),ii("order","asc")),V=await An(R);r(V.docs.map(F=>({id:F.id,...F.data()})))}catch(R){console.error("Error fetching lessons:",R);const V=await An(mt(Ee,"courses",n.id,"lessons"));r(V.docs.map(F=>({id:F.id,...F.data()})))}finally{x(!1)}},A=async R=>{R.preventDefault();try{c?await ur(Fe(Ee,"courses",n.id,"lessons",c),{...m}):await wl(mt(Ee,"courses",n.id,"lessons"),{...m,order:t.length+1,createdAt:ml()}),l(!1),d(null),p({title:"",videoUrl:"",content:"",duration:"10 min"}),E()}catch(V){console.error("Error saving lesson:",V),alert("Failed to save lesson")}},S=R=>{p({title:R.title,videoUrl:R.videoUrl,content:R.content,duration:R.duration}),d(R.id),l(!0)},O=async R=>{if(window.confirm("Delete this lesson?"))try{await jh(Fe(Ee,"courses",n.id,"lessons",R)),E()}catch(V){console.error("Error deleting lesson:",V)}};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[f.jsxs("button",{onClick:e,className:"text-gray-400 hover:text-white flex items-center gap-1",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),f.jsxs("h1",{className:"text-2xl font-bold text-white",children:[f.jsx("span",{className:"text-gray-500 font-normal",children:"Edit Course:"})," ",n.title]})]}),f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsxs("h2",{className:"text-xl font-bold text-white",children:["Lessons (",t.length,")"]}),f.jsx(xt,{onClick:()=>{l(!a),a&&(d(null),p({title:"",videoUrl:"",content:"",duration:"10 min"}))},variant:"secondary",children:a?"Cancel":"Add Lesson"})]}),a&&f.jsx("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:f.jsxs("form",{onSubmit:A,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Lesson Title"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:R=>p({...m,title:R.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Duration"}),f.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.duration,onChange:R=>p({...m,duration:R.target.value}),placeholder:"e.g. 15 min"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Video Embed URL (YouTube/Vimeo)"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.videoUrl,onChange:R=>p({...m,videoUrl:R.target.value}),placeholder:"https://www.youtube.com/embed/..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Lesson Content / Notes"}),f.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:f.jsx(Il,{theme:"snow",value:m.content,onChange:R=>p({...m,content:R}),modules:zN,formats:HN,className:"h-72 mb-12"})})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx(xt,{type:"submit",variant:"primary",children:c?"Update Lesson":"Save Lesson"})})]})}),f.jsxs("div",{className:"space-y-3",children:[v?f.jsx("div",{className:"text-gray-400",children:"Loading lessons..."}):t.map((R,V)=>f.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-gray-800 flex justify-between items-center group hover:border-gray-600",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-800 text-gray-400 font-bold text-sm",children:V+1}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium text-white",children:R.title}),f.jsx("div",{className:"text-xs text-gray-500",children:R.duration})]})]}),f.jsxs("div",{className:"flex items-center gap-3 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>S(R),className:"text-primary hover:text-primary/80 text-sm",children:"Edit"}),f.jsx("button",{onClick:()=>O(R.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Delete"})]})]},R.id)),t.length===0&&!v&&f.jsx("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:"No lessons yet. Start teaching!"})]})]})},ZP=()=>{const[n,e]=P.useState(!0),[t,r]=P.useState(!1),[a,l]=P.useState(null),[c,d]=P.useState({analystName:"",analystImage:"",analystBio:"",twitter:"",linkedin:"",telegram:""});P.useEffect(()=>{const p=wh(Le,async v=>{if(v){l(v);try{const x=Fe(Ee,"users",v.uid),E=await dr(x);if(E.exists()){const A=E.data();d(S=>({...S,analystName:A.analystName||"",analystImage:A.analystImage||"",analystBio:A.analystBio||"",twitter:A.twitter||"",linkedin:A.linkedin||"",telegram:A.telegram||""}))}}catch(x){console.error("Error fetching profile:",x)}}e(!1)});return()=>p()},[]);const m=async p=>{if(p.preventDefault(),!!a){r(!0);try{await Oc(Fe(Ee,"users",a.uid),c,{merge:!0}),alert("Profile updated successfully!")}catch(v){console.error("Error saving profile:",v),alert("Failed to save profile.")}finally{r(!1)}}};return n?f.jsx("div",{className:"text-white",children:"Loading Profile..."}):f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"Analyst Profile Settings"}),f.jsx("div",{className:"bg-surface p-8 rounded-xl border border-gray-800",children:f.jsxs("form",{onSubmit:m,className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx("div",{className:"md:col-span-2",children:f.jsx("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-800 pb-2",children:"Personal Details"})}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analyst Name"}),f.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.analystName,onChange:p=>d({...c,analystName:p.target.value}),placeholder:"e.g. John Doe"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Profile Image URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.analystImage,onChange:p=>d({...c,analystImage:p.target.value}),placeholder:"https://..."})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bio"}),f.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-32 resize-none",value:c.analystBio,onChange:p=>d({...c,analystBio:p.target.value}),placeholder:"Tell us about yourself..."})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pt-6",children:[f.jsx("div",{className:"md:col-span-3",children:f.jsx("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-800 pb-2",children:"Social Connections"})}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Twitter (X) URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.twitter,onChange:p=>d({...c,twitter:p.target.value}),placeholder:"https://twitter.com/..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"LinkedIn URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.linkedin,onChange:p=>d({...c,linkedin:p.target.value}),placeholder:"https://linkedin.com/in/..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Telegram URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.telegram,onChange:p=>d({...c,telegram:p.target.value}),placeholder:"https://t.me/..."})]})]}),f.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-800",children:f.jsx(xt,{type:"submit",variant:"primary",contentClassName:"px-8",children:t?"Saving...":"Save Profile"})})]})})]})},JP=()=>{const{courseId:n}=Pc(),e=ki(),[t,r]=P.useState(null),[a,l]=P.useState([]),[c,d]=P.useState(null),[m,p]=P.useState(!0),[v,x]=P.useState(!0);return P.useEffect(()=>{(async()=>{try{p(!0);const A=await dr(Fe(Ee,"courses",n));if(!A.exists()){alert("Course not found"),e("/dashboard");return}r({id:A.id,...A.data()});const S=Br(mt(Ee,"courses",n,"lessons"),ii("order","asc")),O=await An(S);let R=[];O.empty?R=(await An(mt(Ee,"courses",n,"lessons"))).docs.map(F=>({id:F.id,...F.data()})):R=O.docs.map(V=>({id:V.id,...V.data()})),l(R),R.length>0&&d(R[0])}catch(A){console.error("Error loading course:",A)}finally{p(!1)}})()},[n,e]),m?f.jsx("div",{className:"p-10 text-center text-white",children:"Loading class..."}):t?f.jsxs("div",{className:"flex h-screen bg-background overflow-hidden animate-fade-in",children:[f.jsxs("div",{className:`${v?"w-80":"w-0"} bg-surface border-r border-gray-800 transition-all duration-300 flex flex-col flex-shrink-0 relative`,children:[f.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center",children:[f.jsx("h2",{className:"font-bold text-white truncate max-w-[200px]",children:t.title}),f.jsx("button",{onClick:()=>x(!1),className:"md:hidden text-gray-400",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a.map((E,A)=>f.jsxs("div",{onClick:()=>d(E),className:`p-4 border-b border-gray-800 cursor-pointer transition-colors hover:bg-gray-800/50 flex items-start gap-3
                   ${c?.id===E.id?"bg-primary/10 border-l-4 border-l-primary":"border-l-4 border-l-transparent"}
                 `,children:[f.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-800 text-gray-400 text-xs flex items-center justify-center mt-0.5",children:A+1}),f.jsxs("div",{children:[f.jsx("h4",{className:`text-sm font-medium ${c?.id===E.id?"text-primary":"text-gray-300"}`,children:E.title}),f.jsx("span",{className:"text-xs text-gray-500",children:E.duration||"10 min"})]})]},E.id)),a.length===0&&f.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No lessons available yet."})]}),f.jsx("div",{className:"p-4 border-t border-gray-800",children:f.jsx(Je,{to:"/dashboard",children:f.jsx(xt,{variant:"outline",size:"sm",className:"w-full",children:"Back to Dashboard"})})})]}),f.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[f.jsx("div",{className:"absolute top-4 left-4 z-10",children:f.jsx("button",{onClick:()=>x(!v),className:"bg-surface/80 p-2 rounded-full text-white hover:bg-surface backdrop-blur border border-gray-700 shadow-lg",children:v?f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),c?f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[f.jsx("div",{className:"bg-black aspect-video w-full max-h-[70vh] flex items-center justify-center",children:c.videoUrl?f.jsx("iframe",{src:c.videoUrl,title:c.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):f.jsxs("div",{className:"text-gray-500 text-center",children:[f.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),f.jsx("p",{children:"No video content for this lesson."})]})}),f.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[f.jsx("div",{className:"flex justify-between items-start mb-6",children:f.jsx("h1",{className:"text-2xl font-bold text-white",children:c.title})}),f.jsx("div",{className:"prose prose-invert max-w-none",children:f.jsx("p",{className:"text-gray-300 whitespace-pre-line",children:c.content})})]})]}):f.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"Select a lesson from the sidebar to start."})]})]}):null},eU=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0);return P.useEffect(()=>{(async()=>{try{const c=(await An(mt(Ee,"courses"))).docs.map(m=>m.data()),d={};c.forEach(m=>{const p=m.path||"General";d[p]||(d[p]={name:p,count:0,image:m.image}),d[p].count+=1}),e(Object.values(d))}catch(l){console.error("Error fetching paths:",l)}finally{r(!1)}})()},[]),t?f.jsx("div",{className:"p-10 text-center text-white",children:"Loading Academy..."}):f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 animate-fade-in",children:[f.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"My Academy"}),f.jsx("p",{className:"text-gray-400 mb-10",children:"Choose a learning path to start your journey."}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(a=>f.jsx(Je,{to:`/academy/${encodeURIComponent(a.name)}`,className:"group",children:f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden hover:border-primary transition-all h-full flex flex-col",children:[f.jsxs("div",{className:"h-48 bg-gray-900 relative overflow-hidden",children:[a.image?f.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:f.jsx("svg",{className:"w-12 h-12 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent opacity-80"}),f.jsx("div",{className:"absolute bottom-4 left-4",children:f.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-primary transition-colors",children:a.name})})]}),f.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-between",children:[f.jsxs("p",{className:"text-gray-400",children:[a.count," Course",a.count!==1&&"s"," available"]}),f.jsxs("span",{className:"text-primary mt-4 inline-flex items-center text-sm font-medium",children:["Explore Path ",f.jsx("svg",{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]})]})},a.name))}),n.length===0&&f.jsx("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:f.jsx("p",{className:"text-gray-500",children:"No academy paths available yet."})})]})},tU=()=>{const{path:n}=Pc(),e=decodeURIComponent(n),[t,r]=P.useState([]),[a,l]=P.useState(!0);return P.useEffect(()=>{(async()=>{try{const d=Br(mt(Ee,"courses"),ii("order","asc")),v=(await An(d)).docs.map(x=>({id:x.id,...x.data()})).filter(x=>(x.path||"General")===e);r(v)}catch(d){console.error("Error loading courses:",d)}finally{l(!1)}})()},[e]),a?f.jsx("div",{className:"p-10 text-center text-white",children:"Loading Path..."}):f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 animate-fade-in",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx(Je,{to:"/academy",className:"text-gray-500 hover:text-white mb-4 inline-block",children:" Back to Academy"}),f.jsxs("h1",{className:"text-3xl font-bold text-white",children:[f.jsx("span",{className:"text-primary",children:e})," Courses"]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(c=>f.jsx(Je,{to:`/academy/${encodeURIComponent(e)}/${c.id}`,className:"group",children:f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden hover:border-gray-600 transition-all h-full",children:[f.jsxs("div",{className:"h-48 bg-gray-900 relative",children:[c.image&&f.jsx("img",{src:c.image,alt:c.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute top-2 right-2 bg-black/60 backdrop-blur px-2 py-1 rounded text-xs text-white border border-gray-700",children:c.level})]}),f.jsxs("div",{className:"p-5",children:[f.jsx("h3",{className:"text-lg font-bold text-white mb-2 group-hover:text-primary transition-colors",children:c.title}),f.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:c.description}),f.jsx("span",{className:"text-sm font-medium text-white group-hover:underline",children:"Start Learning "})]})]})},c.id))}),t.length===0&&f.jsx("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:f.jsx("p",{className:"text-gray-500",children:"No courses found in this path."})})]})},nU=()=>{const{path:n,courseId:e}=Pc(),t=ki(),[r,a]=P.useState(null),[l,c]=P.useState([]),[d,m]=P.useState(null),[p,v]=P.useState(!0),[x,E]=P.useState(!0),[A,S]=P.useState([]);return P.useEffect(()=>{(async()=>{if(Le.currentUser&&e){const R=Fe(db,"users",Le.currentUser.uid,"course_progress",e),V=await dr(R);V.exists()&&S(V.data().completedLessonIds||[])}})()},[e]),P.useEffect(()=>{(async()=>{try{v(!0);const R=await dr(Fe(db,"courses",e));if(!R.exists()){alert("Course not found"),t(`/academy/${n}`);return}a({id:R.id,...R.data()});const V=Br(mt(db,"courses",e,"lessons"),ii("order","asc")),F=await An(V);let Y=[];F.empty?Y=(await An(mt(db,"courses",e,"lessons"))).docs.map(ie=>({id:ie.id,...ie.data()})):Y=F.docs.map(Q=>({id:Q.id,...Q.data()})),c(Y),Y.length>0&&m(Y[0])}catch(R){console.error("Error loading course:",R)}finally{v(!1)}})()},[e,t,n]),p?f.jsx("div",{className:"p-10 text-center text-white",children:"Loading class..."}):r?f.jsxs("div",{className:"flex bg-background overflow-hidden animate-fade-in",style:{height:"calc(100vh - 64px)"},children:[f.jsxs("div",{className:`${x?"w-80":"w-0"} bg-surface border-r border-gray-800 transition-all duration-300 flex flex-col flex-shrink-0 relative`,children:[f.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50",children:[f.jsx("h2",{className:"font-bold text-white truncate max-w-[200px]",children:r.title}),f.jsx("button",{onClick:()=>E(!1),className:"md:hidden text-gray-400",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[l.map((O,R)=>f.jsxs("div",{onClick:()=>m(O),className:`p-4 border-b border-gray-800 cursor-pointer transition-colors hover:bg-gray-800/50 flex items-start gap-3
                   ${d?.id===O.id?"bg-primary/10 border-l-4 border-l-primary":"border-l-4 border-l-transparent"}
                 `,children:[f.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-800 text-gray-400 text-xs flex items-center justify-center mt-0.5",children:R+1}),f.jsxs("div",{children:[f.jsx("h4",{className:`text-sm font-medium ${d?.id===O.id?"text-primary":"text-gray-300"}`,children:O.title}),f.jsx("span",{className:"text-xs text-gray-500",children:O.duration||"10 min"})]})]},O.id)),l.length===0&&f.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No lessons available yet."})]}),f.jsx("div",{className:"p-4 border-t border-gray-800",children:f.jsx(Je,{to:`/academy/${n}`,children:f.jsx(Button,{variant:"outline",size:"sm",className:"w-full",children:" Back to Path"})})})]}),f.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[f.jsx("div",{className:"absolute top-4 left-4 z-10",children:f.jsx("button",{onClick:()=>E(!x),className:"bg-surface/80 p-2 rounded-full text-white hover:bg-surface backdrop-blur border border-gray-700 shadow-lg",children:x?f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),d?f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[f.jsx("div",{className:"bg-black aspect-video w-full max-h-[60vh] flex items-center justify-center",children:d.videoUrl?f.jsx("iframe",{src:d.videoUrl,title:d.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):f.jsxs("div",{className:"text-gray-500 text-center",children:[f.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),f.jsx("p",{children:"No video content."})]})}),f.jsxs("div",{className:"max-w-4xl mx-auto p-8 pb-20",children:[f.jsx("div",{className:"flex justify-between items-start mb-6",children:f.jsx("h1",{className:"text-2xl font-bold text-white",children:d.title})}),f.jsx("div",{className:"prose prose-invert max-w-none",children:f.jsx("div",{dangerouslySetInnerHTML:{__html:d.content}})}),(r.instructorName||r.instructorBio)&&f.jsxs("div",{className:"mt-12 border-t border-gray-800 pt-8",children:[f.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Meet Your Instructor"}),f.jsxs("div",{className:"flex items-start gap-6 bg-surface p-6 rounded-xl border border-gray-800",children:[r.instructorImage?f.jsx("img",{src:r.instructorImage,alt:r.instructorName,className:"w-20 h-20 rounded-full object-cover border-2 border-primary"}):f.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-700 flex items-center justify-center text-2xl font-bold text-gray-400",children:r.instructorName?r.instructorName.charAt(0):"I"}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-lg font-bold text-white",children:r.instructorName}),f.jsx("p",{className:"text-gray-400 text-sm whitespace-pre-wrap mt-2",children:r.instructorBio})]})]})]})]})]}):f.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:f.jsx("p",{children:"Select a lesson from the list to start learning."})})]})]}):null},rU=({onPostCreated:n})=>{const[e,t]=P.useState(""),[r,a]=P.useState("public"),[l,c]=P.useState(null),[d,m]=P.useState(!1),p=E=>new Promise((A,S)=>{const O=new FileReader;O.readAsDataURL(E),O.onload=R=>{const V=new Image;V.src=R.target.result,V.onload=()=>{const F=document.createElement("canvas"),Y=800,Q=800;let ie=V.width,ve=V.height;ie>ve?ie>Y&&(ve*=Y/ie,ie=Y):ve>Q&&(ie*=Q/ve,ve=Q),F.width=ie,F.height=ve,F.getContext("2d").drawImage(V,0,0,ie,ve);const k=F.toDataURL("image/jpeg",.7);A(k)},V.onerror=F=>S(F)},O.onerror=R=>S(R)}),v=async E=>{const A=E.target.files[0];if(A)try{const S=await p(A);c(S)}catch(S){console.error("Compression error:",S),alert("Failed to process image.")}},x=async E=>{if(E.preventDefault(),!(!e.trim()&&!l)){m(!0);try{const A={uid:Le.currentUser.uid,content:e.trim(),image:l,privacy:r,likes:[],commentsCount:0,shares:0,createdAt:ml()};await wl(mt(Ee,"posts"),A),t(""),c(null),n&&n()}catch(A){console.error("Error creating post:",A),alert("Failed to post. Please try again.")}finally{m(!1)}}};return f.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 p-4 mb-6 animate-fade-in",children:f.jsxs("div",{className:"flex gap-4",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 flex-shrink-0 overflow-hidden",children:Le.currentUser?.photoURL?f.jsx("img",{src:Le.currentUser.photoURL,alt:"User",className:"h-full w-full object-cover"}):f.jsx("div",{className:"h-full w-full flex items-center justify-center text-xs text-gray-400",children:"You"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("textarea",{value:e,onChange:E=>t(E.target.value),placeholder:"What's on your mind, trader?",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg p-3 text-white focus:outline-none focus:border-primary min-h-[100px] resize-none"}),l&&f.jsxs("div",{className:"mt-2 relative inline-block",children:[f.jsx("img",{src:l,alt:"Preview",className:"h-32 rounded-lg border border-gray-700"}),f.jsx("button",{onClick:()=>c(null),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex justify-between items-center mt-3",children:[f.jsxs("div",{className:"flex gap-2 text-primary",children:[f.jsxs("label",{className:"cursor-pointer hover:bg-gray-800 p-2 rounded-full transition-colors flex items-center gap-2",children:[f.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:v}),f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),f.jsx("span",{className:"text-sm",children:"Photo"})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("select",{value:r,onChange:E=>a(E.target.value),className:"bg-gray-800 text-gray-300 text-sm border border-gray-700 rounded-md py-1 px-2 focus:outline-none",children:[f.jsx("option",{value:"public",children:"Public"}),f.jsx("option",{value:"friends",children:"Friends Only"}),f.jsx("option",{value:"private",children:"Private"})]})})]}),f.jsx(xt,{onClick:x,disabled:d||!e.trim()&&!l,children:d?"Posting...":"Post"})]})]})]})})},sU=({post:n})=>{const[e,t]=P.useState(null),[r,a]=P.useState(n.likes?.includes(Le.currentUser?.uid)),[l,c]=P.useState(n.likes?.length||0),[d,m]=P.useState(!1),[p,v]=P.useState([]),[x,E]=P.useState(""),[A,S]=P.useState(!1);P.useEffect(()=>{(async()=>{if(n.uid){const ie=await dr(Fe(Ee,"users",n.uid));ie.exists()&&t(ie.data())}})()},[n.uid]),P.useEffect(()=>{if(d){const Q=Br(mt(Ee,"posts",n.id,"comments"),ii("createdAt","asc")),ie=Kf(Q,ve=>{v(ve.docs.map(L=>({id:L.id,...L.data()})))});return()=>ie()}},[d,n.id]);const O=async()=>{if(!Le.currentUser)return;const Q=r;a(!Q),c(ve=>Q?ve-1:ve+1);const ie=Fe(Ee,"posts",n.id);Q?await ur(ie,{likes:al(Le.currentUser.uid)}):await ur(ie,{likes:ch(Le.currentUser.uid)})},R=async Q=>{if(Q.preventDefault(),!!x.trim()){S(!0);try{await wl(mt(Ee,"posts",n.id,"comments"),{uid:Le.currentUser.uid,username:Le.currentUser.displayName||"User",content:x.trim(),createdAt:new Date}),await ur(Fe(Ee,"posts",n.id),{commentsCount:(n.commentsCount||0)+1}),E("")}catch(ie){console.error("Error commenting:",ie)}finally{S(!1)}}},V=Q=>{if(!Q)return"Just now";const ie=Q.toDate?Q.toDate():new Date(Q),ve=Math.floor((new Date-ie)/1e3);let L=ve/31536e3;return L>1?Math.floor(L)+"y":(L=ve/2592e3,L>1?Math.floor(L)+"mo":(L=ve/86400,L>1?Math.floor(L)+"d":(L=ve/3600,L>1?Math.floor(L)+"h":(L=ve/60,L>1?Math.floor(L)+"m":Math.floor(ve)+"s"))))},F=e?.username||"Unknown User",Y=e?.avatar_url||`https://ui-avatars.com/api/?name=${F}`;return f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 mb-6 overflow-hidden animate-fade-in",children:[f.jsxs("div",{className:"p-4 flex items-center gap-3",children:[f.jsx(Je,{to:`/profile/${F}`,className:"block h-10 w-10 rounded-full overflow-hidden bg-gray-700",children:f.jsx("img",{src:Y,alt:F,className:"h-full w-full object-cover"})}),f.jsxs("div",{children:[f.jsx(Je,{to:`/profile/${F}`,className:"text-white font-bold hover:underline text-sm block",children:F}),f.jsxs("span",{className:"text-xs text-gray-500",children:[V(n.createdAt),"  ",n.privacy==="public"?"Public":n.privacy==="friends"?"Friends":"Private"]})]})]}),f.jsx("div",{className:"px-4 pb-2",children:f.jsx("p",{className:"text-gray-200 whitespace-pre-wrap",children:n.content})}),n.image&&f.jsx("div",{className:"w-full h-auto mt-2",children:f.jsx("img",{src:n.image,alt:"Post content",className:"w-full h-auto max-h-[500px] object-cover"})}),f.jsx("div",{className:"px-4 py-3 border-t border-gray-800 flex justify-between items-center mt-2",children:f.jsxs("div",{className:"flex gap-6",children:[f.jsxs("button",{onClick:O,className:`flex items-center gap-2 text-sm transition-colors ${r?"text-red-500":"text-gray-400 hover:text-red-500"}`,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${r?"fill-current":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),l>0&&f.jsx("span",{children:l})]}),f.jsxs("button",{onClick:()=>m(!d),className:"flex items-center gap-2 text-sm text-gray-400 hover:text-primary transition-colors",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),f.jsx("span",{children:p.length||n.commentsCount||0})]}),f.jsx("button",{className:"flex items-center gap-2 text-sm text-gray-400 hover:text-green-500 transition-colors",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})}),d&&f.jsxs("div",{className:"bg-gray-900/30 p-4 border-t border-gray-800",children:[f.jsx("div",{className:"space-y-3 mb-4 max-h-60 overflow-y-auto",children:p.map(Q=>f.jsxs("div",{className:"flex gap-2 items-start",children:[f.jsx("div",{className:"h-6 w-6 rounded-full bg-gray-700 flex-shrink-0"}),f.jsxs("div",{className:"bg-gray-800 rounded-lg p-2 text-sm flex-1",children:[f.jsx("span",{className:"font-bold text-white mr-2",children:"Unknown"})," ",f.jsx("span",{className:"text-gray-300",children:Q.content})]})]},Q.id))}),f.jsxs("form",{onSubmit:R,className:"flex gap-2",children:[f.jsx("input",{type:"text",value:x,onChange:Q=>E(Q.target.value),placeholder:"Write a comment...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-primary"}),f.jsx("button",{type:"submit",disabled:A||!x.trim(),className:"text-primary font-medium text-sm disabled:opacity-50",children:"Post"})]})]})]})},iU=()=>{const[n,e]=P.useState("feed"),[t,r]=P.useState([]),[a,l]=P.useState(!0),[c,d]=P.useState([]),[m,p]=P.useState({sent:[],received:[]}),[v,x]=P.useState([]);P.useEffect(()=>{if(!Le.currentUser)return;const S=Kf(Fe(Ee,"users",Le.currentUser.uid),O=>{if(O.exists()){const R=O.data();d(R.friends||[]),p(R.friendRequests||{sent:[],received:[]})}});return()=>S()},[]),P.useEffect(()=>{c&&(async()=>{if(Le.currentUser)try{const O=Br(mt(Ee,"users"),yD(20)),V=(await An(O)).docs.map(F=>({id:F.id,...F.data()})).filter(F=>F.id!==Le.currentUser.uid&&!c.includes(F.id)&&!m.sent?.includes(F.id)&&!m.received?.includes(F.id)).slice(0,5);x(V)}catch(O){console.error("Error fetching suggestions:",O)}})()},[c,m]),P.useEffect(()=>{const S=Br(mt(Ee,"posts"),ii("createdAt","desc")),O=Kf(S,R=>{const F=R.docs.map(Y=>({id:Y.id,...Y.data()})).filter(Y=>Y.uid===Le.currentUser?.uid||Y.privacy==="public"?!0:Y.privacy==="friends"?c.includes(Y.uid):!1);r(F),l(!1)});return()=>O()},[c]);const E=async S=>{try{const O=Fe(Ee,"users",Le.currentUser.uid),R=Fe(Ee,"users",S);await ur(O,{friends:ch(S),"friendRequests.received":al(S)}),await ur(R,{friends:ch(Le.currentUser.uid),"friendRequests.sent":al(Le.currentUser.uid)}),alert("Friend request accepted!")}catch(O){console.error("Error accepting friend:",O)}},A=async S=>{try{const O=Fe(Ee,"users",Le.currentUser.uid),R=Fe(Ee,"users",S);await ur(O,{"friendRequests.received":al(S)}),await ur(R,{"friendRequests.sent":al(Le.currentUser.uid)})}catch(O){console.error("Error rejecting friend:",O)}};return f.jsx("div",{className:"min-h-screen bg-background pt-20 pb-10",children:f.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:"Traders Community"}),f.jsxs("div",{className:"flex space-x-1 bg-surface p-1 rounded-lg border border-gray-800",children:[f.jsx("button",{onClick:()=>e("feed"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="feed"?"bg-primary text-white":"text-gray-400 hover:text-white"}`,children:"Feed"}),f.jsxs("button",{onClick:()=>e("friends"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="friends"?"bg-primary text-white":"text-gray-400 hover:text-white"}`,children:["Friends ",f.jsx("span",{className:"ml-1 bg-gray-800 text-xs px-2 py-0.5 rounded-full",children:c.length})]}),f.jsxs("button",{onClick:()=>e("requests"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="requests"?"bg-primary text-white":"text-gray-400 hover:text-white"}`,children:["Requests ",f.jsx("span",{className:"ml-1 bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:m.received?.length||0})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[f.jsx("div",{className:"hidden lg:block col-span-1",children:f.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 p-6 sticky top-24",children:f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx(Je,{to:`/profile/${Le.currentUser?.displayName}`,className:"h-20 w-20 rounded-full bg-gray-700 overflow-hidden mb-4",children:f.jsx("img",{src:Le.currentUser?.photoURL||"https://ui-avatars.com/api/?name=User",alt:"Me",className:"w-full h-full object-cover"})}),f.jsx("h3",{className:"text-lg font-bold text-white",children:Le.currentUser?.displayName||"Trader"}),f.jsx("div",{className:"w-full border-t border-gray-800 my-4"}),f.jsxs("div",{className:"w-full flex justify-between text-sm mb-2",children:[f.jsx("span",{className:"text-gray-400",children:"Posts"}),f.jsx("span",{className:"text-white font-bold",children:t.filter(S=>S.uid===Le.currentUser?.uid).length})]}),f.jsxs("div",{className:"w-full flex justify-between text-sm",children:[f.jsx("span",{className:"text-gray-400",children:"Friends"}),f.jsx("span",{className:"text-white font-bold",children:c.length})]})]})})}),f.jsxs("div",{className:"col-span-1 lg:col-span-2",children:[n==="feed"&&f.jsxs(f.Fragment,{children:[f.jsx(rU,{}),a?f.jsx("div",{className:"text-center py-10 text-gray-400",children:"Loading community feed..."}):t.length>0?t.map(S=>f.jsx(sU,{post:S},S.id)):f.jsx("div",{className:"text-center py-10 bg-surface rounded-xl border border-gray-800",children:f.jsx("p",{className:"text-gray-400",children:"No posts yet. Be the first to share something!"})})]}),n==="friends"&&f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[f.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Your Friends"}),c.length>0?f.jsx("div",{className:"grid grid-cols-1 gap-4",children:c.map(S=>f.jsx(aU,{userId:S},S))}):f.jsx("p",{className:"text-gray-400",children:"No friends yet. Add people from the suggestions!"})]}),n==="requests"&&f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[f.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Friend Requests"}),m.received?.length>0?f.jsx("div",{className:"space-y-4",children:m.received.map(S=>f.jsx(oU,{userId:S,onAccept:()=>E(S),onReject:()=>A(S)},S))}):f.jsx("p",{className:"text-gray-400",children:"No pending requests."})]})]}),f.jsx("div",{className:"hidden lg:block col-span-1",children:f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6 sticky top-24",children:[f.jsx("h3",{className:"text-white font-bold mb-4",children:"Suggested People"}),f.jsx("div",{className:"space-y-4",children:v.length>0?v.map(S=>f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(Je,{to:`/profile/${S.username}`,className:"flex items-center gap-3 group",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden",children:f.jsx("img",{src:S.avatar_url||`https://ui-avatars.com/api/?name=${S.username}`,alt:S.username,className:"w-full h-full object-cover"})}),f.jsx("div",{className:"max-w-[100px]",children:f.jsx("p",{className:"text-sm font-bold text-white truncate group-hover:underline",children:S.username})})]}),f.jsx(Je,{to:`/profile/${S.username}`,className:"text-primary text-xs hover:underline",children:"View"})]},S.id)):f.jsx("p",{className:"text-xs text-gray-500",children:"No suggestions available right now."})})]})})]})]})})},aU=({userId:n})=>{const[e,t]=P.useState(null);return P.useEffect(()=>{dr(Fe(Ee,"users",n)).then(r=>{r.exists()&&t(r.data())})},[n]),e?f.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Je,{to:`/profile/${e.username}`,className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden",children:f.jsx("img",{src:e.avatar_url||`https://ui-avatars.com/api/?name=${e.username}`,alt:e.username,className:"w-full h-full object-cover"})}),f.jsxs("div",{children:[f.jsx(Je,{to:`/profile/${e.username}`,className:"font-bold text-white hover:underline",children:e.username}),f.jsx("p",{className:"text-xs text-gray-500",children:"Trader"})]})]}),f.jsx(Je,{to:`/profile/${e.username}`,className:"text-xs text-primary border border-primary px-3 py-1 rounded-full hover:bg-primary hover:text-white transition-colors",children:"View Profile"})]}):f.jsx("div",{className:"h-16 bg-gray-800 rounded-lg animate-pulse"})},oU=({userId:n,onAccept:e,onReject:t})=>{const[r,a]=P.useState(null);return P.useEffect(()=>{dr(Fe(Ee,"users",n)).then(l=>{l.exists()&&a(l.data())})},[n]),r?f.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden",children:f.jsx("img",{src:r.avatar_url||`https://ui-avatars.com/api/?name=${r.username}`,alt:r.username,className:"w-full h-full object-cover"})}),f.jsxs("div",{children:[f.jsx("span",{className:"font-bold text-white",children:r.username}),f.jsx("p",{className:"text-xs text-gray-500",children:"Wants to be your friend"})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:e,className:"bg-primary hover:bg-green-600 text-white px-3 py-1 rounded-md text-xs font-bold",children:"Accept"}),f.jsx("button",{onClick:t,className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md text-xs font-bold",children:"Reject"})]})]}):f.jsx("div",{className:"h-16 bg-gray-800 rounded-lg animate-pulse"})},lU=()=>{const{username:n}=Pc(),[e,t]=P.useState(null),[r,a]=P.useState(!0),[l,c]=P.useState(null);P.useEffect(()=>{(async()=>{try{const S=Br(mt(Ee,"users"),LS("username","==",n)),O=await An(S);O.empty?t(null):t({id:O.docs[0].id,...O.docs[0].data()})}catch(S){console.error("Error fetching profile:",S)}finally{a(!1)}})()},[n]),P.useEffect(()=>{if(!Le.currentUser)return;const A=Kf(Fe(Ee,"users",Le.currentUser.uid),S=>{S.exists()&&c(S.data())});return()=>A()},[]);const d=Le.currentUser?.uid===e?.id,m=l?.friends?.includes(e?.id),p=l?.friendRequests?.sent?.includes(e?.id),v=l?.friendRequests?.received?.includes(e?.id),x=async()=>{if(!(!Le.currentUser||!e))try{await ur(Fe(Ee,"users",Le.currentUser.uid),{"friendRequests.sent":ch(e.id)}),await ur(Fe(Ee,"users",e.id),{"friendRequests.received":ch(Le.currentUser.uid)}),alert("Friend request sent!")}catch(A){console.error(A)}},E=async()=>{if(confirm("Are you sure you want to remove this friend?"))try{await ur(Fe(Ee,"users",Le.currentUser.uid),{friends:al(e.id)}),await ur(Fe(Ee,"users",e.id),{friends:al(Le.currentUser.uid)})}catch(A){console.error(A)}};return r?f.jsx("div",{className:"text-center p-20 text-white",children:"Loading Profile..."}):e?f.jsx("div",{className:"min-h-screen bg-background pt-20 px-4 animate-fade-in",children:f.jsxs("div",{className:"max-w-3xl mx-auto bg-surface rounded-xl border border-gray-800 overflow-hidden shadow-2xl",children:[f.jsx("div",{className:"h-32 bg-gradient-to-r from-primary/20 to-secondary/20 relative"}),f.jsxs("div",{className:"px-8 pb-8",children:[f.jsxs("div",{className:"relative -mt-16 mb-6 flex flex-col md:flex-row items-end md:items-end gap-6",children:[f.jsx("div",{className:"h-32 w-32 rounded-full border-4 border-surface bg-gray-800 overflow-hidden",children:f.jsx("img",{src:e.avatar_url||`https://ui-avatars.com/api/?name=${e.username}`,alt:e.username,className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"flex-1 mb-2 text-center md:text-left",children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:e.username}),f.jsxs("p",{className:"text-gray-400 text-sm",children:["Member since ",e.createdAt?new Date(e.createdAt.seconds*1e3).getFullYear():"2024"]})]}),f.jsx("div",{className:"mb-4",children:d?f.jsx("span",{className:"px-4 py-2 bg-gray-700 text-white rounded-lg text-sm",children:"It's You"}):m?f.jsxs("div",{className:"flex gap-2",children:[f.jsx("span",{className:"px-4 py-2 bg-green-500/20 text-green-400 border border-green-500/50 rounded-lg text-sm font-bold",children:"Friends"}),f.jsx("button",{onClick:E,className:"text-red-400 hover:text-red-300 text-xs underline",children:"Unfriend"})]}):p?f.jsx(xt,{disabled:!0,className:"opacity-70",children:"Request Sent"}):v?f.jsx("span",{className:"text-yellow-400 text-sm",children:"Check your requests!"}):f.jsx(xt,{onClick:x,children:"Add Friend"})})]}),f.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[f.jsx("h2",{className:"text-lg font-bold text-white mb-3",children:"About"}),f.jsx("p",{className:"text-gray-300 leading-relaxed whitespace-pre-wrap",children:e.bio||"No bio yet."})]}),f.jsx("div",{className:"mt-8 grid grid-cols-2 gap-4",children:f.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-800 text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-primary",children:e.friends?.length||0}),f.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-widest",children:"Friends"})]})})]})]})}):f.jsx("div",{className:"text-center p-20 text-white",children:"User not found"})},hy=({children:n,adminOnly:e=!1})=>{const[t,r]=P.useState(null),[a,l]=P.useState(!0);return P.useEffect(()=>{const c=wh(Le,d=>{r(d),l(!1)});return()=>c()},[]),a?f.jsx("div",{className:"text-center p-10 pt-32 text-white",children:"Loading..."}):t?n:f.jsx(wR,{to:"/login",replace:!0})};function cU(){return f.jsx(QR,{children:f.jsxs("div",{className:"min-h-screen bg-background text-text font-sans flex flex-col",children:[f.jsx(wD,{}),f.jsx("main",{className:"flex-grow",children:f.jsxs(SR,{children:[f.jsx(mn,{path:"/",element:f.jsx(CD,{})}),f.jsx(mn,{path:"/analysis",element:f.jsx(RD,{})}),f.jsx(mn,{path:"/analysis/:id",element:f.jsx(ID,{})}),f.jsx(mn,{path:"/news",element:f.jsx(OD,{})}),f.jsx(mn,{path:"/news/:id",element:f.jsx(DD,{})}),f.jsx(mn,{path:"/login",element:f.jsx(LD,{})}),f.jsx(mn,{path:"/register",element:f.jsx(kD,{})}),f.jsx(mn,{path:"/community",element:f.jsx(hy,{children:f.jsx(iU,{})})}),f.jsx(mn,{path:"/academy",element:f.jsx(eU,{})}),f.jsx(mn,{path:"/academy/:path",element:f.jsx(tU,{})}),f.jsx(mn,{path:"/academy/:path/:courseId",element:f.jsx(nU,{})}),f.jsx(mn,{path:"/profile/:username",element:f.jsx(lU,{})}),f.jsx(mn,{path:"/dashboard",element:f.jsx(hy,{children:f.jsx(UD,{})})}),f.jsx(mn,{path:"/dashboard/course/:courseId",element:f.jsx(hy,{children:f.jsx(JP,{})})}),f.jsxs(mn,{path:"/admin",element:f.jsx(VD,{}),children:[f.jsx(mn,{index:!0,element:f.jsx(qD,{})}),f.jsx(mn,{path:"news",element:f.jsx($P,{})}),f.jsx(mn,{path:"analysis",element:f.jsx(YP,{})}),f.jsx(mn,{path:"courses",element:f.jsx(XP,{})}),f.jsx(mn,{path:"profile",element:f.jsx(ZP,{})})]})]})}),f.jsx(TD,{})]})})}IC.createRoot(document.getElementById("root")).render(f.jsx(P.StrictMode,{children:f.jsx(cU,{})}))});export default uU();
