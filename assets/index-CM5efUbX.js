var _C=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var lU=_C((os,ls)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function r0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ip={exports:{}},ju={};var Zx;function EC(){if(Zx)return ju;Zx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return ju.Fragment=e,ju.jsx=t,ju.jsxs=t,ju}var Jx;function wC(){return Jx||(Jx=1,Ip.exports=EC()),Ip.exports}var f=wC(),jp={exports:{}},Ge={};var e_;function TC(){if(e_)return Ge;e_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.iterator;function A(q){return q===null||typeof q!="object"?null:(q=E&&q[E]||q["@@iterator"],typeof q=="function"?q:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,R={};function U(q,W,de){this.props=q,this.context=W,this.refs=R,this.updater=de||S}U.prototype.isReactComponent={},U.prototype.setState=function(q,W){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,W,"setState")},U.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function F(){}F.prototype=U.prototype;function Q(q,W,de){this.props=q,this.context=W,this.refs=R,this.updater=de||S}var Y=Q.prototype=new F;Y.constructor=Q,O(Y,U.prototype),Y.isPureReactComponent=!0;var ie=Array.isArray;function ve(){}var L={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function V(q,W,de){var me=de.ref;return{$$typeof:n,type:q,key:W,ref:me!==void 0?me:null,props:de}}function $(q,W){return V(q.type,W,q.props)}function N(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function M(q){var W={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(de){return W[de]})}var C=/\/+/g;function pe(q,W){return typeof q=="object"&&q!==null&&q.key!=null?M(""+q.key):W.toString(36)}function ge(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ve,ve):(q.status="pending",q.then(function(W){q.status==="pending"&&(q.status="fulfilled",q.value=W)},function(W){q.status==="pending"&&(q.status="rejected",q.reason=W)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function H(q,W,de,me,ye){var Ae=typeof q;(Ae==="undefined"||Ae==="boolean")&&(q=null);var De=!1;if(q===null)De=!0;else switch(Ae){case"bigint":case"string":case"number":De=!0;break;case"object":switch(q.$$typeof){case n:case e:De=!0;break;case v:return De=q._init,H(De(q._payload),W,de,me,ye)}}if(De)return ye=ye(q),De=me===""?"."+pe(q,0):me,ie(ye)?(de="",De!=null&&(de=De.replace(C,"$&/")+"/"),H(ye,W,de,"",function(We){return We})):ye!=null&&(N(ye)&&(ye=$(ye,de+(ye.key==null||q&&q.key===ye.key?"":(""+ye.key).replace(C,"$&/")+"/")+De)),W.push(ye)),1;De=0;var je=me===""?".":me+":";if(ie(q))for(var ke=0;ke<q.length;ke++)me=q[ke],Ae=je+pe(me,ke),De+=H(me,W,de,Ae,ye);else if(ke=A(q),typeof ke=="function")for(q=ke.call(q),ke=0;!(me=q.next()).done;)me=me.value,Ae=je+pe(me,ke++),De+=H(me,W,de,Ae,ye);else if(Ae==="object"){if(typeof q.then=="function")return H(ge(q),W,de,me,ye);throw W=String(q),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return De}function ee(q,W,de){if(q==null)return q;var me=[],ye=0;return H(q,me,"","",function(Ae){return W.call(de,Ae,ye++)}),me}function ue(q){if(q._status===-1){var W=q._result;W=W(),W.then(function(de){(q._status===0||q._status===-1)&&(q._status=1,q._result=de)},function(de){(q._status===0||q._status===-1)&&(q._status=2,q._result=de)}),q._status===-1&&(q._status=0,q._result=W)}if(q._status===1)return q._result.default;throw q._result}var xe=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},be={map:ee,forEach:function(q,W,de){ee(q,function(){W.apply(this,arguments)},de)},count:function(q){var W=0;return ee(q,function(){W++}),W},toArray:function(q){return ee(q,function(W){return W})||[]},only:function(q){if(!N(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Ge.Activity=_,Ge.Children=be,Ge.Component=U,Ge.Fragment=t,Ge.Profiler=a,Ge.PureComponent=Q,Ge.StrictMode=r,Ge.Suspense=m,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(q){return L.H.useMemoCache(q)}},Ge.cache=function(q){return function(){return q.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(q,W,de){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var me=O({},q.props),ye=q.key;if(W!=null)for(Ae in W.key!==void 0&&(ye=""+W.key),W)!k.call(W,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&W.ref===void 0||(me[Ae]=W[Ae]);var Ae=arguments.length-2;if(Ae===1)me.children=de;else if(1<Ae){for(var De=Array(Ae),je=0;je<Ae;je++)De[je]=arguments[je+2];me.children=De}return V(q.type,ye,me)},Ge.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:l,_context:q},q},Ge.createElement=function(q,W,de){var me,ye={},Ae=null;if(W!=null)for(me in W.key!==void 0&&(Ae=""+W.key),W)k.call(W,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ye[me]=W[me]);var De=arguments.length-2;if(De===1)ye.children=de;else if(1<De){for(var je=Array(De),ke=0;ke<De;ke++)je[ke]=arguments[ke+2];ye.children=je}if(q&&q.defaultProps)for(me in De=q.defaultProps,De)ye[me]===void 0&&(ye[me]=De[me]);return V(q,Ae,ye)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(q){return{$$typeof:h,render:q}},Ge.isValidElement=N,Ge.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:ue}},Ge.memo=function(q,W){return{$$typeof:p,type:q,compare:W===void 0?null:W}},Ge.startTransition=function(q){var W=L.T,de={};L.T=de;try{var me=q(),ye=L.S;ye!==null&&ye(de,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ve,xe)}catch(Ae){xe(Ae)}finally{W!==null&&de.types!==null&&(W.types=de.types),L.T=W}},Ge.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Ge.use=function(q){return L.H.use(q)},Ge.useActionState=function(q,W,de){return L.H.useActionState(q,W,de)},Ge.useCallback=function(q,W){return L.H.useCallback(q,W)},Ge.useContext=function(q){return L.H.useContext(q)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(q,W){return L.H.useDeferredValue(q,W)},Ge.useEffect=function(q,W){return L.H.useEffect(q,W)},Ge.useEffectEvent=function(q){return L.H.useEffectEvent(q)},Ge.useId=function(){return L.H.useId()},Ge.useImperativeHandle=function(q,W,de){return L.H.useImperativeHandle(q,W,de)},Ge.useInsertionEffect=function(q,W){return L.H.useInsertionEffect(q,W)},Ge.useLayoutEffect=function(q,W){return L.H.useLayoutEffect(q,W)},Ge.useMemo=function(q,W){return L.H.useMemo(q,W)},Ge.useOptimistic=function(q,W){return L.H.useOptimistic(q,W)},Ge.useReducer=function(q,W,de){return L.H.useReducer(q,W,de)},Ge.useRef=function(q){return L.H.useRef(q)},Ge.useState=function(q){return L.H.useState(q)},Ge.useSyncExternalStore=function(q,W,de){return L.H.useSyncExternalStore(q,W,de)},Ge.useTransition=function(){return L.H.useTransition()},Ge.version="19.2.1",Ge}var t_;function s0(){return t_||(t_=1,jp.exports=TC()),jp.exports}var P=s0();const Ei=r0(P);var Op={exports:{}},Ou={},Dp={exports:{}},Lp={};var n_;function AC(){return n_||(n_=1,(function(n){function e(H,ee){var ue=H.length;H.push(ee);e:for(;0<ue;){var xe=ue-1>>>1,be=H[xe];if(0<a(be,ee))H[xe]=ee,H[ue]=be,ue=xe;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ee=H[0],ue=H.pop();if(ue!==ee){H[0]=ue;e:for(var xe=0,be=H.length,q=be>>>1;xe<q;){var W=2*(xe+1)-1,de=H[W],me=W+1,ye=H[me];if(0>a(de,ue))me<be&&0>a(ye,de)?(H[xe]=ye,H[me]=ue,xe=me):(H[xe]=de,H[W]=ue,xe=W);else if(me<be&&0>a(ye,ue))H[xe]=ye,H[me]=ue,xe=me;else break e}}return ee}function a(H,ee){var ue=H.sortIndex-ee.sortIndex;return ue!==0?ue:H.id-ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var m=[],p=[],v=1,_=null,E=3,A=!1,S=!1,O=!1,R=!1,U=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function Y(H){for(var ee=t(p);ee!==null;){if(ee.callback===null)r(p);else if(ee.startTime<=H)r(p),ee.sortIndex=ee.expirationTime,e(m,ee);else break;ee=t(p)}}function ie(H){if(O=!1,Y(H),!S)if(t(m)!==null)S=!0,ve||(ve=!0,M());else{var ee=t(p);ee!==null&&ge(ie,ee.startTime-H)}}var ve=!1,L=-1,k=5,V=-1;function $(){return R?!0:!(n.unstable_now()-V<k)}function N(){if(R=!1,ve){var H=n.unstable_now();V=H;var ee=!0;try{e:{S=!1,O&&(O=!1,F(L),L=-1),A=!0;var ue=E;try{t:{for(Y(H),_=t(m);_!==null&&!(_.expirationTime>H&&$());){var xe=_.callback;if(typeof xe=="function"){_.callback=null,E=_.priorityLevel;var be=xe(_.expirationTime<=H);if(H=n.unstable_now(),typeof be=="function"){_.callback=be,Y(H),ee=!0;break t}_===t(m)&&r(m),Y(H)}else r(m);_=t(m)}if(_!==null)ee=!0;else{var q=t(p);q!==null&&ge(ie,q.startTime-H),ee=!1}}break e}finally{_=null,E=ue,A=!1}ee=void 0}}finally{ee?M():ve=!1}}}var M;if(typeof Q=="function")M=function(){Q(N)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,pe=C.port2;C.port1.onmessage=N,M=function(){pe.postMessage(null)}}else M=function(){U(N,0)};function ge(H,ee){L=U(function(){H(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(H){switch(E){case 1:case 2:case 3:var ee=3;break;default:ee=E}var ue=E;E=ee;try{return H()}finally{E=ue}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ue=E;E=H;try{return ee()}finally{E=ue}},n.unstable_scheduleCallback=function(H,ee,ue){var xe=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?xe+ue:xe):ue=xe,H){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ue+be,H={id:v++,callback:ee,priorityLevel:H,startTime:ue,expirationTime:be,sortIndex:-1},ue>xe?(H.sortIndex=ue,e(p,H),t(m)===null&&H===t(p)&&(O?(F(L),L=-1):O=!0,ge(ie,ue-xe))):(H.sortIndex=be,e(m,H),S||A||(S=!0,ve||(ve=!0,M()))),H},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(H){var ee=E;return function(){var ue=E;E=ee;try{return H.apply(this,arguments)}finally{E=ue}}}})(Lp)),Lp}var r_;function SC(){return r_||(r_=1,Dp.exports=AC()),Dp.exports}var kp={exports:{}},ar={};var s_;function NC(){if(s_)return ar;s_=1;var n=s0();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:m,containerInfo:p,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ar.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ar.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,v)},ar.flushSync=function(m){var p=c.T,v=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=p,r.p=v,r.d.f()}},ar.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},ar.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},ar.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,_=h(v,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:E,fetchPriority:A}):v==="script"&&r.d.X(m,{crossOrigin:_,integrity:E,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ar.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},ar.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,_=h(v,p.crossOrigin);r.d.L(m,v,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ar.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=h(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},ar.requestFormReset=function(m){r.d.r(m)},ar.unstable_batchedUpdates=function(m,p){return m(p)},ar.useFormState=function(m,p,v){return c.H.useFormState(m,p,v)},ar.useFormStatus=function(){return c.H.useHostTransitionStatus()},ar.version="19.2.1",ar}var i_;function CC(){if(i_)return kp.exports;i_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kp.exports=NC(),kp.exports}var a_;function RC(){if(a_)return Ou;a_=1;var n=SC(),e=s0(),t=CC();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function c(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function h(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function m(s){if(l(s)!==s)throw Error(r(188))}function p(s){var i=s.alternate;if(!i){if(i=l(s),i===null)throw Error(r(188));return i!==s?null:s}for(var o=s,u=i;;){var g=o.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===o)return m(g),s;if(y===u)return m(g),i;y=y.sibling}throw Error(r(188))}if(o.return!==u.return)o=g,u=y;else{for(var w=!1,I=g.child;I;){if(I===o){w=!0,o=g,u=y;break}if(I===u){w=!0,u=g,o=y;break}I=I.sibling}if(!w){for(I=y.child;I;){if(I===o){w=!0,o=y,u=g;break}if(I===u){w=!0,u=y,o=g;break}I=I.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:i}function v(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=v(s),i!==null)return i;s=s.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function M(s){return s===null||typeof s!="object"?null:(s=N&&s[N]||s["@@iterator"],typeof s=="function"?s:null)}var C=Symbol.for("react.client.reference");function pe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===C?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case O:return"Fragment";case U:return"Profiler";case R:return"StrictMode";case ie:return"Suspense";case ve:return"SuspenseList";case V:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case Q:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case Y:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return i=s.displayName||null,i!==null?i:pe(s.type)||"Memo";case k:i=s._payload,s=s._init;try{return pe(s(i))}catch{}}return null}var ge=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},xe=[],be=-1;function q(s){return{current:s}}function W(s){0>be||(s.current=xe[be],xe[be]=null,be--)}function de(s,i){be++,xe[be]=s.current,s.current=i}var me=q(null),ye=q(null),Ae=q(null),De=q(null);function je(s,i){switch(de(Ae,i),de(ye,s),de(me,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?_x(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=_x(i),s=Ex(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}W(me),de(me,s)}function ke(){W(me),W(ye),W(Ae)}function We(s){s.memoizedState!==null&&de(De,s);var i=me.current,o=Ex(i,s.type);i!==o&&(de(ye,s),de(me,o))}function et(s){ye.current===s&&(W(me),W(ye)),De.current===s&&(W(De),Nu._currentValue=ue)}var st,ht;function vt(s){if(st===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);st=i&&i[1]||"",ht=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+st+s+ht}var nn=!1;function zr(s,i){if(!s||nn)return"";nn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(se){var te=se}Reflect.construct(s,[],he)}else{try{he.call()}catch(se){te=se}s.call(he.prototype)}}else{try{throw Error()}catch(se){te=se}(he=s())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(se){if(se&&te&&typeof se.stack=="string")return[se.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),w=y[0],I=y[1];if(w&&I){var z=w.split(`
`),J=I.split(`
`);for(g=u=0;u<z.length&&!z[u].includes("DetermineComponentFrameRoot");)u++;for(;g<J.length&&!J[g].includes("DetermineComponentFrameRoot");)g++;if(u===z.length||g===J.length)for(u=z.length-1,g=J.length-1;1<=u&&0<=g&&z[u]!==J[g];)g--;for(;1<=u&&0<=g;u--,g--)if(z[u]!==J[g]){if(u!==1||g!==1)do if(u--,g--,0>g||z[u]!==J[g]){var ae=`
`+z[u].replace(" at new "," at ");return s.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",s.displayName)),ae}while(1<=u&&0<=g);break}}}finally{nn=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?vt(o):""}function li(s,i){switch(s.tag){case 26:case 27:case 5:return vt(s.type);case 16:return vt("Lazy");case 13:return s.child!==i&&i!==null?vt("Suspense Fallback"):vt("Suspense");case 19:return vt("SuspenseList");case 0:case 15:return zr(s.type,!1);case 11:return zr(s.type.render,!1);case 1:return zr(s.type,!0);case 31:return vt("Activity");default:return""}}function Ui(s){try{var i="",o=null;do i+=li(s,o),o=s,s=s.return;while(s);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ht=Object.prototype.hasOwnProperty,jt=n.unstable_scheduleCallback,Sr=n.unstable_cancelCallback,Da=n.unstable_shouldYield,Vi=n.unstable_requestPaint,Ot=n.unstable_now,Nr=n.unstable_getCurrentPriorityLevel,qi=n.unstable_ImmediatePriority,Hr=n.unstable_UserBlockingPriority,mr=n.unstable_NormalPriority,Bi=n.unstable_LowPriority,kn=n.unstable_IdlePriority,zi=n.log,Hi=n.unstable_setDisableYieldValue,gr=null,Zt=null;function Sn(s){if(typeof zi=="function"&&Hi(s),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(gr,s)}catch{}}var Dt=Math.clz32?Math.clz32:Jn,Vs=Math.log,Cr=Math.LN2;function Jn(s){return s>>>=0,s===0?32:31-(Vs(s)/Cr|0)|0}var Mn=256,Fr=262144,At=4194304;function er(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function In(s,i,o){var u=s.pendingLanes;if(u===0)return 0;var g=0,y=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var I=u&134217727;return I!==0?(u=I&~y,u!==0?g=er(u):(w&=I,w!==0?g=er(w):o||(o=I&~s,o!==0&&(g=er(o))))):(I=u&~y,I!==0?g=er(I):w!==0?g=er(w):o||(o=u&~s,o!==0&&(g=er(o)))),g===0?0:i!==0&&i!==g&&(i&y)===0&&(y=g&-g,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:g}function Pn(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function Fi(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ci(){var s=At;return At<<=1,(At&62914560)===0&&(At=4194304),s}function Nn(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function ds(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function $r(s,i,o,u,g,y){var w=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var I=s.entanglements,z=s.expirationTimes,J=s.hiddenUpdates;for(o=w&~o;0<o;){var ae=31-Dt(o),he=1<<ae;I[ae]=0,z[ae]=-1;var te=J[ae];if(te!==null)for(J[ae]=null,ae=0;ae<te.length;ae++){var se=te[ae];se!==null&&(se.lane&=-536870913)}o&=~he}u!==0&&qs(s,u,0),y!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=y&~(w&~i))}function qs(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-Dt(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|o&261930}function $i(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var u=31-Dt(o),g=1<<u;g&i|s[u]&i&&(s[u]|=i),o&=~g}}function Gi(s,i){var o=i&-i;return o=(o&42)!==0?1:fs(o),(o&(s.suspendedLanes|i))!==0?0:o}function fs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function pr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function rn(){var s=ee.p;return s!==0?s:(s=window.event,s===void 0?32:$x(s.type))}function yr(s,i){var o=ee.p;try{return ee.p=s,i()}finally{ee.p=o}}var vr=Math.random().toString(36).slice(2),Ft="__reactFiber$"+vr,sn="__reactProps$"+vr,Rr="__reactContainer$"+vr,Jt="__reactEvents$"+vr,Vo="__reactListeners$"+vr,La="__reactHandles$"+vr,ka="__reactResources$"+vr,Ir="__reactMarker$"+vr;function ui(s){delete s[Ft],delete s[sn],delete s[Jt],delete s[Vo],delete s[La]}function Mt(s){var i=s[Ft];if(i)return i;for(var o=s.parentNode;o;){if(i=o[Rr]||o[Ft]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=Rx(s);s!==null;){if(o=s[Ft])return o;s=Rx(s)}return i}s=o,o=s.parentNode}return null}function tr(s){if(s=s[Ft]||s[Rr]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function Un(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function jr(s){var i=s[ka];return i||(i=s[ka]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function $t(s){s[Ir]=!0}var Ki=new Set,ms={};function br(s,i){Vn(s,i),Vn(s+"Capture",i)}function Vn(s,i){for(ms[s]=i,s=0;s<i.length;s++)Ki.add(i[s])}var nr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bs={},Qi={};function Ma(s){return Ht.call(Qi,s)?!0:Ht.call(Bs,s)?!1:nr.test(s)?Qi[s]=!0:(Bs[s]=!0,!1)}function hi(s,i,o){if(Ma(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function qn(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function Gt(s,i,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+u)}}function Pt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Or(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Gr(s,i,o){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(w){o=""+w,y.call(this,w)}}),Object.defineProperty(s,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function ft(s){if(!s._valueTracker){var i=Or(s)?"checked":"value";s._valueTracker=Gr(s,i,""+s[i])}}function gs(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return s&&(u=Or(s)?s.checked?"true":"false":s.value),s=u,s!==o?(i.setValue(s),!0):!1}function Dr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var zs=/[\n"\\]/g;function jn(s){return s.replace(zs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function di(s,i,o,u,g,y,w,I){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),i!=null?w==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+Pt(i)):s.value!==""+Pt(i)&&(s.value=""+Pt(i)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),i!=null?Yi(s,w,Pt(i)):o!=null?Yi(s,w,Pt(o)):u!=null&&s.removeAttribute("value"),g==null&&y!=null&&(s.defaultChecked=!!y),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+Pt(I):s.removeAttribute("name")}function fi(s,i,o,u,g,y,w,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){ft(s);return}o=o!=null?""+Pt(o):"",i=i!=null?""+Pt(i):o,I||i===s.value||(s.value=i),s.defaultValue=i}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=I?s.checked:!!u,s.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w),ft(s)}function Yi(s,i,o){i==="number"&&Dr(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function ps(s,i,o,u){if(s=s.options,i){i={};for(var g=0;g<o.length;g++)i["$"+o[g]]=!0;for(o=0;o<s.length;o++)g=i.hasOwnProperty("$"+s[o].value),s[o].selected!==g&&(s[o].selected=g),g&&u&&(s[o].defaultSelected=!0)}else{for(o=""+Pt(o),i=null,g=0;g<s.length;g++){if(s[g].value===o){s[g].selected=!0,u&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function ys(s,i,o){if(i!=null&&(i=""+Pt(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+Pt(o):""}function yn(s,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(ge(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Pt(i),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u),ft(s)}function Kt(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var Lr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xi(s,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,o):typeof o!="number"||o===0||Lr.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function rr(s,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var g in i)u=i[g],i.hasOwnProperty(g)&&o[g]!==u&&Xi(s,g,u)}else for(var y in i)i.hasOwnProperty(y)&&Xi(s,y,i[y])}function mi(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pa=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gi(s){return vs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function sr(){}var un=null;function Bn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Kr=null,zn=null;function Qr(s){var i=tr(s);if(i&&(s=i.stateNode)){var o=s[sn]||null;e:switch(s=i.stateNode,i.type){case"input":if(di(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+jn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==s&&u.form===s.form){var g=u[sn]||null;if(!g)throw Error(r(90));di(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===s.form&&gs(u)}break e;case"textarea":ys(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&ps(s,!!o.multiple,i,!1)}}}var Yr=!1;function bs(s,i,o){if(Yr)return s(i,o);Yr=!0;try{var u=s(i);return u}finally{if(Yr=!1,(Kr!==null||zn!==null)&&(Ad(),Kr&&(i=Kr,s=zn,zn=Kr=null,Qr(i),s)))for(i=0;i<s.length;i++)Qr(s[i])}}function ir(s,i){var o=s.stateNode;if(o===null)return null;var u=o[sn]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xs=!1;if(On)try{var Ze={};Object.defineProperty(Ze,"passive",{get:function(){xs=!0}}),window.addEventListener("test",Ze,Ze),window.removeEventListener("test",Ze,Ze)}catch{xs=!1}var xr=null,Hs=null,Fs=null;function Wi(){if(Fs)return Fs;var s,i=Hs,o=i.length,u,g="value"in xr?xr.value:xr.textContent,y=g.length;for(s=0;s<o&&i[s]===g[s];s++);var w=o-s;for(u=1;u<=w&&i[o-u]===g[y-u];u++);return Fs=g.slice(s,1<u?1-u:void 0)}function x(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function j(){return!0}function B(){return!1}function ne(s){function i(o,u,g,y,w){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(o=s[I],this[I]=o?o(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?j:B,this.isPropagationStopped=B,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=j)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=j)},persist:function(){},isPersistent:j}),i}var Ue={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Se=ne(Ue),Ye=_({},Ue,{view:0,detail:0}),Je=ne(Ye),Et,tt,Rt,hn=_({},Ye,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ua,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Rt&&(Rt&&s.type==="mousemove"?(Et=s.screenX-Rt.screenX,tt=s.screenY-Rt.screenY):tt=Et=0,Rt=s),Et)},movementY:function(s){return"movementY"in s?s.movementY:tt}}),Ut=ne(hn),Qt=_({},hn,{dataTransfer:0}),an=ne(Qt),Xr=_({},Ye,{relatedTarget:0}),Hn=ne(Xr),Wr=_({},Ue,{animationName:0,elapsedTime:0,pseudoElement:0}),qo=ne(Wr),$s=_({},Ue,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Zi=ne($s),Ph=_({},Ue,{data:0}),pi=ne(Ph),Uh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bh(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=qh[s])?!!i[s]:!1}function Ua(){return Bh}var _r=_({},Ye,{key:function(s){if(s.key){var i=Uh[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=x(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Vh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ua,charCode:function(s){return s.type==="keypress"?x(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?x(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),zh=ne(_r),Hh=_({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ji=ne(Hh),d=_({},Ye,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ua}),b=ne(d),T=_({},Ue,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=ne(T),X=_({},hn,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),re=ne(X),_e=_({},Ue,{newState:0,oldState:0}),Ke=ne(_e),dn=[9,13,27,32],bt=On&&"CompositionEvent"in window,Yt=null;On&&"documentMode"in document&&(Yt=document.documentMode);var _s=On&&"TextEvent"in window&&!Yt,yi=On&&(!bt||Yt&&8<Yt&&11>=Yt),Gs=" ",Ks=!1;function Bo(s,i){switch(s){case"keyup":return dn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ol=!1;function $N(s,i){switch(s){case"compositionend":return jl(i);case"keypress":return i.which!==32?null:(Ks=!0,Gs);case"textInput":return s=i.data,s===Gs&&Ks?null:s;default:return null}}function GN(s,i){if(Ol)return s==="compositionend"||!bt&&Bo(s,i)?(s=Wi(),Fs=Hs=xr=null,Ol=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yi&&i.locale!=="ko"?null:i.data;default:return null}}var KN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jv(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!KN[s.type]:i==="textarea"}function Ov(s,i,o,u){Kr?zn?zn.push(u):zn=[u]:Kr=u,i=Od(i,"onChange"),0<i.length&&(o=new Se("onChange","change",null,o,u),s.push({event:o,listeners:i}))}var Yc=null,Xc=null;function QN(s){gx(s,0)}function Fh(s){var i=Un(s);if(gs(i))return s}function Dv(s,i){if(s==="change")return i}var Lv=!1;if(On){var Pm;if(On){var Um="oninput"in document;if(!Um){var kv=document.createElement("div");kv.setAttribute("oninput","return;"),Um=typeof kv.oninput=="function"}Pm=Um}else Pm=!1;Lv=Pm&&(!document.documentMode||9<document.documentMode)}function Mv(){Yc&&(Yc.detachEvent("onpropertychange",Pv),Xc=Yc=null)}function Pv(s){if(s.propertyName==="value"&&Fh(Xc)){var i=[];Ov(i,Xc,s,Bn(s)),bs(QN,i)}}function YN(s,i,o){s==="focusin"?(Mv(),Yc=i,Xc=o,Yc.attachEvent("onpropertychange",Pv)):s==="focusout"&&Mv()}function XN(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Fh(Xc)}function WN(s,i){if(s==="click")return Fh(i)}function ZN(s,i){if(s==="input"||s==="change")return Fh(i)}function JN(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Zr=typeof Object.is=="function"?Object.is:JN;function Wc(s,i){if(Zr(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!Ht.call(i,g)||!Zr(s[g],i[g]))return!1}return!0}function Uv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Vv(s,i){var o=Uv(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=i&&u>=i)return{node:o,offset:i-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Uv(o)}}function qv(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?qv(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function Bv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=Dr(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=Dr(s.document)}return i}function Vm(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var e2=On&&"documentMode"in document&&11>=document.documentMode,Dl=null,qm=null,Zc=null,Bm=!1;function zv(s,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Bm||Dl==null||Dl!==Dr(u)||(u=Dl,"selectionStart"in u&&Vm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Zc&&Wc(Zc,u)||(Zc=u,u=Od(qm,"onSelect"),0<u.length&&(i=new Se("onSelect","select",null,i,o),s.push({event:i,listeners:u}),i.target=Dl)))}function zo(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var Ll={animationend:zo("Animation","AnimationEnd"),animationiteration:zo("Animation","AnimationIteration"),animationstart:zo("Animation","AnimationStart"),transitionrun:zo("Transition","TransitionRun"),transitionstart:zo("Transition","TransitionStart"),transitioncancel:zo("Transition","TransitionCancel"),transitionend:zo("Transition","TransitionEnd")},zm={},Hv={};On&&(Hv=document.createElement("div").style,"AnimationEvent"in window||(delete Ll.animationend.animation,delete Ll.animationiteration.animation,delete Ll.animationstart.animation),"TransitionEvent"in window||delete Ll.transitionend.transition);function Ho(s){if(zm[s])return zm[s];if(!Ll[s])return s;var i=Ll[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in Hv)return zm[s]=i[o];return s}var Fv=Ho("animationend"),$v=Ho("animationiteration"),Gv=Ho("animationstart"),t2=Ho("transitionrun"),n2=Ho("transitionstart"),r2=Ho("transitioncancel"),Kv=Ho("transitionend"),Qv=new Map,Hm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hm.push("scrollEnd");function Qs(s,i){Qv.set(s,i),br(i,[s])}var $h=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Es=[],kl=0,Fm=0;function Gh(){for(var s=kl,i=Fm=kl=0;i<s;){var o=Es[i];Es[i++]=null;var u=Es[i];Es[i++]=null;var g=Es[i];Es[i++]=null;var y=Es[i];if(Es[i++]=null,u!==null&&g!==null){var w=u.pending;w===null?g.next=g:(g.next=w.next,w.next=g),u.pending=g}y!==0&&Yv(o,g,y)}}function Kh(s,i,o,u){Es[kl++]=s,Es[kl++]=i,Es[kl++]=o,Es[kl++]=u,Fm|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function $m(s,i,o,u){return Kh(s,i,o,u),Qh(s)}function Fo(s,i){return Kh(s,null,null,i),Qh(s)}function Yv(s,i,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var g=!1,y=s.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(g=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,g&&i!==null&&(g=31-Dt(o),s=y.hiddenUpdates,u=s[g],u===null?s[g]=[i]:u.push(i),i.lane=o|536870912),y):null}function Qh(s){if(50<xu)throw xu=0,ep=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Ml={};function s2(s,i,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(s,i,o,u){return new s2(s,i,o,u)}function Gm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ea(s,i){var o=s.alternate;return o===null?(o=Jr(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function Xv(s,i){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function Yh(s,i,o,u,g,y){var w=0;if(u=s,typeof s=="function")Gm(s)&&(w=1);else if(typeof s=="string")w=cC(s,o,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case V:return s=Jr(31,o,i,g),s.elementType=V,s.lanes=y,s;case O:return $o(o.children,g,y,i);case R:w=8,g|=24;break;case U:return s=Jr(12,o,i,g|2),s.elementType=U,s.lanes=y,s;case ie:return s=Jr(13,o,i,g),s.elementType=ie,s.lanes=y,s;case ve:return s=Jr(19,o,i,g),s.elementType=ve,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Q:w=10;break e;case F:w=9;break e;case Y:w=11;break e;case L:w=14;break e;case k:w=16,u=null;break e}w=29,o=Error(r(130,s===null?"null":typeof s,"")),u=null}return i=Jr(w,o,i,g),i.elementType=s,i.type=u,i.lanes=y,i}function $o(s,i,o,u){return s=Jr(7,s,u,i),s.lanes=o,s}function Km(s,i,o){return s=Jr(6,s,null,i),s.lanes=o,s}function Wv(s){var i=Jr(18,null,null,0);return i.stateNode=s,i}function Qm(s,i,o){return i=Jr(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var Zv=new WeakMap;function ws(s,i){if(typeof s=="object"&&s!==null){var o=Zv.get(s);return o!==void 0?o:(i={value:s,source:i,stack:Ui(i)},Zv.set(s,i),i)}return{value:s,source:i,stack:Ui(i)}}var Pl=[],Ul=0,Xh=null,Jc=0,Ts=[],As=0,Va=null,vi=1,bi="";function ta(s,i){Pl[Ul++]=Jc,Pl[Ul++]=Xh,Xh=s,Jc=i}function Jv(s,i,o){Ts[As++]=vi,Ts[As++]=bi,Ts[As++]=Va,Va=s;var u=vi;s=bi;var g=32-Dt(u)-1;u&=~(1<<g),o+=1;var y=32-Dt(i)+g;if(30<y){var w=g-g%5;y=(u&(1<<w)-1).toString(32),u>>=w,g-=w,vi=1<<32-Dt(i)+g|o<<g|u,bi=y+s}else vi=1<<y|o<<g|u,bi=s}function Ym(s){s.return!==null&&(ta(s,1),Jv(s,1,0))}function Xm(s){for(;s===Xh;)Xh=Pl[--Ul],Pl[Ul]=null,Jc=Pl[--Ul],Pl[Ul]=null;for(;s===Va;)Va=Ts[--As],Ts[As]=null,bi=Ts[--As],Ts[As]=null,vi=Ts[--As],Ts[As]=null}function eb(s,i){Ts[As++]=vi,Ts[As++]=bi,Ts[As++]=Va,vi=i.id,bi=i.overflow,Va=s}var Fn=null,Vt=null,dt=!1,qa=null,Ss=!1,Wm=Error(r(519));function Ba(s){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw eu(ws(i,s)),Wm}function tb(s){var i=s.stateNode,o=s.type,u=s.memoizedProps;switch(i[Ft]=s,i[sn]=u,o){case"dialog":rt("cancel",i),rt("close",i);break;case"iframe":case"object":case"embed":rt("load",i);break;case"video":case"audio":for(o=0;o<Eu.length;o++)rt(Eu[o],i);break;case"source":rt("error",i);break;case"img":case"image":case"link":rt("error",i),rt("load",i);break;case"details":rt("toggle",i);break;case"input":rt("invalid",i),fi(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":rt("invalid",i);break;case"textarea":rt("invalid",i),yn(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||bx(i.textContent,o)?(u.popover!=null&&(rt("beforetoggle",i),rt("toggle",i)),u.onScroll!=null&&rt("scroll",i),u.onScrollEnd!=null&&rt("scrollend",i),u.onClick!=null&&(i.onclick=sr),i=!0):i=!1,i||Ba(s,!0)}function nb(s){for(Fn=s.return;Fn;)switch(Fn.tag){case 5:case 31:case 13:Ss=!1;return;case 27:case 3:Ss=!0;return;default:Fn=Fn.return}}function Vl(s){if(s!==Fn)return!1;if(!dt)return nb(s),dt=!0,!1;var i=s.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||gp(s.type,s.memoizedProps)),o=!o),o&&Vt&&Ba(s),nb(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Vt=Cx(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Vt=Cx(s)}else i===27?(i=Vt,to(s.type)?(s=xp,xp=null,Vt=s):Vt=i):Vt=Fn?Cs(s.stateNode.nextSibling):null;return!0}function Go(){Vt=Fn=null,dt=!1}function Zm(){var s=qa;return s!==null&&(Ur===null?Ur=s:Ur.push.apply(Ur,s),qa=null),s}function eu(s){qa===null?qa=[s]:qa.push(s)}var Jm=q(null),Ko=null,na=null;function za(s,i,o){de(Jm,i._currentValue),i._currentValue=o}function ra(s){s._currentValue=Jm.current,W(Jm)}function eg(s,i,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===o)break;s=s.return}}function tg(s,i,o,u){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var y=g.dependencies;if(y!==null){var w=g.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=g;for(var z=0;z<i.length;z++)if(I.context===i[z]){y.lanes|=o,I=y.alternate,I!==null&&(I.lanes|=o),eg(y.return,o,s),u||(w=null);break e}y=I.next}}else if(g.tag===18){if(w=g.return,w===null)throw Error(r(341));w.lanes|=o,y=w.alternate,y!==null&&(y.lanes|=o),eg(w,o,s),w=null}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}}function ql(s,i,o,u){s=null;for(var g=i,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var w=g.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var I=g.type;Zr(g.pendingProps.value,w.value)||(s!==null?s.push(I):s=[I])}}else if(g===De.current){if(w=g.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Nu):s=[Nu])}g=g.return}s!==null&&tg(i,s,o,u),i.flags|=262144}function Wh(s){for(s=s.firstContext;s!==null;){if(!Zr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Qo(s){Ko=s,na=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function $n(s){return rb(Ko,s)}function Zh(s,i){return Ko===null&&Qo(s),rb(s,i)}function rb(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},na===null){if(s===null)throw Error(r(308));na=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else na=na.next=i;return o}var i2=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},a2=n.unstable_scheduleCallback,o2=n.unstable_NormalPriority,vn={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ng(){return{controller:new i2,data:new Map,refCount:0}}function tu(s){s.refCount--,s.refCount===0&&a2(o2,function(){s.controller.abort()})}var nu=null,rg=0,Bl=0,zl=null;function l2(s,i){if(nu===null){var o=nu=[];rg=0,Bl=ap(),zl={status:"pending",value:void 0,then:function(u){o.push(u)}}}return rg++,i.then(sb,sb),i}function sb(){if(--rg===0&&nu!==null){zl!==null&&(zl.status="fulfilled");var s=nu;nu=null,Bl=0,zl=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function c2(s,i){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var g=0;g<o.length;g++)(0,o[g])(i)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var ib=H.S;H.S=function(s,i){H1=Ot(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&l2(s,i),ib!==null&&ib(s,i)};var Yo=q(null);function sg(){var s=Yo.current;return s!==null?s:It.pooledCache}function Jh(s,i){i===null?de(Yo,Yo.current):de(Yo,i.pool)}function ab(){var s=sg();return s===null?null:{parent:vn._currentValue,pool:s}}var Hl=Error(r(460)),ig=Error(r(474)),ed=Error(r(542)),td={then:function(){}};function ob(s){return s=s.status,s==="fulfilled"||s==="rejected"}function lb(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(sr,sr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,ub(s),s;default:if(typeof i.status=="string")i.then(sr,sr);else{if(s=It,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=u}},function(u){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,ub(s),s}throw Wo=i,Hl}}function Xo(s){try{var i=s._init;return i(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Wo=o,Hl):o}}var Wo=null;function cb(){if(Wo===null)throw Error(r(459));var s=Wo;return Wo=null,s}function ub(s){if(s===Hl||s===ed)throw Error(r(483))}var Fl=null,ru=0;function nd(s){var i=ru;return ru+=1,Fl===null&&(Fl=[]),lb(Fl,s,i)}function su(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function rd(s,i){throw i.$$typeof===E?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function hb(s){function i(K,G){if(s){var Z=K.deletions;Z===null?(K.deletions=[G],K.flags|=16):Z.push(G)}}function o(K,G){if(!s)return null;for(;G!==null;)i(K,G),G=G.sibling;return null}function u(K){for(var G=new Map;K!==null;)K.key!==null?G.set(K.key,K):G.set(K.index,K),K=K.sibling;return G}function g(K,G){return K=ea(K,G),K.index=0,K.sibling=null,K}function y(K,G,Z){return K.index=Z,s?(Z=K.alternate,Z!==null?(Z=Z.index,Z<G?(K.flags|=67108866,G):Z):(K.flags|=67108866,G)):(K.flags|=1048576,G)}function w(K){return s&&K.alternate===null&&(K.flags|=67108866),K}function I(K,G,Z,oe){return G===null||G.tag!==6?(G=Km(Z,K.mode,oe),G.return=K,G):(G=g(G,Z),G.return=K,G)}function z(K,G,Z,oe){var Me=Z.type;return Me===O?ae(K,G,Z.props.children,oe,Z.key):G!==null&&(G.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===k&&Xo(Me)===G.type)?(G=g(G,Z.props),su(G,Z),G.return=K,G):(G=Yh(Z.type,Z.key,Z.props,null,K.mode,oe),su(G,Z),G.return=K,G)}function J(K,G,Z,oe){return G===null||G.tag!==4||G.stateNode.containerInfo!==Z.containerInfo||G.stateNode.implementation!==Z.implementation?(G=Qm(Z,K.mode,oe),G.return=K,G):(G=g(G,Z.children||[]),G.return=K,G)}function ae(K,G,Z,oe,Me){return G===null||G.tag!==7?(G=$o(Z,K.mode,oe,Me),G.return=K,G):(G=g(G,Z),G.return=K,G)}function he(K,G,Z){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Km(""+G,K.mode,Z),G.return=K,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case A:return Z=Yh(G.type,G.key,G.props,null,K.mode,Z),su(Z,G),Z.return=K,Z;case S:return G=Qm(G,K.mode,Z),G.return=K,G;case k:return G=Xo(G),he(K,G,Z)}if(ge(G)||M(G))return G=$o(G,K.mode,Z,null),G.return=K,G;if(typeof G.then=="function")return he(K,nd(G),Z);if(G.$$typeof===Q)return he(K,Zh(K,G),Z);rd(K,G)}return null}function te(K,G,Z,oe){var Me=G!==null?G.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Me!==null?null:I(K,G,""+Z,oe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return Z.key===Me?z(K,G,Z,oe):null;case S:return Z.key===Me?J(K,G,Z,oe):null;case k:return Z=Xo(Z),te(K,G,Z,oe)}if(ge(Z)||M(Z))return Me!==null?null:ae(K,G,Z,oe,null);if(typeof Z.then=="function")return te(K,G,nd(Z),oe);if(Z.$$typeof===Q)return te(K,G,Zh(K,Z),oe);rd(K,Z)}return null}function se(K,G,Z,oe,Me){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return K=K.get(Z)||null,I(G,K,""+oe,Me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case A:return K=K.get(oe.key===null?Z:oe.key)||null,z(G,K,oe,Me);case S:return K=K.get(oe.key===null?Z:oe.key)||null,J(G,K,oe,Me);case k:return oe=Xo(oe),se(K,G,Z,oe,Me)}if(ge(oe)||M(oe))return K=K.get(Z)||null,ae(G,K,oe,Me,null);if(typeof oe.then=="function")return se(K,G,Z,nd(oe),Me);if(oe.$$typeof===Q)return se(K,G,Z,Zh(G,oe),Me);rd(G,oe)}return null}function Ne(K,G,Z,oe){for(var Me=null,gt=null,Re=G,Xe=G=0,at=null;Re!==null&&Xe<Z.length;Xe++){Re.index>Xe?(at=Re,Re=null):at=Re.sibling;var pt=te(K,Re,Z[Xe],oe);if(pt===null){Re===null&&(Re=at);break}s&&Re&&pt.alternate===null&&i(K,Re),G=y(pt,G,Xe),gt===null?Me=pt:gt.sibling=pt,gt=pt,Re=at}if(Xe===Z.length)return o(K,Re),dt&&ta(K,Xe),Me;if(Re===null){for(;Xe<Z.length;Xe++)Re=he(K,Z[Xe],oe),Re!==null&&(G=y(Re,G,Xe),gt===null?Me=Re:gt.sibling=Re,gt=Re);return dt&&ta(K,Xe),Me}for(Re=u(Re);Xe<Z.length;Xe++)at=se(Re,K,Xe,Z[Xe],oe),at!==null&&(s&&at.alternate!==null&&Re.delete(at.key===null?Xe:at.key),G=y(at,G,Xe),gt===null?Me=at:gt.sibling=at,gt=at);return s&&Re.forEach(function(ao){return i(K,ao)}),dt&&ta(K,Xe),Me}function Ve(K,G,Z,oe){if(Z==null)throw Error(r(151));for(var Me=null,gt=null,Re=G,Xe=G=0,at=null,pt=Z.next();Re!==null&&!pt.done;Xe++,pt=Z.next()){Re.index>Xe?(at=Re,Re=null):at=Re.sibling;var ao=te(K,Re,pt.value,oe);if(ao===null){Re===null&&(Re=at);break}s&&Re&&ao.alternate===null&&i(K,Re),G=y(ao,G,Xe),gt===null?Me=ao:gt.sibling=ao,gt=ao,Re=at}if(pt.done)return o(K,Re),dt&&ta(K,Xe),Me;if(Re===null){for(;!pt.done;Xe++,pt=Z.next())pt=he(K,pt.value,oe),pt!==null&&(G=y(pt,G,Xe),gt===null?Me=pt:gt.sibling=pt,gt=pt);return dt&&ta(K,Xe),Me}for(Re=u(Re);!pt.done;Xe++,pt=Z.next())pt=se(Re,K,Xe,pt.value,oe),pt!==null&&(s&&pt.alternate!==null&&Re.delete(pt.key===null?Xe:pt.key),G=y(pt,G,Xe),gt===null?Me=pt:gt.sibling=pt,gt=pt);return s&&Re.forEach(function(xC){return i(K,xC)}),dt&&ta(K,Xe),Me}function Ct(K,G,Z,oe){if(typeof Z=="object"&&Z!==null&&Z.type===O&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:e:{for(var Me=Z.key;G!==null;){if(G.key===Me){if(Me=Z.type,Me===O){if(G.tag===7){o(K,G.sibling),oe=g(G,Z.props.children),oe.return=K,K=oe;break e}}else if(G.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===k&&Xo(Me)===G.type){o(K,G.sibling),oe=g(G,Z.props),su(oe,Z),oe.return=K,K=oe;break e}o(K,G);break}else i(K,G);G=G.sibling}Z.type===O?(oe=$o(Z.props.children,K.mode,oe,Z.key),oe.return=K,K=oe):(oe=Yh(Z.type,Z.key,Z.props,null,K.mode,oe),su(oe,Z),oe.return=K,K=oe)}return w(K);case S:e:{for(Me=Z.key;G!==null;){if(G.key===Me)if(G.tag===4&&G.stateNode.containerInfo===Z.containerInfo&&G.stateNode.implementation===Z.implementation){o(K,G.sibling),oe=g(G,Z.children||[]),oe.return=K,K=oe;break e}else{o(K,G);break}else i(K,G);G=G.sibling}oe=Qm(Z,K.mode,oe),oe.return=K,K=oe}return w(K);case k:return Z=Xo(Z),Ct(K,G,Z,oe)}if(ge(Z))return Ne(K,G,Z,oe);if(M(Z)){if(Me=M(Z),typeof Me!="function")throw Error(r(150));return Z=Me.call(Z),Ve(K,G,Z,oe)}if(typeof Z.then=="function")return Ct(K,G,nd(Z),oe);if(Z.$$typeof===Q)return Ct(K,G,Zh(K,Z),oe);rd(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,G!==null&&G.tag===6?(o(K,G.sibling),oe=g(G,Z),oe.return=K,K=oe):(o(K,G),oe=Km(Z,K.mode,oe),oe.return=K,K=oe),w(K)):o(K,G)}return function(K,G,Z,oe){try{ru=0;var Me=Ct(K,G,Z,oe);return Fl=null,Me}catch(Re){if(Re===Hl||Re===ed)throw Re;var gt=Jr(29,Re,null,K.mode);return gt.lanes=oe,gt.return=K,gt}finally{}}}var Zo=hb(!0),fb=hb(!1),Ha=!1;function ag(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function og(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Fa(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function $a(s,i,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(xt&2)!==0){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,i=Qh(s),Yv(s,null,o),i}return Kh(s,u,i,o),Qh(s)}function iu(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,$i(s,o)}}function lg(s,i){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?g=y=w:y=y.next=w,o=o.next}while(o!==null);y===null?g=y=i:y=y.next=i}else g=y=i;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var cg=!1;function au(){if(cg){var s=zl;if(s!==null)throw s}}function ou(s,i,o,u){cg=!1;var g=s.updateQueue;Ha=!1;var y=g.firstBaseUpdate,w=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var z=I,J=z.next;z.next=null,w===null?y=J:w.next=J,w=z;var ae=s.alternate;ae!==null&&(ae=ae.updateQueue,I=ae.lastBaseUpdate,I!==w&&(I===null?ae.firstBaseUpdate=J:I.next=J,ae.lastBaseUpdate=z))}if(y!==null){var he=g.baseState;w=0,ae=J=z=null,I=y;do{var te=I.lane&-536870913,se=te!==I.lane;if(se?(it&te)===te:(u&te)===te){te!==0&&te===Bl&&(cg=!0),ae!==null&&(ae=ae.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ne=s,Ve=I;te=i;var Ct=o;switch(Ve.tag){case 1:if(Ne=Ve.payload,typeof Ne=="function"){he=Ne.call(Ct,he,te);break e}he=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Ve.payload,te=typeof Ne=="function"?Ne.call(Ct,he,te):Ne,te==null)break e;he=_({},he,te);break e;case 2:Ha=!0}}te=I.callback,te!==null&&(s.flags|=64,se&&(s.flags|=8192),se=g.callbacks,se===null?g.callbacks=[te]:se.push(te))}else se={lane:te,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ae===null?(J=ae=se,z=he):ae=ae.next=se,w|=te;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;se=I,I=se.next,se.next=null,g.lastBaseUpdate=se,g.shared.pending=null}}while(!0);ae===null&&(z=he),g.baseState=z,g.firstBaseUpdate=J,g.lastBaseUpdate=ae,y===null&&(g.shared.lanes=0),Xa|=w,s.lanes=w,s.memoizedState=he}}function mb(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function gb(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)mb(o[s],i)}var $l=q(null),sd=q(0);function pb(s,i){s=da,de(sd,s),de($l,i),da=s|i.baseLanes}function ug(){de(sd,da),de($l,$l.current)}function hg(){da=sd.current,W($l),W(sd)}var es=q(null),Ns=null;function Ga(s){var i=s.alternate;de(fn,fn.current&1),de(es,s),Ns===null&&(i===null||$l.current!==null||i.memoizedState!==null)&&(Ns=s)}function dg(s){de(fn,fn.current),de(es,s),Ns===null&&(Ns=s)}function yb(s){s.tag===22?(de(fn,fn.current),de(es,s),Ns===null&&(Ns=s)):Ka()}function Ka(){de(fn,fn.current),de(es,es.current)}function ts(s){W(es),Ns===s&&(Ns=null),W(fn)}var fn=q(0);function id(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||vp(o)||bp(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var sa=0,Qe=null,St=null,bn=null,ad=!1,Gl=!1,Jo=!1,od=0,lu=0,Kl=null,u2=0;function on(){throw Error(r(321))}function fg(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!Zr(s[o],i[o]))return!1;return!0}function mg(s,i,o,u,g,y){return sa=y,Qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=s===null||s.memoizedState===null?e1:Rg,Jo=!1,y=o(u,g),Jo=!1,Gl&&(y=bb(i,o,u,g)),vb(s),y}function vb(s){H.H=hu;var i=St!==null&&St.next!==null;if(sa=0,bn=St=Qe=null,ad=!1,lu=0,Kl=null,i)throw Error(r(300));s===null||xn||(s=s.dependencies,s!==null&&Wh(s)&&(xn=!0))}function bb(s,i,o,u){Qe=s;var g=0;do{if(Gl&&(Kl=null),lu=0,Gl=!1,25<=g)throw Error(r(301));if(g+=1,bn=St=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=t1,y=i(o,u)}while(Gl);return y}function h2(){var s=H.H,i=s.useState()[0];return i=typeof i.then=="function"?cu(i):i,s=s.useState()[0],(St!==null?St.memoizedState:null)!==s&&(Qe.flags|=1024),i}function gg(){var s=od!==0;return od=0,s}function pg(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function yg(s){if(ad){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}ad=!1}sa=0,bn=St=Qe=null,Gl=!1,lu=od=0,Kl=null}function Er(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?Qe.memoizedState=bn=s:bn=bn.next=s,bn}function mn(){if(St===null){var s=Qe.alternate;s=s!==null?s.memoizedState:null}else s=St.next;var i=bn===null?Qe.memoizedState:bn.next;if(i!==null)bn=i,St=s;else{if(s===null)throw Qe.alternate===null?Error(r(467)):Error(r(310));St=s,s={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},bn===null?Qe.memoizedState=bn=s:bn=bn.next=s}return bn}function ld(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cu(s){var i=lu;return lu+=1,Kl===null&&(Kl=[]),s=lb(Kl,s,i),i=Qe,(bn===null?i.memoizedState:bn.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?e1:Rg),s}function cd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return cu(s);if(s.$$typeof===Q)return $n(s)}throw Error(r(438,String(s)))}function vg(s){var i=null,o=Qe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Qe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=ld(),Qe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),u=0;u<s;u++)o[u]=$;return i.index++,o}function ia(s,i){return typeof i=="function"?i(s):i}function ud(s){var i=mn();return bg(i,St,s)}function bg(s,i,o){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var g=s.baseQueue,y=u.pending;if(y!==null){if(g!==null){var w=g.next;g.next=y.next,y.next=w}i.baseQueue=g=y,u.pending=null}if(y=s.baseState,g===null)s.memoizedState=y;else{i=g.next;var I=w=null,z=null,J=i,ae=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(it&he)===he:(sa&he)===he){var te=J.revertLane;if(te===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===Bl&&(ae=!0);else if((sa&te)===te){J=J.next,te===Bl&&(ae=!0);continue}else he={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},z===null?(I=z=he,w=y):z=z.next=he,Qe.lanes|=te,Xa|=te;he=J.action,Jo&&o(y,he),y=J.hasEagerState?J.eagerState:o(y,he)}else te={lane:he,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},z===null?(I=z=te,w=y):z=z.next=te,Qe.lanes|=he,Xa|=he;J=J.next}while(J!==null&&J!==i);if(z===null?w=y:z.next=I,!Zr(y,s.memoizedState)&&(xn=!0,ae&&(o=zl,o!==null)))throw o;s.memoizedState=y,s.baseState=w,s.baseQueue=z,u.lastRenderedState=y}return g===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function xg(s){var i=mn(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var u=o.dispatch,g=o.pending,y=i.memoizedState;if(g!==null){o.pending=null;var w=g=g.next;do y=s(y,w.action),w=w.next;while(w!==g);Zr(y,i.memoizedState)||(xn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function xb(s,i,o){var u=Qe,g=mn(),y=dt;if(y){if(o===void 0)throw Error(r(407));o=o()}else o=i();var w=!Zr((St||g).memoizedState,o);if(w&&(g.memoizedState=o,xn=!0),g=g.queue,wg(wb.bind(null,u,g,s),[s]),g.getSnapshot!==i||w||bn!==null&&bn.memoizedState.tag&1){if(u.flags|=2048,Ql(9,{destroy:void 0},Eb.bind(null,u,g,o,i),null),It===null)throw Error(r(349));y||(sa&127)!==0||_b(u,i,o)}return o}function _b(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=Qe.updateQueue,i===null?(i=ld(),Qe.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function Eb(s,i,o,u){i.value=o,i.getSnapshot=u,Tb(i)&&Ab(s)}function wb(s,i,o){return o(function(){Tb(i)&&Ab(s)})}function Tb(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!Zr(s,o)}catch{return!0}}function Ab(s){var i=Fo(s,2);i!==null&&Vr(i,s,2)}function _g(s){var i=Er();if(typeof s=="function"){var o=s;if(s=o(),Jo){Sn(!0);try{o()}finally{Sn(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:s},i}function Sb(s,i,o,u){return s.baseState=o,bg(s,St,typeof u=="function"?u:ia)}function d2(s,i,o,u,g){if(fd(s))throw Error(r(485));if(s=i.action,s!==null){var y={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};H.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,Nb(i,y)):(y.next=o.next,i.pending=o.next=y)}}function Nb(s,i){var o=i.action,u=i.payload,g=s.state;if(i.isTransition){var y=H.T,w={};H.T=w;try{var I=o(g,u),z=H.S;z!==null&&z(w,I),Cb(s,i,I)}catch(J){Eg(s,i,J)}finally{y!==null&&w.types!==null&&(y.types=w.types),H.T=y}}else try{y=o(g,u),Cb(s,i,y)}catch(J){Eg(s,i,J)}}function Cb(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Rb(s,i,u)},function(u){return Eg(s,i,u)}):Rb(s,i,o)}function Rb(s,i,o){i.status="fulfilled",i.value=o,Ib(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,Nb(s,o)))}function Eg(s,i,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Ib(i),i=i.next;while(i!==u)}s.action=null}function Ib(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function jb(s,i){return i}function Ob(s,i){if(dt){var o=It.formState;if(o!==null){e:{var u=Qe;if(dt){if(Vt){t:{for(var g=Vt,y=Ss;g.nodeType!==8;){if(!y){g=null;break t}if(g=Cs(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Vt=Cs(g.nextSibling),u=g.data==="F!";break e}}Ba(u)}u=!1}u&&(i=o[0])}}return o=Er(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jb,lastRenderedState:i},o.queue=u,o=Wb.bind(null,Qe,u),u.dispatch=o,u=_g(!1),y=Cg.bind(null,Qe,!1,u.queue),u=Er(),g={state:i,dispatch:null,action:s,pending:null},u.queue=g,o=d2.bind(null,Qe,g,y,o),g.dispatch=o,u.memoizedState=s,[i,o,!1]}function Db(s){var i=mn();return Lb(i,St,s)}function Lb(s,i,o){if(i=bg(s,i,jb)[0],s=ud(ia)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=cu(i)}catch(w){throw w===Hl?ed:w}else u=i;i=mn();var g=i.queue,y=g.dispatch;return o!==i.memoizedState&&(Qe.flags|=2048,Ql(9,{destroy:void 0},f2.bind(null,g,o),null)),[u,y,s]}function f2(s,i){s.action=i}function kb(s){var i=mn(),o=St;if(o!==null)return Lb(i,o,s);mn(),i=i.memoizedState,o=mn();var u=o.queue.dispatch;return o.memoizedState=s,[i,u,!1]}function Ql(s,i,o,u){return s={tag:s,create:o,deps:u,inst:i,next:null},i=Qe.updateQueue,i===null&&(i=ld(),Qe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,i.lastEffect=s),s}function Mb(){return mn().memoizedState}function hd(s,i,o,u){var g=Er();Qe.flags|=s,g.memoizedState=Ql(1|i,{destroy:void 0},o,u===void 0?null:u)}function dd(s,i,o,u){var g=mn();u=u===void 0?null:u;var y=g.memoizedState.inst;St!==null&&u!==null&&fg(u,St.memoizedState.deps)?g.memoizedState=Ql(i,y,o,u):(Qe.flags|=s,g.memoizedState=Ql(1|i,y,o,u))}function Pb(s,i){hd(8390656,8,s,i)}function wg(s,i){dd(2048,8,s,i)}function m2(s){Qe.flags|=4;var i=Qe.updateQueue;if(i===null)i=ld(),Qe.updateQueue=i,i.events=[s];else{var o=i.events;o===null?i.events=[s]:o.push(s)}}function Ub(s){var i=mn().memoizedState;return m2({ref:i,nextImpl:s}),function(){if((xt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Vb(s,i){return dd(4,2,s,i)}function qb(s,i){return dd(4,4,s,i)}function Bb(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function zb(s,i,o){o=o!=null?o.concat([s]):null,dd(4,4,Bb.bind(null,i,s),o)}function Tg(){}function Hb(s,i){var o=mn();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&fg(i,u[1])?u[0]:(o.memoizedState=[s,i],s)}function Fb(s,i){var o=mn();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&fg(i,u[1]))return u[0];if(u=s(),Jo){Sn(!0);try{s()}finally{Sn(!1)}}return o.memoizedState=[u,i],u}function Ag(s,i,o){return o===void 0||(sa&1073741824)!==0&&(it&261930)===0?s.memoizedState=i:(s.memoizedState=o,s=$1(),Qe.lanes|=s,Xa|=s,o)}function $b(s,i,o,u){return Zr(o,i)?o:$l.current!==null?(s=Ag(s,o,u),Zr(s,i)||(xn=!0),s):(sa&42)===0||(sa&1073741824)!==0&&(it&261930)===0?(xn=!0,s.memoizedState=o):(s=$1(),Qe.lanes|=s,Xa|=s,i)}function Gb(s,i,o,u,g){var y=ee.p;ee.p=y!==0&&8>y?y:8;var w=H.T,I={};H.T=I,Cg(s,!1,i,o);try{var z=g(),J=H.S;if(J!==null&&J(I,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ae=c2(z,u);uu(s,i,ae,ss(s))}else uu(s,i,u,ss(s))}catch(he){uu(s,i,{then:function(){},status:"rejected",reason:he},ss())}finally{ee.p=y,w!==null&&I.types!==null&&(w.types=I.types),H.T=w}}function g2(){}function Sg(s,i,o,u){if(s.tag!==5)throw Error(r(476));var g=Kb(s).queue;Gb(s,g,i,ue,o===null?g2:function(){return Qb(s),o(u)})}function Kb(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:ue},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function Qb(s){var i=Kb(s);i.next===null&&(i=s.alternate.memoizedState),uu(s,i.next.queue,{},ss())}function Ng(){return $n(Nu)}function Yb(){return mn().memoizedState}function Xb(){return mn().memoizedState}function p2(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=ss();s=Fa(o);var u=$a(i,s,o);u!==null&&(Vr(u,i,o),iu(u,i,o)),i={cache:ng()},s.payload=i;return}i=i.return}}function y2(s,i,o){var u=ss();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},fd(s)?Zb(i,o):(o=$m(s,i,o,u),o!==null&&(Vr(o,s,u),Jb(o,i,u)))}function Wb(s,i,o){var u=ss();uu(s,i,o,u)}function uu(s,i,o,u){var g={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(fd(s))Zb(i,g);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var w=i.lastRenderedState,I=y(w,o);if(g.hasEagerState=!0,g.eagerState=I,Zr(I,w))return Kh(s,i,g,0),It===null&&Gh(),!1}catch{}finally{}if(o=$m(s,i,g,u),o!==null)return Vr(o,s,u),Jb(o,i,u),!0}return!1}function Cg(s,i,o,u){if(u={lane:2,revertLane:ap(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},fd(s)){if(i)throw Error(r(479))}else i=$m(s,o,u,2),i!==null&&Vr(i,s,2)}function fd(s){var i=s.alternate;return s===Qe||i!==null&&i===Qe}function Zb(s,i){Gl=ad=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function Jb(s,i,o){if((o&4194048)!==0){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,$i(s,o)}}var hu={readContext:$n,use:cd,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on};hu.useEffectEvent=on;var e1={readContext:$n,use:cd,useCallback:function(s,i){return Er().memoizedState=[s,i===void 0?null:i],s},useContext:$n,useEffect:Pb,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,hd(4194308,4,Bb.bind(null,i,s),o)},useLayoutEffect:function(s,i){return hd(4194308,4,s,i)},useInsertionEffect:function(s,i){hd(4,2,s,i)},useMemo:function(s,i){var o=Er();i=i===void 0?null:i;var u=s();if(Jo){Sn(!0);try{s()}finally{Sn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(s,i,o){var u=Er();if(o!==void 0){var g=o(i);if(Jo){Sn(!0);try{o(i)}finally{Sn(!1)}}}else g=i;return u.memoizedState=u.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},u.queue=s,s=s.dispatch=y2.bind(null,Qe,s),[u.memoizedState,s]},useRef:function(s){var i=Er();return s={current:s},i.memoizedState=s},useState:function(s){s=_g(s);var i=s.queue,o=Wb.bind(null,Qe,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:Tg,useDeferredValue:function(s,i){var o=Er();return Ag(o,s,i)},useTransition:function(){var s=_g(!1);return s=Gb.bind(null,Qe,s.queue,!0,!1),Er().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var u=Qe,g=Er();if(dt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),It===null)throw Error(r(349));(it&127)!==0||_b(u,i,o)}g.memoizedState=o;var y={value:o,getSnapshot:i};return g.queue=y,Pb(wb.bind(null,u,y,s),[s]),u.flags|=2048,Ql(9,{destroy:void 0},Eb.bind(null,u,y,o,i),null),o},useId:function(){var s=Er(),i=It.identifierPrefix;if(dt){var o=bi,u=vi;o=(u&~(1<<32-Dt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=od++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=u2++,i="_"+i+"r_"+o.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:Ng,useFormState:Ob,useActionState:Ob,useOptimistic:function(s){var i=Er();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Cg.bind(null,Qe,!0,o),o.dispatch=i,[s,i]},useMemoCache:vg,useCacheRefresh:function(){return Er().memoizedState=p2.bind(null,Qe)},useEffectEvent:function(s){var i=Er(),o={impl:s};return i.memoizedState=o,function(){if((xt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Rg={readContext:$n,use:cd,useCallback:Hb,useContext:$n,useEffect:wg,useImperativeHandle:zb,useInsertionEffect:Vb,useLayoutEffect:qb,useMemo:Fb,useReducer:ud,useRef:Mb,useState:function(){return ud(ia)},useDebugValue:Tg,useDeferredValue:function(s,i){var o=mn();return $b(o,St.memoizedState,s,i)},useTransition:function(){var s=ud(ia)[0],i=mn().memoizedState;return[typeof s=="boolean"?s:cu(s),i]},useSyncExternalStore:xb,useId:Yb,useHostTransitionStatus:Ng,useFormState:Db,useActionState:Db,useOptimistic:function(s,i){var o=mn();return Sb(o,St,s,i)},useMemoCache:vg,useCacheRefresh:Xb};Rg.useEffectEvent=Ub;var t1={readContext:$n,use:cd,useCallback:Hb,useContext:$n,useEffect:wg,useImperativeHandle:zb,useInsertionEffect:Vb,useLayoutEffect:qb,useMemo:Fb,useReducer:xg,useRef:Mb,useState:function(){return xg(ia)},useDebugValue:Tg,useDeferredValue:function(s,i){var o=mn();return St===null?Ag(o,s,i):$b(o,St.memoizedState,s,i)},useTransition:function(){var s=xg(ia)[0],i=mn().memoizedState;return[typeof s=="boolean"?s:cu(s),i]},useSyncExternalStore:xb,useId:Yb,useHostTransitionStatus:Ng,useFormState:kb,useActionState:kb,useOptimistic:function(s,i){var o=mn();return St!==null?Sb(o,St,s,i):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:vg,useCacheRefresh:Xb};t1.useEffectEvent=Ub;function Ig(s,i,o,u){i=s.memoizedState,o=o(u,i),o=o==null?i:_({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var jg={enqueueSetState:function(s,i,o){s=s._reactInternals;var u=ss(),g=Fa(u);g.payload=i,o!=null&&(g.callback=o),i=$a(s,g,u),i!==null&&(Vr(i,s,u),iu(i,s,u))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var u=ss(),g=Fa(u);g.tag=1,g.payload=i,o!=null&&(g.callback=o),i=$a(s,g,u),i!==null&&(Vr(i,s,u),iu(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=ss(),u=Fa(o);u.tag=2,i!=null&&(u.callback=i),i=$a(s,u,o),i!==null&&(Vr(i,s,o),iu(i,s,o))}};function n1(s,i,o,u,g,y,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,y,w):i.prototype&&i.prototype.isPureReactComponent?!Wc(o,u)||!Wc(g,y):!0}function r1(s,i,o,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==s&&jg.enqueueReplaceState(i,i.state,null)}function el(s,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(s=s.defaultProps){o===i&&(o=_({},o));for(var g in s)o[g]===void 0&&(o[g]=s[g])}return o}function s1(s){$h(s)}function i1(s){console.error(s)}function a1(s){$h(s)}function md(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function o1(s,i,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Og(s,i,o){return o=Fa(o),o.tag=3,o.payload={element:null},o.callback=function(){md(s,i)},o}function l1(s){return s=Fa(s),s.tag=3,s}function c1(s,i,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;s.payload=function(){return g(y)},s.callback=function(){o1(i,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){o1(i,o,u),typeof g!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function v2(s,i,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&ql(i,o,g,!0),o=es.current,o!==null){switch(o.tag){case 31:case 13:return Ns===null?Sd():o.alternate===null&&ln===0&&(ln=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===td?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),rp(s,u,g)),!1;case 22:return o.flags|=65536,u===td?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),rp(s,u,g)),!1}throw Error(r(435,o.tag))}return rp(s,u,g),Sd(),!1}if(dt)return i=es.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,u!==Wm&&(s=Error(r(422),{cause:u}),eu(ws(s,o)))):(u!==Wm&&(i=Error(r(423),{cause:u}),eu(ws(i,o))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,u=ws(u,o),g=Og(s.stateNode,u,g),lg(s,g),ln!==4&&(ln=2)),!1;var y=Error(r(520),{cause:u});if(y=ws(y,o),bu===null?bu=[y]:bu.push(y),ln!==4&&(ln=2),i===null)return!0;u=ws(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=g&-g,o.lanes|=s,s=Og(o.stateNode,u,s),lg(o,s),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Wa===null||!Wa.has(y))))return o.flags|=65536,g&=-g,o.lanes|=g,g=l1(g),c1(g,s,o,u),lg(o,g),!1}o=o.return}while(o!==null);return!1}var Dg=Error(r(461)),xn=!1;function Gn(s,i,o,u){i.child=s===null?fb(i,null,o,u):Zo(i,s.child,o,u)}function u1(s,i,o,u,g){o=o.render;var y=i.ref;if("ref"in u){var w={};for(var I in u)I!=="ref"&&(w[I]=u[I])}else w=u;return Qo(i),u=mg(s,i,o,w,y,g),I=gg(),s!==null&&!xn?(pg(s,i,g),aa(s,i,g)):(dt&&I&&Ym(i),i.flags|=1,Gn(s,i,u,g),i.child)}function h1(s,i,o,u,g){if(s===null){var y=o.type;return typeof y=="function"&&!Gm(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,d1(s,i,y,u,g)):(s=Yh(o.type,null,u,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(y=s.child,!Bg(s,g)){var w=y.memoizedProps;if(o=o.compare,o=o!==null?o:Wc,o(w,u)&&s.ref===i.ref)return aa(s,i,g)}return i.flags|=1,s=ea(y,u),s.ref=i.ref,s.return=i,i.child=s}function d1(s,i,o,u,g){if(s!==null){var y=s.memoizedProps;if(Wc(y,u)&&s.ref===i.ref)if(xn=!1,i.pendingProps=u=y,Bg(s,g))(s.flags&131072)!==0&&(xn=!0);else return i.lanes=s.lanes,aa(s,i,g)}return Lg(s,i,o,u,g)}function f1(s,i,o,u){var g=u.children,y=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,s!==null){for(u=i.child=s.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~y}else u=0,i.child=null;return m1(s,i,y,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&Jh(i,y!==null?y.cachePool:null),y!==null?pb(i,y):ug(),yb(i);else return u=i.lanes=536870912,m1(s,i,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(Jh(i,y.cachePool),pb(i,y),Ka(),i.memoizedState=null):(s!==null&&Jh(i,null),ug(),Ka());return Gn(s,i,g,o),i.child}function du(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function m1(s,i,o,u,g){var y=sg();return y=y===null?null:{parent:vn._currentValue,pool:y},i.memoizedState={baseLanes:o,cachePool:y},s!==null&&Jh(i,null),ug(),yb(i),s!==null&&ql(s,i,u,!0),i.childLanes=g,null}function gd(s,i){return i=yd({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function g1(s,i,o){return Zo(i,s.child,null,o),s=gd(i,i.pendingProps),s.flags|=2,ts(i),i.memoizedState=null,s}function b2(s,i,o){var u=i.pendingProps,g=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(dt){if(u.mode==="hidden")return s=gd(i,u),i.lanes=536870912,du(null,s);if(dg(i),(s=Vt)?(s=Nx(s,Ss),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Va!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=Wv(s),o.return=i,i.child=o,Fn=i,Vt=null)):s=null,s===null)throw Ba(i);return i.lanes=536870912,null}return gd(i,u)}var y=s.memoizedState;if(y!==null){var w=y.dehydrated;if(dg(i),g)if(i.flags&256)i.flags&=-257,i=g1(s,i,o);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(r(558));else if(xn||ql(s,i,o,!1),g=(o&s.childLanes)!==0,xn||g){if(u=It,u!==null&&(w=Gi(u,o),w!==0&&w!==y.retryLane))throw y.retryLane=w,Fo(s,w),Vr(u,s,w),Dg;Sd(),i=g1(s,i,o)}else s=y.treeContext,Vt=Cs(w.nextSibling),Fn=i,dt=!0,qa=null,Ss=!1,s!==null&&eb(i,s),i=gd(i,u),i.flags|=4096;return i}return s=ea(s.child,{mode:u.mode,children:u.children}),s.ref=i.ref,i.child=s,s.return=i,s}function pd(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(i.flags|=4194816)}}function Lg(s,i,o,u,g){return Qo(i),o=mg(s,i,o,u,void 0,g),u=gg(),s!==null&&!xn?(pg(s,i,g),aa(s,i,g)):(dt&&u&&Ym(i),i.flags|=1,Gn(s,i,o,g),i.child)}function p1(s,i,o,u,g,y){return Qo(i),i.updateQueue=null,o=bb(i,u,o,g),vb(s),u=gg(),s!==null&&!xn?(pg(s,i,y),aa(s,i,y)):(dt&&u&&Ym(i),i.flags|=1,Gn(s,i,o,y),i.child)}function y1(s,i,o,u,g){if(Qo(i),i.stateNode===null){var y=Ml,w=o.contextType;typeof w=="object"&&w!==null&&(y=$n(w)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=jg,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},ag(i),w=o.contextType,y.context=typeof w=="object"&&w!==null?$n(w):Ml,y.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Ig(i,o,w,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&jg.enqueueReplaceState(y,y.state,null),ou(i,u,y,g),au(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){y=i.stateNode;var I=i.memoizedProps,z=el(o,I);y.props=z;var J=y.context,ae=o.contextType;w=Ml,typeof ae=="object"&&ae!==null&&(w=$n(ae));var he=o.getDerivedStateFromProps;ae=typeof he=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,ae||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||J!==w)&&r1(i,y,u,w),Ha=!1;var te=i.memoizedState;y.state=te,ou(i,u,y,g),au(),J=i.memoizedState,I||te!==J||Ha?(typeof he=="function"&&(Ig(i,o,he,u),J=i.memoizedState),(z=Ha||n1(i,o,z,u,te,J,w))?(ae||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=J),y.props=u,y.state=J,y.context=w,u=z):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,og(s,i),w=i.memoizedProps,ae=el(o,w),y.props=ae,he=i.pendingProps,te=y.context,J=o.contextType,z=Ml,typeof J=="object"&&J!==null&&(z=$n(J)),I=o.getDerivedStateFromProps,(J=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==he||te!==z)&&r1(i,y,u,z),Ha=!1,te=i.memoizedState,y.state=te,ou(i,u,y,g),au();var se=i.memoizedState;w!==he||te!==se||Ha||s!==null&&s.dependencies!==null&&Wh(s.dependencies)?(typeof I=="function"&&(Ig(i,o,I,u),se=i.memoizedState),(ae=Ha||n1(i,o,ae,u,te,se,z)||s!==null&&s.dependencies!==null&&Wh(s.dependencies))?(J||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,se,z),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,se,z)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=se),y.props=u,y.state=se,y.context=z,u=ae):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),u=!1)}return y=u,pd(s,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,s!==null&&u?(i.child=Zo(i,s.child,null,g),i.child=Zo(i,null,o,g)):Gn(s,i,o,g),i.memoizedState=y.state,s=i.child):s=aa(s,i,g),s}function v1(s,i,o,u){return Go(),i.flags|=256,Gn(s,i,o,u),i.child}var kg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mg(s){return{baseLanes:s,cachePool:ab()}}function Pg(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=rs),s}function b1(s,i,o){var u=i.pendingProps,g=!1,y=(i.flags&128)!==0,w;if((w=y)||(w=s!==null&&s.memoizedState===null?!1:(fn.current&2)!==0),w&&(g=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,s===null){if(dt){if(g?Ga(i):Ka(),(s=Vt)?(s=Nx(s,Ss),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Va!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=Wv(s),o.return=i,i.child=o,Fn=i,Vt=null)):s=null,s===null)throw Ba(i);return bp(s)?i.lanes=32:i.lanes=536870912,null}var I=u.children;return u=u.fallback,g?(Ka(),g=i.mode,I=yd({mode:"hidden",children:I},g),u=$o(u,g,o,null),I.return=i,u.return=i,I.sibling=u,i.child=I,u=i.child,u.memoizedState=Mg(o),u.childLanes=Pg(s,w,o),i.memoizedState=kg,du(null,u)):(Ga(i),Ug(i,I))}var z=s.memoizedState;if(z!==null&&(I=z.dehydrated,I!==null)){if(y)i.flags&256?(Ga(i),i.flags&=-257,i=Vg(s,i,o)):i.memoizedState!==null?(Ka(),i.child=s.child,i.flags|=128,i=null):(Ka(),I=u.fallback,g=i.mode,u=yd({mode:"visible",children:u.children},g),I=$o(I,g,o,null),I.flags|=2,u.return=i,I.return=i,u.sibling=I,i.child=u,Zo(i,s.child,null,o),u=i.child,u.memoizedState=Mg(o),u.childLanes=Pg(s,w,o),i.memoizedState=kg,i=du(null,u));else if(Ga(i),bp(I)){if(w=I.nextSibling&&I.nextSibling.dataset,w)var J=w.dgst;w=J,u=Error(r(419)),u.stack="",u.digest=w,eu({value:u,source:null,stack:null}),i=Vg(s,i,o)}else if(xn||ql(s,i,o,!1),w=(o&s.childLanes)!==0,xn||w){if(w=It,w!==null&&(u=Gi(w,o),u!==0&&u!==z.retryLane))throw z.retryLane=u,Fo(s,u),Vr(w,s,u),Dg;vp(I)||Sd(),i=Vg(s,i,o)}else vp(I)?(i.flags|=192,i.child=s.child,i=null):(s=z.treeContext,Vt=Cs(I.nextSibling),Fn=i,dt=!0,qa=null,Ss=!1,s!==null&&eb(i,s),i=Ug(i,u.children),i.flags|=4096);return i}return g?(Ka(),I=u.fallback,g=i.mode,z=s.child,J=z.sibling,u=ea(z,{mode:"hidden",children:u.children}),u.subtreeFlags=z.subtreeFlags&65011712,J!==null?I=ea(J,I):(I=$o(I,g,o,null),I.flags|=2),I.return=i,u.return=i,u.sibling=I,i.child=u,du(null,u),u=i.child,I=s.child.memoizedState,I===null?I=Mg(o):(g=I.cachePool,g!==null?(z=vn._currentValue,g=g.parent!==z?{parent:z,pool:z}:g):g=ab(),I={baseLanes:I.baseLanes|o,cachePool:g}),u.memoizedState=I,u.childLanes=Pg(s,w,o),i.memoizedState=kg,du(s.child,u)):(Ga(i),o=s.child,s=o.sibling,o=ea(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,s!==null&&(w=i.deletions,w===null?(i.deletions=[s],i.flags|=16):w.push(s)),i.child=o,i.memoizedState=null,o)}function Ug(s,i){return i=yd({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function yd(s,i){return s=Jr(22,s,null,i),s.lanes=0,s}function Vg(s,i,o){return Zo(i,s.child,null,o),s=Ug(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function x1(s,i,o){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),eg(s.return,i,o)}function qg(s,i,o,u,g,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g,treeForkCount:y}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=o,w.tailMode=g,w.treeForkCount=y)}function _1(s,i,o){var u=i.pendingProps,g=u.revealOrder,y=u.tail;u=u.children;var w=fn.current,I=(w&2)!==0;if(I?(w=w&1|2,i.flags|=128):w&=1,de(fn,w),Gn(s,i,u,o),u=dt?Jc:0,!I&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&x1(s,o,i);else if(s.tag===19)x1(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(o=i.child,g=null;o!==null;)s=o.alternate,s!==null&&id(s)===null&&(g=o),o=o.sibling;o=g,o===null?(g=i.child,i.child=null):(g=o.sibling,o.sibling=null),qg(i,!1,g,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&id(s)===null){i.child=g;break}s=g.sibling,g.sibling=o,o=g,g=s}qg(i,!0,o,null,y,u);break;case"together":qg(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function aa(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),Xa|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(ql(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,o=ea(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=ea(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function Bg(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&Wh(s)))}function x2(s,i,o){switch(i.tag){case 3:je(i,i.stateNode.containerInfo),za(i,vn,s.memoizedState.cache),Go();break;case 27:case 5:We(i);break;case 4:je(i,i.stateNode.containerInfo);break;case 10:za(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,dg(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ga(i),i.flags|=128,null):(o&i.child.childLanes)!==0?b1(s,i,o):(Ga(i),s=aa(s,i,o),s!==null?s.sibling:null);Ga(i);break;case 19:var g=(s.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(ql(s,i,o,!1),u=(o&i.childLanes)!==0),g){if(u)return _1(s,i,o);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),de(fn,fn.current),u)break;return null;case 22:return i.lanes=0,f1(s,i,o,i.pendingProps);case 24:za(i,vn,s.memoizedState.cache)}return aa(s,i,o)}function E1(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)xn=!0;else{if(!Bg(s,o)&&(i.flags&128)===0)return xn=!1,x2(s,i,o);xn=(s.flags&131072)!==0}else xn=!1,dt&&(i.flags&1048576)!==0&&Jv(i,Jc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(s=Xo(i.elementType),i.type=s,typeof s=="function")Gm(s)?(u=el(s,u),i.tag=1,i=y1(null,i,s,u,o)):(i.tag=0,i=Lg(null,i,s,u,o));else{if(s!=null){var g=s.$$typeof;if(g===Y){i.tag=11,i=u1(null,i,s,u,o);break e}else if(g===L){i.tag=14,i=h1(null,i,s,u,o);break e}}throw i=pe(s)||s,Error(r(306,i,""))}}return i;case 0:return Lg(s,i,i.type,i.pendingProps,o);case 1:return u=i.type,g=el(u,i.pendingProps),y1(s,i,u,g,o);case 3:e:{if(je(i,i.stateNode.containerInfo),s===null)throw Error(r(387));u=i.pendingProps;var y=i.memoizedState;g=y.element,og(s,i),ou(i,u,null,o);var w=i.memoizedState;if(u=w.cache,za(i,vn,u),u!==y.cache&&tg(i,[vn],o,!0),au(),u=w.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=v1(s,i,u,o);break e}else if(u!==g){g=ws(Error(r(424)),i),eu(g),i=v1(s,i,u,o);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Vt=Cs(s.firstChild),Fn=i,dt=!0,qa=null,Ss=!0,o=fb(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Go(),u===g){i=aa(s,i,o);break e}Gn(s,i,u,o)}i=i.child}return i;case 26:return pd(s,i),s===null?(o=Dx(i.type,null,i.pendingProps,null))?i.memoizedState=o:dt||(o=i.type,s=i.pendingProps,u=Dd(Ae.current).createElement(o),u[Ft]=i,u[sn]=s,Kn(u,o,s),$t(u),i.stateNode=u):i.memoizedState=Dx(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return We(i),s===null&&dt&&(u=i.stateNode=Ix(i.type,i.pendingProps,Ae.current),Fn=i,Ss=!0,g=Vt,to(i.type)?(xp=g,Vt=Cs(u.firstChild)):Vt=g),Gn(s,i,i.pendingProps.children,o),pd(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&dt&&((g=u=Vt)&&(u=X2(u,i.type,i.pendingProps,Ss),u!==null?(i.stateNode=u,Fn=i,Vt=Cs(u.firstChild),Ss=!1,g=!0):g=!1),g||Ba(i)),We(i),g=i.type,y=i.pendingProps,w=s!==null?s.memoizedProps:null,u=y.children,gp(g,y)?u=null:w!==null&&gp(g,w)&&(i.flags|=32),i.memoizedState!==null&&(g=mg(s,i,h2,null,null,o),Nu._currentValue=g),pd(s,i),Gn(s,i,u,o),i.child;case 6:return s===null&&dt&&((s=o=Vt)&&(o=W2(o,i.pendingProps,Ss),o!==null?(i.stateNode=o,Fn=i,Vt=null,s=!0):s=!1),s||Ba(i)),null;case 13:return b1(s,i,o);case 4:return je(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=Zo(i,null,u,o):Gn(s,i,u,o),i.child;case 11:return u1(s,i,i.type,i.pendingProps,o);case 7:return Gn(s,i,i.pendingProps,o),i.child;case 8:return Gn(s,i,i.pendingProps.children,o),i.child;case 12:return Gn(s,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,za(i,i.type,u.value),Gn(s,i,u.children,o),i.child;case 9:return g=i.type._context,u=i.pendingProps.children,Qo(i),g=$n(g),u=u(g),i.flags|=1,Gn(s,i,u,o),i.child;case 14:return h1(s,i,i.type,i.pendingProps,o);case 15:return d1(s,i,i.type,i.pendingProps,o);case 19:return _1(s,i,o);case 31:return b2(s,i,o);case 22:return f1(s,i,o,i.pendingProps);case 24:return Qo(i),u=$n(vn),s===null?(g=sg(),g===null&&(g=It,y=ng(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=o),g=y),i.memoizedState={parent:u,cache:g},ag(i),za(i,vn,g)):((s.lanes&o)!==0&&(og(s,i),ou(i,null,null,o),au()),g=s.memoizedState,y=i.memoizedState,g.parent!==u?(g={parent:u,cache:u},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),za(i,vn,u)):(u=y.cache,za(i,vn,u),u!==g.cache&&tg(i,[vn],o,!0))),Gn(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function oa(s){s.flags|=4}function zg(s,i,o,u,g){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(Y1())s.flags|=8192;else throw Wo=td,ig}else s.flags&=-16777217}function w1(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Ux(i))if(Y1())s.flags|=8192;else throw Wo=td,ig}function vd(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?ci():536870912,s.lanes|=i,Zl|=i)}function fu(s,i){if(!dt)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function qt(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(i)for(var g=s.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=u,s.childLanes=o,i}function _2(s,i,o){var u=i.pendingProps;switch(Xm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(i),null;case 1:return qt(i),null;case 3:return o=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ra(vn),ke(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(Vl(i)?oa(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Zm())),qt(i),null;case 26:var g=i.type,y=i.memoizedState;return s===null?(oa(i),y!==null?(qt(i),w1(i,y)):(qt(i),zg(i,g,null,u,o))):y?y!==s.memoizedState?(oa(i),qt(i),w1(i,y)):(qt(i),i.flags&=-16777217):(s=s.memoizedProps,s!==u&&oa(i),qt(i),zg(i,g,s,u,o)),null;case 27:if(et(i),o=Ae.current,g=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&oa(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return qt(i),null}s=me.current,Vl(i)?tb(i):(s=Ix(g,u,o),i.stateNode=s,oa(i))}return qt(i),null;case 5:if(et(i),g=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&oa(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return qt(i),null}if(y=me.current,Vl(i))tb(i);else{var w=Dd(Ae.current);switch(y){case 1:y=w.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=w.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=w.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=w.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=w.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?w.createElement(g,{is:u.is}):w.createElement(g)}}y[Ft]=i,y[sn]=u;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)y.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=y;e:switch(Kn(y,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&oa(i)}}return qt(i),zg(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,o),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&oa(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=Ae.current,Vl(i)){if(s=i.stateNode,o=i.memoizedProps,u=null,g=Fn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}s[Ft]=i,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||bx(s.nodeValue,o)),s||Ba(i,!0)}else s=Dd(s).createTextNode(u),s[Ft]=i,i.stateNode=s}return qt(i),null;case 31:if(o=i.memoizedState,s===null||s.memoizedState!==null){if(u=Vl(i),o!==null){if(s===null){if(!u)throw Error(r(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Ft]=i}else Go(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),s=!1}else o=Zm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return i.flags&256?(ts(i),i):(ts(i),null);if((i.flags&128)!==0)throw Error(r(558))}return qt(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Vl(i),u!==null&&u.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Ft]=i}else Go(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),g=!1}else g=Zm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(ts(i),i):(ts(i),null)}return ts(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,s=s!==null&&s.memoizedState!==null,o&&(u=i.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)),o!==s&&o&&(i.child.flags|=8192),vd(i,i.updateQueue),qt(i),null);case 4:return ke(),s===null&&up(i.stateNode.containerInfo),qt(i),null;case 10:return ra(i.type),qt(i),null;case 19:if(W(fn),u=i.memoizedState,u===null)return qt(i),null;if(g=(i.flags&128)!==0,y=u.rendering,y===null)if(g)fu(u,!1);else{if(ln!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(y=id(s),y!==null){for(i.flags|=128,fu(u,!1),s=y.updateQueue,i.updateQueue=s,vd(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)Xv(o,s),o=o.sibling;return de(fn,fn.current&1|2),dt&&ta(i,u.treeForkCount),i.child}s=s.sibling}u.tail!==null&&Ot()>wd&&(i.flags|=128,g=!0,fu(u,!1),i.lanes=4194304)}else{if(!g)if(s=id(y),s!==null){if(i.flags|=128,g=!0,s=s.updateQueue,i.updateQueue=s,vd(i,s),fu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!dt)return qt(i),null}else 2*Ot()-u.renderingStartTime>wd&&o!==536870912&&(i.flags|=128,g=!0,fu(u,!1),i.lanes=4194304);u.isBackwards?(y.sibling=i.child,i.child=y):(s=u.last,s!==null?s.sibling=y:i.child=y,u.last=y)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=Ot(),s.sibling=null,o=fn.current,de(fn,g?o&1|2:o&1),dt&&ta(i,u.treeForkCount),s):(qt(i),null);case 22:case 23:return ts(i),hg(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(qt(i),i.subtreeFlags&6&&(i.flags|=8192)):qt(i),o=i.updateQueue,o!==null&&vd(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),s!==null&&W(Yo),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ra(vn),qt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function E2(s,i){switch(Xm(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return ra(vn),ke(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return et(i),null;case 31:if(i.memoizedState!==null){if(ts(i),i.alternate===null)throw Error(r(340));Go()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(ts(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Go()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return W(fn),null;case 4:return ke(),null;case 10:return ra(i.type),null;case 22:case 23:return ts(i),hg(),s!==null&&W(Yo),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return ra(vn),null;case 25:return null;default:return null}}function T1(s,i){switch(Xm(i),i.tag){case 3:ra(vn),ke();break;case 26:case 27:case 5:et(i);break;case 4:ke();break;case 31:i.memoizedState!==null&&ts(i);break;case 13:ts(i);break;case 19:W(fn);break;case 10:ra(i.type);break;case 22:case 23:ts(i),hg(),s!==null&&W(Yo);break;case 24:ra(vn)}}function mu(s,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&s)===s){u=void 0;var y=o.create,w=o.inst;u=y(),w.destroy=u}o=o.next}while(o!==g)}}catch(I){Tt(i,i.return,I)}}function Qa(s,i,o){try{var u=i.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&s)===s){var w=u.inst,I=w.destroy;if(I!==void 0){w.destroy=void 0,g=i;var z=o,J=I;try{J()}catch(ae){Tt(g,z,ae)}}}u=u.next}while(u!==y)}}catch(ae){Tt(i,i.return,ae)}}function A1(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{gb(i,o)}catch(u){Tt(s,s.return,u)}}}function S1(s,i,o){o.props=el(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){Tt(s,i,u)}}function gu(s,i){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(g){Tt(s,i,g)}}function xi(s,i){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){Tt(s,i,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){Tt(s,i,g)}else o.current=null}function N1(s){var i=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){Tt(s,s.return,g)}}function Hg(s,i,o){try{var u=s.stateNode;F2(u,s.type,o,i),u[sn]=i}catch(g){Tt(s,s.return,g)}}function C1(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&to(s.type)||s.tag===4}function Fg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||C1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&to(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function $g(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(s),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=sr));else if(u!==4&&(u===27&&to(s.type)&&(o=s.stateNode,i=null),s=s.child,s!==null))for($g(s,i,o),s=s.sibling;s!==null;)$g(s,i,o),s=s.sibling}function bd(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(u!==4&&(u===27&&to(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(bd(s,i,o),s=s.sibling;s!==null;)bd(s,i,o),s=s.sibling}function R1(s){var i=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);Kn(i,u,o),i[Ft]=s,i[sn]=o}catch(y){Tt(s,s.return,y)}}var la=!1,_n=!1,Gg=!1,I1=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function w2(s,i){if(s=s.containerInfo,fp=qd,s=Bv(s),Vm(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var w=0,I=-1,z=-1,J=0,ae=0,he=s,te=null;t:for(;;){for(var se;he!==o||g!==0&&he.nodeType!==3||(I=w+g),he!==y||u!==0&&he.nodeType!==3||(z=w+u),he.nodeType===3&&(w+=he.nodeValue.length),(se=he.firstChild)!==null;)te=he,he=se;for(;;){if(he===s)break t;if(te===o&&++J===g&&(I=w),te===y&&++ae===u&&(z=w),(se=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=se}o=I===-1||z===-1?null:{start:I,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(mp={focusedElem:s,selectionRange:o},qd=!1,Dn=i;Dn!==null;)if(i=Dn,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Dn=s;else for(;Dn!==null;){switch(i=Dn,y=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)g=s[o],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,o=i,g=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var Ne=el(o.type,g);s=u.getSnapshotBeforeUpdate(Ne,y),u.__reactInternalSnapshotBeforeUpdate=s}catch(Ve){Tt(o,o.return,Ve)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)yp(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":yp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Dn=s;break}Dn=i.return}}function j1(s,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ua(s,o),u&4&&mu(5,o);break;case 1:if(ua(s,o),u&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(w){Tt(o,o.return,w)}else{var g=el(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(g,i,s.__reactInternalSnapshotBeforeUpdate)}catch(w){Tt(o,o.return,w)}}u&64&&A1(o),u&512&&gu(o,o.return);break;case 3:if(ua(s,o),u&64&&(s=o.updateQueue,s!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{gb(s,i)}catch(w){Tt(o,o.return,w)}}break;case 27:i===null&&u&4&&R1(o);case 26:case 5:ua(s,o),i===null&&u&4&&N1(o),u&512&&gu(o,o.return);break;case 12:ua(s,o);break;case 31:ua(s,o),u&4&&L1(s,o);break;case 13:ua(s,o),u&4&&k1(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=O2.bind(null,o),Z2(s,o))));break;case 22:if(u=o.memoizedState!==null||la,!u){i=i!==null&&i.memoizedState!==null||_n,g=la;var y=_n;la=u,(_n=i)&&!y?ha(s,o,(o.subtreeFlags&8772)!==0):ua(s,o),la=g,_n=y}break;case 30:break;default:ua(s,o)}}function O1(s){var i=s.alternate;i!==null&&(s.alternate=null,O1(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&ui(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Xt=null,kr=!1;function ca(s,i,o){for(o=o.child;o!==null;)D1(s,i,o),o=o.sibling}function D1(s,i,o){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(gr,o)}catch{}switch(o.tag){case 26:_n||xi(o,i),ca(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:_n||xi(o,i);var u=Xt,g=kr;to(o.type)&&(Xt=o.stateNode,kr=!1),ca(s,i,o),Tu(o.stateNode),Xt=u,kr=g;break;case 5:_n||xi(o,i);case 6:if(u=Xt,g=kr,Xt=null,ca(s,i,o),Xt=u,kr=g,Xt!==null)if(kr)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(o.stateNode)}catch(y){Tt(o,i,y)}else try{Xt.removeChild(o.stateNode)}catch(y){Tt(o,i,y)}break;case 18:Xt!==null&&(kr?(s=Xt,Ax(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),ac(s)):Ax(Xt,o.stateNode));break;case 4:u=Xt,g=kr,Xt=o.stateNode.containerInfo,kr=!0,ca(s,i,o),Xt=u,kr=g;break;case 0:case 11:case 14:case 15:Qa(2,o,i),_n||Qa(4,o,i),ca(s,i,o);break;case 1:_n||(xi(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&S1(o,i,u)),ca(s,i,o);break;case 21:ca(s,i,o);break;case 22:_n=(u=_n)||o.memoizedState!==null,ca(s,i,o),_n=u;break;default:ca(s,i,o)}}function L1(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ac(s)}catch(o){Tt(i,i.return,o)}}}function k1(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ac(s)}catch(o){Tt(i,i.return,o)}}function T2(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new I1),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new I1),i;default:throw Error(r(435,s.tag))}}function xd(s,i){var o=T2(s);i.forEach(function(u){if(!o.has(u)){o.add(u);var g=D2.bind(null,s,u);u.then(g,g)}})}function Mr(s,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],y=s,w=i,I=w;e:for(;I!==null;){switch(I.tag){case 27:if(to(I.type)){Xt=I.stateNode,kr=!1;break e}break;case 5:Xt=I.stateNode,kr=!1;break e;case 3:case 4:Xt=I.stateNode.containerInfo,kr=!0;break e}I=I.return}if(Xt===null)throw Error(r(160));D1(y,w,g),Xt=null,kr=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)M1(i,s),i=i.sibling}var Ys=null;function M1(s,i){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Mr(i,s),Pr(s),u&4&&(Qa(3,s,s.return),mu(3,s),Qa(5,s,s.return));break;case 1:Mr(i,s),Pr(s),u&512&&(_n||o===null||xi(o,o.return)),u&64&&la&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=Ys;if(Mr(i,s),Pr(s),u&512&&(_n||o===null||xi(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Ir]||y[Ft]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),Kn(y,u,o),y[Ft]=s,$t(y),u=y;break e;case"link":var w=Mx("link","href",g).get(u+(o.href||""));if(w){for(var I=0;I<w.length;I++)if(y=w[I],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(I,1);break t}}y=g.createElement(u),Kn(y,u,o),g.head.appendChild(y);break;case"meta":if(w=Mx("meta","content",g).get(u+(o.content||""))){for(I=0;I<w.length;I++)if(y=w[I],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(I,1);break t}}y=g.createElement(u),Kn(y,u,o),g.head.appendChild(y);break;default:throw Error(r(468,u))}y[Ft]=s,$t(y),u=y}s.stateNode=u}else Px(g,s.type,s.stateNode);else s.stateNode=kx(g,u,s.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?Px(g,s.type,s.stateNode):kx(g,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Hg(s,s.memoizedProps,o.memoizedProps)}break;case 27:Mr(i,s),Pr(s),u&512&&(_n||o===null||xi(o,o.return)),o!==null&&u&4&&Hg(s,s.memoizedProps,o.memoizedProps);break;case 5:if(Mr(i,s),Pr(s),u&512&&(_n||o===null||xi(o,o.return)),s.flags&32){g=s.stateNode;try{Kt(g,"")}catch(Ne){Tt(s,s.return,Ne)}}u&4&&s.stateNode!=null&&(g=s.memoizedProps,Hg(s,g,o!==null?o.memoizedProps:g)),u&1024&&(Gg=!0);break;case 6:if(Mr(i,s),Pr(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(Ne){Tt(s,s.return,Ne)}}break;case 3:if(Md=null,g=Ys,Ys=Ld(i.containerInfo),Mr(i,s),Ys=g,Pr(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ac(i.containerInfo)}catch(Ne){Tt(s,s.return,Ne)}Gg&&(Gg=!1,P1(s));break;case 4:u=Ys,Ys=Ld(s.stateNode.containerInfo),Mr(i,s),Pr(s),Ys=u;break;case 12:Mr(i,s),Pr(s);break;case 31:Mr(i,s),Pr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,xd(s,u)));break;case 13:Mr(i,s),Pr(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ed=Ot()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,xd(s,u)));break;case 22:g=s.memoizedState!==null;var z=o!==null&&o.memoizedState!==null,J=la,ae=_n;if(la=J||g,_n=ae||z,Mr(i,s),_n=ae,la=J,Pr(s),u&8192)e:for(i=s.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(o===null||z||la||_n||tl(s)),o=null,i=s;;){if(i.tag===5||i.tag===26){if(o===null){z=o=i;try{if(y=z.stateNode,g)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{I=z.stateNode;var he=z.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;I.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ne){Tt(z,z.return,Ne)}}}else if(i.tag===6){if(o===null){z=i;try{z.stateNode.nodeValue=g?"":z.memoizedProps}catch(Ne){Tt(z,z.return,Ne)}}}else if(i.tag===18){if(o===null){z=i;try{var se=z.stateNode;g?Sx(se,!0):Sx(z.stateNode,!1)}catch(Ne){Tt(z,z.return,Ne)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,xd(s,o))));break;case 19:Mr(i,s),Pr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,xd(s,u)));break;case 30:break;case 21:break;default:Mr(i,s),Pr(s)}}function Pr(s){var i=s.flags;if(i&2){try{for(var o,u=s.return;u!==null;){if(C1(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var g=o.stateNode,y=Fg(s);bd(s,y,g);break;case 5:var w=o.stateNode;o.flags&32&&(Kt(w,""),o.flags&=-33);var I=Fg(s);bd(s,I,w);break;case 3:case 4:var z=o.stateNode.containerInfo,J=Fg(s);$g(s,J,z);break;default:throw Error(r(161))}}catch(ae){Tt(s,s.return,ae)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function P1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;P1(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function ua(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)j1(s,i.alternate,i),i=i.sibling}function tl(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Qa(4,i,i.return),tl(i);break;case 1:xi(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&S1(i,i.return,o),tl(i);break;case 27:Tu(i.stateNode);case 26:case 5:xi(i,i.return),tl(i);break;case 22:i.memoizedState===null&&tl(i);break;case 30:tl(i);break;default:tl(i)}s=s.sibling}}function ha(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,g=s,y=i,w=y.flags;switch(y.tag){case 0:case 11:case 15:ha(g,y,o),mu(4,y);break;case 1:if(ha(g,y,o),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(J){Tt(u,u.return,J)}if(u=y,g=u.updateQueue,g!==null){var I=u.stateNode;try{var z=g.shared.hiddenCallbacks;if(z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<z.length;g++)mb(z[g],I)}catch(J){Tt(u,u.return,J)}}o&&w&64&&A1(y),gu(y,y.return);break;case 27:R1(y);case 26:case 5:ha(g,y,o),o&&u===null&&w&4&&N1(y),gu(y,y.return);break;case 12:ha(g,y,o);break;case 31:ha(g,y,o),o&&w&4&&L1(g,y);break;case 13:ha(g,y,o),o&&w&4&&k1(g,y);break;case 22:y.memoizedState===null&&ha(g,y,o),gu(y,y.return);break;case 30:break;default:ha(g,y,o)}i=i.sibling}}function Kg(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&tu(o))}function Qg(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&tu(s))}function Xs(s,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)U1(s,i,o,u),i=i.sibling}function U1(s,i,o,u){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Xs(s,i,o,u),g&2048&&mu(9,i);break;case 1:Xs(s,i,o,u);break;case 3:Xs(s,i,o,u),g&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&tu(s)));break;case 12:if(g&2048){Xs(s,i,o,u),s=i.stateNode;try{var y=i.memoizedProps,w=y.id,I=y.onPostCommit;typeof I=="function"&&I(w,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(z){Tt(i,i.return,z)}}else Xs(s,i,o,u);break;case 31:Xs(s,i,o,u);break;case 13:Xs(s,i,o,u);break;case 23:break;case 22:y=i.stateNode,w=i.alternate,i.memoizedState!==null?y._visibility&2?Xs(s,i,o,u):pu(s,i):y._visibility&2?Xs(s,i,o,u):(y._visibility|=2,Yl(s,i,o,u,(i.subtreeFlags&10256)!==0||!1)),g&2048&&Kg(w,i);break;case 24:Xs(s,i,o,u),g&2048&&Qg(i.alternate,i);break;default:Xs(s,i,o,u)}}function Yl(s,i,o,u,g){for(g=g&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=s,w=i,I=o,z=u,J=w.flags;switch(w.tag){case 0:case 11:case 15:Yl(y,w,I,z,g),mu(8,w);break;case 23:break;case 22:var ae=w.stateNode;w.memoizedState!==null?ae._visibility&2?Yl(y,w,I,z,g):pu(y,w):(ae._visibility|=2,Yl(y,w,I,z,g)),g&&J&2048&&Kg(w.alternate,w);break;case 24:Yl(y,w,I,z,g),g&&J&2048&&Qg(w.alternate,w);break;default:Yl(y,w,I,z,g)}i=i.sibling}}function pu(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,u=i,g=u.flags;switch(u.tag){case 22:pu(o,u),g&2048&&Kg(u.alternate,u);break;case 24:pu(o,u),g&2048&&Qg(u.alternate,u);break;default:pu(o,u)}i=i.sibling}}var yu=8192;function Xl(s,i,o){if(s.subtreeFlags&yu)for(s=s.child;s!==null;)V1(s,i,o),s=s.sibling}function V1(s,i,o){switch(s.tag){case 26:Xl(s,i,o),s.flags&yu&&s.memoizedState!==null&&uC(o,Ys,s.memoizedState,s.memoizedProps);break;case 5:Xl(s,i,o);break;case 3:case 4:var u=Ys;Ys=Ld(s.stateNode.containerInfo),Xl(s,i,o),Ys=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=yu,yu=16777216,Xl(s,i,o),yu=u):Xl(s,i,o));break;default:Xl(s,i,o)}}function q1(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function vu(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Dn=u,z1(u,s)}q1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)B1(s),s=s.sibling}function B1(s){switch(s.tag){case 0:case 11:case 15:vu(s),s.flags&2048&&Qa(9,s,s.return);break;case 3:vu(s);break;case 12:vu(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,_d(s)):vu(s);break;default:vu(s)}}function _d(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Dn=u,z1(u,s)}q1(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Qa(8,i,i.return),_d(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,_d(i));break;default:_d(i)}s=s.sibling}}function z1(s,i){for(;Dn!==null;){var o=Dn;switch(o.tag){case 0:case 11:case 15:Qa(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:tu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Dn=u;else e:for(o=s;Dn!==null;){u=Dn;var g=u.sibling,y=u.return;if(O1(u),u===o){Dn=null;break e}if(g!==null){g.return=y,Dn=g;break e}Dn=y}}}var A2={getCacheForType:function(s){var i=$n(vn),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o},cacheSignal:function(){return $n(vn).controller.signal}},S2=typeof WeakMap=="function"?WeakMap:Map,xt=0,It=null,nt=null,it=0,wt=0,ns=null,Ya=!1,Wl=!1,Yg=!1,da=0,ln=0,Xa=0,nl=0,Xg=0,rs=0,Zl=0,bu=null,Ur=null,Wg=!1,Ed=0,H1=0,wd=1/0,Td=null,Wa=null,Cn=0,Za=null,Jl=null,fa=0,Zg=0,Jg=null,F1=null,xu=0,ep=null;function ss(){return(xt&2)!==0&&it!==0?it&-it:H.T!==null?ap():rn()}function $1(){if(rs===0)if((it&536870912)===0||dt){var s=Fr;Fr<<=1,(Fr&3932160)===0&&(Fr=262144),rs=s}else rs=536870912;return s=es.current,s!==null&&(s.flags|=32),rs}function Vr(s,i,o){(s===It&&(wt===2||wt===9)||s.cancelPendingCommit!==null)&&(ec(s,0),Ja(s,it,rs,!1)),ds(s,o),((xt&2)===0||s!==It)&&(s===It&&((xt&2)===0&&(nl|=o),ln===4&&Ja(s,it,rs,!1)),_i(s))}function G1(s,i,o){if((xt&6)!==0)throw Error(r(327));var u=!o&&(i&127)===0&&(i&s.expiredLanes)===0||Pn(s,i),g=u?R2(s,i):np(s,i,!0),y=u;do{if(g===0){Wl&&!u&&Ja(s,i,0,!1);break}else{if(o=s.current.alternate,y&&!N2(o)){g=np(s,i,!1),y=!1;continue}if(g===2){if(y=i,s.errorRecoveryDisabledLanes&y)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var I=s;g=bu;var z=I.current.memoizedState.isDehydrated;if(z&&(ec(I,w).flags|=256),w=np(I,w,!1),w!==2){if(Yg&&!z){I.errorRecoveryDisabledLanes|=y,nl|=y,g=4;break e}y=Ur,Ur=g,y!==null&&(Ur===null?Ur=y:Ur.push.apply(Ur,y))}g=w}if(y=!1,g!==2)continue}}if(g===1){ec(s,0),Ja(s,i,0,!0);break}e:{switch(u=s,y=g,y){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ja(u,i,rs,!Ya);break e;case 2:Ur=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(g=Ed+300-Ot(),10<g)){if(Ja(u,i,rs,!Ya),In(u,0,!0)!==0)break e;fa=i,u.timeoutHandle=wx(K1.bind(null,u,o,Ur,Td,Wg,i,rs,nl,Zl,Ya,y,"Throttled",-0,0),g);break e}K1(u,o,Ur,Td,Wg,i,rs,nl,Zl,Ya,y,null,-0,0)}}break}while(!0);_i(s)}function K1(s,i,o,u,g,y,w,I,z,J,ae,he,te,se){if(s.timeoutHandle=-1,he=i.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:sr},V1(i,y,he);var Ne=(y&62914560)===y?Ed-Ot():(y&4194048)===y?H1-Ot():0;if(Ne=hC(he,Ne),Ne!==null){fa=y,s.cancelPendingCommit=Ne(tx.bind(null,s,i,y,o,u,g,w,I,z,ae,he,null,te,se)),Ja(s,y,w,!J);return}}tx(s,i,y,o,u,g,w,I,z)}function N2(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],y=g.getSnapshot;g=g.value;try{if(!Zr(y(),g))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ja(s,i,o,u){i&=~Xg,i&=~nl,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var g=i;0<g;){var y=31-Dt(g),w=1<<y;u[y]=-1,g&=~w}o!==0&&qs(s,o,i)}function Ad(){return(xt&6)===0?(_u(0),!1):!0}function tp(){if(nt!==null){if(wt===0)var s=nt.return;else s=nt,na=Ko=null,yg(s),Fl=null,ru=0,s=nt;for(;s!==null;)T1(s.alternate,s),s=s.return;nt=null}}function ec(s,i){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,K2(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),fa=0,tp(),It=s,nt=o=ea(s.current,null),it=i,wt=0,ns=null,Ya=!1,Wl=Pn(s,i),Yg=!1,Zl=rs=Xg=nl=Xa=ln=0,Ur=bu=null,Wg=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var g=31-Dt(u),y=1<<g;i|=s[g],u&=~y}return da=i,Gh(),o}function Q1(s,i){Qe=null,H.H=hu,i===Hl||i===ed?(i=cb(),wt=3):i===ig?(i=cb(),wt=4):wt=i===Dg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ns=i,nt===null&&(ln=1,md(s,ws(i,s.current)))}function Y1(){var s=es.current;return s===null?!0:(it&4194048)===it?Ns===null:(it&62914560)===it||(it&536870912)!==0?s===Ns:!1}function X1(){var s=H.H;return H.H=hu,s===null?hu:s}function W1(){var s=H.A;return H.A=A2,s}function Sd(){ln=4,Ya||(it&4194048)!==it&&es.current!==null||(Wl=!0),(Xa&134217727)===0&&(nl&134217727)===0||It===null||Ja(It,it,rs,!1)}function np(s,i,o){var u=xt;xt|=2;var g=X1(),y=W1();(It!==s||it!==i)&&(Td=null,ec(s,i)),i=!1;var w=ln;e:do try{if(wt!==0&&nt!==null){var I=nt,z=ns;switch(wt){case 8:tp(),w=6;break e;case 3:case 2:case 9:case 6:es.current===null&&(i=!0);var J=wt;if(wt=0,ns=null,tc(s,I,z,J),o&&Wl){w=0;break e}break;default:J=wt,wt=0,ns=null,tc(s,I,z,J)}}C2(),w=ln;break}catch(ae){Q1(s,ae)}while(!0);return i&&s.shellSuspendCounter++,na=Ko=null,xt=u,H.H=g,H.A=y,nt===null&&(It=null,it=0,Gh()),w}function C2(){for(;nt!==null;)Z1(nt)}function R2(s,i){var o=xt;xt|=2;var u=X1(),g=W1();It!==s||it!==i?(Td=null,wd=Ot()+500,ec(s,i)):Wl=Pn(s,i);e:do try{if(wt!==0&&nt!==null){i=nt;var y=ns;t:switch(wt){case 1:wt=0,ns=null,tc(s,i,y,1);break;case 2:case 9:if(ob(y)){wt=0,ns=null,J1(i);break}i=function(){wt!==2&&wt!==9||It!==s||(wt=7),_i(s)},y.then(i,i);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:ob(y)?(wt=0,ns=null,J1(i)):(wt=0,ns=null,tc(s,i,y,7));break;case 5:var w=null;switch(nt.tag){case 26:w=nt.memoizedState;case 5:case 27:var I=nt;if(w?Ux(w):I.stateNode.complete){wt=0,ns=null;var z=I.sibling;if(z!==null)nt=z;else{var J=I.return;J!==null?(nt=J,Nd(J)):nt=null}break t}}wt=0,ns=null,tc(s,i,y,5);break;case 6:wt=0,ns=null,tc(s,i,y,6);break;case 8:tp(),ln=6;break e;default:throw Error(r(462))}}I2();break}catch(ae){Q1(s,ae)}while(!0);return na=Ko=null,H.H=u,H.A=g,xt=o,nt!==null?0:(It=null,it=0,Gh(),ln)}function I2(){for(;nt!==null&&!Da();)Z1(nt)}function Z1(s){var i=E1(s.alternate,s,da);s.memoizedProps=s.pendingProps,i===null?Nd(s):nt=i}function J1(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=p1(o,i,i.pendingProps,i.type,void 0,it);break;case 11:i=p1(o,i,i.pendingProps,i.type.render,i.ref,it);break;case 5:yg(i);default:T1(o,i),i=nt=Xv(i,da),i=E1(o,i,da)}s.memoizedProps=s.pendingProps,i===null?Nd(s):nt=i}function tc(s,i,o,u){na=Ko=null,yg(i),Fl=null,ru=0;var g=i.return;try{if(v2(s,g,i,o,it)){ln=1,md(s,ws(o,s.current)),nt=null;return}}catch(y){if(g!==null)throw nt=g,y;ln=1,md(s,ws(o,s.current)),nt=null;return}i.flags&32768?(dt||u===1?s=!0:Wl||(it&536870912)!==0?s=!1:(Ya=s=!0,(u===2||u===9||u===3||u===6)&&(u=es.current,u!==null&&u.tag===13&&(u.flags|=16384))),ex(i,s)):Nd(i)}function Nd(s){var i=s;do{if((i.flags&32768)!==0){ex(i,Ya);return}s=i.return;var o=_2(i.alternate,i,da);if(o!==null){nt=o;return}if(i=i.sibling,i!==null){nt=i;return}nt=i=s}while(i!==null);ln===0&&(ln=5)}function ex(s,i){do{var o=E2(s.alternate,s);if(o!==null){o.flags&=32767,nt=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){nt=s;return}nt=s=o}while(s!==null);ln=6,nt=null}function tx(s,i,o,u,g,y,w,I,z){s.cancelPendingCommit=null;do Cd();while(Cn!==0);if((xt&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(y=i.lanes|i.childLanes,y|=Fm,$r(s,o,y,w,I,z),s===It&&(nt=It=null,it=0),Jl=i,Za=s,fa=o,Zg=y,Jg=g,F1=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,L2(mr,function(){return ax(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,g=ee.p,ee.p=2,w=xt,xt|=4;try{w2(s,i,o)}finally{xt=w,ee.p=g,H.T=u}}Cn=1,nx(),rx(),sx()}}function nx(){if(Cn===1){Cn=0;var s=Za,i=Jl,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null;var u=ee.p;ee.p=2;var g=xt;xt|=4;try{M1(i,s);var y=mp,w=Bv(s.containerInfo),I=y.focusedElem,z=y.selectionRange;if(w!==I&&I&&I.ownerDocument&&qv(I.ownerDocument.documentElement,I)){if(z!==null&&Vm(I)){var J=z.start,ae=z.end;if(ae===void 0&&(ae=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(ae,I.value.length);else{var he=I.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var se=te.getSelection(),Ne=I.textContent.length,Ve=Math.min(z.start,Ne),Ct=z.end===void 0?Ve:Math.min(z.end,Ne);!se.extend&&Ve>Ct&&(w=Ct,Ct=Ve,Ve=w);var K=Vv(I,Ve),G=Vv(I,Ct);if(K&&G&&(se.rangeCount!==1||se.anchorNode!==K.node||se.anchorOffset!==K.offset||se.focusNode!==G.node||se.focusOffset!==G.offset)){var Z=he.createRange();Z.setStart(K.node,K.offset),se.removeAllRanges(),Ve>Ct?(se.addRange(Z),se.extend(G.node,G.offset)):(Z.setEnd(G.node,G.offset),se.addRange(Z))}}}}for(he=[],se=I;se=se.parentNode;)se.nodeType===1&&he.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<he.length;I++){var oe=he[I];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}qd=!!fp,mp=fp=null}finally{xt=g,ee.p=u,H.T=o}}s.current=i,Cn=2}}function rx(){if(Cn===2){Cn=0;var s=Za,i=Jl,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=H.T,H.T=null;var u=ee.p;ee.p=2;var g=xt;xt|=4;try{j1(s,i.alternate,i)}finally{xt=g,ee.p=u,H.T=o}}Cn=3}}function sx(){if(Cn===4||Cn===3){Cn=0,Vi();var s=Za,i=Jl,o=fa,u=F1;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Cn=5:(Cn=0,Jl=Za=null,ix(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Wa=null),pr(o),i=i.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(gr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=H.T,g=ee.p,ee.p=2,H.T=null;try{for(var y=s.onRecoverableError,w=0;w<u.length;w++){var I=u[w];y(I.value,{componentStack:I.stack})}}finally{H.T=i,ee.p=g}}(fa&3)!==0&&Cd(),_i(s),g=s.pendingLanes,(o&261930)!==0&&(g&42)!==0?s===ep?xu++:(xu=0,ep=s):xu=0,_u(0)}}function ix(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,tu(i)))}function Cd(){return nx(),rx(),sx(),ax()}function ax(){if(Cn!==5)return!1;var s=Za,i=Zg;Zg=0;var o=pr(fa),u=H.T,g=ee.p;try{ee.p=32>o?32:o,H.T=null,o=Jg,Jg=null;var y=Za,w=fa;if(Cn=0,Jl=Za=null,fa=0,(xt&6)!==0)throw Error(r(331));var I=xt;if(xt|=4,B1(y.current),U1(y,y.current,w,o),xt=I,_u(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(gr,y)}catch{}return!0}finally{ee.p=g,H.T=u,ix(s,i)}}function ox(s,i,o){i=ws(o,i),i=Og(s.stateNode,i,2),s=$a(s,i,2),s!==null&&(ds(s,2),_i(s))}function Tt(s,i,o){if(s.tag===3)ox(s,s,o);else for(;i!==null;){if(i.tag===3){ox(i,s,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Wa===null||!Wa.has(u))){s=ws(o,s),o=l1(2),u=$a(i,o,2),u!==null&&(c1(o,u,i,s),ds(u,2),_i(u));break}}i=i.return}}function rp(s,i,o){var u=s.pingCache;if(u===null){u=s.pingCache=new S2;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(o)||(Yg=!0,g.add(o),s=j2.bind(null,s,i,o),i.then(s,s))}function j2(s,i,o){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,It===s&&(it&o)===o&&(ln===4||ln===3&&(it&62914560)===it&&300>Ot()-Ed?(xt&2)===0&&ec(s,0):Xg|=o,Zl===it&&(Zl=0)),_i(s)}function lx(s,i){i===0&&(i=ci()),s=Fo(s,i),s!==null&&(ds(s,i),_i(s))}function O2(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),lx(s,o)}function D2(s,i){var o=0;switch(s.tag){case 31:case 13:var u=s.stateNode,g=s.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),lx(s,o)}function L2(s,i){return jt(s,i)}var Rd=null,nc=null,sp=!1,Id=!1,ip=!1,eo=0;function _i(s){s!==nc&&s.next===null&&(nc===null?Rd=nc=s:nc=nc.next=s),Id=!0,sp||(sp=!0,M2())}function _u(s,i){if(!ip&&Id){ip=!0;do for(var o=!1,u=Rd;u!==null;){if(s!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var w=u.suspendedLanes,I=u.pingedLanes;y=(1<<31-Dt(42|s)+1)-1,y&=g&~(w&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,dx(u,y))}else y=it,y=In(u,u===It?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Pn(u,y)||(o=!0,dx(u,y));u=u.next}while(o);ip=!1}}function k2(){cx()}function cx(){Id=sp=!1;var s=0;eo!==0&&G2()&&(s=eo);for(var i=Ot(),o=null,u=Rd;u!==null;){var g=u.next,y=ux(u,i);y===0?(u.next=null,o===null?Rd=g:o.next=g,g===null&&(nc=o)):(o=u,(s!==0||(y&3)!==0)&&(Id=!0)),u=g}Cn!==0&&Cn!==5||_u(s),eo!==0&&(eo=0)}function ux(s,i){for(var o=s.suspendedLanes,u=s.pingedLanes,g=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var w=31-Dt(y),I=1<<w,z=g[w];z===-1?((I&o)===0||(I&u)!==0)&&(g[w]=Fi(I,i)):z<=i&&(s.expiredLanes|=I),y&=~I}if(i=It,o=it,o=In(s,s===i?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===i&&(wt===2||wt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Sr(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Pn(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(u!==null&&Sr(u),pr(o)){case 2:case 8:o=Hr;break;case 32:o=mr;break;case 268435456:o=kn;break;default:o=mr}return u=hx.bind(null,s),o=jt(o,u),s.callbackPriority=i,s.callbackNode=o,i}return u!==null&&u!==null&&Sr(u),s.callbackPriority=2,s.callbackNode=null,2}function hx(s,i){if(Cn!==0&&Cn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Cd()&&s.callbackNode!==o)return null;var u=it;return u=In(s,s===It?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(G1(s,u,i),ux(s,Ot()),s.callbackNode!=null&&s.callbackNode===o?hx.bind(null,s):null)}function dx(s,i){if(Cd())return null;G1(s,i,!0)}function M2(){Q2(function(){(xt&6)!==0?jt(qi,k2):cx()})}function ap(){if(eo===0){var s=Bl;s===0&&(s=Mn,Mn<<=1,(Mn&261888)===0&&(Mn=256)),eo=s}return eo}function fx(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:gi(""+s)}function mx(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function P2(s,i,o,u,g){if(i==="submit"&&o&&o.stateNode===g){var y=fx((g[sn]||null).action),w=u.submitter;w&&(i=(i=w[sn]||null)?fx(i.formAction):w.getAttribute("formAction"),i!==null&&(y=i,w=null));var I=new Se("action","action",null,u,g);s.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(eo!==0){var z=w?mx(g,w):new FormData(g);Sg(o,{pending:!0,data:z,method:g.method,action:y},null,z)}}else typeof y=="function"&&(I.preventDefault(),z=w?mx(g,w):new FormData(g),Sg(o,{pending:!0,data:z,method:g.method,action:y},y,z))},currentTarget:g}]})}}for(var op=0;op<Hm.length;op++){var lp=Hm[op],U2=lp.toLowerCase(),V2=lp[0].toUpperCase()+lp.slice(1);Qs(U2,"on"+V2)}Qs(Fv,"onAnimationEnd"),Qs($v,"onAnimationIteration"),Qs(Gv,"onAnimationStart"),Qs("dblclick","onDoubleClick"),Qs("focusin","onFocus"),Qs("focusout","onBlur"),Qs(t2,"onTransitionRun"),Qs(n2,"onTransitionStart"),Qs(r2,"onTransitionCancel"),Qs(Kv,"onTransitionEnd"),Vn("onMouseEnter",["mouseout","mouseover"]),Vn("onMouseLeave",["mouseout","mouseover"]),Vn("onPointerEnter",["pointerout","pointerover"]),Vn("onPointerLeave",["pointerout","pointerover"]),br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),br("onBeforeInput",["compositionend","keypress","textInput","paste"]),br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eu));function gx(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],g=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var w=u.length-1;0<=w;w--){var I=u[w],z=I.instance,J=I.currentTarget;if(I=I.listener,z!==y&&g.isPropagationStopped())break e;y=I,g.currentTarget=J;try{y(g)}catch(ae){$h(ae)}g.currentTarget=null,y=z}else for(w=0;w<u.length;w++){if(I=u[w],z=I.instance,J=I.currentTarget,I=I.listener,z!==y&&g.isPropagationStopped())break e;y=I,g.currentTarget=J;try{y(g)}catch(ae){$h(ae)}g.currentTarget=null,y=z}}}}function rt(s,i){var o=i[Jt];o===void 0&&(o=i[Jt]=new Set);var u=s+"__bubble";o.has(u)||(px(i,s,2,!1),o.add(u))}function cp(s,i,o){var u=0;i&&(u|=4),px(o,s,u,i)}var jd="_reactListening"+Math.random().toString(36).slice(2);function up(s){if(!s[jd]){s[jd]=!0,Ki.forEach(function(o){o!=="selectionchange"&&(q2.has(o)||cp(o,!1,s),cp(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[jd]||(i[jd]=!0,cp("selectionchange",!1,i))}}function px(s,i,o,u){switch($x(i)){case 2:var g=mC;break;case 8:g=gC;break;default:g=Ap}o=g.bind(null,i,o,s),g=void 0,!xs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?s.addEventListener(i,o,{capture:!0,passive:g}):s.addEventListener(i,o,!0):g!==void 0?s.addEventListener(i,o,{passive:g}):s.addEventListener(i,o,!1)}function hp(s,i,o,u,g){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var I=u.stateNode.containerInfo;if(I===g)break;if(w===4)for(w=u.return;w!==null;){var z=w.tag;if((z===3||z===4)&&w.stateNode.containerInfo===g)return;w=w.return}for(;I!==null;){if(w=Mt(I),w===null)return;if(z=w.tag,z===5||z===6||z===26||z===27){u=y=w;continue e}I=I.parentNode}}u=u.return}bs(function(){var J=y,ae=Bn(o),he=[];e:{var te=Qv.get(s);if(te!==void 0){var se=Se,Ne=s;switch(s){case"keypress":if(x(o)===0)break e;case"keydown":case"keyup":se=zh;break;case"focusin":Ne="focus",se=Hn;break;case"focusout":Ne="blur",se=Hn;break;case"beforeblur":case"afterblur":se=Hn;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Ut;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=b;break;case Fv:case $v:case Gv:se=qo;break;case Kv:se=D;break;case"scroll":case"scrollend":se=Je;break;case"wheel":se=re;break;case"copy":case"cut":case"paste":se=Zi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Ji;break;case"toggle":case"beforetoggle":se=Ke}var Ve=(i&4)!==0,Ct=!Ve&&(s==="scroll"||s==="scrollend"),K=Ve?te!==null?te+"Capture":null:te;Ve=[];for(var G=J,Z;G!==null;){var oe=G;if(Z=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Z===null||K===null||(oe=ir(G,K),oe!=null&&Ve.push(wu(G,oe,Z))),Ct)break;G=G.return}0<Ve.length&&(te=new se(te,Ne,null,o,ae),he.push({event:te,listeners:Ve}))}}if((i&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",se=s==="mouseout"||s==="pointerout",te&&o!==un&&(Ne=o.relatedTarget||o.fromElement)&&(Mt(Ne)||Ne[Rr]))break e;if((se||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,se?(Ne=o.relatedTarget||o.toElement,se=J,Ne=Ne?Mt(Ne):null,Ne!==null&&(Ct=l(Ne),Ve=Ne.tag,Ne!==Ct||Ve!==5&&Ve!==27&&Ve!==6)&&(Ne=null)):(se=null,Ne=J),se!==Ne)){if(Ve=Ut,oe="onMouseLeave",K="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Ve=Ji,oe="onPointerLeave",K="onPointerEnter",G="pointer"),Ct=se==null?te:Un(se),Z=Ne==null?te:Un(Ne),te=new Ve(oe,G+"leave",se,o,ae),te.target=Ct,te.relatedTarget=Z,oe=null,Mt(ae)===J&&(Ve=new Ve(K,G+"enter",Ne,o,ae),Ve.target=Z,Ve.relatedTarget=Ct,oe=Ve),Ct=oe,se&&Ne)t:{for(Ve=B2,K=se,G=Ne,Z=0,oe=K;oe;oe=Ve(oe))Z++;oe=0;for(var Me=G;Me;Me=Ve(Me))oe++;for(;0<Z-oe;)K=Ve(K),Z--;for(;0<oe-Z;)G=Ve(G),oe--;for(;Z--;){if(K===G||G!==null&&K===G.alternate){Ve=K;break t}K=Ve(K),G=Ve(G)}Ve=null}else Ve=null;se!==null&&yx(he,te,se,Ve,!1),Ne!==null&&Ct!==null&&yx(he,Ct,Ne,Ve,!0)}}e:{if(te=J?Un(J):window,se=te.nodeName&&te.nodeName.toLowerCase(),se==="select"||se==="input"&&te.type==="file")var gt=Dv;else if(jv(te))if(Lv)gt=ZN;else{gt=XN;var Re=YN}else se=te.nodeName,!se||se.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&mi(J.elementType)&&(gt=Dv):gt=WN;if(gt&&(gt=gt(s,J))){Ov(he,gt,o,ae);break e}Re&&Re(s,te,J),s==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&Yi(te,"number",te.value)}switch(Re=J?Un(J):window,s){case"focusin":(jv(Re)||Re.contentEditable==="true")&&(Dl=Re,qm=J,Zc=null);break;case"focusout":Zc=qm=Dl=null;break;case"mousedown":Bm=!0;break;case"contextmenu":case"mouseup":case"dragend":Bm=!1,zv(he,o,ae);break;case"selectionchange":if(e2)break;case"keydown":case"keyup":zv(he,o,ae)}var Xe;if(bt)e:{switch(s){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Ol?Bo(s,o)&&(at="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(at="onCompositionStart");at&&(yi&&o.locale!=="ko"&&(Ol||at!=="onCompositionStart"?at==="onCompositionEnd"&&Ol&&(Xe=Wi()):(xr=ae,Hs="value"in xr?xr.value:xr.textContent,Ol=!0)),Re=Od(J,at),0<Re.length&&(at=new pi(at,s,null,o,ae),he.push({event:at,listeners:Re}),Xe?at.data=Xe:(Xe=jl(o),Xe!==null&&(at.data=Xe)))),(Xe=_s?$N(s,o):GN(s,o))&&(at=Od(J,"onBeforeInput"),0<at.length&&(Re=new pi("onBeforeInput","beforeinput",null,o,ae),he.push({event:Re,listeners:at}),Re.data=Xe)),P2(he,s,J,o,ae)}gx(he,i)})}function wu(s,i,o){return{instance:s,listener:i,currentTarget:o}}function Od(s,i){for(var o=i+"Capture",u=[];s!==null;){var g=s,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=ir(s,o),g!=null&&u.unshift(wu(s,g,y)),g=ir(s,i),g!=null&&u.push(wu(s,g,y))),s.tag===3)return u;s=s.return}return[]}function B2(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function yx(s,i,o,u,g){for(var y=i._reactName,w=[];o!==null&&o!==u;){var I=o,z=I.alternate,J=I.stateNode;if(I=I.tag,z!==null&&z===u)break;I!==5&&I!==26&&I!==27||J===null||(z=J,g?(J=ir(o,y),J!=null&&w.unshift(wu(o,J,z))):g||(J=ir(o,y),J!=null&&w.push(wu(o,J,z)))),o=o.return}w.length!==0&&s.push({event:i,listeners:w})}var z2=/\r\n?/g,H2=/\u0000|\uFFFD/g;function vx(s){return(typeof s=="string"?s:""+s).replace(z2,`
`).replace(H2,"")}function bx(s,i){return i=vx(i),vx(s)===i}function Nt(s,i,o,u,g,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Kt(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Kt(s,""+u);break;case"className":qn(s,"class",u);break;case"tabIndex":qn(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":qn(s,o,u);break;case"style":rr(s,u,y);break;case"data":if(i!=="object"){qn(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=gi(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&Nt(s,i,"name",g.name,g,null),Nt(s,i,"formEncType",g.formEncType,g,null),Nt(s,i,"formMethod",g.formMethod,g,null),Nt(s,i,"formTarget",g.formTarget,g,null)):(Nt(s,i,"encType",g.encType,g,null),Nt(s,i,"method",g.method,g,null),Nt(s,i,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=gi(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=sr);break;case"onScroll":u!=null&&rt("scroll",s);break;case"onScrollEnd":u!=null&&rt("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=gi(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":rt("beforetoggle",s),rt("toggle",s),hi(s,"popover",u);break;case"xlinkActuate":Gt(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Gt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Gt(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Gt(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Gt(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Gt(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":hi(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Pa.get(o)||o,hi(s,o,u))}}function dp(s,i,o,u,g,y){switch(o){case"style":rr(s,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof u=="string"?Kt(s,u):(typeof u=="number"||typeof u=="bigint")&&Kt(s,""+u);break;case"onScroll":u!=null&&rt("scroll",s);break;case"onScrollEnd":u!=null&&rt("scrollend",s);break;case"onClick":u!=null&&(s.onclick=sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ms.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),i=o.slice(2,g?o.length-7:void 0),y=s[sn]||null,y=y!=null?y[o]:null,typeof y=="function"&&s.removeEventListener(i,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,u,g);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):hi(s,o,u)}}}function Kn(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",s),rt("load",s);var u=!1,g=!1,y;for(y in o)if(o.hasOwnProperty(y)){var w=o[y];if(w!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Nt(s,i,y,w,o,null)}}g&&Nt(s,i,"srcSet",o.srcSet,o,null),u&&Nt(s,i,"src",o.src,o,null);return;case"input":rt("invalid",s);var I=y=w=g=null,z=null,J=null;for(u in o)if(o.hasOwnProperty(u)){var ae=o[u];if(ae!=null)switch(u){case"name":g=ae;break;case"type":w=ae;break;case"checked":z=ae;break;case"defaultChecked":J=ae;break;case"value":y=ae;break;case"defaultValue":I=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,i));break;default:Nt(s,i,u,ae,o,null)}}fi(s,y,I,z,J,w,g,!1);return;case"select":rt("invalid",s),u=w=y=null;for(g in o)if(o.hasOwnProperty(g)&&(I=o[g],I!=null))switch(g){case"value":y=I;break;case"defaultValue":w=I;break;case"multiple":u=I;default:Nt(s,i,g,I,o,null)}i=y,o=w,s.multiple=!!u,i!=null?ps(s,!!u,i,!1):o!=null&&ps(s,!!u,o,!0);return;case"textarea":rt("invalid",s),y=g=u=null;for(w in o)if(o.hasOwnProperty(w)&&(I=o[w],I!=null))switch(w){case"value":u=I;break;case"defaultValue":g=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:Nt(s,i,w,I,o,null)}yn(s,u,g,y);return;case"option":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Nt(s,i,z,u,o,null)}return;case"dialog":rt("beforetoggle",s),rt("toggle",s),rt("cancel",s),rt("close",s);break;case"iframe":case"object":rt("load",s);break;case"video":case"audio":for(u=0;u<Eu.length;u++)rt(Eu[u],s);break;case"image":rt("error",s),rt("load",s);break;case"details":rt("toggle",s);break;case"embed":case"source":case"link":rt("error",s),rt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in o)if(o.hasOwnProperty(J)&&(u=o[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Nt(s,i,J,u,o,null)}return;default:if(mi(i)){for(ae in o)o.hasOwnProperty(ae)&&(u=o[ae],u!==void 0&&dp(s,i,ae,u,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(u=o[I],u!=null&&Nt(s,i,I,u,o,null))}function F2(s,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,w=null,I=null,z=null,J=null,ae=null;for(se in o){var he=o[se];if(o.hasOwnProperty(se)&&he!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":z=he;default:u.hasOwnProperty(se)||Nt(s,i,se,null,u,he)}}for(var te in u){var se=u[te];if(he=o[te],u.hasOwnProperty(te)&&(se!=null||he!=null))switch(te){case"type":y=se;break;case"name":g=se;break;case"checked":J=se;break;case"defaultChecked":ae=se;break;case"value":w=se;break;case"defaultValue":I=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,i));break;default:se!==he&&Nt(s,i,te,se,u,he)}}di(s,w,I,z,J,ae,y,g);return;case"select":se=w=I=te=null;for(y in o)if(z=o[y],o.hasOwnProperty(y)&&z!=null)switch(y){case"value":break;case"multiple":se=z;default:u.hasOwnProperty(y)||Nt(s,i,y,null,u,z)}for(g in u)if(y=u[g],z=o[g],u.hasOwnProperty(g)&&(y!=null||z!=null))switch(g){case"value":te=y;break;case"defaultValue":I=y;break;case"multiple":w=y;default:y!==z&&Nt(s,i,g,y,u,z)}i=I,o=w,u=se,te!=null?ps(s,!!o,te,!1):!!u!=!!o&&(i!=null?ps(s,!!o,i,!0):ps(s,!!o,o?[]:"",!1));return;case"textarea":se=te=null;for(I in o)if(g=o[I],o.hasOwnProperty(I)&&g!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Nt(s,i,I,null,u,g)}for(w in u)if(g=u[w],y=o[w],u.hasOwnProperty(w)&&(g!=null||y!=null))switch(w){case"value":te=g;break;case"defaultValue":se=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&Nt(s,i,w,g,u,y)}ys(s,te,se);return;case"option":for(var Ne in o)if(te=o[Ne],o.hasOwnProperty(Ne)&&te!=null&&!u.hasOwnProperty(Ne))switch(Ne){case"selected":s.selected=!1;break;default:Nt(s,i,Ne,null,u,te)}for(z in u)if(te=u[z],se=o[z],u.hasOwnProperty(z)&&te!==se&&(te!=null||se!=null))switch(z){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Nt(s,i,z,te,u,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in o)te=o[Ve],o.hasOwnProperty(Ve)&&te!=null&&!u.hasOwnProperty(Ve)&&Nt(s,i,Ve,null,u,te);for(J in u)if(te=u[J],se=o[J],u.hasOwnProperty(J)&&te!==se&&(te!=null||se!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,i));break;default:Nt(s,i,J,te,u,se)}return;default:if(mi(i)){for(var Ct in o)te=o[Ct],o.hasOwnProperty(Ct)&&te!==void 0&&!u.hasOwnProperty(Ct)&&dp(s,i,Ct,void 0,u,te);for(ae in u)te=u[ae],se=o[ae],!u.hasOwnProperty(ae)||te===se||te===void 0&&se===void 0||dp(s,i,ae,te,u,se);return}}for(var K in o)te=o[K],o.hasOwnProperty(K)&&te!=null&&!u.hasOwnProperty(K)&&Nt(s,i,K,null,u,te);for(he in u)te=u[he],se=o[he],!u.hasOwnProperty(he)||te===se||te==null&&se==null||Nt(s,i,he,te,u,se)}function xx(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $2(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var g=o[u],y=g.transferSize,w=g.initiatorType,I=g.duration;if(y&&I&&xx(w)){for(w=0,I=g.responseEnd,u+=1;u<o.length;u++){var z=o[u],J=z.startTime;if(J>I)break;var ae=z.transferSize,he=z.initiatorType;ae&&xx(he)&&(z=z.responseEnd,w+=ae*(z<I?1:(I-J)/(z-J)))}if(--u,i+=8*(y+w)/(g.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var fp=null,mp=null;function Dd(s){return s.nodeType===9?s:s.ownerDocument}function _x(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ex(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function gp(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var pp=null;function G2(){var s=window.event;return s&&s.type==="popstate"?s===pp?!1:(pp=s,!0):(pp=null,!1)}var wx=typeof setTimeout=="function"?setTimeout:void 0,K2=typeof clearTimeout=="function"?clearTimeout:void 0,Tx=typeof Promise=="function"?Promise:void 0,Q2=typeof queueMicrotask=="function"?queueMicrotask:typeof Tx<"u"?function(s){return Tx.resolve(null).then(s).catch(Y2)}:wx;function Y2(s){setTimeout(function(){throw s})}function to(s){return s==="head"}function Ax(s,i){var o=i,u=0;do{var g=o.nextSibling;if(s.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"||o==="/&"){if(u===0){s.removeChild(g),ac(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Tu(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,Tu(o);for(var y=o.firstChild;y;){var w=y.nextSibling,I=y.nodeName;y[Ir]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=w}}else o==="body"&&Tu(s.ownerDocument.body);o=g}while(o);ac(i)}function Sx(s,i){var o=s;s=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=u}while(o)}function yp(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":yp(o),ui(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function X2(s,i,o,u){for(;s.nodeType===1;){var g=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Ir])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Cs(s.nextSibling),s===null)break}return null}function W2(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Cs(s.nextSibling),s===null))return null;return s}function Nx(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=Cs(s.nextSibling),s===null))return null;return s}function vp(s){return s.data==="$?"||s.data==="$~"}function bp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Z2(s,i){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Cs(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var xp=null;function Cx(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(i===0)return Cs(s.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}s=s.nextSibling}return null}function Rx(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return s;i--}else o!=="/$"&&o!=="/&"||i++}s=s.previousSibling}return null}function Ix(s,i,o){switch(i=Dd(o),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Tu(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);ui(s)}var Rs=new Map,jx=new Set;function Ld(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ma=ee.d;ee.d={f:J2,r:eC,D:tC,C:nC,L:rC,m:sC,X:aC,S:iC,M:oC};function J2(){var s=ma.f(),i=Ad();return s||i}function eC(s){var i=tr(s);i!==null&&i.tag===5&&i.type==="form"?Qb(i):ma.r(s)}var rc=typeof document>"u"?null:document;function Ox(s,i,o){var u=rc;if(u&&typeof i=="string"&&i){var g=jn(i);g='link[rel="'+s+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),jx.has(g)||(jx.add(g),s={rel:s,crossOrigin:o,href:i},u.querySelector(g)===null&&(i=u.createElement("link"),Kn(i,"link",s),$t(i),u.head.appendChild(i)))}}function tC(s){ma.D(s),Ox("dns-prefetch",s,null)}function nC(s,i){ma.C(s,i),Ox("preconnect",s,i)}function rC(s,i,o){ma.L(s,i,o);var u=rc;if(u&&s&&i){var g='link[rel="preload"][as="'+jn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+jn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+jn(o.imageSizes)+'"]')):g+='[href="'+jn(s)+'"]';var y=g;switch(i){case"style":y=sc(s);break;case"script":y=ic(s)}Rs.has(y)||(s=_({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),Rs.set(y,s),u.querySelector(g)!==null||i==="style"&&u.querySelector(Au(y))||i==="script"&&u.querySelector(Su(y))||(i=u.createElement("link"),Kn(i,"link",s),$t(i),u.head.appendChild(i)))}}function sC(s,i){ma.m(s,i);var o=rc;if(o&&s){var u=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+jn(u)+'"][href="'+jn(s)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=ic(s)}if(!Rs.has(y)&&(s=_({rel:"modulepreload",href:s},i),Rs.set(y,s),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Su(y)))return}u=o.createElement("link"),Kn(u,"link",s),$t(u),o.head.appendChild(u)}}}function iC(s,i,o){ma.S(s,i,o);var u=rc;if(u&&s){var g=jr(u).hoistableStyles,y=sc(s);i=i||"default";var w=g.get(y);if(!w){var I={loading:0,preload:null};if(w=u.querySelector(Au(y)))I.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":i},o),(o=Rs.get(y))&&_p(s,o);var z=w=u.createElement("link");$t(z),Kn(z,"link",s),z._p=new Promise(function(J,ae){z.onload=J,z.onerror=ae}),z.addEventListener("load",function(){I.loading|=1}),z.addEventListener("error",function(){I.loading|=2}),I.loading|=4,kd(w,i,u)}w={type:"stylesheet",instance:w,count:1,state:I},g.set(y,w)}}}function aC(s,i){ma.X(s,i);var o=rc;if(o&&s){var u=jr(o).hoistableScripts,g=ic(s),y=u.get(g);y||(y=o.querySelector(Su(g)),y||(s=_({src:s,async:!0},i),(i=Rs.get(g))&&Ep(s,i),y=o.createElement("script"),$t(y),Kn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function oC(s,i){ma.M(s,i);var o=rc;if(o&&s){var u=jr(o).hoistableScripts,g=ic(s),y=u.get(g);y||(y=o.querySelector(Su(g)),y||(s=_({src:s,async:!0,type:"module"},i),(i=Rs.get(g))&&Ep(s,i),y=o.createElement("script"),$t(y),Kn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function Dx(s,i,o,u){var g=(g=Ae.current)?Ld(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=sc(o.href),o=jr(g).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=sc(o.href);var y=jr(g).hoistableStyles,w=y.get(s);if(w||(g=g.ownerDocument||g,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,w),(y=g.querySelector(Au(s)))&&!y._p&&(w.instance=y,w.state.loading=5),Rs.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Rs.set(s,o),y||lC(g,s,o,w.state))),i&&u===null)throw Error(r(528,""));return w}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ic(o),o=jr(g).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function sc(s){return'href="'+jn(s)+'"'}function Au(s){return'link[rel="stylesheet"]['+s+"]"}function Lx(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function lC(s,i,o,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Kn(i,"link",o),$t(i),s.head.appendChild(i))}function ic(s){return'[src="'+jn(s)+'"]'}function Su(s){return"script[async]"+s}function kx(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+jn(o.href)+'"]');if(u)return i.instance=u,$t(u),u;var g=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),$t(u),Kn(u,"style",g),kd(u,o.precedence,s),i.instance=u;case"stylesheet":g=sc(o.href);var y=s.querySelector(Au(g));if(y)return i.state.loading|=4,i.instance=y,$t(y),y;u=Lx(o),(g=Rs.get(g))&&_p(u,g),y=(s.ownerDocument||s).createElement("link"),$t(y);var w=y;return w._p=new Promise(function(I,z){w.onload=I,w.onerror=z}),Kn(y,"link",u),i.state.loading|=4,kd(y,o.precedence,s),i.instance=y;case"script":return y=ic(o.src),(g=s.querySelector(Su(y)))?(i.instance=g,$t(g),g):(u=o,(g=Rs.get(y))&&(u=_({},o),Ep(u,g)),s=s.ownerDocument||s,g=s.createElement("script"),$t(g),Kn(g,"link",u),s.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,kd(u,o.precedence,s));return i.instance}function kd(s,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,w=0;w<u.length;w++){var I=u[w];if(I.dataset.precedence===i)y=I;else if(y!==g)break}y?y.parentNode.insertBefore(s,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function _p(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function Ep(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Md=null;function Mx(s,i,o){if(Md===null){var u=new Map,g=Md=new Map;g.set(o,u)}else g=Md,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),g=0;g<o.length;g++){var y=o[g];if(!(y[Ir]||y[Ft]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(i)||"";w=s+w;var I=u.get(w);I?I.push(y):u.set(w,[y])}}return u}function Px(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function cC(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Ux(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function uC(s,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=sc(u.href),y=i.querySelector(Au(g));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=Pd.bind(s),i.then(s,s)),o.state.loading|=4,o.instance=y,$t(y);return}y=i.ownerDocument||i,u=Lx(u),(g=Rs.get(g))&&_p(u,g),y=y.createElement("link"),$t(y);var w=y;w._p=new Promise(function(I,z){w.onload=I,w.onerror=z}),Kn(y,"link",u),o.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=Pd.bind(s),i.addEventListener("load",o),i.addEventListener("error",o))}}var wp=0;function hC(s,i){return s.stylesheets&&s.count===0&&Vd(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var u=setTimeout(function(){if(s.stylesheets&&Vd(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+i);0<s.imgBytes&&wp===0&&(wp=62500*$2());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Vd(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>wp?50:800)+i);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Pd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ud=null;function Vd(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ud=new Map,i.forEach(dC,s),Ud=null,Pd.call(s))}function dC(s,i){if(!(i.state.loading&4)){var o=Ud.get(s);if(o)var u=o.get(null);else{o=new Map,Ud.set(s,o);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var w=g[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}g=i.instance,w=g.getAttribute("data-precedence"),y=o.get(w)||u,y===u&&o.set(null,g),o.set(w,g),this.count++,u=Pd.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),i.state.loading|=4}}var Nu={$$typeof:Q,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function fC(s,i,o,u,g,y,w,I,z){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.hiddenUpdates=Nn(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Vx(s,i,o,u,g,y,w,I,z,J,ae,he){return s=new fC(s,i,o,w,z,J,ae,he,I),i=1,y===!0&&(i|=24),y=Jr(3,null,null,i),s.current=y,y.stateNode=s,i=ng(),i.refCount++,s.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},ag(y),s}function qx(s){return s?(s=Ml,s):Ml}function Bx(s,i,o,u,g,y){g=qx(g),u.context===null?u.context=g:u.pendingContext=g,u=Fa(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=$a(s,u,i),o!==null&&(Vr(o,s,i),iu(o,s,i))}function zx(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function Tp(s,i){zx(s,i),(s=s.alternate)&&zx(s,i)}function Hx(s){if(s.tag===13||s.tag===31){var i=Fo(s,67108864);i!==null&&Vr(i,s,67108864),Tp(s,67108864)}}function Fx(s){if(s.tag===13||s.tag===31){var i=ss();i=fs(i);var o=Fo(s,i);o!==null&&Vr(o,s,i),Tp(s,i)}}var qd=!0;function mC(s,i,o,u){var g=H.T;H.T=null;var y=ee.p;try{ee.p=2,Ap(s,i,o,u)}finally{ee.p=y,H.T=g}}function gC(s,i,o,u){var g=H.T;H.T=null;var y=ee.p;try{ee.p=8,Ap(s,i,o,u)}finally{ee.p=y,H.T=g}}function Ap(s,i,o,u){if(qd){var g=Sp(u);if(g===null)hp(s,i,u,Bd,o),Gx(s,u);else if(yC(g,s,i,o,u))u.stopPropagation();else if(Gx(s,u),i&4&&-1<pC.indexOf(s)){for(;g!==null;){var y=tr(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=er(y.pendingLanes);if(w!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;w;){var z=1<<31-Dt(w);I.entanglements[1]|=z,w&=~z}_i(y),(xt&6)===0&&(wd=Ot()+500,_u(0))}}break;case 31:case 13:I=Fo(y,2),I!==null&&Vr(I,y,2),Ad(),Tp(y,2)}if(y=Sp(u),y===null&&hp(s,i,u,Bd,o),y===g)break;g=y}g!==null&&u.stopPropagation()}else hp(s,i,u,null,o)}}function Sp(s){return s=Bn(s),Np(s)}var Bd=null;function Np(s){if(Bd=null,s=Mt(s),s!==null){var i=l(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=c(i),s!==null)return s;s=null}else if(o===31){if(s=h(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Bd=s,null}function $x(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nr()){case qi:return 2;case Hr:return 8;case mr:case Bi:return 32;case kn:return 268435456;default:return 32}default:return 32}}var Cp=!1,no=null,ro=null,so=null,Cu=new Map,Ru=new Map,io=[],pC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gx(s,i){switch(s){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":Cu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(i.pointerId)}}function Iu(s,i,o,u,g,y){return s===null||s.nativeEvent!==y?(s={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},i!==null&&(i=tr(i),i!==null&&Hx(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function yC(s,i,o,u,g){switch(i){case"focusin":return no=Iu(no,s,i,o,u,g),!0;case"dragenter":return ro=Iu(ro,s,i,o,u,g),!0;case"mouseover":return so=Iu(so,s,i,o,u,g),!0;case"pointerover":var y=g.pointerId;return Cu.set(y,Iu(Cu.get(y)||null,s,i,o,u,g)),!0;case"gotpointercapture":return y=g.pointerId,Ru.set(y,Iu(Ru.get(y)||null,s,i,o,u,g)),!0}return!1}function Kx(s){var i=Mt(s.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){s.blockedOn=i,yr(s.priority,function(){Fx(o)});return}}else if(i===31){if(i=h(o),i!==null){s.blockedOn=i,yr(s.priority,function(){Fx(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function zd(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=Sp(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);un=u,o.target.dispatchEvent(u),un=null}else return i=tr(o),i!==null&&Hx(i),s.blockedOn=o,!1;i.shift()}return!0}function Qx(s,i,o){zd(s)&&o.delete(i)}function vC(){Cp=!1,no!==null&&zd(no)&&(no=null),ro!==null&&zd(ro)&&(ro=null),so!==null&&zd(so)&&(so=null),Cu.forEach(Qx),Ru.forEach(Qx)}function Hd(s,i){s.blockedOn===i&&(s.blockedOn=null,Cp||(Cp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,vC)))}var Fd=null;function Yx(s){Fd!==s&&(Fd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Fd===s&&(Fd=null);for(var i=0;i<s.length;i+=3){var o=s[i],u=s[i+1],g=s[i+2];if(typeof u!="function"){if(Np(u||o)===null)continue;break}var y=tr(o);y!==null&&(s.splice(i,3),i-=3,Sg(y,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function ac(s){function i(z){return Hd(z,s)}no!==null&&Hd(no,s),ro!==null&&Hd(ro,s),so!==null&&Hd(so,s),Cu.forEach(i),Ru.forEach(i);for(var o=0;o<io.length;o++){var u=io[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<io.length&&(o=io[0],o.blockedOn===null);)Kx(o),o.blockedOn===null&&io.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],y=o[u+1],w=g[sn]||null;if(typeof y=="function")w||Yx(o);else if(w){var I=null;if(y&&y.hasAttribute("formAction")){if(g=y,w=y[sn]||null)I=w.formAction;else if(Np(g)!==null)continue}else I=w.action;typeof I=="function"?o[u+1]=I:(o.splice(u,3),u-=3),Yx(o)}}}function Xx(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(w){return g=w})},focusReset:"manual",scroll:"manual"})}function i(){g!==null&&(g(),g=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),g!==null&&(g(),g=null)}}}function Rp(s){this._internalRoot=s}$d.prototype.render=Rp.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=ss();Bx(o,u,s,i,null,null)},$d.prototype.unmount=Rp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Bx(s.current,2,null,s,null,null),Ad(),i[Rr]=null}};function $d(s){this._internalRoot=s}$d.prototype.unstable_scheduleHydration=function(s){if(s){var i=rn();s={blockedOn:null,target:s,priority:i};for(var o=0;o<io.length&&i!==0&&i<io[o].priority;o++);io.splice(o,0,s),o===0&&Kx(s)}};var Wx=e.version;if(Wx!=="19.2.1")throw Error(r(527,Wx,"19.2.1"));ee.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=p(i),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var bC={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{gr=Gd.inject(bC),Zt=Gd}catch{}}return Ou.createRoot=function(s,i){if(!a(s))throw Error(r(299));var o=!1,u="",g=s1,y=i1,w=a1;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=Vx(s,1,!1,null,null,o,u,null,g,y,w,Xx),s[Rr]=i.current,up(s),new Rp(i)},Ou.hydrateRoot=function(s,i,o){if(!a(s))throw Error(r(299));var u=!1,g="",y=s1,w=i1,I=a1,z=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(z=o.formState)),i=Vx(s,1,!0,i,o??null,u,g,z,y,w,I,Xx),i.context=qx(null),o=i.current,u=ss(),u=fs(u),g=Fa(u),g.callback=null,$a(o,g,u),o=u,i.current.lanes=o,ds(i,o),_i(i),s[Rr]=i.current,up(s),new $d(i)},Ou.version="19.2.1",Ou}var o_;function IC(){if(o_)return Op.exports;o_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Op.exports=RC(),Op.exports}var jC=IC();var l_="popstate";function OC(n={}){function e(a,l){let{pathname:c="/",search:h="",hash:m=""}=bl(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),fy("",{pathname:c,search:h,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),h="";if(c&&c.getAttribute("href")){let m=a.location.href,p=m.indexOf("#");h=p===-1?m:m.slice(0,p)}return h+"#"+(typeof l=="string"?l:eh(l))}function r(a,l){cs(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return LC(e,t,r,n)}function Wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function cs(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DC(){return Math.random().toString(36).substring(2,10)}function c_(n,e){return{usr:n.state,key:n.key,idx:e}}function fy(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?bl(e):e,state:t,key:e&&e.key||r||DC()}}function eh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function bl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function LC(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,h="POP",m=null,p=v();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function v(){return(c.state||{idx:null}).idx}function _(){h="POP";let R=v(),U=R==null?null:R-p;p=R,m&&m({action:h,location:O.location,delta:U})}function E(R,U){h="PUSH";let F=fy(O.location,R,U);t&&t(F,R),p=v()+1;let Q=c_(F,p),Y=O.createHref(F);try{c.pushState(Q,"",Y)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;a.location.assign(Y)}l&&m&&m({action:h,location:O.location,delta:1})}function A(R,U){h="REPLACE";let F=fy(O.location,R,U);t&&t(F,R),p=v();let Q=c_(F,p),Y=O.createHref(F);c.replaceState(Q,"",Y),l&&m&&m({action:h,location:O.location,delta:0})}function S(R){return kC(R)}let O={get action(){return h},get location(){return n(a,c)},listen(R){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(l_,_),m=R,()=>{a.removeEventListener(l_,_),m=null}},createHref(R){return e(a,R)},createURL:S,encodeLocation(R){let U=S(R);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:E,replace:A,go(R){return c.go(R)}};return O}function kC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:eh(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Zw(n,e,t="/"){return MC(n,e,t,!1)}function MC(n,e,t,r){let a=typeof e=="string"?bl(e):e,l=xa(a.pathname||"/",t);if(l==null)return null;let c=Jw(n);PC(c);let h=null;for(let m=0;h==null&&m<c.length;++m){let p=QC(l);h=GC(c[m],p,r)}return h}function Jw(n,e=[],t=[],r="",a=!1){let l=(c,h,m=a,p)=>{let v={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&m)return;Wt(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let _=va([r,v.relativePath]),E=t.concat(v);c.children&&c.children.length>0&&(Wt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),Jw(c.children,e,E,_,m)),!(c.path==null&&!c.index)&&e.push({path:_,score:FC(_,c.index),routesMeta:E})};return n.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))l(c,h);else for(let m of eT(c.path))l(c,h,!0,m)}),e}function eT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=eT(r.join("/")),h=[];return h.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&h.push(...c),h.map(m=>n.startsWith("/")&&m===""?"/":m)}function PC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:$C(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var UC=/^:[\w-]+$/,VC=3,qC=2,BC=1,zC=10,HC=-2,u_=n=>n==="*";function FC(n,e){let t=n.split("/"),r=t.length;return t.some(u_)&&(r+=HC),e&&(r+=qC),t.filter(a=>!u_(a)).reduce((a,l)=>a+(UC.test(l)?VC:l===""?BC:zC),r)}function $C(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function GC(n,e,t=!1){let{routesMeta:r}=n,a={},l="/",c=[];for(let h=0;h<r.length;++h){let m=r[h],p=h===r.length-1,v=l==="/"?e:e.slice(l.length)||"/",_=Nf({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},v),E=m.route;if(!_&&p&&t&&!r[r.length-1].route.index&&(_=Nf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!_)return null;Object.assign(a,_.params),c.push({params:a,pathname:va([l,_.pathname]),pathnameBase:JC(va([l,_.pathnameBase])),route:E}),_.pathnameBase!=="/"&&(l=va([l,_.pathnameBase]))}return c}function Nf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=KC(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:r.reduce((p,{paramName:v,isOptional:_},E)=>{if(v==="*"){let S=h[E]||"";c=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const A=h[E];return _&&!A?p[v]=void 0:p[v]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:n}}function KC(n,e=!1,t=!0){cs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,m)=>(r.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function QC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function xa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var YC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XC=n=>YC.test(n);function WC(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?bl(n):n,l;if(t)if(XC(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),cs(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=h_(t.substring(1),"/"):l=h_(t,e)}else l=e;return{pathname:l,search:eR(r),hash:tR(a)}}function h_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Mp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ZC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function i0(n){let e=ZC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function a0(n,e,t,r=!1){let a;typeof n=="string"?a=bl(n):(a={...n},Wt(!a.pathname||!a.pathname.includes("?"),Mp("?","pathname","search",a)),Wt(!a.pathname||!a.pathname.includes("#"),Mp("#","pathname","hash",a)),Wt(!a.search||!a.search.includes("#"),Mp("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,h;if(c==null)h=t;else{let _=e.length-1;if(!r&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),_-=1;a.pathname=E.join("/")}h=_>=0?e[_]:"/"}let m=WC(a,h),p=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||v)&&(m.pathname+="/"),m}var va=n=>n.join("/").replace(/\/\/+/g,"/"),JC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),eR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,tR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function nR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function rR(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var tT=["POST","PUT","PATCH","DELETE"];new Set(tT);var sR=["GET",...tT];new Set(sR);var kc=P.createContext(null);kc.displayName="DataRouter";var tm=P.createContext(null);tm.displayName="DataRouterState";P.createContext(!1);var nT=P.createContext({isTransitioning:!1});nT.displayName="ViewTransition";var iR=P.createContext(new Map);iR.displayName="Fetchers";var aR=P.createContext(null);aR.displayName="Await";var Ps=P.createContext(null);Ps.displayName="Navigation";var ph=P.createContext(null);ph.displayName="Location";var Us=P.createContext({outlet:null,matches:[],isDataRoute:!1});Us.displayName="Route";var o0=P.createContext(null);o0.displayName="RouteError";function oR(n,{relative:e}={}){Wt(Mc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(Ps),{hash:a,pathname:l,search:c}=yh(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:va([t,l])),r.createHref({pathname:h,search:c,hash:a})}function Mc(){return P.useContext(ph)!=null}function Oo(){return Wt(Mc(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(ph).location}var rT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sT(n){P.useContext(Ps).static||P.useLayoutEffect(n)}function ki(){let{isDataRoute:n}=P.useContext(Us);return n?ER():lR()}function lR(){Wt(Mc(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(kc),{basename:e,navigator:t}=P.useContext(Ps),{matches:r}=P.useContext(Us),{pathname:a}=Oo(),l=JSON.stringify(i0(r)),c=P.useRef(!1);return sT(()=>{c.current=!0}),P.useCallback((m,p={})=>{if(cs(c.current,rT),!c.current)return;if(typeof m=="number"){t.go(m);return}let v=a0(m,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:va([e,v.pathname])),(p.replace?t.replace:t.push)(v,p.state,p)},[e,t,l,a,n])}var cR=P.createContext(null);function uR(n){let e=P.useContext(Us).outlet;return P.useMemo(()=>e&&P.createElement(cR.Provider,{value:n},e),[e,n])}function Pc(){let{matches:n}=P.useContext(Us),e=n[n.length-1];return e?e.params:{}}function yh(n,{relative:e}={}){let{matches:t}=P.useContext(Us),{pathname:r}=Oo(),a=JSON.stringify(i0(t));return P.useMemo(()=>a0(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function hR(n,e){return iT(n,e)}function iT(n,e,t,r,a){Wt(Mc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=P.useContext(Ps),{matches:c}=P.useContext(Us),h=c[c.length-1],m=h?h.params:{},p=h?h.pathname:"/",v=h?h.pathnameBase:"/",_=h&&h.route;{let F=_&&_.path||"";aT(p,!_||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let E=Oo(),A;if(e){let F=typeof e=="string"?bl(e):e;Wt(v==="/"||F.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${F.pathname}" was given in the \`location\` prop.`),A=F}else A=E;let S=A.pathname||"/",O=S;if(v!=="/"){let F=v.replace(/^\//,"").split("/");O="/"+S.replace(/^\//,"").split("/").slice(F.length).join("/")}let R=Zw(n,{pathname:O});cs(_||R!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),cs(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=pR(R&&R.map(F=>Object.assign({},F,{params:Object.assign({},m,F.params),pathname:va([v,l.encodeLocation?l.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?v:va([v,l.encodeLocation?l.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),c,t,r,a);return e&&U?P.createElement(ph.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},U):U}function dR(){let n=_R(),e=nR(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:l},"ErrorBoundary")," or"," ",P.createElement("code",{style:l},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:a},t):null,c)}var fR=P.createElement(dR,null),mR=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?P.createElement(Us.Provider,{value:this.props.routeContext},P.createElement(o0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gR({routeContext:n,match:e,children:t}){let r=P.useContext(kc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Us.Provider,{value:n},t)}function pR(n,e=[],t=null,r=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let v=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);Wt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let h=!1,m=-1;if(t)for(let v=0;v<l.length;v++){let _=l[v];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=v),_.route.id){let{loaderData:E,errors:A}=t,S=_.route.loader&&!E.hasOwnProperty(_.route.id)&&(!A||A[_.route.id]===void 0);if(_.route.lazy||S){h=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let p=t&&r?(v,_)=>{r(v,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:rR(t.matches),errorInfo:_})}:void 0;return l.reduceRight((v,_,E)=>{let A,S=!1,O=null,R=null;t&&(A=c&&_.route.id?c[_.route.id]:void 0,O=_.route.errorElement||fR,h&&(m<0&&E===0?(aT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,R=null):m===E&&(S=!0,R=_.route.hydrateFallbackElement||null)));let U=e.concat(l.slice(0,E+1)),F=()=>{let Q;return A?Q=O:S?Q=R:_.route.Component?Q=P.createElement(_.route.Component,null):_.route.element?Q=_.route.element:Q=v,P.createElement(gR,{match:_,routeContext:{outlet:v,matches:U,isDataRoute:t!=null},children:Q})};return t&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?P.createElement(mR,{location:t.location,revalidation:t.revalidation,component:O,error:A,children:F(),routeContext:{outlet:null,matches:U,isDataRoute:!0},onError:p}):F()},null)}function l0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yR(n){let e=P.useContext(kc);return Wt(e,l0(n)),e}function vR(n){let e=P.useContext(tm);return Wt(e,l0(n)),e}function bR(n){let e=P.useContext(Us);return Wt(e,l0(n)),e}function c0(n){let e=bR(n),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function xR(){return c0("useRouteId")}function _R(){let n=P.useContext(o0),e=vR("useRouteError"),t=c0("useRouteError");return n!==void 0?n:e.errors?.[t]}function ER(){let{router:n}=yR("useNavigate"),e=c0("useNavigate"),t=P.useRef(!1);return sT(()=>{t.current=!0}),P.useCallback(async(a,l={})=>{cs(t.current,rT),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var d_={};function aT(n,e,t){!e&&!d_[n]&&(d_[n]=!0,cs(!1,t))}P.memo(wR);function wR({routes:n,future:e,state:t,unstable_onError:r}){return iT(n,void 0,t,r,e)}function TR({to:n,replace:e,state:t,relative:r}){Wt(Mc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=P.useContext(Ps);cs(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=P.useContext(Us),{pathname:c}=Oo(),h=ki(),m=a0(n,i0(l),c,r==="path"),p=JSON.stringify(m);return P.useEffect(()=>{h(JSON.parse(p),{replace:e,state:t,relative:r})},[h,p,r,e,t]),null}function AR(n){return uR(n.context)}function gn(n){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function SR({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){Wt(!Mc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),m=P.useMemo(()=>({basename:h,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[h,a,l,c]);typeof t=="string"&&(t=bl(t));let{pathname:p="/",search:v="",hash:_="",state:E=null,key:A="default"}=t,S=P.useMemo(()=>{let O=xa(p,h);return O==null?null:{location:{pathname:O,search:v,hash:_,state:E,key:A},navigationType:r}},[h,p,v,_,E,A,r]);return cs(S!=null,`<Router basename="${h}"> is not able to match the URL "${p}${v}${_}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:P.createElement(Ps.Provider,{value:m},P.createElement(ph.Provider,{children:e,value:S}))}function NR({children:n,location:e}){return hR(my(n),e)}function my(n,e=[]){let t=[];return P.Children.forEach(n,(r,a)=>{if(!P.isValidElement(r))return;let l=[...e,a];if(r.type===P.Fragment){t.push.apply(t,my(r.props.children,l));return}Wt(r.type===gn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=my(r.props.children,l)),t.push(c)}),t}var ff="get",mf="application/x-www-form-urlencoded";function nm(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function CR(n){return nm(n)&&n.tagName.toLowerCase()==="button"}function RR(n){return nm(n)&&n.tagName.toLowerCase()==="form"}function IR(n){return nm(n)&&n.tagName.toLowerCase()==="input"}function jR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function OR(n,e){return n.button===0&&(!e||e==="_self")&&!jR(n)}var Kd=null;function DR(){if(Kd===null)try{new FormData(document.createElement("form"),0),Kd=!1}catch{Kd=!0}return Kd}var LR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Pp(n){return n!=null&&!LR.has(n)?(cs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mf}"`),null):n}function kR(n,e){let t,r,a,l,c;if(RR(n)){let h=n.getAttribute("action");r=h?xa(h,e):null,t=n.getAttribute("method")||ff,a=Pp(n.getAttribute("enctype"))||mf,l=new FormData(n)}else if(CR(n)||IR(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||h.getAttribute("action");if(r=m?xa(m,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||ff,a=Pp(n.getAttribute("formenctype"))||Pp(h.getAttribute("enctype"))||mf,l=new FormData(h,n),!DR()){let{name:p,type:v,value:_}=n;if(v==="image"){let E=p?`${p}.`:"";l.append(`${E}x`,"0"),l.append(`${E}y`,"0")}else p&&l.append(p,_)}}else{if(nm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ff,r=null,a=mf,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function u0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function MR(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&xa(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function PR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function UR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function VR(n,e,t){let r=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await PR(l,t);return c.links?c.links():[]}return[]}));return HR(r.flat(1).filter(UR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function f_(n,e,t,r,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,h=(m,p)=>t[p].pathname!==m.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,p)=>c(m,p)||h(m,p)):l==="data"?e.filter((m,p)=>{let v=r.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(c(m,p)||h(m,p))return!0;if(m.route.shouldRevalidate){let _=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function qR(n,e,{includeHydrateFallback:t}={}){return BR(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function BR(n){return[...new Set(n)]}function zR(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function HR(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let l=JSON.stringify(zR(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function oT(){let n=P.useContext(kc);return u0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function FR(){let n=P.useContext(tm);return u0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var h0=P.createContext(void 0);h0.displayName="FrameworkContext";function lT(){let n=P.useContext(h0);return u0(n,"You must render this element inside a <HydratedRouter> element"),n}function $R(n,e){let t=P.useContext(h0),[r,a]=P.useState(!1),[l,c]=P.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:p,onMouseLeave:v,onTouchStart:_}=e,E=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let O=U=>{U.forEach(F=>{c(F.isIntersecting)})},R=new IntersectionObserver(O,{threshold:.5});return E.current&&R.observe(E.current),()=>{R.disconnect()}}},[n]),P.useEffect(()=>{if(r){let O=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(O)}}},[r]);let A=()=>{a(!0)},S=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,E,{}]:[l,E,{onFocus:Du(h,A),onBlur:Du(m,S),onMouseEnter:Du(p,A),onMouseLeave:Du(v,S),onTouchStart:Du(_,A)}]:[!1,E,{}]}function Du(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function GR({page:n,...e}){let{router:t}=oT(),r=P.useMemo(()=>Zw(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(QR,{page:n,matches:r,...e}):null}function KR(n){let{manifest:e,routeModules:t}=lT(),[r,a]=P.useState([]);return P.useEffect(()=>{let l=!1;return VR(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),r}function QR({page:n,matches:e,...t}){let r=Oo(),{manifest:a,routeModules:l}=lT(),{basename:c}=oT(),{loaderData:h,matches:m}=FR(),p=P.useMemo(()=>f_(n,e,m,a,r,"data"),[n,e,m,a,r]),v=P.useMemo(()=>f_(n,e,m,a,r,"assets"),[n,e,m,a,r]),_=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let S=new Set,O=!1;if(e.forEach(U=>{let F=a.routes[U.route.id];!F||!F.hasLoader||(!p.some(Q=>Q.route.id===U.route.id)&&U.route.id in h&&l[U.route.id]?.shouldRevalidate||F.hasClientLoader?O=!0:S.add(U.route.id))}),S.size===0)return[];let R=MR(n,c,"data");return O&&S.size>0&&R.searchParams.set("_routes",e.filter(U=>S.has(U.route.id)).map(U=>U.route.id).join(",")),[R.pathname+R.search]},[c,h,r,a,p,e,n,l]),E=P.useMemo(()=>qR(v,a),[v,a]),A=KR(v);return P.createElement(P.Fragment,null,_.map(S=>P.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),E.map(S=>P.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),A.map(({key:S,link:O})=>P.createElement("link",{key:S,nonce:t.nonce,...O})))}function YR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var cT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cT&&(window.__reactRouterVersion="7.10.1")}catch{}function XR({basename:n,children:e,unstable_useTransitions:t,window:r}){let a=P.useRef();a.current==null&&(a.current=OC({window:r,v5Compat:!0}));let l=a.current,[c,h]=P.useState({action:l.action,location:l.location}),m=P.useCallback(p=>{t===!1?h(p):P.startTransition(()=>h(p))},[t]);return P.useLayoutEffect(()=>l.listen(m),[l,m]),P.createElement(SR,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t===!0})}var uT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ze=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:h,target:m,to:p,preventScrollReset:v,viewTransition:_,...E},A){let{basename:S,unstable_useTransitions:O}=P.useContext(Ps),R=typeof p=="string"&&uT.test(p),U,F=!1;if(typeof p=="string"&&R&&(U=p,cT))try{let $=new URL(window.location.href),N=p.startsWith("//")?new URL($.protocol+p):new URL(p),M=xa(N.pathname,S);N.origin===$.origin&&M!=null?p=M+N.search+N.hash:F=!0}catch{cs(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Q=oR(p,{relative:a}),[Y,ie,ve]=$R(r,E),L=JR(p,{replace:c,state:h,target:m,preventScrollReset:v,relative:a,viewTransition:_,unstable_useTransitions:O});function k($){e&&e($),$.defaultPrevented||L($)}let V=P.createElement("a",{...E,...ve,href:U||Q,onClick:F||l?e:k,ref:YR(A,ie),target:m,"data-discover":!R&&t==="render"?"true":void 0});return Y&&!R?P.createElement(P.Fragment,null,V,P.createElement(GR,{page:Q})):V});ze.displayName="Link";var hT=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:h,children:m,...p},v){let _=yh(c,{relative:p.relative}),E=Oo(),A=P.useContext(tm),{navigator:S,basename:O}=P.useContext(Ps),R=A!=null&&s4(_)&&h===!0,U=S.encodeLocation?S.encodeLocation(_).pathname:_.pathname,F=E.pathname,Q=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(F=F.toLowerCase(),Q=Q?Q.toLowerCase():null,U=U.toLowerCase()),Q&&O&&(Q=xa(Q,O)||Q);const Y=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let ie=F===U||!a&&F.startsWith(U)&&F.charAt(Y)==="/",ve=Q!=null&&(Q===U||!a&&Q.startsWith(U)&&Q.charAt(U.length)==="/"),L={isActive:ie,isPending:ve,isTransitioning:R},k=ie?e:void 0,V;typeof r=="function"?V=r(L):V=[r,ie?"active":null,ve?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let $=typeof l=="function"?l(L):l;return P.createElement(ze,{...p,"aria-current":k,className:V,ref:v,style:$,to:c,viewTransition:h},typeof m=="function"?m(L):m)});hT.displayName="NavLink";var WR=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=ff,action:h,onSubmit:m,relative:p,preventScrollReset:v,viewTransition:_,...E},A)=>{let{unstable_useTransitions:S}=P.useContext(Ps),O=n4(),R=r4(h,{relative:p}),U=c.toLowerCase()==="get"?"get":"post",F=typeof h=="string"&&uT.test(h),Q=Y=>{if(m&&m(Y),Y.defaultPrevented)return;Y.preventDefault();let ie=Y.nativeEvent.submitter,ve=ie?.getAttribute("formmethod")||c,L=()=>O(ie||Y.currentTarget,{fetcherKey:e,method:ve,navigate:t,replace:a,state:l,relative:p,preventScrollReset:v,viewTransition:_});S&&t!==!1?P.startTransition(()=>L()):L()};return P.createElement("form",{ref:A,method:U,action:R,onSubmit:r?m:Q,...E,"data-discover":!F&&n==="render"?"true":void 0})});WR.displayName="Form";function ZR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dT(n){let e=P.useContext(kc);return Wt(e,ZR(n)),e}function JR(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c,unstable_useTransitions:h}={}){let m=ki(),p=Oo(),v=yh(n,{relative:l});return P.useCallback(_=>{if(OR(_,e)){_.preventDefault();let E=t!==void 0?t:eh(p)===eh(v),A=()=>m(n,{replace:E,state:r,preventScrollReset:a,relative:l,viewTransition:c});h?P.startTransition(()=>A()):A()}},[p,m,v,t,r,e,n,a,l,c,h])}var e4=0,t4=()=>`__${String(++e4)}__`;function n4(){let{router:n}=dT("useSubmit"),{basename:e}=P.useContext(Ps),t=xR(),r=n.fetch,a=n.navigate;return P.useCallback(async(l,c={})=>{let{action:h,method:m,encType:p,formData:v,body:_}=kR(l,e);if(c.navigate===!1){let E=c.fetcherKey||t4();await r(E,t,c.action||h,{preventScrollReset:c.preventScrollReset,formData:v,body:_,formMethod:c.method||m,formEncType:c.encType||p,flushSync:c.flushSync})}else await a(c.action||h,{preventScrollReset:c.preventScrollReset,formData:v,body:_,formMethod:c.method||m,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,a,e,t])}function r4(n,{relative:e}={}){let{basename:t}=P.useContext(Ps),r=P.useContext(Us);Wt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...yh(n||".",{relative:e})},c=Oo();if(n==null){l.search=c.search;let h=new URLSearchParams(l.search),m=h.getAll("index");if(m.some(v=>v==="")){h.delete("index"),m.filter(_=>_).forEach(_=>h.append("index",_));let v=h.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:va([t,l.pathname])),eh(l)}function s4(n,{relative:e}={}){let t=P.useContext(nT);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=dT("useViewTransitionState"),a=yh(n,{relative:e});if(!t.isTransitioning)return!1;let l=xa(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=xa(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Nf(a.pathname,c)!=null||Nf(a.pathname,l)!=null}const i4=()=>{};var m_={};const fT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},a4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],h=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},mT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,h=c?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,v=l>>2,_=(l&3)<<4|h>>4;let E=(h&15)<<2|p>>6,A=p&63;m||(A=64,c||(E=64)),r.push(t[v],t[_],t[E],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):a4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const _=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||p==null||_==null)throw new o4;const E=l<<2|h>>4;if(r.push(E),p!==64){const A=h<<4&240|p>>2;if(r.push(A),_!==64){const S=p<<6&192|_;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class o4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l4=function(n){const e=fT(n);return mT.encodeByteArray(e,!0)},Cf=function(n){return l4(n).replace(/\./g,"")},gT=function(n){try{return mT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const u4=()=>c4().__FIREBASE_DEFAULTS__,h4=()=>{if(typeof process>"u"||typeof m_>"u")return;const n=m_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},d4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&gT(n[1]);return e&&JSON.parse(e)},rm=()=>{try{return i4()||u4()||h4()||d4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},pT=n=>rm()?.emulatorHosts?.[n],f4=n=>{const e=pT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},yT=()=>rm()?.config,vT=n=>rm()?.[`_${n}`];class m4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Uc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bT(n){return(await fetch(n,{credentials:"include"})).ok}function g4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Cf(JSON.stringify(t)),Cf(JSON.stringify(c)),""].join(".")}const Gu={};function p4(){const n={prod:[],emulator:[]};for(const e of Object.keys(Gu))Gu[e]?n.emulator.push(e):n.prod.push(e);return n}function y4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let g_=!1;function xT(n,e){if(typeof window>"u"||typeof document>"u"||!Uc(window.location.host)||Gu[n]===e||Gu[n]||g_)return;Gu[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",l=p4().prod.length>0;function c(){const E=document.getElementById(r);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function m(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{g_=!0,c()},E}function v(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function _(){const E=y4(r),A=t("text"),S=document.getElementById(A)||document.createElement("span"),O=t("learnmore"),R=document.getElementById(O)||document.createElement("a"),U=t("preprendIcon"),F=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Q=E.element;h(Q),v(R,O);const Y=p();m(F,U),Q.append(F,S,R,Y),document.body.appendChild(Q)}l?(S.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function dr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dr())}function b4(){const n=rm()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function E4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w4(){const n=dr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function T4(){return!b4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A4(){try{return typeof indexedDB=="object"}catch{return!1}}function S4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const N4="FirebaseError";class Ca extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=N4,Object.setPrototypeOf(this,Ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vh.prototype.create)}}class vh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?C4(l,r):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Ca(a,h,r)}}function C4(n,e){return n.replace(R4,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const R4=/\{\$([^}]+)}/g;function I4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _a(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],c=e[a];if(p_(l)&&p_(c)){if(!_a(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function p_(n){return n!==null&&typeof n=="object"}function bh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Uu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function j4(n,e){const t=new O4(n,e);return t.subscribe.bind(t)}class O4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");D4(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Up),a.error===void 0&&(a.error=Up),a.complete===void 0&&(a.complete=Up);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Up(){}function An(n){return n&&n._delegate?n._delegate:n}class cl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const rl="[DEFAULT]";class L4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new m4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M4(e))try{this.getOrInitializeService({instanceIdentifier:rl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=rl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rl){return this.instances.has(e)}getOptions(e=rl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:k4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rl){return this.component?this.component.multipleInstances?e:rl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function k4(n){return n===rl?void 0:n}function M4(n){return n.instantiationMode==="EAGER"}class P4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new L4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ot;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ot||(ot={}));const U4={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},V4=ot.INFO,q4={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},B4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=q4[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class d0{constructor(e){this.name=e,this._logLevel=V4,this._logHandler=B4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?U4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const z4=(n,e)=>e.some(t=>n instanceof t);let y_,v_;function H4(){return y_||(y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F4(){return v_||(v_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _T=new WeakMap,gy=new WeakMap,ET=new WeakMap,Vp=new WeakMap,f0=new WeakMap;function $4(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(vo(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&_T.set(t,n)}).catch(()=>{}),f0.set(e,n),e}function G4(n){if(gy.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});gy.set(n,e)}let py={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ET.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function K4(n){py=n(py)}function Q4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(qp(this),e,...t);return ET.set(r,e.sort?e.sort():[e]),vo(r)}:F4().includes(n)?function(...e){return n.apply(qp(this),e),vo(_T.get(this))}:function(...e){return vo(n.apply(qp(this),e))}}function Y4(n){return typeof n=="function"?Q4(n):(n instanceof IDBTransaction&&G4(n),z4(n,H4())?new Proxy(n,py):n)}function vo(n){if(n instanceof IDBRequest)return $4(n);if(Vp.has(n))return Vp.get(n);const e=Y4(n);return e!==n&&(Vp.set(n,e),f0.set(e,n)),e}const qp=n=>f0.get(n);function X4(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),h=vo(c);return r&&c.addEventListener("upgradeneeded",m=>{r(vo(c.result),m.oldVersion,m.newVersion,vo(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const W4=["get","getKey","getAll","getAllKeys","count"],Z4=["put","add","delete","clear"],Bp=new Map;function b_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Bp.get(e))return Bp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=Z4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||W4.includes(t)))return;const l=async function(c,...h){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),a&&m.done]))[0]};return Bp.set(e,l),l}K4(n=>({...n,get:(e,t,r)=>b_(e,t)||n.get(e,t,r),has:(e,t)=>!!b_(e,t)||n.has(e,t)}));class J4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(eI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function eI(n){return n.getComponent()?.type==="VERSION"}const yy="@firebase/app",x_="0.14.6";const Ea=new d0("@firebase/app"),tI="@firebase/app-compat",nI="@firebase/analytics-compat",rI="@firebase/analytics",sI="@firebase/app-check-compat",iI="@firebase/app-check",aI="@firebase/auth",oI="@firebase/auth-compat",lI="@firebase/database",cI="@firebase/data-connect",uI="@firebase/database-compat",hI="@firebase/functions",dI="@firebase/functions-compat",fI="@firebase/installations",mI="@firebase/installations-compat",gI="@firebase/messaging",pI="@firebase/messaging-compat",yI="@firebase/performance",vI="@firebase/performance-compat",bI="@firebase/remote-config",xI="@firebase/remote-config-compat",_I="@firebase/storage",EI="@firebase/storage-compat",wI="@firebase/firestore",TI="@firebase/ai",AI="@firebase/firestore-compat",SI="firebase",NI="12.6.0";const vy="[DEFAULT]",CI={[yy]:"fire-core",[tI]:"fire-core-compat",[rI]:"fire-analytics",[nI]:"fire-analytics-compat",[iI]:"fire-app-check",[sI]:"fire-app-check-compat",[aI]:"fire-auth",[oI]:"fire-auth-compat",[lI]:"fire-rtdb",[cI]:"fire-data-connect",[uI]:"fire-rtdb-compat",[hI]:"fire-fn",[dI]:"fire-fn-compat",[fI]:"fire-iid",[mI]:"fire-iid-compat",[gI]:"fire-fcm",[pI]:"fire-fcm-compat",[yI]:"fire-perf",[vI]:"fire-perf-compat",[bI]:"fire-rc",[xI]:"fire-rc-compat",[_I]:"fire-gcs",[EI]:"fire-gcs-compat",[wI]:"fire-fst",[AI]:"fire-fst-compat",[TI]:"fire-vertex","fire-js":"fire-js",[SI]:"fire-js-all"};const Rf=new Map,RI=new Map,by=new Map;function __(n,e){try{n.container.addComponent(e)}catch(t){Ea.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ec(n){const e=n.name;if(by.has(e))return Ea.debug(`There were multiple attempts to register component ${e}.`),!1;by.set(e,n);for(const t of Rf.values())__(t,n);for(const t of RI.values())__(t,n);return!0}function m0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function is(n){return n==null?!1:n.settings!==void 0}const II={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bo=new vh("app","Firebase",II);class jI{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bo.create("app-deleted",{appName:this._name})}}const Vc=NI;function wT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:vy,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw bo.create("bad-app-name",{appName:String(a)});if(t||(t=yT()),!t)throw bo.create("no-options");const l=Rf.get(a);if(l){if(_a(t,l.options)&&_a(r,l.config))return l;throw bo.create("duplicate-app",{appName:a})}const c=new P4(a);for(const m of by.values())c.addComponent(m);const h=new jI(t,r,c);return Rf.set(a,h),h}function TT(n=vy){const e=Rf.get(n);if(!e&&n===vy&&yT())return wT();if(!e)throw bo.create("no-app",{appName:n});return e}function xo(n,e,t){let r=CI[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ea.warn(c.join(" "));return}Ec(new cl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const OI="firebase-heartbeat-database",DI=1,th="firebase-heartbeat-store";let zp=null;function AT(){return zp||(zp=X4(OI,DI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(th)}catch(t){console.warn(t)}}}}).catch(n=>{throw bo.create("idb-open",{originalErrorMessage:n.message})})),zp}async function LI(n){try{const t=(await AT()).transaction(th),r=await t.objectStore(th).get(ST(n));return await t.done,r}catch(e){if(e instanceof Ca)Ea.warn(e.message);else{const t=bo.create("idb-get",{originalErrorMessage:e?.message});Ea.warn(t.message)}}}async function E_(n,e){try{const r=(await AT()).transaction(th,"readwrite");await r.objectStore(th).put(e,ST(n)),await r.done}catch(t){if(t instanceof Ca)Ea.warn(t.message);else{const r=bo.create("idb-set",{originalErrorMessage:t?.message});Ea.warn(r.message)}}}function ST(n){return`${n.name}!${n.options.appId}`}const kI=1024,MI=30;class PI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new VI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=w_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>MI){const a=qI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ea.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=w_(),{heartbeatsToSend:t,unsentEntries:r}=UI(this._heartbeatsCache.heartbeats),a=Cf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ea.warn(e),""}}}function w_(){return new Date().toISOString().substring(0,10)}function UI(n,e=kI){const t=[];let r=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),T_(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),T_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class VI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return A4()?S4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await LI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return E_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return E_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function T_(n){return Cf(JSON.stringify({version:2,heartbeats:n})).length}function qI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function BI(n){Ec(new cl("platform-logger",e=>new J4(e),"PRIVATE")),Ec(new cl("heartbeat",e=>new PI(e),"PRIVATE")),xo(yy,x_,n),xo(yy,x_,"esm2020"),xo("fire-js","")}BI("");var zI="firebase",HI="12.6.0";xo(zI,HI,"app");function NT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FI=NT,CT=new vh("auth","Firebase",NT());const If=new d0("@firebase/auth");function $I(n,...e){If.logLevel<=ot.WARN&&If.warn(`Auth (${Vc}): ${n}`,...e)}function gf(n,...e){If.logLevel<=ot.ERROR&&If.error(`Auth (${Vc}): ${n}`,...e)}function Ms(n,...e){throw p0(n,...e)}function ni(n,...e){return p0(n,...e)}function g0(n,e,t){const r={...FI(),[e]:t};return new vh("auth","Firebase",r).create(e,{appName:n.name})}function ba(n){return g0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GI(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ms(n,"argument-error"),g0(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function p0(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return CT.create(n,...e)}function qe(n,e,...t){if(!n)throw p0(e,...t)}function pa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw gf(e),new Error(e)}function wa(n,e){n||pa(e)}function xy(){return typeof self<"u"&&self.location?.href||""}function KI(){return A_()==="http:"||A_()==="https:"}function A_(){return typeof self<"u"&&self.location?.protocol||null}function QI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KI()||_4()||"connection"in navigator)?navigator.onLine:!0}function YI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class xh{constructor(e,t){this.shortDelay=e,this.longDelay=t,wa(t>e,"Short delay should be less than long delay!"),this.isMobile=v4()||E4()}get(){return QI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function y0(n,e){wa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class RT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const XI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const WI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZI=new xh(3e4,6e4);function Do(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ra(n,e,t,r,a={}){return IT(n,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const h=bh({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...l};return x4()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Uc(n.emulatorConfig.host)&&(p.credentials="include"),RT.fetch()(await jT(n,n.config.apiHost,t,h),p)})}async function IT(n,e,t){n._canInitEmulator=!1;const r={...XI,...e};try{const a=new e3(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Qd(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[m,p]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qd(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Qd(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Qd(n,"user-disabled",c);const v=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw g0(n,v,p);Ms(n,v)}}catch(a){if(a instanceof Ca)throw a;Ms(n,"network-request-failed",{message:String(a)})}}async function _h(n,e,t,r,a={}){const l=await Ra(n,e,t,r,a);return"mfaPendingCredential"in l&&Ms(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function jT(n,e,t,r){const a=`${e}${t}?${r}`,l=n,c=l.config.emulator?y0(n.config,a):`${n.config.apiScheme}://${a}`;return WI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function JI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class e3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ni(this.auth,"network-request-failed")),ZI.get())})}}function Qd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=ni(n,e,r);return a.customData._tokenResponse=t,a}function S_(n){return n!==void 0&&n.enterprise!==void 0}class t3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return JI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function n3(n,e){return Ra(n,"GET","/v2/recaptchaConfig",Do(n,e))}async function r3(n,e){return Ra(n,"POST","/v1/accounts:delete",e)}async function jf(n,e){return Ra(n,"POST","/v1/accounts:lookup",e)}function Ku(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function s3(n,e=!1){const t=An(n),r=await t.getIdToken(e),a=v0(r);qe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Ku(Hp(a.auth_time)),issuedAtTime:Ku(Hp(a.iat)),expirationTime:Ku(Hp(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Hp(n){return Number(n)*1e3}function v0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return gf("JWT malformed, contained fewer than 3 sections"),null;try{const a=gT(t);return a?JSON.parse(a):(gf("Failed to decode base64 JWT payload"),null)}catch(a){return gf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function N_(n){const e=v0(n);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function wc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ca&&i3(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function i3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class a3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class _y{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Of(n){const e=n.auth,t=await n.getIdToken(),r=await wc(n,jf(e,{idToken:t}));qe(r?.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?OT(a.providerUserInfo):[],c=l3(n.providerData,l),h=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!c?.length,p=h?m:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new _y(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function o3(n){const e=An(n);await Of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function l3(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function OT(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function c3(n,e){const t=await IT(n,{},async()=>{const r=bh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await jT(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:r};return n.emulatorConfig&&Uc(n.emulatorConfig.host)&&(m.credentials="include"),RT.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function u3(n,e){return Ra(n,"POST","/v2/accounts:revokeToken",Do(n,e))}class gc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):N_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const t=N_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await c3(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new gc;return r&&(qe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(qe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(qe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gc,this.toJSON())}_performRefresh(){return pa("not implemented")}}function oo(n,e){qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ti{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new a3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new _y(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await wc(this,this.stsTokenManager.getToken(this.auth,e));return qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return s3(this,e)}reload(){return o3(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Of(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(is(this.auth.app))return Promise.reject(ba(this.auth));const e=await this.getIdToken();return await wc(this,r3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:E,isAnonymous:A,providerData:S,stsTokenManager:O}=t;qe(_&&O,e,"internal-error");const R=gc.fromJSON(this.name,O);qe(typeof _=="string",e,"internal-error"),oo(r,e.name),oo(a,e.name),qe(typeof E=="boolean",e,"internal-error"),qe(typeof A=="boolean",e,"internal-error"),oo(l,e.name),oo(c,e.name),oo(h,e.name),oo(m,e.name),oo(p,e.name),oo(v,e.name);const U=new ti({uid:_,auth:e,email:a,emailVerified:E,displayName:r,isAnonymous:A,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:R,createdAt:p,lastLoginAt:v});return S&&Array.isArray(S)&&(U.providerData=S.map(F=>({...F}))),m&&(U._redirectEventId=m),U}static async _fromIdTokenResponse(e,t,r=!1){const a=new gc;a.updateFromServerResponse(t);const l=new ti({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Of(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];qe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?OT(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,h=new gc;h.updateFromIdToken(r);const m=new ti({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new _y(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,p),m}}const C_=new Map;function ya(n){wa(n instanceof Function,"Expected a class definition");let e=C_.get(n);return e?(wa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,C_.set(n,e),e)}class DT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}DT.type="NONE";const R_=DT;function pf(n,e,t){return`firebase:${n}:${e}:${t}`}class pc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=pf(this.userKey,a.apiKey,l),this.fullPersistenceKey=pf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await jf(this.auth,{idToken:e}).catch(()=>{});return t?ti._fromGetAccountInfoResponse(this.auth,t,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new pc(ya(R_),e,r);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||ya(R_);const c=pf(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const v=await p._get(c);if(v){let _;if(typeof v=="string"){const E=await jf(e,{idToken:v}).catch(()=>{});if(!E)break;_=await ti._fromGetAccountInfoResponse(e,E,v)}else _=ti._fromJSON(e,v);p!==l&&(h=_),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new pc(l,e,r):(l=m[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new pc(l,e,r))}}function I_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VT(e))return"Blackberry";if(qT(e))return"Webos";if(kT(e))return"Safari";if((e.includes("chrome/")||MT(e))&&!e.includes("edge/"))return"Chrome";if(UT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function LT(n=dr()){return/firefox\//i.test(n)}function kT(n=dr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MT(n=dr()){return/crios\//i.test(n)}function PT(n=dr()){return/iemobile/i.test(n)}function UT(n=dr()){return/android/i.test(n)}function VT(n=dr()){return/blackberry/i.test(n)}function qT(n=dr()){return/webos/i.test(n)}function b0(n=dr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function h3(n=dr()){return b0(n)&&!!window.navigator?.standalone}function d3(){return w4()&&document.documentMode===10}function BT(n=dr()){return b0(n)||UT(n)||qT(n)||VT(n)||/windows phone/i.test(n)||PT(n)}function zT(n,e=[]){let t;switch(n){case"Browser":t=I_(dr());break;case"Worker":t=`${I_(dr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vc}/${r}`}class f3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,h)=>{try{const m=e(l);c(m)}catch(m){h(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function m3(n,e={}){return Ra(n,"GET","/v2/passwordPolicy",Do(n,e))}const g3=6;class p3{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??g3,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class y3{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j_(this),this.idTokenSubscription=new j_(this),this.beforeStateQueue=new f3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ya(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await pc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await jf(this,{idToken:e}),r=await ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(is(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&h?.user&&(r=h.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Of(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(is(this.app))return Promise.reject(ba(this));const t=e?An(e):null;return t&&qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return is(this.app)?Promise.reject(ba(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return is(this.app)?Promise.reject(ba(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ya(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await m3(this),t=new p3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await u3(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ya(e)||this._popupRedirectResolver;qe(t,this,"argument-error"),this.redirectPersistenceManager=await pc.create(this,[ya(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(is(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&$I(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Lo(n){return An(n)}class j_{constructor(e){this.auth=e,this.observer=null,this.addObserver=j4(t=>this.observer=t)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let sm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function v3(n){sm=n}function HT(n){return sm.loadJS(n)}function b3(){return sm.recaptchaEnterpriseScript}function x3(){return sm.gapiScript}function _3(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class E3{constructor(){this.enterprise=new w3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class w3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const T3="recaptcha-enterprise",FT="NO_RECAPTCHA";class A3{constructor(e){this.type=T3,this.auth=Lo(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{n3(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new t3(m);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(m=>{h(m)})})}function a(l,c,h){const m=window.grecaptcha;S_(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(FT)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new E3().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(h=>{if(!t&&S_(window.grecaptcha))a(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=b3();m.length!==0&&(m+=h),HT(m).then(()=>{a(h,l,c)}).catch(p=>{c(p)})}}).catch(h=>{c(h)})})}}async function O_(n,e,t,r=!1,a=!1){const l=new A3(n);let c;if(a)c=FT;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Ey(n,e,t,r,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await O_(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await O_(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}function S3(n,e){const t=m0(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(_a(l,e??{}))return a;Ms(a,"already-initialized")}return t.initialize({options:e})}function N3(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ya);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function C3(n,e,t){const r=Lo(n);qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=$T(e),{host:c,port:h}=R3(e),m=h===null?"":`:${h}`,p={url:`${l}//${c}${m}/`},v=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),qe(_a(p,r.config.emulator)&&_a(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Uc(c)?(bT(`${l}//${c}${m}`),xT("Auth",!0)):I3()}function $T(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function R3(n){const e=$T(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:D_(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:D_(c)}}}function D_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function I3(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class x0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pa("not implemented")}_getIdTokenResponse(e){return pa("not implemented")}_linkToIdToken(e,t){return pa("not implemented")}_getReauthenticationResolver(e){return pa("not implemented")}}async function j3(n,e){return Ra(n,"POST","/v1/accounts:signUp",e)}async function O3(n,e){return _h(n,"POST","/v1/accounts:signInWithPassword",Do(n,e))}async function D3(n,e){return _h(n,"POST","/v1/accounts:signInWithEmailLink",Do(n,e))}async function L3(n,e){return _h(n,"POST","/v1/accounts:signInWithEmailLink",Do(n,e))}class nh extends x0{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new nh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new nh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ey(e,t,"signInWithPassword",O3);case"emailLink":return D3(e,{email:this._email,oobCode:this._password});default:Ms(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ey(e,r,"signUpPassword",j3);case"emailLink":return L3(e,{idToken:t,email:this._email,oobCode:this._password});default:Ms(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function yc(n,e){return _h(n,"POST","/v1/accounts:signInWithIdp",Do(n,e))}const k3="http://localhost";class ul extends x0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ul(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ms("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new ul(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return yc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,yc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yc(e,t)}buildRequest(){const e={requestUri:k3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bh(t)}return e}}function M3(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function P3(n){const e=Pu(Uu(n)).link,t=e?Pu(Uu(e)).deep_link_id:null,r=Pu(Uu(n)).deep_link_id;return(r?Pu(Uu(r)).link:null)||r||t||e||n}class _0{constructor(e){const t=Pu(Uu(e)),r=t.apiKey??null,a=t.oobCode??null,l=M3(t.mode??null);qe(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=P3(e);try{return new _0(t)}catch{return null}}}class qc{constructor(){this.providerId=qc.PROVIDER_ID}static credential(e,t){return nh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=_0.parseLink(t);return qe(r,"argument-error"),nh._fromEmailAndCode(e,r.code,r.tenantId)}}qc.PROVIDER_ID="password";qc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class E0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Eh extends E0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class co extends Eh{constructor(){super("facebook.com")}static credential(e){return ul._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return co.credential(e.oauthAccessToken)}catch{return null}}}co.FACEBOOK_SIGN_IN_METHOD="facebook.com";co.PROVIDER_ID="facebook.com";class Ti extends Eh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ul._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ti.credential(t,r)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";class uo extends Eh{constructor(){super("github.com")}static credential(e){return ul._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uo.credential(e.oauthAccessToken)}catch{return null}}}uo.GITHUB_SIGN_IN_METHOD="github.com";uo.PROVIDER_ID="github.com";class ho extends Eh{constructor(){super("twitter.com")}static credential(e,t){return ul._fromParams({providerId:ho.PROVIDER_ID,signInMethod:ho.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ho.credentialFromTaggedObject(e)}static credentialFromError(e){return ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ho.credential(t,r)}catch{return null}}}ho.TWITTER_SIGN_IN_METHOD="twitter.com";ho.PROVIDER_ID="twitter.com";async function U3(n,e){return _h(n,"POST","/v1/accounts:signUp",Do(n,e))}class hl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await ti._fromIdTokenResponse(e,r,a),c=L_(r);return new hl({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=L_(r);return new hl({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function L_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Df extends Ca{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Df.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Df(e,t,r,a)}}function GT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Df._fromErrorAndOperation(n,l,e,r):l})}async function V3(n,e,t=!1){const r=await wc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return hl._forOperation(n,"link",r)}async function q3(n,e,t=!1){const{auth:r}=n;if(is(r.app))return Promise.reject(ba(r));const a="reauthenticate";try{const l=await wc(n,GT(r,a,e,n),t);qe(l.idToken,r,"internal-error");const c=v0(l.idToken);qe(c,r,"internal-error");const{sub:h}=c;return qe(n.uid===h,r,"user-mismatch"),hl._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Ms(r,"user-mismatch"),l}}async function KT(n,e,t=!1){if(is(n.app))return Promise.reject(ba(n));const r="signIn",a=await GT(n,r,e),l=await hl._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function B3(n,e){return KT(Lo(n),e)}async function QT(n){const e=Lo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function z3(n,e,t){if(is(n.app))return Promise.reject(ba(n));const r=Lo(n),c=await Ey(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",U3).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&QT(n),m}),h=await hl._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function H3(n,e,t){return is(n.app)?Promise.reject(ba(n)):B3(An(n),qc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&QT(n),r})}async function F3(n,e){return Ra(n,"POST","/v1/accounts:update",e)}async function $3(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=An(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await wc(r,F3(r.auth,l));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const h=r.providerData.find(({providerId:m})=>m==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function G3(n,e,t,r){return An(n).onIdTokenChanged(e,t,r)}function K3(n,e,t){return An(n).beforeAuthStateChanged(e,t)}function wh(n,e,t,r){return An(n).onAuthStateChanged(e,t,r)}function Q3(n){return An(n).signOut()}const Lf="__sak";class YT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lf,"1"),this.storage.removeItem(Lf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Y3=1e3,X3=10;class XT extends YT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);d3()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,X3):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Y3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}XT.type="LOCAL";const W3=XT;class WT extends YT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}WT.type="SESSION";const ZT=WT;function Z3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new im(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const h=Array.from(c).map(async p=>p(t.origin,l)),m=await Z3(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}im.receivers=[];function w0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class J3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((h,m)=>{const p=w0("",20);a.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(_){const E=_;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(E.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ai(){return window}function ej(n){Ai().location.href=n}function JT(){return typeof Ai().WorkerGlobalScope<"u"&&typeof Ai().importScripts=="function"}async function tj(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nj(){return navigator?.serviceWorker?.controller||null}function rj(){return JT()?self:null}const eA="firebaseLocalStorageDb",sj=1,kf="firebaseLocalStorage",tA="fbase_key";class Th{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function am(n,e){return n.transaction([kf],e?"readwrite":"readonly").objectStore(kf)}function ij(){const n=indexedDB.deleteDatabase(eA);return new Th(n).toPromise()}function wy(){const n=indexedDB.open(eA,sj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(kf,{keyPath:tA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(kf)?e(r):(r.close(),await ij(),e(await wy()))})})}async function k_(n,e,t){const r=am(n,!0).put({[tA]:e,value:t});return new Th(r).toPromise()}async function aj(n,e){const t=am(n,!1).get(e),r=await new Th(t).toPromise();return r===void 0?null:r.value}function M_(n,e){const t=am(n,!0).delete(e);return new Th(t).toPromise()}const oj=800,lj=3;class nA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>lj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=im._getInstance(rj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await tj(),!this.activeServiceWorker)return;this.sender=new J3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wy();return await k_(e,Lf,"1"),await M_(e,Lf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>k_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>aj(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>M_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=am(a,!1).getAll();return new Th(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nA.type="LOCAL";const cj=nA;new xh(3e4,6e4);function rA(n,e){return e?ya(e):(qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class T0 extends x0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uj(n){return KT(n.auth,new T0(n),n.bypassAuthState)}function hj(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),q3(t,new T0(n),n.bypassAuthState)}async function dj(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),V3(t,new T0(n),n.bypassAuthState)}class sA{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uj;case"linkViaPopup":case"linkViaRedirect":return dj;case"reauthViaPopup":case"reauthViaRedirect":return hj;default:Ms(this.auth,"internal-error")}}resolve(e){wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fj=new xh(2e3,1e4);async function iA(n,e,t){if(is(n.app))return Promise.reject(ni(n,"operation-not-supported-in-this-environment"));const r=Lo(n);GI(n,e,E0);const a=rA(r,t);return new sl(r,"signInViaPopup",e,a).executeNotNull()}class sl extends sA{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,sl.currentPopupAction&&sl.currentPopupAction.cancel(),sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){wa(this.filter.length===1,"Popup operations only handle one event");const e=w0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fj.get())};e()}}sl.currentPopupAction=null;const mj="pendingRedirect",yf=new Map;class gj extends sA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=yf.get(this.auth._key());if(!e){try{const r=await pj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}yf.set(this.auth._key(),e)}return this.bypassAuthState||yf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pj(n,e){const t=bj(e),r=vj(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function yj(n,e){yf.set(n._key(),e)}function vj(n){return ya(n._redirectPersistence)}function bj(n){return pf(mj,n.config.apiKey,n.name)}async function xj(n,e,t=!1){if(is(n.app))return Promise.reject(ba(n));const r=Lo(n),a=rA(r,e),c=await new gj(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const _j=600*1e3;class Ej{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!aA(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ni(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_j&&this.cachedEventUids.clear(),this.cachedEventUids.has(P_(e))}saveEventToCache(e){this.cachedEventUids.add(P_(e)),this.lastProcessedEventTime=Date.now()}}function P_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function aA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function wj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aA(n);default:return!1}}async function Tj(n,e={}){return Ra(n,"GET","/v1/projects",e)}const Aj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sj=/^https?/;async function Nj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Tj(n);for(const t of e)try{if(Cj(t))return}catch{}Ms(n,"unauthorized-domain")}function Cj(n){const e=xy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!Sj.test(t))return!1;if(Aj.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const Rj=new xh(3e4,6e4);function U_(){const n=Ai().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Ij(n){return new Promise((e,t)=>{function r(){U_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{U_(),t(ni(n,"network-request-failed"))},timeout:Rj.get()})}if(Ai().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ai().gapi?.load)r();else{const a=_3("iframefcb");return Ai()[a]=()=>{gapi.load?r():t(ni(n,"network-request-failed"))},HT(`${x3()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw vf=null,e})}let vf=null;function jj(n){return vf=vf||Ij(n),vf}const Oj=new xh(5e3,15e3),Dj="__/auth/iframe",Lj="emulator/auth/iframe",kj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pj(n){const e=n.config;qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?y0(e,Lj):`https://${n.config.authDomain}/${Dj}`,r={apiKey:e.apiKey,appName:n.name,v:Vc},a=Mj.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${bh(r).slice(1)}`}async function Uj(n){const e=await jj(n),t=Ai().gapi;return qe(t,n,"internal-error"),e.open({where:document.body,url:Pj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kj,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=ni(n,"network-request-failed"),h=Ai().setTimeout(()=>{l(c)},Oj.get());function m(){Ai().clearTimeout(h),a(r)}r.ping(m).then(m,()=>{l(c)})}))}const Vj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qj=500,Bj=600,zj="_blank",Hj="http://localhost";class V_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Fj(n,e,t,r=qj,a=Bj){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const m={...Vj,width:r.toString(),height:a.toString(),top:l,left:c},p=dr().toLowerCase();t&&(h=MT(p)?zj:t),LT(p)&&(e=e||Hj,m.scrollbars="yes");const v=Object.entries(m).reduce((E,[A,S])=>`${E}${A}=${S},`,"");if(h3(p)&&h!=="_self")return $j(e||"",h),new V_(null);const _=window.open(e||"",h,v);qe(_,n,"popup-blocked");try{_.focus()}catch{}return new V_(_)}function $j(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const Gj="__/auth/handler",Kj="emulator/auth/handler",Qj=encodeURIComponent("fac");async function q_(n,e,t,r,a,l){qe(n.config.authDomain,n,"auth-domain-config-required"),qe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Vc,eventId:a};if(e instanceof E0){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",I4(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))c[v]=_}if(e instanceof Eh){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const m=await n._getAppCheckToken(),p=m?`#${Qj}=${encodeURIComponent(m)}`:"";return`${Yj(n)}?${bh(h).slice(1)}${p}`}function Yj({config:n}){return n.emulator?y0(n,Kj):`https://${n.authDomain}/${Gj}`}const Fp="webStorageSupport";class Xj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZT,this._completeRedirectFn=xj,this._overrideRedirectResult=yj}async _openPopup(e,t,r,a){wa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await q_(e,t,r,xy(),a);return Fj(e,l,w0())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await q_(e,t,r,xy(),a);return ej(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(wa(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Uj(e),r=new Ej(e);return t.register("authEvent",a=>(qe(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fp,{type:Fp},a=>{const l=a?.[0]?.[Fp];l!==void 0&&t(!!l),Ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Nj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return BT()||kT()||b0()}}const Wj=Xj;var B_="@firebase/auth",z_="1.11.1";class Zj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Jj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e6(n){Ec(new cl("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;qe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zT(n)},p=new y3(r,a,l,m);return N3(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ec(new cl("auth-internal",e=>{const t=Lo(e.getProvider("auth").getImmediate());return(r=>new Zj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xo(B_,z_,Jj(n)),xo(B_,z_,"esm2020")}const t6=300,n6=vT("authIdTokenMaxAge")||t6;let H_=null;const r6=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>n6)return;const a=t?.token;H_!==a&&(H_=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function s6(n=TT()){const e=m0(n,"auth");if(e.isInitialized())return e.getImmediate();const t=S3(n,{popupRedirectResolver:Wj,persistence:[cj,W3,ZT]}),r=vT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=r6(l.toString());K3(t,c,()=>c(t.currentUser)),G3(t,h=>c(h))}}const a=pT("auth");return a&&C3(t,`http://${a}`),t}function i6(){return document.getElementsByTagName("head")?.[0]??document}v3({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=ni("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",i6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e6("Browser");var F_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _o,oA;(function(){var n;function e(L,k){function V(){}V.prototype=k.prototype,L.F=k.prototype,L.prototype=new V,L.prototype.constructor=L,L.D=function($,N,M){for(var C=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)C[pe-2]=arguments[pe];return k.prototype[N].apply($,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(L,k,V){V||(V=0);const $=Array(16);if(typeof k=="string")for(var N=0;N<16;++N)$[N]=k.charCodeAt(V++)|k.charCodeAt(V++)<<8|k.charCodeAt(V++)<<16|k.charCodeAt(V++)<<24;else for(N=0;N<16;++N)$[N]=k[V++]|k[V++]<<8|k[V++]<<16|k[V++]<<24;k=L.g[0],V=L.g[1],N=L.g[2];let M=L.g[3],C;C=k+(M^V&(N^M))+$[0]+3614090360&4294967295,k=V+(C<<7&4294967295|C>>>25),C=M+(N^k&(V^N))+$[1]+3905402710&4294967295,M=k+(C<<12&4294967295|C>>>20),C=N+(V^M&(k^V))+$[2]+606105819&4294967295,N=M+(C<<17&4294967295|C>>>15),C=V+(k^N&(M^k))+$[3]+3250441966&4294967295,V=N+(C<<22&4294967295|C>>>10),C=k+(M^V&(N^M))+$[4]+4118548399&4294967295,k=V+(C<<7&4294967295|C>>>25),C=M+(N^k&(V^N))+$[5]+1200080426&4294967295,M=k+(C<<12&4294967295|C>>>20),C=N+(V^M&(k^V))+$[6]+2821735955&4294967295,N=M+(C<<17&4294967295|C>>>15),C=V+(k^N&(M^k))+$[7]+4249261313&4294967295,V=N+(C<<22&4294967295|C>>>10),C=k+(M^V&(N^M))+$[8]+1770035416&4294967295,k=V+(C<<7&4294967295|C>>>25),C=M+(N^k&(V^N))+$[9]+2336552879&4294967295,M=k+(C<<12&4294967295|C>>>20),C=N+(V^M&(k^V))+$[10]+4294925233&4294967295,N=M+(C<<17&4294967295|C>>>15),C=V+(k^N&(M^k))+$[11]+2304563134&4294967295,V=N+(C<<22&4294967295|C>>>10),C=k+(M^V&(N^M))+$[12]+1804603682&4294967295,k=V+(C<<7&4294967295|C>>>25),C=M+(N^k&(V^N))+$[13]+4254626195&4294967295,M=k+(C<<12&4294967295|C>>>20),C=N+(V^M&(k^V))+$[14]+2792965006&4294967295,N=M+(C<<17&4294967295|C>>>15),C=V+(k^N&(M^k))+$[15]+1236535329&4294967295,V=N+(C<<22&4294967295|C>>>10),C=k+(N^M&(V^N))+$[1]+4129170786&4294967295,k=V+(C<<5&4294967295|C>>>27),C=M+(V^N&(k^V))+$[6]+3225465664&4294967295,M=k+(C<<9&4294967295|C>>>23),C=N+(k^V&(M^k))+$[11]+643717713&4294967295,N=M+(C<<14&4294967295|C>>>18),C=V+(M^k&(N^M))+$[0]+3921069994&4294967295,V=N+(C<<20&4294967295|C>>>12),C=k+(N^M&(V^N))+$[5]+3593408605&4294967295,k=V+(C<<5&4294967295|C>>>27),C=M+(V^N&(k^V))+$[10]+38016083&4294967295,M=k+(C<<9&4294967295|C>>>23),C=N+(k^V&(M^k))+$[15]+3634488961&4294967295,N=M+(C<<14&4294967295|C>>>18),C=V+(M^k&(N^M))+$[4]+3889429448&4294967295,V=N+(C<<20&4294967295|C>>>12),C=k+(N^M&(V^N))+$[9]+568446438&4294967295,k=V+(C<<5&4294967295|C>>>27),C=M+(V^N&(k^V))+$[14]+3275163606&4294967295,M=k+(C<<9&4294967295|C>>>23),C=N+(k^V&(M^k))+$[3]+4107603335&4294967295,N=M+(C<<14&4294967295|C>>>18),C=V+(M^k&(N^M))+$[8]+1163531501&4294967295,V=N+(C<<20&4294967295|C>>>12),C=k+(N^M&(V^N))+$[13]+2850285829&4294967295,k=V+(C<<5&4294967295|C>>>27),C=M+(V^N&(k^V))+$[2]+4243563512&4294967295,M=k+(C<<9&4294967295|C>>>23),C=N+(k^V&(M^k))+$[7]+1735328473&4294967295,N=M+(C<<14&4294967295|C>>>18),C=V+(M^k&(N^M))+$[12]+2368359562&4294967295,V=N+(C<<20&4294967295|C>>>12),C=k+(V^N^M)+$[5]+4294588738&4294967295,k=V+(C<<4&4294967295|C>>>28),C=M+(k^V^N)+$[8]+2272392833&4294967295,M=k+(C<<11&4294967295|C>>>21),C=N+(M^k^V)+$[11]+1839030562&4294967295,N=M+(C<<16&4294967295|C>>>16),C=V+(N^M^k)+$[14]+4259657740&4294967295,V=N+(C<<23&4294967295|C>>>9),C=k+(V^N^M)+$[1]+2763975236&4294967295,k=V+(C<<4&4294967295|C>>>28),C=M+(k^V^N)+$[4]+1272893353&4294967295,M=k+(C<<11&4294967295|C>>>21),C=N+(M^k^V)+$[7]+4139469664&4294967295,N=M+(C<<16&4294967295|C>>>16),C=V+(N^M^k)+$[10]+3200236656&4294967295,V=N+(C<<23&4294967295|C>>>9),C=k+(V^N^M)+$[13]+681279174&4294967295,k=V+(C<<4&4294967295|C>>>28),C=M+(k^V^N)+$[0]+3936430074&4294967295,M=k+(C<<11&4294967295|C>>>21),C=N+(M^k^V)+$[3]+3572445317&4294967295,N=M+(C<<16&4294967295|C>>>16),C=V+(N^M^k)+$[6]+76029189&4294967295,V=N+(C<<23&4294967295|C>>>9),C=k+(V^N^M)+$[9]+3654602809&4294967295,k=V+(C<<4&4294967295|C>>>28),C=M+(k^V^N)+$[12]+3873151461&4294967295,M=k+(C<<11&4294967295|C>>>21),C=N+(M^k^V)+$[15]+530742520&4294967295,N=M+(C<<16&4294967295|C>>>16),C=V+(N^M^k)+$[2]+3299628645&4294967295,V=N+(C<<23&4294967295|C>>>9),C=k+(N^(V|~M))+$[0]+4096336452&4294967295,k=V+(C<<6&4294967295|C>>>26),C=M+(V^(k|~N))+$[7]+1126891415&4294967295,M=k+(C<<10&4294967295|C>>>22),C=N+(k^(M|~V))+$[14]+2878612391&4294967295,N=M+(C<<15&4294967295|C>>>17),C=V+(M^(N|~k))+$[5]+4237533241&4294967295,V=N+(C<<21&4294967295|C>>>11),C=k+(N^(V|~M))+$[12]+1700485571&4294967295,k=V+(C<<6&4294967295|C>>>26),C=M+(V^(k|~N))+$[3]+2399980690&4294967295,M=k+(C<<10&4294967295|C>>>22),C=N+(k^(M|~V))+$[10]+4293915773&4294967295,N=M+(C<<15&4294967295|C>>>17),C=V+(M^(N|~k))+$[1]+2240044497&4294967295,V=N+(C<<21&4294967295|C>>>11),C=k+(N^(V|~M))+$[8]+1873313359&4294967295,k=V+(C<<6&4294967295|C>>>26),C=M+(V^(k|~N))+$[15]+4264355552&4294967295,M=k+(C<<10&4294967295|C>>>22),C=N+(k^(M|~V))+$[6]+2734768916&4294967295,N=M+(C<<15&4294967295|C>>>17),C=V+(M^(N|~k))+$[13]+1309151649&4294967295,V=N+(C<<21&4294967295|C>>>11),C=k+(N^(V|~M))+$[4]+4149444226&4294967295,k=V+(C<<6&4294967295|C>>>26),C=M+(V^(k|~N))+$[11]+3174756917&4294967295,M=k+(C<<10&4294967295|C>>>22),C=N+(k^(M|~V))+$[2]+718787259&4294967295,N=M+(C<<15&4294967295|C>>>17),C=V+(M^(N|~k))+$[9]+3951481745&4294967295,L.g[0]=L.g[0]+k&4294967295,L.g[1]=L.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,L.g[2]=L.g[2]+N&4294967295,L.g[3]=L.g[3]+M&4294967295}r.prototype.v=function(L,k){k===void 0&&(k=L.length);const V=k-this.blockSize,$=this.C;let N=this.h,M=0;for(;M<k;){if(N==0)for(;M<=V;)a(this,L,M),M+=this.blockSize;if(typeof L=="string"){for(;M<k;)if($[N++]=L.charCodeAt(M++),N==this.blockSize){a(this,$),N=0;break}}else for(;M<k;)if($[N++]=L[M++],N==this.blockSize){a(this,$),N=0;break}}this.h=N,this.o+=k},r.prototype.A=function(){var L=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);L[0]=128;for(var k=1;k<L.length-8;++k)L[k]=0;k=this.o*8;for(var V=L.length-8;V<L.length;++V)L[V]=k&255,k/=256;for(this.v(L),L=Array(16),k=0,V=0;V<4;++V)for(let $=0;$<32;$+=8)L[k++]=this.g[V]>>>$&255;return L};function l(L,k){var V=h;return Object.prototype.hasOwnProperty.call(V,L)?V[L]:V[L]=k(L)}function c(L,k){this.h=k;const V=[];let $=!0;for(let N=L.length-1;N>=0;N--){const M=L[N]|0;$&&M==k||(V[N]=M,$=!1)}this.g=V}var h={};function m(L){return-128<=L&&L<128?l(L,function(k){return new c([k|0],k<0?-1:0)}):new c([L|0],L<0?-1:0)}function p(L){if(isNaN(L)||!isFinite(L))return _;if(L<0)return R(p(-L));const k=[];let V=1;for(let $=0;L>=V;$++)k[$]=L/V|0,V*=4294967296;return new c(k,0)}function v(L,k){if(L.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(L.charAt(0)=="-")return R(v(L.substring(1),k));if(L.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=p(Math.pow(k,8));let $=_;for(let M=0;M<L.length;M+=8){var N=Math.min(8,L.length-M);const C=parseInt(L.substring(M,M+N),k);N<8?(N=p(Math.pow(k,N)),$=$.j(N).add(p(C))):($=$.j(V),$=$.add(p(C)))}return $}var _=m(0),E=m(1),A=m(16777216);n=c.prototype,n.m=function(){if(O(this))return-R(this).m();let L=0,k=1;for(let V=0;V<this.g.length;V++){const $=this.i(V);L+=($>=0?$:4294967296+$)*k,k*=4294967296}return L},n.toString=function(L){if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(S(this))return"0";if(O(this))return"-"+R(this).toString(L);const k=p(Math.pow(L,6));var V=this;let $="";for(;;){const N=Y(V,k).g;V=U(V,N.j(k));let M=((V.g.length>0?V.g[0]:V.h)>>>0).toString(L);if(V=N,S(V))return M+$;for(;M.length<6;)M="0"+M;$=M+$}},n.i=function(L){return L<0?0:L<this.g.length?this.g[L]:this.h};function S(L){if(L.h!=0)return!1;for(let k=0;k<L.g.length;k++)if(L.g[k]!=0)return!1;return!0}function O(L){return L.h==-1}n.l=function(L){return L=U(this,L),O(L)?-1:S(L)?0:1};function R(L){const k=L.g.length,V=[];for(let $=0;$<k;$++)V[$]=~L.g[$];return new c(V,~L.h).add(E)}n.abs=function(){return O(this)?R(this):this},n.add=function(L){const k=Math.max(this.g.length,L.g.length),V=[];let $=0;for(let N=0;N<=k;N++){let M=$+(this.i(N)&65535)+(L.i(N)&65535),C=(M>>>16)+(this.i(N)>>>16)+(L.i(N)>>>16);$=C>>>16,M&=65535,C&=65535,V[N]=C<<16|M}return new c(V,V[V.length-1]&-2147483648?-1:0)};function U(L,k){return L.add(R(k))}n.j=function(L){if(S(this)||S(L))return _;if(O(this))return O(L)?R(this).j(R(L)):R(R(this).j(L));if(O(L))return R(this.j(R(L)));if(this.l(A)<0&&L.l(A)<0)return p(this.m()*L.m());const k=this.g.length+L.g.length,V=[];for(var $=0;$<2*k;$++)V[$]=0;for($=0;$<this.g.length;$++)for(let N=0;N<L.g.length;N++){const M=this.i($)>>>16,C=this.i($)&65535,pe=L.i(N)>>>16,ge=L.i(N)&65535;V[2*$+2*N]+=C*ge,F(V,2*$+2*N),V[2*$+2*N+1]+=M*ge,F(V,2*$+2*N+1),V[2*$+2*N+1]+=C*pe,F(V,2*$+2*N+1),V[2*$+2*N+2]+=M*pe,F(V,2*$+2*N+2)}for(L=0;L<k;L++)V[L]=V[2*L+1]<<16|V[2*L];for(L=k;L<2*k;L++)V[L]=0;return new c(V,0)};function F(L,k){for(;(L[k]&65535)!=L[k];)L[k+1]+=L[k]>>>16,L[k]&=65535,k++}function Q(L,k){this.g=L,this.h=k}function Y(L,k){if(S(k))throw Error("division by zero");if(S(L))return new Q(_,_);if(O(L))return k=Y(R(L),k),new Q(R(k.g),R(k.h));if(O(k))return k=Y(L,R(k)),new Q(R(k.g),k.h);if(L.g.length>30){if(O(L)||O(k))throw Error("slowDivide_ only works with positive integers.");for(var V=E,$=k;$.l(L)<=0;)V=ie(V),$=ie($);var N=ve(V,1),M=ve($,1);for($=ve($,2),V=ve(V,2);!S($);){var C=M.add($);C.l(L)<=0&&(N=N.add(V),M=C),$=ve($,1),V=ve(V,1)}return k=U(L,N.j(k)),new Q(N,k)}for(N=_;L.l(k)>=0;){for(V=Math.max(1,Math.floor(L.m()/k.m())),$=Math.ceil(Math.log(V)/Math.LN2),$=$<=48?1:Math.pow(2,$-48),M=p(V),C=M.j(k);O(C)||C.l(L)>0;)V-=$,M=p(V),C=M.j(k);S(M)&&(M=E),N=N.add(M),L=U(L,C)}return new Q(N,L)}n.B=function(L){return Y(this,L).h},n.and=function(L){const k=Math.max(this.g.length,L.g.length),V=[];for(let $=0;$<k;$++)V[$]=this.i($)&L.i($);return new c(V,this.h&L.h)},n.or=function(L){const k=Math.max(this.g.length,L.g.length),V=[];for(let $=0;$<k;$++)V[$]=this.i($)|L.i($);return new c(V,this.h|L.h)},n.xor=function(L){const k=Math.max(this.g.length,L.g.length),V=[];for(let $=0;$<k;$++)V[$]=this.i($)^L.i($);return new c(V,this.h^L.h)};function ie(L){const k=L.g.length+1,V=[];for(let $=0;$<k;$++)V[$]=L.i($)<<1|L.i($-1)>>>31;return new c(V,L.h)}function ve(L,k){const V=k>>5;k%=32;const $=L.g.length-V,N=[];for(let M=0;M<$;M++)N[M]=k>0?L.i(M+V)>>>k|L.i(M+V+1)<<32-k:L.i(M+V);return new c(N,L.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,oA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,_o=c}).apply(typeof F_<"u"?F_:typeof self<"u"?self:typeof window<"u"?window:{});var Yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var lA,Vu,cA,bf,Ty,uA,hA,dA;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yd=="object"&&Yd];for(var b=0;b<d.length;++b){var T=d[b];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function a(d,b){if(b)e:{var T=r;d=d.split(".");for(var D=0;D<d.length-1;D++){var X=d[D];if(!(X in T))break e;T=T[X]}d=d[d.length-1],D=T[d],b=b(D),b!=D&&b!=null&&e(T,d,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(b){var T=[],D;for(D in b)Object.prototype.hasOwnProperty.call(b,D)&&T.push([D,b[D]]);return T}});var l=l||{},c=this||self;function h(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function m(d,b,T){return d.call.apply(d.bind,arguments)}function p(d,b,T){return p=m,p.apply(null,arguments)}function v(d,b){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),d.apply(this,D)}}function _(d,b){function T(){}T.prototype=b.prototype,d.Z=b.prototype,d.prototype=new T,d.prototype.constructor=d,d.Ob=function(D,X,re){for(var _e=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)_e[Ke-2]=arguments[Ke];return b.prototype[X].apply(D,_e)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function A(d){const b=d.length;if(b>0){const T=Array(b);for(let D=0;D<b;D++)T[D]=d[D];return T}return[]}function S(d,b){for(let D=1;D<arguments.length;D++){const X=arguments[D];var T=typeof X;if(T=T!="object"?T:X?Array.isArray(X)?"array":T:"null",T=="array"||T=="object"&&typeof X.length=="number"){T=d.length||0;const re=X.length||0;d.length=T+re;for(let _e=0;_e<re;_e++)d[T+_e]=X[_e]}else d.push(X)}}class O{constructor(b,T){this.i=b,this.j=T,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function R(d){c.setTimeout(()=>{throw d},0)}function U(){var d=L;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class F{constructor(){this.h=this.g=null}add(b,T){const D=Q.get();D.set(b,T),this.h?this.h.next=D:this.g=D,this.h=D}}var Q=new O(()=>new Y,d=>d.reset());class Y{constructor(){this.next=this.g=this.h=null}set(b,T){this.h=b,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ve=!1,L=new F,k=()=>{const d=Promise.resolve(void 0);ie=()=>{d.then(V)}};function V(){for(var d;d=U();){try{d.h.call(d.g)}catch(T){R(T)}var b=Q;b.j(d),b.h<100&&(b.h++,d.next=b.g,b.g=d)}ve=!1}function $(){this.u=this.u,this.C=this.C}$.prototype.u=!1,$.prototype.dispose=function(){this.u||(this.u=!0,this.N())},$.prototype[Symbol.dispose]=function(){this.dispose()},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};c.addEventListener("test",T,b),c.removeEventListener("test",T,b)}catch{}return d})();function C(d){return/^[\s\xa0]*$/.test(d)}function pe(d,b){N.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,b)}_(pe,N),pe.prototype.init=function(d,b){const T=this.type=d.type,D=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget,b||(T=="mouseover"?b=d.fromElement:T=="mouseout"&&(b=d.toElement)),this.relatedTarget=b,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),H=0;function ee(d,b,T,D,X){this.listener=d,this.proxy=null,this.src=b,this.type=T,this.capture=!!D,this.ha=X,this.key=++H,this.da=this.fa=!1}function ue(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function xe(d,b,T){for(const D in d)b.call(T,d[D],D,d)}function be(d,b){for(const T in d)b.call(void 0,d[T],T,d)}function q(d){const b={};for(const T in d)b[T]=d[T];return b}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(d,b){let T,D;for(let X=1;X<arguments.length;X++){D=arguments[X];for(T in D)d[T]=D[T];for(let re=0;re<W.length;re++)T=W[re],Object.prototype.hasOwnProperty.call(D,T)&&(d[T]=D[T])}}function me(d){this.src=d,this.g={},this.h=0}me.prototype.add=function(d,b,T,D,X){const re=d.toString();d=this.g[re],d||(d=this.g[re]=[],this.h++);const _e=Ae(d,b,D,X);return _e>-1?(b=d[_e],T||(b.fa=!1)):(b=new ee(b,this.src,re,!!D,X),b.fa=T,d.push(b)),b};function ye(d,b){const T=b.type;if(T in d.g){var D=d.g[T],X=Array.prototype.indexOf.call(D,b,void 0),re;(re=X>=0)&&Array.prototype.splice.call(D,X,1),re&&(ue(b),d.g[T].length==0&&(delete d.g[T],d.h--))}}function Ae(d,b,T,D){for(let X=0;X<d.length;++X){const re=d[X];if(!re.da&&re.listener==b&&re.capture==!!T&&re.ha==D)return X}return-1}var De="closure_lm_"+(Math.random()*1e6|0),je={};function ke(d,b,T,D,X){if(Array.isArray(b)){for(let re=0;re<b.length;re++)ke(d,b[re],T,D,X);return null}return T=Ui(T),d&&d[ge]?d.J(b,T,h(D)?!!D.capture:!1,X):We(d,b,T,!1,D,X)}function We(d,b,T,D,X,re){if(!b)throw Error("Invalid event type");const _e=h(X)?!!X.capture:!!X;let Ke=zr(d);if(Ke||(d[De]=Ke=new me(d)),T=Ke.add(b,T,D,_e,re),T.proxy)return T;if(D=et(),T.proxy=D,D.src=d,D.listener=T,d.addEventListener)M||(X=_e),X===void 0&&(X=!1),d.addEventListener(b.toString(),D,X);else if(d.attachEvent)d.attachEvent(vt(b.toString()),D);else if(d.addListener&&d.removeListener)d.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function et(){function d(T){return b.call(d.src,d.listener,T)}const b=nn;return d}function st(d,b,T,D,X){if(Array.isArray(b))for(var re=0;re<b.length;re++)st(d,b[re],T,D,X);else D=h(D)?!!D.capture:!!D,T=Ui(T),d&&d[ge]?(d=d.i,re=String(b).toString(),re in d.g&&(b=d.g[re],T=Ae(b,T,D,X),T>-1&&(ue(b[T]),Array.prototype.splice.call(b,T,1),b.length==0&&(delete d.g[re],d.h--)))):d&&(d=zr(d))&&(b=d.g[b.toString()],d=-1,b&&(d=Ae(b,T,D,X)),(T=d>-1?b[d]:null)&&ht(T))}function ht(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[ge])ye(b.i,d);else{var T=d.type,D=d.proxy;b.removeEventListener?b.removeEventListener(T,D,d.capture):b.detachEvent?b.detachEvent(vt(T),D):b.addListener&&b.removeListener&&b.removeListener(D),(T=zr(b))?(ye(T,d),T.h==0&&(T.src=null,b[De]=null)):ue(d)}}}function vt(d){return d in je?je[d]:je[d]="on"+d}function nn(d,b){if(d.da)d=!0;else{b=new pe(b,this);const T=d.listener,D=d.ha||d.src;d.fa&&ht(d),d=T.call(D,b)}return d}function zr(d){return d=d[De],d instanceof me?d:null}var li="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ui(d){return typeof d=="function"?d:(d[li]||(d[li]=function(b){return d.handleEvent(b)}),d[li])}function Ht(){$.call(this),this.i=new me(this),this.M=this,this.G=null}_(Ht,$),Ht.prototype[ge]=!0,Ht.prototype.removeEventListener=function(d,b,T,D){st(this,d,b,T,D)};function jt(d,b){var T,D=d.G;if(D)for(T=[];D;D=D.G)T.push(D);if(d=d.M,D=b.type||b,typeof b=="string")b=new N(b,d);else if(b instanceof N)b.target=b.target||d;else{var X=b;b=new N(D,d),de(b,X)}X=!0;let re,_e;if(T)for(_e=T.length-1;_e>=0;_e--)re=b.g=T[_e],X=Sr(re,D,!0,b)&&X;if(re=b.g=d,X=Sr(re,D,!0,b)&&X,X=Sr(re,D,!1,b)&&X,T)for(_e=0;_e<T.length;_e++)re=b.g=T[_e],X=Sr(re,D,!1,b)&&X}Ht.prototype.N=function(){if(Ht.Z.N.call(this),this.i){var d=this.i;for(const b in d.g){const T=d.g[b];for(let D=0;D<T.length;D++)ue(T[D]);delete d.g[b],d.h--}}this.G=null},Ht.prototype.J=function(d,b,T,D){return this.i.add(String(d),b,!1,T,D)},Ht.prototype.K=function(d,b,T,D){return this.i.add(String(d),b,!0,T,D)};function Sr(d,b,T,D){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();let X=!0;for(let re=0;re<b.length;++re){const _e=b[re];if(_e&&!_e.da&&_e.capture==T){const Ke=_e.listener,dn=_e.ha||_e.src;_e.fa&&ye(d.i,_e),X=Ke.call(dn,D)!==!1&&X}}return X&&!D.defaultPrevented}function Da(d,b){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:c.setTimeout(d,b||0)}function Vi(d){d.g=Da(()=>{d.g=null,d.i&&(d.i=!1,Vi(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class Ot extends ${constructor(b,T){super(),this.m=b,this.l=T,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Vi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nr(d){$.call(this),this.h=d,this.g={}}_(Nr,$);var qi=[];function Hr(d){xe(d.g,function(b,T){this.g.hasOwnProperty(T)&&ht(b)},d),d.g={}}Nr.prototype.N=function(){Nr.Z.N.call(this),Hr(this)},Nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mr=c.JSON.stringify,Bi=c.JSON.parse,kn=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function zi(){}function Hi(){}var gr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){N.call(this,"d")}_(Zt,N);function Sn(){N.call(this,"c")}_(Sn,N);var Dt={},Vs=null;function Cr(){return Vs=Vs||new Ht}Dt.Ia="serverreachability";function Jn(d){N.call(this,Dt.Ia,d)}_(Jn,N);function Mn(d){const b=Cr();jt(b,new Jn(b))}Dt.STAT_EVENT="statevent";function Fr(d,b){N.call(this,Dt.STAT_EVENT,d),this.stat=b}_(Fr,N);function At(d){const b=Cr();jt(b,new Fr(b,d))}Dt.Ja="timingevent";function er(d,b){N.call(this,Dt.Ja,d),this.size=b}_(er,N);function In(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},b)}function Pn(){this.g=!0}Pn.prototype.ua=function(){this.g=!1};function Fi(d,b,T,D,X,re){d.info(function(){if(d.g)if(re){var _e="",Ke=re.split("&");for(let bt=0;bt<Ke.length;bt++){var dn=Ke[bt].split("=");if(dn.length>1){const Yt=dn[0];dn=dn[1];const _s=Yt.split("_");_e=_s.length>=2&&_s[1]=="type"?_e+(Yt+"="+dn+"&"):_e+(Yt+"=redacted&")}}}else _e=null;else _e=re;return"XMLHTTP REQ ("+D+") [attempt "+X+"]: "+b+`
`+T+`
`+_e})}function ci(d,b,T,D,X,re,_e){d.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+X+"]: "+b+`
`+T+`
`+re+" "+_e})}function Nn(d,b,T,D){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+$r(d,T)+(D?" "+D:"")})}function ds(d,b){d.info(function(){return"TIMEOUT: "+b})}Pn.prototype.info=function(){};function $r(d,b){if(!d.g)return b;if(!b)return null;try{const re=JSON.parse(b);if(re){for(d=0;d<re.length;d++)if(Array.isArray(re[d])){var T=re[d];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var X=D[0];if(X!="noop"&&X!="stop"&&X!="close")for(let _e=1;_e<D.length;_e++)D[_e]=""}}}}return mr(re)}catch{return b}}var qs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$i={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gi;function fs(){}_(fs,zi),fs.prototype.g=function(){return new XMLHttpRequest},Gi=new fs;function pr(d){return encodeURIComponent(String(d))}function rn(d){var b=1;d=d.split(":");const T=[];for(;b>0&&d.length;)T.push(d.shift()),b--;return d.length&&T.push(d.join(":")),T}function yr(d,b,T,D){this.j=d,this.i=b,this.l=T,this.S=D||1,this.V=new Nr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vr}function vr(){this.i=null,this.g="",this.h=!1}var Ft={},sn={};function Rr(d,b,T){d.M=1,d.A=gs(Gt(b)),d.u=T,d.R=!0,Jt(d,null)}function Jt(d,b){d.F=Date.now(),Ir(d),d.B=Gt(d.A);var T=d.B,D=d.S;Array.isArray(D)||(D=[String(D)]),mi(T.i,"t",D),d.C=0,T=d.j.L,d.h=new vr,d.g=qh(d.j,T?b:null,!d.u),d.P>0&&(d.O=new Ot(p(d.Y,d,d.g),d.P)),b=d.V,T=d.g,D=d.ba;var X="readystatechange";Array.isArray(X)||(X&&(qi[0]=X.toString()),X=qi);for(let re=0;re<X.length;re++){const _e=ke(T,X[re],D||b.handleEvent,!1,b.h||b);if(!_e)break;b.g[_e.key]=_e}b=d.J?q(d.J):{},d.u?(d.v||(d.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,b)):(d.v="GET",d.g.ea(d.B,d.v,null,b)),Mn(),Fi(d.i,d.v,d.B,d.l,d.S,d.u)}yr.prototype.ba=function(d){d=d.target;const b=this.O;b&&B(d)==3?b.j():this.Y(d)},yr.prototype.Y=function(d){try{if(d==this.g)e:{const Ke=B(this.g),dn=this.g.ya(),bt=this.g.ca();if(!(Ke<3)&&(Ke!=3||this.g&&(this.h.h||this.g.la()||ne(this.g)))){this.K||Ke!=4||dn==7||(dn==8||bt<=0?Mn(3):Mn(2)),Mt(this);var b=this.g.ca();this.X=b;var T=Vo(this);if(this.o=b==200,ci(this.i,this.v,this.B,this.l,this.S,Ke,b),this.o){if(this.U&&!this.L){t:{if(this.g){var D,X=this.g;if((D=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(D)){var re=D;break t}}re=null}if(d=re)Nn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,jr(this,d);else{this.o=!1,this.m=3,At(12),Un(this),tr(this);break e}}if(this.R){d=!0;let Yt;for(;!this.K&&this.C<T.length;)if(Yt=ka(this,T),Yt==sn){Ke==4&&(this.m=4,At(14),d=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Ft){this.m=4,At(15),Nn(this.i,this.l,T,"[Invalid Chunk]"),d=!1;break}else Nn(this.i,this.l,Yt,null),jr(this,Yt);if(La(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||T.length!=0||this.h.h||(this.m=1,At(16),d=!1),this.o=this.o&&d,!d)Nn(this.i,this.l,T,"[Invalid Chunked Response]"),Un(this),tr(this);else if(T.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Wr(_e),_e.P=!0,At(11))}}else Nn(this.i,this.l,T,null),jr(this,T);Ke==4&&Un(this),this.o&&!this.K&&(Ke==4?Zi(this.j,this):(this.o=!1,Ir(this)))}else Ue(this.g),b==400&&T.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Un(this),tr(this)}}}catch{}finally{}};function Vo(d){if(!La(d))return d.g.la();const b=ne(d.g);if(b==="")return"";let T="";const D=b.length,X=B(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Un(d),tr(d),"";d.h.i=new c.TextDecoder}for(let re=0;re<D;re++)d.h.h=!0,T+=d.h.i.decode(b[re],{stream:!(X&&re==D-1)});return b.length=0,d.h.g+=T,d.C=0,d.h.g}function La(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function ka(d,b){var T=d.C,D=b.indexOf(`
`,T);return D==-1?sn:(T=Number(b.substring(T,D)),isNaN(T)?Ft:(D+=1,D+T>b.length?sn:(b=b.slice(D,D+T),d.C=D+T,b)))}yr.prototype.cancel=function(){this.K=!0,Un(this)};function Ir(d){d.T=Date.now()+d.H,ui(d,d.H)}function ui(d,b){if(d.D!=null)throw Error("WatchDog timer not null");d.D=In(p(d.aa,d),b)}function Mt(d){d.D&&(c.clearTimeout(d.D),d.D=null)}yr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(ds(this.i,this.B),this.M!=2&&(Mn(),At(17)),Un(this),this.m=2,tr(this)):ui(this,this.T-d)};function tr(d){d.j.I==0||d.K||Zi(d.j,d)}function Un(d){Mt(d);var b=d.O;b&&typeof b.dispose=="function"&&b.dispose(),d.O=null,Hr(d.V),d.g&&(b=d.g,d.g=null,b.abort(),b.dispose())}function jr(d,b){try{var T=d.j;if(T.I!=0&&(T.g==d||Vn(T.h,d))){if(!d.L&&Vn(T.h,d)&&T.I==3){try{var D=T.Ba.g.parse(b)}catch{D=null}if(Array.isArray(D)&&D.length==3){var X=D;if(X[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<d.F)$s(T),Et(T);else break e;Hn(T),At(18)}}else T.xa=X[1],0<T.xa-T.K&&X[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=In(p(T.Va,T),6e3));br(T.h)<=1&&T.ta&&(T.ta=void 0)}else pi(T,11)}else if((d.L||T.g==d)&&$s(T),!C(b))for(X=T.Ba.g.parse(b),b=0;b<X.length;b++){let bt=X[b];const Yt=bt[0];if(!(Yt<=T.K))if(T.K=Yt,bt=bt[1],T.I==2)if(bt[0]=="c"){T.M=bt[1],T.ba=bt[2];const _s=bt[3];_s!=null&&(T.ka=_s,T.j.info("VER="+T.ka));const yi=bt[4];yi!=null&&(T.za=yi,T.j.info("SVER="+T.za));const Gs=bt[5];Gs!=null&&typeof Gs=="number"&&Gs>0&&(D=1.5*Gs,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const Ks=d.g;if(Ks){const Bo=Ks.g?Ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bo){var re=D.h;re.g||Bo.indexOf("spdy")==-1&&Bo.indexOf("quic")==-1&&Bo.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(nr(re,re.h),re.h=null))}if(D.G){const jl=Ks.g?Ks.g.getResponseHeader("X-HTTP-Session-Id"):null;jl&&(D.wa=jl,ft(D.J,D.G,jl))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-d.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var _e=d;if(D.na=Vh(D,D.L?D.ba:null,D.W),_e.L){Bs(D.h,_e);var Ke=_e,dn=D.O;dn&&(Ke.H=dn),Ke.D&&(Mt(Ke),Ir(Ke)),D.g=_e}else Xr(D);T.i.length>0&&Rt(T)}else bt[0]!="stop"&&bt[0]!="close"||pi(T,7);else T.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?pi(T,7):Je(T):bt[0]!="noop"&&T.l&&T.l.qa(bt),T.A=0)}}Mn(4)}catch{}}var $t=class{constructor(d,b){this.g=d,this.map=b}};function Ki(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ms(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function br(d){return d.h?1:d.g?d.g.size:0}function Vn(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function nr(d,b){d.g?d.g.add(b):d.h=b}function Bs(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}Ki.prototype.cancel=function(){if(this.i=Qi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Qi(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const T of d.g.values())b=b.concat(T.G);return b}return A(d.i)}var Ma=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hi(d,b){if(d){d=d.split("&");for(let T=0;T<d.length;T++){const D=d[T].indexOf("=");let X,re=null;D>=0?(X=d[T].substring(0,D),re=d[T].substring(D+1)):X=d[T],b(X,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function qn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;d instanceof qn?(this.l=d.l,Pt(this,d.j),this.o=d.o,this.g=d.g,Or(this,d.u),this.h=d.h,Gr(this,Pa(d.i)),this.m=d.m):d&&(b=String(d).match(Ma))?(this.l=!1,Pt(this,b[1]||"",!0),this.o=Dr(b[2]||""),this.g=Dr(b[3]||"",!0),Or(this,b[4]),this.h=Dr(b[5]||"",!0),Gr(this,b[6]||"",!0),this.m=Dr(b[7]||"")):(this.l=!1,this.i=new yn(null,this.l))}qn.prototype.toString=function(){const d=[];var b=this.j;b&&d.push(zs(b,di,!0),":");var T=this.g;return(T||b=="file")&&(d.push("//"),(b=this.o)&&d.push(zs(b,di,!0),"@"),d.push(pr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&d.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(zs(T,T.charAt(0)=="/"?Yi:fi,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",zs(T,ys)),d.join("")},qn.prototype.resolve=function(d){const b=Gt(this);let T=!!d.j;T?Pt(b,d.j):T=!!d.o,T?b.o=d.o:T=!!d.g,T?b.g=d.g:T=d.u!=null;var D=d.h;if(T)Or(b,d.u);else if(T=!!d.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var X=b.h.lastIndexOf("/");X!=-1&&(D=b.h.slice(0,X+1)+D)}if(X=D,X==".."||X==".")D="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){D=X.lastIndexOf("/",0)==0,X=X.split("/");const re=[];for(let _e=0;_e<X.length;){const Ke=X[_e++];Ke=="."?D&&_e==X.length&&re.push(""):Ke==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),D&&_e==X.length&&re.push("")):(re.push(Ke),D=!0)}D=re.join("/")}else D=X}return T?b.h=D:T=d.i.toString()!=="",T?Gr(b,Pa(d.i)):T=!!d.m,T&&(b.m=d.m),b};function Gt(d){return new qn(d)}function Pt(d,b,T){d.j=T?Dr(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function Or(d,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);d.u=b}else d.u=null}function Gr(d,b,T){b instanceof yn?(d.i=b,gi(d.i,d.l)):(T||(b=zs(b,ps)),d.i=new yn(b,d.l))}function ft(d,b,T){d.i.set(b,T)}function gs(d){return ft(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Dr(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function zs(d,b,T){return typeof d=="string"?(d=encodeURI(d).replace(b,jn),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function jn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var di=/[#\/\?@]/g,fi=/[#\?:]/g,Yi=/[#\?]/g,ps=/[#\?@]/g,ys=/#/g;function yn(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function Kt(d){d.g||(d.g=new Map,d.h=0,d.i&&hi(d.i,function(b,T){d.add(decodeURIComponent(b.replace(/\+/g," ")),T)}))}n=yn.prototype,n.add=function(d,b){Kt(this),this.i=null,d=vs(this,d);let T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(b),this.h+=1,this};function Lr(d,b){Kt(d),b=vs(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function Xi(d,b){return Kt(d),b=vs(d,b),d.g.has(b)}n.forEach=function(d,b){Kt(this),this.g.forEach(function(T,D){T.forEach(function(X){d.call(b,X,D,this)},this)},this)};function rr(d,b){Kt(d);let T=[];if(typeof b=="string")Xi(d,b)&&(T=T.concat(d.g.get(vs(d,b))));else for(d=Array.from(d.g.values()),b=0;b<d.length;b++)T=T.concat(d[b]);return T}n.set=function(d,b){return Kt(this),this.i=null,d=vs(this,d),Xi(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},n.get=function(d,b){return d?(d=rr(this,d),d.length>0?String(d[0]):b):b};function mi(d,b,T){Lr(d,b),T.length>0&&(d.i=null,d.g.set(vs(d,b),A(T)),d.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(let D=0;D<b.length;D++){var T=b[D];const X=pr(T);T=rr(this,T);for(let re=0;re<T.length;re++){let _e=X;T[re]!==""&&(_e+="="+pr(T[re])),d.push(_e)}}return this.i=d.join("&")};function Pa(d){const b=new yn;return b.i=d.i,d.g&&(b.g=new Map(d.g),b.h=d.h),b}function vs(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function gi(d,b){b&&!d.j&&(Kt(d),d.i=null,d.g.forEach(function(T,D){const X=D.toLowerCase();D!=X&&(Lr(this,D),mi(this,X,T))},d)),d.j=b}function sr(d,b){const T=new Pn;if(c.Image){const D=new Image;D.onload=v(Bn,T,"TestLoadImage: loaded",!0,b,D),D.onerror=v(Bn,T,"TestLoadImage: error",!1,b,D),D.onabort=v(Bn,T,"TestLoadImage: abort",!1,b,D),D.ontimeout=v(Bn,T,"TestLoadImage: timeout",!1,b,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=d}else b(!1)}function un(d,b){const T=new Pn,D=new AbortController,X=setTimeout(()=>{D.abort(),Bn(T,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:D.signal}).then(re=>{clearTimeout(X),re.ok?Bn(T,"TestPingServer: ok",!0,b):Bn(T,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(X),Bn(T,"TestPingServer: error",!1,b)})}function Bn(d,b,T,D,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),D(T)}catch{}}function Kr(){this.g=new kn}function zn(d){this.i=d.Sb||null,this.h=d.ab||!1}_(zn,zi),zn.prototype.g=function(){return new Qr(this.i,this.h)};function Qr(d,b){Ht.call(this),this.H=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Qr,Ht),n=Qr.prototype,n.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=b,this.readyState=1,ir(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(b.body=d),(this.H||c).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bs(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ir(this)),this.g&&(this.readyState=3,ir(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yr(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yr(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?bs(this):ir(this),this.readyState==3&&Yr(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,bs(this))},n.Na=function(d){this.g&&(this.response=d,bs(this))},n.ga=function(){this.g&&bs(this)};function bs(d){d.readyState=4,d.l=null,d.j=null,d.B=null,ir(d)}n.setRequestHeader=function(d,b){this.A.append(d,b)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var T=b.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=b.next();return d.join(`\r
`)};function ir(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function On(d){let b="";return xe(d,function(T,D){b+=D,b+=":",b+=T,b+=`\r
`}),b}function xs(d,b,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=On(T),typeof d=="string"?T!=null&&pr(T):ft(d,b,T))}function Ze(d){Ht.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Ze,Ht);var xr=/^https?$/i,Hs=["POST","PUT"];n=Ze.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,b,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gi.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(re){Fs(this,re);return}if(d=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var X in D)T.set(X,D[X]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const re of D.keys())T.set(re,D.get(re));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(re=>re.toLowerCase()=="content-type"),X=c.FormData&&d instanceof c.FormData,!(Array.prototype.indexOf.call(Hs,b,void 0)>=0)||D||X||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,_e]of T)this.g.setRequestHeader(re,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(re){Fs(this,re)}};function Fs(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.o=5,Wi(d),j(d)}function Wi(d){d.A||(d.A=!0,jt(d,"complete"),jt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,jt(this,"complete"),jt(this,"abort"),j(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),j(this,!0)),Ze.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?x(this):this.Xa())},n.Xa=function(){x(this)};function x(d){if(d.h&&typeof l<"u"){if(d.v&&B(d)==4)setTimeout(d.Ca.bind(d),0);else if(jt(d,"readystatechange"),B(d)==4){d.h=!1;try{const re=d.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var T;if(!(T=b)){var D;if(D=re===0){let _e=String(d.D).match(Ma)[1]||null;!_e&&c.self&&c.self.location&&(_e=c.self.location.protocol.slice(0,-1)),D=!xr.test(_e?_e.toLowerCase():"")}T=D}if(T)jt(d,"complete"),jt(d,"success");else{d.o=6;try{var X=B(d)>2?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.ca()+"]",Wi(d)}}finally{j(d)}}}}function j(d,b){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const T=d.g;d.g=null,b||jt(d,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function B(d){return d.g?d.g.readyState:0}n.ca=function(){try{return B(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),Bi(b)}};function ne(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ue(d){const b={};d=(d.g&&B(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<d.length;D++){if(C(d[D]))continue;var T=rn(d[D]);const X=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const re=b[X]||[];b[X]=re,re.push(T)}be(b,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Se(d,b,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||b}function Ye(d){this.za=0,this.i=[],this.j=new Pn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Se("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Se("baseRetryDelayMs",5e3,d),this.Za=Se("retryDelaySeedMs",1e4,d),this.Ta=Se("forwardChannelMaxRetries",2,d),this.va=Se("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Ki(d&&d.concurrentRequestLimit),this.Ba=new Kr,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ye.prototype,n.ka=8,n.I=1,n.connect=function(d,b,T,D){At(0),this.W=d,this.H=b||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=Vh(this,null,this.W),Rt(this)};function Je(d){if(tt(d),d.I==3){var b=d.V++,T=Gt(d.J);if(ft(T,"SID",d.M),ft(T,"RID",b),ft(T,"TYPE","terminate"),Qt(d,T),b=new yr(d,d.j,b),b.M=2,b.A=gs(Gt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(b.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=b.A,T=!0),T||(b.g=qh(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Ir(b)}Uh(d)}function Et(d){d.g&&(Wr(d),d.g.cancel(),d.g=null)}function tt(d){Et(d),d.v&&(c.clearTimeout(d.v),d.v=null),$s(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&c.clearTimeout(d.m),d.m=null)}function Rt(d){if(!ms(d.h)&&!d.m){d.m=!0;var b=d.Ea;ie||k(),ve||(ie(),ve=!0),L.add(b,d),d.D=0}}function hn(d,b){return br(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=b.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=In(p(d.Ea,d,b),Ph(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const X=new yr(this,this.j,d);let re=this.o;if(this.U&&(re?(re=q(re),de(re,this.U)):re=this.U),this.u!==null||this.R||(X.J=re,re=null),this.S)e:{for(var b=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(b+=D,b>4096){b=T;break e}if(b===4096||T===this.i.length-1){b=T+1;break e}}b=1e3}else b=1e3;b=an(this,X,b),T=Gt(this.J),ft(T,"RID",d),ft(T,"CVER",22),this.G&&ft(T,"X-HTTP-Session-Id",this.G),Qt(this,T),re&&(this.R?b="headers="+pr(On(re))+"&"+b:this.u&&xs(T,this.u,re)),nr(this.h,X),this.Ra&&ft(T,"TYPE","init"),this.S?(ft(T,"$req",b),ft(T,"SID","null"),X.U=!0,Rr(X,T,null)):Rr(X,T,b),this.I=2}}else this.I==3&&(d?Ut(this,d):this.i.length==0||ms(this.h)||Ut(this))};function Ut(d,b){var T;b?T=b.l:T=d.V++;const D=Gt(d.J);ft(D,"SID",d.M),ft(D,"RID",T),ft(D,"AID",d.K),Qt(d,D),d.u&&d.o&&xs(D,d.u,d.o),T=new yr(d,d.j,T,d.D+1),d.u===null&&(T.J=d.o),b&&(d.i=b.G.concat(d.i)),b=an(d,T,1e3),T.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),nr(d.h,T),Rr(T,D,b)}function Qt(d,b){d.H&&xe(d.H,function(T,D){ft(b,D,T)}),d.l&&xe({},function(T,D){ft(b,D,T)})}function an(d,b,T){T=Math.min(d.i.length,T);const D=d.l?p(d.l.Ka,d.l,d):null;e:{var X=d.i;let Ke=-1;for(;;){const dn=["count="+T];Ke==-1?T>0?(Ke=X[0].g,dn.push("ofs="+Ke)):Ke=0:dn.push("ofs="+Ke);let bt=!0;for(let Yt=0;Yt<T;Yt++){var re=X[Yt].g;const _s=X[Yt].map;if(re-=Ke,re<0)Ke=Math.max(0,X[Yt].g-100),bt=!1;else try{re="req"+re+"_"||"";try{var _e=_s instanceof Map?_s:Object.entries(_s);for(const[yi,Gs]of _e){let Ks=Gs;h(Gs)&&(Ks=mr(Gs)),dn.push(re+yi+"="+encodeURIComponent(Ks))}}catch(yi){throw dn.push(re+"type="+encodeURIComponent("_badmap")),yi}}catch{D&&D(_s)}}if(bt){_e=dn.join("&");break e}}_e=void 0}return d=d.i.splice(0,T),b.G=d,_e}function Xr(d){if(!d.g&&!d.v){d.Y=1;var b=d.Da;ie||k(),ve||(ie(),ve=!0),L.add(b,d),d.A=0}}function Hn(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=In(p(d.Da,d),Ph(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,qo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=In(p(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Et(this),qo(this))};function Wr(d){d.B!=null&&(c.clearTimeout(d.B),d.B=null)}function qo(d){d.g=new yr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var b=Gt(d.na);ft(b,"RID","rpc"),ft(b,"SID",d.M),ft(b,"AID",d.K),ft(b,"CI",d.F?"0":"1"),!d.F&&d.ia&&ft(b,"TO",d.ia),ft(b,"TYPE","xmlhttp"),Qt(d,b),d.u&&d.o&&xs(b,d.u,d.o),d.O&&(d.g.H=d.O);var T=d.g;d=d.ba,T.M=1,T.A=gs(Gt(b)),T.u=null,T.R=!0,Jt(T,d)}n.Va=function(){this.C!=null&&(this.C=null,Et(this),Hn(this),At(19))};function $s(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function Zi(d,b){var T=null;if(d.g==b){$s(d),Wr(d),d.g=null;var D=2}else if(Vn(d.h,b))T=b.G,Bs(d.h,b),D=1;else return;if(d.I!=0){if(b.o)if(D==1){T=b.u?b.u.length:0,b=Date.now()-b.F;var X=d.D;D=Cr(),jt(D,new er(D,T)),Rt(d)}else Xr(d);else if(X=b.m,X==3||X==0&&b.X>0||!(D==1&&hn(d,b)||D==2&&Hn(d)))switch(T&&T.length>0&&(b=d.h,b.i=b.i.concat(T)),X){case 1:pi(d,5);break;case 4:pi(d,10);break;case 3:pi(d,6);break;default:pi(d,2)}}}function Ph(d,b){let T=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(T*=2),T*b}function pi(d,b){if(d.j.info("Error code "+b),b==2){var T=p(d.bb,d),D=d.Ua;const X=!D;D=new qn(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Pt(D,"https"),gs(D),X?sr(D.toString(),T):un(D.toString(),T)}else At(2);d.I=0,d.l&&d.l.pa(b),Uh(d),tt(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Uh(d){if(d.I=0,d.ja=[],d.l){const b=Qi(d.h);(b.length!=0||d.i.length!=0)&&(S(d.ja,b),S(d.ja,d.i),d.h.i.length=0,A(d.i),d.i.length=0),d.l.oa()}}function Vh(d,b,T){var D=T instanceof qn?Gt(T):new qn(T);if(D.g!="")b&&(D.g=b+"."+D.g),Or(D,D.u);else{var X=c.location;D=X.protocol,b=b?b+"."+X.hostname:X.hostname,X=+X.port;const re=new qn(null);D&&Pt(re,D),b&&(re.g=b),X&&Or(re,X),T&&(re.h=T),D=re}return T=d.G,b=d.wa,T&&b&&ft(D,T,b),ft(D,"VER",d.ka),Qt(d,D),D}function qh(d,b,T){if(b&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Aa&&!d.ma?new Ze(new zn({ab:T})):new Ze(d.ma),b.Fa(d.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bh(){}n=Bh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ua(){}Ua.prototype.g=function(d,b){return new _r(d,b)};function _r(d,b){Ht.call(this),this.g=new Ye(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(d?d["X-WebChannel-Client-Profile"]=b.sa:d={"X-WebChannel-Client-Profile":b.sa}),this.g.U=d,(d=b&&b.Qb)&&!C(d)&&(this.g.u=d),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!C(b)&&(this.g.G=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new Ji(this)}_(_r,Ht),_r.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_r.prototype.close=function(){Je(this.g)},_r.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.v&&(T={},T.__data__=mr(d),d=T);b.i.push(new $t(b.Ya++,d)),b.I==3&&Rt(b)},_r.prototype.N=function(){this.g.l=null,delete this.j,Je(this.g),delete this.g,_r.Z.N.call(this)};function zh(d){Zt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(const T in b){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}_(zh,Zt);function Hh(){Sn.call(this),this.status=1}_(Hh,Sn);function Ji(d){this.g=d}_(Ji,Bh),Ji.prototype.ra=function(){jt(this.g,"a")},Ji.prototype.qa=function(d){jt(this.g,new zh(d))},Ji.prototype.pa=function(d){jt(this.g,new Hh)},Ji.prototype.oa=function(){jt(this.g,"b")},Ua.prototype.createWebChannel=Ua.prototype.g,_r.prototype.send=_r.prototype.o,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,dA=function(){return new Ua},hA=function(){return Cr()},uA=Dt,Ty={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qs.NO_ERROR=0,qs.TIMEOUT=8,qs.HTTP_ERROR=6,bf=qs,$i.COMPLETE="complete",cA=$i,Hi.EventType=gr,gr.OPEN="a",gr.CLOSE="b",gr.ERROR="c",gr.MESSAGE="d",Ht.prototype.listen=Ht.prototype.J,Vu=Hi,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,lA=Ze}).apply(typeof Yd<"u"?Yd:typeof self<"u"?self:typeof window<"u"?window:{});const $_="@firebase/firestore",G_="4.9.2";class lr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lr.UNAUTHENTICATED=new lr(null),lr.GOOGLE_CREDENTIALS=new lr("google-credentials-uid"),lr.FIRST_PARTY=new lr("first-party-uid"),lr.MOCK_USER=new lr("mock-user");let Bc="12.3.0";const dl=new d0("@firebase/firestore");function oc(){return dl.logLevel}function Te(n,...e){if(dl.logLevel<=ot.DEBUG){const t=e.map(A0);dl.debug(`Firestore (${Bc}): ${n}`,...t)}}function Ta(n,...e){if(dl.logLevel<=ot.ERROR){const t=e.map(A0);dl.error(`Firestore (${Bc}): ${n}`,...t)}}function Tc(n,...e){if(dl.logLevel<=ot.WARN){const t=e.map(A0);dl.warn(`Firestore (${Bc}): ${n}`,...t)}}function A0(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Be(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,fA(n,r,t)}function fA(n,e,t){let r=`FIRESTORE (${Bc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ta(r),new Error(r)}function _t(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||fA(e,a,r)}function He(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Ca{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Si{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class mA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(lr.UNAUTHENTICATED)))}shutdown(){}}class o6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class l6{constructor(e){this.t=e,this.currentUser=lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_t(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new Si;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Si,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},h=m=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Si)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t(typeof r.accessToken=="string",31837,{l:r}),new mA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string",2055,{h:e}),new lr(e)}}class c6{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=lr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class u6{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new c6(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(lr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class K_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h6{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,is(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_t(this.o===void 0,3512);const r=l=>{l.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Te("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new K_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(_t(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new K_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function d6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class S0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=d6(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function Ay(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),l=e.charAt(r);if(a!==l)return $p(a)===$p(l)?lt(a,l):$p(a)?1:-1}return lt(n.length,e.length)}const f6=55296,m6=57343;function $p(n){const e=n.charCodeAt(0);return e>=f6&&e<=m6}function Ac(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}const Q_="__name__";class wi{constructor(e,t,r){t===void 0?t=0:t>e.length&&Be(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Be(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return wi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=wi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return lt(e.length,t.length)}static compareSegments(e,t){const r=wi.isNumericId(e),a=wi.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?wi.extractNumericId(e).compare(wi.extractNumericId(t)):Ay(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _o.fromString(e.substring(4,e.length-2))}}class kt extends wi{construct(e,t,r){return new kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new kt(t)}static emptyPath(){return new kt([])}}const g6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yn extends wi{construct(e,t,r){return new Yn(e,t,r)}static isValidIdentifier(e){return g6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Q_}static keyField(){return new Yn([Q_])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new we(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new we(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(r+=h,a++):(l(),a++)}if(l(),c)throw new we(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yn(t)}static emptyPath(){return new Yn([])}}class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(kt.fromString(e))}static fromName(e){return new Pe(kt.fromString(e).popFirst(5))}static empty(){return new Pe(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new kt(e.slice()))}}function gA(n,e,t){if(!t)throw new we(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function p6(n,e,t,r){if(e===!0&&r===!0)throw new we(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Y_(n){if(!Pe.isDocumentKey(n))throw new we(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function X_(n){if(Pe.isDocumentKey(n))throw new we(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function pA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function om(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Be(12329,{type:typeof n})}function Tr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=om(n);throw new we(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function y6(n,e){if(e<=0)throw new we(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Tn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ah(n,e){if(!pA(n))throw new we(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new we(ce.INVALID_ARGUMENT,t);return!0}const W_=-62135596800,Z_=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Z_);return new zt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<W_)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z_}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ah(e,zt._jsonSchema))return new zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-W_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zt._jsonSchemaVersion="firestore/timestamp/1.0",zt._jsonSchema={type:Tn("string",zt._jsonSchemaVersion),seconds:Tn("number"),nanoseconds:Tn("number")};class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new zt(0,0))}static max(){return new Fe(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rh=-1;function v6(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Fe.fromTimestamp(r===1e9?new zt(t+1,0):new zt(t,r));return new Ao(a,Pe.empty(),e)}function b6(n){return new Ao(n.readTime,n.key,rh)}class Ao{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ao(Fe.min(),Pe.empty(),rh)}static max(){return new Ao(Fe.max(),Pe.empty(),rh)}}function x6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Pe.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}const _6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function zc(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==_6)throw n;Te("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,r)=>{t(e)}))}static reject(e){return new fe(((t,r)=>{r(e)}))}static waitFor(e){return new fe(((t,r)=>{let a=0,l=0,c=!1;e.forEach((h=>{++a,h.next((()=>{++l,c&&l===a&&t()}),(m=>r(m)))})),c=!0,l===a&&t()}))}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next((a=>a?fe.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new fe(((r,a)=>{const l=e.length,c=new Array(l);let h=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((v=>{c[p]=v,++h,h===l&&r(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new fe(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}function w6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Hc(n){return n.name==="IndexedDbTransactionError"}class lm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}lm.ce=-1;const N0=-1;function cm(n){return n==null}function Mf(n){return n===0&&1/n==-1/0}function T6(n){return typeof n=="number"&&Number.isInteger(n)&&!Mf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const yA="";function A6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=J_(e)),e=S6(n.get(t),e);return J_(e)}function S6(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case yA:t+="";break;default:t+=l}}return t}function J_(n){return n+yA+""}function eE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ko(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function N6(n,e){const t=[];for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.push(e(n[r],r,n));return t}function vA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class tn{constructor(e,t){this.comparator=e,this.root=t||Qn.EMPTY}insert(e,t){return new tn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xd(this.root,e,this.comparator,!0)}}class Xd{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Qn.RED,this.left=a??Qn.EMPTY,this.right=l??Qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Qn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Qn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1;Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tE(this.data.getIterator())}getIteratorFrom(e){return new tE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class tE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class as{constructor(e){this.fields=e,e.sort(Yn.comparator)}static empty(){return new as([])}unionWith(e){let t=new Rn(Yn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new as(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ac(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class bA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new bA("Invalid base64 string: "+l):l}})(e);return new Zn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Zn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zn.EMPTY_BYTE_STRING=new Zn("");const C6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function So(n){if(_t(!!n,39018),typeof n=="string"){let e=0;const t=C6.exec(n);if(_t(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pn(n.seconds),nanos:pn(n.nanos)}}function pn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function No(n){return typeof n=="string"?Zn.fromBase64String(n):Zn.fromUint8Array(n)}const xA="server_timestamp",_A="__type__",EA="__previous_value__",wA="__local_write_time__";function C0(n){return(n?.mapValue?.fields||{})[_A]?.stringValue===xA}function um(n){const e=n.mapValue.fields[EA];return C0(e)?um(e):e}function sh(n){const e=So(n.mapValue.fields[wA].timestampValue);return new zt(e.seconds,e.nanos)}class R6{constructor(e,t,r,a,l,c,h,m,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=v}}const Pf="(default)";class ih{constructor(e,t){this.projectId=e,this.database=t||Pf}static empty(){return new ih("","")}get isDefaultDatabase(){return this.database===Pf}isEqual(e){return e instanceof ih&&e.projectId===this.projectId&&e.database===this.database}}const TA="__type__",I6="__max__",Wd={mapValue:{}},AA="__vector__",Uf="value";function Co(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?C0(n)?4:O6(n)?9007199254740991:j6(n)?10:11:Be(28295,{value:n})}function Oi(n,e){if(n===e)return!0;const t=Co(n);if(t!==Co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sh(n).isEqual(sh(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=So(a.timestampValue),h=So(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return No(a.bytesValue).isEqual(No(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return pn(a.geoPointValue.latitude)===pn(l.geoPointValue.latitude)&&pn(a.geoPointValue.longitude)===pn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return pn(a.integerValue)===pn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=pn(a.doubleValue),h=pn(l.doubleValue);return c===h?Mf(c)===Mf(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return Ac(n.arrayValue.values||[],e.arrayValue.values||[],Oi);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},h=l.mapValue.fields||{};if(eE(c)!==eE(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!Oi(c[m],h[m])))return!1;return!0})(n,e);default:return Be(52216,{left:n})}}function ah(n,e){return(n.values||[]).find((t=>Oi(t,e)))!==void 0}function Sc(n,e){if(n===e)return 0;const t=Co(n),r=Co(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=pn(l.integerValue||l.doubleValue),m=pn(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(n,e);case 3:return nE(n.timestampValue,e.timestampValue);case 4:return nE(sh(n),sh(e));case 5:return Ay(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=No(l),m=No(c);return h.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),m=c.split("/");for(let p=0;p<h.length&&p<m.length;p++){const v=lt(h[p],m[p]);if(v!==0)return v}return lt(h.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=lt(pn(l.latitude),pn(c.latitude));return h!==0?h:lt(pn(l.longitude),pn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return rE(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const h=l.fields||{},m=c.fields||{},p=h[Uf]?.arrayValue,v=m[Uf]?.arrayValue,_=lt(p?.values?.length||0,v?.values?.length||0);return _!==0?_:rE(p,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Wd.mapValue&&c===Wd.mapValue)return 0;if(l===Wd.mapValue)return 1;if(c===Wd.mapValue)return-1;const h=l.fields||{},m=Object.keys(h),p=c.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let _=0;_<m.length&&_<v.length;++_){const E=Ay(m[_],v[_]);if(E!==0)return E;const A=Sc(h[m[_]],p[v[_]]);if(A!==0)return A}return lt(m.length,v.length)})(n.mapValue,e.mapValue);default:throw Be(23264,{he:t})}}function nE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=So(n),r=So(e),a=lt(t.seconds,r.seconds);return a!==0?a:lt(t.nanos,r.nanos)}function rE(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Sc(t[a],r[a]);if(l)return l}return lt(t.length,r.length)}function Nc(n){return Sy(n)}function Sy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=So(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return No(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Sy(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Sy(t.fields[c])}`;return a+"}"})(n.mapValue):Be(61005,{value:n})}function xf(n){switch(Co(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=um(n);return e?16+xf(e):16;case 5:return 2*n.stringValue.length;case 6:return No(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+xf(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return ko(r.fields,((l,c)=>{a+=l.length+xf(c)})),a})(n.mapValue);default:throw Be(13486,{value:n})}}function sE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ny(n){return!!n&&"integerValue"in n}function R0(n){return!!n&&"arrayValue"in n}function iE(n){return!!n&&"nullValue"in n}function aE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _f(n){return!!n&&"mapValue"in n}function j6(n){return(n?.mapValue?.fields||{})[TA]?.stringValue===AA}function Qu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ko(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Qu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qu(n.arrayValue.values[t]);return e}return{...n}}function O6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===I6}class Br{constructor(e){this.value=e}static empty(){return new Br({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_f(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qu(t)}setAll(e){let t=Yn.emptyPath(),r={},a=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=h.popLast()}c?r[h.lastSegment()]=Qu(c):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());_f(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];_f(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){ko(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Br(Qu(this.value))}}function SA(n){const e=[];return ko(n.fields,((t,r)=>{const a=new Yn([t]);if(_f(r)){const l=SA(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new as(e)}class cr{constructor(e,t,r,a,l,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new cr(e,0,Fe.min(),Fe.min(),Fe.min(),Br.empty(),0)}static newFoundDocument(e,t,r,a){return new cr(e,1,t,Fe.min(),r,a,0)}static newNoDocument(e,t){return new cr(e,2,t,Fe.min(),Fe.min(),Br.empty(),0)}static newUnknownDocument(e,t){return new cr(e,3,t,Fe.min(),Fe.min(),Br.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Vf{constructor(e,t){this.position=e,this.inclusive=t}}function oE(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?r=Pe.comparator(Pe.fromName(c.referenceValue),t.key):r=Sc(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function lE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oi(n.position[t],e.position[t]))return!1;return!0}class oh{constructor(e,t="asc"){this.field=e,this.dir=t}}function D6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class NA{}class wn extends NA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new k6(e,t,r):t==="array-contains"?new U6(e,r):t==="in"?new V6(e,r):t==="not-in"?new q6(e,r):t==="array-contains-any"?new B6(e,r):new wn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new M6(e,r):new P6(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Sc(t,this.value)):t!==null&&Co(this.value)===Co(t)&&this.matchesComparison(Sc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class si extends NA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new si(e,t)}matches(e){return CA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function CA(n){return n.op==="and"}function RA(n){return L6(n)&&CA(n)}function L6(n){for(const e of n.filters)if(e instanceof si)return!1;return!0}function Cy(n){if(n instanceof wn)return n.field.canonicalString()+n.op.toString()+Nc(n.value);if(RA(n))return n.filters.map((e=>Cy(e))).join(",");{const e=n.filters.map((t=>Cy(t))).join(",");return`${n.op}(${e})`}}function IA(n,e){return n instanceof wn?(function(r,a){return a instanceof wn&&r.op===a.op&&r.field.isEqual(a.field)&&Oi(r.value,a.value)})(n,e):n instanceof si?(function(r,a){return a instanceof si&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,h)=>l&&IA(c,a.filters[h])),!0):!1})(n,e):void Be(19439)}function jA(n){return n instanceof wn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Nc(t.value)}`})(n):n instanceof si?(function(t){return t.op.toString()+" {"+t.getFilters().map(jA).join(" ,")+"}"})(n):"Filter"}class k6 extends wn{constructor(e,t,r){super(e,t,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class M6 extends wn{constructor(e,t){super(e,"in",t),this.keys=OA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class P6 extends wn{constructor(e,t){super(e,"not-in",t),this.keys=OA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function OA(n,e){return(e.arrayValue?.values||[]).map((t=>Pe.fromName(t.referenceValue)))}class U6 extends wn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return R0(t)&&ah(t.arrayValue,this.value)}}class V6 extends wn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ah(this.value.arrayValue,t)}}class q6 extends wn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ah(this.value.arrayValue,t)}}class B6 extends wn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!R0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ah(this.value.arrayValue,r)))}}class z6{constructor(e,t=null,r=[],a=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function cE(n,e=null,t=[],r=[],a=null,l=null,c=null){return new z6(n,e,t,r,a,l,c)}function I0(n){const e=He(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Cy(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),cm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Nc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Nc(r))).join(",")),e.Te=t}return e.Te}function j0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!D6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!IA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lE(n.startAt,e.startAt)&&lE(n.endAt,e.endAt)}function Ry(n){return Pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Fc{constructor(e,t=null,r=[],a=[],l=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function H6(n,e,t,r,a,l,c,h){return new Fc(n,e,t,r,a,l,c,h)}function hm(n){return new Fc(n)}function uE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function DA(n){return n.collectionGroup!==null}function Yu(n){const e=He(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Rn(Yn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new oh(l,r))})),t.has(Yn.keyField().canonicalString())||e.Ie.push(new oh(Yn.keyField(),r))}return e.Ie}function Ni(n){const e=He(n);return e.Ee||(e.Ee=LA(e,Yu(n))),e.Ee}function F6(n){const e=He(n);return e.de||(e.de=LA(e,n.explicitOrderBy)),e.de}function LA(n,e){if(n.limitType==="F")return cE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new oh(a.field,l)}));const t=n.endAt?new Vf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Vf(n.startAt.position,n.startAt.inclusive):null;return cE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Iy(n,e){const t=n.filters.concat([e]);return new Fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qf(n,e,t){return new Fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dm(n,e){return j0(Ni(n),Ni(e))&&n.limitType===e.limitType}function kA(n){return`${I0(Ni(n))}|lt:${n.limitType}`}function lc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>jA(a))).join(", ")}]`),cm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Nc(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Nc(a))).join(",")),`Target(${r})`})(Ni(n))}; limitType=${n.limitType})`}function fm(n,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Pe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,a){for(const l of Yu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(c,h,m){const p=oE(c,h,m);return c.inclusive?p<=0:p<0})(r.startAt,Yu(r),a)||r.endAt&&!(function(c,h,m){const p=oE(c,h,m);return c.inclusive?p>=0:p>0})(r.endAt,Yu(r),a))})(n,e)}function $6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MA(n){return(e,t)=>{let r=!1;for(const a of Yu(n)){const l=G6(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function G6(n,e,t){const r=n.field.isKeyField()?Pe.comparator(e.key,t.key):(function(l,c,h){const m=c.data.field(l),p=h.data.field(l);return m!==null&&p!==null?Sc(m,p):Be(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Be(19790,{direction:n.dir})}}class xl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return vA(this.inner)}size(){return this.innerSize}}const K6=new tn(Pe.comparator);function Aa(){return K6}const PA=new tn(Pe.comparator);function qu(...n){let e=PA;for(const t of n)e=e.insert(t.key,t);return e}function UA(n){let e=PA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function il(){return Xu()}function VA(){return Xu()}function Xu(){return new xl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Q6=new tn(Pe.comparator),Y6=new Rn(Pe.comparator);function ct(...n){let e=Y6;for(const t of n)e=e.add(t);return e}const X6=new Rn(lt);function W6(){return X6}function O0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mf(e)?"-0":e}}function qA(n){return{integerValue:""+n}}function Z6(n,e){return T6(e)?qA(e):O0(n,e)}class mm{constructor(){this._=void 0}}function J6(n,e,t){return n instanceof lh?(function(a,l){const c={fields:{[_A]:{stringValue:xA},[wA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&C0(l)&&(l=um(l)),l&&(c.fields[EA]=l),{mapValue:c}})(t,e):n instanceof Cc?zA(n,e):n instanceof Rc?HA(n,e):(function(a,l){const c=BA(a,l),h=hE(c)+hE(a.Ae);return Ny(c)&&Ny(a.Ae)?qA(h):O0(a.serializer,h)})(n,e)}function eO(n,e,t){return n instanceof Cc?zA(n,e):n instanceof Rc?HA(n,e):t}function BA(n,e){return n instanceof Bf?(function(r){return Ny(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class lh extends mm{}class Cc extends mm{constructor(e){super(),this.elements=e}}function zA(n,e){const t=FA(e);for(const r of n.elements)t.some((a=>Oi(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Rc extends mm{constructor(e){super(),this.elements=e}}function HA(n,e){let t=FA(e);for(const r of n.elements)t=t.filter((a=>!Oi(a,r)));return{arrayValue:{values:t}}}class Bf extends mm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function hE(n){return pn(n.integerValue||n.doubleValue)}function FA(n){return R0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class D0{constructor(e,t){this.field=e,this.transform=t}}function tO(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof Cc&&a instanceof Cc||r instanceof Rc&&a instanceof Rc?Ac(r.elements,a.elements,Oi):r instanceof Bf&&a instanceof Bf?Oi(r.Ae,a.Ae):r instanceof lh&&a instanceof lh})(n.transform,e.transform)}class nO{constructor(e,t){this.version=e,this.transformResults=t}}class ks{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ks}static exists(e){return new ks(void 0,e)}static updateTime(e){return new ks(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ef(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class gm{}function $A(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new L0(n.key,ks.none()):new Sh(n.key,n.data,ks.none());{const t=n.data,r=Br.empty();let a=new Rn(Yn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Mo(n.key,r,new as(a.toArray()),ks.none())}}function rO(n,e,t){n instanceof Sh?(function(a,l,c){const h=a.value.clone(),m=fE(a.fieldTransforms,l,c.transformResults);h.setAll(m),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Mo?(function(a,l,c){if(!Ef(a.precondition,l))return void l.convertToUnknownDocument(c.version);const h=fE(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(GA(a)),m.setAll(h),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Wu(n,e,t,r){return n instanceof Sh?(function(l,c,h,m){if(!Ef(l.precondition,c))return h;const p=l.value.clone(),v=mE(l.fieldTransforms,m,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Mo?(function(l,c,h,m){if(!Ef(l.precondition,c))return h;const p=mE(l.fieldTransforms,m,c),v=c.data;return v.setAll(GA(l)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(n,e,t,r):(function(l,c,h){return Ef(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function sO(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=BA(r.transform,a||null);l!=null&&(t===null&&(t=Br.empty()),t.set(r.field,l))}return t||null}function dE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Ac(r,a,((l,c)=>tO(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Sh extends gm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Mo extends gm{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function GA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function fE(n,e,t){const r=new Map;_t(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,h=e.data.field(l.field);r.set(l.field,eO(c,h,t[a]))}return r}function mE(n,e,t){const r=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);r.set(a.field,J6(l,c,e))}return r}class L0 extends gm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iO extends gm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class aO{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&rO(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Wu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=VA();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(a.key)?null:h;const m=$A(c,h);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Fe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ct())}isEqual(e){return this.batchId===e.batchId&&Ac(this.mutations,e.mutations,((t,r)=>dE(t,r)))&&Ac(this.baseMutations,e.baseMutations,((t,r)=>dE(t,r)))}}class k0{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){_t(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return Q6})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new k0(e,t,r,a)}}class oO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class lO{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}class cO{constructor(e,t){this.count=e,this.unchangedNames=t}}var En,mt;function uO(n){switch(n){case ce.OK:return Be(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Be(15467,{code:n})}}function KA(n){if(n===void 0)return Ta("GRPC error has no .code"),ce.UNKNOWN;switch(n){case En.OK:return ce.OK;case En.CANCELLED:return ce.CANCELLED;case En.UNKNOWN:return ce.UNKNOWN;case En.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case En.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case En.INTERNAL:return ce.INTERNAL;case En.UNAVAILABLE:return ce.UNAVAILABLE;case En.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case En.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case En.NOT_FOUND:return ce.NOT_FOUND;case En.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case En.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case En.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case En.ABORTED:return ce.ABORTED;case En.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case En.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case En.DATA_LOSS:return ce.DATA_LOSS;default:return Be(39323,{code:n})}}(mt=En||(En={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";function hO(){return new TextEncoder}const dO=new _o([4294967295,4294967295],0);function gE(n){const e=hO().encode(n),t=new oA;return t.update(e),new Uint8Array(t.digest())}function pE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new _o([t,r],0),new _o([a,l],0)]}class M0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bu(`Invalid padding: ${t}`);if(r<0)throw new Bu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_o.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(_o.fromNumber(r)));return a.compare(dO)===1&&(a=new _o([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=gE(e),[r,a]=pE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new M0(l,a,t);return r.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=gE(e),[r,a]=pE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class pm{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Nh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new pm(Fe.min(),a,new tn(lt),Aa(),ct())}}class Nh{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Nh(r,t,ct(),ct(),ct())}}class wf{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class QA{constructor(e,t){this.targetId=e,this.Ce=t}}class YA{constructor(e,t,r=Zn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class yE{constructor(){this.ve=0,this.Fe=vE(),this.Me=Zn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ct(),t=ct(),r=ct();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Be(38017,{changeType:l})}})),new Nh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=vE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Aa(),this.Je=Zd(),this.He=Zd(),this.Ye=new tn(lt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Ry(l))if(r===0){const c=new Pe(l.path);this.et(t,c,cr.newNoDocument(c,Fe.min()))}else _t(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),m=h?this.ct(h,e,c):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,h;try{c=No(r).toUint8Array()}catch(m){if(m instanceof bA)return Tc("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new M0(c,a,l)}catch(m){return Tc(m instanceof Bu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&Ry(h.target)){const m=new Pe(h.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,cr.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let r=ct();this.He.forEach(((l,c)=>{let h=!0;c.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new pm(e,t,this.Ye,this.je,r);return this.je=Aa(),this.Je=Zd(),this.He=Zd(),this.Ye=new tn(lt),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new yE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Rn(lt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Rn(lt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Zd(){return new tn(Pe.comparator)}function vE(){return new tn(Pe.comparator)}const mO={asc:"ASCENDING",desc:"DESCENDING"},gO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pO={and:"AND",or:"OR"};class yO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function jy(n,e){return n.useProto3Json||cm(e)?e:{value:e}}function zf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vO(n,e){return zf(n,e.toTimestamp())}function Ci(n){return _t(!!n,49232),Fe.fromTimestamp((function(t){const r=So(t);return new zt(r.seconds,r.nanos)})(n))}function P0(n,e){return Oy(n,e).canonicalString()}function Oy(n,e){const t=(function(a){return new kt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function WA(n){const e=kt.fromString(n);return _t(rS(e),10190,{key:e.toString()}),e}function Dy(n,e){return P0(n.databaseId,e.path)}function Gp(n,e){const t=WA(e);if(t.get(1)!==n.databaseId.projectId)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(JA(t))}function ZA(n,e){return P0(n.databaseId,e)}function bO(n){const e=WA(n);return e.length===4?kt.emptyPath():JA(e)}function Ly(n){return new kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JA(n){return _t(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function bE(n,e,t){return{name:Dy(n,e),fields:t.value.mapValue.fields}}function xO(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Be(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,v){return p.useProto3Json?(_t(v===void 0||typeof v=="string",58123),Zn.fromBase64String(v||"")):(_t(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Zn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(p){const v=p.code===void 0?ce.UNKNOWN:KA(p.code);return new we(v,p.message||"")})(c);t=new YA(r,a,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Gp(n,r.document.name),l=Ci(r.document.updateTime),c=r.document.createTime?Ci(r.document.createTime):Fe.min(),h=new Br({mapValue:{fields:r.document.fields}}),m=cr.newFoundDocument(a,l,c,h),p=r.targetIds||[],v=r.removedTargetIds||[];t=new wf(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Gp(n,r.document),l=r.readTime?Ci(r.readTime):Fe.min(),c=cr.newNoDocument(a,l),h=r.removedTargetIds||[];t=new wf([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Gp(n,r.document),l=r.removedTargetIds||[];t=new wf([],l,a,null)}else{if(!("filter"in e))return Be(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new cO(a,l),h=r.targetId;t=new QA(h,c)}}return t}function _O(n,e){let t;if(e instanceof Sh)t={update:bE(n,e.key,e.value)};else if(e instanceof L0)t={delete:Dy(n,e.key)};else if(e instanceof Mo)t={update:bE(n,e.key,e.data),updateMask:IO(e.fieldMask)};else{if(!(e instanceof iO))return Be(16599,{Vt:e.type});t={verify:Dy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const h=c.transform;if(h instanceof lh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Cc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Rc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Bf)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Be(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:vO(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Be(27497)})(n,e.precondition)),t}function EO(n,e){return n&&n.length>0?(_t(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?Ci(a.updateTime):Ci(l);return c.isEqual(Fe.min())&&(c=Ci(l)),new nO(c,a.transformResults||[])})(t,e)))):[]}function wO(n,e){return{documents:[ZA(n,e.path)]}}function eS(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ZA(n,a);const l=(function(p){if(p.length!==0)return nS(si.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((v=>(function(E){return{field:fo(E.field),direction:NO(E.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=jy(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function TO(n,e,t,r){const{ft:a,parent:l}=eS(n,e),c={},h=[];let m=0;return t.forEach((p=>{const v="aggregate_"+m++;c[v]=p.alias,p.aggregateType==="count"?h.push({alias:v,count:{}}):p.aggregateType==="avg"?h.push({alias:v,avg:{field:fo(p.fieldPath)}}):p.aggregateType==="sum"&&h.push({alias:v,sum:{field:fo(p.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:h,structuredQuery:a.structuredQuery},parent:a.parent},gt:c,parent:l}}function AO(n){let e=bO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){_t(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(_){const E=tS(_);return E instanceof si&&RA(E)?E.getFilters():[E]})(t.where));let c=[];t.orderBy&&(c=(function(_){return _.map((E=>(function(S){return new oh(cc(S.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(E)))})(t.orderBy));let h=null;t.limit&&(h=(function(_){let E;return E=typeof _=="object"?_.value:_,cm(E)?null:E})(t.limit));let m=null;t.startAt&&(m=(function(_){const E=!!_.before,A=_.values||[];return new Vf(A,E)})(t.startAt));let p=null;return t.endAt&&(p=(function(_){const E=!_.before,A=_.values||[];return new Vf(A,E)})(t.endAt)),H6(e,a,c,l,h,"F",m,p)}function SO(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function tS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=cc(t.unaryFilter.field);return wn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=cc(t.unaryFilter.field);return wn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=cc(t.unaryFilter.field);return wn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=cc(t.unaryFilter.field);return wn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(n):n.fieldFilter!==void 0?(function(t){return wn.create(cc(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return si.create(t.compositeFilter.filters.map((r=>tS(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(t.compositeFilter.op))})(n):Be(30097,{filter:n})}function NO(n){return mO[n]}function CO(n){return gO[n]}function RO(n){return pO[n]}function fo(n){return{fieldPath:n.canonicalString()}}function cc(n){return Yn.fromServerFormat(n.fieldPath)}function nS(n){return n instanceof wn?(function(t){if(t.op==="=="){if(aE(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NAN"}};if(iE(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(aE(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NOT_NAN"}};if(iE(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(t.field),op:CO(t.op),value:t.value}}})(n):n instanceof si?(function(t){const r=t.getFilters().map((a=>nS(a)));return r.length===1?r[0]:{compositeFilter:{op:RO(t.op),filters:r}}})(n):Be(54877,{filter:n})}function IO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function rS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class po{constructor(e,t,r,a,l=Fe.min(),c=Fe.min(),h=Zn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new po(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class jO{constructor(e){this.yt=e}}function OO(n){const e=AO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qf(e,e.limit,"L"):e}class DO{constructor(){this.Cn=new LO}addToCollectionParentIndex(e,t){return this.Cn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Ao.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(Ao.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class LO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Rn(kt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Rn(kt.comparator)).toArray()}}const xE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sS=41943040;class qr{static withCacheSize(e){return new qr(e,qr.DEFAULT_COLLECTION_PERCENTILE,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}qr.DEFAULT_COLLECTION_PERCENTILE=10,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qr.DEFAULT=new qr(sS,qr.DEFAULT_COLLECTION_PERCENTILE,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qr.DISABLED=new qr(-1,0,0);class Ic{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ic(0)}static cr(){return new Ic(-1)}}const _E="LruGarbageCollector",kO=1048576;function EE([n,e],[t,r]){const a=lt(n,t);return a===0?lt(e,r):a}class MO{constructor(e){this.Ir=e,this.buffer=new Rn(EE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();EE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(_E,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hc(t)?Te(_E,"Ignoring IndexedDB error during garbage collection: ",t):await zc(t)}await this.Vr(3e5)}))}}class UO{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(lm.ce);const r=new MO(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(xE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,c,h,m,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,c=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(r=_,h=Date.now(),this.removeTargets(e,r,t)))).next((_=>(l=_,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(p=Date.now(),oc()<=ot.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${l} targets in `+(m-h)+`ms
	Removed ${_} documents in `+(p-m)+`ms
Total Duration: ${p-v}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function VO(n,e){return new UO(n,e)}class qO{constructor(){this.changes=new xl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class BO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zO{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Wu(r.mutation,a,as.empty(),zt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ct()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ct()){const a=il();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=qu();return l.forEach(((h,m)=>{c=c.insert(h,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=il();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ct())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,r,a){let l=Aa();const c=Xu(),h=(function(){return Xu()})();return t.forEach(((m,p)=>{const v=r.get(p.key);a.has(p.key)&&(v===void 0||v.mutation instanceof Mo)?l=l.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Wu(v.mutation,p,v.mutation.getFieldMask(),zt.now())):c.set(p.key,as.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,v)=>c.set(p,v))),t.forEach(((p,v)=>h.set(p,new BO(v,c.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=Xu();let a=new tn(((c,h)=>c-h)),l=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let v=r.get(m)||as.empty();v=h.applyToLocalView(p,v),r.set(m,v);const _=(a.get(h.batchId)||ct()).add(m);a=a.insert(h.batchId,_)}))})).next((()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),p=m.key,v=m.value,_=VA();v.forEach((E=>{if(!l.has(E)){const A=$A(t.get(E),r.get(E));A!==null&&_.set(E,A),l=l.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,_))}return fe.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return Pe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):DA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):fe.resolve(il());let h=rh,m=l;return c.next((p=>fe.forEach(p,((v,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),l.get(v)?fe.resolve():this.remoteDocumentCache.getEntry(e,v).next((E=>{m=m.insert(v,E)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,ct()))).next((v=>({batchId:h,changes:UA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next((r=>{let a=qu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=qu();return this.indexManager.getCollectionParents(e,l).next((h=>fe.forEach(h,(m=>{const p=(function(_,E){return new Fc(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next((v=>{v.forEach(((_,E)=>{c=c.insert(_,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((m,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,cr.newInvalidDocument(v)))}));let h=qu();return c.forEach(((m,p)=>{const v=l.get(m);v!==void 0&&Wu(v.mutation,p,as.empty(),zt.now()),fm(t,p)&&(h=h.insert(m,p))})),h}))}}class HO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return fe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ci(a.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:OO(a.bundledQuery),readTime:Ci(a.readTime)}})(t)),fe.resolve()}}class FO{constructor(){this.overlays=new tn(Pe.comparator),this.qr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=il();return fe.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.St(e,t,l)})),fe.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const a=il(),l=t.length+1,c=new Pe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return fe.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new tn(((p,v)=>p-v));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=l.get(p.largestBatchId);v===null&&(v=il(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=il(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,v)=>h.set(p,v))),!(h.size()>=a)););return fe.resolve(h)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new oO(t,r));let l=this.qr.get(t);l===void 0&&(l=ct(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}class $O{constructor(){this.sessionToken=Zn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}class U0{constructor(){this.Qr=new Rn(Ln.$r),this.Ur=new Rn(Ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ln(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Ln(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Pe(new kt([])),r=new Ln(t,e),a=new Ln(t,e+1),l=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Pe(new kt([])),r=new Ln(t,e),a=new Ln(t,e+1);let l=ct();return this.Ur.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ln(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ln{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Pe.comparator(e.key,t.key)||lt(e.Yr,t.Yr)}static Kr(e,t){return lt(e.Yr,t.Yr)||Pe.comparator(e.key,t.key)}}class GO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Rn(Ln.$r)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new aO(l,t,r,a);this.mutationQueue.push(c);for(const h of a)this.Zr=this.Zr.add(new Ln(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return fe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?N0:this.tr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ln(t,0),a=new Ln(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(c=>{const h=this.Xr(c.Yr);l.push(h)})),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(lt);return t.forEach((a=>{const l=new Ln(a,0),c=new Ln(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(h=>{r=r.add(h.Yr)}))})),fe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;Pe.isDocumentKey(l)||(l=l.child(""));const c=new Ln(new Pe(l),0);let h=new Rn(lt);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(h=h.add(m.Yr)),!0)}),c),fe.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){_t(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return fe.forEach(t.mutations,(a=>{const l=new Ln(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Ln(t,0),a=this.Zr.firstAfterOrEqual(r);return fe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class KO{constructor(e){this.ri=e,this.docs=(function(){return new tn(Pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():cr.newInvalidDocument(t))}getEntries(e,t){let r=Aa();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():cr.newInvalidDocument(a))})),fe.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Aa();const c=t.path,h=new Pe(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||x6(b6(v),r)<=0||(a.has(v.key)||fm(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return fe.resolve(l)}getAllFromCollectionGroup(e,t,r,a){Be(9500)}ii(e,t){return fe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new QO(this)}getSize(e){return fe.resolve(this.size)}}class QO extends qO{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),fe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class YO{constructor(e){this.persistence=e,this.si=new xl((t=>I0(t)),j0),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.oi=0,this._i=new U0,this.targetCount=0,this.ai=Ic.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),fe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ic(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Pr(t),fe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),fe.waitFor(l).next((()=>a))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this._i.containsKey(t))}}class iS{constructor(e,t){this.ui={},this.overlays={},this.ci=new lm(0),this.li=!1,this.li=!0,this.hi=new $O,this.referenceDelegate=e(this),this.Pi=new YO(this),this.indexManager=new DO,this.remoteDocumentCache=(function(a){return new KO(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new jO(t),this.Ii=new HO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new FO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new GO(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Te("MemoryPersistence","Starting transaction:",e);const a=new XO(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return fe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class XO extends E6{constructor(e){super(),this.currentSequenceNumber=e}}class V0{constructor(e){this.persistence=e,this.Ri=new U0,this.Vi=null}static mi(e){return new V0(e)}get fi(){if(this.Vi)return this.Vi;throw Be(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,(r=>{const a=Pe.fromPath(r);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Fe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Hf{constructor(e,t){this.persistence=e,this.pi=new xl((r=>A6(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=VO(this,t)}static mi(e,t){return new Hf(e,t)}Ei(){}di(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return fe.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?fe.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((h=>{h||(r++,l.removeEntry(c,Fe.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xf(e.data.value)),t}br(e,t,r){return fe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return fe.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class q0{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=ct(),a=ct();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new q0(e,t.fromCache,r,a)}}class WO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ZO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return T4()?8:w6(dr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new WO;return this.Ss(e,t,c).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>l.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(oc()<=ot.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",lc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(oc()<=ot.DEBUG&&Te("QueryEngine","Query:",lc(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(oc()<=ot.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",lc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(t))):fe.resolve())}ys(e,t){if(uE(t))return fe.resolve(null);let r=Ni(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=qf(t,null,"F"),r=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=ct(...l);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,r).next((m=>{const p=this.Ds(t,h);return this.Cs(t,p,c,m.readTime)?this.ys(e,qf(t,null,"F")):this.vs(e,p,t,m)}))))})))))}ws(e,t,r,a){return uE(t)||a.isEqual(Fe.min())?fe.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,a)?fe.resolve(null):(oc()<=ot.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),lc(t)),this.vs(e,c,t,v6(a,rh)).next((h=>h)))}))}Ds(e,t){let r=new Rn(MA(e));return t.forEach(((a,l)=>{fm(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return oc()<=ot.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",lc(t)),this.ps.getDocumentsMatchingQuery(e,t,Ao.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const B0="LocalStore",JO=3e8;class e5{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new tn(lt),this.xs=new xl((l=>I0(l)),j0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function t5(n,e,t,r){return new e5(n,e,t,r)}async function aS(n,e){const t=He(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],h=[];let m=ct();for(const p of a){c.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of l){h.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(r,m).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:h})))}))}))}function n5(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,p,v){const _=p.batch,E=_.keys();let A=fe.resolve();return E.forEach((S=>{A=A.next((()=>v.getEntry(m,S))).next((O=>{const R=p.docVersions.get(S);_t(R!==null,48541),O.version.compareTo(R)<0&&(_.applyToRemoteDocument(O,p),O.isValidDocument()&&(O.setReadTime(p.commitVersion),v.addEntry(O)))}))})),A.next((()=>h.mutationQueue.removeMutationBatch(m,_)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let m=ct();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(m=m.add(h.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function oS(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function r5(n,e){const t=He(n),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((v,_)=>{const E=a.get(_);if(!E)return;h.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,_))));let A=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?A=A.withResumeToken(Zn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,r)),a=a.insert(_,A),(function(O,R,U){return O.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=JO?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(E,A,v)&&h.push(t.Pi.updateTargetData(l,A))}));let m=Aa(),p=ct();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(s5(l,c,e.documentUpdates).next((v=>{m=v.ks,p=v.qs}))),!r.isEqual(Fe.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((_=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));h.push(v)}return fe.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function s5(n,e,t){let r=ct(),a=ct();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=Aa();return t.forEach(((h,m)=>{const p=l.get(h);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(Fe.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):Te(B0,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function i5(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=N0),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function a5(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((l=>l?(a=l,fe.resolve(a)):t.Pi.allocateTargetId(r).next((c=>(a=new po(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function ky(n,e,t){const r=He(n),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Hc(c))throw c;Te(B0,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function wE(n,e,t){const r=He(n);let a=Fe.min(),l=ct();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,p,v){const _=He(m),E=_.xs.get(v);return E!==void 0?fe.resolve(_.Ms.get(E)):_.Pi.getTargetData(p,v)})(r,c,Ni(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,h.targetId).next((m=>{l=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:Fe.min(),t?l:ct()))).next((h=>(o5(r,$6(e),h),{documents:h,Qs:l})))))}function o5(n,e,t){let r=n.Os.get(e)||Fe.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Os.set(e,r)}class TE{constructor(){this.activeTargetIds=W6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l5{constructor(){this.Mo=new TE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new TE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class c5{Oo(e){}shutdown(){}}const AE="ConnectivityMonitor";class SE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(AE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(AE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Jd=null;function My(){return Jd===null?Jd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jd++,"0x"+Jd.toString(16)}const Kp="RestConnection",u5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class h5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===Pf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const c=My(),h=this.zo(e,t.toUriEncodedString());Te(Kp,`Sending RPC '${e}' ${c}:`,h,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:p}=new URL(h),v=Uc(p);return this.Jo(e,h,m,r,v).then((_=>(Te(Kp,`Received RPC '${e}' ${c}: `,_),_)),(_=>{throw Tc(Kp,`RPC '${e}' ${c} failed with error: `,_,"url: ",h,"request:",r),_}))}Ho(e,t,r,a,l,c){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const r=u5[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class d5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const or="WebChannelConnection";class f5 extends h5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=My();return new Promise(((h,m)=>{const p=new lA;p.setWithCredentials(!0),p.listenOnce(cA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case bf.NO_ERROR:const _=p.getResponseJson();Te(or,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),h(_);break;case bf.TIMEOUT:Te(or,`RPC '${e}' ${c} timed out`),m(new we(ce.DEADLINE_EXCEEDED,"Request time out"));break;case bf.HTTP_ERROR:const E=p.getStatus();if(Te(or,`RPC '${e}' ${c} failed with status:`,E,"response text:",p.getResponseText()),E>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const S=A?.error;if(S&&S.status&&S.message){const O=(function(U){const F=U.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(F)>=0?F:ce.UNKNOWN})(S.status);m(new we(O,S.message))}else m(new we(ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new we(ce.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Te(or,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);Te(or,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=My(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=dA(),h=hA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=l.join("");Te(or,`Creating RPC '${e}' stream ${a}: ${v}`,m);const _=c.createWebChannel(v,m);this.I_(_);let E=!1,A=!1;const S=new d5({Yo:R=>{A?Te(or,`Not sending because RPC '${e}' stream ${a} is closed:`,R):(E||(Te(or,`Opening RPC '${e}' stream ${a} transport.`),_.open(),E=!0),Te(or,`RPC '${e}' stream ${a} sending:`,R),_.send(R))},Zo:()=>_.close()}),O=(R,U,F)=>{R.listen(U,(Q=>{try{F(Q)}catch(Y){setTimeout((()=>{throw Y}),0)}}))};return O(_,Vu.EventType.OPEN,(()=>{A||(Te(or,`RPC '${e}' stream ${a} transport opened.`),S.o_())})),O(_,Vu.EventType.CLOSE,(()=>{A||(A=!0,Te(or,`RPC '${e}' stream ${a} transport closed`),S.a_(),this.E_(_))})),O(_,Vu.EventType.ERROR,(R=>{A||(A=!0,Tc(or,`RPC '${e}' stream ${a} transport errored. Name:`,R.name,"Message:",R.message),S.a_(new we(ce.UNAVAILABLE,"The operation could not be completed")))})),O(_,Vu.EventType.MESSAGE,(R=>{if(!A){const U=R.data[0];_t(!!U,16349);const F=U,Q=F?.error||F[0]?.error;if(Q){Te(or,`RPC '${e}' stream ${a} received error:`,Q);const Y=Q.status;let ie=(function(k){const V=En[k];if(V!==void 0)return KA(V)})(Y),ve=Q.message;ie===void 0&&(ie=ce.INTERNAL,ve="Unknown error status: "+Y+" with message "+Q.message),A=!0,S.a_(new we(ie,ve)),_.close()}else Te(or,`RPC '${e}' stream ${a} received:`,U),S.u_(U)}})),O(h,uA.STAT_EVENT,(R=>{R.stat===Ty.PROXY?Te(or,`RPC '${e}' stream ${a} detected buffering proxy`):R.stat===Ty.NOPROXY&&Te(or,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Qp(){return typeof document<"u"?document:null}function ym(n){return new yO(n,!0)}class lS{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&Te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const NE="PersistentStream";class cS{constructor(e,t,r,a,l,c,h,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Ta(t.toString()),Ta("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new we(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(NE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Te(NE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class m5 extends cS{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=xO(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Fe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Fe.min():c.readTime?Ci(c.readTime):Fe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Ly(this.serializer),t.addTarget=(function(l,c){let h;const m=c.target;if(h=Ry(m)?{documents:wO(l,m)}:{query:eS(l,m).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=XA(l,c.resumeToken);const p=jy(l,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(Fe.min())>0){h.readTime=zf(l,c.snapshotVersion.toTimestamp());const p=jy(l,c.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const r=SO(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Ly(this.serializer),t.removeTarget=e,this.q_(t)}}class g5 extends cS{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return _t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=EO(e.writeResults,e.commitTime),r=Ci(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Ly(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>_O(this.serializer,r)))};this.q_(t)}}class p5{}class y5 extends p5{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Oy(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(ce.UNKNOWN,l.toString())}))}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,Oy(t,r),a,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new we(ce.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class v5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ta(t),this.aa=!1):Te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const fl="RemoteStore";class b5{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{_l(this)&&(Te(fl,"Restarting streams for network reachability change."),await(async function(m){const p=He(m);p.Ea.add(4),await Ch(p),p.Ra.set("Unknown"),p.Ea.delete(4),await vm(p)})(this))}))})),this.Ra=new v5(r,a)}}async function vm(n){if(_l(n))for(const e of n.da)await e(!0)}async function Ch(n){for(const e of n.da)await e(!1)}function uS(n,e){const t=He(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),$0(t)?F0(t):$c(t).O_()&&H0(t,e))}function z0(n,e){const t=He(n),r=$c(t);t.Ia.delete(e),r.O_()&&hS(t,e),t.Ia.size===0&&(r.O_()?r.L_():_l(t)&&t.Ra.set("Unknown"))}function H0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$c(n).Y_(e)}function hS(n,e){n.Va.Ue(e),$c(n).Z_(e)}function F0(n){n.Va=new fO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),$c(n).start(),n.Ra.ua()}function $0(n){return _l(n)&&!$c(n).x_()&&n.Ia.size>0}function _l(n){return He(n).Ea.size===0}function dS(n){n.Va=void 0}async function x5(n){n.Ra.set("Online")}async function _5(n){n.Ia.forEach(((e,t)=>{H0(n,e)}))}async function E5(n,e){dS(n),$0(n)?(n.Ra.ha(e),F0(n)):n.Ra.set("Unknown")}async function w5(n,e,t){if(n.Ra.set("Online"),e instanceof YA&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(r){Te(fl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ff(n,r)}else if(e instanceof wf?n.Va.Ze(e):e instanceof QA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Fe.min()))try{const r=await oS(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const h=l.Va.Tt(c);return h.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ia.get(p);v&&l.Ia.set(p,v.withResumeToken(m.resumeToken,c))}})),h.targetMismatches.forEach(((m,p)=>{const v=l.Ia.get(m);if(!v)return;l.Ia.set(m,v.withResumeToken(Zn.EMPTY_BYTE_STRING,v.snapshotVersion)),hS(l,m);const _=new po(v.target,m,p,v.sequenceNumber);H0(l,_)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){Te(fl,"Failed to raise snapshot:",r),await Ff(n,r)}}async function Ff(n,e,t){if(!Hc(e))throw e;n.Ea.add(1),await Ch(n),n.Ra.set("Offline"),t||(t=()=>oS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Te(fl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await vm(n)}))}function fS(n,e){return e().catch((t=>Ff(n,t,e)))}async function bm(n){const e=He(n),t=Ro(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:N0;for(;T5(e);)try{const a=await i5(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,A5(e,a)}catch(a){await Ff(e,a)}mS(e)&&gS(e)}function T5(n){return _l(n)&&n.Ta.length<10}function A5(n,e){n.Ta.push(e);const t=Ro(n);t.O_()&&t.X_&&t.ea(e.mutations)}function mS(n){return _l(n)&&!Ro(n).x_()&&n.Ta.length>0}function gS(n){Ro(n).start()}async function S5(n){Ro(n).ra()}async function N5(n){const e=Ro(n);for(const t of n.Ta)e.ea(t.mutations)}async function C5(n,e,t){const r=n.Ta.shift(),a=k0.from(r,e,t);await fS(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await bm(n)}async function R5(n,e){e&&Ro(n).X_&&await(async function(r,a){if((function(c){return uO(c)&&c!==ce.ABORTED})(a.code)){const l=r.Ta.shift();Ro(r).B_(),await fS(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await bm(r)}})(n,e),mS(n)&&gS(n)}async function CE(n,e){const t=He(n);t.asyncQueue.verifyOperationInProgress(),Te(fl,"RemoteStore received new credentials");const r=_l(t);t.Ea.add(3),await Ch(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await vm(t)}async function I5(n,e){const t=He(n);e?(t.Ea.delete(2),await vm(t)):e||(t.Ea.add(2),await Ch(t),t.Ra.set("Unknown"))}function $c(n){return n.ma||(n.ma=(function(t,r,a){const l=He(t);return l.sa(),new m5(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:x5.bind(null,n),t_:_5.bind(null,n),r_:E5.bind(null,n),H_:w5.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),$0(n)?F0(n):n.Ra.set("Unknown")):(await n.ma.stop(),dS(n))}))),n.ma}function Ro(n){return n.fa||(n.fa=(function(t,r,a){const l=He(t);return l.sa(),new g5(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:S5.bind(null,n),r_:R5.bind(null,n),ta:N5.bind(null,n),na:C5.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await bm(n)):(await n.fa.stop(),n.Ta.length>0&&(Te(fl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class G0{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,h=new G0(e,t,c,a,l);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function K0(n,e){if(Ta("AsyncQueue",`${e}: ${n}`),Hc(n))return new we(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class vc{static emptySet(e){return new vc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pe.comparator(t.key,r.key):(t,r)=>Pe.comparator(t.key,r.key),this.keyedMap=qu(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new vc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class RE{constructor(){this.ga=new tn(Pe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Be(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class jc{constructor(e,t,r,a,l,c,h,m,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new jc(e,t,vc.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class j5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class O5{constructor(){this.queries=IE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=He(t),l=a.queries;a.queries=IE(),l.forEach(((c,h)=>{for(const m of h.Sa)m.onError(r)}))})(this,new we(ce.ABORTED,"Firestore shutting down"))}}function IE(){return new xl((n=>kA(n)),dm)}async function Q0(n,e){const t=He(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new j5,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const h=K0(c,`Initialization of query '${lc(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&X0(t)}async function Y0(n,e){const t=He(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function D5(n,e){const t=He(n);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const h of c.Sa)h.Fa(a)&&(r=!0);c.wa=a}}r&&X0(t)}function L5(n,e,t){const r=He(n),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function X0(n){n.Ca.forEach((e=>{e.next()}))}var Py,jE;(jE=Py||(Py={})).Ma="default",jE.Cache="cache";class W0{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new jc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=jc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Py.Cache}}class pS{constructor(e){this.key=e}}class yS{constructor(e){this.key=e}}class k5{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ct(),this.mutatedKeys=ct(),this.eu=MA(e),this.tu=new vc(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new RE,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,_)=>{const E=a.get(v),A=fm(this.query,_)?_:null,S=!!E&&this.mutatedKeys.has(E.key),O=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let R=!1;E&&A?E.data.isEqual(A.data)?S!==O&&(r.track({type:3,doc:A}),R=!0):this.su(E,A)||(r.track({type:2,doc:A}),R=!0,(m&&this.eu(A,m)>0||p&&this.eu(A,p)<0)&&(h=!0)):!E&&A?(r.track({type:0,doc:A}),R=!0):E&&!A&&(r.track({type:1,doc:E}),R=!0,(m||p)&&(h=!0)),R&&(A?(c=c.add(A),l=O?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:c,iu:r,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,_)=>(function(A,S){const O=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{Rt:R})}};return O(A)-O(S)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(r),a=a??!1;const h=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,p=m!==this.Za;return this.Za=m,c.length!==0||p?{snapshot:new jc(this.query,e.tu,l,c,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new RE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ct(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new yS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new pS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ct();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return jc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Z0="SyncEngine";class M5{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class P5{constructor(e){this.key=e,this.hu=!1}}class U5{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new xl((h=>kA(h)),dm),this.Iu=new Map,this.Eu=new Set,this.du=new tn(Pe.comparator),this.Au=new Map,this.Ru=new U0,this.Vu={},this.mu=new Map,this.fu=Ic.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function V5(n,e,t=!0){const r=wS(n);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await vS(r,e,t,!0),a}async function q5(n,e){const t=wS(n);await vS(t,e,!0,!1)}async function vS(n,e,t,r){const a=await a5(n.localStore,Ni(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await B5(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&uS(n.remoteStore,a),h}async function B5(n,e,t,r,a){n.pu=(_,E,A)=>(async function(O,R,U,F){let Q=R.view.ru(U);Q.Cs&&(Q=await wE(O.localStore,R.query,!1).then((({documents:L})=>R.view.ru(L,Q))));const Y=F&&F.targetChanges.get(R.targetId),ie=F&&F.targetMismatches.get(R.targetId)!=null,ve=R.view.applyChanges(Q,O.isPrimaryClient,Y,ie);return DE(O,R.targetId,ve.au),ve.snapshot})(n,_,E,A);const l=await wE(n.localStore,e,!0),c=new k5(e,l.Qs),h=c.ru(l.documents),m=Nh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),p=c.applyChanges(h,n.isPrimaryClient,m);DE(n,t,p.au);const v=new M5(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function z5(n,e,t){const r=He(n),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!dm(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await ky(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&z0(r.remoteStore,a.targetId),Uy(r,a.targetId)})).catch(zc)):(Uy(r,a.targetId),await ky(r.localStore,a.targetId,!0))}async function H5(n,e){const t=He(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),z0(t.remoteStore,r.targetId))}async function F5(n,e,t){const r=W5(n);try{const a=await(function(c,h){const m=He(c),p=zt.now(),v=h.reduce(((A,S)=>A.add(S.key)),ct());let _,E;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let S=Aa(),O=ct();return m.Ns.getEntries(A,v).next((R=>{S=R,S.forEach(((U,F)=>{F.isValidDocument()||(O=O.add(U))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,S))).next((R=>{_=R;const U=[];for(const F of h){const Q=sO(F,_.get(F.key).overlayedDocument);Q!=null&&U.push(new Mo(F.key,Q,SA(Q.value.mapValue),ks.exists(!0)))}return m.mutationQueue.addMutationBatch(A,p,U,h)})).next((R=>{E=R;const U=R.applyToLocalDocumentSet(_,O);return m.documentOverlayCache.saveOverlays(A,R.batchId,U)}))})).then((()=>({batchId:E.batchId,changes:UA(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,h,m){let p=c.Vu[c.currentUser.toKey()];p||(p=new tn(lt)),p=p.insert(h,m),c.Vu[c.currentUser.toKey()]=p})(r,a.batchId,t),await Rh(r,a.changes),await bm(r.remoteStore)}catch(a){const l=K0(a,"Failed to persist write");t.reject(l)}}async function bS(n,e){const t=He(n);try{const r=await r5(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(_t(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?_t(c.hu,14607):a.removedDocuments.size>0&&(_t(c.hu,42227),c.hu=!1))})),await Rh(t,r,e)}catch(r){await zc(r)}}function OE(n,e,t){const r=He(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(c,h){const m=He(c);m.onlineState=h;let p=!1;m.queries.forEach(((v,_)=>{for(const E of _.Sa)E.va(h)&&(p=!0)})),p&&X0(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $5(n,e,t){const r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new tn(Pe.comparator);c=c.insert(l,cr.newNoDocument(l,Fe.min()));const h=ct().add(l),m=new pm(Fe.min(),new Map,new tn(lt),c,h);await bS(r,m),r.du=r.du.remove(l),r.Au.delete(e),J0(r)}else await ky(r.localStore,e,!1).then((()=>Uy(r,e,t))).catch(zc)}async function G5(n,e){const t=He(n),r=e.batch.batchId;try{const a=await n5(t.localStore,e);_S(t,r,null),xS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Rh(t,a)}catch(a){await zc(a)}}async function K5(n,e,t){const r=He(n);try{const a=await(function(c,h){const m=He(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return m.mutationQueue.lookupMutationBatch(p,h).next((_=>(_t(_!==null,37113),v=_.keys(),m.mutationQueue.removeMutationBatch(p,_)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>m.localDocuments.getDocuments(p,v)))}))})(r.localStore,e);_S(r,e,t),xS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Rh(r,a)}catch(a){await zc(a)}}function xS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function _S(n,e,t){const r=He(n);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function Uy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||ES(n,r)}))}function ES(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(z0(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),J0(n))}function DE(n,e,t){for(const r of t)r instanceof pS?(n.Ru.addReference(r.key,e),Q5(n,r)):r instanceof yS?(Te(Z0,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||ES(n,r.key)):Be(19791,{wu:r})}function Q5(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Te(Z0,"New document in limbo: "+t),n.Eu.add(r),J0(n))}function J0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Pe(kt.fromString(e)),r=n.fu.next();n.Au.set(r,new P5(t)),n.du=n.du.insert(t,r),uS(n.remoteStore,new po(Ni(hm(t.path)),r,"TargetPurposeLimboResolution",lm.ce))}}async function Rh(n,e,t){const r=He(n),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,m)=>{c.push(r.pu(m,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){a.push(p);const v=q0.As(m.targetId,p);l.push(v)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(m,p){const v=He(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>fe.forEach(p,(E=>fe.forEach(E.Es,(A=>v.persistence.referenceDelegate.addReference(_,E.targetId,A))).next((()=>fe.forEach(E.ds,(A=>v.persistence.referenceDelegate.removeReference(_,E.targetId,A)))))))))}catch(_){if(!Hc(_))throw _;Te(B0,"Failed to update sequence numbers: "+_)}for(const _ of p){const E=_.targetId;if(!_.fromCache){const A=v.Ms.get(E),S=A.snapshotVersion,O=A.withLastLimboFreeSnapshotVersion(S);v.Ms=v.Ms.insert(E,O)}}})(r.localStore,l))}async function Y5(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){Te(Z0,"User change. New user:",e.toKey());const r=await aS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((m=>{m.reject(new we(ce.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Rh(t,r.Ls)}}function X5(n,e){const t=He(n),r=t.Au.get(e);if(r&&r.hu)return ct().add(r.key);{let a=ct();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const h=t.Tu.get(c);a=a.unionWith(h.view.nu)}return a}}function wS(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$5.bind(null,e),e.Pu.H_=D5.bind(null,e.eventManager),e.Pu.yu=L5.bind(null,e.eventManager),e}function W5(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K5.bind(null,e),e}class $f{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ym(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return t5(this.persistence,new ZO,e.initialUser,this.serializer)}Cu(e){return new iS(V0.mi,this.serializer)}Du(e){return new l5}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$f.provider={build:()=>new $f};class Z5 extends $f{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){_t(this.persistence.referenceDelegate instanceof Hf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new PO(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?qr.withCacheSize(this.cacheSizeBytes):qr.DEFAULT;return new iS((r=>Hf.mi(r,t)),this.serializer)}}class Vy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>OE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Y5.bind(null,this.syncEngine),await I5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new O5})()}createDatastore(e){const t=ym(e.databaseInfo.databaseId),r=(function(l){return new f5(l)})(e.databaseInfo);return(function(l,c,h,m){return new y5(l,c,h,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,h){return new b5(r,a,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>OE(this.syncEngine,t,0)),(function(){return SE.v()?new SE:new c5})())}createSyncEngine(e,t){return(function(a,l,c,h,m,p,v){const _=new U5(a,l,c,h,m,p);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=He(t);Te(fl,"RemoteStore shutting down."),r.Ea.add(5),await Ch(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Vy.provider={build:()=>new Vy};class ev{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ta("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Io="FirestoreClient";class J5{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=lr.UNAUTHENTICATED,this.clientId=S0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{Te(Io,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(Te(Io,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=K0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Yp(n,e){n.asyncQueue.verifyOperationInProgress(),Te(Io,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await aS(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function LE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await eD(n);Te(Io,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>CE(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>CE(e.remoteStore,a))),n._onlineComponents=e}async function eD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(Io,"Using user provided OfflineComponentProvider");try{await Yp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ce.FAILED_PRECONDITION||a.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Tc("Error using user provided cache. Falling back to memory cache: "+t),await Yp(n,new $f)}}else Te(Io,"Using default OfflineComponentProvider"),await Yp(n,new Z5(void 0));return n._offlineComponents}async function tv(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(Io,"Using user provided OnlineComponentProvider"),await LE(n,n._uninitializedComponentsProvider._online)):(Te(Io,"Using default OnlineComponentProvider"),await LE(n,new Vy))),n._onlineComponents}function tD(n){return tv(n).then((e=>e.syncEngine))}function nD(n){return tv(n).then((e=>e.datastore))}async function Gf(n){const e=await tv(n),t=e.eventManager;return t.onListen=V5.bind(null,e.syncEngine),t.onUnlisten=z5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=q5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=H5.bind(null,e.syncEngine),t}function rD(n,e,t={}){const r=new Si;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,m,p){const v=new ev({next:E=>{v.Nu(),c.enqueueAndForget((()=>Y0(l,_)));const A=E.docs.has(h);!A&&E.fromCache?p.reject(new we(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&m&&m.source==="server"?p.reject(new we(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),_=new W0(hm(h.path),v,{includeMetadataChanges:!0,qa:!0});return Q0(l,_)})(await Gf(n),n.asyncQueue,e,t,r))),r.promise}function sD(n,e,t={}){const r=new Si;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,m,p){const v=new ev({next:E=>{v.Nu(),c.enqueueAndForget((()=>Y0(l,_))),E.fromCache&&m.source==="server"?p.reject(new we(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),_=new W0(h,v,{includeMetadataChanges:!0,qa:!0});return Q0(l,_)})(await Gf(n),n.asyncQueue,e,t,r))),r.promise}function iD(n,e,t){const r=new Si;return n.asyncQueue.enqueueAndForget((async()=>{try{const a=await nD(n);r.resolve((async function(c,h,m){const p=He(c),{request:v,gt:_,parent:E}=TO(p.serializer,F6(h),m);p.connection.$o||delete v.parent;const A=(await p.Ho("RunAggregationQuery",p.serializer.databaseId,E,v,1)).filter((O=>!!O.result));_t(A.length===1,64727);const S=A[0].result?.aggregateFields;return Object.keys(S).reduce(((O,R)=>(O[_[R]]=S[R],O)),{})})(a,e,t))}catch(a){r.reject(a)}})),r.promise}function TS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const kE=new Map;const AS="firestore.googleapis.com",ME=!0;class PE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AS,this.ssl=ME}else this.host=e.host,this.ssl=e.ssl??ME;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kO)throw new we(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xm{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new a6;switch(r.type){case"firstParty":return new u6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=kE.get(t);r&&(Te("ComponentProvider","Removing Datastore"),kE.delete(t),r.terminate())})(this),Promise.resolve()}}function aD(n,e,t,r={}){n=Tr(n,xm);const a=Uc(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&(bT(`https://${h}`),xT("Firestore",!0)),l.host!==AS&&l.host!==h&&Tc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:h,ssl:a,emulatorOptions:r};if(!_a(m,c)&&(n._setSettings(m),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=lr.MOCK_USER;else{p=g4(r.mockUserToken,n._app?.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new we(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new lr(_)}n._authCredentials=new o6(new mA(p,v))}}class Ia{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ia(this.firestore,e,this._query)}}class cn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}toJSON(){return{type:cn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ah(t,cn._jsonSchema))return new cn(e,r||null,new Pe(kt.fromString(t.referencePath)))}}cn._jsonSchemaVersion="firestore/documentReference/1.0",cn._jsonSchema={type:Tn("string",cn._jsonSchemaVersion),referencePath:Tn("string")};class Eo extends Ia{constructor(e,t,r){super(e,t,hm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new Pe(e))}withConverter(e){return new Eo(this.firestore,e,this._path)}}function ut(n,e,...t){if(n=An(n),gA("collection","path",e),n instanceof xm){const r=kt.fromString(e,...t);return X_(r),new Eo(n,null,r)}{if(!(n instanceof cn||n instanceof Eo))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return X_(r),new Eo(n.firestore,null,r)}}function $e(n,e,...t){if(n=An(n),arguments.length===1&&(e=S0.newId()),gA("doc","path",e),n instanceof xm){const r=kt.fromString(e,...t);return Y_(r),new cn(n,null,new Pe(r))}{if(!(n instanceof cn||n instanceof Eo))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return Y_(r),new cn(n.firestore,n instanceof Eo?n.converter:null,new Pe(r))}}const UE="AsyncQueue";class VE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lS(this,"async_queue_retry"),this._c=()=>{const r=Qp();r&&Te(UE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Qp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Qp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Si;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hc(e))throw e;Te(UE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ta("INTERNAL UNHANDLED ERROR: ",qE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=G0.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Be(47125,{Pc:qE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function qE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function BE(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Di extends xm{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new VE,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new VE(e),this._firestoreClient=void 0,await e}}}function oD(n,e){const t=typeof n=="object"?n:TT(),r=typeof n=="string"?n:Pf,a=m0(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=f4("firestore");l&&aD(a,...l)}return a}function Ih(n){if(n._terminated)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||lD(n),n._firestoreClient}function lD(n){const e=n._freezeSettings(),t=(function(a,l,c,h){return new R6(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,TS(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new J5(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}class cD{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class uD{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Os{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Os(Zn.fromBase64String(e))}catch(t){throw new we(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Os(Zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Os._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ah(e,Os._jsonSchema))return Os.fromBase64String(e.bytes)}}Os._jsonSchemaVersion="firestore/bytes/1.0",Os._jsonSchema={type:Tn("string",Os._jsonSchemaVersion),bytes:Tn("string")};class _m{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gc{constructor(e){this._methodName=e}}class Ri{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ri._jsonSchemaVersion}}static fromJSON(e){if(Ah(e,Ri._jsonSchema))return new Ri(e.latitude,e.longitude)}}Ri._jsonSchemaVersion="firestore/geoPoint/1.0",Ri._jsonSchema={type:Tn("string",Ri._jsonSchemaVersion),latitude:Tn("number"),longitude:Tn("number")};class Ii{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ii._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ah(e,Ii._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ii(e.vectorValues);throw new we(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ii._jsonSchemaVersion="firestore/vectorValue/1.0",Ii._jsonSchema={type:Tn("string",Ii._jsonSchemaVersion),vectorValues:Tn("object")};const hD=/^__.*__$/;class dD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Mo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sh(e,this.data,t,this.fieldTransforms)}}class SS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Mo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ac:n})}}class Em{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Em({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Kf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(NS(this.Ac)&&hD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class fD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ym(e)}Cc(e,t,r,a=!1){return new Em({Ac:e,methodName:t,Dc:r,path:Yn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wm(n){const e=n._freezeSettings(),t=ym(n._databaseId);return new fD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CS(n,e,t,r,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);iv("Data must be an object, but it was:",c,r);const h=IS(r,c);let m,p;if(l.merge)m=new as(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const _ of l.mergeFields){const E=qy(e,_,t);if(!c.contains(E))throw new we(ce.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);OS(v,E)||v.push(E)}m=new as(v),p=c.fieldTransforms.filter((_=>m.covers(_.field)))}else m=null,p=c.fieldTransforms;return new dD(new Br(h),m,p)}class Tm extends Gc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tm}}function RS(n,e,t){return new Em({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class nv extends Gc{_toFieldTransform(e){return new D0(e.path,new lh)}isEqual(e){return e instanceof nv}}class rv extends Gc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=RS(this,e,!0),r=this.vc.map((l=>El(l,t))),a=new Cc(r);return new D0(e.path,a)}isEqual(e){return e instanceof rv&&_a(this.vc,e.vc)}}class sv extends Gc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=RS(this,e,!0),r=this.vc.map((l=>El(l,t))),a=new Rc(r);return new D0(e.path,a)}isEqual(e){return e instanceof sv&&_a(this.vc,e.vc)}}function mD(n,e,t,r){const a=n.Cc(1,e,t);iv("Data must be an object, but it was:",a,r);const l=[],c=Br.empty();ko(r,((m,p)=>{const v=av(e,m,t);p=An(p);const _=a.yc(v);if(p instanceof Tm)l.push(v);else{const E=El(p,_);E!=null&&(l.push(v),c.set(v,E))}}));const h=new as(l);return new SS(c,h,a.fieldTransforms)}function gD(n,e,t,r,a,l){const c=n.Cc(1,e,t),h=[qy(e,r,t)],m=[a];if(l.length%2!=0)throw new we(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)h.push(qy(e,l[E])),m.push(l[E+1]);const p=[],v=Br.empty();for(let E=h.length-1;E>=0;--E)if(!OS(p,h[E])){const A=h[E];let S=m[E];S=An(S);const O=c.yc(A);if(S instanceof Tm)p.push(A);else{const R=El(S,O);R!=null&&(p.push(A),v.set(A,R))}}const _=new as(p);return new SS(v,_,c.fieldTransforms)}function pD(n,e,t,r=!1){return El(t,n.Cc(r?4:3,e))}function El(n,e){if(jS(n=An(n)))return iv("Unsupported field value:",e,n),IS(n,e);if(n instanceof Gc)return(function(r,a){if(!NS(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const h of r){let m=El(h,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,a){if((r=An(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Z6(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=zt.fromDate(r);return{timestampValue:zf(a.serializer,l)}}if(r instanceof zt){const l=new zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zf(a.serializer,l)}}if(r instanceof Ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Os)return{bytesValue:XA(a.serializer,r._byteString)};if(r instanceof cn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:P0(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Ii)return(function(c,h){return{mapValue:{fields:{[TA]:{stringValue:AA},[Uf]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return O0(h.serializer,p)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${om(r)}`)})(n,e)}function IS(n,e){const t={};return vA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(n,((r,a)=>{const l=El(a,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function jS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof zt||n instanceof Ri||n instanceof Os||n instanceof cn||n instanceof Gc||n instanceof Ii)}function iv(n,e,t){if(!jS(t)||!pA(t)){const r=om(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function qy(n,e,t){if((e=An(e))instanceof _m)return e._internalPath;if(typeof e=="string")return av(n,e);throw Kf("Field path arguments must be of type string or ",n,!1,void 0,t)}const yD=new RegExp("[~\\*/\\[\\]]");function av(n,e,t){if(e.search(yD)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _m(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kf(n,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new we(ce.INVALID_ARGUMENT,h+n+m)}function OS(n,e){return n.some((t=>t.isEqual(e)))}class DS{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Am("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class vD extends DS{data(){return super.data()}}function Am(n,e){return typeof e=="string"?av(n,e):e instanceof _m?e._internalPath:e._delegate._internalPath}function LS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ov{}class lv extends ov{}function Xn(n,e,...t){let r=[];e instanceof ov&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((m=>m instanceof cv)).length,h=l.filter((m=>m instanceof Sm)).length;if(c>1||c>0&&h>0)throw new we(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class Sm extends lv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Sm(e,t,r)}_apply(e){const t=this._parse(e);return MS(e._query,t),new Ia(e.firestore,e.converter,Iy(e._query,t))}_parse(e){const t=wm(e.firestore);return(function(l,c,h,m,p,v,_){let E;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new we(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){HE(_,v);const S=[];for(const O of _)S.push(zE(m,l,O));E={arrayValue:{values:S}}}else E=zE(m,l,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||HE(_,v),E=pD(h,c,_,v==="in"||v==="not-in");return wn.create(p,v,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function kS(n,e,t){const r=e,a=Am("where",n);return Sm._create(a,r,t)}class cv extends ov{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const h=l.getFlattenedFilters();for(const m of h)MS(c,m),c=Iy(c,m)})(e._query,t),new Ia(e.firestore,e.converter,Iy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class uv extends lv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new uv(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oh(l,c)})(e._query,this._field,this._direction);return new Ia(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new Fc(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function us(n,e="asc"){const t=e,r=Am("orderBy",n);return uv._create(r,t)}class hv extends lv{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new hv(e,t,r)}_apply(e){return new Ia(e.firestore,e.converter,qf(e._query,this._limit,this._limitType))}}function Tf(n){return y6("limit",n),hv._create("limit",n,"F")}function zE(n,e,t){if(typeof(t=An(t))=="string"){if(t==="")throw new we(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DA(e)&&t.indexOf("/")!==-1)throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(kt.fromString(t));if(!Pe.isDocumentKey(r))throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sE(n,new Pe(r))}if(t instanceof cn)return sE(n,t._key);throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${om(t)}.`)}function HE(n,e){if(!Array.isArray(n)||n.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MS(n,e){const t=(function(a,l){for(const c of a)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class bD{convertValue(e,t="none"){switch(Co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(No(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ko(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[Uf].arrayValue?.values?.map((r=>pn(r.doubleValue)));return new Ii(t)}convertGeoPoint(e){return new Ri(pn(e.latitude),pn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=um(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sh(e));default:return null}}convertTimestamp(e){const t=So(e);return new zt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=kt.fromString(e);_t(rS(r),9688,{name:e});const a=new ih(r.get(1),r.get(3)),l=new Pe(r.popFirst(5));return a.isEqual(t)||Ta(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function PS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}function xD(){return new cD("count")}class zu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ol extends DS{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Am("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ol._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ol._jsonSchemaVersion="firestore/documentSnapshot/1.0",ol._jsonSchema={type:Tn("string",ol._jsonSchemaVersion),bundleSource:Tn("string","DocumentSnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class Af extends ol{data(e={}){return super.data(e)}}class ll{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new zu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Af(this._firestore,this._userDataWriter,r.key,r,new zu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((h=>{const m=new Af(a._firestore,a._userDataWriter,h.doc.key,h.doc,new zu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const m=new Af(a._firestore,a._userDataWriter,h.doc.key,h.doc,new zu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,v=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:_D(h.type),doc:m,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ll._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=S0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _D(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:n})}}function fr(n){n=Tr(n,cn);const e=Tr(n.firestore,Di);return rD(Ih(e),n._key).then((t=>US(e,n,t)))}ll._jsonSchemaVersion="firestore/querySnapshot/1.0",ll._jsonSchema={type:Tn("string",ll._jsonSchemaVersion),bundleSource:Tn("string","QuerySnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class Nm extends bD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Os(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,t)}}function en(n){n=Tr(n,Ia);const e=Tr(n.firestore,Di),t=Ih(e),r=new Nm(e);return LS(n._query),sD(t,n._query).then((a=>new ll(e,r,n,a)))}function Oc(n,e,t){n=Tr(n,cn);const r=Tr(n.firestore,Di),a=PS(n.converter,e,t);return Cm(r,[CS(wm(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,ks.none())])}function hr(n,e,t,...r){n=Tr(n,cn);const a=Tr(n.firestore,Di),l=wm(a);let c;return c=typeof(e=An(e))=="string"||e instanceof _m?gD(l,"updateDoc",n._key,e,t,r):mD(l,"updateDoc",n._key,e),Cm(a,[c.toMutation(n._key,ks.exists(!0))])}function jh(n){return Cm(Tr(n.firestore,Di),[new L0(n._key,ks.none())])}function wl(n,e){const t=Tr(n.firestore,Di),r=$e(n),a=PS(n.converter,e);return Cm(t,[CS(wm(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,ks.exists(!1))]).then((()=>r))}function Qf(n,...e){n=An(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||BE(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(BE(e[r])){const m=e[r];e[r]=m.next?.bind(m),e[r+1]=m.error?.bind(m),e[r+2]=m.complete?.bind(m)}let l,c,h;if(n instanceof cn)c=Tr(n.firestore,Di),h=hm(n._key.path),l={next:m=>{e[r]&&e[r](US(c,n,m))},error:e[r+1],complete:e[r+2]};else{const m=Tr(n,Ia);c=Tr(m.firestore,Di),h=m._query;const p=new Nm(c);l={next:v=>{e[r]&&e[r](new ll(c,p,m,v))},error:e[r+1],complete:e[r+2]},LS(n._query)}return(function(p,v,_,E){const A=new ev(E),S=new W0(v,A,_);return p.asyncQueue.enqueueAndForget((async()=>Q0(await Gf(p),S))),()=>{A.Nu(),p.asyncQueue.enqueueAndForget((async()=>Y0(await Gf(p),S)))}})(Ih(c),h,a,l)}function Cm(n,e){return(function(r,a){const l=new Si;return r.asyncQueue.enqueueAndForget((async()=>F5(await tD(r),a,l))),l.promise})(Ih(n),e)}function US(n,e,t){const r=t.docs.get(e._key),a=new Nm(n);return new ol(n,a,e._key,r,new zu(t.hasPendingWrites,t.fromCache),e.converter)}function ef(n){return ED(n,{count:xD()})}function ED(n,e){const t=Tr(n.firestore,Di),r=Ih(t),a=N6(e,((l,c)=>new lO(c,l.aggregateType,l._internalFieldPath)));return iD(r,n._query,a).then((l=>(function(h,m,p){const v=new Nm(h);return new uD(m,v,p)})(t,n,l)))}function ml(){return new nv("serverTimestamp")}function ch(...n){return new rv("arrayUnion",n)}function al(...n){return new sv("arrayRemove",n)}(function(e,t=!0){(function(a){Bc=a})(Vc),Ec(new cl("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),h=new Di(new l6(r.getProvider("auth-internal")),new h6(c,r.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new we(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ih(p.options.projectId,v)})(c,a),c);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),xo($_,G_,e),xo($_,G_,"esm2020")})();const wD={apiKey:"AIzaSyB3nTJlyM3K-XpvEUrXyk3leiVeMxzkTiU",authDomain:"forexvolcano-21180.firebaseapp.com",projectId:"forexvolcano-21180",storageBucket:"forexvolcano-21180.firebasestorage.app",messagingSenderId:"264687169302",appId:"1:264687169302:web:83322d7adc303b1f0c2a37",measurementId:"G-XTB0D1TPS6"},VS=wT(wD),Le=s6(VS),Ee=oD(VS),TD=()=>{const[n,e]=P.useState(null),[t,r]=P.useState(!1),a=ki();P.useEffect(()=>{const c=wh(Le,async h=>{if(e(h),h)try{const m=await fr($e(Ee,"users",h.uid));m.exists()&&m.data().role==="admin"?r(!0):r(!1)}catch(m){console.error("Error checking admin role:",m),r(!1)}else r(!1)});return()=>c()},[]);const l=async()=>{try{await Q3(Le),a("/")}catch(c){console.error("Error logging out",c)}};return f.jsx("nav",{className:"bg-surface border-b border-gray-800 sticky top-0 z-50",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex items-center justify-between h-16",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(ze,{to:"/",className:"flex-shrink-0",children:f.jsxs("span",{className:"text-secondary text-2xl font-bold tracking-tighter",children:["Forex",f.jsx("span",{className:"text-accent",children:"Volcano"})]})}),f.jsx("div",{className:"hidden md:block",children:f.jsxs("div",{className:"ml-10 flex items-baseline space-x-4",children:[f.jsx(ze,{to:"/analysis",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Analysis"}),f.jsx(ze,{to:"/academy",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Academy"}),f.jsx(ze,{to:"/news",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"News"})]})})]}),f.jsx("div",{className:"hidden md:block",children:f.jsx("div",{className:"ml-4 flex items-center md:ml-6",children:n?f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(ze,{to:"/community",className:"text-secondary hover:text-green-400 font-medium px-3 py-2",children:"Community"}),f.jsx(ze,{to:"/dashboard",className:"text-primary hover:text-green-400 font-medium px-3 py-2",children:"Dashboard"}),t&&f.jsx(ze,{to:"/admin",className:"text-accent hover:text-orange-400 font-medium px-3 py-2",children:"Admin Panel"}),f.jsx("button",{onClick:l,className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-md text-sm font-medium",children:"Logout"})]}):f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(ze,{to:"/login",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Login"}),f.jsx(ze,{to:"/register",className:"bg-primary hover:bg-green-600 text-white px-3 py-2 rounded-md text-sm font-medium",children:"Get Started"})]})})}),f.jsx("div",{className:"-mr-2 flex md:hidden",children:f.jsxs("button",{type:"button",className:"bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none","aria-controls":"mobile-menu","aria-expanded":"false",children:[f.jsx("span",{className:"sr-only",children:"Open main menu"}),f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})})})},AD=()=>f.jsx("footer",{className:"bg-[#05080f] border-t border-gray-800/50 py-12",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[f.jsxs("div",{className:"mb-6 md:mb-0 text-center md:text-left",children:[f.jsxs(ze,{to:"/",className:"text-2xl font-bold tracking-tighter text-secondary",children:["Forex",f.jsx("span",{className:"text-accent",children:"Volcano"})]}),f.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[" ",new Date().getFullYear()," ForexVolcano. All rights reserved."]})]}),f.jsxs("div",{className:"flex space-x-8",children:[f.jsx(ze,{to:"/analysis",className:"text-gray-400 hover:text-white transition-colors",children:"Analysis"}),f.jsx(ze,{to:"/news",className:"text-gray-400 hover:text-white transition-colors",children:"News"}),f.jsx(ze,{to:"/login",className:"text-gray-400 hover:text-white transition-colors",children:"Login"})]})]})})}),FE={primary:"bg-primary hover:bg-green-500 text-white shadow-lg shadow-green-900/20",secondary:"bg-secondary hover:bg-red-500 text-white shadow-lg shadow-red-900/20",accent:"bg-accent hover:bg-orange-500 text-white shadow-lg shadow-orange-900/20",outline:"border-2 border-slate-700 hover:border-slate-500 text-slate-300 hover:text-white bg-transparent",ghost:"text-slate-400 hover:text-white hover:bg-white/5"},$E={sm:"px-3 py-1.5 text-sm",md:"px-6 py-3 text-base font-semibold",lg:"px-8 py-4 text-lg font-bold"},yt=({children:n,variant:e="primary",size:t="md",to:r=null,onClick:a,className:l="",...c})=>{const h="inline-flex items-center justify-center rounded-lg transition-all duration-300 transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0a0e17] focus:ring-slate-400",m=FE[e]||FE.primary,p=$E[t]||$E.md,v=`${h} ${m} ${p} ${l}`;return r?f.jsx(ze,{to:r,className:v,...c,children:n}):f.jsx("button",{onClick:a,className:v,...c,children:n})},SD=()=>{const[n,e]=P.useState([]),[t,r]=P.useState([]),[a,l]=P.useState([]),[c,h]=P.useState(!0);P.useEffect(()=>{(async()=>{try{const _=Xn(ut(Ee,"analysis"),us("createdAt","desc"),Tf(3)),E=await en(_);e(E.docs.map(U=>({id:U.id,...U.data()})));const A=Xn(ut(Ee,"news"),us("date","desc"),Tf(3)),S=await en(A);r(S.docs.map(U=>({id:U.id,...U.data()})));const O=Xn(ut(Ee,"courses"),Tf(3)),R=await en(O);l(R.docs.map(U=>({id:U.id,...U.data()})))}catch(_){console.error("Error fetching home data:",_)}finally{h(!1)}})()},[]);const m=()=>f.jsxs("div",{className:"relative bg-background overflow-hidden",children:[f.jsxs("div",{className:"absolute inset-0",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-background via-background/95 to-background/50 z-10"}),f.jsx("img",{src:"https://images.unsplash.com/photo-1611974765270-ca12586343bb?q=80&w=2070&auto=format&fit=crop",alt:"Trading Chart",className:"w-full h-full object-cover opacity-20"})]}),f.jsx("div",{className:"relative z-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 md:py-32",children:f.jsxs("div",{className:"max-w-3xl animate-fade-in-up",children:[f.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white tracking-tight mb-6",children:["Master the Markets with ",f.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary",children:"ForexVolcano"})]}),f.jsx("p",{className:"text-xl text-gray-400 mb-10 leading-relaxed max-w-2xl",children:"Your all-in-one platform for professional market analysis, breaking news, and comprehensive trading education. Join thousands of traders leveling up their game."}),f.jsxs("div",{className:"flex flex-wrap gap-4",children:[f.jsx(ze,{to:"/register",children:f.jsx(yt,{size:"lg",className:"px-8 text-lg",children:"Start Trading Now"})}),f.jsx(ze,{to:"/analysis",children:f.jsx(yt,{variant:"outline",size:"lg",className:"px-8 text-lg",children:"Read Analysis"})})]})]})})]}),p=({title:v,link:_,linkText:E})=>f.jsxs("div",{className:"flex justify-between items-end mb-8",children:[f.jsx("h2",{className:"text-3xl font-bold text-white border-l-4 border-primary pl-4",children:v}),f.jsxs(ze,{to:_,className:"text-primary hover:text-green-400 font-medium flex items-center gap-1 transition-colors",children:[E,f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]});return c?f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:"Loading Market Data..."}):f.jsxs("div",{className:"flex flex-col min-h-screen bg-background",children:[f.jsx(m,{}),f.jsxs("section",{className:"py-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full",children:[f.jsx(p,{title:"Latest Market Analysis",link:"/analysis",linkText:"View All Analysis"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:n.map(v=>f.jsx(ze,{to:`/analysis/${v.id}`,className:"group block h-full",children:f.jsxs("div",{className:"bg-surface rounded-xl overflow-hidden border border-gray-800 h-full hover:border-primary/50 transition-all duration-300 shadow-lg hover:shadow-primary/10",children:[f.jsxs("div",{className:"h-48 overflow-hidden relative",children:[f.jsx("img",{src:v.imageUrl,alt:v.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),f.jsx("div",{className:"absolute top-4 left-4",children:f.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold text-white ${v.type==="Technical"?"bg-blue-600":"bg-purple-600"}`,children:v.type})})]}),f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-3",children:[f.jsx("span",{className:"text-xs font-bold text-primary px-2 py-1 bg-primary/10 rounded",children:v.pair}),f.jsx("span",{className:"text-xs text-gray-500",children:v.createdAt?.seconds?new Date(v.createdAt.seconds*1e3).toLocaleDateString():"Just now"})]}),f.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-primary transition-colors line-clamp-2",children:v.title}),f.jsxs("p",{className:"text-gray-400 text-sm line-clamp-3",children:[v.content?.substring(0,100),"..."]})]})]})},v.id))})]}),f.jsx("section",{className:"py-16 bg-surface/50 w-full border-y border-gray-800",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx(p,{title:"Breaking Market News",link:"/news",linkText:"Read All News"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map(v=>f.jsx(ze,{to:`/news/${v.id}`,className:"block group",children:f.jsxs("div",{className:"bg-background rounded-xl p-6 border border-gray-800 hover:border-gray-600 transition-colors h-full flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${v.impact==="High"?"bg-red-500/20 text-red-500":v.impact==="Medium"?"bg-yellow-500/20 text-yellow-500":"bg-green-500/20 text-green-500"}`,children:[v.impact," Impact"]}),f.jsx("span",{className:"text-xs text-gray-500",children:new Date(v.date).toLocaleDateString()})]}),f.jsx("h3",{className:"text-lg font-bold text-white mb-2 group-hover:text-primary transition-colors",children:v.title}),f.jsx("div",{className:"flex gap-2 mt-auto pt-4",children:v.currencies?.map(_=>f.jsx("span",{className:"text-xs text-gray-400 bg-gray-800 px-2 py-1 rounded",children:_},_))})]})},v.id))})]})}),f.jsx("section",{className:"py-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Level Up Your Trading Skills"}),f.jsx("p",{className:"text-gray-400 text-lg mb-8",children:"Join our comprehensive academy with courses designed for every level. From interpreting candlestick patterns to mastering complex strategies."}),f.jsx("div",{className:"space-y-4 mb-8",children:a.slice(0,2).map(v=>f.jsxs("div",{className:"flex items-center gap-4 bg-surface p-4 rounded-xl border border-gray-800",children:[f.jsx("div",{className:"h-16 w-24 rounded-lg overflow-hidden flex-shrink-0",children:f.jsx("img",{src:v.image,alt:v.title,className:"w-full h-full object-cover"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-white",children:v.title}),f.jsxs("p",{className:"text-sm text-gray-500",children:[v.lessons?.length||0," Lessons  ",v.level||"All Levels"]})]})]},v.id))}),f.jsx(ze,{to:"/academy",children:f.jsx(yt,{variant:"secondary",children:"Start Learning Free"})})]}),f.jsxs("div",{className:"relative h-full min-h-[400px] bg-gradient-to-br from-gray-900 to-black rounded-2xl border border-gray-800 p-8 flex flex-col justify-center items-center text-center overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"}),f.jsxs("div",{className:"relative z-10",children:[f.jsx("h3",{className:"text-3xl font-bold text-white mb-4",children:"Join the Community"}),f.jsx("p",{className:"text-gray-400 mb-8 max-w-md mx-auto",children:"Connect with other traders, share your charts, and get real-time feedback. The journey is better together."}),f.jsx(ze,{to:"/community",children:f.jsx(yt,{size:"lg",className:"w-full sm:w-auto px-10 shadow-lg shadow-primary/25 animate-pulse",children:"Join Discussion"})})]})]})]})})]})},qS=({title:n,subtitle:e,image:t,content:r,footer:a,badges:l=[],className:c=""})=>f.jsxs("div",{className:`group relative flex flex-col overflow-hidden rounded-2xl bg-surface border border-gray-800 transition-all duration-300 hover:border-gray-700 hover:shadow-2xl hover:shadow-primary/5 ${c}`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent opacity-0 transition-opacity duration-500 group-hover:opacity-100 pointer-events-none"}),t&&f.jsxs("div",{className:"relative h-48 w-full overflow-hidden bg-gray-900",children:[f.jsx("img",{src:t,alt:n,className:"h-full w-full object-cover transition-transform duration-700 group-hover:scale-105",onError:h=>{h.target.style.display="none",h.target.parentElement.classList.add("flex","items-center","justify-center","bg-gray-800"),h.target.parentElement.innerHTML='<span class="text-4xl"></span>'}}),l.length>0&&f.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2",children:l.map((h,m)=>f.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded uppercase tracking-wider ${h.color||"bg-gray-800 text-white"}`,children:h.text},m))})]}),f.jsxs("div",{className:"flex flex-1 flex-col p-6 z-10",children:[e&&f.jsx("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-400",children:e}),f.jsx("h3",{className:"mb-3 text-xl font-bold text-white group-hover:text-primary transition-colors",children:n}),f.jsx("p",{className:"flex-1 text-gray-400 line-clamp-3 mb-6",children:r}),a&&f.jsx("div",{className:"mt-auto border-t border-gray-800 pt-4",children:a})]})]}),GE=[{id:"1",pair:"EUR/USD",direction:"Bearish",title:"EUR/USD Forming Head and Shoulders on 4H",content:"Price has failed to break the 1.0900 resistance level multiple times. We are observing a clear H&S pattern formation. If the neckline at 1.0820 breaks, we expect a sharp decline towards the 1.0750 liquidity zone.",author:"Volcano Chief",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=1000&auto=format&fit=crop"},{id:"2",pair:"XAU/USD",direction:"Bullish",title:"Gold Preparing for Eruption Above 2050",content:"Geopolitical tensions and a weakening dollar suggest Gold is accumulating for a massive leg up. Watch for a retest of 2035 as a potential entry point for long positions targeting new highs.",author:"Analyst Sarah",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1000&auto=format&fit=crop"},{id:"3",pair:"GBP/JPY",direction:"Bullish",title:"The Dragon is Waking Up",content:"GJ is respecting the ascending trendline perfectly. The recent pullback to 182.00 was rejected strongly. We are looking for continuation towards 185.00 level.",author:"Volcano Chief",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1526304640151-b59310398691?q=80&w=1000&auto=format&fit=crop"}],ND=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0),[a,l]=P.useState("All");P.useEffect(()=>{(async()=>{try{const v=Xn(ut(Ee,"analysis"),us("timestamp","desc"));let E=(await en(v)).docs.map(A=>({id:A.id,...A.data()}));if(Le.currentUser){const A=await fr($e(Ee,"users",Le.currentUser.uid));if(A.exists()){const S=A.data().preferences;S&&S.analysisCurrencies&&S.analysisCurrencies.length>0&&(E=E.filter(O=>S.analysisCurrencies.includes(O.pair)))}}E.length>0?e(E):Le.currentUser?e([]):e(GE)}catch(v){console.error("Error fetching analysis:",v),e(GE)}finally{r(!1)}})()},[]);const c=a==="All"?n:n.filter(p=>p.pair===a),h=["All",...new Set(n.map(p=>p.pair))],m=p=>{if(!p)return"";const v=p.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),_=document.createElement("DIV");return _.innerHTML=v,(_.textContent||_.innerText||"").trim()};return f.jsx("div",{className:"bg-background min-h-screen py-12",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsxs("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl tracking-tight",children:["Market ",f.jsx("span",{className:"text-primary",children:"Analysis"})]}),f.jsx("p",{className:"mt-4 text-xl text-gray-400",children:"Daily technical breakdowns and trade setups from our experts."})]}),f.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-12",children:h.map(p=>f.jsx("button",{onClick:()=>l(p),className:`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-200 ${a===p?"bg-primary text-white shadow-lg shadow-primary/25":"bg-surface text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:p},p))}),t?f.jsx("div",{className:"text-center text-white py-20",children:"Loading Volcano Data..."}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:c.map(p=>{const v=p.direction==="Bullish"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary";return f.jsx(ze,{to:`/analysis/${p.id}`,className:"block group",children:f.jsx(qS,{title:p.title,image:p.image||p.chart_image_url,content:m(p.content),subtitle:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-gray-500 text-xs",children:p.timestamp?.seconds?new Date(p.timestamp.seconds*1e3).toLocaleDateString():p.timestamp||new Date().toLocaleDateString()}),f.jsx("span",{className:"text-gray-600",children:""}),f.jsxs("span",{className:"text-gray-500 text-xs text-accent",children:["By ",p.analystName||p.author||"Admin"]})]}),badges:[{text:p.pair,color:"bg-surface border border-gray-700 text-white"},{text:p.direction,color:v}],footer:f.jsxs(yt,{variant:"ghost",size:"sm",className:"w-full justify-between group-hover:text-white",children:["Read Full Breakdown",f.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})},p.id)})})]})})},CD=()=>{const{id:n}=Pc(),e=ki(),[t,r]=P.useState(null),[a,l]=P.useState(!0);if(P.useEffect(()=>{(async()=>{try{const p=$e(Ee,"analysis",n),v=await fr(p);v.exists()?r({id:v.id,...v.data()}):(console.log("No such document!"),e("/analysis"))}catch(p){console.error("Error fetching analysis detail:",p)}finally{l(!1)}})()},[n,e]),a)return f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:"Loading..."});if(!t)return null;const c=t.timestamp?.seconds?new Date(t.timestamp.seconds*1e3).toLocaleDateString():t.timestamp||new Date().toLocaleDateString(),h=t.direction==="Bullish"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary";return f.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx(yt,{variant:"ghost",onClick:()=>e("/analysis"),className:"mb-6 text-gray-400 hover:text-white",children:" Back to Analysis"}),f.jsxs("article",{className:"bg-surface rounded-2xl overflow-hidden border border-gray-800 shadow-2xl",children:[(t.image||t.chart_image_url)&&f.jsxs("div",{className:"w-full h-64 sm:h-96 relative",children:[f.jsx("img",{src:t.image||t.chart_image_url,alt:t.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent"})]}),f.jsxs("div",{className:"p-8 sm:p-12",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[f.jsx("span",{className:"text-gray-400 text-sm",children:c}),f.jsx("span",{className:"text-gray-600",children:""}),f.jsx("span",{className:"text-accent text-sm uppercase tracking-wider font-bold",children:t.analysisType||"Technical Analysis"})]}),f.jsxs("div",{className:"flex gap-3 mb-6",children:[f.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide bg-surface border border-gray-700 text-white",children:t.pair}),f.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${h}`,children:t.direction})]}),f.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-white mb-8 leading-tight",children:t.title}),f.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300 mb-16",dangerouslySetInnerHTML:{__html:t.content}}),(t.analystName||t.analystBio)&&f.jsxs("div",{className:"border-t border-gray-800 pt-12 mt-12 mb-8",children:[f.jsx("h3",{className:"text-2xl font-bold text-white mb-8",children:"Meet Your Analyst"}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-8 bg-black/20 p-8 rounded-2xl border border-gray-800/50",children:[f.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 shrink-0 rounded-full overflow-hidden ring-4 ring-primary/20",children:f.jsx("img",{src:t.analystImage||"https://images.unsplash.com/photo-1633332755192-727a05c4013d?w=400&auto=format&fit=crop&q=60",alt:t.analystName||"Analyst",className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"text-center sm:text-left",children:[f.jsx("h4",{className:"text-xl font-bold text-white mb-2",children:t.analystName||"Volcano Analyst"}),f.jsx("p",{className:"text-gray-400 leading-relaxed mb-4 whitespace-pre-wrap",children:t.analystBio||"Professional market analyst at Forex Volcano."}),f.jsxs("div",{className:"flex gap-4",children:[t.twitter&&f.jsx("a",{href:t.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),t.linkedin&&f.jsx("a",{href:t.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z",clipRule:"evenodd"})})}),t.telegram&&f.jsx("a",{href:t.telegram,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]})]})]})]})]})]})]})})},KE=[{id:"1",title:"NFP Smashes Expectations: 350k Jobs Added",impact:"High",affectedCurrencies:["USD","XAU","JPY"],content:"The Non-Farm Payrolls report showed a surprise surge in job creation, sending the Dollar Index (DXY) rocketing past 104.50. Traders should watch for pullbacks on Gold.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=1000&auto=format&fit=crop"},{id:"2",title:"ECB Signals Rate Cuts in June",impact:"Medium",affectedCurrencies:["EUR","GBP"],content:"Lagarde hinted that inflation is under control, opening the door for a 25bps cut. Euro is showing weakness against the Pound.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1526304640151-b59310398691?q=80&w=1000&auto=format&fit=crop"},{id:"3",title:"BoJ Maintains Ultra-Loose Policy",impact:"Low",affectedCurrencies:["JPY"],content:"No surprises from the Bank of Japan. Yield Curve Control remains in place. USD/JPY is drifting sideways in a tight range.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1000&auto=format&fit=crop"}],RD={High:"bg-red-500/20 text-red-500 border border-red-500/50",Medium:"bg-orange-500/20 text-orange-500 border border-orange-500/50",Low:"bg-yellow-500/20 text-yellow-500 border border-yellow-500/50"},ID=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0),a=l=>{if(!l)return"";const c=l.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),h=document.createElement("DIV");return h.innerHTML=c,(h.textContent||h.innerText||"").trim()};return P.useEffect(()=>{(async()=>{try{const c=Xn(ut(Ee,"news"),us("timestamp","desc"));let m=(await en(c)).docs.map(p=>({id:p.id,...p.data()}));if(Le.currentUser){const p=await fr($e(Ee,"users",Le.currentUser.uid));if(p.exists()){const v=p.data().preferences;v&&v.newsImpacts&&v.newsImpacts.length>0&&(m=m.filter(_=>v.newsImpacts.includes(_.impact)))}}m.length>0?e(m):Le.currentUser?e([]):e(KE)}catch(c){console.error("Error fetching news:",c),e(KE)}finally{r(!1)}})()},[]),f.jsx("div",{className:"bg-background min-h-screen py-12",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsxs("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl tracking-tight",children:["Market ",f.jsx("span",{className:"text-accent",children:"News"})]}),f.jsx("p",{className:"mt-4 text-xl text-gray-400",children:"Stay ahead of the volatility with real-time economic updates."})]}),t?f.jsx("div",{className:"text-center text-white py-20",children:"Loading Earth-shaking Events..."}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(l=>f.jsx(ze,{to:`/news/${l.id}`,className:"block group",children:f.jsx(qS,{title:l.title,image:l.image,content:a(l.content),subtitle:f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-gray-500 text-xs",children:l.timestamp?.seconds?new Date(l.timestamp.seconds*1e3).toLocaleDateString():l.timestamp||new Date().toLocaleDateString()})}),badges:[{text:l.impact,color:RD[l.impact]||"bg-gray-800 text-white"},...(l.affectedCurrencies||[]).map(c=>({text:c,color:"bg-surface border border-gray-700 text-white"}))]})},l.id))})]})})},jD=()=>{const{id:n}=Pc(),e=ki(),[t,r]=P.useState(null),[a,l]=P.useState(!0);if(P.useEffect(()=>{(async()=>{try{const m=$e(Ee,"news",n),p=await fr(m);p.exists()?r({id:p.id,...p.data()}):(console.log("No such document!"),e("/news"))}catch(m){console.error("Error fetching news detail:",m)}finally{l(!1)}})()},[n,e]),a)return f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:"Loading..."});if(!t)return null;const c=t.timestamp?.seconds?new Date(t.timestamp.seconds*1e3).toLocaleDateString():t.timestamp||new Date().toLocaleDateString();return f.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx(yt,{variant:"ghost",onClick:()=>e("/news"),className:"mb-6 text-gray-400 hover:text-white",children:" Back to News"}),f.jsxs("article",{className:"bg-surface rounded-2xl overflow-hidden border border-gray-800 shadow-2xl",children:[t.image&&f.jsxs("div",{className:"w-full h-64 sm:h-96 relative",children:[f.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent"})]}),f.jsxs("div",{className:"p-8 sm:p-12",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[f.jsx("span",{className:"text-gray-400 text-sm",children:c}),f.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide
                                ${t.impact==="High"?"bg-red-500/20 text-red-400":t.impact==="Medium"?"bg-orange-500/20 text-orange-400":"bg-green-500/20 text-green-400"}`,children:[t.impact," Impact"]}),t.affectedCurrencies&&t.affectedCurrencies.map&&t.affectedCurrencies.map(h=>f.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gray-800 text-gray-300 border border-gray-700",children:h},h))]}),f.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-white mb-8 leading-tight",children:t.title}),f.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300",dangerouslySetInnerHTML:{__html:t.content}})]})]})]})})},OD=()=>{const[n,e]=P.useState(""),[t,r]=P.useState(""),[a,l]=P.useState(""),[c,h]=P.useState(!1),m=ki(),p=async E=>{try{const A=await fr($e(Ee,"users",E));A.exists()&&A.data().role==="admin"?m("/admin"):m("/dashboard")}catch(A){console.error("Error checking role:",A),m("/dashboard")}},v=async E=>{E.preventDefault(),l(""),h(!0);try{const A=await H3(Le,n,t);await p(A.user.uid)}catch(A){console.error(A),l("Failed to login. Please check your credentials.")}finally{h(!1)}},_=async()=>{try{const E=new Ti,A=await iA(Le,E);await p(A.user.uid)}catch(E){console.error(E),l("Failed to sign in with Google")}};return f.jsxs("div",{className:"min-h-screen bg-background flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[f.jsxs("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:["Sign in to ",f.jsx("span",{className:"text-secondary",children:"Volcano"})]}),f.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Or"," ",f.jsx(ze,{to:"/register",className:"font-medium text-primary hover:text-green-400",children:"start your 14-day free trial"})]})]}),f.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:f.jsxs("div",{className:"bg-surface py-8 px-4 shadow sm:rounded-lg sm:px-10 border border-gray-800",children:[f.jsxs("form",{className:"space-y-6",onSubmit:v,children:[a&&f.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 p-3 rounded text-sm text-center",children:a}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:E=>e(E.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:E=>r(E.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsx("div",{children:f.jsx(yt,{type:"submit",variant:"primary",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",disabled:c,children:c?"Signing in...":"Sign in"})})]}),f.jsxs("div",{className:"mt-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-700"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-surface text-gray-400",children:"Or continue with"})})]}),f.jsx("div",{className:"mt-6 grid grid-cols-1 gap-3",children:f.jsx("div",{children:f.jsxs("button",{type:"button",onClick:_,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-700 rounded-md shadow-sm bg-gray-800 text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[f.jsx("span",{className:"sr-only",children:"Sign in with Google"}),f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 0.507 5.387 0 12s5.36 12 12 12c3.627 0 6.627-1.2 8.52-3.387 1.947-2.207 2.48-5.747 2.48-6.173 0-.613-.053-1.12-.133-1.507H12.48z"})})]})})})]})]})})]})},DD=()=>{const[n,e]=P.useState(""),[t,r]=P.useState(""),[a,l]=P.useState(""),[c,h]=P.useState(""),[m,p]=P.useState(!1),v=ki(),_=async A=>{A.preventDefault(),h(""),p(!0);try{const O=(await z3(Le,t,a)).user;await $3(O,{displayName:n}),await Oc($e(Ee,"users",O.uid),{uid:O.uid,username:n,email:t,role:"user",createdAt:new Date().toISOString(),avatar_url:`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=random`}),v("/dashboard")}catch(S){console.error(S),S.code==="auth/email-already-in-use"?h("Email already in use."):h("Failed to create account. Please try again.")}finally{p(!1)}},E=async()=>{try{const A=new Ti,O=(await iA(Le,A)).user;await Oc($e(Ee,"users",O.uid),{uid:O.uid,username:O.displayName,email:O.email,role:"user",createdAt:new Date().toISOString(),avatar_url:O.photoURL},{merge:!0}),v("/dashboard")}catch(A){console.error(A),h("Failed to sign up with Google")}};return f.jsxs("div",{className:"min-h-screen bg-background flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[f.jsxs("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:["Join the ",f.jsx("span",{className:"text-secondary",children:"Eruption"})]}),f.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Already have an account?"," ",f.jsx(ze,{to:"/login",className:"font-medium text-primary hover:text-green-400",children:"Sign in"})]})]}),f.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[f.jsx("div",{className:"bg-surface py-8 px-4 shadow sm:rounded-lg sm:px-10 border border-gray-800",children:f.jsxs("form",{className:"space-y-6",onSubmit:_,children:[c&&f.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 p-3 rounded text-sm text-center",children:c}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300",children:"Full Name"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:n,onChange:A=>e(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:A=>r(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,minLength:6,value:a,onChange:A=>l(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),f.jsx("div",{children:f.jsx(yt,{type:"submit",variant:"primary",className:"w-full justify-center",disabled:m,children:m?"Creating Account...":"Sign up"})})]})}),f.jsxs("div",{className:"mt-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-700"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-surface text-gray-400",children:"Or continue with"})})]}),f.jsx("div",{className:"mt-6 grid grid-cols-1 gap-3",children:f.jsx("div",{children:f.jsxs("button",{type:"button",onClick:E,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-700 rounded-md shadow-sm bg-gray-800 text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[f.jsx("span",{className:"sr-only",children:"Sign up with Google"}),f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 0.507 5.387 0 12s5.36 12 12 12c3.627 0 6.627-1.2 8.52-3.387 1.947-2.207 2.48-5.747 2.48-6.173 0-.613-.053-1.12-.133-1.507H12.48z"})})]})})})]})]})]})},LD=({userProfile:n,setUserProfile:e})=>{const[t,r]=P.useState(n?.preferences||{newsImpacts:["High","Medium","Low"],analysisCurrencies:["XAUUSD","EURUSD","GBPUSD","BTCUSD","US30"],analysisTypes:["Technical","Fundamental"]}),[a,l]=P.useState(!1);P.useEffect(()=>{n?.preferences&&r(n.preferences)},[n]);const c=async()=>{l(!0);try{await Oc($e(Ee,"users",Le.currentUser.uid),{preferences:t},{merge:!0}),e({...n,preferences:t}),alert("Preferences saved!")}catch(m){console.error("Error saving preferences:",m),alert("Failed to save.")}finally{l(!1)}},h=(m,p)=>{r(v=>{const _=v[m]||[];return _.includes(p)?{...v,[m]:_.filter(E=>E!==p)}:{...v,[m]:[..._,p]}})};return f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Dashboard Customization"}),f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"News Notifications"}),f.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select which news impacts you want to see."}),f.jsx("div",{className:"flex gap-4",children:["High","Medium","Low"].map(m=>f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:t.newsImpacts?.includes(m),onChange:()=>h("newsImpacts",m),className:"form-checkbox text-primary rounded bg-gray-900 border-gray-700"}),f.jsxs("span",{className:"text-gray-300",children:[m," Impact"]})]},m))})]}),f.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[f.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Analysis Filters"}),f.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Choose your favorite pairs to track."}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["XAUUSD","EURUSD","GBPUSD","USDJPY","BTCUSD","ETHUSD","US30","NAS100"].map(m=>f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:t.analysisCurrencies?.includes(m),onChange:()=>h("analysisCurrencies",m),className:"form-checkbox text-primary rounded bg-gray-900 border-gray-700"}),f.jsx("span",{className:"text-gray-300",children:m})]},m))})]})]}),f.jsx("div",{className:"mt-8",children:f.jsx(yt,{onClick:c,disabled:a,children:a?"Saving...":"Save Preferences"})})]})},kD=({userProfile:n,setUserProfile:e})=>{const[t,r]=P.useState(n?.username||""),[a,l]=P.useState(n?.bio||""),[c,h]=P.useState(!1),[m,p]=P.useState(!1);P.useEffect(()=>{n&&(r(n.username||""),l(n.bio||""))},[n]);const v=A=>new Promise((S,O)=>{const R=new FileReader;R.readAsDataURL(A),R.onload=U=>{const F=new Image;F.src=U.target.result,F.onload=()=>{const Q=document.createElement("canvas"),Y=300,ie=300;let ve=F.width,L=F.height;ve>L?ve>Y&&(L*=Y/ve,ve=Y):L>ie&&(ve*=ie/L,L=ie),Q.width=ve,Q.height=L,Q.getContext("2d").drawImage(F,0,0,ve,L);const V=Q.toDataURL("image/jpeg",.7);S(V)},F.onerror=Q=>O(Q)},R.onerror=U=>O(U)}),_=async A=>{const S=A.target.files[0];if(S){S.size>5*1024*1024&&console.log("Large file detected, compression will be applied."),h(!0);try{const O=await v(S);O.length>5e5&&console.warn("Image might be too large for smooth database performance"),await Oc($e(Ee,"users",Le.currentUser.uid),{avatar_url:O},{merge:!0}),e({...n,avatar_url:O})}catch(O){console.error("Error processing image:",O),alert("Failed to process image.")}finally{h(!1)}}},E=async()=>{p(!0);try{if(t!==n?.username){if(!t.trim()){alert("Username cannot be empty"),p(!1);return}const A=Xn(ut(Ee,"users"),kS("username","==",t));if(!(await en(A)).empty){alert("Username is already taken. Please choose another."),p(!1);return}}await Oc($e(Ee,"users",Le.currentUser.uid),{username:t,bio:a},{merge:!0}),e({...n,username:t,bio:a}),alert("Profile updated!")}catch(A){console.error("Error saving profile:",A),alert("Failed to save profile.")}finally{p(!1)}};return f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Profile Settings"}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[f.jsxs("div",{className:"flex flex-col items-center gap-4",children:[f.jsxs("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-800 relative group",children:[f.jsx("img",{src:n?.avatar_url||`https://ui-avatars.com/api/?name=${n?.username||"User"}`,alt:"Avatar",className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:f.jsx("span",{className:"text-xs text-white",children:"Change"})}),f.jsx("input",{type:"file",accept:"image/*",onChange:_,className:"absolute inset-0 opacity-0 cursor-pointer"})]}),c&&f.jsx("span",{className:"text-xs text-primary",children:"Compressing & Saving..."})]}),f.jsxs("div",{className:"flex-1 space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Username (Public)"}),f.jsx("input",{type:"text",value:t,onChange:A=>r(A.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g. CryptoKing"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique handle for your public profile."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bio"}),f.jsx("textarea",{value:a,onChange:A=>l(A.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:outline-none h-24 resize-none",placeholder:"Tell us about your trading journey..."})]}),f.jsx("div",{children:f.jsx(yt,{onClick:E,disabled:m,children:m?"Saving...":"Save Changes"})}),n?.username&&f.jsxs("div",{className:"mt-4 p-4 bg-gray-900/50 rounded-lg border border-gray-800 flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-gray-400",children:"Your Public Profile:"}),f.jsx(ze,{to:`/profile/${n.username}`,className:"text-primary hover:underline text-sm font-medium",children:"View Public Page "})]})]})]})]})},MD=()=>{const[n,e]=P.useState(null),[t,r]=P.useState(!0),[a,l]=P.useState("overview"),[c,h]=P.useState([]),[m,p]=P.useState({totalProgress:0,completed:0,avgQuiz:0});P.useEffect(()=>{(async()=>{if(Le.currentUser)try{const E=$e(Ee,"users",Le.currentUser.uid),A=await fr(E);A.exists()&&e(A.data());const S=await en(ut(Ee,"users",Le.currentUser.uid,"course_progress")),O={};if(S.docs.forEach(R=>{O[R.id]=R.data()}),Object.keys(O).length>0){const F=(await en(ut(Ee,"courses"))).docs.map(Y=>({id:Y.id,...Y.data()})).filter(Y=>O[Y.id]).map(Y=>{const ie=O[Y.id],ve=ie.completedLessonIds?.length||0;return{...Y,completedCount:ve,lastAccessed:ie.lastAccessed}});h(F);const Q=F.reduce((Y,ie)=>Y+ie.completedCount,0);p({totalProgress:Q,completed:F.length,avgQuiz:0})}}catch(E){console.error("Error fetching user data:",E)}finally{r(!1)}})()},[]);const v=n?.username||Le.currentUser?.displayName||"Trader";return console.log("Dashboard Render",{loading:t,userProfile:n,activeTab:a}),f.jsxs("div",{className:"min-h-screen bg-background text-white animate-fade-in",children:[f.jsx("div",{className:"bg-surface border-b border-gray-800",children:f.jsx("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-primary to-secondary p-[2px]",children:f.jsx("img",{src:n?.avatar_url||`https://ui-avatars.com/api/?name=${v}`,alt:"Profile",className:"h-full w-full rounded-full bg-background object-cover"})}),f.jsxs("div",{children:[f.jsxs("h1",{className:"text-3xl font-bold text-white",children:["Welcome back, ",f.jsx("span",{className:"text-primary",children:v})]}),f.jsx("p",{className:"mt-1 text-gray-400",children:"Ready to dominate the markets today?"})]})]})})}),f.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"flex space-x-6 mb-8 border-b border-gray-800 overflow-x-auto",children:[f.jsx("button",{onClick:()=>l("overview"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="overview"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Overview"}),f.jsx("button",{onClick:()=>l("profile"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="profile"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Profile"}),f.jsx("button",{onClick:()=>l("settings"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="settings"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Settings & Preferences"}),f.jsx("button",{onClick:()=>l("learning"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="learning"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"My Learning"})]}),a==="overview"&&f.jsxs("div",{className:"animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Account Overview"}),f.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3 mb-12",children:[f.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:f.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[f.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Lessons Completed"}),f.jsx("dd",{className:"mt-1 text-3xl font-semibold text-white",children:m.totalProgress})]})}),f.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:f.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[f.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Active Courses"}),f.jsx("dd",{className:"mt-1 text-3xl font-semibold text-primary",children:m.completed})]})}),f.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:f.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[f.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Quiz Score Avg"}),f.jsx("dd",{className:"mt-1 text-3xl font-semibold text-secondary",children:"N/A"})]})})]}),c.length>0&&f.jsxs("div",{className:"mb-8",children:[f.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Jump Back In"}),f.jsxs("div",{className:"bg-surface rounded-xl p-6 border border-gray-800 flex flex-col md:flex-row items-center gap-6",children:[f.jsx("div",{className:"w-full md:w-1/3 aspect-video rounded-lg overflow-hidden",children:f.jsx("img",{src:c[0].image,alt:c[0].title,className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"flex-1 w-full text-center md:text-left",children:[f.jsx("h4",{className:"text-xl font-bold text-white",children:c[0].title}),f.jsx("p",{className:"text-gray-400 mt-2 mb-4",children:"Continue where you left off."}),f.jsx(ze,{to:`/academy/${c[0].path||"General"}/${c[0].id}`,children:f.jsx(yt,{variant:"primary",children:"Continue Learning"})})]})]})]})]}),a==="profile"&&f.jsx(kD,{userProfile:n,setUserProfile:e}),a==="settings"&&f.jsx(LD,{userProfile:n,setUserProfile:e}),a==="learning"&&f.jsxs("div",{className:"animate-fade-in",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Courses"}),f.jsx(ze,{to:"/academy",className:"text-primary text-sm hover:underline",children:"Browse All Courses"})]}),c.length>0?f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:c.map(_=>f.jsxs("div",{className:"bg-surface rounded-xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-colors group",children:[f.jsxs("div",{className:"h-48 overflow-hidden relative",children:[f.jsx("img",{src:_.image,alt:_.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),f.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(ze,{to:`/academy/${_.path||"General"}/${_.id}`,children:f.jsx(yt,{variant:"primary",size:"sm",children:"Continue Learning"})})})]}),f.jsxs("div",{className:"p-6",children:[f.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:_.title}),f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[f.jsx("span",{children:"Lessons Completed"}),f.jsx("span",{children:_.completedCount})]}),f.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:f.jsx("div",{className:"h-2 rounded-full bg-secondary",style:{width:`${Math.min(_.completedCount/10*100,100)}%`}})})]})]})]},_.id))}):f.jsxs("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:[f.jsx("p",{className:"text-gray-400 mb-4",children:"You haven't started any courses yet."}),f.jsx(ze,{to:"/academy",children:f.jsx(yt,{children:"Explore Academy"})})]})]})]})]})},PD=()=>{const[n,e]=P.useState(!1),[t,r]=P.useState(!0),a=ki();return P.useEffect(()=>{const l=wh(Le,async c=>{if(c)try{const h=await fr($e(Ee,"users",c.uid));h.exists()&&h.data().role==="admin"?e(!0):a("/dashboard")}catch(h){console.error("Admin check failed",h),a("/dashboard")}else a("/login");r(!1)});return()=>l()},[a]),t?f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold mb-2",children:"Verifying Clearance..."}),f.jsx("div",{className:"text-gray-400",children:"Please wait."})]})}):n?f.jsxs("div",{className:"min-h-screen bg-background flex",children:[f.jsxs("aside",{className:"w-64 bg-surface border-r border-gray-800 flex-shrink-0 hidden md:flex flex-col",children:[f.jsx("div",{className:"p-6 border-b border-gray-800",children:f.jsxs("span",{className:"text-xl font-bold text-white tracking-wider",children:["VOLCANO ",f.jsx("span",{className:"text-secondary text-base",children:"ADMIN"})]})}),f.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[f.jsx(Lu,{to:"/admin",end:!0,children:"Dashboard"}),f.jsx(Lu,{to:"/admin/news",children:"Manage News"}),f.jsx(Lu,{to:"/admin/analysis",children:"Manage Analysis"}),f.jsx(Lu,{to:"/admin/courses",children:"Manage Courses"}),f.jsx(Lu,{to:"/admin/profile",children:"Analyst Profile"})]}),f.jsxs("div",{className:"p-4 border-t border-gray-800",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold",children:"A"}),f.jsxs("div",{className:"text-sm",children:[f.jsx("div",{className:"text-white font-medium",children:"Administrator"}),f.jsx("div",{className:"text-gray-500 text-xs",children:"Super User"})]})]}),f.jsx(yt,{variant:"outline",size:"sm",className:"w-full",onClick:()=>a("/"),children:"Exit to Site"})]})]}),f.jsxs("div",{className:"md:hidden absolute top-0 left-0 right-0 h-16 bg-surface border-b border-gray-800 flex items-center px-4 justify-between z-20",children:[f.jsx("span",{className:"font-bold text-white",children:"Admin Panel"}),f.jsx(yt,{size:"sm",onClick:()=>a("/"),children:"Exit"})]}),f.jsx("main",{className:"flex-1 overflow-auto p-8 pt-24 md:pt-8",children:f.jsx(AR,{})})]}):null},Lu=({to:n,children:e,end:t=!1})=>f.jsx(hT,{to:n,end:t,className:({isActive:r})=>`block px-4 py-3 rounded-lg text-sm font-medium transition-colors ${r?"bg-primary/10 text-primary border border-primary/20":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:e}),UD=()=>{const[n,e]=P.useState({users:0,courses:0,analysis:0,news:0}),[t,r]=P.useState(!0);return P.useEffect(()=>{(async()=>{try{const l=await ef(ut(Ee,"users")),c=await ef(ut(Ee,"courses")),h=await ef(ut(Ee,"analysis")),m=await ef(ut(Ee,"news"));e({users:l.data().count,courses:c.data().count,analysis:h.data().count,news:m.data().count})}catch(l){console.error("Error fetching stats:",l)}finally{r(!1)}})()},[]),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"System Overview"}),f.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[f.jsx(tf,{title:"Total Users",value:t?"...":n.users,change:"Registered",color:"primary"}),f.jsx(tf,{title:"Active Courses",value:t?"...":n.courses,change:"Live",color:"white"}),f.jsx(tf,{title:"Analysis Posts",value:t?"...":n.analysis,change:"Market Updates",color:"secondary"}),f.jsx(tf,{title:"News Alerts",value:t?"...":n.news,change:"Published",color:"accent"})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Quick Actions"}),f.jsxs("div",{className:"space-y-3",children:[f.jsx(Xp,{label:"Post New Analysis",to:"/admin/analysis"}),f.jsx(Xp,{label:"Broadcast News Alert",to:"/admin/news"}),f.jsx(Xp,{label:"Review New User Signups",to:"#"})]})]}),f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"System Status"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(Wp,{label:"Database Connection",status:"Healthy"}),f.jsx(Wp,{label:"Auth Service",status:"Healthy"}),f.jsx(Wp,{label:"API Latency",status:"24ms"})]})]})]})]})},tf=({title:n,value:e,change:t,color:r})=>{const a={primary:"text-primary",secondary:"text-secondary",accent:"text-accent",white:"text-white"};return f.jsxs("div",{className:"bg-surface rounded-xl p-6 border border-gray-800",children:[f.jsx("p",{className:"text-sm font-medium text-gray-400",children:n}),f.jsxs("div",{className:"mt-2 flex items-baseline",children:[f.jsx("p",{className:`text-3xl font-semibold ${a[r]||"text-white"}`,children:e}),f.jsx("p",{className:"ml-2 text-sm text-gray-500",children:t})]})]})},Xp=({label:n,to:e})=>f.jsxs(ze,{to:e,className:"flex items-center justify-between p-3 bg-background rounded-lg hover:bg-gray-800 cursor-pointer transition-colors",children:[f.jsx("span",{className:"text-gray-300",children:n}),f.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),Wp=({label:n,status:e})=>f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-400",children:n}),f.jsxs("span",{className:"flex items-center text-primary text-sm font-medium",children:[f.jsx("span",{className:"w-2 h-2 bg-primary rounded-full mr-2"}),e]})]});var BS=typeof global=="object"&&global&&global.Object===Object&&global,VD=typeof self=="object"&&self&&self.Object===Object&&self,Mi=BS||VD||Function("return this")(),jo=Mi.Symbol,zS=Object.prototype,qD=zS.hasOwnProperty,BD=zS.toString,ku=jo?jo.toStringTag:void 0;function zD(n){var e=qD.call(n,ku),t=n[ku];try{n[ku]=void 0;var r=!0}catch{}var a=BD.call(n);return r&&(e?n[ku]=t:delete n[ku]),a}var HD=Object.prototype,FD=HD.toString;function $D(n){return FD.call(n)}var GD="[object Null]",KD="[object Undefined]",QE=jo?jo.toStringTag:void 0;function Kc(n){return n==null?n===void 0?KD:GD:QE&&QE in Object(n)?zD(n):$D(n)}function Sa(n){return n!=null&&typeof n=="object"}var gl=Array.isArray;function Po(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}function HS(n){return n}var QD="[object AsyncFunction]",YD="[object Function]",XD="[object GeneratorFunction]",WD="[object Proxy]";function dv(n){if(!Po(n))return!1;var e=Kc(n);return e==YD||e==XD||e==QD||e==WD}var Zp=Mi["__core-js_shared__"],YE=(function(){var n=/[^.]+$/.exec(Zp&&Zp.keys&&Zp.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function ZD(n){return!!YE&&YE in n}var JD=Function.prototype,eL=JD.toString;function Tl(n){if(n!=null){try{return eL.call(n)}catch{}try{return n+""}catch{}}return""}var tL=/[\\^$.*+?()[\]{}|]/g,nL=/^\[object .+?Constructor\]$/,rL=Function.prototype,sL=Object.prototype,iL=rL.toString,aL=sL.hasOwnProperty,oL=RegExp("^"+iL.call(aL).replace(tL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lL(n){if(!Po(n)||ZD(n))return!1;var e=dv(n)?oL:nL;return e.test(Tl(n))}function cL(n,e){return n?.[e]}function Al(n,e){var t=cL(n,e);return lL(t)?t:void 0}var By=Al(Mi,"WeakMap"),XE=Object.create,uL=(function(){function n(){}return function(e){if(!Po(e))return{};if(XE)return XE(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}})();function hL(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function dL(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var fL=800,mL=16,gL=Date.now;function pL(n){var e=0,t=0;return function(){var r=gL(),a=mL-(r-t);if(t=r,a>0){if(++e>=fL)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function yL(n){return function(){return n}}var Yf=(function(){try{var n=Al(Object,"defineProperty");return n({},"",{}),n}catch{}})(),vL=Yf?function(n,e){return Yf(n,"toString",{configurable:!0,enumerable:!1,value:yL(e),writable:!0})}:HS,bL=pL(vL);function xL(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var _L=9007199254740991,EL=/^(?:0|[1-9]\d*)$/;function FS(n,e){var t=typeof n;return e=e??_L,!!e&&(t=="number"||t!="symbol"&&EL.test(n))&&n>-1&&n%1==0&&n<e}function fv(n,e,t){e=="__proto__"&&Yf?Yf(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function Oh(n,e){return n===e||n!==n&&e!==e}var wL=Object.prototype,TL=wL.hasOwnProperty;function $S(n,e,t){var r=n[e];(!(TL.call(n,e)&&Oh(r,t))||t===void 0&&!(e in n))&&fv(n,e,t)}function AL(n,e,t,r){var a=!t;t||(t={});for(var l=-1,c=e.length;++l<c;){var h=e[l],m=void 0;m===void 0&&(m=n[h]),a?fv(t,h,m):$S(t,h,m)}return t}var WE=Math.max;function SL(n,e,t){return e=WE(e===void 0?n.length-1:e,0),function(){for(var r=arguments,a=-1,l=WE(r.length-e,0),c=Array(l);++a<l;)c[a]=r[e+a];a=-1;for(var h=Array(e+1);++a<e;)h[a]=r[a];return h[e]=t(c),hL(n,this,h)}}function NL(n,e){return bL(SL(n,e,HS),n+"")}var CL=9007199254740991;function GS(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=CL}function Rm(n){return n!=null&&GS(n.length)&&!dv(n)}function RL(n,e,t){if(!Po(t))return!1;var r=typeof e;return(r=="number"?Rm(t)&&FS(e,t.length):r=="string"&&e in t)?Oh(t[e],n):!1}function IL(n){return NL(function(e,t){var r=-1,a=t.length,l=a>1?t[a-1]:void 0,c=a>2?t[2]:void 0;for(l=n.length>3&&typeof l=="function"?(a--,l):void 0,c&&RL(t[0],t[1],c)&&(l=a<3?void 0:l,a=1),e=Object(e);++r<a;){var h=t[r];h&&n(e,h,r,l)}return e})}var jL=Object.prototype;function mv(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||jL;return n===t}function OL(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var DL="[object Arguments]";function ZE(n){return Sa(n)&&Kc(n)==DL}var KS=Object.prototype,LL=KS.hasOwnProperty,kL=KS.propertyIsEnumerable,zy=ZE((function(){return arguments})())?ZE:function(n){return Sa(n)&&LL.call(n,"callee")&&!kL.call(n,"callee")};function ML(){return!1}var QS=typeof os=="object"&&os&&!os.nodeType&&os,JE=QS&&typeof ls=="object"&&ls&&!ls.nodeType&&ls,PL=JE&&JE.exports===QS,ew=PL?Mi.Buffer:void 0,UL=ew?ew.isBuffer:void 0,uh=UL||ML,VL="[object Arguments]",qL="[object Array]",BL="[object Boolean]",zL="[object Date]",HL="[object Error]",FL="[object Function]",$L="[object Map]",GL="[object Number]",KL="[object Object]",QL="[object RegExp]",YL="[object Set]",XL="[object String]",WL="[object WeakMap]",ZL="[object ArrayBuffer]",JL="[object DataView]",ek="[object Float32Array]",tk="[object Float64Array]",nk="[object Int8Array]",rk="[object Int16Array]",sk="[object Int32Array]",ik="[object Uint8Array]",ak="[object Uint8ClampedArray]",ok="[object Uint16Array]",lk="[object Uint32Array]",Bt={};Bt[ek]=Bt[tk]=Bt[nk]=Bt[rk]=Bt[sk]=Bt[ik]=Bt[ak]=Bt[ok]=Bt[lk]=!0;Bt[VL]=Bt[qL]=Bt[ZL]=Bt[BL]=Bt[JL]=Bt[zL]=Bt[HL]=Bt[FL]=Bt[$L]=Bt[GL]=Bt[KL]=Bt[QL]=Bt[YL]=Bt[XL]=Bt[WL]=!1;function ck(n){return Sa(n)&&GS(n.length)&&!!Bt[Kc(n)]}function gv(n){return function(e){return n(e)}}var YS=typeof os=="object"&&os&&!os.nodeType&&os,Zu=YS&&typeof ls=="object"&&ls&&!ls.nodeType&&ls,uk=Zu&&Zu.exports===YS,Jp=uk&&BS.process,Dc=(function(){try{var n=Zu&&Zu.require&&Zu.require("util").types;return n||Jp&&Jp.binding&&Jp.binding("util")}catch{}})(),tw=Dc&&Dc.isTypedArray,pv=tw?gv(tw):ck,hk=Object.prototype,dk=hk.hasOwnProperty;function XS(n,e){var t=gl(n),r=!t&&zy(n),a=!t&&!r&&uh(n),l=!t&&!r&&!a&&pv(n),c=t||r||a||l,h=c?OL(n.length,String):[],m=h.length;for(var p in n)(e||dk.call(n,p))&&!(c&&(p=="length"||a&&(p=="offset"||p=="parent")||l&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||FS(p,m)))&&h.push(p);return h}function WS(n,e){return function(t){return n(e(t))}}var fk=WS(Object.keys,Object),mk=Object.prototype,gk=mk.hasOwnProperty;function pk(n){if(!mv(n))return fk(n);var e=[];for(var t in Object(n))gk.call(n,t)&&t!="constructor"&&e.push(t);return e}function yk(n){return Rm(n)?XS(n):pk(n)}function vk(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var bk=Object.prototype,xk=bk.hasOwnProperty;function _k(n){if(!Po(n))return vk(n);var e=mv(n),t=[];for(var r in n)r=="constructor"&&(e||!xk.call(n,r))||t.push(r);return t}function ZS(n){return Rm(n)?XS(n,!0):_k(n)}var hh=Al(Object,"create");function Ek(){this.__data__=hh?hh(null):{},this.size=0}function wk(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Tk="__lodash_hash_undefined__",Ak=Object.prototype,Sk=Ak.hasOwnProperty;function Nk(n){var e=this.__data__;if(hh){var t=e[n];return t===Tk?void 0:t}return Sk.call(e,n)?e[n]:void 0}var Ck=Object.prototype,Rk=Ck.hasOwnProperty;function Ik(n){var e=this.__data__;return hh?e[n]!==void 0:Rk.call(e,n)}var jk="__lodash_hash_undefined__";function Ok(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=hh&&e===void 0?jk:e,this}function pl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}pl.prototype.clear=Ek;pl.prototype.delete=wk;pl.prototype.get=Nk;pl.prototype.has=Ik;pl.prototype.set=Ok;function Dk(){this.__data__=[],this.size=0}function Im(n,e){for(var t=n.length;t--;)if(Oh(n[t][0],e))return t;return-1}var Lk=Array.prototype,kk=Lk.splice;function Mk(n){var e=this.__data__,t=Im(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():kk.call(e,t,1),--this.size,!0}function Pk(n){var e=this.__data__,t=Im(e,n);return t<0?void 0:e[t][1]}function Uk(n){return Im(this.__data__,n)>-1}function Vk(n,e){var t=this.__data__,r=Im(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function ja(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ja.prototype.clear=Dk;ja.prototype.delete=Mk;ja.prototype.get=Pk;ja.prototype.has=Uk;ja.prototype.set=Vk;var dh=Al(Mi,"Map");function qk(){this.size=0,this.__data__={hash:new pl,map:new(dh||ja),string:new pl}}function Bk(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function jm(n,e){var t=n.__data__;return Bk(e)?t[typeof e=="string"?"string":"hash"]:t.map}function zk(n){var e=jm(this,n).delete(n);return this.size-=e?1:0,e}function Hk(n){return jm(this,n).get(n)}function Fk(n){return jm(this,n).has(n)}function $k(n,e){var t=jm(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function Sl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Sl.prototype.clear=qk;Sl.prototype.delete=zk;Sl.prototype.get=Hk;Sl.prototype.has=Fk;Sl.prototype.set=$k;function Gk(n,e){for(var t=-1,r=e.length,a=n.length;++t<r;)n[a+t]=e[t];return n}var JS=WS(Object.getPrototypeOf,Object),Kk="[object Object]",Qk=Function.prototype,Yk=Object.prototype,eN=Qk.toString,Xk=Yk.hasOwnProperty,Wk=eN.call(Object);function Zk(n){if(!Sa(n)||Kc(n)!=Kk)return!1;var e=JS(n);if(e===null)return!0;var t=Xk.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&eN.call(t)==Wk}function Jk(){this.__data__=new ja,this.size=0}function eM(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function tM(n){return this.__data__.get(n)}function nM(n){return this.__data__.has(n)}var rM=200;function sM(n,e){var t=this.__data__;if(t instanceof ja){var r=t.__data__;if(!dh||r.length<rM-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Sl(r)}return t.set(n,e),this.size=t.size,this}function ji(n){var e=this.__data__=new ja(n);this.size=e.size}ji.prototype.clear=Jk;ji.prototype.delete=eM;ji.prototype.get=tM;ji.prototype.has=nM;ji.prototype.set=sM;var tN=typeof os=="object"&&os&&!os.nodeType&&os,nw=tN&&typeof ls=="object"&&ls&&!ls.nodeType&&ls,iM=nw&&nw.exports===tN,rw=iM?Mi.Buffer:void 0,sw=rw?rw.allocUnsafe:void 0;function nN(n,e){if(e)return n.slice();var t=n.length,r=sw?sw(t):new n.constructor(t);return n.copy(r),r}function aM(n,e){for(var t=-1,r=n==null?0:n.length,a=0,l=[];++t<r;){var c=n[t];e(c,t,n)&&(l[a++]=c)}return l}function oM(){return[]}var lM=Object.prototype,cM=lM.propertyIsEnumerable,iw=Object.getOwnPropertySymbols,uM=iw?function(n){return n==null?[]:(n=Object(n),aM(iw(n),function(e){return cM.call(n,e)}))}:oM;function hM(n,e,t){var r=e(n);return gl(n)?r:Gk(r,t(n))}function Hy(n){return hM(n,yk,uM)}var Fy=Al(Mi,"DataView"),$y=Al(Mi,"Promise"),Gy=Al(Mi,"Set"),aw="[object Map]",dM="[object Object]",ow="[object Promise]",lw="[object Set]",cw="[object WeakMap]",uw="[object DataView]",fM=Tl(Fy),mM=Tl(dh),gM=Tl($y),pM=Tl(Gy),yM=Tl(By),Zs=Kc;(Fy&&Zs(new Fy(new ArrayBuffer(1)))!=uw||dh&&Zs(new dh)!=aw||$y&&Zs($y.resolve())!=ow||Gy&&Zs(new Gy)!=lw||By&&Zs(new By)!=cw)&&(Zs=function(n){var e=Kc(n),t=e==dM?n.constructor:void 0,r=t?Tl(t):"";if(r)switch(r){case fM:return uw;case mM:return aw;case gM:return ow;case pM:return lw;case yM:return cw}return e});var vM=Object.prototype,bM=vM.hasOwnProperty;function xM(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&bM.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var Xf=Mi.Uint8Array;function yv(n){var e=new n.constructor(n.byteLength);return new Xf(e).set(new Xf(n)),e}function _M(n,e){var t=yv(n.buffer);return new n.constructor(t,n.byteOffset,n.byteLength)}var EM=/\w*$/;function wM(n){var e=new n.constructor(n.source,EM.exec(n));return e.lastIndex=n.lastIndex,e}var hw=jo?jo.prototype:void 0,dw=hw?hw.valueOf:void 0;function TM(n){return dw?Object(dw.call(n)):{}}function rN(n,e){var t=e?yv(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var AM="[object Boolean]",SM="[object Date]",NM="[object Map]",CM="[object Number]",RM="[object RegExp]",IM="[object Set]",jM="[object String]",OM="[object Symbol]",DM="[object ArrayBuffer]",LM="[object DataView]",kM="[object Float32Array]",MM="[object Float64Array]",PM="[object Int8Array]",UM="[object Int16Array]",VM="[object Int32Array]",qM="[object Uint8Array]",BM="[object Uint8ClampedArray]",zM="[object Uint16Array]",HM="[object Uint32Array]";function FM(n,e,t){var r=n.constructor;switch(e){case DM:return yv(n);case AM:case SM:return new r(+n);case LM:return _M(n);case kM:case MM:case PM:case UM:case VM:case qM:case BM:case zM:case HM:return rN(n,t);case NM:return new r;case CM:case jM:return new r(n);case RM:return wM(n);case IM:return new r;case OM:return TM(n)}}function sN(n){return typeof n.constructor=="function"&&!mv(n)?uL(JS(n)):{}}var $M="[object Map]";function GM(n){return Sa(n)&&Zs(n)==$M}var fw=Dc&&Dc.isMap,KM=fw?gv(fw):GM,QM="[object Set]";function YM(n){return Sa(n)&&Zs(n)==QM}var mw=Dc&&Dc.isSet,XM=mw?gv(mw):YM,WM=1,iN="[object Arguments]",ZM="[object Array]",JM="[object Boolean]",e8="[object Date]",t8="[object Error]",aN="[object Function]",n8="[object GeneratorFunction]",r8="[object Map]",s8="[object Number]",oN="[object Object]",i8="[object RegExp]",a8="[object Set]",o8="[object String]",l8="[object Symbol]",c8="[object WeakMap]",u8="[object ArrayBuffer]",h8="[object DataView]",d8="[object Float32Array]",f8="[object Float64Array]",m8="[object Int8Array]",g8="[object Int16Array]",p8="[object Int32Array]",y8="[object Uint8Array]",v8="[object Uint8ClampedArray]",b8="[object Uint16Array]",x8="[object Uint32Array]",Lt={};Lt[iN]=Lt[ZM]=Lt[u8]=Lt[h8]=Lt[JM]=Lt[e8]=Lt[d8]=Lt[f8]=Lt[m8]=Lt[g8]=Lt[p8]=Lt[r8]=Lt[s8]=Lt[oN]=Lt[i8]=Lt[a8]=Lt[o8]=Lt[l8]=Lt[y8]=Lt[v8]=Lt[b8]=Lt[x8]=!0;Lt[t8]=Lt[aN]=Lt[c8]=!1;function Sf(n,e,t,r,a,l){var c,h=e&WM;if(c!==void 0)return c;if(!Po(n))return n;var m=gl(n);if(m)c=xM(n);else{var p=Zs(n),v=p==aN||p==n8;if(uh(n))return nN(n,h);if(p==oN||p==iN||v&&!a)c=v?{}:sN(n);else{if(!Lt[p])return a?n:{};c=FM(n,p,h)}}l||(l=new ji);var _=l.get(n);if(_)return _;l.set(n,c),XM(n)?n.forEach(function(S){c.add(Sf(S,e,t,S,n,l))}):KM(n)&&n.forEach(function(S,O){c.set(O,Sf(S,e,t,O,n,l))});var E=Hy,A=m?void 0:E(n);return xL(A||n,function(S,O){A&&(O=S,S=n[O]),$S(c,O,Sf(S,e,t,O,n,l))}),c}var _8=1,E8=4;function bc(n){return Sf(n,_8|E8)}var w8="__lodash_hash_undefined__";function T8(n){return this.__data__.set(n,w8),this}function A8(n){return this.__data__.has(n)}function Wf(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Sl;++e<t;)this.add(n[e])}Wf.prototype.add=Wf.prototype.push=T8;Wf.prototype.has=A8;function S8(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function N8(n,e){return n.has(e)}var C8=1,R8=2;function lN(n,e,t,r,a,l){var c=t&C8,h=n.length,m=e.length;if(h!=m&&!(c&&m>h))return!1;var p=l.get(n),v=l.get(e);if(p&&v)return p==e&&v==n;var _=-1,E=!0,A=t&R8?new Wf:void 0;for(l.set(n,e),l.set(e,n);++_<h;){var S=n[_],O=e[_];if(r)var R=c?r(O,S,_,e,n,l):r(S,O,_,n,e,l);if(R!==void 0){if(R)continue;E=!1;break}if(A){if(!S8(e,function(U,F){if(!N8(A,F)&&(S===U||a(S,U,t,r,l)))return A.push(F)})){E=!1;break}}else if(!(S===O||a(S,O,t,r,l))){E=!1;break}}return l.delete(n),l.delete(e),E}function I8(n){var e=-1,t=Array(n.size);return n.forEach(function(r,a){t[++e]=[a,r]}),t}function j8(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var O8=1,D8=2,L8="[object Boolean]",k8="[object Date]",M8="[object Error]",P8="[object Map]",U8="[object Number]",V8="[object RegExp]",q8="[object Set]",B8="[object String]",z8="[object Symbol]",H8="[object ArrayBuffer]",F8="[object DataView]",gw=jo?jo.prototype:void 0,ey=gw?gw.valueOf:void 0;function $8(n,e,t,r,a,l,c){switch(t){case F8:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case H8:return!(n.byteLength!=e.byteLength||!l(new Xf(n),new Xf(e)));case L8:case k8:case U8:return Oh(+n,+e);case M8:return n.name==e.name&&n.message==e.message;case V8:case B8:return n==e+"";case P8:var h=I8;case q8:var m=r&O8;if(h||(h=j8),n.size!=e.size&&!m)return!1;var p=c.get(n);if(p)return p==e;r|=D8,c.set(n,e);var v=lN(h(n),h(e),r,a,l,c);return c.delete(n),v;case z8:if(ey)return ey.call(n)==ey.call(e)}return!1}var G8=1,K8=Object.prototype,Q8=K8.hasOwnProperty;function Y8(n,e,t,r,a,l){var c=t&G8,h=Hy(n),m=h.length,p=Hy(e),v=p.length;if(m!=v&&!c)return!1;for(var _=m;_--;){var E=h[_];if(!(c?E in e:Q8.call(e,E)))return!1}var A=l.get(n),S=l.get(e);if(A&&S)return A==e&&S==n;var O=!0;l.set(n,e),l.set(e,n);for(var R=c;++_<m;){E=h[_];var U=n[E],F=e[E];if(r)var Q=c?r(F,U,E,e,n,l):r(U,F,E,n,e,l);if(!(Q===void 0?U===F||a(U,F,t,r,l):Q)){O=!1;break}R||(R=E=="constructor")}if(O&&!R){var Y=n.constructor,ie=e.constructor;Y!=ie&&"constructor"in n&&"constructor"in e&&!(typeof Y=="function"&&Y instanceof Y&&typeof ie=="function"&&ie instanceof ie)&&(O=!1)}return l.delete(n),l.delete(e),O}var X8=1,pw="[object Arguments]",yw="[object Array]",nf="[object Object]",W8=Object.prototype,vw=W8.hasOwnProperty;function Z8(n,e,t,r,a,l){var c=gl(n),h=gl(e),m=c?yw:Zs(n),p=h?yw:Zs(e);m=m==pw?nf:m,p=p==pw?nf:p;var v=m==nf,_=p==nf,E=m==p;if(E&&uh(n)){if(!uh(e))return!1;c=!0,v=!1}if(E&&!v)return l||(l=new ji),c||pv(n)?lN(n,e,t,r,a,l):$8(n,e,m,t,r,a,l);if(!(t&X8)){var A=v&&vw.call(n,"__wrapped__"),S=_&&vw.call(e,"__wrapped__");if(A||S){var O=A?n.value():n,R=S?e.value():e;return l||(l=new ji),a(O,R,t,r,l)}}return E?(l||(l=new ji),Y8(n,e,t,r,a,l)):!1}function cN(n,e,t,r,a){return n===e?!0:n==null||e==null||!Sa(n)&&!Sa(e)?n!==n&&e!==e:Z8(n,e,t,r,cN,a)}function J8(n){return function(e,t,r){for(var a=-1,l=Object(e),c=r(e),h=c.length;h--;){var m=c[++a];if(t(l[m],m,l)===!1)break}return e}}var e9=J8();function Ky(n,e,t){(t!==void 0&&!Oh(n[e],t)||t===void 0&&!(e in n))&&fv(n,e,t)}function t9(n){return Sa(n)&&Rm(n)}function Qy(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function n9(n){return AL(n,ZS(n))}function r9(n,e,t,r,a,l,c){var h=Qy(n,t),m=Qy(e,t),p=c.get(m);if(p){Ky(n,t,p);return}var v=l?l(h,m,t+"",n,e,c):void 0,_=v===void 0;if(_){var E=gl(m),A=!E&&uh(m),S=!E&&!A&&pv(m);v=m,E||A||S?gl(h)?v=h:t9(h)?v=dL(h):A?(_=!1,v=nN(m,!0)):S?(_=!1,v=rN(m,!0)):v=[]:Zk(m)||zy(m)?(v=h,zy(h)?v=n9(h):(!Po(h)||dv(h))&&(v=sN(m))):_=!1}_&&(c.set(m,v),a(v,m,r,l,c),c.delete(m)),Ky(n,t,v)}function uN(n,e,t,r,a){n!==e&&e9(e,function(l,c){if(a||(a=new ji),Po(l))r9(n,e,c,t,uN,r,a);else{var h=r?r(Qy(n,c),l,c+"",n,e,a):void 0;h===void 0&&(h=l),Ky(n,c,h)}},ZS)}function mo(n,e){return cN(n,e)}var wo=IL(function(n,e,t){uN(n,e,t)}),Oe=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(Oe||{});class Li{constructor(e,t,r={}){this.attrName=e,this.keyName=t;const a=Oe.TYPE&Oe.ATTRIBUTE;this.scope=r.scope!=null?r.scope&Oe.LEVEL|a:Oe.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}}class xc extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const hN=class Yy{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,t)}return null}create(e,t,r){const a=this.query(t);if(a==null)throw new xc(`Unable to create ${t} blot`);const l=a,c=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:l.create(r),h=new l(e,c,r);return Yy.blots.set(h.domNode,h),h}find(e,t=!1){return Yy.find(e,t)}query(e,t=Oe.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&Oe.LEVEL&Oe.BLOCK?r=this.types.block:e&Oe.LEVEL&Oe.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(a=>(r=this.classes[a],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&t&Oe.LEVEL&r.scope&&t&Oe.TYPE&r.scope?r:null}register(...e){return e.map(t=>{const r="blotName"in t,a="attrName"in t;if(!r&&!a)throw new xc("Invalid definition");if(r&&t.blotName==="abstract")throw new xc("Cannot register abstract class");const l=r?t.blotName:a?t.attrName:void 0;return this.types[l]=t,a?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):r&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(c=>c.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(c=>{(this.tags[c]==null||t.className==null)&&(this.tags[c]=t)}))),t})}};hN.blots=new WeakMap;let Lc=hN;function bw(n,e){return(n.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}class s9 extends Li{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){bw(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const t=(bw(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}}const ai=s9;function ty(n){const e=n.split("-"),t=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+t}class i9 extends Li{static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[ty(this.keyName)]=t,!0):!1}remove(e){e.style[ty(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const t=e.style[ty(this.keyName)];return this.canAdd(e,t)?t:""}}const Uo=i9;class a9{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Lc.find(this.domNode);if(e==null)return;const t=Li.keys(this.domNode),r=ai.keys(this.domNode),a=Uo.keys(this.domNode);t.concat(r).concat(a).forEach(l=>{const c=e.scroll.query(l,Oe.ATTRIBUTE);c instanceof Li&&(this.attributes[c.attrName]=c)})}copy(e){Object.keys(this.attributes).forEach(t=>{const r=this.attributes[t].value(this.domNode);e.format(t,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}}const Om=a9,dN=class{constructor(e,t){this.scroll=e,this.domNode=t,Lc.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new xc("Blot definition missing tagName");let t,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?t=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?t=document.createElement(r):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Lc.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,r,a){const l=this.isolate(e,t);if(this.scroll.query(r,Oe.BLOT)!=null&&a)l.wrap(r,a);else if(this.scroll.query(r,Oe.ATTRIBUTE)!=null){const c=this.scroll.create(this.statics.scope);l.wrap(c),c.format(r,a)}}insertAt(e,t,r){const a=r==null?this.scroll.create("text",t):this.scroll.create(t,r),l=this.split(e);this.parent.insertBefore(a,l||void 0)}isolate(e,t){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(t),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new xc(`Cannot wrap ${e}`);return r.appendChild(this),r}};dN.blotName="abstract";let fN=dN;const mN=class extends fN{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};mN.scope=Oe.INLINE_BLOT;let o9=mN;const ur=o9;class l9{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const t=e.slice(1);this.append(...t)}}at(e){const t=this.iterator();let r=t();for(;r&&e>0;)e-=1,r=t();return r}contains(e){const t=this.iterator();let r=t();for(;r;){if(r===e)return!0;r=t()}return!1}indexOf(e){const t=this.iterator();let r=t(),a=0;for(;r;){if(r===e)return a;a+=1,r=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,r=this.head;for(;r!=null;){if(r===e)return t;t+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){const r=this.iterator();let a=r();for(;a;){const l=a.length();if(e<l||t&&e===l&&(a.next==null||a.next.length()!==0))return[a,e];e-=l,a=r()}return[null,0]}forEach(e){const t=this.iterator();let r=t();for(;r;)e(r),r=t()}forEachAt(e,t,r){if(t<=0)return;const[a,l]=this.find(e);let c=e-l;const h=this.iterator(a);let m=h();for(;m&&c<e+t;){const p=m.length();e>c?r(m,e-c,Math.min(t,c+p-e)):r(m,0,Math.min(p,e+t-c)),c+=p,m=h()}}map(e){return this.reduce((t,r)=>(t.push(e(r)),t),[])}reduce(e,t){const r=this.iterator();let a=r();for(;a;)t=e(t,a),a=r();return t}}function xw(n,e){const t=e.find(n);if(t)return t;try{return e.create(n)}catch{const r=e.create(Oe.INLINE);return Array.from(n.childNodes).forEach(a=>{r.domNode.appendChild(a)}),n.parentNode&&n.parentNode.replaceChild(r.domNode,n),r.attach(),r}}const gN=class lo extends fN{constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,lo.uiClass&&this.uiNode.classList.add(lo.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new l9,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const t=xw(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof xc)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(r,a,l)=>{r.deleteAt(a,l)})}descendant(e,t=0){const[r,a]=this.children.find(t);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,a]:r instanceof lo?r.descendant(e,a):[null,-1]}descendants(e,t=0,r=Number.MAX_VALUE){let a=[],l=r;return this.children.forEachAt(t,r,(c,h,m)=>{(e.blotName==null&&e(c)||e.blotName!=null&&c instanceof e)&&a.push(c),c instanceof lo&&(a=a.concat(c.descendants(e,h,l))),l-=m}),a}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(r=>t instanceof r)||(t.statics.scope===Oe.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof lo?t.unwrap():t.remove())})}formatAt(e,t,r,a){this.children.forEachAt(e,t,(l,c,h)=>{l.formatAt(c,h,r,a)})}insertAt(e,t,r){const[a,l]=this.children.find(e);if(a)a.insertAt(l,t,r);else{const c=r==null?this.scroll.create("text",t):this.scroll.create(t,r);this.appendChild(c)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(r=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(r=>{e.insertBefore(r,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){const[r,a]=this.children.find(e,t),l=[[this,e]];return r instanceof lo?l.concat(r.path(a,t)):(r!=null&&l.push([r,a]),l)}removeChild(e){this.children.remove(e)}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return r instanceof lo&&this.moveChildren(r),super.replaceWith(r)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(a,l,c)=>{const h=a.split(l,t);h!=null&&r.appendChild(h)}),r}splitAfter(e){const t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){const r=[],a=[];e.forEach(l=>{l.target===this.domNode&&l.type==="childList"&&(r.push(...l.addedNodes),a.push(...l.removedNodes))}),a.forEach(l=>{if(l.parentNode!=null&&l.tagName!=="IFRAME"&&document.body.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const c=this.scroll.find(l);c!=null&&(c.domNode.parentNode==null||c.domNode.parentNode===this.domNode)&&c.detach()}),r.filter(l=>l.parentNode===this.domNode&&l!==this.uiNode).sort((l,c)=>l===c?0:l.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(l=>{let c=null;l.nextSibling!=null&&(c=this.scroll.find(l.nextSibling));const h=xw(l,this.scroll);(h.next!==c||h.next==null)&&(h.parent!=null&&h.parent.removeChild(this),this.insertBefore(h,c||void 0))}),this.enforceAllowedChildren()}};gN.uiClass="";let c9=gN;const ri=c9;function u9(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}const uc=class hc extends ri{static create(e){return super.create(e)}static formats(e,t){const r=t.query(hc.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Om(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(r=>{r instanceof hc||(r=r.wrap(hc.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,Oe.INLINE);if(r==null)return;r instanceof Li?this.attributes.attribute(r,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,a){this.formats()[r]!=null||this.scroll.query(r,Oe.ATTRIBUTE)?this.isolate(e,t).format(r,a):super.formatAt(e,t,r,a)}optimize(e){super.optimize(e);const t=this.formats();if(Object.keys(t).length===0)return this.unwrap();const r=this.next;r instanceof hc&&r.prev===this&&u9(t,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,t){const r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,t){const r=super.wrap(e,t);return r instanceof hc&&this.attributes.move(r),r}};uc.allowedChildren=[uc,ur],uc.blotName="inline",uc.scope=Oe.INLINE_BLOT,uc.tagName="SPAN";let h9=uc;const vv=h9,dc=class Xy extends ri{static create(e){return super.create(e)}static formats(e,t){const r=t.query(Xy.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Om(this.domNode)}format(e,t){const r=this.scroll.query(e,Oe.BLOCK);r!=null&&(r instanceof Li?this.attributes.attribute(r,t):e===this.statics.blotName&&!t?this.replaceWith(Xy.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,a){this.scroll.query(r,Oe.BLOCK)!=null?this.format(r,a):super.formatAt(e,t,r,a)}insertAt(e,t,r){if(r==null||this.scroll.query(t,Oe.INLINE)!=null)super.insertAt(e,t,r);else{const a=this.split(e);if(a!=null){const l=this.scroll.create(t,r);a.parent.insertBefore(l,a)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){const r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};dc.blotName="block",dc.scope=Oe.BLOCK_BLOT,dc.tagName="P",dc.allowedChildren=[vv,dc,ur];let d9=dc;const fh=d9,Wy=class extends ri{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,r,a){super.formatAt(e,t,r,a),this.enforceAllowedChildren()}insertAt(e,t,r){super.insertAt(e,t,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Wy.blotName="container",Wy.scope=Oe.BLOCK_BLOT;let f9=Wy;const Dm=f9;class m9 extends ur{static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,r,a){e===0&&t===this.length()?this.format(r,a):super.formatAt(e,t,r,a)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const hs=m9,g9={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},p9=100,fc=class extends ri{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,g9),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const r=this.registry.find(e,t);return r?r.scroll===this?r:t?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,t=Oe.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,t)}formatAt(e,t,r,a){this.update(),super.formatAt(e,t,r,a)}insertAt(e,t,r){this.update(),super.insertAt(e,t,r)}optimize(e=[],t={}){super.optimize(t);const r=t.mutationsMap||new WeakMap;let a=Array.from(this.observer.takeRecords());for(;a.length>0;)e.push(a.pop());const l=(m,p=!0)=>{m==null||m===this||m.domNode.parentNode!=null&&(r.has(m.domNode)||r.set(m.domNode,[]),p&&l(m.parent))},c=m=>{r.has(m.domNode)&&(m instanceof ri&&m.children.forEach(c),r.delete(m.domNode),m.optimize(t))};let h=e;for(let m=0;h.length>0;m+=1){if(m>=p9)throw new Error("[Parchment] Maximum optimize iterations reached");for(h.forEach(p=>{const v=this.find(p.target,!0);v!=null&&(v.domNode===p.target&&(p.type==="childList"?(l(this.find(p.previousSibling,!1)),Array.from(p.addedNodes).forEach(_=>{const E=this.find(_,!1);l(E,!1),E instanceof ri&&E.children.forEach(A=>{l(A,!1)})})):p.type==="attributes"&&l(v.prev)),l(v))}),this.children.forEach(c),h=Array.from(this.observer.takeRecords()),a=h.slice();a.length>0;)e.push(a.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(a=>{const l=this.find(a.target,!0);return l==null?null:r.has(l.domNode)?(r.get(l.domNode).push(a),null):(r.set(l.domNode,[a]),l)}).forEach(a=>{a!=null&&a!==this&&r.has(a.domNode)&&a.update(r.get(a.domNode)||[],t)}),t.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),t),this.optimize(e,t)}};fc.blotName="scroll",fc.defaultChild=fh,fc.allowedChildren=[fh,Dm],fc.scope=Oe.BLOCK_BLOT,fc.tagName="DIV";let y9=fc;const bv=y9,Zy=class pN extends ur{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,r){r==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof pN&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,t){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Zy.blotName="text",Zy.scope=Oe.INLINE_BLOT;let v9=Zy;const Zf=v9,b9=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Li,AttributorStore:Om,BlockBlot:fh,ClassAttributor:ai,ContainerBlot:Dm,EmbedBlot:hs,InlineBlot:vv,LeafBlot:ur,ParentBlot:ri,Registry:Lc,Scope:Oe,ScrollBlot:bv,StyleAttributor:Uo,TextBlot:Zf},Symbol.toStringTag,{value:"Module"}));var rf={exports:{}},ny,_w;function x9(){if(_w)return ny;_w=1;var n=-1,e=1,t=0;function r(N,M,C,pe,ge){if(N===M)return N?[[t,N]]:[];if(C!=null){var H=V(N,M,C);if(H)return H}var ee=h(N,M),ue=N.substring(0,ee);N=N.substring(ee),M=M.substring(ee),ee=p(N,M);var xe=N.substring(N.length-ee);N=N.substring(0,N.length-ee),M=M.substring(0,M.length-ee);var be=a(N,M);return ue&&be.unshift([t,ue]),xe&&be.push([t,xe]),F(be,ge),pe&&_(be),be}function a(N,M){var C;if(!N)return[[e,M]];if(!M)return[[n,N]];var pe=N.length>M.length?N:M,ge=N.length>M.length?M:N,H=pe.indexOf(ge);if(H!==-1)return C=[[e,pe.substring(0,H)],[t,ge],[e,pe.substring(H+ge.length)]],N.length>M.length&&(C[0][0]=C[2][0]=n),C;if(ge.length===1)return[[n,N],[e,M]];var ee=v(N,M);if(ee){var ue=ee[0],xe=ee[1],be=ee[2],q=ee[3],W=ee[4],de=r(ue,be),me=r(xe,q);return de.concat([[t,W]],me)}return l(N,M)}function l(N,M){for(var C=N.length,pe=M.length,ge=Math.ceil((C+pe)/2),H=ge,ee=2*ge,ue=new Array(ee),xe=new Array(ee),be=0;be<ee;be++)ue[be]=-1,xe[be]=-1;ue[H+1]=0,xe[H+1]=0;for(var q=C-pe,W=q%2!==0,de=0,me=0,ye=0,Ae=0,De=0;De<ge;De++){for(var je=-De+de;je<=De-me;je+=2){var ke=H+je,We;je===-De||je!==De&&ue[ke-1]<ue[ke+1]?We=ue[ke+1]:We=ue[ke-1]+1;for(var et=We-je;We<C&&et<pe&&N.charAt(We)===M.charAt(et);)We++,et++;if(ue[ke]=We,We>C)me+=2;else if(et>pe)de+=2;else if(W){var st=H+q-je;if(st>=0&&st<ee&&xe[st]!==-1){var ht=C-xe[st];if(We>=ht)return c(N,M,We,et)}}}for(var vt=-De+ye;vt<=De-Ae;vt+=2){var st=H+vt,ht;vt===-De||vt!==De&&xe[st-1]<xe[st+1]?ht=xe[st+1]:ht=xe[st-1]+1;for(var nn=ht-vt;ht<C&&nn<pe&&N.charAt(C-ht-1)===M.charAt(pe-nn-1);)ht++,nn++;if(xe[st]=ht,ht>C)Ae+=2;else if(nn>pe)ye+=2;else if(!W){var ke=H+q-vt;if(ke>=0&&ke<ee&&ue[ke]!==-1){var We=ue[ke],et=H+We-ke;if(ht=C-ht,We>=ht)return c(N,M,We,et)}}}}return[[n,N],[e,M]]}function c(N,M,C,pe){var ge=N.substring(0,C),H=M.substring(0,pe),ee=N.substring(C),ue=M.substring(pe),xe=r(ge,H),be=r(ee,ue);return xe.concat(be)}function h(N,M){if(!N||!M||N.charAt(0)!==M.charAt(0))return 0;for(var C=0,pe=Math.min(N.length,M.length),ge=pe,H=0;C<ge;)N.substring(H,ge)==M.substring(H,ge)?(C=ge,H=C):pe=ge,ge=Math.floor((pe-C)/2+C);return Q(N.charCodeAt(ge-1))&&ge--,ge}function m(N,M){var C=N.length,pe=M.length;if(C==0||pe==0)return 0;C>pe?N=N.substring(C-pe):C<pe&&(M=M.substring(0,C));var ge=Math.min(C,pe);if(N==M)return ge;for(var H=0,ee=1;;){var ue=N.substring(ge-ee),xe=M.indexOf(ue);if(xe==-1)return H;ee+=xe,(xe==0||N.substring(ge-ee)==M.substring(0,ee))&&(H=ee,ee++)}}function p(N,M){if(!N||!M||N.slice(-1)!==M.slice(-1))return 0;for(var C=0,pe=Math.min(N.length,M.length),ge=pe,H=0;C<ge;)N.substring(N.length-ge,N.length-H)==M.substring(M.length-ge,M.length-H)?(C=ge,H=C):pe=ge,ge=Math.floor((pe-C)/2+C);return Y(N.charCodeAt(N.length-ge))&&ge--,ge}function v(N,M){var C=N.length>M.length?N:M,pe=N.length>M.length?M:N;if(C.length<4||pe.length*2<C.length)return null;function ge(me,ye,Ae){for(var De=me.substring(Ae,Ae+Math.floor(me.length/4)),je=-1,ke="",We,et,st,ht;(je=ye.indexOf(De,je+1))!==-1;){var vt=h(me.substring(Ae),ye.substring(je)),nn=p(me.substring(0,Ae),ye.substring(0,je));ke.length<nn+vt&&(ke=ye.substring(je-nn,je)+ye.substring(je,je+vt),We=me.substring(0,Ae-nn),et=me.substring(Ae+vt),st=ye.substring(0,je-nn),ht=ye.substring(je+vt))}return ke.length*2>=me.length?[We,et,st,ht,ke]:null}var H=ge(C,pe,Math.ceil(C.length/4)),ee=ge(C,pe,Math.ceil(C.length/2)),ue;if(!H&&!ee)return null;ee?H?ue=H[4].length>ee[4].length?H:ee:ue=ee:ue=H;var xe,be,q,W;N.length>M.length?(xe=ue[0],be=ue[1],q=ue[2],W=ue[3]):(q=ue[0],W=ue[1],xe=ue[2],be=ue[3]);var de=ue[4];return[xe,be,q,W,de]}function _(N){for(var M=!1,C=[],pe=0,ge=null,H=0,ee=0,ue=0,xe=0,be=0;H<N.length;)N[H][0]==t?(C[pe++]=H,ee=xe,ue=be,xe=0,be=0,ge=N[H][1]):(N[H][0]==e?xe+=N[H][1].length:be+=N[H][1].length,ge&&ge.length<=Math.max(ee,ue)&&ge.length<=Math.max(xe,be)&&(N.splice(C[pe-1],0,[n,ge]),N[C[pe-1]+1][0]=e,pe--,pe--,H=pe>0?C[pe-1]:-1,ee=0,ue=0,xe=0,be=0,ge=null,M=!0)),H++;for(M&&F(N),U(N),H=1;H<N.length;){if(N[H-1][0]==n&&N[H][0]==e){var q=N[H-1][1],W=N[H][1],de=m(q,W),me=m(W,q);de>=me?(de>=q.length/2||de>=W.length/2)&&(N.splice(H,0,[t,W.substring(0,de)]),N[H-1][1]=q.substring(0,q.length-de),N[H+1][1]=W.substring(de),H++):(me>=q.length/2||me>=W.length/2)&&(N.splice(H,0,[t,q.substring(0,me)]),N[H-1][0]=e,N[H-1][1]=W.substring(0,W.length-me),N[H+1][0]=n,N[H+1][1]=q.substring(me),H++),H++}H++}}var E=/[^a-zA-Z0-9]/,A=/\s/,S=/[\r\n]/,O=/\n\r?\n$/,R=/^\r?\n\r?\n/;function U(N){function M(me,ye){if(!me||!ye)return 6;var Ae=me.charAt(me.length-1),De=ye.charAt(0),je=Ae.match(E),ke=De.match(E),We=je&&Ae.match(A),et=ke&&De.match(A),st=We&&Ae.match(S),ht=et&&De.match(S),vt=st&&me.match(O),nn=ht&&ye.match(R);return vt||nn?5:st||ht?4:je&&!We&&et?3:We||et?2:je||ke?1:0}for(var C=1;C<N.length-1;){if(N[C-1][0]==t&&N[C+1][0]==t){var pe=N[C-1][1],ge=N[C][1],H=N[C+1][1],ee=p(pe,ge);if(ee){var ue=ge.substring(ge.length-ee);pe=pe.substring(0,pe.length-ee),ge=ue+ge.substring(0,ge.length-ee),H=ue+H}for(var xe=pe,be=ge,q=H,W=M(pe,ge)+M(ge,H);ge.charAt(0)===H.charAt(0);){pe+=ge.charAt(0),ge=ge.substring(1)+H.charAt(0),H=H.substring(1);var de=M(pe,ge)+M(ge,H);de>=W&&(W=de,xe=pe,be=ge,q=H)}N[C-1][1]!=xe&&(xe?N[C-1][1]=xe:(N.splice(C-1,1),C--),N[C][1]=be,q?N[C+1][1]=q:(N.splice(C+1,1),C--))}C++}}function F(N,M){N.push([t,""]);for(var C=0,pe=0,ge=0,H="",ee="",ue;C<N.length;){if(C<N.length-1&&!N[C][1]){N.splice(C,1);continue}switch(N[C][0]){case e:ge++,ee+=N[C][1],C++;break;case n:pe++,H+=N[C][1],C++;break;case t:var xe=C-ge-pe-1;if(M){if(xe>=0&&ve(N[xe][1])){var be=N[xe][1].slice(-1);if(N[xe][1]=N[xe][1].slice(0,-1),H=be+H,ee=be+ee,!N[xe][1]){N.splice(xe,1),C--;var q=xe-1;N[q]&&N[q][0]===e&&(ge++,ee=N[q][1]+ee,q--),N[q]&&N[q][0]===n&&(pe++,H=N[q][1]+H,q--),xe=q}}if(ie(N[C][1])){var be=N[C][1].charAt(0);N[C][1]=N[C][1].slice(1),H+=be,ee+=be}}if(C<N.length-1&&!N[C][1]){N.splice(C,1);break}if(H.length>0||ee.length>0){H.length>0&&ee.length>0&&(ue=h(ee,H),ue!==0&&(xe>=0?N[xe][1]+=ee.substring(0,ue):(N.splice(0,0,[t,ee.substring(0,ue)]),C++),ee=ee.substring(ue),H=H.substring(ue)),ue=p(ee,H),ue!==0&&(N[C][1]=ee.substring(ee.length-ue)+N[C][1],ee=ee.substring(0,ee.length-ue),H=H.substring(0,H.length-ue)));var W=ge+pe;H.length===0&&ee.length===0?(N.splice(C-W,W),C=C-W):H.length===0?(N.splice(C-W,W,[e,ee]),C=C-W+1):ee.length===0?(N.splice(C-W,W,[n,H]),C=C-W+1):(N.splice(C-W,W,[n,H],[e,ee]),C=C-W+2)}C!==0&&N[C-1][0]===t?(N[C-1][1]+=N[C][1],N.splice(C,1)):C++,ge=0,pe=0,H="",ee="";break}}N[N.length-1][1]===""&&N.pop();var de=!1;for(C=1;C<N.length-1;)N[C-1][0]===t&&N[C+1][0]===t&&(N[C][1].substring(N[C][1].length-N[C-1][1].length)===N[C-1][1]?(N[C][1]=N[C-1][1]+N[C][1].substring(0,N[C][1].length-N[C-1][1].length),N[C+1][1]=N[C-1][1]+N[C+1][1],N.splice(C-1,1),de=!0):N[C][1].substring(0,N[C+1][1].length)==N[C+1][1]&&(N[C-1][1]+=N[C+1][1],N[C][1]=N[C][1].substring(N[C+1][1].length)+N[C+1][1],N.splice(C+1,1),de=!0)),C++;de&&F(N,M)}function Q(N){return N>=55296&&N<=56319}function Y(N){return N>=56320&&N<=57343}function ie(N){return Y(N.charCodeAt(0))}function ve(N){return Q(N.charCodeAt(N.length-1))}function L(N){for(var M=[],C=0;C<N.length;C++)N[C][1].length>0&&M.push(N[C]);return M}function k(N,M,C,pe){return ve(N)||ie(pe)?null:L([[t,N],[n,M],[e,C],[t,pe]])}function V(N,M,C){var pe=typeof C=="number"?{index:C,length:0}:C.oldRange,ge=typeof C=="number"?null:C.newRange,H=N.length,ee=M.length;if(pe.length===0&&(ge===null||ge.length===0)){var ue=pe.index,xe=N.slice(0,ue),be=N.slice(ue),q=ge?ge.index:null;e:{var W=ue+ee-H;if(q!==null&&q!==W||W<0||W>ee)break e;var de=M.slice(0,W),me=M.slice(W);if(me!==be)break e;var ye=Math.min(ue,W),Ae=xe.slice(0,ye),De=de.slice(0,ye);if(Ae!==De)break e;var je=xe.slice(ye),ke=de.slice(ye);return k(Ae,je,ke,be)}e:{if(q!==null&&q!==ue)break e;var We=ue,de=M.slice(0,We),me=M.slice(We);if(de!==xe)break e;var et=Math.min(H-We,ee-We),st=be.slice(be.length-et),ht=me.slice(me.length-et);if(st!==ht)break e;var je=be.slice(0,be.length-et),ke=me.slice(0,me.length-et);return k(xe,je,ke,st)}}if(pe.length>0&&ge&&ge.length===0)e:{var Ae=N.slice(0,pe.index),st=N.slice(pe.index+pe.length),ye=Ae.length,et=st.length;if(ee<ye+et)break e;var De=M.slice(0,ye),ht=M.slice(ee-et);if(Ae!==De||st!==ht)break e;var je=N.slice(ye,H-et),ke=M.slice(ye,ee-et);return k(Ae,je,ke,st)}return null}function $(N,M,C,pe){return r(N,M,C,pe,!0)}return $.INSERT=e,$.DELETE=n,$.EQUAL=t,ny=$,ny}var Hu={exports:{}};Hu.exports;var Ew;function yN(){return Ew||(Ew=1,(function(n,e){var t=200,r="__lodash_hash_undefined__",a=9007199254740991,l="[object Arguments]",c="[object Array]",h="[object Boolean]",m="[object Date]",p="[object Error]",v="[object Function]",_="[object GeneratorFunction]",E="[object Map]",A="[object Number]",S="[object Object]",O="[object Promise]",R="[object RegExp]",U="[object Set]",F="[object String]",Q="[object Symbol]",Y="[object WeakMap]",ie="[object ArrayBuffer]",ve="[object DataView]",L="[object Float32Array]",k="[object Float64Array]",V="[object Int8Array]",$="[object Int16Array]",N="[object Int32Array]",M="[object Uint8Array]",C="[object Uint8ClampedArray]",pe="[object Uint16Array]",ge="[object Uint32Array]",H=/[\\^$.*+?()[\]{}|]/g,ee=/\w*$/,ue=/^\[object .+?Constructor\]$/,xe=/^(?:0|[1-9]\d*)$/,be={};be[l]=be[c]=be[ie]=be[ve]=be[h]=be[m]=be[L]=be[k]=be[V]=be[$]=be[N]=be[E]=be[A]=be[S]=be[R]=be[U]=be[F]=be[Q]=be[M]=be[C]=be[pe]=be[ge]=!0,be[p]=be[v]=be[Y]=!1;var q=typeof go=="object"&&go&&go.Object===Object&&go,W=typeof self=="object"&&self&&self.Object===Object&&self,de=q||W||Function("return this")(),me=e&&!e.nodeType&&e,ye=me&&!0&&n&&!n.nodeType&&n,Ae=ye&&ye.exports===me;function De(x,j){return x.set(j[0],j[1]),x}function je(x,j){return x.add(j),x}function ke(x,j){for(var B=-1,ne=x?x.length:0;++B<ne&&j(x[B],B,x)!==!1;);return x}function We(x,j){for(var B=-1,ne=j.length,Ue=x.length;++B<ne;)x[Ue+B]=j[B];return x}function et(x,j,B,ne){for(var Ue=-1,Se=x?x.length:0;++Ue<Se;)B=j(B,x[Ue],Ue,x);return B}function st(x,j){for(var B=-1,ne=Array(x);++B<x;)ne[B]=j(B);return ne}function ht(x,j){return x?.[j]}function vt(x){var j=!1;if(x!=null&&typeof x.toString!="function")try{j=!!(x+"")}catch{}return j}function nn(x){var j=-1,B=Array(x.size);return x.forEach(function(ne,Ue){B[++j]=[Ue,ne]}),B}function zr(x,j){return function(B){return x(j(B))}}function li(x){var j=-1,B=Array(x.size);return x.forEach(function(ne){B[++j]=ne}),B}var Ui=Array.prototype,Ht=Function.prototype,jt=Object.prototype,Sr=de["__core-js_shared__"],Da=(function(){var x=/[^.]+$/.exec(Sr&&Sr.keys&&Sr.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""})(),Vi=Ht.toString,Ot=jt.hasOwnProperty,Nr=jt.toString,qi=RegExp("^"+Vi.call(Ot).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hr=Ae?de.Buffer:void 0,mr=de.Symbol,Bi=de.Uint8Array,kn=zr(Object.getPrototypeOf,Object),zi=Object.create,Hi=jt.propertyIsEnumerable,gr=Ui.splice,Zt=Object.getOwnPropertySymbols,Sn=Hr?Hr.isBuffer:void 0,Dt=zr(Object.keys,Object),Vs=yn(de,"DataView"),Cr=yn(de,"Map"),Jn=yn(de,"Promise"),Mn=yn(de,"Set"),Fr=yn(de,"WeakMap"),At=yn(Object,"create"),er=un(Vs),In=un(Cr),Pn=un(Jn),Fi=un(Mn),ci=un(Fr),Nn=mr?mr.prototype:void 0,ds=Nn?Nn.valueOf:void 0;function $r(x){var j=-1,B=x?x.length:0;for(this.clear();++j<B;){var ne=x[j];this.set(ne[0],ne[1])}}function qs(){this.__data__=At?At(null):{}}function $i(x){return this.has(x)&&delete this.__data__[x]}function Gi(x){var j=this.__data__;if(At){var B=j[x];return B===r?void 0:B}return Ot.call(j,x)?j[x]:void 0}function fs(x){var j=this.__data__;return At?j[x]!==void 0:Ot.call(j,x)}function pr(x,j){var B=this.__data__;return B[x]=At&&j===void 0?r:j,this}$r.prototype.clear=qs,$r.prototype.delete=$i,$r.prototype.get=Gi,$r.prototype.has=fs,$r.prototype.set=pr;function rn(x){var j=-1,B=x?x.length:0;for(this.clear();++j<B;){var ne=x[j];this.set(ne[0],ne[1])}}function yr(){this.__data__=[]}function vr(x){var j=this.__data__,B=Vn(j,x);if(B<0)return!1;var ne=j.length-1;return B==ne?j.pop():gr.call(j,B,1),!0}function Ft(x){var j=this.__data__,B=Vn(j,x);return B<0?void 0:j[B][1]}function sn(x){return Vn(this.__data__,x)>-1}function Rr(x,j){var B=this.__data__,ne=Vn(B,x);return ne<0?B.push([x,j]):B[ne][1]=j,this}rn.prototype.clear=yr,rn.prototype.delete=vr,rn.prototype.get=Ft,rn.prototype.has=sn,rn.prototype.set=Rr;function Jt(x){var j=-1,B=x?x.length:0;for(this.clear();++j<B;){var ne=x[j];this.set(ne[0],ne[1])}}function Vo(){this.__data__={hash:new $r,map:new(Cr||rn),string:new $r}}function La(x){return ys(this,x).delete(x)}function ka(x){return ys(this,x).get(x)}function Ir(x){return ys(this,x).has(x)}function ui(x,j){return ys(this,x).set(x,j),this}Jt.prototype.clear=Vo,Jt.prototype.delete=La,Jt.prototype.get=ka,Jt.prototype.has=Ir,Jt.prototype.set=ui;function Mt(x){this.__data__=new rn(x)}function tr(){this.__data__=new rn}function Un(x){return this.__data__.delete(x)}function jr(x){return this.__data__.get(x)}function $t(x){return this.__data__.has(x)}function Ki(x,j){var B=this.__data__;if(B instanceof rn){var ne=B.__data__;if(!Cr||ne.length<t-1)return ne.push([x,j]),this;B=this.__data__=new Jt(ne)}return B.set(x,j),this}Mt.prototype.clear=tr,Mt.prototype.delete=Un,Mt.prototype.get=jr,Mt.prototype.has=$t,Mt.prototype.set=Ki;function ms(x,j){var B=Qr(x)||zn(x)?st(x.length,String):[],ne=B.length,Ue=!!ne;for(var Se in x)Ot.call(x,Se)&&!(Ue&&(Se=="length"||Pa(Se,ne)))&&B.push(Se);return B}function br(x,j,B){var ne=x[j];(!(Ot.call(x,j)&&Kr(ne,B))||B===void 0&&!(j in x))&&(x[j]=B)}function Vn(x,j){for(var B=x.length;B--;)if(Kr(x[B][0],j))return B;return-1}function nr(x,j){return x&&fi(j,Hs(j),x)}function Bs(x,j,B,ne,Ue,Se,Ye){var Je;if(ne&&(Je=Se?ne(x,Ue,Se,Ye):ne(x)),Je!==void 0)return Je;if(!Ze(x))return x;var Et=Qr(x);if(Et){if(Je=Xi(x),!j)return di(x,Je)}else{var tt=Lr(x),Rt=tt==v||tt==_;if(ir(x))return Pt(x,j);if(tt==S||tt==l||Rt&&!Se){if(vt(x))return Se?x:{};if(Je=rr(Rt?{}:x),!j)return Yi(x,nr(Je,x))}else{if(!be[tt])return Se?x:{};Je=mi(x,tt,Bs,j)}}Ye||(Ye=new Mt);var hn=Ye.get(x);if(hn)return hn;if(Ye.set(x,Je),!Et)var Ut=B?ps(x):Hs(x);return ke(Ut||x,function(Qt,an){Ut&&(an=Qt,Qt=x[an]),br(Je,an,Bs(Qt,j,B,ne,an,x,Ye))}),Je}function Qi(x){return Ze(x)?zi(x):{}}function Ma(x,j,B){var ne=j(x);return Qr(x)?ne:We(ne,B(x))}function hi(x){return Nr.call(x)}function qn(x){if(!Ze(x)||gi(x))return!1;var j=On(x)||vt(x)?qi:ue;return j.test(un(x))}function Gt(x){if(!sr(x))return Dt(x);var j=[];for(var B in Object(x))Ot.call(x,B)&&B!="constructor"&&j.push(B);return j}function Pt(x,j){if(j)return x.slice();var B=new x.constructor(x.length);return x.copy(B),B}function Or(x){var j=new x.constructor(x.byteLength);return new Bi(j).set(new Bi(x)),j}function Gr(x,j){var B=j?Or(x.buffer):x.buffer;return new x.constructor(B,x.byteOffset,x.byteLength)}function ft(x,j,B){var ne=j?B(nn(x),!0):nn(x);return et(ne,De,new x.constructor)}function gs(x){var j=new x.constructor(x.source,ee.exec(x));return j.lastIndex=x.lastIndex,j}function Dr(x,j,B){var ne=j?B(li(x),!0):li(x);return et(ne,je,new x.constructor)}function zs(x){return ds?Object(ds.call(x)):{}}function jn(x,j){var B=j?Or(x.buffer):x.buffer;return new x.constructor(B,x.byteOffset,x.length)}function di(x,j){var B=-1,ne=x.length;for(j||(j=Array(ne));++B<ne;)j[B]=x[B];return j}function fi(x,j,B,ne){B||(B={});for(var Ue=-1,Se=j.length;++Ue<Se;){var Ye=j[Ue],Je=void 0;br(B,Ye,Je===void 0?x[Ye]:Je)}return B}function Yi(x,j){return fi(x,Kt(x),j)}function ps(x){return Ma(x,Hs,Kt)}function ys(x,j){var B=x.__data__;return vs(j)?B[typeof j=="string"?"string":"hash"]:B.map}function yn(x,j){var B=ht(x,j);return qn(B)?B:void 0}var Kt=Zt?zr(Zt,Object):Fs,Lr=hi;(Vs&&Lr(new Vs(new ArrayBuffer(1)))!=ve||Cr&&Lr(new Cr)!=E||Jn&&Lr(Jn.resolve())!=O||Mn&&Lr(new Mn)!=U||Fr&&Lr(new Fr)!=Y)&&(Lr=function(x){var j=Nr.call(x),B=j==S?x.constructor:void 0,ne=B?un(B):void 0;if(ne)switch(ne){case er:return ve;case In:return E;case Pn:return O;case Fi:return U;case ci:return Y}return j});function Xi(x){var j=x.length,B=x.constructor(j);return j&&typeof x[0]=="string"&&Ot.call(x,"index")&&(B.index=x.index,B.input=x.input),B}function rr(x){return typeof x.constructor=="function"&&!sr(x)?Qi(kn(x)):{}}function mi(x,j,B,ne){var Ue=x.constructor;switch(j){case ie:return Or(x);case h:case m:return new Ue(+x);case ve:return Gr(x,ne);case L:case k:case V:case $:case N:case M:case C:case pe:case ge:return jn(x,ne);case E:return ft(x,ne,B);case A:case F:return new Ue(x);case R:return gs(x);case U:return Dr(x,ne,B);case Q:return zs(x)}}function Pa(x,j){return j=j??a,!!j&&(typeof x=="number"||xe.test(x))&&x>-1&&x%1==0&&x<j}function vs(x){var j=typeof x;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?x!=="__proto__":x===null}function gi(x){return!!Da&&Da in x}function sr(x){var j=x&&x.constructor,B=typeof j=="function"&&j.prototype||jt;return x===B}function un(x){if(x!=null){try{return Vi.call(x)}catch{}try{return x+""}catch{}}return""}function Bn(x){return Bs(x,!0,!0)}function Kr(x,j){return x===j||x!==x&&j!==j}function zn(x){return bs(x)&&Ot.call(x,"callee")&&(!Hi.call(x,"callee")||Nr.call(x)==l)}var Qr=Array.isArray;function Yr(x){return x!=null&&xs(x.length)&&!On(x)}function bs(x){return xr(x)&&Yr(x)}var ir=Sn||Wi;function On(x){var j=Ze(x)?Nr.call(x):"";return j==v||j==_}function xs(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=a}function Ze(x){var j=typeof x;return!!x&&(j=="object"||j=="function")}function xr(x){return!!x&&typeof x=="object"}function Hs(x){return Yr(x)?ms(x):Gt(x)}function Fs(){return[]}function Wi(){return!1}n.exports=Bn})(Hu,Hu.exports)),Hu.exports}var Fu={exports:{}};Fu.exports;var ww;function vN(){return ww||(ww=1,(function(n,e){var t=200,r="__lodash_hash_undefined__",a=1,l=2,c=9007199254740991,h="[object Arguments]",m="[object Array]",p="[object AsyncFunction]",v="[object Boolean]",_="[object Date]",E="[object Error]",A="[object Function]",S="[object GeneratorFunction]",O="[object Map]",R="[object Number]",U="[object Null]",F="[object Object]",Q="[object Promise]",Y="[object Proxy]",ie="[object RegExp]",ve="[object Set]",L="[object String]",k="[object Symbol]",V="[object Undefined]",$="[object WeakMap]",N="[object ArrayBuffer]",M="[object DataView]",C="[object Float32Array]",pe="[object Float64Array]",ge="[object Int8Array]",H="[object Int16Array]",ee="[object Int32Array]",ue="[object Uint8Array]",xe="[object Uint8ClampedArray]",be="[object Uint16Array]",q="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,de=/^\[object .+?Constructor\]$/,me=/^(?:0|[1-9]\d*)$/,ye={};ye[C]=ye[pe]=ye[ge]=ye[H]=ye[ee]=ye[ue]=ye[xe]=ye[be]=ye[q]=!0,ye[h]=ye[m]=ye[N]=ye[v]=ye[M]=ye[_]=ye[E]=ye[A]=ye[O]=ye[R]=ye[F]=ye[ie]=ye[ve]=ye[L]=ye[$]=!1;var Ae=typeof go=="object"&&go&&go.Object===Object&&go,De=typeof self=="object"&&self&&self.Object===Object&&self,je=Ae||De||Function("return this")(),ke=e&&!e.nodeType&&e,We=ke&&!0&&n&&!n.nodeType&&n,et=We&&We.exports===ke,st=et&&Ae.process,ht=(function(){try{return st&&st.binding&&st.binding("util")}catch{}})(),vt=ht&&ht.isTypedArray;function nn(x,j){for(var B=-1,ne=x==null?0:x.length,Ue=0,Se=[];++B<ne;){var Ye=x[B];j(Ye,B,x)&&(Se[Ue++]=Ye)}return Se}function zr(x,j){for(var B=-1,ne=j.length,Ue=x.length;++B<ne;)x[Ue+B]=j[B];return x}function li(x,j){for(var B=-1,ne=x==null?0:x.length;++B<ne;)if(j(x[B],B,x))return!0;return!1}function Ui(x,j){for(var B=-1,ne=Array(x);++B<x;)ne[B]=j(B);return ne}function Ht(x){return function(j){return x(j)}}function jt(x,j){return x.has(j)}function Sr(x,j){return x?.[j]}function Da(x){var j=-1,B=Array(x.size);return x.forEach(function(ne,Ue){B[++j]=[Ue,ne]}),B}function Vi(x,j){return function(B){return x(j(B))}}function Ot(x){var j=-1,B=Array(x.size);return x.forEach(function(ne){B[++j]=ne}),B}var Nr=Array.prototype,qi=Function.prototype,Hr=Object.prototype,mr=je["__core-js_shared__"],Bi=qi.toString,kn=Hr.hasOwnProperty,zi=(function(){var x=/[^.]+$/.exec(mr&&mr.keys&&mr.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""})(),Hi=Hr.toString,gr=RegExp("^"+Bi.call(kn).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zt=et?je.Buffer:void 0,Sn=je.Symbol,Dt=je.Uint8Array,Vs=Hr.propertyIsEnumerable,Cr=Nr.splice,Jn=Sn?Sn.toStringTag:void 0,Mn=Object.getOwnPropertySymbols,Fr=Zt?Zt.isBuffer:void 0,At=Vi(Object.keys,Object),er=Kt(je,"DataView"),In=Kt(je,"Map"),Pn=Kt(je,"Promise"),Fi=Kt(je,"Set"),ci=Kt(je,"WeakMap"),Nn=Kt(Object,"create"),ds=un(er),$r=un(In),qs=un(Pn),$i=un(Fi),Gi=un(ci),fs=Sn?Sn.prototype:void 0,pr=fs?fs.valueOf:void 0;function rn(x){var j=-1,B=x==null?0:x.length;for(this.clear();++j<B;){var ne=x[j];this.set(ne[0],ne[1])}}function yr(){this.__data__=Nn?Nn(null):{},this.size=0}function vr(x){var j=this.has(x)&&delete this.__data__[x];return this.size-=j?1:0,j}function Ft(x){var j=this.__data__;if(Nn){var B=j[x];return B===r?void 0:B}return kn.call(j,x)?j[x]:void 0}function sn(x){var j=this.__data__;return Nn?j[x]!==void 0:kn.call(j,x)}function Rr(x,j){var B=this.__data__;return this.size+=this.has(x)?0:1,B[x]=Nn&&j===void 0?r:j,this}rn.prototype.clear=yr,rn.prototype.delete=vr,rn.prototype.get=Ft,rn.prototype.has=sn,rn.prototype.set=Rr;function Jt(x){var j=-1,B=x==null?0:x.length;for(this.clear();++j<B;){var ne=x[j];this.set(ne[0],ne[1])}}function Vo(){this.__data__=[],this.size=0}function La(x){var j=this.__data__,B=Pt(j,x);if(B<0)return!1;var ne=j.length-1;return B==ne?j.pop():Cr.call(j,B,1),--this.size,!0}function ka(x){var j=this.__data__,B=Pt(j,x);return B<0?void 0:j[B][1]}function Ir(x){return Pt(this.__data__,x)>-1}function ui(x,j){var B=this.__data__,ne=Pt(B,x);return ne<0?(++this.size,B.push([x,j])):B[ne][1]=j,this}Jt.prototype.clear=Vo,Jt.prototype.delete=La,Jt.prototype.get=ka,Jt.prototype.has=Ir,Jt.prototype.set=ui;function Mt(x){var j=-1,B=x==null?0:x.length;for(this.clear();++j<B;){var ne=x[j];this.set(ne[0],ne[1])}}function tr(){this.size=0,this.__data__={hash:new rn,map:new(In||Jt),string:new rn}}function Un(x){var j=yn(this,x).delete(x);return this.size-=j?1:0,j}function jr(x){return yn(this,x).get(x)}function $t(x){return yn(this,x).has(x)}function Ki(x,j){var B=yn(this,x),ne=B.size;return B.set(x,j),this.size+=B.size==ne?0:1,this}Mt.prototype.clear=tr,Mt.prototype.delete=Un,Mt.prototype.get=jr,Mt.prototype.has=$t,Mt.prototype.set=Ki;function ms(x){var j=-1,B=x==null?0:x.length;for(this.__data__=new Mt;++j<B;)this.add(x[j])}function br(x){return this.__data__.set(x,r),this}function Vn(x){return this.__data__.has(x)}ms.prototype.add=ms.prototype.push=br,ms.prototype.has=Vn;function nr(x){var j=this.__data__=new Jt(x);this.size=j.size}function Bs(){this.__data__=new Jt,this.size=0}function Qi(x){var j=this.__data__,B=j.delete(x);return this.size=j.size,B}function Ma(x){return this.__data__.get(x)}function hi(x){return this.__data__.has(x)}function qn(x,j){var B=this.__data__;if(B instanceof Jt){var ne=B.__data__;if(!In||ne.length<t-1)return ne.push([x,j]),this.size=++B.size,this;B=this.__data__=new Mt(ne)}return B.set(x,j),this.size=B.size,this}nr.prototype.clear=Bs,nr.prototype.delete=Qi,nr.prototype.get=Ma,nr.prototype.has=hi,nr.prototype.set=qn;function Gt(x,j){var B=zn(x),ne=!B&&Kr(x),Ue=!B&&!ne&&Yr(x),Se=!B&&!ne&&!Ue&&xr(x),Ye=B||ne||Ue||Se,Je=Ye?Ui(x.length,String):[],Et=Je.length;for(var tt in x)kn.call(x,tt)&&!(Ye&&(tt=="length"||Ue&&(tt=="offset"||tt=="parent")||Se&&(tt=="buffer"||tt=="byteLength"||tt=="byteOffset")||mi(tt,Et)))&&Je.push(tt);return Je}function Pt(x,j){for(var B=x.length;B--;)if(Bn(x[B][0],j))return B;return-1}function Or(x,j,B){var ne=j(x);return zn(x)?ne:zr(ne,B(x))}function Gr(x){return x==null?x===void 0?V:U:Jn&&Jn in Object(x)?Lr(x):sr(x)}function ft(x){return Ze(x)&&Gr(x)==h}function gs(x,j,B,ne,Ue){return x===j?!0:x==null||j==null||!Ze(x)&&!Ze(j)?x!==x&&j!==j:Dr(x,j,B,ne,gs,Ue)}function Dr(x,j,B,ne,Ue,Se){var Ye=zn(x),Je=zn(j),Et=Ye?m:rr(x),tt=Je?m:rr(j);Et=Et==h?F:Et,tt=tt==h?F:tt;var Rt=Et==F,hn=tt==F,Ut=Et==tt;if(Ut&&Yr(x)){if(!Yr(j))return!1;Ye=!0,Rt=!1}if(Ut&&!Rt)return Se||(Se=new nr),Ye||xr(x)?fi(x,j,B,ne,Ue,Se):Yi(x,j,Et,B,ne,Ue,Se);if(!(B&a)){var Qt=Rt&&kn.call(x,"__wrapped__"),an=hn&&kn.call(j,"__wrapped__");if(Qt||an){var Xr=Qt?x.value():x,Hn=an?j.value():j;return Se||(Se=new nr),Ue(Xr,Hn,B,ne,Se)}}return Ut?(Se||(Se=new nr),ps(x,j,B,ne,Ue,Se)):!1}function zs(x){if(!xs(x)||vs(x))return!1;var j=ir(x)?gr:de;return j.test(un(x))}function jn(x){return Ze(x)&&On(x.length)&&!!ye[Gr(x)]}function di(x){if(!gi(x))return At(x);var j=[];for(var B in Object(x))kn.call(x,B)&&B!="constructor"&&j.push(B);return j}function fi(x,j,B,ne,Ue,Se){var Ye=B&a,Je=x.length,Et=j.length;if(Je!=Et&&!(Ye&&Et>Je))return!1;var tt=Se.get(x);if(tt&&Se.get(j))return tt==j;var Rt=-1,hn=!0,Ut=B&l?new ms:void 0;for(Se.set(x,j),Se.set(j,x);++Rt<Je;){var Qt=x[Rt],an=j[Rt];if(ne)var Xr=Ye?ne(an,Qt,Rt,j,x,Se):ne(Qt,an,Rt,x,j,Se);if(Xr!==void 0){if(Xr)continue;hn=!1;break}if(Ut){if(!li(j,function(Hn,Wr){if(!jt(Ut,Wr)&&(Qt===Hn||Ue(Qt,Hn,B,ne,Se)))return Ut.push(Wr)})){hn=!1;break}}else if(!(Qt===an||Ue(Qt,an,B,ne,Se))){hn=!1;break}}return Se.delete(x),Se.delete(j),hn}function Yi(x,j,B,ne,Ue,Se,Ye){switch(B){case M:if(x.byteLength!=j.byteLength||x.byteOffset!=j.byteOffset)return!1;x=x.buffer,j=j.buffer;case N:return!(x.byteLength!=j.byteLength||!Se(new Dt(x),new Dt(j)));case v:case _:case R:return Bn(+x,+j);case E:return x.name==j.name&&x.message==j.message;case ie:case L:return x==j+"";case O:var Je=Da;case ve:var Et=ne&a;if(Je||(Je=Ot),x.size!=j.size&&!Et)return!1;var tt=Ye.get(x);if(tt)return tt==j;ne|=l,Ye.set(x,j);var Rt=fi(Je(x),Je(j),ne,Ue,Se,Ye);return Ye.delete(x),Rt;case k:if(pr)return pr.call(x)==pr.call(j)}return!1}function ps(x,j,B,ne,Ue,Se){var Ye=B&a,Je=ys(x),Et=Je.length,tt=ys(j),Rt=tt.length;if(Et!=Rt&&!Ye)return!1;for(var hn=Et;hn--;){var Ut=Je[hn];if(!(Ye?Ut in j:kn.call(j,Ut)))return!1}var Qt=Se.get(x);if(Qt&&Se.get(j))return Qt==j;var an=!0;Se.set(x,j),Se.set(j,x);for(var Xr=Ye;++hn<Et;){Ut=Je[hn];var Hn=x[Ut],Wr=j[Ut];if(ne)var qo=Ye?ne(Wr,Hn,Ut,j,x,Se):ne(Hn,Wr,Ut,x,j,Se);if(!(qo===void 0?Hn===Wr||Ue(Hn,Wr,B,ne,Se):qo)){an=!1;break}Xr||(Xr=Ut=="constructor")}if(an&&!Xr){var $s=x.constructor,Zi=j.constructor;$s!=Zi&&"constructor"in x&&"constructor"in j&&!(typeof $s=="function"&&$s instanceof $s&&typeof Zi=="function"&&Zi instanceof Zi)&&(an=!1)}return Se.delete(x),Se.delete(j),an}function ys(x){return Or(x,Hs,Xi)}function yn(x,j){var B=x.__data__;return Pa(j)?B[typeof j=="string"?"string":"hash"]:B.map}function Kt(x,j){var B=Sr(x,j);return zs(B)?B:void 0}function Lr(x){var j=kn.call(x,Jn),B=x[Jn];try{x[Jn]=void 0;var ne=!0}catch{}var Ue=Hi.call(x);return ne&&(j?x[Jn]=B:delete x[Jn]),Ue}var Xi=Mn?function(x){return x==null?[]:(x=Object(x),nn(Mn(x),function(j){return Vs.call(x,j)}))}:Fs,rr=Gr;(er&&rr(new er(new ArrayBuffer(1)))!=M||In&&rr(new In)!=O||Pn&&rr(Pn.resolve())!=Q||Fi&&rr(new Fi)!=ve||ci&&rr(new ci)!=$)&&(rr=function(x){var j=Gr(x),B=j==F?x.constructor:void 0,ne=B?un(B):"";if(ne)switch(ne){case ds:return M;case $r:return O;case qs:return Q;case $i:return ve;case Gi:return $}return j});function mi(x,j){return j=j??c,!!j&&(typeof x=="number"||me.test(x))&&x>-1&&x%1==0&&x<j}function Pa(x){var j=typeof x;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?x!=="__proto__":x===null}function vs(x){return!!zi&&zi in x}function gi(x){var j=x&&x.constructor,B=typeof j=="function"&&j.prototype||Hr;return x===B}function sr(x){return Hi.call(x)}function un(x){if(x!=null){try{return Bi.call(x)}catch{}try{return x+""}catch{}}return""}function Bn(x,j){return x===j||x!==x&&j!==j}var Kr=ft((function(){return arguments})())?ft:function(x){return Ze(x)&&kn.call(x,"callee")&&!Vs.call(x,"callee")},zn=Array.isArray;function Qr(x){return x!=null&&On(x.length)&&!ir(x)}var Yr=Fr||Wi;function bs(x,j){return gs(x,j)}function ir(x){if(!xs(x))return!1;var j=Gr(x);return j==A||j==S||j==p||j==Y}function On(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=c}function xs(x){var j=typeof x;return x!=null&&(j=="object"||j=="function")}function Ze(x){return x!=null&&typeof x=="object"}var xr=vt?Ht(vt):jn;function Hs(x){return Qr(x)?Gt(x):di(x)}function Fs(){return[]}function Wi(){return!1}n.exports=bs})(Fu,Fu.exports)),Fu.exports}var sf={},Tw;function _9(){if(Tw)return sf;Tw=1,Object.defineProperty(sf,"__esModule",{value:!0});const n=yN(),e=vN();var t;return(function(r){function a(m={},p={},v=!1){typeof m!="object"&&(m={}),typeof p!="object"&&(p={});let _=n(p);v||(_=Object.keys(_).reduce((E,A)=>(_[A]!=null&&(E[A]=_[A]),E),{}));for(const E in m)m[E]!==void 0&&p[E]===void 0&&(_[E]=m[E]);return Object.keys(_).length>0?_:void 0}r.compose=a;function l(m={},p={}){typeof m!="object"&&(m={}),typeof p!="object"&&(p={});const v=Object.keys(m).concat(Object.keys(p)).reduce((_,E)=>(e(m[E],p[E])||(_[E]=p[E]===void 0?null:p[E]),_),{});return Object.keys(v).length>0?v:void 0}r.diff=l;function c(m={},p={}){m=m||{};const v=Object.keys(p).reduce((_,E)=>(p[E]!==m[E]&&m[E]!==void 0&&(_[E]=p[E]),_),{});return Object.keys(m).reduce((_,E)=>(m[E]!==p[E]&&p[E]===void 0&&(_[E]=null),_),v)}r.invert=c;function h(m,p,v=!1){if(typeof m!="object")return p;if(typeof p!="object")return;if(!v)return p;const _=Object.keys(p).reduce((E,A)=>(m[A]===void 0&&(E[A]=p[A]),E),{});return Object.keys(_).length>0?_:void 0}r.transform=h})(t||(t={})),sf.default=t,sf}var af={},Aw;function bN(){if(Aw)return af;Aw=1,Object.defineProperty(af,"__esModule",{value:!0});var n;return(function(e){function t(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=t})(n||(n={})),af.default=n,af}var of={},Sw;function E9(){if(Sw)return of;Sw=1,Object.defineProperty(of,"__esModule",{value:!0});const n=bN();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const a=this.ops[this.index];if(a){const l=this.offset,c=n.default.length(a);if(r>=c-l?(r=c-l,this.index+=1,this.offset=0):this.offset+=r,typeof a.delete=="number")return{delete:r};{const h={};return a.attributes&&(h.attributes=a.attributes),typeof a.retain=="number"?h.retain=r:typeof a.retain=="object"&&a.retain!==null?h.retain=a.retain:typeof a.insert=="string"?h.insert=a.insert.substr(l,r):h.insert=a.insert,h}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?n.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,a=this.index,l=this.next(),c=this.ops.slice(this.index);return this.offset=r,this.index=a,[l].concat(c)}}else return[]}}return of.default=e,of}var Nw;function w9(){return Nw||(Nw=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const t=x9(),r=yN(),a=vN(),l=_9();e.AttributeMap=l.default;const c=bN();e.Op=c.default;const h=E9();e.OpIterator=h.default;const m="\0",p=(_,E)=>{if(typeof _!="object"||_===null)throw new Error(`cannot retain a ${typeof _}`);if(typeof E!="object"||E===null)throw new Error(`cannot retain a ${typeof E}`);const A=Object.keys(_)[0];if(!A||A!==Object.keys(E)[0])throw new Error(`embed types not matched: ${A} != ${Object.keys(E)[0]}`);return[A,_[A],E[A]]};class v{constructor(E){Array.isArray(E)?this.ops=E:E!=null&&Array.isArray(E.ops)?this.ops=E.ops:this.ops=[]}static registerEmbed(E,A){this.handlers[E]=A}static unregisterEmbed(E){delete this.handlers[E]}static getHandler(E){const A=this.handlers[E];if(!A)throw new Error(`no handlers for embed type "${E}"`);return A}insert(E,A){const S={};return typeof E=="string"&&E.length===0?this:(S.insert=E,A!=null&&typeof A=="object"&&Object.keys(A).length>0&&(S.attributes=A),this.push(S))}delete(E){return E<=0?this:this.push({delete:E})}retain(E,A){if(typeof E=="number"&&E<=0)return this;const S={retain:E};return A!=null&&typeof A=="object"&&Object.keys(A).length>0&&(S.attributes=A),this.push(S)}push(E){let A=this.ops.length,S=this.ops[A-1];if(E=r(E),typeof S=="object"){if(typeof E.delete=="number"&&typeof S.delete=="number")return this.ops[A-1]={delete:S.delete+E.delete},this;if(typeof S.delete=="number"&&E.insert!=null&&(A-=1,S=this.ops[A-1],typeof S!="object"))return this.ops.unshift(E),this;if(a(E.attributes,S.attributes)){if(typeof E.insert=="string"&&typeof S.insert=="string")return this.ops[A-1]={insert:S.insert+E.insert},typeof E.attributes=="object"&&(this.ops[A-1].attributes=E.attributes),this;if(typeof E.retain=="number"&&typeof S.retain=="number")return this.ops[A-1]={retain:S.retain+E.retain},typeof E.attributes=="object"&&(this.ops[A-1].attributes=E.attributes),this}}return A===this.ops.length?this.ops.push(E):this.ops.splice(A,0,E),this}chop(){const E=this.ops[this.ops.length-1];return E&&typeof E.retain=="number"&&!E.attributes&&this.ops.pop(),this}filter(E){return this.ops.filter(E)}forEach(E){this.ops.forEach(E)}map(E){return this.ops.map(E)}partition(E){const A=[],S=[];return this.forEach(O=>{(E(O)?A:S).push(O)}),[A,S]}reduce(E,A){return this.ops.reduce(E,A)}changeLength(){return this.reduce((E,A)=>A.insert?E+c.default.length(A):A.delete?E-A.delete:E,0)}length(){return this.reduce((E,A)=>E+c.default.length(A),0)}slice(E=0,A=1/0){const S=[],O=new h.default(this.ops);let R=0;for(;R<A&&O.hasNext();){let U;R<E?U=O.next(E-R):(U=O.next(A-R),S.push(U)),R+=c.default.length(U)}return new v(S)}compose(E){const A=new h.default(this.ops),S=new h.default(E.ops),O=[],R=S.peek();if(R!=null&&typeof R.retain=="number"&&R.attributes==null){let F=R.retain;for(;A.peekType()==="insert"&&A.peekLength()<=F;)F-=A.peekLength(),O.push(A.next());R.retain-F>0&&S.next(R.retain-F)}const U=new v(O);for(;A.hasNext()||S.hasNext();)if(S.peekType()==="insert")U.push(S.next());else if(A.peekType()==="delete")U.push(A.next());else{const F=Math.min(A.peekLength(),S.peekLength()),Q=A.next(F),Y=S.next(F);if(Y.retain){const ie={};if(typeof Q.retain=="number")ie.retain=typeof Y.retain=="number"?F:Y.retain;else if(typeof Y.retain=="number")Q.retain==null?ie.insert=Q.insert:ie.retain=Q.retain;else{const L=Q.retain==null?"insert":"retain",[k,V,$]=p(Q[L],Y.retain),N=v.getHandler(k);ie[L]={[k]:N.compose(V,$,L==="retain")}}const ve=l.default.compose(Q.attributes,Y.attributes,typeof Q.retain=="number");if(ve&&(ie.attributes=ve),U.push(ie),!S.hasNext()&&a(U.ops[U.ops.length-1],ie)){const L=new v(A.rest());return U.concat(L).chop()}}else typeof Y.delete=="number"&&(typeof Q.retain=="number"||typeof Q.retain=="object"&&Q.retain!==null)&&U.push(Y)}return U.chop()}concat(E){const A=new v(this.ops.slice());return E.ops.length>0&&(A.push(E.ops[0]),A.ops=A.ops.concat(E.ops.slice(1))),A}diff(E,A){if(this.ops===E.ops)return new v;const S=[this,E].map(Q=>Q.map(Y=>{if(Y.insert!=null)return typeof Y.insert=="string"?Y.insert:m;const ie=Q===E?"on":"with";throw new Error("diff() called "+ie+" non-document")}).join("")),O=new v,R=t(S[0],S[1],A,!0),U=new h.default(this.ops),F=new h.default(E.ops);return R.forEach(Q=>{let Y=Q[1].length;for(;Y>0;){let ie=0;switch(Q[0]){case t.INSERT:ie=Math.min(F.peekLength(),Y),O.push(F.next(ie));break;case t.DELETE:ie=Math.min(Y,U.peekLength()),U.next(ie),O.delete(ie);break;case t.EQUAL:ie=Math.min(U.peekLength(),F.peekLength(),Y);const ve=U.next(ie),L=F.next(ie);a(ve.insert,L.insert)?O.retain(ie,l.default.diff(ve.attributes,L.attributes)):O.push(L).delete(ie);break}Y-=ie}}),O.chop()}eachLine(E,A=`
`){const S=new h.default(this.ops);let O=new v,R=0;for(;S.hasNext();){if(S.peekType()!=="insert")return;const U=S.peek(),F=c.default.length(U)-S.peekLength(),Q=typeof U.insert=="string"?U.insert.indexOf(A,F)-F:-1;if(Q<0)O.push(S.next());else if(Q>0)O.push(S.next(Q));else{if(E(O,S.next(1).attributes||{},R)===!1)return;R+=1,O=new v}}O.length()>0&&E(O,{},R)}invert(E){const A=new v;return this.reduce((S,O)=>{if(O.insert)A.delete(c.default.length(O));else{if(typeof O.retain=="number"&&O.attributes==null)return A.retain(O.retain),S+O.retain;if(O.delete||typeof O.retain=="number"){const R=O.delete||O.retain;return E.slice(S,S+R).forEach(F=>{O.delete?A.push(F):O.retain&&O.attributes&&A.retain(c.default.length(F),l.default.invert(O.attributes,F.attributes))}),S+R}else if(typeof O.retain=="object"&&O.retain!==null){const R=E.slice(S,S+1),U=new h.default(R.ops).next(),[F,Q,Y]=p(O.retain,U.insert),ie=v.getHandler(F);return A.retain({[F]:ie.invert(Q,Y)},l.default.invert(O.attributes,U.attributes)),S+1}}return S},0),A.chop()}transform(E,A=!1){if(A=!!A,typeof E=="number")return this.transformPosition(E,A);const S=E,O=new h.default(this.ops),R=new h.default(S.ops),U=new v;for(;O.hasNext()||R.hasNext();)if(O.peekType()==="insert"&&(A||R.peekType()!=="insert"))U.retain(c.default.length(O.next()));else if(R.peekType()==="insert")U.push(R.next());else{const F=Math.min(O.peekLength(),R.peekLength()),Q=O.next(F),Y=R.next(F);if(Q.delete)continue;if(Y.delete)U.push(Y);else{const ie=Q.retain,ve=Y.retain;let L=typeof ve=="object"&&ve!==null?ve:F;if(typeof ie=="object"&&ie!==null&&typeof ve=="object"&&ve!==null){const k=Object.keys(ie)[0];if(k===Object.keys(ve)[0]){const V=v.getHandler(k);V&&(L={[k]:V.transform(ie[k],ve[k],A)})}}U.retain(L,l.default.transform(Q.attributes,Y.attributes,A))}}return U.chop()}transformPosition(E,A=!1){A=!!A;const S=new h.default(this.ops);let O=0;for(;S.hasNext()&&O<=E;){const R=S.peekLength(),U=S.peekType();if(S.next(),U==="delete"){E-=Math.min(R,E-O);continue}else U==="insert"&&(O<E||!A)&&(E+=R);O+=R}return E}}v.Op=c.default,v.OpIterator=h.default,v.AttributeMap=l.default,v.handlers={},e.default=v,n.exports=v,n.exports.default=v})(rf,rf.exports)),rf.exports}var Ls=w9();const Ie=r0(Ls);class oi extends hs{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}oi.blotName="break";oi.tagName="BR";let ii=class extends Zf{};const T9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Lm(n){return n.replace(/[&<>"']/g,e=>T9[e])}class wr extends vv{static allowedChildren=[wr,oi,hs,ii];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,t){const r=wr.order.indexOf(e),a=wr.order.indexOf(t);return r>=0||a>=0?r-a:e===t?0:e<t?-1:1}formatAt(e,t,r,a){if(wr.compare(this.statics.blotName,r)<0&&this.scroll.query(r,Oe.BLOT)){const l=this.isolate(e,t);a&&l.wrap(r,a)}else super.formatAt(e,t,r,a)}optimize(e){if(super.optimize(e),this.parent instanceof wr&&wr.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}const Cw=1;class Wn extends fh{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=xN(this)),this.cache.delta}deleteAt(e,t){super.deleteAt(e,t),this.cache={}}formatAt(e,t,r,a){t<=0||(this.scroll.query(r,Oe.BLOCK)?e+t===this.length()&&this.format(r,a):super.formatAt(e,Math.min(t,this.length()-e-1),r,a),this.cache={})}insertAt(e,t,r){if(r!=null){super.insertAt(e,t,r),this.cache={};return}if(t.length===0)return;const a=t.split(`
`),l=a.shift();l.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let c=this;a.reduce((h,m)=>(c=c.split(h,!0),c.insertAt(0,m),m.length),e+l.length)}insertBefore(e,t){const{head:r}=this.children;super.insertBefore(e,t),r instanceof oi&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Cw),this.cache.length}moveChildren(e,t){super.moveChildren(e,t),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t&&(e===0||e>=this.length()-Cw)){const a=this.clone();return e===0?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}const r=super.split(e,t);return this.cache={},r}}Wn.blotName="block";Wn.tagName="P";Wn.defaultChild=oi;Wn.allowedChildren=[oi,wr,hs,ii];class Ds extends hs{attach(){super.attach(),this.attributes=new Om(this.domNode)}delta(){return new Ie().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){const r=this.scroll.query(e,Oe.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,t)}formatAt(e,t,r,a){this.format(r,a)}insertAt(e,t,r){if(r!=null){super.insertAt(e,t,r);return}const a=t.split(`
`),l=a.pop(),c=a.map(m=>{const p=this.scroll.create(Wn.blotName);return p.insertAt(0,m),p}),h=this.split(e);c.forEach(m=>{this.parent.insertBefore(m,h)}),l&&this.parent.insertBefore(this.scroll.create("text",l),h)}}Ds.scope=Oe.BLOCK_BLOT;function xN(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(ur).reduce((t,r)=>r.length()===0?t:t.insert(r.value(),Is(r,{},e)),new Ie).insert(`
`,Is(n))}function Is(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(e={...e,...n.formats()},t&&delete e["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?e:Is(n.parent,e,t)}class Js extends hs{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,t,r){super(e,t),this.selection=r,this.textNode=document.createTextNode(Js.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let r=this,a=0;for(;r!=null&&r.statics.scope!==Oe.BLOCK_BLOT;)a+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Js.CONTENTS.length,r.optimize(),r.formatAt(a,Js.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const t=this.prev instanceof ii?this.prev:null,r=t?t.length():0,a=this.next instanceof ii?this.next:null,l=a?a.text:"",{textNode:c}=this,h=c.data.split(Js.CONTENTS).join("");c.data=Js.CONTENTS;let m;if(t)m=t,(h||a)&&(t.insertAt(t.length(),h+l),a&&a.remove());else if(a)m=a,a.insertAt(0,h);else{const p=document.createTextNode(h);m=this.scroll.create(p),this.parent.insertBefore(m,this)}if(this.remove(),e){const p=(E,A)=>t&&E===t.domNode?A:E===c?r+A-1:a&&E===a.domNode?r+h.length+A:null,v=p(e.start.node,e.start.offset),_=p(e.end.node,e.end.offset);if(v!==null&&_!==null)return{startNode:m.domNode,startOffset:v,endNode:m.domNode,endOffset:_}}return null}update(e,t){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(t.range=r)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=Js.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}}var ry={exports:{}},Rw;function A9(){return Rw||(Rw=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function a(m,p,v){this.fn=m,this.context=p,this.once=v||!1}function l(m,p,v,_,E){if(typeof v!="function")throw new TypeError("The listener must be a function");var A=new a(v,_||m,E),S=t?t+p:p;return m._events[S]?m._events[S].fn?m._events[S]=[m._events[S],A]:m._events[S].push(A):(m._events[S]=A,m._eventsCount++),m}function c(m,p){--m._eventsCount===0?m._events=new r:delete m._events[p]}function h(){this._events=new r,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],v,_;if(this._eventsCount===0)return p;for(_ in v=this._events)e.call(v,_)&&p.push(t?_.slice(1):_);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(v)):p},h.prototype.listeners=function(p){var v=t?t+p:p,_=this._events[v];if(!_)return[];if(_.fn)return[_.fn];for(var E=0,A=_.length,S=new Array(A);E<A;E++)S[E]=_[E].fn;return S},h.prototype.listenerCount=function(p){var v=t?t+p:p,_=this._events[v];return _?_.fn?1:_.length:0},h.prototype.emit=function(p,v,_,E,A,S){var O=t?t+p:p;if(!this._events[O])return!1;var R=this._events[O],U=arguments.length,F,Q;if(R.fn){switch(R.once&&this.removeListener(p,R.fn,void 0,!0),U){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,v),!0;case 3:return R.fn.call(R.context,v,_),!0;case 4:return R.fn.call(R.context,v,_,E),!0;case 5:return R.fn.call(R.context,v,_,E,A),!0;case 6:return R.fn.call(R.context,v,_,E,A,S),!0}for(Q=1,F=new Array(U-1);Q<U;Q++)F[Q-1]=arguments[Q];R.fn.apply(R.context,F)}else{var Y=R.length,ie;for(Q=0;Q<Y;Q++)switch(R[Q].once&&this.removeListener(p,R[Q].fn,void 0,!0),U){case 1:R[Q].fn.call(R[Q].context);break;case 2:R[Q].fn.call(R[Q].context,v);break;case 3:R[Q].fn.call(R[Q].context,v,_);break;case 4:R[Q].fn.call(R[Q].context,v,_,E);break;default:if(!F)for(ie=1,F=new Array(U-1);ie<U;ie++)F[ie-1]=arguments[ie];R[Q].fn.apply(R[Q].context,F)}}return!0},h.prototype.on=function(p,v,_){return l(this,p,v,_,!1)},h.prototype.once=function(p,v,_){return l(this,p,v,_,!0)},h.prototype.removeListener=function(p,v,_,E){var A=t?t+p:p;if(!this._events[A])return this;if(!v)return c(this,A),this;var S=this._events[A];if(S.fn)S.fn===v&&(!E||S.once)&&(!_||S.context===_)&&c(this,A);else{for(var O=0,R=[],U=S.length;O<U;O++)(S[O].fn!==v||E&&!S[O].once||_&&S[O].context!==_)&&R.push(S[O]);R.length?this._events[A]=R.length===1?R[0]:R:c(this,A)}return this},h.prototype.removeAllListeners=function(p){var v;return p?(v=t?t+p:p,this._events[v]&&c(this,v)):(this._events=new r,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=t,h.EventEmitter=h,n.exports=h})(ry)),ry.exports}var S9=A9();const N9=r0(S9),Jy=new WeakMap,e0=["error","warn","log","info"];let t0="warn";function _N(n){if(t0&&e0.indexOf(n)<=e0.indexOf(t0)){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];console[n](...t)}}function Oa(n){return e0.reduce((e,t)=>(e[t]=_N.bind(console,t,n),e),{})}Oa.level=n=>{t0=n};_N.level=Oa.level;const sy=Oa("quill:events"),C9=["selectionchange","mousedown","mouseup","click"];C9.forEach(n=>{document.addEventListener(n,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(a=>{const l=Jy.get(a);l&&l.emitter&&l.emitter.handleDOM(...t)})})});class Ce extends N9{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",sy.error)}emit(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return sy.log.call(sy,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];(this.domListeners[e.type]||[]).forEach(l=>{let{node:c,handler:h}=l;(e.target===c||c.contains(e.target))&&h(e,...r)})}listenDOM(e,t,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:r})}}const iy=Oa("quill:selection");class yl{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}}class R9{constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new yl(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Ce.sources.USER),1)}),this.emitter.on(Ce.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(Ce.events.SCROLL_UPDATE,(a,l)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const c=l.some(h=>h.type==="characterData"||h.type==="childList"||h.type==="attributes"&&h.target===this.root);this.update(c?Ce.sources.SILENT:a)}catch{}})}),this.emitter.on(Ce.events.SCROLL_OPTIMIZE,(r,a)=>{if(a.range){const{startNode:l,startOffset:c,endNode:h,endOffset:m}=a.range;this.setNativeRange(l,c,h,m),this.update(Ce.sources.SILENT)}}),this.update(Ce.sources.SILENT)}handleComposition(){this.emitter.on(Ce.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Ce.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Ce.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,Oe.BLOCK))){if(r.start.node!==this.cursor.textNode){const a=this.scroll.find(r.start.node,!1);if(a==null)return;if(a instanceof ur){const l=a.split(r.start.offset);a.parent.insertBefore(this.cursor,l)}else a.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;let a,[l,c]=this.scroll.leaf(e);if(l==null)return null;if(t>0&&c===l.length()){const[v]=this.scroll.leaf(e+1);if(v){const[_]=this.scroll.line(e),[E]=this.scroll.line(e+1);_===E&&(l=v,c=0)}}[a,c]=l.position(c,!0);const h=document.createRange();if(t>0)return h.setStart(a,c),[l,c]=this.scroll.leaf(e+t),l==null?null:([a,c]=l.position(c,!0),h.setEnd(a,c),h.getBoundingClientRect());let m="left",p;if(a instanceof Text){if(!a.data.length)return null;c<a.data.length?(h.setStart(a,c),h.setEnd(a,c+1)):(h.setStart(a,c-1),h.setEnd(a,c),m="right"),p=h.getBoundingClientRect()}else{if(!(l.domNode instanceof Element))return null;p=l.domNode.getBoundingClientRect(),c>0&&(m="right")}return{bottom:p.top+p.height,height:p.height,left:p[m],right:p[m],top:p.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const t=e.getRangeAt(0);if(t==null)return null;const r=this.normalizeNative(t);return iy.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&ay(this.root,document.activeElement)}normalizedToRange(e){const t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);const r=t.map(c=>{const[h,m]=c,p=this.scroll.find(h,!0),v=p.offset(this.scroll);return m===0?v:p instanceof ur?v+p.index(h,m):v+p.length()}),a=Math.min(Math.max(...r),this.scroll.length()-1),l=Math.min(a,...r);return new yl(l,a-l)}normalizeNative(e){if(!ay(this.root,e.startContainer)||!e.collapsed&&!ay(this.root,e.endContainer))return null;const t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(r=>{let{node:a,offset:l}=r;for(;!(a instanceof Text)&&a.childNodes.length>0;)if(a.childNodes.length>l)a=a.childNodes[l],l=0;else if(a.childNodes.length===l)a=a.lastChild,a instanceof Text?l=a.data.length:a.childNodes.length>0?l=a.childNodes.length:l=a.childNodes.length+1;else break;r.node=a,r.offset=l}),t}rangeToNative(e){const t=this.scroll.length(),r=(a,l)=>{a=Math.min(t-1,a);const[c,h]=this.scroll.leaf(a);return c?c.position(h,l):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(iy.info("setNativeRange",e,t,r,a),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const c=document.getSelection();if(c!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:h}=this.getNativeRange()||{};if(h==null||l||e!==h.startContainer||t!==h.startOffset||r!==h.endContainer||a!==h.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(a=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const m=document.createRange();m.setStart(e,t),m.setEnd(r,a),c.removeAllRanges(),c.addRange(m)}}else c.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.sources.API;if(typeof t=="string"&&(r=t,t=!1),iy.info("setRange",e),e!=null){const a=this.rangeToNative(e);this.setNativeRange(...a,t)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.sources.USER;const t=this.lastRange,[r,a]=this.getRange();if(this.lastRange=r,this.lastNative=a,this.lastRange!=null&&(this.savedRange=this.lastRange),!mo(t,this.lastRange)){if(!this.composing&&a!=null&&a.native.collapsed&&a.start.node!==this.cursor.textNode){const c=this.cursor.restore();c&&this.setNativeRange(c.startNode,c.startOffset,c.endNode,c.endOffset)}const l=[Ce.events.SELECTION_CHANGE,bc(this.lastRange),bc(t),e];this.emitter.emit(Ce.events.EDITOR_CHANGE,...l),e!==Ce.sources.SILENT&&this.emitter.emit(...l)}}}function ay(n,e){try{e.parentNode}catch{return!1}return n.contains(e)}const I9=/^[ -~]*$/;class j9{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();const r=Iw(e),a=new Ie;return D9(r.ops.slice()).reduce((c,h)=>{const m=Ls.Op.length(h);let p=h.attributes||{},v=!1,_=!1;if(h.insert!=null){if(a.retain(m),typeof h.insert=="string"){const S=h.insert;_=!S.endsWith(`
`)&&(t<=c||!!this.scroll.descendant(Ds,c)[0]),this.scroll.insertAt(c,S);const[O,R]=this.scroll.line(c);let U=wo({},Is(O));if(O instanceof Wn){const[F]=O.descendant(ur,R);F&&(U=wo(U,Is(F)))}p=Ls.AttributeMap.diff(U,p)||{}}else if(typeof h.insert=="object"){const S=Object.keys(h.insert)[0];if(S==null)return c;const O=this.scroll.query(S,Oe.INLINE)!=null;if(O)(t<=c||this.scroll.descendant(Ds,c)[0])&&(_=!0);else if(c>0){const[R,U]=this.scroll.descendant(ur,c-1);R instanceof ii?R.value()[U]!==`
`&&(v=!0):R instanceof hs&&R.statics.scope===Oe.INLINE_BLOT&&(v=!0)}if(this.scroll.insertAt(c,S,h.insert[S]),O){const[R]=this.scroll.descendant(ur,c);if(R){const U=wo({},Is(R));p=Ls.AttributeMap.diff(U,p)||{}}}}t+=m}else if(a.push(h),h.retain!==null&&typeof h.retain=="object"){const S=Object.keys(h.retain)[0];if(S==null)return c;this.scroll.updateEmbedAt(c,S,h.retain[S])}Object.keys(p).forEach(S=>{this.scroll.formatAt(c,m,S,p[S])});const E=v?1:0,A=_?1:0;return t+=E+A,a.retain(E),a.delete(A),c+m+E+A},0),a.reduce((c,h)=>typeof h.delete=="number"?(this.scroll.deleteAt(c,h.delete),c):c+Ls.Op.length(h),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new Ie().retain(e).delete(t))}formatLine(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(l=>{this.scroll.lines(e,Math.max(t,1)).forEach(c=>{c.format(l,r[l])})}),this.scroll.optimize();const a=new Ie().retain(e).retain(t,bc(r));return this.update(a)}formatText(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(l=>{this.scroll.formatAt(e,t,l,r[l])});const a=new Ie().retain(e).retain(t,bc(r));return this.update(a)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new Ie)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],a=[];t===0?this.scroll.path(e).forEach(h=>{const[m]=h;m instanceof Wn?r.push(m):m instanceof ur&&a.push(m)}):(r=this.scroll.lines(e,t),a=this.scroll.descendants(ur,e,t));const[l,c]=[r,a].map(h=>{const m=h.shift();if(m==null)return{};let p=Is(m);for(;Object.keys(p).length>0;){const v=h.shift();if(v==null)return p;p=O9(Is(v),p)}return p});return{...l,...c}}getHTML(e,t){const[r,a]=this.scroll.line(e);if(r){const l=r.length();return r.length()>=a+t&&!(a===0&&t===l)?mh(r,a,t,!0):mh(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,t){const r=Iw(t),a=new Ie().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(a)}insertEmbed(e,t,r){return this.scroll.insertAt(e,t,r),this.update(new Ie().retain(e).insert({[t]:r}))}insertText(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(r).forEach(a=>{this.scroll.formatAt(e,t.length,a,r[a])}),this.update(new Ie().retain(e).insert(t,bc(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==Wn.blotName)return!1;const t=e;return t.children.length>1?!1:t.children.head instanceof oi}removeFormat(e,t){const r=this.getText(e,t),[a,l]=this.scroll.line(e+t);let c=0,h=new Ie;a!=null&&(c=a.length()-l,h=a.delta().slice(l,l+c-1).insert(`
`));const p=this.getContents(e,t+c).diff(new Ie().insert(r).concat(h)),v=new Ie().retain(e).concat(p);return this.applyDelta(v)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const a=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(I9)&&this.scroll.find(t[0].target)){const l=this.scroll.find(t[0].target),c=Is(l),h=l.offset(this.scroll),m=t[0].oldValue.replace(Js.CONTENTS,""),p=new Ie().insert(m),v=new Ie().insert(l.value()),_=r&&{oldRange:jw(r.oldRange,-h),newRange:jw(r.newRange,-h)};e=new Ie().retain(h).concat(p.diff(v,_)).reduce((A,S)=>S.insert?A.insert(S.insert,c):A.push(S),new Ie),this.delta=a.compose(e)}else this.delta=this.getDelta(),(!e||!mo(a.compose(e),this.delta))&&(e=a.diff(this.delta,r));return e}}function mc(n,e,t){if(n.length===0){const[A]=oy(t.pop());return e<=0?`</li></${A}>`:`</li></${A}>${mc([],e-1,t)}`}const[{child:r,offset:a,length:l,indent:c,type:h},...m]=n,[p,v]=oy(h);if(c>e)return t.push(h),c===e+1?`<${p}><li${v}>${mh(r,a,l)}${mc(m,c,t)}`:`<${p}><li>${mc(n,e+1,t)}`;const _=t[t.length-1];if(c===e&&h===_)return`</li><li${v}>${mh(r,a,l)}${mc(m,c,t)}`;const[E]=oy(t.pop());return`</li></${E}>${mc(n,e-1,t)}`}function mh(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(e,t);if(n instanceof ii)return Lm(n.value().slice(e,e+t)).replaceAll(" ","&nbsp;");if(n instanceof ri){if(n.statics.blotName==="list-container"){const p=[];return n.children.forEachAt(e,t,(v,_,E)=>{const A="formats"in v&&typeof v.formats=="function"?v.formats():{};p.push({child:v,offset:_,length:E,indent:A.indent||0,type:A.list})}),mc(p,-1,[])}const a=[];if(n.children.forEachAt(e,t,(p,v,_)=>{a.push(mh(p,v,_))}),r||n.statics.blotName==="list")return a.join("");const{outerHTML:l,innerHTML:c}=n.domNode,[h,m]=l.split(`>${c}<`);return h==="<table"?`<table style="border: 1px solid #000;">${a.join("")}<${m}`:`${h}>${a.join("")}<${m}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}function O9(n,e){return Object.keys(e).reduce((t,r)=>{if(n[r]==null)return t;const a=e[r];return a===n[r]?t[r]=a:Array.isArray(a)?a.indexOf(n[r])<0?t[r]=a.concat([n[r]]):t[r]=a:t[r]=[a,n[r]],t},{})}function oy(n){const e=n==="ordered"?"ol":"ul";switch(n){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function Iw(n){return n.reduce((e,t)=>{if(typeof t.insert=="string"){const r=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,t.attributes)}return e.push(t)},new Ie)}function jw(n,e){let{index:t,length:r}=n;return new yl(t+e,r)}function D9(n){const e=[];return n.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((a,l)=>{l&&e.push({insert:`
`,attributes:t.attributes}),a&&e.push({insert:a,attributes:t.attributes})}):e.push(t)}),e}class Pi{static DEFAULTS={};constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}}const lf="\uFEFF";class xv extends hs{constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(lf),this.rightGuard=document.createTextNode(lf),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,r;const a=e.data.split(lf).join("");if(e===this.leftGuard)if(this.prev instanceof ii){const l=this.prev.length();this.prev.insertAt(l,a),t={startNode:this.prev.domNode,startOffset:l+a.length}}else r=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(r),this),t={startNode:r,startOffset:a.length};else e===this.rightGuard&&(this.next instanceof ii?(this.next.insertAt(0,a),t={startNode:this.next.domNode,startOffset:a.length}):(r=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(r),this.next),t={startNode:r,startOffset:a.length}));return e.data=lf,t}update(e,t){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const a=this.restore(r.target);a&&(t.range=a)}})}}class L9{isComposing=!1;constructor(e,t){this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof xv)&&(this.emitter.emit(Ce.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(Ce.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(Ce.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(Ce.events.COMPOSITION_END,e),this.isComposing=!1}}class Qc{static DEFAULTS={modules:{}};static themes={default:Qc};modules={};constructor(e,t){this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}const k9=n=>n.parentElement||n.getRootNode().host||null,M9=n=>{const e=n.getBoundingClientRect(),t="offsetWidth"in n&&Math.abs(e.width)/n.offsetWidth||1,r="offsetHeight"in n&&Math.abs(e.height)/n.offsetHeight||1;return{top:e.top,right:e.left+n.clientWidth*t,bottom:e.top+n.clientHeight*r,left:e.left}},cf=n=>{const e=parseInt(n,10);return Number.isNaN(e)?0:e},Ow=(n,e,t,r,a,l)=>n<t&&e>r?0:n<t?-(t-n+a):e>r?e-n>r-t?n+a-t:e-r+l:0,P9=(n,e)=>{const t=n.ownerDocument;let r=e,a=n;for(;a;){const l=a===t.body,c=l?{top:0,right:window.visualViewport?.width??t.documentElement.clientWidth,bottom:window.visualViewport?.height??t.documentElement.clientHeight,left:0}:M9(a),h=getComputedStyle(a),m=Ow(r.left,r.right,c.left,c.right,cf(h.scrollPaddingLeft),cf(h.scrollPaddingRight)),p=Ow(r.top,r.bottom,c.top,c.bottom,cf(h.scrollPaddingTop),cf(h.scrollPaddingBottom));if(m||p)if(l)t.defaultView?.scrollBy(m,p);else{const{scrollLeft:v,scrollTop:_}=a;p&&(a.scrollTop+=p),m&&(a.scrollLeft+=m);const E=a.scrollLeft-v,A=a.scrollTop-_;r={left:r.left-E,top:r.top-A,right:r.right-E,bottom:r.bottom-A}}a=l||h.position==="fixed"?null:k9(a)}},U9=100,V9=["block","break","cursor","inline","scroll","text"],q9=(n,e,t)=>{const r=new Lc;return V9.forEach(a=>{const l=e.query(a);l&&r.register(l)}),n.forEach(a=>{let l=e.query(a);l||t.error(`Cannot register "${a}" specified in "formats" config. Are you sure it was registered?`);let c=0;for(;l;)if(r.register(l),l="blotName"in l?l.requiredContainer??null:null,c+=1,c>U9){t.error(`Cycle detected in registering blot requiredContainer: "${a}"`);break}}),r},_c=Oa("quill"),uf=new Lc;ri.uiClass="ql-ui";class le{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:uf,theme:"default"};static events=Ce.events;static sources=Ce.sources;static version="2.0.3";static imports={delta:Ie,parchment:b9,"core/module":Pi,"core/theme":Qc};static debug(e){e===!0&&(e="log"),Oa.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Jy.get(e)||uf.find(e,t)}static import(e){return this.imports[e]==null&&_c.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],t=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,t):Object.keys(e).forEach(a=>{this.register(a,e[a],t)})}else{const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&_c.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&uf.register(t),typeof t.register=="function"&&t.register(uf)}}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=B9(e,t),this.container=this.options.container,this.container==null){_c.error("Invalid Quill container",e);return}this.options.debug&&le.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Jy.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Ce;const a=bv.blotName,l=this.options.registry.query(a);if(!l||!("blotName"in l))throw new Error(`Cannot initialize Quill without "${a}" blot`);if(this.scroll=new l(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new j9(this.scroll),this.selection=new R9(this.scroll,this.emitter),this.composition=new L9(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Ce.events.EDITOR_CHANGE,c=>{c===Ce.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Ce.events.SCROLL_UPDATE,(c,h)=>{const m=this.selection.lastRange,[p]=this.selection.getRange(),v=m&&p?{oldRange:m,newRange:p}:void 0;Ws.call(this,()=>this.editor.update(null,h,v),c)}),this.emitter.on(Ce.events.SCROLL_EMBED_UPDATE,(c,h)=>{const m=this.selection.lastRange,[p]=this.selection.getRange(),v=m&&p?{oldRange:m,newRange:p}:void 0;Ws.call(this,()=>{const _=new Ie().retain(c.offset(this)).retain({[c.statics.blotName]:h});return this.editor.update(_,[],v)},le.sources.USER)}),r){const c=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(c)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,r){return[e,t,,r]=ga(e,t,r),Ws.call(this,()=>this.editor.deleteText(e,t),r,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.sources.API;return Ws.call(this,()=>{const a=this.getSelection(!0);let l=new Ie;if(a==null)return l;if(this.scroll.query(e,Oe.BLOCK))l=this.editor.formatLine(a.index,a.length,{[e]:t});else{if(a.length===0)return this.selection.format(e,t),l;l=this.editor.formatText(a.index,a.length,{[e]:t})}return this.setSelection(a,Ce.sources.SILENT),l},r)}formatLine(e,t,r,a,l){let c;return[e,t,c,l]=ga(e,t,r,a,l),Ws.call(this,()=>this.editor.formatLine(e,t,c),l,e,0)}formatText(e,t,r,a,l){let c;return[e,t,c,l]=ga(e,t,r,a,l),Ws.call(this,()=>this.editor.formatText(e,t,c),l,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,t):r=this.selection.getBounds(e.index,e.length),!r)return null;const a=this.container.getBoundingClientRect();return{bottom:r.bottom-a.top,height:r.height,left:r.left-a.left,right:r.right-a.left,top:r.top-a.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=ga(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=ga(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=ga(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:le.sources.API;return Ws.call(this,()=>this.editor.insertEmbed(e,t,r),a,e)}insertText(e,t,r,a,l){let c;return[e,,c,l]=ga(e,0,r,a,l),Ws.call(this,()=>this.editor.insertText(e,t,c),l,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,r){return[e,t,,r]=ga(e,t,r),Ws.call(this,()=>this.editor.removeFormat(e,t),r,e)}scrollRectIntoView(e){P9(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;return Ws.call(this,()=>{e=new Ie(e);const r=this.getLength(),a=this.editor.deleteText(0,r),l=this.editor.insertContents(0,e),c=this.editor.deleteText(this.getLength()-1,1);return a.compose(l).compose(c)},t)}setSelection(e,t,r){e==null?this.selection.setRange(null,t||le.sources.API):([e,t,,r]=ga(e,t,r),this.selection.setRange(new yl(Math.max(0,e),t),r),r!==Ce.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;const r=new Ie().insert(e);return this.setContents(r,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.sources.USER;const t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;return Ws.call(this,()=>(e=new Ie(e),this.editor.applyDelta(e)),t,!0)}}function Dw(n){return typeof n=="string"?document.querySelector(n):n}function ly(n){return Object.entries(n??{}).reduce((e,t)=>{let[r,a]=t;return{...e,[r]:a===!0?{}:a}},{})}function Lw(n){return Object.fromEntries(Object.entries(n).filter(e=>e[1]!==void 0))}function B9(n,e){const t=Dw(n);if(!t)throw new Error("Invalid Quill container");const a=!e.theme||e.theme===le.DEFAULTS.theme?Qc:le.import(`themes/${e.theme}`);if(!a)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:l,...c}=le.DEFAULTS,{modules:h,...m}=a.DEFAULTS;let p=ly(e.modules);p!=null&&p.toolbar&&p.toolbar.constructor!==Object&&(p={...p,toolbar:{container:p.toolbar}});const v=wo({},ly(l),ly(h),p),_={...c,...Lw(m),...Lw(e)};let E=e.registry;return E?e.formats&&_c.warn('Ignoring "formats" option because "registry" is specified'):E=e.formats?q9(e.formats,_.registry,_c):_.registry,{..._,registry:E,container:t,theme:a,modules:Object.entries(v).reduce((A,S)=>{let[O,R]=S;if(!R)return A;const U=le.import(`modules/${O}`);return U==null?(_c.error(`Cannot load ${O} module. Are you sure you registered it?`),A):{...A,[O]:wo({},U.DEFAULTS||{},R)}},{}),bounds:Dw(_.bounds)}}function Ws(n,e,t,r){if(!this.isEnabled()&&e===Ce.sources.USER&&!this.allowReadOnlyEdits)return new Ie;let a=t==null?null:this.getSelection();const l=this.editor.delta,c=n();if(a!=null&&(t===!0&&(t=a.index),r==null?a=kw(a,c,e):r!==0&&(a=kw(a,t,r,e)),this.setSelection(a,Ce.sources.SILENT)),c.length()>0){const h=[Ce.events.TEXT_CHANGE,c,l,e];this.emitter.emit(Ce.events.EDITOR_CHANGE,...h),e!==Ce.sources.SILENT&&this.emitter.emit(...h)}return c}function ga(n,e,t,r,a){let l={};return typeof n.index=="number"&&typeof n.length=="number"?typeof e!="number"?(a=r,r=t,t=e,e=n.length,n=n.index):(e=n.length,n=n.index):typeof e!="number"&&(a=r,r=t,t=e,e=0),typeof t=="object"?(l=t,a=r):typeof t=="string"&&(r!=null?l[t]=r:a=t),a=a||Ce.sources.API,[n,e,l,a]}function kw(n,e,t,r){const a=typeof t=="number"?t:0;if(n==null)return null;let l,c;return e&&typeof e.transformPosition=="function"?[l,c]=[n.index,n.index+n.length].map(h=>e.transformPosition(h,r!==Ce.sources.USER)):[l,c]=[n.index,n.index+n.length].map(h=>h<e||h===e&&r===Ce.sources.USER?h:a>=0?h+a:Math.max(e,h+a)),new yl(l,c-l)}class Nl extends Dm{}function Mw(n){return n instanceof Wn||n instanceof Ds}function Pw(n){return typeof n.updateContent=="function"}class z9 extends bv{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Wn;static allowedChildren=[Wn,Ds,Nl];constructor(e,t,r){let{emitter:a}=r;super(e,t),this.emitter=a,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",l=>this.handleDragStart(l))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(Ce.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(Ce.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(Ce.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){const[r,a]=this.line(e),[l]=this.line(e+t);if(super.deleteAt(e,t),l!=null&&r!==l&&a>0){if(r instanceof Ds||l instanceof Ds){this.optimize();return}const c=l.children.head instanceof oi?null:l.children.head;r.moveChildren(l,c),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,r,a){super.formatAt(e,t,r,a),this.optimize()}insertAt(e,t,r){if(e>=this.length())if(r==null||this.scroll.query(t,Oe.BLOCK)==null){const a=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(a),r==null&&t.endsWith(`
`)?a.insertAt(0,t.slice(0,-1),r):a.insertAt(0,t,r)}else{const a=this.scroll.create(t,r);this.appendChild(a)}else super.insertAt(e,t,r);this.optimize()}insertBefore(e,t){if(e.statics.scope===Oe.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,t)}else super.insertBefore(e,t)}insertContents(e,t){const r=this.deltaToRenderBlocks(t.concat(new Ie().insert(`
`))),a=r.pop();if(a==null)return;this.batchStart();const l=r.shift();if(l){const m=l.type==="block"&&(l.delta.length()===0||!this.descendant(Ds,e)[0]&&e<this.length()),p=l.type==="block"?l.delta:new Ie().insert({[l.key]:l.value});cy(this,e,p);const v=l.type==="block"?1:0,_=e+p.length()+v;m&&this.insertAt(_-1,`
`);const E=Is(this.line(e)[0]),A=Ls.AttributeMap.diff(E,l.attributes)||{};Object.keys(A).forEach(S=>{this.formatAt(_-1,1,S,A[S])}),e=_}let[c,h]=this.children.find(e);if(r.length&&(c&&(c=c.split(h),h=0),r.forEach(m=>{if(m.type==="block"){const p=this.createBlock(m.attributes,c||void 0);cy(p,0,m.delta)}else{const p=this.create(m.key,m.value);this.insertBefore(p,c||void 0),Object.keys(m.attributes).forEach(v=>{p.format(v,m.attributes[v])})}})),a.type==="block"&&a.delta.length()){const m=c?c.offset(c.scroll)+h:this.length();cy(this,m,a.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const t=this.path(e).pop();if(!t)return[null,-1];const[r,a]=t;return r instanceof ur?[r,a]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(Mw,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(a,l,c)=>{let h=[],m=c;return a.children.forEachAt(l,c,(p,v,_)=>{Mw(p)?h.push(p):p instanceof Dm&&(h=h.concat(r(p,v,m))),m-=_}),h};return r(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(Ce.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=Ce.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:a}=r;const l=this.find(a,!0);return l&&!Pw(l)}),e.length>0&&this.emitter.emit(Ce.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(Ce.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,r){const[a]=this.descendant(l=>l instanceof Ds,e);a&&a.statics.blotName===t&&Pw(a)&&a.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const t=[];let r=new Ie;return e.forEach(a=>{const l=a?.insert;if(l)if(typeof l=="string"){const c=l.split(`
`);c.slice(0,-1).forEach(m=>{r.insert(m,a.attributes),t.push({type:"block",delta:r,attributes:a.attributes??{}}),r=new Ie});const h=c[c.length-1];h&&r.insert(h,a.attributes)}else{const c=Object.keys(l)[0];if(!c)return;this.query(c,Oe.INLINE)?r.push(a):(r.length()&&t.push({type:"block",delta:r,attributes:{}}),r=new Ie,t.push({type:"blockEmbed",key:c,value:l[c],attributes:a.attributes??{}}))}}),r.length()&&t.push({type:"block",delta:r,attributes:{}}),t}createBlock(e,t){let r;const a={};Object.entries(e).forEach(h=>{let[m,p]=h;this.query(m,Oe.BLOCK&Oe.BLOT)!=null?r=m:a[m]=p});const l=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(l,t||void 0);const c=l.length();return Object.entries(a).forEach(h=>{let[m,p]=h;l.formatAt(0,c,m,p)}),l}}function cy(n,e,t){t.reduce((r,a)=>{const l=Ls.Op.length(a);let c=a.attributes||{};if(a.insert!=null){if(typeof a.insert=="string"){const h=a.insert;n.insertAt(r,h);const[m]=n.descendant(ur,r),p=Is(m);c=Ls.AttributeMap.diff(p,c)||{}}else if(typeof a.insert=="object"){const h=Object.keys(a.insert)[0];if(h==null)return r;if(n.insertAt(r,h,a.insert[h]),n.scroll.query(h,Oe.INLINE)!=null){const[p]=n.descendant(ur,r),v=Is(p);c=Ls.AttributeMap.diff(v,c)||{}}}}return Object.keys(c).forEach(h=>{n.formatAt(r,l,h,c[h])}),r+l},e)}const _v={scope:Oe.BLOCK,whitelist:["right","center","justify"]},H9=new Li("align","align",_v),EN=new ai("align","ql-align",_v),wN=new Uo("align","text-align",_v);class TN extends Uo{value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(a=>`00${parseInt(a,10).toString(16)}`.slice(-2)).join("")}`):t}}const F9=new ai("color","ql-color",{scope:Oe.INLINE}),Ev=new TN("color","color",{scope:Oe.INLINE}),$9=new ai("background","ql-bg",{scope:Oe.INLINE}),wv=new TN("background","background-color",{scope:Oe.INLINE});class Cl extends Nl{static create(e){const t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${Lm(this.code(e,t))}
</pre>`}}class Ar extends Wn{static TAB="  ";static register(){le.register(Cl)}}class Tv extends wr{}Tv.blotName="code";Tv.tagName="CODE";Ar.blotName="code-block";Ar.className="ql-code-block";Ar.tagName="DIV";Cl.blotName="code-block-container";Cl.className="ql-code-block-container";Cl.tagName="DIV";Cl.allowedChildren=[Ar];Ar.allowedChildren=[ii,oi,Js];Ar.requiredContainer=Cl;const Av={scope:Oe.BLOCK,whitelist:["rtl"]},AN=new Li("direction","dir",Av),SN=new ai("direction","ql-direction",Av),NN=new Uo("direction","direction",Av),CN={scope:Oe.INLINE,whitelist:["serif","monospace"]},RN=new ai("font","ql-font",CN);class G9 extends Uo{value(e){return super.value(e).replace(/["']/g,"")}}const IN=new G9("font","font-family",CN),jN=new ai("size","ql-size",{scope:Oe.INLINE,whitelist:["small","large","huge"]}),ON=new Uo("size","font-size",{scope:Oe.INLINE,whitelist:["10px","18px","32px"]}),K9=Oa("quill:keyboard"),Q9=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class km extends Pi{static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!t[r]!==e[r]&&t[r]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=X9(e);if(a==null){K9.warn("Attempted to add invalid keyboard binding",a);return}typeof t=="function"&&(t={handler:t}),typeof r=="function"&&(r={handler:r}),(Array.isArray(a.key)?a.key:[a.key]).forEach(c=>{const h={...a,key:c,...t,...r};this.bindings[h.key]=this.bindings[h.key]||[],this.bindings[h.key].push(h)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const a=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(U=>km.match(e,U));if(a.length===0)return;const l=le.find(e.target,!0);if(l&&l.scroll!==this.quill.scroll)return;const c=this.quill.getSelection();if(c==null||!this.quill.hasFocus())return;const[h,m]=this.quill.getLine(c.index),[p,v]=this.quill.getLeaf(c.index),[_,E]=c.length===0?[p,v]:this.quill.getLeaf(c.index+c.length),A=p instanceof Zf?p.value().slice(0,v):"",S=_ instanceof Zf?_.value().slice(E):"",O={collapsed:c.length===0,empty:c.length===0&&h.length()<=1,format:this.quill.getFormat(c),line:h,offset:m,prefix:A,suffix:S,event:e};a.some(U=>{if(U.collapsed!=null&&U.collapsed!==O.collapsed||U.empty!=null&&U.empty!==O.empty||U.offset!=null&&U.offset!==O.offset)return!1;if(Array.isArray(U.format)){if(U.format.every(F=>O.format[F]==null))return!1}else if(typeof U.format=="object"&&!Object.keys(U.format).every(F=>U.format[F]===!0?O.format[F]!=null:U.format[F]===!1?O.format[F]==null:mo(U.format[F],O.format[F])))return!1;return U.prefix!=null&&!U.prefix.test(O.prefix)||U.suffix!=null&&!U.suffix.test(O.suffix)?!1:U.handler.call(this,c,O,U)!==!0})&&e.preventDefault()})}handleBackspace(e,t){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let a={};const[l]=this.quill.getLine(e.index);let c=new Ie().retain(e.index-r).delete(r);if(t.offset===0){const[h]=this.quill.getLine(e.index-1);if(h&&!(h.statics.blotName==="block"&&h.length()<=1)){const p=l.formats(),v=this.quill.getFormat(e.index-1,1);if(a=Ls.AttributeMap.diff(p,v)||{},Object.keys(a).length>0){const _=new Ie().retain(e.index+l.length()-2).retain(1,a);c=c.compose(_)}}}this.quill.updateContents(c,le.sources.USER),this.quill.focus()}handleDelete(e,t){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let a={};const[l]=this.quill.getLine(e.index);let c=new Ie().retain(e.index).delete(r);if(t.offset>=l.length()-1){const[h]=this.quill.getLine(e.index+1);if(h){const m=l.formats(),p=this.quill.getFormat(e.index,1);a=Ls.AttributeMap.diff(m,p)||{},Object.keys(a).length>0&&(c=c.retain(h.length()-1).retain(1,a))}}this.quill.updateContents(c,le.sources.USER),this.quill.focus()}handleDeleteRange(e){Sv({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){const r=Object.keys(t.format).reduce((l,c)=>(this.quill.scroll.query(c,Oe.BLOCK)&&!Array.isArray(t.format[c])&&(l[c]=t.format[c]),l),{}),a=new Ie().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(e.index+1,le.sources.SILENT),this.quill.focus()}}const Y9={bindings:{bold:uy("bold"),italic:uy("italic"),underline:uy("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",le.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",le.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,e){e.format.indent!=null?this.quill.format("indent","-1",le.sources.USER):e.format.list!=null&&this.quill.format("list",!1,le.sources.USER)}},"indent code-block":Uw(!0),"outdent code-block":Uw(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,le.sources.USER)}},tab:{key:"Tab",handler(n,e){if(e.format.table)return!0;this.quill.history.cutoff();const t=new Ie().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(t,le.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,le.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,le.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,e){const t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(n.index,n.length,t,le.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){const[e,t]=this.quill.getLine(n.index),r={...e.formats(),list:"checked"},a=new Ie().retain(n.index).insert(`
`,r).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(n.index+1,le.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,e){const[t,r]=this.quill.getLine(n.index),a=new Ie().retain(n.index).insert(`
`,e.format).retain(t.length()-r-1).retain(1,{header:null});this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(n.index+1,le.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){const e=this.quill.getModule("table");if(e){const[t,r,a,l]=e.getTable(n),c=W9(t,r,a,l);if(c==null)return;let h=t.offset();if(c<0){const m=new Ie().retain(h).insert(`
`);this.quill.updateContents(m,le.sources.USER),this.quill.setSelection(n.index+1,n.length,le.sources.SILENT)}else if(c>0){h+=t.length();const m=new Ie().retain(h).insert(`
`);this.quill.updateContents(m,le.sources.USER),this.quill.setSelection(h,le.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,e){const{event:t,line:r}=e,a=r.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(a-1,le.sources.USER):this.quill.setSelection(a+r.length(),le.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,e){if(this.quill.scroll.query("list")==null)return!0;const{length:t}=e.prefix,[r,a]=this.quill.getLine(n.index);if(a>t)return!0;let l;switch(e.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(n.index," ",le.sources.USER),this.quill.history.cutoff();const c=new Ie().retain(n.index-a).delete(t+1).retain(r.length()-2-a).retain(1,{list:l});return this.quill.updateContents(c,le.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-t,le.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){const[e,t]=this.quill.getLine(n.index);let r=2,a=e;for(;a!=null&&a.length()<=1&&a.formats()["code-block"];)if(a=a.prev,r-=1,r<=0){const l=new Ie().retain(n.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(l,le.sources.USER),this.quill.setSelection(n.index-1,le.sources.SILENT),!1}return!0}},"embed left":hf("ArrowLeft",!1),"embed left shift":hf("ArrowLeft",!0),"embed right":hf("ArrowRight",!1),"embed right shift":hf("ArrowRight",!0),"table down":Vw(!1),"table up":Vw(!0)}};km.DEFAULTS=Y9;function Uw(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(e,t){let{event:r}=t;const a=this.quill.scroll.query("code-block"),{TAB:l}=a;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,l,le.sources.USER),this.quill.setSelection(e.index+l.length,le.sources.SILENT);return}const c=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:h,length:m}=e;c.forEach((p,v)=>{n?(p.insertAt(0,l),v===0?h+=l.length:m+=l.length):p.domNode.textContent.startsWith(l)&&(p.deleteAt(0,l.length),v===0?h-=l.length:m-=l.length)}),this.quill.update(le.sources.USER),this.quill.setSelection(h,m,le.sources.SILENT)}}}function hf(n,e){return{key:n,shiftKey:e,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:a}=r;n==="ArrowRight"&&(a+=r.length+1);const[l]=this.quill.getLeaf(a);return l instanceof hs?(n==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,le.sources.USER):this.quill.setSelection(r.index-1,le.sources.USER):e?this.quill.setSelection(r.index,r.length+1,le.sources.USER):this.quill.setSelection(r.index+r.length+1,le.sources.USER),!1):!0}}}function uy(n){return{key:n[0],shortKey:!0,handler(e,t){this.quill.format(n,!t.format[n],le.sources.USER)}}}function Vw(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){const r=n?"prev":"next",a=t.line,l=a.parent[r];if(l!=null){if(l.statics.blotName==="table-row"){let c=l.children.head,h=a;for(;h.prev!=null;)h=h.prev,c=c.next;const m=c.offset(this.quill.scroll)+Math.min(t.offset,c.length()-1);this.quill.setSelection(m,0,le.sources.USER)}}else{const c=a.table()[r];c!=null&&(n?this.quill.setSelection(c.offset(this.quill.scroll)+c.length()-1,0,le.sources.USER):this.quill.setSelection(c.offset(this.quill.scroll),0,le.sources.USER))}return!1}}}function X9(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=bc(n);else return null;return n.shortKey&&(n[Q9]=n.shortKey,delete n.shortKey),n}function Sv(n){let{quill:e,range:t}=n;const r=e.getLines(t);let a={};if(r.length>1){const l=r[0].formats(),c=r[r.length-1].formats();a=Ls.AttributeMap.diff(c,l)||{}}e.deleteText(t,le.sources.USER),Object.keys(a).length>0&&e.formatLine(t.index,1,a,le.sources.USER),e.setSelection(t.index,le.sources.SILENT)}function W9(n,e,t,r){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?r===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const Z9=/font-weight:\s*normal/,J9=["P","OL","UL"],qw=n=>n&&J9.includes(n.tagName),eP=n=>{Array.from(n.querySelectorAll("br")).filter(e=>qw(e.previousElementSibling)&&qw(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},tP=n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(Z9)).forEach(e=>{const t=n.createDocumentFragment();t.append(...e.childNodes),e.parentNode?.replaceChild(t,e)})};function nP(n){n.querySelector('[id^="docs-internal-guid-"]')&&(tP(n),eP(n))}const rP=/\bmso-list:[^;]*ignore/i,sP=/\bmso-list:[^;]*\bl(\d+)/i,iP=/\bmso-list:[^;]*\blevel(\d+)/i,aP=(n,e)=>{const t=n.getAttribute("style"),r=t?.match(sP);if(!r)return null;const a=Number(r[1]),l=t?.match(iP),c=l?Number(l[1]):1,h=new RegExp(`@list l${a}:level${c}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),m=e.match(h),p=m&&m[1]==="bullet"?"bullet":"ordered";return{id:a,indent:c,type:p,element:n}},oP=n=>{const e=Array.from(n.querySelectorAll("[style*=mso-list]")),t=[],r=[];e.forEach(c=>{(c.getAttribute("style")||"").match(rP)?t.push(c):r.push(c)}),t.forEach(c=>c.parentNode?.removeChild(c));const a=n.documentElement.innerHTML,l=r.map(c=>aP(c,a)).filter(c=>c);for(;l.length;){const c=[];let h=l.shift();for(;h;)c.push(h),h=l.length&&l[0]?.element===h.element.nextElementSibling&&l[0].id===h.id?l.shift():null;const m=document.createElement("ul");c.forEach(_=>{const E=document.createElement("li");E.setAttribute("data-list",_.type),_.indent>1&&E.setAttribute("class",`ql-indent-${_.indent-1}`),E.innerHTML=_.element.innerHTML,m.appendChild(E)});const p=c[0]?.element,{parentNode:v}=p??{};p&&v?.replaceChild(m,p),c.slice(1).forEach(_=>{let{element:E}=_;v?.removeChild(E)})}};function lP(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&oP(n)}const cP=[lP,nP],uP=n=>{n.documentElement&&cP.forEach(e=>{e(n)})},hP=Oa("quill:clipboard"),dP=[[Node.TEXT_NODE,AP],[Node.TEXT_NODE,zw],["br",vP],[Node.ELEMENT_NODE,zw],[Node.ELEMENT_NODE,yP],[Node.ELEMENT_NODE,pP],[Node.ELEMENT_NODE,wP],["li",_P],["ol, ul",EP],["pre",bP],["tr",TP],["b",hy("bold")],["i",hy("italic")],["strike",hy("strike")],["style",xP]],fP=[H9,AN].reduce((n,e)=>(n[e.keyName]=e,n),{}),Bw=[wN,wv,Ev,NN,IN,ON].reduce((n,e)=>(n[e.keyName]=e,n),{});class mP extends Pi{static DEFAULTS={matchers:[]};constructor(e,t){super(e,t),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],dP.concat(this.options.matchers??[]).forEach(r=>{let[a,l]=r;this.addMatcher(a,l)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:r}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a[Ar.blotName])return new Ie().insert(r||"",{[Ar.blotName]:a[Ar.blotName]});if(!t)return new Ie().insert(r||"",a);const l=this.convertHTML(t);return Dh(l,`
`)&&(l.ops[l.ops.length-1].attributes==null||a.table)?l.compose(new Ie().retain(l.length()-1).delete(1)):l}normalizeHTML(e){uP(e)}convertHTML(e){const t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);const r=t.body,a=new WeakMap,[l,c]=this.prepareMatching(r,a);return Nv(this.quill.scroll,r,l,c,a)}dangerouslyPasteHTML(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:le.sources.API;if(typeof e=="string"){const a=this.convert({html:e,text:""});this.quill.setContents(a,t),this.quill.setSelection(0,le.sources.SILENT)}else{const a=this.convert({html:t,text:""});this.quill.updateContents(new Ie().retain(e).concat(a),r),this.quill.setSelection(e+a.length(),le.sources.SILENT)}}onCaptureCopy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:a,text:l}=this.onCopy(r,t);e.clipboardData?.setData("text/plain",l),e.clipboardData?.setData("text/html",a),t&&Sv({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const t=this.quill.getSelection(!0);if(t==null)return;const r=e.clipboardData?.getData("text/html");let a=e.clipboardData?.getData("text/plain");if(!r&&!a){const c=e.clipboardData?.getData("text/uri-list");c&&(a=this.normalizeURIList(c))}const l=Array.from(e.clipboardData?.files||[]);if(!r&&l.length>0){this.quill.uploader.upload(t,l);return}if(r&&l.length>0){const c=new DOMParser().parseFromString(r,"text/html");if(c.body.childElementCount===1&&c.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(t,l);return}}this.onPaste(t,{html:r,text:a})}onCopy(e){const t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:r,html:a}=t;const l=this.quill.getFormat(e.index),c=this.convert({text:r,html:a},l);hP.log("onPaste",c,{text:r,html:a});const h=new Ie().retain(e.index).delete(e.length).concat(c);this.quill.updateContents(h,le.sources.USER),this.quill.setSelection(h.length()-e.length,le.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){const r=[],a=[];return this.matchers.forEach(l=>{const[c,h]=l;switch(c){case Node.TEXT_NODE:a.push(h);break;case Node.ELEMENT_NODE:r.push(h);break;default:Array.from(e.querySelectorAll(c)).forEach(m=>{t.has(m)?t.get(m)?.push(h):t.set(m,[h])});break}}),[r,a]}}function Rl(n,e,t,r){return r.query(e)?n.reduce((a,l)=>{if(!l.insert)return a;if(l.attributes&&l.attributes[e])return a.push(l);const c=t?{[e]:t}:{};return a.insert(l.insert,{...c,...l.attributes})},new Ie):n}function Dh(n,e){let t="";for(let r=n.ops.length-1;r>=0&&t.length<e.length;--r){const a=n.ops[r];if(typeof a.insert!="string")break;t=a.insert+t}return t.slice(-1*e.length)===e}function yo(n,e){if(!(n instanceof Element))return!1;const t=e.query(n);return t&&t.prototype instanceof hs?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}function gP(n,e){return n.previousElementSibling&&n.nextElementSibling&&!yo(n.previousElementSibling,e)&&!yo(n.nextElementSibling,e)}const df=new WeakMap;function DN(n){return n==null?!1:(df.has(n)||(n.tagName==="PRE"?df.set(n,!0):df.set(n,DN(n.parentNode))),df.get(n))}function Nv(n,e,t,r,a){return e.nodeType===e.TEXT_NODE?r.reduce((l,c)=>c(e,l,n),new Ie):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((l,c)=>{let h=Nv(n,c,t,r,a);return c.nodeType===e.ELEMENT_NODE&&(h=t.reduce((m,p)=>p(c,m,n),h),h=(a.get(c)||[]).reduce((m,p)=>p(c,m,n),h)),l.concat(h)},new Ie):new Ie}function hy(n){return(e,t,r)=>Rl(t,n,!0,r)}function pP(n,e,t){const r=Li.keys(n),a=ai.keys(n),l=Uo.keys(n),c={};return r.concat(a).concat(l).forEach(h=>{let m=t.query(h,Oe.ATTRIBUTE);m!=null&&(c[m.attrName]=m.value(n),c[m.attrName])||(m=fP[h],m!=null&&(m.attrName===h||m.keyName===h)&&(c[m.attrName]=m.value(n)||void 0),m=Bw[h],m!=null&&(m.attrName===h||m.keyName===h)&&(m=Bw[h],c[m.attrName]=m.value(n)||void 0))}),Object.entries(c).reduce((h,m)=>{let[p,v]=m;return Rl(h,p,v,t)},e)}function yP(n,e,t){const r=t.query(n);if(r==null)return e;if(r.prototype instanceof hs){const a={},l=r.value(n);if(l!=null)return a[r.blotName]=l,new Ie().insert(a,r.formats(n,t))}else if(r.prototype instanceof fh&&!Dh(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return Rl(e,r.blotName,r.formats(n,t),t);return e}function vP(n,e){return Dh(e,`
`)||e.insert(`
`),e}function bP(n,e,t){const r=t.query("code-block"),a=r&&"formats"in r&&typeof r.formats=="function"?r.formats(n,t):!0;return Rl(e,"code-block",a,t)}function xP(){return new Ie}function _P(n,e,t){const r=t.query(n);if(r==null||r.blotName!=="list"||!Dh(e,`
`))return e;let a=-1,l=n.parentNode;for(;l!=null;)["OL","UL"].includes(l.tagName)&&(a+=1),l=l.parentNode;return a<=0?e:e.reduce((c,h)=>h.insert?h.attributes&&typeof h.attributes.indent=="number"?c.push(h):c.insert(h.insert,{indent:a,...h.attributes||{}}):c,new Ie)}function EP(n,e,t){const r=n;let a=r.tagName==="OL"?"ordered":"bullet";const l=r.getAttribute("data-checked");return l&&(a=l==="true"?"checked":"unchecked"),Rl(e,"list",a,t)}function zw(n,e,t){if(!Dh(e,`
`)){if(yo(n,t)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&n.nextSibling){let r=n.nextSibling;for(;r!=null;){if(yo(r,t))return e.insert(`
`);const a=t.query(r);if(a&&a.prototype instanceof Ds)return e.insert(`
`);r=r.firstChild}}}return e}function wP(n,e,t){const r={},a=n.style||{};return a.fontStyle==="italic"&&(r.italic=!0),a.textDecoration==="underline"&&(r.underline=!0),a.textDecoration==="line-through"&&(r.strike=!0),(a.fontWeight?.startsWith("bold")||parseInt(a.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((l,c)=>{let[h,m]=c;return Rl(l,h,m,t)},e),parseFloat(a.textIndent||0)>0?new Ie().insert("	").concat(e):e}function TP(n,e,t){const r=n.parentElement?.tagName==="TABLE"?n.parentElement:n.parentElement?.parentElement;if(r!=null){const l=Array.from(r.querySelectorAll("tr")).indexOf(n)+1;return Rl(e,"table",l,t)}return e}function AP(n,e,t){let r=n.data;if(n.parentElement?.tagName==="O:P")return e.insert(r.trim());if(!DN(n)){if(r.trim().length===0&&r.includes(`
`)&&!gP(n,t))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(n.previousSibling==null&&n.parentElement!=null&&yo(n.parentElement,t)||n.previousSibling instanceof Element&&yo(n.previousSibling,t))&&(r=r.replace(/^ /,"")),(n.nextSibling==null&&n.parentElement!=null&&yo(n.parentElement,t)||n.nextSibling instanceof Element&&yo(n.nextSibling,t))&&(r=r.replace(/ $/,"")),r=r.replaceAll(""," ")}return e.insert(r)}class SP extends Pi{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,t){super(e,t),this.quill.on(le.events.EDITOR_CHANGE,(r,a,l,c)=>{r===le.events.SELECTION_CHANGE?a&&c!==le.sources.SILENT&&(this.currentRange=a):r===le.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||c===le.sources.USER?this.record(a,l):this.transform(a)),this.currentRange=n0(this.currentRange,a))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(e,t){if(this.stack[e].length===0)return;const r=this.stack[e].pop();if(!r)return;const a=this.quill.getContents(),l=r.delta.invert(a);this.stack[t].push({delta:l,range:n0(r.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,le.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,t){if(e.ops.length===0)return;this.stack.redo=[];let r=e.invert(t),a=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const c=this.stack.undo.pop();c&&(r=r.compose(c.delta),a=c.range)}else this.lastRecorded=l;r.length()!==0&&(this.stack.undo.push({delta:r,range:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){Hw(this.stack.undo,e),Hw(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,le.sources.USER);else{const t=CP(this.quill.scroll,e.delta);this.quill.setSelection(t,le.sources.USER)}}}function Hw(n,e){let t=e;for(let r=n.length-1;r>=0;r-=1){const a=n[r];n[r]={delta:t.transform(a.delta,!0),range:a.range&&n0(a.range,t)},t=a.delta.transform(t),n[r].delta.length()===0&&n.splice(r,1)}}function NP(n,e){const t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(r=>n.query(r,Oe.BLOCK)!=null):!1}function CP(n,e){const t=e.reduce((a,l)=>a+(l.delete||0),0);let r=e.length()-t;return NP(n,e)&&(r-=1),r}function n0(n,e){if(!n)return n;const t=e.transformPosition(n.index),r=e.transformPosition(n.index+n.length);return{index:t,length:r-t}}class LN extends Pi{constructor(e,t){super(e,t),e.root.addEventListener("drop",r=>{r.preventDefault();let a=null;if(document.caretRangeFromPoint)a=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const c=document.caretPositionFromPoint(r.clientX,r.clientY);a=document.createRange(),a.setStart(c.offsetNode,c.offset),a.setEnd(c.offsetNode,c.offset)}const l=a&&e.selection.normalizeNative(a);if(l){const c=e.selection.normalizedToRange(l);r.dataTransfer?.files&&this.upload(c,r.dataTransfer.files)}})}upload(e,t){const r=[];Array.from(t).forEach(a=>{a&&this.options.mimetypes?.includes(a.type)&&r.push(a)}),r.length>0&&this.options.handler.call(this,e,r)}}LN.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,e){if(!this.quill.scroll.query("image"))return;const t=e.map(r=>new Promise(a=>{const l=new FileReader;l.onload=()=>{a(l.result)},l.readAsDataURL(r)}));Promise.all(t).then(r=>{const a=r.reduce((l,c)=>l.insert({image:c}),new Ie().retain(n.index).delete(n.length));this.quill.updateContents(a,Ce.sources.USER),this.quill.setSelection(n.index+r.length,Ce.sources.SILENT)})}};const RP=["insertText","insertReplacementText"];class IP extends Pi{constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(le.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){Sv({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Ie().retain(e.index).insert(t,r),le.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,le.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!RP.includes(e.inputType))return;const t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;const r=jP(e);if(r==null)return;const a=this.quill.selection.normalizeNative(t),l=a?this.quill.selection.normalizedToRange(a):null;l&&this.replaceText(l,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function jP(n){return typeof n.data=="string"?n.data:n.dataTransfer?.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}const OP=/Mac/i.test(navigator.platform),DP=100,LP=n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||OP&&n.key==="a"&&n.ctrlKey===!0);class kP extends Pi{isListening=!1;selectionChangeDeadline=0;constructor(e,t){super(e,t),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,t){let{line:r,event:a}=t;if(!(r instanceof ri)||!r.uiNode)return!0;const l=getComputedStyle(r.domNode).direction==="rtl";return l&&a.key!=="ArrowRight"||!l&&a.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(a.shiftKey?1:0),le.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&LP(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+DP,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const t=e.getRangeAt(0);if(t.collapsed!==!0||t.startOffset!==0)return;const r=this.quill.scroll.find(t.startContainer);if(!(r instanceof ri)||!r.uiNode)return;const a=document.createRange();a.setStartAfter(r.uiNode),a.setEndAfter(r.uiNode),e.removeAllRanges(),e.addRange(a)}}le.register({"blots/block":Wn,"blots/block/embed":Ds,"blots/break":oi,"blots/container":Nl,"blots/cursor":Js,"blots/embed":xv,"blots/inline":wr,"blots/scroll":z9,"blots/text":ii,"modules/clipboard":mP,"modules/history":SP,"modules/keyboard":km,"modules/uploader":LN,"modules/input":IP,"modules/uiNode":kP});class MP extends ai{add(e,t){let r=0;if(t==="+1"||t==="-1"){const a=this.value(e)||0;r=t==="+1"?a+1:a-1}else typeof t=="number"&&(r=t);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}}const PP=new MP("indent","ql-indent",{scope:Oe.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class UP extends Wn{static blotName="blockquote";static tagName="blockquote"}class VP extends Wn{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class Lh extends Nl{}Lh.blotName="list-container";Lh.tagName="OL";class kh extends Wn{static create(e){const t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){le.register(Lh)}constructor(e,t){super(e,t);const r=t.ownerDocument.createElement("span"),a=l=>{if(!e.isEnabled())return;const c=this.statics.formats(t,e);c==="checked"?(this.format("list","unchecked"),l.preventDefault()):c==="unchecked"&&(this.format("list","checked"),l.preventDefault())};r.addEventListener("mousedown",a),r.addEventListener("touchstart",a),this.attachUI(r)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}}kh.blotName="list";kh.tagName="LI";Lh.allowedChildren=[kh];kh.requiredContainer=Lh;class Cv extends wr{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class qP extends Cv{static blotName="italic";static tagName=["EM","I"]}class Jf extends wr{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return kN(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}}function kN(n,e){const t=document.createElement("a");t.href=n;const r=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(r)>-1}class BP extends wr{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class zP extends Cv{static blotName="strike";static tagName=["S","STRIKE"]}class HP extends wr{static blotName="underline";static tagName="U"}class FP extends xv{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const Fw=["alt","height","width"];let $P=class extends hs{static blotName="image";static tagName="IMG";static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return Fw.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return kN(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){Fw.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}};const $w=["height","width"];class GP extends Ds{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return $w.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}static sanitize(e){return Jf.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){$w.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const $u=new ai("code-token","hljs",{scope:Oe.INLINE});class Na extends wr{static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(Ar.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,r){super(e,t,r),$u.add(this.domNode,r)}format(e,t){e!==Na.blotName?super.format(e,t):t?$u.add(this.domNode,t):($u.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),$u.value(this.domNode)||this.unwrap()}}Na.blotName="code-token";Na.className="ql-token";class js extends Ar{static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),Na.blotName,!1),super.replaceWith(e,t)}}class Ju extends Cl{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===js.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,t)}))}formatAt(e,t,r,a){r===js.blotName&&(this.forceNext=!0),super.formatAt(e,t,r,a)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const a=`${Array.from(this.domNode.childNodes).filter(c=>c!==this.uiNode).map(c=>c.textContent).join(`
`)}
`,l=js.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==a){if(a.trim().length>0||this.cachedText==null){const c=this.children.reduce((m,p)=>m.concat(xN(p,!1)),new Ie),h=e(a,l);c.diff(h).reduce((m,p)=>{let{retain:v,attributes:_}=p;return v?(_&&Object.keys(_).forEach(E=>{[js.blotName,Na.blotName].includes(E)&&this.formatAt(m,v,E,_[E])}),m+v):m},0)}this.cachedText=a,this.forceNext=!1}}html(e,t){const[r]=this.children.find(e);return`<pre data-language="${r?js.formats(r.domNode):"plain"}">
${Lm(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const t=js.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}Ju.allowedChildren=[js];js.requiredContainer=Ju;js.allowedChildren=[Na,Js,ii,oi];const KP=(n,e,t)=>{if(typeof n.versionString=="string"){const r=n.versionString.split(".")[0];if(parseInt(r,10)>=11)return n.highlight(t,{language:e}).value}return n.highlight(e,t).value};class MN extends Pi{static register(){le.register(Na,!0),le.register(js,!0),le.register(Ju,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,a)=>{let{key:l}=a;return r[l]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(le.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof Ju))return;const t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:a,label:l}=r;const c=t.ownerDocument.createElement("option");c.textContent=l,c.setAttribute("value",a),t.appendChild(c)}),t.addEventListener("change",()=>{e.format(js.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=js.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(le.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(le.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(Ju):[e]).forEach(l=>{l.highlight(this.highlightBlot,t)}),this.quill.update(le.sources.SILENT),r!=null&&this.quill.setSelection(r,le.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return Lm(e).split(`
`).reduce((a,l,c)=>(c!==0&&a.insert(`
`,{[Ar.blotName]:t}),a.insert(l)),new Ie);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(Ar.className),r.innerHTML=KP(this.options.hljs,t,e),Nv(this.quill.scroll,r,[(a,l)=>{const c=$u.value(a);return c?l.compose(new Ie().retain(l.length(),{[Na.blotName]:c})):l}],[(a,l)=>a.data.split(`
`).reduce((c,h,m)=>(m!==0&&c.insert(`
`,{[Ar.blotName]:t}),c.insert(h)),l)],new WeakMap)}}MN.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class ei extends Wn{static blotName="table";static tagName="TD";static create(e){const t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",Rv()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===ei.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class vl extends Nl{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),t=this.children.tail.formats(),r=this.next.children.head.formats(),a=this.next.children.tail.formats();return e.table===t.table&&e.table===r.table&&e.table===a.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;const r=t.formats(),a=t.next.formats();if(r.table!==a.table){const l=this.splitAfter(t);l&&l.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class To extends Nl{static blotName="table-body";static tagName="TBODY"}class em extends Nl{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(vl),t=e.reduce((r,a)=>Math.max(a.children.length,r),0);e.forEach(r=>{new Array(t-r.children.length).fill(0).forEach(()=>{let a;r.children.head!=null&&(a=ei.formats(r.children.head.domNode));const l=this.scroll.create(ei.blotName,a);r.appendChild(l),l.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){const[t]=this.descendant(To);t==null||t.children.head==null||t.children.forEach(r=>{const a=r.children.at(e);a?.remove()})}insertColumn(e){const[t]=this.descendant(To);t==null||t.children.head==null||t.children.forEach(r=>{const a=r.children.at(e),l=ei.formats(r.children.head.domNode),c=this.scroll.create(ei.blotName,l);r.insertBefore(c,a)})}insertRow(e){const[t]=this.descendant(To);if(t==null||t.children.head==null)return;const r=Rv(),a=this.scroll.create(vl.blotName);t.children.head.children.forEach(()=>{const c=this.scroll.create(ei.blotName,r);a.appendChild(c)});const l=t.children.at(e);t.insertBefore(a,l)}rows(){const e=this.children.head;return e==null?[]:e.children.map(t=>t)}}em.allowedChildren=[To];To.requiredContainer=em;To.allowedChildren=[vl];vl.requiredContainer=To;vl.allowedChildren=[ei];ei.requiredContainer=vl;function Rv(){return`row-${Math.random().toString(36).slice(2,6)}`}class QP extends Pi{static register(){le.register(ei),le.register(vl),le.register(To),le.register(em)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(em).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(le.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(le.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const t=e.offset();e.remove(),this.quill.update(le.sources.USER),this.quill.setSelection(t,le.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[t,r]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==ei.blotName)return[null,null,null,-1];const a=t.parent;return[a.parent.parent,a,t,r]}insertColumn(e){const t=this.quill.getSelection();if(!t)return;const[r,a,l]=this.getTable(t);if(l==null)return;const c=l.cellOffset();r.insertColumn(c+e),this.quill.update(le.sources.USER);let h=a.rowOffset();e===0&&(h+=1),this.quill.setSelection(t.index+h,t.length,le.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const t=this.quill.getSelection();if(!t)return;const[r,a,l]=this.getTable(t);if(l==null)return;const c=a.rowOffset();r.insertRow(c+e),this.quill.update(le.sources.USER),e>0?this.quill.setSelection(t,le.sources.SILENT):this.quill.setSelection(t.index+a.children.length,t.length,le.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){const r=this.quill.getSelection();if(r==null)return;const a=new Array(e).fill(0).reduce(l=>{const c=new Array(t).fill(`
`).join("");return l.insert(c,{table:Rv()})},new Ie().retain(r.index));this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(r.index,le.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(le.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(le.events.TEXT_CHANGE,(r,a,l)=>{l===le.sources.USER&&this.balanceTables()}),!0):!1)})}}const Gw=Oa("quill:toolbar");class Iv extends Pi{constructor(e,t){if(super(e,t),Array.isArray(this.options.container)){const r=document.createElement("div");r.setAttribute("role","toolbar"),YP(r,this.options.container),e.container?.parentNode?.insertBefore(r,e.container),this.container=r}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){Gw.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{const a=this.options.handlers?.[r];a&&this.addHandler(r,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(le.events.EDITOR_CHANGE,()=>{const[r]=this.quill.selection.getRange();this.update(r)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(a=>a.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){Gw.warn("ignoring attaching to nonexistent format",t,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,a=>{let l;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const h=e.options[e.selectedIndex];h.hasAttribute("selected")?l=!1:l=h.value||!1}else e.classList.contains("ql-active")?l=!1:l=e.value||!e.hasAttribute("value"),a.preventDefault();this.quill.focus();const[c]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,l);else if(this.quill.scroll.query(t).prototype instanceof hs){if(l=prompt(`Enter ${t}`),!l)return;this.quill.updateContents(new Ie().retain(c.index).delete(c.length).insert({[t]:l}),le.sources.USER)}else this.quill.format(t,l,le.sources.USER);this.update(c)}),this.controls.push([t,e])}update(e){const t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[a,l]=r;if(l.tagName==="SELECT"){let c=null;if(e==null)c=null;else if(t[a]==null)c=l.querySelector("option[selected]");else if(!Array.isArray(t[a])){let h=t[a];typeof h=="string"&&(h=h.replace(/"/g,'\\"')),c=l.querySelector(`option[value="${h}"]`)}c==null?(l.value="",l.selectedIndex=-1):c.selected=!0}else if(e==null)l.classList.remove("ql-active"),l.setAttribute("aria-pressed","false");else if(l.hasAttribute("value")){const c=t[a],h=c===l.getAttribute("value")||c!=null&&c.toString()===l.getAttribute("value")||c==null&&!l.getAttribute("value");l.classList.toggle("ql-active",h),l.setAttribute("aria-pressed",h.toString())}else{const c=t[a]!=null;l.classList.toggle("ql-active",c),l.setAttribute("aria-pressed",c.toString())}})}}Iv.DEFAULTS={};function Kw(n,e,t){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),t!=null?(r.value=t,r.setAttribute("aria-label",`${e}: ${t}`)):r.setAttribute("aria-label",e),n.appendChild(r)}function YP(n,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{const r=document.createElement("span");r.classList.add("ql-formats"),t.forEach(a=>{if(typeof a=="string")Kw(r,a);else{const l=Object.keys(a)[0],c=a[l];Array.isArray(c)?XP(r,l,c):Kw(r,l,c)}}),n.appendChild(r)})}function XP(n,e,t){const r=document.createElement("select");r.classList.add(`ql-${e}`),t.forEach(a=>{const l=document.createElement("option");a!==!1?l.setAttribute("value",String(a)):l.setAttribute("selected","selected"),r.appendChild(l)}),n.appendChild(r)}Iv.DEFAULTS={container:null,handlers:{clean(){const n=this.quill.getSelection();if(n!=null)if(n.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,Oe.INLINE)!=null&&this.quill.format(t,!1,le.sources.USER)})}else this.quill.removeFormat(n.index,n.length,le.sources.USER)},direction(n){const{align:e}=this.quill.getFormat();n==="rtl"&&e==null?this.quill.format("align","right",le.sources.USER):!n&&e==="right"&&this.quill.format("align",!1,le.sources.USER),this.quill.format("direction",n,le.sources.USER)},indent(n){const e=this.quill.getSelection(),t=this.quill.getFormat(e),r=parseInt(t.indent||0,10);if(n==="+1"||n==="-1"){let a=n==="+1"?1:-1;t.direction==="rtl"&&(a*=-1),this.quill.format("indent",r+a,le.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,le.sources.USER)},list(n){const e=this.quill.getSelection(),t=this.quill.getFormat(e);n==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,le.sources.USER):this.quill.format("list","unchecked",le.sources.USER):this.quill.format("list",n,le.sources.USER)}}};const WP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',ZP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',JP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',e7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',t7='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',n7='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',r7='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',s7='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Qw='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',i7='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',a7='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',o7='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',l7='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',c7='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',u7='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',h7='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',d7='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',f7='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',m7='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',g7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',p7='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',y7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',v7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',b7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',x7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',_7='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',E7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',w7='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',T7='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',A7='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',S7='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',N7='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',C7='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',gh={align:{"":WP,center:ZP,right:JP,justify:e7},background:t7,blockquote:n7,bold:r7,clean:s7,code:Qw,"code-block":Qw,color:i7,direction:{"":a7,rtl:o7},formula:l7,header:{1:c7,2:u7,3:h7,4:d7,5:f7,6:m7},italic:g7,image:p7,indent:{"+1":y7,"-1":v7},link:b7,list:{bullet:x7,check:_7,ordered:E7},script:{sub:w7,super:T7},strike:A7,table:S7,underline:N7,video:C7},R7='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let Yw=0;function Xw(n,e){n.setAttribute(e,`${n.getAttribute(e)!=="true"}`)}class Mm{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Xw(this.label,"aria-expanded"),Xw(this.options,"aria-hidden")}buildItem(e){const t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&t.setAttribute("data-value",r),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",a=>{switch(a.key){case"Enter":this.selectItem(t,!0),a.preventDefault();break;case"Escape":this.escape(),a.preventDefault();break}}),t}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=R7,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${Yw}`,Yw+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{const r=this.buildItem(t);e.appendChild(r),t.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}}class PN extends Mm{constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);const r=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=a:r.style.fill=a)}}class UN extends Mm{constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=t[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const I7=n=>{const{overflowY:e}=getComputedStyle(n,null);return e!=="visible"&&e!=="clip"};class VN{constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,I7(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const a=this.boundsContainer.getBoundingClientRect(),l=this.root.getBoundingClientRect();let c=0;if(l.right>a.right&&(c=a.right-l.right,this.root.style.left=`${t+c}px`),l.left<a.left&&(c=a.left-l.left,this.root.style.left=`${t+c}px`),l.bottom>a.bottom){const h=l.bottom-l.top,m=e.bottom-e.top+h;this.root.style.top=`${r-m}px`,this.root.classList.add("ql-flip")}return c}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const j7=[!1,"center","right","justify"],O7=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],D7=[!1,"serif","monospace"],L7=["1","2","3",!1],k7=["small",!1,"large","huge"];class Mh extends Qc{constructor(e,t){super(e,t);const r=a=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(a.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(l=>{l.container.contains(a.target)||l.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(l=>{if(l.startsWith("ql-")&&(l=l.slice(3),t[l]!=null))if(l==="direction")r.innerHTML=t[l][""]+t[l].rtl;else if(typeof t[l]=="string")r.innerHTML=t[l];else{const c=r.value||"";c!=null&&t[l][c]&&(r.innerHTML=t[l][c])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(a=>{if(a.classList.contains("ql-align")&&(a.querySelector("option")==null&&Mu(a,j7),typeof t.align=="object"))return new UN(a,t.align);if(a.classList.contains("ql-background")||a.classList.contains("ql-color")){const l=a.classList.contains("ql-background")?"background":"color";return a.querySelector("option")==null&&Mu(a,O7,l==="background"?"#ffffff":"#000000"),new PN(a,t[l])}return a.querySelector("option")==null&&(a.classList.contains("ql-font")?Mu(a,D7):a.classList.contains("ql-header")?Mu(a,L7):a.classList.contains("ql-size")&&Mu(a,k7)),new Mm(a)});const r=()=>{this.pickers.forEach(a=>{a.update()})};this.quill.on(Ce.events.EDITOR_CHANGE,r)}}Mh.DEFAULTS=wo({},Qc.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class qN extends VN{constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,Ce.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,Ce.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=M7(e);case"formula":{if(!e)break;const t=this.quill.getSelection(!0);if(t!=null){const r=t.index+t.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,Ce.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",Ce.sources.USER),this.quill.setSelection(r+2,Ce.sources.USER)}break}}this.textbox.value="",this.hide()}}function M7(n){let e=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:n}function Mu(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const a=document.createElement("option");r===t?a.setAttribute("selected","selected"):a.setAttribute("value",String(r)),n.appendChild(a)})}const P7=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class U7 extends qN{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,t){super(e,t),this.quill.on(Ce.events.EDITOR_CHANGE,(r,a,l,c)=>{if(r===Ce.events.SELECTION_CHANGE)if(a!=null&&a.length>0&&c===Ce.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const h=this.quill.getLines(a.index,a.length);if(h.length===1){const m=this.quill.getBounds(a);m!=null&&this.position(m)}else{const m=h[h.length-1],p=this.quill.getIndex(m),v=Math.min(m.length()-1,a.index+a.length-p),_=this.quill.getBounds(new yl(p,v));_!=null&&this.position(_)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Ce.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){const t=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",t!==0&&(r.style.marginLeft=`${-1*t-r.offsetWidth/2}px`),t}}class BN extends Mh{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=P7),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new U7(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),gh),this.buildPickers(e.container.querySelectorAll("select"),gh))}}BN.DEFAULTS=wo({},Mh.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1,le.sources.USER)}}}}});const V7=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class q7 extends qN{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,Ce.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(Ce.events.SELECTION_CHANGE,(e,t,r)=>{if(e!=null){if(e.length===0&&r===Ce.sources.USER){const[a,l]=this.quill.scroll.descendant(Jf,e.index);if(a!=null){this.linkRange=new yl(e.index-l,a.length());const c=Jf.formats(a.domNode);this.preview.textContent=c,this.preview.setAttribute("href",c),this.show();const h=this.quill.getBounds(this.linkRange);h!=null&&this.position(h);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class zN extends Mh{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=V7),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),gh),this.buildPickers(e.container.querySelectorAll("select"),gh),this.tooltip=new q7(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,r)=>{e.handlers.link.call(e,!r.format.link)}))}}zN.DEFAULTS=wo({},Mh.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){const e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);const{tooltip:r}=this.quill.theme;r.edit("link",t)}else this.quill.format("link",!1,le.sources.USER)}}}}});le.register({"attributors/attribute/direction":AN,"attributors/class/align":EN,"attributors/class/background":$9,"attributors/class/color":F9,"attributors/class/direction":SN,"attributors/class/font":RN,"attributors/class/size":jN,"attributors/style/align":wN,"attributors/style/background":wv,"attributors/style/color":Ev,"attributors/style/direction":NN,"attributors/style/font":IN,"attributors/style/size":ON},!0);le.register({"formats/align":EN,"formats/direction":SN,"formats/indent":PP,"formats/background":wv,"formats/color":Ev,"formats/font":RN,"formats/size":jN,"formats/blockquote":UP,"formats/code-block":Ar,"formats/header":VP,"formats/list":kh,"formats/bold":Cv,"formats/code":Tv,"formats/italic":qP,"formats/link":Jf,"formats/script":BP,"formats/strike":zP,"formats/underline":HP,"formats/formula":FP,"formats/image":$P,"formats/video":GP,"modules/syntax":MN,"modules/table":QP,"modules/toolbar":Iv,"themes/bubble":BN,"themes/snow":zN,"ui/icons":gh,"ui/picker":Mm,"ui/icon-picker":UN,"ui/color-picker":PN,"ui/tooltip":VN},!0);class Il extends Ei.Component{constructor(e){super(e),this.editingAreaRef=P.createRef(),this.containerRef=P.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(r,a,l,c)=>{r==="text-change"?this.onEditorChangeText?.(this.editor.root.innerHTML,a,c,this.unprivilegedEditor):r==="selection-change"&&this.onEditorChangeSelection?.(a,c,this.unprivilegedEditor)};const t=this.isControlled()?e.value:e.defaultValue;this.value=t??""}validateProps(e){if(Ei.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Ei.Children.count(e.children)&&Ei.Children.only(e.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,t){if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){const r=this.getEditorContents(),a=e.value??"";this.isEqualValue(a,r)||this.setEditorContents(this.editor,a)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(r=>!mo(e[r],this.props[r]))}shouldComponentRegenerate(e){return this.dirtyProps.some(t=>!mo(e[t],this.props[t]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,t){if(this.editor&&this.shouldComponentRegenerate(e)){const r=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:r,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){const{delta:r,selection:a}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const l=this.editor;l.setContents(r),Ww(()=>this.setEditorSelection(l,a))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const e=this.props.modules?.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const r=this.containerRef.current?.querySelector(".ql-toolbar");r&&r.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,t){const r=new le(e,t);return t.tabIndex!=null&&this.setEditorTabIndex(r,t.tabIndex),this.hookEditor(r),r}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,t){return this.isDelta(e)&&this.isDelta(t)?mo(e.ops,t.ops):mo(e,t)}setEditorContents(e,t){this.value=t;const r=this.getEditorSelection();typeof t=="string"?e.setContents(e.clipboard.convert({html:t})):e.setContents(t),Ww(()=>this.setEditorSelection(e,r))}setEditorSelection(e,t){if(this.selection=t,t){const r=e.getLength();t.index=Math.max(0,Math.min(t.index,r-1)),t.length=Math.max(0,Math.min(t.length,r-1-t.index)),e.setSelection(t)}}setEditorTabIndex(e,t){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=t)}setEditorReadOnly(e,t){t?e.disable():e.enable()}makeUnprivilegedEditor(e){const t=e;return{getHTML:()=>t.root.innerHTML,getSemanticHTML:t.getSemanticHTML.bind(t),getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:t}=this.props,{generation:r}=this.state,a={key:r,ref:this.editingAreaRef};return Ei.Children.count(e)?Ei.cloneElement(Ei.Children.only(e),a):t?Ei.createElement("pre",{...a}):Ei.createElement("div",{...a})}render(){return Ei.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,t,r,a){if(!this.editor)return;const l=this.isDelta(this.value)?a.getContents():a.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=l,this.props.onChange?.(e,t,r,a))}onEditorChangeSelection(e,t,r){if(!this.editor)return;const a=this.getEditorSelection(),l=!a&&e,c=a&&!e;mo(e,a)||(this.selection=e,this.props.onChangeSelection?.(e,t,r),l?this.props.onFocus?.(e,t,r):c&&this.props.onBlur?.(a,t,r))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}Il.displayName="React Quill";Il.Quill=le;Il.defaultProps={theme:"snow",modules:{},readOnly:!1};function Ww(n){Promise.resolve().then(n)}const B7={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},z7=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],H7=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0),[a,l]=P.useState(!1),[c,h]=P.useState(null),[m,p]=P.useState({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""});P.useEffect(()=>{v()},[]);const v=async()=>{r(!0);try{const S=Xn(ut(Ee,"news"),us("timestamp","desc")),R=(await en(S)).docs.map(U=>({id:U.id,...U.data()}));e(R)}catch(S){console.error("Error fetching news:",S)}finally{r(!1)}},_=async S=>{if(window.confirm("Are you sure you want to delete this news item?"))try{await jh($e(Ee,"news",S)),v()}catch(O){console.error("Error deleting news:",O),alert("Failed to delete news item.")}},E=async S=>{S.preventDefault();try{const O=m.affectedCurrencies.split(",").map(R=>R.trim().toUpperCase()).filter(R=>R);c?await hr($e(Ee,"news",c),{title:m.title,impact:m.impact,content:m.content,image:m.image,affectedCurrencies:O,timestamp:ml()}):await wl(ut(Ee,"news"),{title:m.title,impact:m.impact,content:m.content,image:m.image,affectedCurrencies:O,timestamp:ml()}),l(!1),h(null),p({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""}),v()}catch(O){console.error("Error saving news:",O),alert("Failed to save news item.")}},A=S=>{p({title:S.title,impact:S.impact,content:S.content,image:S.image,affectedCurrencies:S.affectedCurrencies?S.affectedCurrencies.join(", "):""}),h(S.id),l(!0)};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage News"}),f.jsx(yt,{onClick:()=>{l(!a),a&&(h(null),p({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""}))},children:a?"Cancel":"Post New Alert"})]}),a&&f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:c?"Edit Market Update":"New Market Update"}),f.jsxs("form",{onSubmit:E,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:S=>p({...m,title:S.target.value}),placeholder:"e.g., NFP Beats Expectations"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Impact Level"}),f.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.impact,onChange:S=>p({...m,impact:S.target.value}),children:[f.jsx("option",{value:"Low",children:"Low (Yellow)"}),f.jsx("option",{value:"Medium",children:"Medium (Orange)"}),f.jsx("option",{value:"High",children:"High (Red)"})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Content/Summary"}),f.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:f.jsx(Il,{theme:"snow",value:m.content,onChange:S=>p({...m,content:S}),modules:B7,formats:z7,className:"h-96 mb-12"})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Image URL (Optional)"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.image,onChange:S=>p({...m,image:S.target.value}),placeholder:"https://..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Affected Currencies (comma separated)"}),f.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.affectedCurrencies,onChange:S=>p({...m,affectedCurrencies:S.target.value}),placeholder:"USD, EUR, JPY"})]})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsx(yt,{type:"submit",variant:"primary",children:c?"Update News":"Publish News"})})]})]}),f.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-800",children:[f.jsx("thead",{className:"bg-gray-900/50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Title"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Impact"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-800",children:t?f.jsx("tr",{children:f.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-400",children:"Loading data..."})}):n.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-400",children:"No news posted yet."})}):n.map(S=>f.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.timestamp?.seconds?new Date(S.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-medium",children:S.title}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${S.impact==="High"?"bg-red-500/20 text-red-400":S.impact==="Medium"?"bg-orange-500/20 text-orange-400":"bg-green-500/20 text-green-400"}`,children:S.impact})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[f.jsx("button",{onClick:()=>A(S),className:"text-primary hover:text-primary/80 transition-colors mr-4",children:"Edit"}),f.jsx("button",{onClick:()=>_(S.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Delete"})]})]},S.id))})]})})})]})},F7={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},$7=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],G7=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0),[a,l]=P.useState(!1),[c,h]=P.useState(null),[m,p]=P.useState({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}),[v,_]=P.useState({});P.useEffect(()=>{E();const R=wh(Le,async U=>{if(U)try{const F=$e(Ee,"users",U.uid),Q=await fr(F);Q.exists()&&_(Q.data())}catch(F){console.error("Error fetching profile:",F)}});return()=>R()},[]);const E=async()=>{r(!0);try{const R=Xn(ut(Ee,"analysis"),us("timestamp","desc")),F=(await en(R)).docs.map(Q=>({id:Q.id,...Q.data()}));e(F)}catch(R){console.error("Error fetching analysis:",R)}finally{r(!1)}},A=async R=>{if(window.confirm("Are you sure you want to delete this analysis?"))try{await jh($e(Ee,"analysis",R)),E()}catch(U){console.error("Error deleting post:",U),alert("Failed to delete post.")}},S=async R=>{R.preventDefault();const U={...m,...v,timestamp:ml()};try{c?await hr($e(Ee,"analysis",c),U):await wl(ut(Ee,"analysis"),U),l(!1),h(null),p({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}),E()}catch(F){console.error("Error saving post:",F),alert("Failed to save analysis.")}},O=R=>{p({title:R.title,pair:R.pair,direction:R.direction,content:R.content,image:R.image,analysisType:R.analysisType||"Technical Analysis"}),h(R.id),l(!0)};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage Analysis"}),f.jsx(yt,{onClick:()=>{l(!a),a&&(h(null),p({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}))},children:a?"Cancel":"New Analysis"})]}),a&&f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:c?"Edit Analysis":"Post Technical Breakdown"}),f.jsxs("form",{onSubmit:S,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Pair / Asset"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none uppercase",value:m.pair,onChange:R=>p({...m,pair:R.target.value}),placeholder:"e.g. GBP/JPY"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Direction"}),f.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.direction,onChange:R=>p({...m,direction:R.target.value}),children:[f.jsx("option",{value:"Neutral",children:"Neutral (Gray)"}),f.jsx("option",{value:"Bullish",children:"Bullish (Green)"}),f.jsx("option",{value:"Bearish",children:"Bearish (Red)"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analysis Type"}),f.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.analysisType,onChange:R=>p({...m,analysisType:R.target.value}),children:[f.jsx("option",{value:"Technical Analysis",children:"Technical Analysis"}),f.jsx("option",{value:"Fundamental Analysis",children:"Fundamental Analysis"}),f.jsx("option",{value:"Sentiment Analysis",children:"Sentiment Analysis"})]})]})]}),f.jsx("div",{className:"grid grid-cols-1 gap-4",children:f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Image URL (Chart)"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.image,onChange:R=>p({...m,image:R.target.value}),placeholder:"https://..."})]})}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:R=>p({...m,title:R.target.value}),placeholder:"e.g. Double Top formation on 4H"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analysis Content"}),f.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:f.jsx(Il,{theme:"snow",value:m.content,onChange:R=>p({...m,content:R}),modules:F7,formats:$7,className:"h-96 mb-12"})})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsx(yt,{type:"submit",variant:"primary",children:c?"Update Analysis":"Post Analysis"})})]})]}),f.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-800",children:[f.jsx("thead",{className:"bg-gray-900/50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Pair"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Direction"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Title"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-800",children:t?f.jsx("tr",{children:f.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-400",children:"Loading data..."})}):n.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-400",children:"No analysis posted yet."})}):n.map(R=>f.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R.timestamp?.seconds?new Date(R.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-bold",children:R.pair}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${R.direction==="Bullish"?"bg-green-500/20 text-green-400":R.direction==="Bearish"?"bg-red-500/20 text-red-400":"bg-gray-700 text-gray-300"}`,children:R.direction})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white max-w-xs truncate",children:R.title}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[f.jsx("button",{onClick:()=>O(R),className:"text-primary hover:text-primary/80 transition-colors mr-4",children:"Edit"}),f.jsx("button",{onClick:()=>A(R.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Delete"})]})]},R.id))})]})})})]})},HN={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},FN=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],K7=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!1),[a,l]=P.useState({name:"",description:"",image:""}),[c,h]=P.useState(null),[m,p]=P.useState(!0);P.useEffect(()=>{v()},[]);const v=async()=>{p(!0);try{const A=await en(ut(Ee,"paths"));e(A.docs.map(S=>({id:S.id,...S.data()})))}catch(A){console.error("Error fetching paths:",A)}finally{p(!1)}},_=async A=>{A.preventDefault();try{c?await hr($e(Ee,"paths",c),a):await wl(ut(Ee,"paths"),{...a,createdAt:ml()}),r(!1),h(null),l({name:"",description:"",image:""}),v()}catch(S){console.error("Error saving path:",S),alert("Failed to save path")}},E=async A=>{if(window.confirm("Delete this path?"))try{await jh($e(Ee,"paths",A)),v()}catch(S){console.error("Error deleting path:",S)}};return f.jsxs("div",{className:"animate-fade-in",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-white",children:"Academy Paths"}),f.jsx(yt,{onClick:()=>{r(!t),t&&(h(null),l({name:"",description:"",image:""}))},children:t?"Cancel":"New Path"})]}),t&&f.jsx("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8",children:f.jsxs("form",{onSubmit:_,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Path Name"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.name,onChange:A=>l({...a,name:A.target.value}),placeholder:"e.g. Technical Analysis"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),f.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-24",value:a.description,onChange:A=>l({...a,description:A.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Cover Image URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.image,onChange:A=>l({...a,image:A.target.value})})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx(yt,{type:"submit",variant:"primary",children:c?"Update Path":"Create Path"})})]})}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(A=>f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden group",children:[f.jsxs("div",{className:"h-40 bg-gray-900 relative",children:[A.image&&f.jsx("img",{src:A.image,alt:A.name,className:"w-full h-full object-cover"}),f.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>{l(A),h(A.id),r(!0)},className:"bg-primary/80 p-1 rounded text-white hover:bg-primary",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),f.jsx("button",{onClick:()=>E(A.id),className:"bg-red-500/80 p-1 rounded text-white hover:bg-red-600",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("h3",{className:"font-bold text-white text-lg",children:A.name}),f.jsx("p",{className:"text-gray-400 text-sm mt-1 line-clamp-2",children:A.description})]})]},A.id))})]})},Q7=()=>{const[n,e]=P.useState("paths"),[t,r]=P.useState([]),[a,l]=P.useState([]),[c,h]=P.useState(null),[m,p]=P.useState(!0),[v,_]=P.useState(!1),[E,A]=P.useState(null),[S,O]=P.useState({title:"",path:"",description:"",image:"",level:"Beginner",instructorName:"Forex Volcano",instructorBio:"",instructorImage:""});P.useEffect(()=>{R()},[]);const R=async()=>{p(!0);try{const ie=(await en(ut(Ee,"paths"))).docs.map(k=>k.data().name);l(ie);const ve=Xn(ut(Ee,"courses"),us("order","asc")),L=await en(ve);r(L.docs.map(k=>({id:k.id,...k.data()})))}catch(Y){console.error("Error fetching data:",Y)}finally{p(!1)}},U=async Y=>{Y.preventDefault();try{E?await hr($e(Ee,"courses",E),S):await wl(ut(Ee,"courses"),{...S,order:t.length+1,createdAt:ml()}),_(!1),A(null),O({title:"",path:"",description:"",image:"",level:"Beginner",instructorName:"Forex Volcano",instructorBio:"",instructorImage:""}),R()}catch(ie){console.error("Error saving course:",ie),alert("Failed to save course")}},F=Y=>{O({title:Y.title,description:Y.description,path:Y.path||"",image:Y.image,level:Y.level||"Beginner",instructorName:Y.instructorName||"Forex Volcano",instructorBio:Y.instructorBio||"",instructorImage:Y.instructorImage||""}),A(Y.id),_(!0)},Q=async Y=>{if(window.confirm("Delete this course? All lessons inside it might become orphaned."))try{await jh($e(Ee,"courses",Y)),R(),c?.id===Y&&h(null)}catch(ie){console.error("Error deleting course:",ie)}};return c?f.jsx(Y7,{course:c,onBack:()=>h(null)}):f.jsxs("div",{children:[f.jsxs("div",{className:"flex space-x-6 mb-8 border-b border-gray-800",children:[f.jsx("button",{onClick:()=>e("paths"),className:`pb-4 px-2 font-medium transition-colors ${n==="paths"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"1. Manage Paths"}),f.jsx("button",{onClick:()=>e("courses"),className:`pb-4 px-2 font-medium transition-colors ${n==="courses"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"2. Manage Courses"})]}),n==="paths"?f.jsx(K7,{}):f.jsxs("div",{className:"animate-fade-in",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage Courses"}),f.jsx(yt,{onClick:()=>{_(!v),v&&A(null)},children:v?"Cancel":"New Course"})]}),v&&f.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:E?"Edit Course":"Create New Course"}),f.jsxs("form",{onSubmit:U,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Course Title"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.title,onChange:Y=>O({...S,title:Y.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Path / Category"}),f.jsxs("select",{required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.path,onChange:Y=>O({...S,path:Y.target.value}),children:[f.jsx("option",{value:"",children:"Select Path..."}),a.map(Y=>f.jsx("option",{value:Y,children:Y},Y))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Level"}),f.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.level,onChange:Y=>O({...S,level:Y.target.value}),children:[f.jsx("option",{children:"Beginner"}),f.jsx("option",{children:"Intermediate"}),f.jsx("option",{children:"Advanced"})]})]})]}),f.jsxs("div",{className:"border-t border-gray-800 pt-4 mt-4",children:[f.jsx("h3",{className:"text-sm font-bold text-primary mb-3",children:"Instructor Details"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Name"}),f.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.instructorName,onChange:Y=>O({...S,instructorName:Y.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Image URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.instructorImage,onChange:Y=>O({...S,instructorImage:Y.target.value})})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Bio"}),f.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-20",value:S.instructorBio,onChange:Y=>O({...S,instructorBio:Y.target.value})})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),f.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:f.jsx(Il,{theme:"snow",value:S.description,onChange:Y=>O({...S,description:Y}),modules:HN,formats:FN,className:"h-48 mb-12"})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Cover Image URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.image,onChange:Y=>O({...S,image:Y.target.value})})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx(yt,{type:"submit",variant:"primary",children:E?"Update Course":"Create Course"})})]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m?f.jsx("div",{className:"text-gray-400",children:"Loading courses..."}):t.map(Y=>f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden group hover:border-gray-600 transition-all",children:[f.jsxs("div",{className:"h-40 bg-gray-900 relative",children:[Y.image&&f.jsx("img",{src:Y.image,alt:Y.title,className:"w-full h-full object-cover"}),f.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[f.jsx("button",{onClick:ie=>{ie.stopPropagation(),F(Y)},className:"bg-primary/80 p-1 rounded text-white hover:bg-primary",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),f.jsx("button",{onClick:ie=>{ie.stopPropagation(),Q(Y.id)},className:"bg-red-500/80 p-1 rounded text-white hover:bg-red-600",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),f.jsxs("div",{className:"p-5",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:Y.title}),Y.path&&f.jsx("span",{className:"bg-gray-800 text-xs text-gray-300 px-2 py-1 rounded",children:Y.path})]}),f.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:Y.description}),f.jsx(yt,{variant:"outline",size:"sm",className:"w-full",onClick:()=>h(Y),children:"Manage Lessons"})]})]},Y.id))})]})]})},Y7=({course:n,onBack:e})=>{const[t,r]=P.useState([]),[a,l]=P.useState(!1),[c,h]=P.useState(null),[m,p]=P.useState({title:"",videoUrl:"",content:"",duration:"10 min"}),[v,_]=P.useState(!0);P.useEffect(()=>{E()},[n]);const E=async()=>{_(!0);try{const R=Xn(ut(Ee,"courses",n.id,"lessons"),us("order","asc")),U=await en(R);r(U.docs.map(F=>({id:F.id,...F.data()})))}catch(R){console.error("Error fetching lessons:",R);const U=await en(ut(Ee,"courses",n.id,"lessons"));r(U.docs.map(F=>({id:F.id,...F.data()})))}finally{_(!1)}},A=async R=>{R.preventDefault();try{c?await hr($e(Ee,"courses",n.id,"lessons",c),{...m}):await wl(ut(Ee,"courses",n.id,"lessons"),{...m,order:t.length+1,createdAt:ml()}),l(!1),h(null),p({title:"",videoUrl:"",content:"",duration:"10 min"}),E()}catch(U){console.error("Error saving lesson:",U),alert("Failed to save lesson")}},S=R=>{p({title:R.title,videoUrl:R.videoUrl,content:R.content,duration:R.duration}),h(R.id),l(!0)},O=async R=>{if(window.confirm("Delete this lesson?"))try{await jh($e(Ee,"courses",n.id,"lessons",R)),E()}catch(U){console.error("Error deleting lesson:",U)}};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[f.jsxs("button",{onClick:e,className:"text-gray-400 hover:text-white flex items-center gap-1",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),f.jsxs("h1",{className:"text-2xl font-bold text-white",children:[f.jsx("span",{className:"text-gray-500 font-normal",children:"Edit Course:"})," ",n.title]})]}),f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsxs("h2",{className:"text-xl font-bold text-white",children:["Lessons (",t.length,")"]}),f.jsx(yt,{onClick:()=>{l(!a),a&&(h(null),p({title:"",videoUrl:"",content:"",duration:"10 min"}))},variant:"secondary",children:a?"Cancel":"Add Lesson"})]}),a&&f.jsx("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:f.jsxs("form",{onSubmit:A,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Lesson Title"}),f.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.title,onChange:R=>p({...m,title:R.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Duration"}),f.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.duration,onChange:R=>p({...m,duration:R.target.value}),placeholder:"e.g. 15 min"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Video Embed URL (YouTube/Vimeo)"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:m.videoUrl,onChange:R=>p({...m,videoUrl:R.target.value}),placeholder:"https://www.youtube.com/embed/..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Lesson Content / Notes"}),f.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:f.jsx(Il,{theme:"snow",value:m.content,onChange:R=>p({...m,content:R}),modules:HN,formats:FN,className:"h-72 mb-12"})})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx(yt,{type:"submit",variant:"primary",children:c?"Update Lesson":"Save Lesson"})})]})}),f.jsxs("div",{className:"space-y-3",children:[v?f.jsx("div",{className:"text-gray-400",children:"Loading lessons..."}):t.map((R,U)=>f.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-gray-800 flex justify-between items-center group hover:border-gray-600",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-800 text-gray-400 font-bold text-sm",children:U+1}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium text-white",children:R.title}),f.jsx("div",{className:"text-xs text-gray-500",children:R.duration})]})]}),f.jsxs("div",{className:"flex items-center gap-3 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>S(R),className:"text-primary hover:text-primary/80 text-sm",children:"Edit"}),f.jsx("button",{onClick:()=>O(R.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Delete"})]})]},R.id)),t.length===0&&!v&&f.jsx("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:"No lessons yet. Start teaching!"})]})]})},X7=()=>{const[n,e]=P.useState(!0),[t,r]=P.useState(!1),[a,l]=P.useState(null),[c,h]=P.useState({analystName:"",analystImage:"",analystBio:"",twitter:"",linkedin:"",telegram:""});P.useEffect(()=>{const p=wh(Le,async v=>{if(v){l(v);try{const _=$e(Ee,"users",v.uid),E=await fr(_);if(E.exists()){const A=E.data();h(S=>({...S,analystName:A.analystName||"",analystImage:A.analystImage||"",analystBio:A.analystBio||"",twitter:A.twitter||"",linkedin:A.linkedin||"",telegram:A.telegram||""}))}}catch(_){console.error("Error fetching profile:",_)}}e(!1)});return()=>p()},[]);const m=async p=>{if(p.preventDefault(),!!a){r(!0);try{await Oc($e(Ee,"users",a.uid),c,{merge:!0}),alert("Profile updated successfully!")}catch(v){console.error("Error saving profile:",v),alert("Failed to save profile.")}finally{r(!1)}}};return n?f.jsx("div",{className:"text-white",children:"Loading Profile..."}):f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"Analyst Profile Settings"}),f.jsx("div",{className:"bg-surface p-8 rounded-xl border border-gray-800",children:f.jsxs("form",{onSubmit:m,className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx("div",{className:"md:col-span-2",children:f.jsx("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-800 pb-2",children:"Personal Details"})}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analyst Name"}),f.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.analystName,onChange:p=>h({...c,analystName:p.target.value}),placeholder:"e.g. John Doe"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Profile Image URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.analystImage,onChange:p=>h({...c,analystImage:p.target.value}),placeholder:"https://..."})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bio"}),f.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-32 resize-none",value:c.analystBio,onChange:p=>h({...c,analystBio:p.target.value}),placeholder:"Tell us about yourself..."})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pt-6",children:[f.jsx("div",{className:"md:col-span-3",children:f.jsx("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-800 pb-2",children:"Social Connections"})}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Twitter (X) URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.twitter,onChange:p=>h({...c,twitter:p.target.value}),placeholder:"https://twitter.com/..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"LinkedIn URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.linkedin,onChange:p=>h({...c,linkedin:p.target.value}),placeholder:"https://linkedin.com/in/..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Telegram URL"}),f.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.telegram,onChange:p=>h({...c,telegram:p.target.value}),placeholder:"https://t.me/..."})]})]}),f.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-800",children:f.jsx(yt,{type:"submit",variant:"primary",contentClassName:"px-8",children:t?"Saving...":"Save Profile"})})]})})]})},W7=()=>{const{courseId:n}=Pc(),e=ki(),[t,r]=P.useState(null),[a,l]=P.useState([]),[c,h]=P.useState(null),[m,p]=P.useState(!0),[v,_]=P.useState(!0);return P.useEffect(()=>{(async()=>{try{p(!0);const A=await fr($e(Ee,"courses",n));if(!A.exists()){alert("Course not found"),e("/dashboard");return}r({id:A.id,...A.data()});const S=Xn(ut(Ee,"courses",n,"lessons"),us("order","asc")),O=await en(S);let R=[];O.empty?R=(await en(ut(Ee,"courses",n,"lessons"))).docs.map(F=>({id:F.id,...F.data()})):R=O.docs.map(U=>({id:U.id,...U.data()})),l(R),R.length>0&&h(R[0])}catch(A){console.error("Error loading course:",A)}finally{p(!1)}})()},[n,e]),m?f.jsx("div",{className:"p-10 text-center text-white",children:"Loading class..."}):t?f.jsxs("div",{className:"flex h-screen bg-background overflow-hidden animate-fade-in",children:[f.jsxs("div",{className:`${v?"w-80":"w-0"} bg-surface border-r border-gray-800 transition-all duration-300 flex flex-col flex-shrink-0 relative`,children:[f.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center",children:[f.jsx("h2",{className:"font-bold text-white truncate max-w-[200px]",children:t.title}),f.jsx("button",{onClick:()=>_(!1),className:"md:hidden text-gray-400",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a.map((E,A)=>f.jsxs("div",{onClick:()=>h(E),className:`p-4 border-b border-gray-800 cursor-pointer transition-colors hover:bg-gray-800/50 flex items-start gap-3
                   ${c?.id===E.id?"bg-primary/10 border-l-4 border-l-primary":"border-l-4 border-l-transparent"}
                 `,children:[f.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-800 text-gray-400 text-xs flex items-center justify-center mt-0.5",children:A+1}),f.jsxs("div",{children:[f.jsx("h4",{className:`text-sm font-medium ${c?.id===E.id?"text-primary":"text-gray-300"}`,children:E.title}),f.jsx("span",{className:"text-xs text-gray-500",children:E.duration||"10 min"})]})]},E.id)),a.length===0&&f.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No lessons available yet."})]}),f.jsx("div",{className:"p-4 border-t border-gray-800",children:f.jsx(ze,{to:"/dashboard",children:f.jsx(yt,{variant:"outline",size:"sm",className:"w-full",children:"Back to Dashboard"})})})]}),f.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[f.jsx("div",{className:"absolute top-4 left-4 z-10",children:f.jsx("button",{onClick:()=>_(!v),className:"bg-surface/80 p-2 rounded-full text-white hover:bg-surface backdrop-blur border border-gray-700 shadow-lg",children:v?f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),c?f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[f.jsx("div",{className:"bg-black aspect-video w-full max-h-[70vh] flex items-center justify-center",children:c.videoUrl?f.jsx("iframe",{src:c.videoUrl,title:c.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):f.jsxs("div",{className:"text-gray-500 text-center",children:[f.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),f.jsx("p",{children:"No video content for this lesson."})]})}),f.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[f.jsx("div",{className:"flex justify-between items-start mb-6",children:f.jsx("h1",{className:"text-2xl font-bold text-white",children:c.title})}),f.jsx("div",{className:"prose prose-invert max-w-none",children:f.jsx("p",{className:"text-gray-300 whitespace-pre-line",children:c.content})})]})]}):f.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"Select a lesson from the sidebar to start."})]})]}):null},Z7=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0);return P.useEffect(()=>{(async()=>{try{const c=(await en(ut(Ee,"courses"))).docs.map(m=>m.data()),h={};c.forEach(m=>{const p=m.path||"General";h[p]||(h[p]={name:p,count:0,image:m.image}),h[p].count+=1}),e(Object.values(h))}catch(l){console.error("Error fetching paths:",l)}finally{r(!1)}})()},[]),t?f.jsx("div",{className:"p-10 text-center text-white",children:"Loading Academy..."}):f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 animate-fade-in",children:[f.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"My Academy"}),f.jsx("p",{className:"text-gray-400 mb-10",children:"Choose a learning path to start your journey."}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(a=>f.jsx(ze,{to:`/academy/${encodeURIComponent(a.name)}`,className:"group",children:f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden hover:border-primary transition-all h-full flex flex-col",children:[f.jsxs("div",{className:"h-48 bg-gray-900 relative overflow-hidden",children:[a.image?f.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:f.jsx("svg",{className:"w-12 h-12 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent opacity-80"}),f.jsx("div",{className:"absolute bottom-4 left-4",children:f.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-primary transition-colors",children:a.name})})]}),f.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-between",children:[f.jsxs("p",{className:"text-gray-400",children:[a.count," Course",a.count!==1&&"s"," available"]}),f.jsxs("span",{className:"text-primary mt-4 inline-flex items-center text-sm font-medium",children:["Explore Path ",f.jsx("svg",{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]})]})},a.name))}),n.length===0&&f.jsx("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:f.jsx("p",{className:"text-gray-500",children:"No academy paths available yet."})})]})},J7=()=>{const{path:n}=Pc(),e=decodeURIComponent(n),[t,r]=P.useState([]),[a,l]=P.useState(!0);return P.useEffect(()=>{(async()=>{try{const h=Xn(ut(Ee,"courses"),us("order","asc")),v=(await en(h)).docs.map(_=>({id:_.id,..._.data()})).filter(_=>(_.path||"General")===e);r(v)}catch(h){console.error("Error loading courses:",h)}finally{l(!1)}})()},[e]),a?f.jsx("div",{className:"p-10 text-center text-white",children:"Loading Path..."}):f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 animate-fade-in",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx(ze,{to:"/academy",className:"text-gray-500 hover:text-white mb-4 inline-block",children:" Back to Academy"}),f.jsxs("h1",{className:"text-3xl font-bold text-white",children:[f.jsx("span",{className:"text-primary",children:e})," Courses"]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(c=>f.jsx(ze,{to:`/academy/${encodeURIComponent(e)}/${c.id}`,className:"group",children:f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden hover:border-gray-600 transition-all h-full",children:[f.jsxs("div",{className:"h-48 bg-gray-900 relative",children:[c.image&&f.jsx("img",{src:c.image,alt:c.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute top-2 right-2 bg-black/60 backdrop-blur px-2 py-1 rounded text-xs text-white border border-gray-700",children:c.level})]}),f.jsxs("div",{className:"p-5",children:[f.jsx("h3",{className:"text-lg font-bold text-white mb-2 group-hover:text-primary transition-colors",children:c.title}),f.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:c.description}),f.jsx("span",{className:"text-sm font-medium text-white group-hover:underline",children:"Start Learning "})]})]})},c.id))}),t.length===0&&f.jsx("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:f.jsx("p",{className:"text-gray-500",children:"No courses found in this path."})})]})},eU=()=>{const{path:n,courseId:e}=Pc(),t=ki(),[r,a]=P.useState(null),[l,c]=P.useState([]),[h,m]=P.useState(null),[p,v]=P.useState(!0),[_,E]=P.useState(!0),[A,S]=P.useState([]);return P.useEffect(()=>{(async()=>{if(Le.currentUser&&e){const R=$e(db,"users",Le.currentUser.uid,"course_progress",e),U=await fr(R);U.exists()&&S(U.data().completedLessonIds||[])}})()},[e]),P.useEffect(()=>{(async()=>{try{v(!0);const R=await fr($e(db,"courses",e));if(!R.exists()){alert("Course not found"),t(`/academy/${n}`);return}a({id:R.id,...R.data()});const U=Xn(ut(db,"courses",e,"lessons"),us("order","asc")),F=await en(U);let Q=[];F.empty?Q=(await en(ut(db,"courses",e,"lessons"))).docs.map(ie=>({id:ie.id,...ie.data()})):Q=F.docs.map(Y=>({id:Y.id,...Y.data()})),c(Q),Q.length>0&&m(Q[0])}catch(R){console.error("Error loading course:",R)}finally{v(!1)}})()},[e,t,n]),p?f.jsx("div",{className:"p-10 text-center text-white",children:"Loading class..."}):r?f.jsxs("div",{className:"flex bg-background overflow-hidden animate-fade-in",style:{height:"calc(100vh - 64px)"},children:[f.jsxs("div",{className:`${_?"w-80":"w-0"} bg-surface border-r border-gray-800 transition-all duration-300 flex flex-col flex-shrink-0 relative`,children:[f.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50",children:[f.jsx("h2",{className:"font-bold text-white truncate max-w-[200px]",children:r.title}),f.jsx("button",{onClick:()=>E(!1),className:"md:hidden text-gray-400",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[l.map((O,R)=>f.jsxs("div",{onClick:()=>m(O),className:`p-4 border-b border-gray-800 cursor-pointer transition-colors hover:bg-gray-800/50 flex items-start gap-3
                   ${h?.id===O.id?"bg-primary/10 border-l-4 border-l-primary":"border-l-4 border-l-transparent"}
                 `,children:[f.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-800 text-gray-400 text-xs flex items-center justify-center mt-0.5",children:R+1}),f.jsxs("div",{children:[f.jsx("h4",{className:`text-sm font-medium ${h?.id===O.id?"text-primary":"text-gray-300"}`,children:O.title}),f.jsx("span",{className:"text-xs text-gray-500",children:O.duration||"10 min"})]})]},O.id)),l.length===0&&f.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No lessons available yet."})]}),f.jsx("div",{className:"p-4 border-t border-gray-800",children:f.jsx(ze,{to:`/academy/${n}`,children:f.jsx(Button,{variant:"outline",size:"sm",className:"w-full",children:" Back to Path"})})})]}),f.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[f.jsx("div",{className:"absolute top-4 left-4 z-10",children:f.jsx("button",{onClick:()=>E(!_),className:"bg-surface/80 p-2 rounded-full text-white hover:bg-surface backdrop-blur border border-gray-700 shadow-lg",children:_?f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),h?f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[f.jsx("div",{className:"bg-black aspect-video w-full max-h-[60vh] flex items-center justify-center",children:h.videoUrl?f.jsx("iframe",{src:h.videoUrl,title:h.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):f.jsxs("div",{className:"text-gray-500 text-center",children:[f.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),f.jsx("p",{children:"No video content."})]})}),f.jsxs("div",{className:"max-w-4xl mx-auto p-8 pb-20",children:[f.jsx("div",{className:"flex justify-between items-start mb-6",children:f.jsx("h1",{className:"text-2xl font-bold text-white",children:h.title})}),f.jsx("div",{className:"prose prose-invert max-w-none",children:f.jsx("div",{dangerouslySetInnerHTML:{__html:h.content}})}),(r.instructorName||r.instructorBio)&&f.jsxs("div",{className:"mt-12 border-t border-gray-800 pt-8",children:[f.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Meet Your Instructor"}),f.jsxs("div",{className:"flex items-start gap-6 bg-surface p-6 rounded-xl border border-gray-800",children:[r.instructorImage?f.jsx("img",{src:r.instructorImage,alt:r.instructorName,className:"w-20 h-20 rounded-full object-cover border-2 border-primary"}):f.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-700 flex items-center justify-center text-2xl font-bold text-gray-400",children:r.instructorName?r.instructorName.charAt(0):"I"}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-lg font-bold text-white",children:r.instructorName}),f.jsx("p",{className:"text-gray-400 text-sm whitespace-pre-wrap mt-2",children:r.instructorBio})]})]})]})]})]}):f.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:f.jsx("p",{children:"Select a lesson from the list to start learning."})})]})]}):null},tU=({onPostCreated:n})=>{const[e,t]=P.useState(""),[r,a]=P.useState("public"),[l,c]=P.useState(null),[h,m]=P.useState(!1),p=E=>new Promise((A,S)=>{const O=new FileReader;O.readAsDataURL(E),O.onload=R=>{const U=new Image;U.src=R.target.result,U.onload=()=>{const F=document.createElement("canvas"),Q=800,Y=800;let ie=U.width,ve=U.height;ie>ve?ie>Q&&(ve*=Q/ie,ie=Q):ve>Y&&(ie*=Y/ve,ve=Y),F.width=ie,F.height=ve,F.getContext("2d").drawImage(U,0,0,ie,ve);const k=F.toDataURL("image/jpeg",.7);A(k)},U.onerror=F=>S(F)},O.onerror=R=>S(R)}),v=async E=>{const A=E.target.files[0];if(A)try{const S=await p(A);c(S)}catch(S){console.error("Compression error:",S),alert("Failed to process image.")}},_=async E=>{if(E.preventDefault(),!(!e.trim()&&!l)){m(!0);try{const A={uid:Le.currentUser.uid,content:e.trim(),image:l,privacy:r,likes:[],commentsCount:0,shares:0,createdAt:ml()};await wl(ut(Ee,"posts"),A),t(""),c(null),n&&n()}catch(A){console.error("Error creating post:",A),alert("Failed to post. Please try again.")}finally{m(!1)}}};return f.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 p-4 mb-6 animate-fade-in",children:f.jsxs("div",{className:"flex gap-4",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 flex-shrink-0 overflow-hidden",children:Le.currentUser?.photoURL?f.jsx("img",{src:Le.currentUser.photoURL,alt:"User",className:"h-full w-full object-cover"}):f.jsx("div",{className:"h-full w-full flex items-center justify-center text-xs text-gray-400",children:"You"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("textarea",{value:e,onChange:E=>t(E.target.value),placeholder:"What's on your mind, trader?",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg p-3 text-white focus:outline-none focus:border-primary min-h-[100px] resize-none"}),l&&f.jsxs("div",{className:"mt-2 relative inline-block",children:[f.jsx("img",{src:l,alt:"Preview",className:"h-32 rounded-lg border border-gray-700"}),f.jsx("button",{onClick:()=>c(null),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex justify-between items-center mt-3",children:[f.jsxs("div",{className:"flex gap-2 text-primary",children:[f.jsxs("label",{className:"cursor-pointer hover:bg-gray-800 p-2 rounded-full transition-colors flex items-center gap-2",children:[f.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:v}),f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),f.jsx("span",{className:"text-sm",children:"Photo"})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("select",{value:r,onChange:E=>a(E.target.value),className:"bg-gray-800 text-gray-300 text-sm border border-gray-700 rounded-md py-1 px-2 focus:outline-none",children:[f.jsx("option",{value:"public",children:"Public"}),f.jsx("option",{value:"friends",children:"Friends Only"}),f.jsx("option",{value:"private",children:"Private"})]})})]}),f.jsx(yt,{onClick:_,disabled:h||!e.trim()&&!l,children:h?"Posting...":"Post"})]})]})]})})},nU=({post:n})=>{const[e,t]=P.useState(null),[r,a]=P.useState(n.likes?.includes(Le.currentUser?.uid)),[l,c]=P.useState(n.likes?.length||0),[h,m]=P.useState(!1),[p,v]=P.useState([]),[_,E]=P.useState(""),[A,S]=P.useState(!1);P.useEffect(()=>{(async()=>{if(n.uid){const ie=await fr($e(Ee,"users",n.uid));ie.exists()&&t(ie.data())}})()},[n.uid]),P.useEffect(()=>{if(h){const Y=Xn(ut(Ee,"posts",n.id,"comments"),us("createdAt","asc")),ie=Qf(Y,ve=>{v(ve.docs.map(L=>({id:L.id,...L.data()})))});return()=>ie()}},[h,n.id]);const O=async()=>{if(!Le.currentUser)return;const Y=r;a(!Y),c(ve=>Y?ve-1:ve+1);const ie=$e(Ee,"posts",n.id);Y?await hr(ie,{likes:al(Le.currentUser.uid)}):await hr(ie,{likes:ch(Le.currentUser.uid)})},R=async Y=>{if(Y.preventDefault(),!!_.trim()){S(!0);try{await wl(ut(Ee,"posts",n.id,"comments"),{uid:Le.currentUser.uid,username:Le.currentUser.displayName||"User",content:_.trim(),createdAt:new Date}),await hr($e(Ee,"posts",n.id),{commentsCount:(n.commentsCount||0)+1}),E("")}catch(ie){console.error("Error commenting:",ie)}finally{S(!1)}}},U=Y=>{if(!Y)return"Just now";const ie=Y.toDate?Y.toDate():new Date(Y),ve=Math.floor((new Date-ie)/1e3);let L=ve/31536e3;return L>1?Math.floor(L)+"y":(L=ve/2592e3,L>1?Math.floor(L)+"mo":(L=ve/86400,L>1?Math.floor(L)+"d":(L=ve/3600,L>1?Math.floor(L)+"h":(L=ve/60,L>1?Math.floor(L)+"m":Math.floor(ve)+"s"))))},F=e?.username||"Unknown User",Q=e?.avatar_url||`https://ui-avatars.com/api/?name=${F}`;return f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 mb-6 overflow-hidden animate-fade-in",children:[f.jsxs("div",{className:"p-4 flex items-center gap-3",children:[f.jsx(ze,{to:`/profile/${F}`,className:"block h-10 w-10 rounded-full overflow-hidden bg-gray-700",children:f.jsx("img",{src:Q,alt:F,className:"h-full w-full object-cover"})}),f.jsxs("div",{children:[f.jsx(ze,{to:`/profile/${F}`,className:"text-white font-bold hover:underline text-sm block",children:F}),f.jsxs("span",{className:"text-xs text-gray-500",children:[U(n.createdAt),"  ",n.privacy==="public"?"Public":n.privacy==="friends"?"Friends":"Private"]})]})]}),f.jsx("div",{className:"px-4 pb-2",children:f.jsx("p",{className:"text-gray-200 whitespace-pre-wrap",children:n.content})}),n.image&&f.jsx("div",{className:"w-full h-auto mt-2",children:f.jsx("img",{src:n.image,alt:"Post content",className:"w-full h-auto max-h-[500px] object-cover"})}),f.jsx("div",{className:"px-4 py-3 border-t border-gray-800 flex justify-between items-center mt-2",children:f.jsxs("div",{className:"flex gap-6",children:[f.jsxs("button",{onClick:O,className:`flex items-center gap-2 text-sm transition-colors ${r?"text-red-500":"text-gray-400 hover:text-red-500"}`,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${r?"fill-current":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),l>0&&f.jsx("span",{children:l})]}),f.jsxs("button",{onClick:()=>m(!h),className:"flex items-center gap-2 text-sm text-gray-400 hover:text-primary transition-colors",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),f.jsx("span",{children:p.length||n.commentsCount||0})]}),f.jsx("button",{className:"flex items-center gap-2 text-sm text-gray-400 hover:text-green-500 transition-colors",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})}),h&&f.jsxs("div",{className:"bg-gray-900/30 p-4 border-t border-gray-800",children:[f.jsx("div",{className:"space-y-3 mb-4 max-h-60 overflow-y-auto",children:p.map(Y=>f.jsxs("div",{className:"flex gap-2 items-start",children:[f.jsx("div",{className:"h-6 w-6 rounded-full bg-gray-700 flex-shrink-0"}),f.jsxs("div",{className:"bg-gray-800 rounded-lg p-2 text-sm flex-1",children:[f.jsx("span",{className:"font-bold text-white mr-2",children:"Unknown"})," ",f.jsx("span",{className:"text-gray-300",children:Y.content})]})]},Y.id))}),f.jsxs("form",{onSubmit:R,className:"flex gap-2",children:[f.jsx("input",{type:"text",value:_,onChange:Y=>E(Y.target.value),placeholder:"Write a comment...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-primary"}),f.jsx("button",{type:"submit",disabled:A||!_.trim(),className:"text-primary font-medium text-sm disabled:opacity-50",children:"Post"})]})]})]})},rU=()=>{const[n,e]=P.useState("feed"),[t,r]=P.useState([]),[a,l]=P.useState(!0),[c,h]=P.useState([]),[m,p]=P.useState({sent:[],received:[]}),[v,_]=P.useState([]);P.useEffect(()=>{if(!Le.currentUser)return;const S=Qf($e(Ee,"users",Le.currentUser.uid),O=>{if(O.exists()){const R=O.data();h(R.friends||[]),p(R.friendRequests||{sent:[],received:[]})}});return()=>S()},[]),P.useEffect(()=>{c&&(async()=>{if(Le.currentUser)try{const O=Xn(ut(Ee,"users"),Tf(20)),U=(await en(O)).docs.map(F=>({id:F.id,...F.data()})).filter(F=>F.id!==Le.currentUser.uid&&!c.includes(F.id)&&!m.sent?.includes(F.id)&&!m.received?.includes(F.id)).slice(0,5);_(U)}catch(O){console.error("Error fetching suggestions:",O)}})()},[c,m]),P.useEffect(()=>{const S=Xn(ut(Ee,"posts"),us("createdAt","desc")),O=Qf(S,R=>{const F=R.docs.map(Q=>({id:Q.id,...Q.data()})).filter(Q=>Q.uid===Le.currentUser?.uid||Q.privacy==="public"?!0:Q.privacy==="friends"?c.includes(Q.uid):!1);r(F),l(!1)});return()=>O()},[c]);const E=async S=>{try{const O=$e(Ee,"users",Le.currentUser.uid),R=$e(Ee,"users",S);await hr(O,{friends:ch(S),"friendRequests.received":al(S)}),await hr(R,{friends:ch(Le.currentUser.uid),"friendRequests.sent":al(Le.currentUser.uid)}),alert("Friend request accepted!")}catch(O){console.error("Error accepting friend:",O)}},A=async S=>{try{const O=$e(Ee,"users",Le.currentUser.uid),R=$e(Ee,"users",S);await hr(O,{"friendRequests.received":al(S)}),await hr(R,{"friendRequests.sent":al(Le.currentUser.uid)})}catch(O){console.error("Error rejecting friend:",O)}};return f.jsx("div",{className:"min-h-screen bg-background pt-20 pb-10",children:f.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:"Traders Community"}),f.jsxs("div",{className:"flex space-x-1 bg-surface p-1 rounded-lg border border-gray-800",children:[f.jsx("button",{onClick:()=>e("feed"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="feed"?"bg-primary text-white":"text-gray-400 hover:text-white"}`,children:"Feed"}),f.jsxs("button",{onClick:()=>e("friends"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="friends"?"bg-primary text-white":"text-gray-400 hover:text-white"}`,children:["Friends ",f.jsx("span",{className:"ml-1 bg-gray-800 text-xs px-2 py-0.5 rounded-full",children:c.length})]}),f.jsxs("button",{onClick:()=>e("requests"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="requests"?"bg-primary text-white":"text-gray-400 hover:text-white"}`,children:["Requests ",f.jsx("span",{className:"ml-1 bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:m.received?.length||0})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[f.jsx("div",{className:"hidden lg:block col-span-1",children:f.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 p-6 sticky top-24",children:f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx(ze,{to:`/profile/${Le.currentUser?.displayName}`,className:"h-20 w-20 rounded-full bg-gray-700 overflow-hidden mb-4",children:f.jsx("img",{src:Le.currentUser?.photoURL||"https://ui-avatars.com/api/?name=User",alt:"Me",className:"w-full h-full object-cover"})}),f.jsx("h3",{className:"text-lg font-bold text-white",children:Le.currentUser?.displayName||"Trader"}),f.jsx("div",{className:"w-full border-t border-gray-800 my-4"}),f.jsxs("div",{className:"w-full flex justify-between text-sm mb-2",children:[f.jsx("span",{className:"text-gray-400",children:"Posts"}),f.jsx("span",{className:"text-white font-bold",children:t.filter(S=>S.uid===Le.currentUser?.uid).length})]}),f.jsxs("div",{className:"w-full flex justify-between text-sm",children:[f.jsx("span",{className:"text-gray-400",children:"Friends"}),f.jsx("span",{className:"text-white font-bold",children:c.length})]})]})})}),f.jsxs("div",{className:"col-span-1 lg:col-span-2",children:[n==="feed"&&f.jsxs(f.Fragment,{children:[f.jsx(tU,{}),a?f.jsx("div",{className:"text-center py-10 text-gray-400",children:"Loading community feed..."}):t.length>0?t.map(S=>f.jsx(nU,{post:S},S.id)):f.jsx("div",{className:"text-center py-10 bg-surface rounded-xl border border-gray-800",children:f.jsx("p",{className:"text-gray-400",children:"No posts yet. Be the first to share something!"})})]}),n==="friends"&&f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[f.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Your Friends"}),c.length>0?f.jsx("div",{className:"grid grid-cols-1 gap-4",children:c.map(S=>f.jsx(sU,{userId:S},S))}):f.jsx("p",{className:"text-gray-400",children:"No friends yet. Add people from the suggestions!"})]}),n==="requests"&&f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[f.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Friend Requests"}),m.received?.length>0?f.jsx("div",{className:"space-y-4",children:m.received.map(S=>f.jsx(iU,{userId:S,onAccept:()=>E(S),onReject:()=>A(S)},S))}):f.jsx("p",{className:"text-gray-400",children:"No pending requests."})]})]}),f.jsx("div",{className:"hidden lg:block col-span-1",children:f.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6 sticky top-24",children:[f.jsx("h3",{className:"text-white font-bold mb-4",children:"Suggested People"}),f.jsx("div",{className:"space-y-4",children:v.length>0?v.map(S=>f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(ze,{to:`/profile/${S.username}`,className:"flex items-center gap-3 group",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden",children:f.jsx("img",{src:S.avatar_url||`https://ui-avatars.com/api/?name=${S.username}`,alt:S.username,className:"w-full h-full object-cover"})}),f.jsx("div",{className:"max-w-[100px]",children:f.jsx("p",{className:"text-sm font-bold text-white truncate group-hover:underline",children:S.username})})]}),f.jsx(ze,{to:`/profile/${S.username}`,className:"text-primary text-xs hover:underline",children:"View"})]},S.id)):f.jsx("p",{className:"text-xs text-gray-500",children:"No suggestions available right now."})})]})})]})]})})},sU=({userId:n})=>{const[e,t]=P.useState(null);return P.useEffect(()=>{fr($e(Ee,"users",n)).then(r=>{r.exists()&&t(r.data())})},[n]),e?f.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(ze,{to:`/profile/${e.username}`,className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden",children:f.jsx("img",{src:e.avatar_url||`https://ui-avatars.com/api/?name=${e.username}`,alt:e.username,className:"w-full h-full object-cover"})}),f.jsxs("div",{children:[f.jsx(ze,{to:`/profile/${e.username}`,className:"font-bold text-white hover:underline",children:e.username}),f.jsx("p",{className:"text-xs text-gray-500",children:"Trader"})]})]}),f.jsx(ze,{to:`/profile/${e.username}`,className:"text-xs text-primary border border-primary px-3 py-1 rounded-full hover:bg-primary hover:text-white transition-colors",children:"View Profile"})]}):f.jsx("div",{className:"h-16 bg-gray-800 rounded-lg animate-pulse"})},iU=({userId:n,onAccept:e,onReject:t})=>{const[r,a]=P.useState(null);return P.useEffect(()=>{fr($e(Ee,"users",n)).then(l=>{l.exists()&&a(l.data())})},[n]),r?f.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden",children:f.jsx("img",{src:r.avatar_url||`https://ui-avatars.com/api/?name=${r.username}`,alt:r.username,className:"w-full h-full object-cover"})}),f.jsxs("div",{children:[f.jsx("span",{className:"font-bold text-white",children:r.username}),f.jsx("p",{className:"text-xs text-gray-500",children:"Wants to be your friend"})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:e,className:"bg-primary hover:bg-green-600 text-white px-3 py-1 rounded-md text-xs font-bold",children:"Accept"}),f.jsx("button",{onClick:t,className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md text-xs font-bold",children:"Reject"})]})]}):f.jsx("div",{className:"h-16 bg-gray-800 rounded-lg animate-pulse"})},aU=()=>{const{username:n}=Pc(),[e,t]=P.useState(null),[r,a]=P.useState(!0),[l,c]=P.useState(null);P.useEffect(()=>{(async()=>{try{const S=Xn(ut(Ee,"users"),kS("username","==",n)),O=await en(S);O.empty?t(null):t({id:O.docs[0].id,...O.docs[0].data()})}catch(S){console.error("Error fetching profile:",S)}finally{a(!1)}})()},[n]),P.useEffect(()=>{if(!Le.currentUser)return;const A=Qf($e(Ee,"users",Le.currentUser.uid),S=>{S.exists()&&c(S.data())});return()=>A()},[]);const h=Le.currentUser?.uid===e?.id,m=l?.friends?.includes(e?.id),p=l?.friendRequests?.sent?.includes(e?.id),v=l?.friendRequests?.received?.includes(e?.id),_=async()=>{if(!(!Le.currentUser||!e))try{await hr($e(Ee,"users",Le.currentUser.uid),{"friendRequests.sent":ch(e.id)}),await hr($e(Ee,"users",e.id),{"friendRequests.received":ch(Le.currentUser.uid)}),alert("Friend request sent!")}catch(A){console.error(A)}},E=async()=>{if(confirm("Are you sure you want to remove this friend?"))try{await hr($e(Ee,"users",Le.currentUser.uid),{friends:al(e.id)}),await hr($e(Ee,"users",e.id),{friends:al(Le.currentUser.uid)})}catch(A){console.error(A)}};return r?f.jsx("div",{className:"text-center p-20 text-white",children:"Loading Profile..."}):e?f.jsx("div",{className:"min-h-screen bg-background pt-20 px-4 animate-fade-in",children:f.jsxs("div",{className:"max-w-3xl mx-auto bg-surface rounded-xl border border-gray-800 overflow-hidden shadow-2xl",children:[f.jsx("div",{className:"h-32 bg-gradient-to-r from-primary/20 to-secondary/20 relative"}),f.jsxs("div",{className:"px-8 pb-8",children:[f.jsxs("div",{className:"relative -mt-16 mb-6 flex flex-col md:flex-row items-end md:items-end gap-6",children:[f.jsx("div",{className:"h-32 w-32 rounded-full border-4 border-surface bg-gray-800 overflow-hidden",children:f.jsx("img",{src:e.avatar_url||`https://ui-avatars.com/api/?name=${e.username}`,alt:e.username,className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"flex-1 mb-2 text-center md:text-left",children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:e.username}),f.jsxs("p",{className:"text-gray-400 text-sm",children:["Member since ",e.createdAt?new Date(e.createdAt.seconds*1e3).getFullYear():"2024"]})]}),f.jsx("div",{className:"mb-4",children:h?f.jsx("span",{className:"px-4 py-2 bg-gray-700 text-white rounded-lg text-sm",children:"It's You"}):m?f.jsxs("div",{className:"flex gap-2",children:[f.jsx("span",{className:"px-4 py-2 bg-green-500/20 text-green-400 border border-green-500/50 rounded-lg text-sm font-bold",children:"Friends"}),f.jsx("button",{onClick:E,className:"text-red-400 hover:text-red-300 text-xs underline",children:"Unfriend"})]}):p?f.jsx(yt,{disabled:!0,className:"opacity-70",children:"Request Sent"}):v?f.jsx("span",{className:"text-yellow-400 text-sm",children:"Check your requests!"}):f.jsx(yt,{onClick:_,children:"Add Friend"})})]}),f.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[f.jsx("h2",{className:"text-lg font-bold text-white mb-3",children:"About"}),f.jsx("p",{className:"text-gray-300 leading-relaxed whitespace-pre-wrap",children:e.bio||"No bio yet."})]}),f.jsx("div",{className:"mt-8 grid grid-cols-2 gap-4",children:f.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-800 text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-primary",children:e.friends?.length||0}),f.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-widest",children:"Friends"})]})})]})]})}):f.jsx("div",{className:"text-center p-20 text-white",children:"User not found"})},dy=({children:n,adminOnly:e=!1})=>{const[t,r]=P.useState(null),[a,l]=P.useState(!0);return P.useEffect(()=>{const c=wh(Le,h=>{r(h),l(!1)});return()=>c()},[]),a?f.jsx("div",{className:"text-center p-10 pt-32 text-white",children:"Loading..."}):t?n:f.jsx(TR,{to:"/login",replace:!0})};function oU(){return f.jsx(XR,{children:f.jsxs("div",{className:"min-h-screen bg-background text-text font-sans flex flex-col",children:[f.jsx(TD,{}),f.jsx("main",{className:"flex-grow",children:f.jsxs(NR,{children:[f.jsx(gn,{path:"/",element:f.jsx(SD,{})}),f.jsx(gn,{path:"/analysis",element:f.jsx(ND,{})}),f.jsx(gn,{path:"/analysis/:id",element:f.jsx(CD,{})}),f.jsx(gn,{path:"/news",element:f.jsx(ID,{})}),f.jsx(gn,{path:"/news/:id",element:f.jsx(jD,{})}),f.jsx(gn,{path:"/login",element:f.jsx(OD,{})}),f.jsx(gn,{path:"/register",element:f.jsx(DD,{})}),f.jsx(gn,{path:"/community",element:f.jsx(dy,{children:f.jsx(rU,{})})}),f.jsx(gn,{path:"/academy",element:f.jsx(Z7,{})}),f.jsx(gn,{path:"/academy/:path",element:f.jsx(J7,{})}),f.jsx(gn,{path:"/academy/:path/:courseId",element:f.jsx(eU,{})}),f.jsx(gn,{path:"/profile/:username",element:f.jsx(aU,{})}),f.jsx(gn,{path:"/dashboard",element:f.jsx(dy,{children:f.jsx(MD,{})})}),f.jsx(gn,{path:"/dashboard/course/:courseId",element:f.jsx(dy,{children:f.jsx(W7,{})})}),f.jsxs(gn,{path:"/admin",element:f.jsx(PD,{}),children:[f.jsx(gn,{index:!0,element:f.jsx(UD,{})}),f.jsx(gn,{path:"news",element:f.jsx(H7,{})}),f.jsx(gn,{path:"analysis",element:f.jsx(G7,{})}),f.jsx(gn,{path:"courses",element:f.jsx(Q7,{})}),f.jsx(gn,{path:"profile",element:f.jsx(X7,{})})]})]})}),f.jsx(AD,{})]})})}jC.createRoot(document.getElementById("root")).render(f.jsx(P.StrictMode,{children:f.jsx(oU,{})}))});export default lU();
