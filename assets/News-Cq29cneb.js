import{r as c,j as t,S as f,L as w,q as b,c as y,d,o as N,g as S,a as l,b as D,e as j}from"./index-Cp4KYnhm.js";import{C as k}from"./Card-CfBHvKUW.js";const m=[{id:"1",title:"NFP Smashes Expectations: 350k Jobs Added",impact:"High",affectedCurrencies:["USD","XAU","JPY"],content:"The Non-Farm Payrolls report showed a surprise surge in job creation, sending the Dollar Index (DXY) rocketing past 104.50. Traders should watch for pullbacks on Gold.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=1000&auto=format&fit=crop"},{id:"2",title:"ECB Signals Rate Cuts in June",impact:"Medium",affectedCurrencies:["EUR","GBP"],content:"Lagarde hinted that inflation is under control, opening the door for a 25bps cut. Euro is showing weakness against the Pound.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1526304640151-b59310398691?q=80&w=1000&auto=format&fit=crop"},{id:"3",title:"BoJ Maintains Ultra-Loose Policy",impact:"Low",affectedCurrencies:["JPY"],content:"No surprises from the Bank of Japan. Yield Curve Control remains in place. USD/JPY is drifting sideways in a tight range.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1000&auto=format&fit=crop"}],C={High:"bg-red-500/20 text-red-500 border border-red-500/50",Medium:"bg-orange-500/20 text-orange-500 border border-orange-500/50",Low:"bg-yellow-500/20 text-yellow-500 border border-yellow-500/50"},v=()=>{const[p,r]=c.useState([]),[g,h]=c.useState(!0),x=e=>{if(!e)return"";const s=e.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),n=document.createElement("DIV");return n.innerHTML=s,(n.textContent||n.innerText||"").trim()};return c.useEffect(()=>{(async()=>{try{const s=b(y(d,"news"),N("timestamp","desc"));let o=(await S(s)).docs.map(a=>({id:a.id,...a.data()}));if(l.currentUser){const a=await D(j(d,"users",l.currentUser.uid));if(a.exists()){const i=a.data().preferences;i&&i.newsImpacts&&i.newsImpacts.length>0&&(o=o.filter(u=>i.newsImpacts.includes(u.impact)))}}o.length>0?r(o):l.currentUser?r([]):r(m)}catch(s){console.error("Error fetching news:",s),r(m)}finally{h(!1)}})()},[]),t.jsxs("div",{className:"bg-background min-h-screen py-12",children:[t.jsx(f,{title:"Market News",description:"Breaking economic news and real-time market updates affecting Forex and Crypto markets."}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsxs("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl tracking-tight",children:["Market ",t.jsx("span",{className:"text-accent",children:"News"})]}),t.jsx("p",{className:"mt-4 text-xl text-gray-400",children:"Stay ahead of the volatility with real-time economic updates."})]}),g?t.jsx("div",{className:"text-center text-white py-20",children:"Loading Earth-shaking Events..."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:p.map(e=>t.jsx(w,{to:`/news/${e.id}`,className:"block group",children:t.jsx(k,{title:e.title,image:e.image,content:x(e.content),subtitle:t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:"text-gray-500 text-xs",children:e.timestamp?.seconds?new Date(e.timestamp.seconds*1e3).toLocaleDateString():e.timestamp||new Date().toLocaleDateString()})}),badges:[{text:e.impact,color:C[e.impact]||"bg-gray-800 text-white"},...(e.affectedCurrencies||[]).map(s=>({text:s,color:"bg-surface border border-gray-700 text-white"}))]})},e.id))})]})]})};export{v as default};
