import{r as l,j as t,S as j,L as S,B as k,q as D,c as v,d as h,o as N,g as A,a as m,b as C,e as L}from"./index-CdHir_gS.js";import{C as B}from"./Card-CfV4z3MQ.js";const g=[{id:"1",pair:"EUR/USD",direction:"Bearish",title:"EUR/USD Forming Head and Shoulders on 4H",content:"Price has failed to break the 1.0900 resistance level multiple times. We are observing a clear H&S pattern formation. If the neckline at 1.0820 breaks, we expect a sharp decline towards the 1.0750 liquidity zone.",author:"Volcano Chief",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=1000&auto=format&fit=crop"},{id:"2",pair:"XAU/USD",direction:"Bullish",title:"Gold Preparing for Eruption Above 2050",content:"Geopolitical tensions and a weakening dollar suggest Gold is accumulating for a massive leg up. Watch for a retest of 2035 as a potential entry point for long positions targeting new highs.",author:"Analyst Sarah",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1000&auto=format&fit=crop"},{id:"3",pair:"GBP/JPY",direction:"Bullish",title:"The Dragon is Waking Up",content:"GJ is respecting the ascending trendline perfectly. The recent pullback to 182.00 was rejected strongly. We are looking for continuation towards 185.00 level.",author:"Volcano Chief",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1526304640151-b59310398691?q=80&w=1000&auto=format&fit=crop"}],q=()=>{const[c,r]=l.useState([]),[p,x]=l.useState(!0),[d,u]=l.useState("All");l.useEffect(()=>{(async()=>{try{const a=D(v(h,"analysis"),N("timestamp","desc"));let n=(await A(a)).docs.map(s=>({id:s.id,...s.data()}));if(m.currentUser){const s=await C(L(h,"users",m.currentUser.uid));if(s.exists()){const o=s.data().preferences;o&&o.analysisCurrencies&&o.analysisCurrencies.length>0&&(n=n.filter(b=>o.analysisCurrencies.includes(b.pair)))}}n.length>0?r(n):m.currentUser?r([]):r(g)}catch(a){console.error("Error fetching analysis:",a),r(g)}finally{x(!1)}})()},[]);const f=d==="All"?c:c.filter(e=>e.pair===d),y=["All",...new Set(c.map(e=>e.pair))],w=e=>{if(!e)return"";const a=e.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),i=document.createElement("DIV");return i.innerHTML=a,(i.textContent||i.innerText||"").trim()};return t.jsxs("div",{className:"bg-background min-h-screen py-12",children:[t.jsx(j,{title:"Market Analysis",description:"Expert technical and fundamental analysis for Forex, Commodities, and Indices.",keywords:"forex analysis, gold analysis, technical analysis, trading signals"}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsxs("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl tracking-tight",children:["Market ",t.jsx("span",{className:"text-primary",children:"Analysis"})]}),t.jsx("p",{className:"mt-4 text-xl text-gray-400",children:"Daily technical breakdowns and trade setups from our experts."})]}),t.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-12",children:y.map(e=>t.jsx("button",{onClick:()=>u(e),className:`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-200 ${d===e?"bg-primary text-white shadow-lg shadow-primary/25":"bg-surface text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:e},e))}),p?t.jsx("div",{className:"text-center text-white py-20",children:"Loading Volcano Data..."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:f.map(e=>{const a=e.direction==="Bullish"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary";return t.jsx(S,{to:`/analysis/${e.id}`,className:"block group",children:t.jsx(B,{title:e.title,image:e.image||e.chart_image_url,content:w(e.content),subtitle:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-gray-500 text-xs",children:e.timestamp?.seconds?new Date(e.timestamp.seconds*1e3).toLocaleDateString():e.timestamp||new Date().toLocaleDateString()}),t.jsx("span",{className:"text-gray-600",children:"â€¢"}),t.jsxs("span",{className:"text-gray-500 text-xs text-accent",children:["By ",e.analystName||e.author||"Admin"]})]}),badges:[{text:e.pair,color:"bg-surface border border-gray-700 text-white"},{text:e.direction,color:a}],footer:t.jsxs(k,{variant:"ghost",size:"sm",className:"w-full justify-between group-hover:text-white",children:["Read Full Breakdown",t.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})},e.id)})})]})]})};export{q as default};
