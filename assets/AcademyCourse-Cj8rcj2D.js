import{u as B,f as M,r as o,j as e,S as I,L as D,a as j,e as v,b as y,q as E,c as N,o as $,g as w}from"./index-CdHir_gS.js";const z=()=>{const{path:c,courseId:l}=B(),u=M(),[s,k]=o.useState(null),[m,L]=o.useState([]),[r,h]=o.useState(null),[S,f]=o.useState(!0),[d,p]=o.useState(!0),[A,C]=o.useState([]);return o.useEffect(()=>{(async()=>{if(j.currentUser&&l){const t=v(db,"users",j.currentUser.uid,"course_progress",l),n=await y(t);n.exists()&&C(n.data().completedLessonIds||[])}})()},[l]),o.useEffect(()=>{(async()=>{try{f(!0);const t=await y(v(db,"courses",l));if(!t.exists()){alert("Course not found"),u(`/academy/${c}`);return}k({id:t.id,...t.data()});const n=E(N(db,"courses",l,"lessons"),$("order","asc")),g=await w(n);let i=[];g.empty?i=(await w(N(db,"courses",l,"lessons"))).docs.map(b=>({id:b.id,...b.data()})):i=g.docs.map(x=>({id:x.id,...x.data()})),L(i),i.length>0&&h(i[0])}catch(t){console.error("Error loading course:",t)}finally{f(!1)}})()},[l,u,c]),S?e.jsx("div",{className:"p-10 text-center text-white",children:"Loading class..."}):s?e.jsxs("div",{className:"flex bg-background overflow-hidden animate-fade-in",style:{height:"calc(100vh - 64px)"},children:[e.jsx(I,{title:`${s.title} - Academy`,description:s.description,image:s.image}),e.jsxs("div",{className:`${d?"w-80":"w-0"} bg-surface border-r border-gray-800 transition-all duration-300 flex flex-col flex-shrink-0 relative`,children:[e.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50",children:[e.jsx("h2",{className:"font-bold text-white truncate max-w-[200px]",children:s.title}),e.jsx("button",{onClick:()=>p(!1),className:"md:hidden text-gray-400",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[m.map((a,t)=>e.jsxs("div",{onClick:()=>h(a),className:`p-4 border-b border-gray-800 cursor-pointer transition-colors hover:bg-gray-800/50 flex items-start gap-3
                   ${r?.id===a.id?"bg-primary/10 border-l-4 border-l-primary":"border-l-4 border-l-transparent"}
                 `,children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-800 text-gray-400 text-xs flex items-center justify-center mt-0.5",children:t+1}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${r?.id===a.id?"text-primary":"text-gray-300"}`,children:a.title}),e.jsx("span",{className:"text-xs text-gray-500",children:a.duration||"10 min"})]})]},a.id)),m.length===0&&e.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No lessons available yet."})]}),e.jsx("div",{className:"p-4 border-t border-gray-800",children:e.jsx(D,{to:`/academy/${c}`,children:e.jsx(Button,{variant:"outline",size:"sm",className:"w-full",children:"â† Back to Path"})})})]}),e.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsx("button",{onClick:()=>p(!d),className:"bg-surface/80 p-2 rounded-full text-white hover:bg-surface backdrop-blur border border-gray-700 shadow-lg",children:d?e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),r?e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"bg-black aspect-video w-full max-h-[60vh] flex items-center justify-center",children:r.videoUrl?e.jsx("iframe",{src:r.videoUrl,title:r.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):e.jsxs("div",{className:"text-gray-500 text-center",children:[e.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),e.jsx("p",{children:"No video content."})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto p-8 pb-20",children:[e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsx("h1",{className:"text-2xl font-bold text-white",children:r.title})}),e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:r.content}})}),(s.instructorName||s.instructorBio)&&e.jsxs("div",{className:"mt-12 border-t border-gray-800 pt-8",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Meet Your Instructor"}),e.jsxs("div",{className:"flex items-start gap-6 bg-surface p-6 rounded-xl border border-gray-800",children:[s.instructorImage?e.jsx("img",{src:s.instructorImage,alt:s.instructorName,className:"w-20 h-20 rounded-full object-cover border-2 border-primary"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-700 flex items-center justify-center text-2xl font-bold text-gray-400",children:s.instructorName?s.instructorName.charAt(0):"I"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:s.instructorName}),e.jsx("p",{className:"text-gray-400 text-sm whitespace-pre-wrap mt-2",children:s.instructorBio})]})]})]})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsx("p",{children:"Select a lesson from the list to start learning."})})]})]}):null};export{z as default};
