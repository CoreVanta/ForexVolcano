import{u as k,f as L,r as a,j as e,L as C,B as S,b as B,e as M,d as c,q as D,c as b,o as W,g as v}from"./index-Do7GzjIo.js";const E=()=>{const{courseId:l}=k(),d=L(),[x,g]=a.useState(null),[u,w]=a.useState([]),[s,h]=a.useState(null),[y,m]=a.useState(!0),[i,f]=a.useState(!0);return a.useEffect(()=>{(async()=>{try{m(!0);const t=await B(M(c,"courses",l));if(!t.exists()){alert("Course not found"),d("/dashboard");return}g({id:t.id,...t.data()});const N=D(b(c,"courses",l,"lessons"),W("order","asc")),p=await v(N);let o=[];p.empty?o=(await v(b(c,"courses",l,"lessons"))).docs.map(j=>({id:j.id,...j.data()})):o=p.docs.map(n=>({id:n.id,...n.data()})),w(o),o.length>0&&h(o[0])}catch(t){console.error("Error loading course:",t)}finally{m(!1)}})()},[l,d]),y?e.jsx("div",{className:"p-10 text-center text-white",children:"Loading class..."}):x?e.jsxs("div",{className:"flex h-screen bg-background overflow-hidden animate-fade-in",children:[e.jsxs("div",{className:`${i?"w-80":"w-0"} bg-surface border-r border-gray-800 transition-all duration-300 flex flex-col flex-shrink-0 relative`,children:[e.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center",children:[e.jsx("h2",{className:"font-bold text-white truncate max-w-[200px]",children:x.title}),e.jsx("button",{onClick:()=>f(!1),className:"md:hidden text-gray-400",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[u.map((r,t)=>e.jsxs("div",{onClick:()=>h(r),className:`p-4 border-b border-gray-800 cursor-pointer transition-colors hover:bg-gray-800/50 flex items-start gap-3
                   ${s?.id===r.id?"bg-primary/10 border-l-4 border-l-primary":"border-l-4 border-l-transparent"}
                 `,children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-800 text-gray-400 text-xs flex items-center justify-center mt-0.5",children:t+1}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${s?.id===r.id?"text-primary":"text-gray-300"}`,children:r.title}),e.jsx("span",{className:"text-xs text-gray-500",children:r.duration||"10 min"})]})]},r.id)),u.length===0&&e.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No lessons available yet."})]}),e.jsx("div",{className:"p-4 border-t border-gray-800",children:e.jsx(C,{to:"/dashboard",children:e.jsx(S,{variant:"outline",size:"sm",className:"w-full",children:"Back to Dashboard"})})})]}),e.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsx("button",{onClick:()=>f(!i),className:"bg-surface/80 p-2 rounded-full text-white hover:bg-surface backdrop-blur border border-gray-700 shadow-lg",children:i?e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),s?e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"bg-black aspect-video w-full max-h-[70vh] flex items-center justify-center",children:s.videoUrl?e.jsx("iframe",{src:s.videoUrl,title:s.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):e.jsxs("div",{className:"text-gray-500 text-center",children:[e.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),e.jsx("p",{children:"No video content for this lesson."})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsx("h1",{className:"text-2xl font-bold text-white",children:s.title})}),e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("p",{className:"text-gray-300 whitespace-pre-line",children:s.content})})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"Select a lesson from the sidebar to start."})]})]}):null};export{E as default};
