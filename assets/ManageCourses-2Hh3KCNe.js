import{r as o,g as S,c as N,d as l,q as D,o as M,j as e,B as k,k as I,e as L,m as P,l as A,n as B}from"./index-Do7GzjIo.js";import{R as U}from"./quill.snow-CcwSMyfA.js";const F={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},q=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],W=()=>{const[i,C]=o.useState([]),[m,y]=o.useState(!1),[n,u]=o.useState({name:"",description:"",image:""}),[x,g]=o.useState(null),[d,c]=o.useState(!0);o.useEffect(()=>{b()},[]);const b=async()=>{c(!0);try{const r=await S(N(l,"paths"));C(r.docs.map(a=>({id:a.id,...a.data()})))}catch(r){console.error("Error fetching paths:",r)}finally{c(!1)}},j=async r=>{r.preventDefault();try{x?await I(L(l,"paths",x),n):await P(N(l,"paths"),{...n,createdAt:A()}),y(!1),g(null),u({name:"",description:"",image:""}),b()}catch(a){console.error("Error saving path:",a),alert("Failed to save path")}},f=async r=>{if(window.confirm("Delete this path?"))try{await B(L(l,"paths",r)),b()}catch(a){console.error("Error deleting path:",a)}};return e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Academy Paths"}),e.jsx(k,{onClick:()=>{y(!m),m&&(g(null),u({name:"",description:"",image:""}))},children:m?"Cancel":"New Path"})]}),m&&e.jsx("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8",children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Path Name"}),e.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:n.name,onChange:r=>u({...n,name:r.target.value}),placeholder:"e.g. Technical Analysis"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-24",value:n.description,onChange:r=>u({...n,description:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Cover Image URL"}),e.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:n.image,onChange:r=>u({...n,image:r.target.value})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(k,{type:"submit",variant:"primary",children:x?"Update Path":"Create Path"})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(r=>e.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden group",children:[e.jsxs("div",{className:"h-40 bg-gray-900 relative",children:[r.image&&e.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>{u(r),g(r.id),y(!0)},className:"bg-primary/80 p-1 rounded text-white hover:bg-primary",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>f(r.id),className:"bg-red-500/80 p-1 rounded text-white hover:bg-red-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:r.name}),e.jsx("p",{className:"text-gray-400 text-sm mt-1 line-clamp-2",children:r.description})]})]},r.id))})]})},Q=()=>{const[i,C]=o.useState("paths"),[m,y]=o.useState([]),[n,u]=o.useState([]),[x,g]=o.useState(null),[d,c]=o.useState(!0),[b,j]=o.useState(!1),[f,r]=o.useState(null),[a,h]=o.useState({title:"",path:"",description:"",image:"",level:"Beginner",instructorName:"Forex Volcano",instructorBio:"",instructorImage:""});o.useEffect(()=>{s()},[]);const s=async()=>{c(!0);try{const v=(await S(N(l,"paths"))).docs.map(E=>E.data().name);u(v);const T=D(N(l,"courses"),M("order","asc")),V=await S(T);y(V.docs.map(E=>({id:E.id,...E.data()})))}catch(t){console.error("Error fetching data:",t)}finally{c(!1)}},p=async t=>{t.preventDefault();try{f?await I(L(l,"courses",f),a):await P(N(l,"courses"),{...a,order:m.length+1,createdAt:A()}),j(!1),r(null),h({title:"",path:"",description:"",image:"",level:"Beginner",instructorName:"Forex Volcano",instructorBio:"",instructorImage:""}),s()}catch(v){console.error("Error saving course:",v),alert("Failed to save course")}},w=t=>{h({title:t.title,description:t.description,path:t.path||"",image:t.image,level:t.level||"Beginner",instructorName:t.instructorName||"Forex Volcano",instructorBio:t.instructorBio||"",instructorImage:t.instructorImage||""}),r(t.id),j(!0)},R=async t=>{if(window.confirm("Delete this course? All lessons inside it might become orphaned."))try{await B(L(l,"courses",t)),s(),x?.id===t&&g(null)}catch(v){console.error("Error deleting course:",v)}};return x?e.jsx(H,{course:x,onBack:()=>g(null)}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-6 mb-8 border-b border-gray-800",children:[e.jsx("button",{onClick:()=>C("paths"),className:`pb-4 px-2 font-medium transition-colors ${i==="paths"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"1. Manage Paths"}),e.jsx("button",{onClick:()=>C("courses"),className:`pb-4 px-2 font-medium transition-colors ${i==="courses"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"2. Manage Courses"})]}),i==="paths"?e.jsx(W,{}):e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage Courses"}),e.jsx(k,{onClick:()=>{j(!b),b&&r(null)},children:b?"Cancel":"New Course"})]}),b&&e.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:f?"Edit Course":"Create New Course"}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Course Title"}),e.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.title,onChange:t=>h({...a,title:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Path / Category"}),e.jsxs("select",{required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.path,onChange:t=>h({...a,path:t.target.value}),children:[e.jsx("option",{value:"",children:"Select Path..."}),n.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Level"}),e.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.level,onChange:t=>h({...a,level:t.target.value}),children:[e.jsx("option",{children:"Beginner"}),e.jsx("option",{children:"Intermediate"}),e.jsx("option",{children:"Advanced"})]})]})]}),e.jsxs("div",{className:"border-t border-gray-800 pt-4 mt-4",children:[e.jsx("h3",{className:"text-sm font-bold text-primary mb-3",children:"Instructor Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Name"}),e.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.instructorName,onChange:t=>h({...a,instructorName:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Image URL"}),e.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.instructorImage,onChange:t=>h({...a,instructorImage:t.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Bio"}),e.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-20",value:a.instructorBio,onChange:t=>h({...a,instructorBio:t.target.value})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),e.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:e.jsx(U,{theme:"snow",value:a.description,onChange:t=>h({...a,description:t}),modules:F,formats:q,className:"h-48 mb-12"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Cover Image URL"}),e.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.image,onChange:t=>h({...a,image:t.target.value})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(k,{type:"submit",variant:"primary",children:f?"Update Course":"Create Course"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d?e.jsx("div",{className:"text-gray-400",children:"Loading courses..."}):m.map(t=>e.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden group hover:border-gray-600 transition-all",children:[e.jsxs("div",{className:"h-40 bg-gray-900 relative",children:[t.image&&e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx("button",{onClick:v=>{v.stopPropagation(),w(t)},className:"bg-primary/80 p-1 rounded text-white hover:bg-primary",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:v=>{v.stopPropagation(),R(t.id)},className:"bg-red-500/80 p-1 rounded text-white hover:bg-red-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:t.title}),t.path&&e.jsx("span",{className:"bg-gray-800 text-xs text-gray-300 px-2 py-1 rounded",children:t.path})]}),e.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:t.description}),e.jsx(k,{variant:"outline",size:"sm",className:"w-full",onClick:()=>g(t),children:"Manage Lessons"})]})]},t.id))})]})]})},H=({course:i,onBack:C})=>{const[m,y]=o.useState([]),[n,u]=o.useState(!1),[x,g]=o.useState(null),[d,c]=o.useState({title:"",videoUrl:"",content:"",duration:"10 min"}),[b,j]=o.useState(!0);o.useEffect(()=>{f()},[i]);const f=async()=>{j(!0);try{const s=D(N(l,"courses",i.id,"lessons"),M("order","asc")),p=await S(s);y(p.docs.map(w=>({id:w.id,...w.data()})))}catch(s){console.error("Error fetching lessons:",s);const p=await S(N(l,"courses",i.id,"lessons"));y(p.docs.map(w=>({id:w.id,...w.data()})))}finally{j(!1)}},r=async s=>{s.preventDefault();try{x?await I(L(l,"courses",i.id,"lessons",x),{...d}):await P(N(l,"courses",i.id,"lessons"),{...d,order:m.length+1,createdAt:A()}),u(!1),g(null),c({title:"",videoUrl:"",content:"",duration:"10 min"}),f()}catch(p){console.error("Error saving lesson:",p),alert("Failed to save lesson")}},a=s=>{c({title:s.title,videoUrl:s.videoUrl,content:s.content,duration:s.duration}),g(s.id),u(!0)},h=async s=>{if(window.confirm("Delete this lesson?"))try{await B(L(l,"courses",i.id,"lessons",s)),f()}catch(p){console.error("Error deleting lesson:",p)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs("button",{onClick:C,className:"text-gray-400 hover:text-white flex items-center gap-1",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),e.jsxs("h1",{className:"text-2xl font-bold text-white",children:[e.jsx("span",{className:"text-gray-500 font-normal",children:"Edit Course:"})," ",i.title]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Lessons (",m.length,")"]}),e.jsx(k,{onClick:()=>{u(!n),n&&(g(null),c({title:"",videoUrl:"",content:"",duration:"10 min"}))},variant:"secondary",children:n?"Cancel":"Add Lesson"})]}),n&&e.jsx("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Lesson Title"}),e.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:d.title,onChange:s=>c({...d,title:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Duration"}),e.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:d.duration,onChange:s=>c({...d,duration:s.target.value}),placeholder:"e.g. 15 min"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Video Embed URL (YouTube/Vimeo)"}),e.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:d.videoUrl,onChange:s=>c({...d,videoUrl:s.target.value}),placeholder:"https://www.youtube.com/embed/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Lesson Content / Notes"}),e.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:e.jsx(U,{theme:"snow",value:d.content,onChange:s=>c({...d,content:s}),modules:F,formats:q,className:"h-72 mb-12"})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(k,{type:"submit",variant:"primary",children:x?"Update Lesson":"Save Lesson"})})]})}),e.jsxs("div",{className:"space-y-3",children:[b?e.jsx("div",{className:"text-gray-400",children:"Loading lessons..."}):m.map((s,p)=>e.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-gray-800 flex justify-between items-center group hover:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-800 text-gray-400 font-bold text-sm",children:p+1}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-white",children:s.title}),e.jsx("div",{className:"text-xs text-gray-500",children:s.duration})]})]}),e.jsxs("div",{className:"flex items-center gap-3 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>a(s),className:"text-primary hover:text-primary/80 text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>h(s.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Delete"})]})]},s.id)),m.length===0&&!b&&e.jsx("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:"No lessons yet. Start teaching!"})]})]})};export{Q as default};
