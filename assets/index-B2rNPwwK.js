var rR=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var vV=rR((ls,cs)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var yo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qg={exports:{}},Pu={};var v_;function sR(){if(v_)return Pu;v_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Pu.Fragment=e,Pu.jsx=t,Pu.jsxs=t,Pu}var b_;function iR(){return b_||(b_=1,qg.exports=sR()),qg.exports}var m=iR(),Bg={exports:{}},Ge={};var x_;function aR(){if(x_)return Ge;x_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),_=Symbol.iterator;function T(q){return q===null||typeof q!="object"?null:(q=_&&q[_]||q["@@iterator"],typeof q=="function"?q:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,R={};function U(q,W,de){this.props=q,this.context=W,this.refs=R,this.updater=de||S}U.prototype.isReactComponent={},U.prototype.setState=function(q,W){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,W,"setState")},U.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function z(){}z.prototype=U.prototype;function Y(q,W,de){this.props=q,this.context=W,this.refs=R,this.updater=de||S}var Q=Y.prototype=new z;Q.constructor=Y,O(Q,U.prototype),Q.isPureReactComponent=!0;var ie=Array.isArray;function ve(){}var L={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function V(q,W,de){var me=de.ref;return{$$typeof:n,type:q,key:W,ref:me!==void 0?me:null,props:de}}function $(q,W){return V(q.type,W,q.props)}function N(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function P(q){var W={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(de){return W[de]})}var C=/\/+/g;function ge(q,W){return typeof q=="object"&&q!==null&&q.key!=null?P(""+q.key):W.toString(36)}function pe(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ve,ve):(q.status="pending",q.then(function(W){q.status==="pending"&&(q.status="fulfilled",q.value=W)},function(W){q.status==="pending"&&(q.status="rejected",q.reason=W)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function F(q,W,de,me,ye){var Ae=typeof q;(Ae==="undefined"||Ae==="boolean")&&(q=null);var De=!1;if(q===null)De=!0;else switch(Ae){case"bigint":case"string":case"number":De=!0;break;case"object":switch(q.$$typeof){case n:case e:De=!0;break;case v:return De=q._init,F(De(q._payload),W,de,me,ye)}}if(De)return ye=ye(q),De=me===""?"."+ge(q,0):me,ie(ye)?(de="",De!=null&&(de=De.replace(C,"$&/")+"/"),F(ye,W,de,"",function(We){return We})):ye!=null&&(N(ye)&&(ye=$(ye,de+(ye.key==null||q&&q.key===ye.key?"":(""+ye.key).replace(C,"$&/")+"/")+De)),W.push(ye)),1;De=0;var je=me===""?".":me+":";if(ie(q))for(var ke=0;ke<q.length;ke++)me=q[ke],Ae=je+ge(me,ke),De+=F(me,W,de,Ae,ye);else if(ke=T(q),typeof ke=="function")for(q=ke.call(q),ke=0;!(me=q.next()).done;)me=me.value,Ae=je+ge(me,ke++),De+=F(me,W,de,Ae,ye);else if(Ae==="object"){if(typeof q.then=="function")return F(pe(q),W,de,me,ye);throw W=String(q),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return De}function ee(q,W,de){if(q==null)return q;var me=[],ye=0;return F(q,me,"","",function(Ae){return W.call(de,Ae,ye++)}),me}function ue(q){if(q._status===-1){var W=q._result;W=W(),W.then(function(de){(q._status===0||q._status===-1)&&(q._status=1,q._result=de)},function(de){(q._status===0||q._status===-1)&&(q._status=2,q._result=de)}),q._status===-1&&(q._status=0,q._result=W)}if(q._status===1)return q._result.default;throw q._result}var xe=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},be={map:ee,forEach:function(q,W,de){ee(q,function(){W.apply(this,arguments)},de)},count:function(q){var W=0;return ee(q,function(){W++}),W},toArray:function(q){return ee(q,function(W){return W})||[]},only:function(q){if(!N(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Ge.Activity=b,Ge.Children=be,Ge.Component=U,Ge.Fragment=t,Ge.Profiler=a,Ge.PureComponent=Y,Ge.StrictMode=r,Ge.Suspense=f,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(q){return L.H.useMemoCache(q)}},Ge.cache=function(q){return function(){return q.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(q,W,de){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var me=O({},q.props),ye=q.key;if(W!=null)for(Ae in W.key!==void 0&&(ye=""+W.key),W)!k.call(W,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&W.ref===void 0||(me[Ae]=W[Ae]);var Ae=arguments.length-2;if(Ae===1)me.children=de;else if(1<Ae){for(var De=Array(Ae),je=0;je<Ae;je++)De[je]=arguments[je+2];me.children=De}return V(q.type,ye,me)},Ge.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:l,_context:q},q},Ge.createElement=function(q,W,de){var me,ye={},Ae=null;if(W!=null)for(me in W.key!==void 0&&(Ae=""+W.key),W)k.call(W,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ye[me]=W[me]);var De=arguments.length-2;if(De===1)ye.children=de;else if(1<De){for(var je=Array(De),ke=0;ke<De;ke++)je[ke]=arguments[ke+2];ye.children=je}if(q&&q.defaultProps)for(me in De=q.defaultProps,De)ye[me]===void 0&&(ye[me]=De[me]);return V(q,Ae,ye)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(q){return{$$typeof:h,render:q}},Ge.isValidElement=N,Ge.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:ue}},Ge.memo=function(q,W){return{$$typeof:p,type:q,compare:W===void 0?null:W}},Ge.startTransition=function(q){var W=L.T,de={};L.T=de;try{var me=q(),ye=L.S;ye!==null&&ye(de,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ve,xe)}catch(Ae){xe(Ae)}finally{W!==null&&de.types!==null&&(W.types=de.types),L.T=W}},Ge.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Ge.use=function(q){return L.H.use(q)},Ge.useActionState=function(q,W,de){return L.H.useActionState(q,W,de)},Ge.useCallback=function(q,W){return L.H.useCallback(q,W)},Ge.useContext=function(q){return L.H.useContext(q)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(q,W){return L.H.useDeferredValue(q,W)},Ge.useEffect=function(q,W){return L.H.useEffect(q,W)},Ge.useEffectEvent=function(q){return L.H.useEffectEvent(q)},Ge.useId=function(){return L.H.useId()},Ge.useImperativeHandle=function(q,W,de){return L.H.useImperativeHandle(q,W,de)},Ge.useInsertionEffect=function(q,W){return L.H.useInsertionEffect(q,W)},Ge.useLayoutEffect=function(q,W){return L.H.useLayoutEffect(q,W)},Ge.useMemo=function(q,W){return L.H.useMemo(q,W)},Ge.useOptimistic=function(q,W){return L.H.useOptimistic(q,W)},Ge.useReducer=function(q,W,de){return L.H.useReducer(q,W,de)},Ge.useRef=function(q){return L.H.useRef(q)},Ge.useState=function(q){return L.H.useState(q)},Ge.useSyncExternalStore=function(q,W,de){return L.H.useSyncExternalStore(q,W,de)},Ge.useTransition=function(){return L.H.useTransition()},Ge.version="19.2.1",Ge}var __;function w0(){return __||(__=1,Bg.exports=aR()),Bg.exports}var M=w0();const Ln=Vc(M);var zg={exports:{}},Uu={},Hg={exports:{}},Fg={};var E_;function oR(){return E_||(E_=1,(function(n){function e(F,ee){var ue=F.length;F.push(ee);e:for(;0<ue;){var xe=ue-1>>>1,be=F[xe];if(0<a(be,ee))F[xe]=ee,F[ue]=be,ue=xe;else break e}}function t(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var ee=F[0],ue=F.pop();if(ue!==ee){F[0]=ue;e:for(var xe=0,be=F.length,q=be>>>1;xe<q;){var W=2*(xe+1)-1,de=F[W],me=W+1,ye=F[me];if(0>a(de,ue))me<be&&0>a(ye,de)?(F[xe]=ye,F[me]=ue,xe=me):(F[xe]=de,F[W]=ue,xe=W);else if(me<be&&0>a(ye,ue))F[xe]=ye,F[me]=ue,xe=me;else break e}}return ee}function a(F,ee){var ue=F.sortIndex-ee.sortIndex;return ue!==0?ue:F.id-ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var f=[],p=[],v=1,b=null,_=3,T=!1,S=!1,O=!1,R=!1,U=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function Q(F){for(var ee=t(p);ee!==null;){if(ee.callback===null)r(p);else if(ee.startTime<=F)r(p),ee.sortIndex=ee.expirationTime,e(f,ee);else break;ee=t(p)}}function ie(F){if(O=!1,Q(F),!S)if(t(f)!==null)S=!0,ve||(ve=!0,P());else{var ee=t(p);ee!==null&&pe(ie,ee.startTime-F)}}var ve=!1,L=-1,k=5,V=-1;function $(){return R?!0:!(n.unstable_now()-V<k)}function N(){if(R=!1,ve){var F=n.unstable_now();V=F;var ee=!0;try{e:{S=!1,O&&(O=!1,z(L),L=-1),T=!0;var ue=_;try{t:{for(Q(F),b=t(f);b!==null&&!(b.expirationTime>F&&$());){var xe=b.callback;if(typeof xe=="function"){b.callback=null,_=b.priorityLevel;var be=xe(b.expirationTime<=F);if(F=n.unstable_now(),typeof be=="function"){b.callback=be,Q(F),ee=!0;break t}b===t(f)&&r(f),Q(F)}else r(f);b=t(f)}if(b!==null)ee=!0;else{var q=t(p);q!==null&&pe(ie,q.startTime-F),ee=!1}}break e}finally{b=null,_=ue,T=!1}ee=void 0}}finally{ee?P():ve=!1}}}var P;if(typeof Y=="function")P=function(){Y(N)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,ge=C.port2;C.port1.onmessage=N,P=function(){ge.postMessage(null)}}else P=function(){U(N,0)};function pe(F,ee){L=U(function(){F(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(F){switch(_){case 1:case 2:case 3:var ee=3;break;default:ee=_}var ue=_;_=ee;try{return F()}finally{_=ue}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(F,ee){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ue=_;_=F;try{return ee()}finally{_=ue}},n.unstable_scheduleCallback=function(F,ee,ue){var xe=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?xe+ue:xe):ue=xe,F){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ue+be,F={id:v++,callback:ee,priorityLevel:F,startTime:ue,expirationTime:be,sortIndex:-1},ue>xe?(F.sortIndex=ue,e(p,F),t(f)===null&&F===t(p)&&(O?(z(L),L=-1):O=!0,pe(ie,ue-xe))):(F.sortIndex=be,e(f,F),S||T||(S=!0,ve||(ve=!0,P()))),F},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(F){var ee=_;return function(){var ue=_;_=ee;try{return F.apply(this,arguments)}finally{_=ue}}}})(Fg)),Fg}var w_;function lR(){return w_||(w_=1,Hg.exports=oR()),Hg.exports}var $g={exports:{}},or={};var T_;function cR(){if(T_)return or;T_=1;var n=w0();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,p,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:f,containerInfo:p,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return or.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,or.createPortal=function(f,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(f,p,null,v)},or.flushSync=function(f){var p=c.T,v=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=p,r.p=v,r.d.f()}},or.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(f,p))},or.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},or.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var v=p.as,b=h(v,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?r.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:_,fetchPriority:T}):v==="script"&&r.d.X(f,{crossOrigin:b,integrity:_,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},or.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);r.d.M(f,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(f)},or.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,b=h(v,p.crossOrigin);r.d.L(f,v,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},or.preloadModule=function(f,p){if(typeof f=="string")if(p){var v=h(p.as,p.crossOrigin);r.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(f)},or.requestFormReset=function(f){r.d.r(f)},or.unstable_batchedUpdates=function(f,p){return f(p)},or.useFormState=function(f,p,v){return c.H.useFormState(f,p,v)},or.useFormStatus=function(){return c.H.useHostTransitionStatus()},or.version="19.2.1",or}var A_;function uR(){if(A_)return $g.exports;A_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$g.exports=cR(),$g.exports}var S_;function hR(){if(S_)return Uu;S_=1;var n=lR(),e=w0(),t=uR();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function c(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function h(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function f(s){if(l(s)!==s)throw Error(r(188))}function p(s){var i=s.alternate;if(!i){if(i=l(s),i===null)throw Error(r(188));return i!==s?null:s}for(var o=s,u=i;;){var g=o.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===o)return f(g),s;if(y===u)return f(g),i;y=y.sibling}throw Error(r(188))}if(o.return!==u.return)o=g,u=y;else{for(var w=!1,I=g.child;I;){if(I===o){w=!0,o=g,u=y;break}if(I===u){w=!0,u=g,o=y;break}I=I.sibling}if(!w){for(I=y.child;I;){if(I===o){w=!0,o=y,u=g;break}if(I===u){w=!0,u=y,o=g;break}I=I.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:i}function v(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=v(s),i!==null)return i;s=s.sibling}return null}var b=Object.assign,_=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function P(s){return s===null||typeof s!="object"?null:(s=N&&s[N]||s["@@iterator"],typeof s=="function"?s:null)}var C=Symbol.for("react.client.reference");function ge(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===C?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case O:return"Fragment";case U:return"Profiler";case R:return"StrictMode";case ie:return"Suspense";case ve:return"SuspenseList";case V:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case Y:return s.displayName||"Context";case z:return(s._context.displayName||"Context")+".Consumer";case Q:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return i=s.displayName||null,i!==null?i:ge(s.type)||"Memo";case k:i=s._payload,s=s._init;try{return ge(s(i))}catch{}}return null}var pe=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},xe=[],be=-1;function q(s){return{current:s}}function W(s){0>be||(s.current=xe[be],xe[be]=null,be--)}function de(s,i){be++,xe[be]=s.current,s.current=i}var me=q(null),ye=q(null),Ae=q(null),De=q(null);function je(s,i){switch(de(Ae,i),de(ye,s),de(me,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?Bx(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=Bx(i),s=zx(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}W(me),de(me,s)}function ke(){W(me),W(ye),W(Ae)}function We(s){s.memoizedState!==null&&de(De,s);var i=me.current,o=zx(i,s.type);i!==o&&(de(ye,s),de(me,o))}function et(s){ye.current===s&&(W(me),W(ye)),De.current===s&&(W(De),Du._currentValue=ue)}var st,ht;function vt(s){if(st===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);st=i&&i[1]||"",ht=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+st+s+ht}var nn=!1;function Hr(s,i){if(!s||nn)return"";nn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(se){var te=se}Reflect.construct(s,[],he)}else{try{he.call()}catch(se){te=se}s.call(he.prototype)}}else{try{throw Error()}catch(se){te=se}(he=s())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(se){if(se&&te&&typeof se.stack=="string")return[se.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),w=y[0],I=y[1];if(w&&I){var H=w.split(`
`),J=I.split(`
`);for(g=u=0;u<H.length&&!H[u].includes("DetermineComponentFrameRoot");)u++;for(;g<J.length&&!J[g].includes("DetermineComponentFrameRoot");)g++;if(u===H.length||g===J.length)for(u=H.length-1,g=J.length-1;1<=u&&0<=g&&H[u]!==J[g];)g--;for(;1<=u&&0<=g;u--,g--)if(H[u]!==J[g]){if(u!==1||g!==1)do if(u--,g--,0>g||H[u]!==J[g]){var ae=`
`+H[u].replace(" at new "," at ");return s.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",s.displayName)),ae}while(1<=u&&0<=g);break}}}finally{nn=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?vt(o):""}function hi(s,i){switch(s.tag){case 26:case 27:case 5:return vt(s.type);case 16:return vt("Lazy");case 13:return s.child!==i&&i!==null?vt("Suspense Fallback"):vt("Suspense");case 19:return vt("SuspenseList");case 0:case 15:return Hr(s.type,!1);case 11:return Hr(s.type.render,!1);case 1:return Hr(s.type,!0);case 31:return vt("Activity");default:return""}}function qi(s){try{var i="",o=null;do i+=hi(s,o),o=s,s=s.return;while(s);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ht=Object.prototype.hasOwnProperty,jt=n.unstable_scheduleCallback,Nr=n.unstable_cancelCallback,ka=n.unstable_shouldYield,Bi=n.unstable_requestPaint,Ot=n.unstable_now,Cr=n.unstable_getCurrentPriorityLevel,zi=n.unstable_ImmediatePriority,Fr=n.unstable_UserBlockingPriority,pr=n.unstable_NormalPriority,Hi=n.unstable_LowPriority,Mn=n.unstable_IdlePriority,Fi=n.log,$i=n.unstable_setDisableYieldValue,gr=null,Zt=null;function Sn(s){if(typeof Fi=="function"&&$i(s),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(gr,s)}catch{}}var Dt=Math.clz32?Math.clz32:er,Bs=Math.log,Rr=Math.LN2;function er(s){return s>>>=0,s===0?32:31-(Bs(s)/Rr|0)|0}var Pn=256,$r=262144,At=4194304;function tr(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function In(s,i,o){var u=s.pendingLanes;if(u===0)return 0;var g=0,y=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var I=u&134217727;return I!==0?(u=I&~y,u!==0?g=tr(u):(w&=I,w!==0?g=tr(w):o||(o=I&~s,o!==0&&(g=tr(o))))):(I=u&~y,I!==0?g=tr(I):w!==0?g=tr(w):o||(o=u&~s,o!==0&&(g=tr(o)))),g===0?0:i!==0&&i!==g&&(i&y)===0&&(y=g&-g,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:g}function Un(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function Gi(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function di(){var s=At;return At<<=1,(At&62914560)===0&&(At=4194304),s}function Nn(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function ds(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Gr(s,i,o,u,g,y){var w=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var I=s.entanglements,H=s.expirationTimes,J=s.hiddenUpdates;for(o=w&~o;0<o;){var ae=31-Dt(o),he=1<<ae;I[ae]=0,H[ae]=-1;var te=J[ae];if(te!==null)for(J[ae]=null,ae=0;ae<te.length;ae++){var se=te[ae];se!==null&&(se.lane&=-536870913)}o&=~he}u!==0&&zs(s,u,0),y!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=y&~(w&~i))}function zs(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-Dt(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|o&261930}function Ki(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var u=31-Dt(o),g=1<<u;g&i|s[u]&i&&(s[u]|=i),o&=~g}}function Yi(s,i){var o=i&-i;return o=(o&42)!==0?1:fs(o),(o&(s.suspendedLanes|i))!==0?0:o}function fs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function yr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function rn(){var s=ee.p;return s!==0?s:(s=window.event,s===void 0?32:h_(s.type))}function vr(s,i){var o=ee.p;try{return ee.p=s,i()}finally{ee.p=o}}var br=Math.random().toString(36).slice(2),Ft="__reactFiber$"+br,sn="__reactProps$"+br,Ir="__reactContainer$"+br,Jt="__reactEvents$"+br,Bo="__reactListeners$"+br,Ma="__reactHandles$"+br,Pa="__reactResources$"+br,jr="__reactMarker$"+br;function fi(s){delete s[Ft],delete s[sn],delete s[Jt],delete s[Bo],delete s[Ma]}function Mt(s){var i=s[Ft];if(i)return i;for(var o=s.parentNode;o;){if(i=o[Ir]||o[Ft]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=Qx(s);s!==null;){if(o=s[Ft])return o;s=Qx(s)}return i}s=o,o=s.parentNode}return null}function nr(s){if(s=s[Ft]||s[Ir]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function Vn(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function Or(s){var i=s[Pa];return i||(i=s[Pa]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function $t(s){s[jr]=!0}var Qi=new Set,ms={};function xr(s,i){qn(s,i),qn(s+"Capture",i)}function qn(s,i){for(ms[s]=i,s=0;s<i.length;s++)Qi.add(i[s])}var rr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hs={},Xi={};function Ua(s){return Ht.call(Xi,s)?!0:Ht.call(Hs,s)?!1:rr.test(s)?Xi[s]=!0:(Hs[s]=!0,!1)}function mi(s,i,o){if(Ua(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function Bn(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function Gt(s,i,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+u)}}function Pt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Dr(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Kr(s,i,o){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(w){o=""+w,y.call(this,w)}}),Object.defineProperty(s,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function ft(s){if(!s._valueTracker){var i=Dr(s)?"checked":"value";s._valueTracker=Kr(s,i,""+s[i])}}function ps(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return s&&(u=Dr(s)?s.checked?"true":"false":s.value),s=u,s!==o?(i.setValue(s),!0):!1}function Lr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Fs=/[\n"\\]/g;function jn(s){return s.replace(Fs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function pi(s,i,o,u,g,y,w,I){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),i!=null?w==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+Pt(i)):s.value!==""+Pt(i)&&(s.value=""+Pt(i)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),i!=null?Wi(s,w,Pt(i)):o!=null?Wi(s,w,Pt(o)):u!=null&&s.removeAttribute("value"),g==null&&y!=null&&(s.defaultChecked=!!y),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+Pt(I):s.removeAttribute("name")}function gi(s,i,o,u,g,y,w,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){ft(s);return}o=o!=null?""+Pt(o):"",i=i!=null?""+Pt(i):o,I||i===s.value||(s.value=i),s.defaultValue=i}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=I?s.checked:!!u,s.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w),ft(s)}function Wi(s,i,o){i==="number"&&Lr(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function gs(s,i,o,u){if(s=s.options,i){i={};for(var g=0;g<o.length;g++)i["$"+o[g]]=!0;for(o=0;o<s.length;o++)g=i.hasOwnProperty("$"+s[o].value),s[o].selected!==g&&(s[o].selected=g),g&&u&&(s[o].defaultSelected=!0)}else{for(o=""+Pt(o),i=null,g=0;g<s.length;g++){if(s[g].value===o){s[g].selected=!0,u&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function ys(s,i,o){if(i!=null&&(i=""+Pt(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+Pt(o):""}function yn(s,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(pe(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Pt(i),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u),ft(s)}function Kt(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var kr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zi(s,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,o):typeof o!="number"||o===0||kr.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function sr(s,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var g in i)u=i[g],i.hasOwnProperty(g)&&o[g]!==u&&Zi(s,g,u)}else for(var y in i)i.hasOwnProperty(y)&&Zi(s,y,i[y])}function yi(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Va=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vi(s){return vs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ir(){}var un=null;function zn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Yr=null,Hn=null;function Qr(s){var i=nr(s);if(i&&(s=i.stateNode)){var o=s[sn]||null;e:switch(s=i.stateNode,i.type){case"input":if(pi(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+jn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==s&&u.form===s.form){var g=u[sn]||null;if(!g)throw Error(r(90));pi(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===s.form&&ps(u)}break e;case"textarea":ys(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&gs(s,!!o.multiple,i,!1)}}}var Xr=!1;function bs(s,i,o){if(Xr)return s(i,o);Xr=!0;try{var u=s(i);return u}finally{if(Xr=!1,(Yr!==null||Hn!==null)&&(Dd(),Yr&&(i=Yr,s=Hn,Hn=Yr=null,Qr(i),s)))for(i=0;i<s.length;i++)Qr(s[i])}}function ar(s,i){var o=s.stateNode;if(o===null)return null;var u=o[sn]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xs=!1;if(On)try{var Ze={};Object.defineProperty(Ze,"passive",{get:function(){xs=!0}}),window.addEventListener("test",Ze,Ze),window.removeEventListener("test",Ze,Ze)}catch{xs=!1}var _r=null,$s=null,Gs=null;function Ji(){if(Gs)return Gs;var s,i=$s,o=i.length,u,g="value"in _r?_r.value:_r.textContent,y=g.length;for(s=0;s<o&&i[s]===g[s];s++);var w=o-s;for(u=1;u<=w&&i[o-u]===g[y-u];u++);return Gs=g.slice(s,1<u?1-u:void 0)}function E(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function j(){return!0}function B(){return!1}function ne(s){function i(o,u,g,y,w){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(o=s[I],this[I]=o?o(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?j:B,this.isPropagationStopped=B,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=j)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=j)},persist:function(){},isPersistent:j}),i}var Ue={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Se=ne(Ue),Qe=b({},Ue,{view:0,detail:0}),Je=ne(Qe),Et,tt,Rt,hn=b({},Qe,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Rt&&(Rt&&s.type==="mousemove"?(Et=s.screenX-Rt.screenX,tt=s.screenY-Rt.screenY):tt=Et=0,Rt=s),Et)},movementY:function(s){return"movementY"in s?s.movementY:tt}}),Ut=ne(hn),Yt=b({},hn,{dataTransfer:0}),an=ne(Yt),Wr=b({},Qe,{relatedTarget:0}),Fn=ne(Wr),Zr=b({},Ue,{animationName:0,elapsedTime:0,pseudoElement:0}),zo=ne(Zr),Ks=b({},Ue,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ea=ne(Ks),$h=b({},Ue,{data:0}),bi=ne($h),Gh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qh(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Yh[s])?!!i[s]:!1}function qa(){return Qh}var Er=b({},Qe,{key:function(s){if(s.key){var i=Gh[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=E(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Kh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(s){return s.type==="keypress"?E(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?E(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Xh=ne(Er),Wh=b({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ta=ne(Wh),d=b({},Qe,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),x=ne(d),A=b({},Ue,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=ne(A),X=b({},hn,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),re=ne(X),_e=b({},Ue,{newState:0,oldState:0}),Ke=ne(_e),dn=[9,13,27,32],bt=On&&"CompositionEvent"in window,Qt=null;On&&"documentMode"in document&&(Qt=document.documentMode);var _s=On&&"TextEvent"in window&&!Qt,xi=On&&(!bt||Qt&&8<Qt&&11>=Qt),Ys=" ",Qs=!1;function Ho(s,i){switch(s){case"keyup":return dn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ol(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Dl=!1;function N2(s,i){switch(s){case"compositionend":return Ol(i);case"keypress":return i.which!==32?null:(Qs=!0,Ys);case"textInput":return s=i.data,s===Ys&&Qs?null:s;default:return null}}function C2(s,i){if(Dl)return s==="compositionend"||!bt&&Ho(s,i)?(s=Ji(),Gs=$s=_r=null,Dl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return xi&&i.locale!=="ko"?null:i.data;default:return null}}var R2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wv(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!R2[s.type]:i==="textarea"}function Zv(s,i,o,u){Yr?Hn?Hn.push(u):Hn=[u]:Yr=u,i=qd(i,"onChange"),0<i.length&&(o=new Se("onChange","change",null,o,u),s.push({event:o,listeners:i}))}var tu=null,nu=null;function I2(s){kx(s,0)}function Zh(s){var i=Vn(s);if(ps(i))return s}function Jv(s,i){if(s==="change")return i}var eb=!1;if(On){var Km;if(On){var Ym="oninput"in document;if(!Ym){var tb=document.createElement("div");tb.setAttribute("oninput","return;"),Ym=typeof tb.oninput=="function"}Km=Ym}else Km=!1;eb=Km&&(!document.documentMode||9<document.documentMode)}function nb(){tu&&(tu.detachEvent("onpropertychange",rb),nu=tu=null)}function rb(s){if(s.propertyName==="value"&&Zh(nu)){var i=[];Zv(i,nu,s,zn(s)),bs(I2,i)}}function j2(s,i,o){s==="focusin"?(nb(),tu=i,nu=o,tu.attachEvent("onpropertychange",rb)):s==="focusout"&&nb()}function O2(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Zh(nu)}function D2(s,i){if(s==="click")return Zh(i)}function L2(s,i){if(s==="input"||s==="change")return Zh(i)}function k2(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Jr=typeof Object.is=="function"?Object.is:k2;function ru(s,i){if(Jr(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!Ht.call(i,g)||!Jr(s[g],i[g]))return!1}return!0}function sb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ib(s,i){var o=sb(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=i&&u>=i)return{node:o,offset:i-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=sb(o)}}function ab(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?ab(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function ob(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=Lr(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=Lr(s.document)}return i}function Qm(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var M2=On&&"documentMode"in document&&11>=document.documentMode,Ll=null,Xm=null,su=null,Wm=!1;function lb(s,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Wm||Ll==null||Ll!==Lr(u)||(u=Ll,"selectionStart"in u&&Qm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),su&&ru(su,u)||(su=u,u=qd(Xm,"onSelect"),0<u.length&&(i=new Se("onSelect","select",null,i,o),s.push({event:i,listeners:u}),i.target=Ll)))}function Fo(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var kl={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionrun:Fo("Transition","TransitionRun"),transitionstart:Fo("Transition","TransitionStart"),transitioncancel:Fo("Transition","TransitionCancel"),transitionend:Fo("Transition","TransitionEnd")},Zm={},cb={};On&&(cb=document.createElement("div").style,"AnimationEvent"in window||(delete kl.animationend.animation,delete kl.animationiteration.animation,delete kl.animationstart.animation),"TransitionEvent"in window||delete kl.transitionend.transition);function $o(s){if(Zm[s])return Zm[s];if(!kl[s])return s;var i=kl[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in cb)return Zm[s]=i[o];return s}var ub=$o("animationend"),hb=$o("animationiteration"),fb=$o("animationstart"),P2=$o("transitionrun"),U2=$o("transitionstart"),V2=$o("transitioncancel"),mb=$o("transitionend"),pb=new Map,Jm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jm.push("scrollEnd");function Xs(s,i){pb.set(s,i),xr(i,[s])}var Jh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Es=[],Ml=0,ep=0;function ed(){for(var s=Ml,i=ep=Ml=0;i<s;){var o=Es[i];Es[i++]=null;var u=Es[i];Es[i++]=null;var g=Es[i];Es[i++]=null;var y=Es[i];if(Es[i++]=null,u!==null&&g!==null){var w=u.pending;w===null?g.next=g:(g.next=w.next,w.next=g),u.pending=g}y!==0&&gb(o,g,y)}}function td(s,i,o,u){Es[Ml++]=s,Es[Ml++]=i,Es[Ml++]=o,Es[Ml++]=u,ep|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function tp(s,i,o,u){return td(s,i,o,u),nd(s)}function Go(s,i){return td(s,null,null,i),nd(s)}function gb(s,i,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var g=!1,y=s.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(g=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,g&&i!==null&&(g=31-Dt(o),s=y.hiddenUpdates,u=s[g],u===null?s[g]=[i]:u.push(i),i.lane=o|536870912),y):null}function nd(s){if(50<Su)throw Su=0,ug=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Pl={};function q2(s,i,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function es(s,i,o,u){return new q2(s,i,o,u)}function np(s){return s=s.prototype,!(!s||!s.isReactComponent)}function na(s,i){var o=s.alternate;return o===null?(o=es(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function yb(s,i){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function rd(s,i,o,u,g,y){var w=0;if(u=s,typeof s=="function")np(s)&&(w=1);else if(typeof s=="string")w=$C(s,o,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case V:return s=es(31,o,i,g),s.elementType=V,s.lanes=y,s;case O:return Ko(o.children,g,y,i);case R:w=8,g|=24;break;case U:return s=es(12,o,i,g|2),s.elementType=U,s.lanes=y,s;case ie:return s=es(13,o,i,g),s.elementType=ie,s.lanes=y,s;case ve:return s=es(19,o,i,g),s.elementType=ve,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Y:w=10;break e;case z:w=9;break e;case Q:w=11;break e;case L:w=14;break e;case k:w=16,u=null;break e}w=29,o=Error(r(130,s===null?"null":typeof s,"")),u=null}return i=es(w,o,i,g),i.elementType=s,i.type=u,i.lanes=y,i}function Ko(s,i,o,u){return s=es(7,s,u,i),s.lanes=o,s}function rp(s,i,o){return s=es(6,s,null,i),s.lanes=o,s}function vb(s){var i=es(18,null,null,0);return i.stateNode=s,i}function sp(s,i,o){return i=es(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var bb=new WeakMap;function ws(s,i){if(typeof s=="object"&&s!==null){var o=bb.get(s);return o!==void 0?o:(i={value:s,source:i,stack:qi(i)},bb.set(s,i),i)}return{value:s,source:i,stack:qi(i)}}var Ul=[],Vl=0,sd=null,iu=0,Ts=[],As=0,Ba=null,_i=1,Ei="";function ra(s,i){Ul[Vl++]=iu,Ul[Vl++]=sd,sd=s,iu=i}function xb(s,i,o){Ts[As++]=_i,Ts[As++]=Ei,Ts[As++]=Ba,Ba=s;var u=_i;s=Ei;var g=32-Dt(u)-1;u&=~(1<<g),o+=1;var y=32-Dt(i)+g;if(30<y){var w=g-g%5;y=(u&(1<<w)-1).toString(32),u>>=w,g-=w,_i=1<<32-Dt(i)+g|o<<g|u,Ei=y+s}else _i=1<<y|o<<g|u,Ei=s}function ip(s){s.return!==null&&(ra(s,1),xb(s,1,0))}function ap(s){for(;s===sd;)sd=Ul[--Vl],Ul[Vl]=null,iu=Ul[--Vl],Ul[Vl]=null;for(;s===Ba;)Ba=Ts[--As],Ts[As]=null,Ei=Ts[--As],Ts[As]=null,_i=Ts[--As],Ts[As]=null}function _b(s,i){Ts[As++]=_i,Ts[As++]=Ei,Ts[As++]=Ba,_i=i.id,Ei=i.overflow,Ba=s}var $n=null,Vt=null,dt=!1,za=null,Ss=!1,op=Error(r(519));function Ha(s){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw au(ws(i,s)),op}function Eb(s){var i=s.stateNode,o=s.type,u=s.memoizedProps;switch(i[Ft]=s,i[sn]=u,o){case"dialog":rt("cancel",i),rt("close",i);break;case"iframe":case"object":case"embed":rt("load",i);break;case"video":case"audio":for(o=0;o<Cu.length;o++)rt(Cu[o],i);break;case"source":rt("error",i);break;case"img":case"image":case"link":rt("error",i),rt("load",i);break;case"details":rt("toggle",i);break;case"input":rt("invalid",i),gi(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":rt("invalid",i);break;case"textarea":rt("invalid",i),yn(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||Vx(i.textContent,o)?(u.popover!=null&&(rt("beforetoggle",i),rt("toggle",i)),u.onScroll!=null&&rt("scroll",i),u.onScrollEnd!=null&&rt("scrollend",i),u.onClick!=null&&(i.onclick=ir),i=!0):i=!1,i||Ha(s,!0)}function wb(s){for($n=s.return;$n;)switch($n.tag){case 5:case 31:case 13:Ss=!1;return;case 27:case 3:Ss=!0;return;default:$n=$n.return}}function ql(s){if(s!==$n)return!1;if(!dt)return wb(s),dt=!0,!1;var i=s.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||Ag(s.type,s.memoizedProps)),o=!o),o&&Vt&&Ha(s),wb(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Vt=Yx(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Vt=Yx(s)}else i===27?(i=Vt,ro(s.type)?(s=Ig,Ig=null,Vt=s):Vt=i):Vt=$n?Cs(s.stateNode.nextSibling):null;return!0}function Yo(){Vt=$n=null,dt=!1}function lp(){var s=za;return s!==null&&(Vr===null?Vr=s:Vr.push.apply(Vr,s),za=null),s}function au(s){za===null?za=[s]:za.push(s)}var cp=q(null),Qo=null,sa=null;function Fa(s,i,o){de(cp,i._currentValue),i._currentValue=o}function ia(s){s._currentValue=cp.current,W(cp)}function up(s,i,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===o)break;s=s.return}}function hp(s,i,o,u){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var y=g.dependencies;if(y!==null){var w=g.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=g;for(var H=0;H<i.length;H++)if(I.context===i[H]){y.lanes|=o,I=y.alternate,I!==null&&(I.lanes|=o),up(y.return,o,s),u||(w=null);break e}y=I.next}}else if(g.tag===18){if(w=g.return,w===null)throw Error(r(341));w.lanes|=o,y=w.alternate,y!==null&&(y.lanes|=o),up(w,o,s),w=null}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}}function Bl(s,i,o,u){s=null;for(var g=i,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var w=g.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var I=g.type;Jr(g.pendingProps.value,w.value)||(s!==null?s.push(I):s=[I])}}else if(g===De.current){if(w=g.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Du):s=[Du])}g=g.return}s!==null&&hp(i,s,o,u),i.flags|=262144}function id(s){for(s=s.firstContext;s!==null;){if(!Jr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Xo(s){Qo=s,sa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Gn(s){return Tb(Qo,s)}function ad(s,i){return Qo===null&&Xo(s),Tb(s,i)}function Tb(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},sa===null){if(s===null)throw Error(r(308));sa=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else sa=sa.next=i;return o}var B2=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},z2=n.unstable_scheduleCallback,H2=n.unstable_NormalPriority,vn={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dp(){return{controller:new B2,data:new Map,refCount:0}}function ou(s){s.refCount--,s.refCount===0&&z2(H2,function(){s.controller.abort()})}var lu=null,fp=0,zl=0,Hl=null;function F2(s,i){if(lu===null){var o=lu=[];fp=0,zl=gg(),Hl={status:"pending",value:void 0,then:function(u){o.push(u)}}}return fp++,i.then(Ab,Ab),i}function Ab(){if(--fp===0&&lu!==null){Hl!==null&&(Hl.status="fulfilled");var s=lu;lu=null,zl=0,Hl=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function $2(s,i){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var g=0;g<o.length;g++)(0,o[g])(i)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var Sb=F.S;F.S=function(s,i){cx=Ot(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&F2(s,i),Sb!==null&&Sb(s,i)};var Wo=q(null);function mp(){var s=Wo.current;return s!==null?s:It.pooledCache}function od(s,i){i===null?de(Wo,Wo.current):de(Wo,i.pool)}function Nb(){var s=mp();return s===null?null:{parent:vn._currentValue,pool:s}}var Fl=Error(r(460)),pp=Error(r(474)),ld=Error(r(542)),cd={then:function(){}};function Cb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Rb(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(ir,ir),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,jb(s),s;default:if(typeof i.status=="string")i.then(ir,ir);else{if(s=It,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=u}},function(u){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,jb(s),s}throw Jo=i,Fl}}function Zo(s){try{var i=s._init;return i(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Jo=o,Fl):o}}var Jo=null;function Ib(){if(Jo===null)throw Error(r(459));var s=Jo;return Jo=null,s}function jb(s){if(s===Fl||s===ld)throw Error(r(483))}var $l=null,cu=0;function ud(s){var i=cu;return cu+=1,$l===null&&($l=[]),Rb($l,s,i)}function uu(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function hd(s,i){throw i.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function Ob(s){function i(K,G){if(s){var Z=K.deletions;Z===null?(K.deletions=[G],K.flags|=16):Z.push(G)}}function o(K,G){if(!s)return null;for(;G!==null;)i(K,G),G=G.sibling;return null}function u(K){for(var G=new Map;K!==null;)K.key!==null?G.set(K.key,K):G.set(K.index,K),K=K.sibling;return G}function g(K,G){return K=na(K,G),K.index=0,K.sibling=null,K}function y(K,G,Z){return K.index=Z,s?(Z=K.alternate,Z!==null?(Z=Z.index,Z<G?(K.flags|=67108866,G):Z):(K.flags|=67108866,G)):(K.flags|=1048576,G)}function w(K){return s&&K.alternate===null&&(K.flags|=67108866),K}function I(K,G,Z,oe){return G===null||G.tag!==6?(G=rp(Z,K.mode,oe),G.return=K,G):(G=g(G,Z),G.return=K,G)}function H(K,G,Z,oe){var Me=Z.type;return Me===O?ae(K,G,Z.props.children,oe,Z.key):G!==null&&(G.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===k&&Zo(Me)===G.type)?(G=g(G,Z.props),uu(G,Z),G.return=K,G):(G=rd(Z.type,Z.key,Z.props,null,K.mode,oe),uu(G,Z),G.return=K,G)}function J(K,G,Z,oe){return G===null||G.tag!==4||G.stateNode.containerInfo!==Z.containerInfo||G.stateNode.implementation!==Z.implementation?(G=sp(Z,K.mode,oe),G.return=K,G):(G=g(G,Z.children||[]),G.return=K,G)}function ae(K,G,Z,oe,Me){return G===null||G.tag!==7?(G=Ko(Z,K.mode,oe,Me),G.return=K,G):(G=g(G,Z),G.return=K,G)}function he(K,G,Z){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=rp(""+G,K.mode,Z),G.return=K,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case T:return Z=rd(G.type,G.key,G.props,null,K.mode,Z),uu(Z,G),Z.return=K,Z;case S:return G=sp(G,K.mode,Z),G.return=K,G;case k:return G=Zo(G),he(K,G,Z)}if(pe(G)||P(G))return G=Ko(G,K.mode,Z,null),G.return=K,G;if(typeof G.then=="function")return he(K,ud(G),Z);if(G.$$typeof===Y)return he(K,ad(K,G),Z);hd(K,G)}return null}function te(K,G,Z,oe){var Me=G!==null?G.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Me!==null?null:I(K,G,""+Z,oe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:return Z.key===Me?H(K,G,Z,oe):null;case S:return Z.key===Me?J(K,G,Z,oe):null;case k:return Z=Zo(Z),te(K,G,Z,oe)}if(pe(Z)||P(Z))return Me!==null?null:ae(K,G,Z,oe,null);if(typeof Z.then=="function")return te(K,G,ud(Z),oe);if(Z.$$typeof===Y)return te(K,G,ad(K,Z),oe);hd(K,Z)}return null}function se(K,G,Z,oe,Me){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return K=K.get(Z)||null,I(G,K,""+oe,Me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case T:return K=K.get(oe.key===null?Z:oe.key)||null,H(G,K,oe,Me);case S:return K=K.get(oe.key===null?Z:oe.key)||null,J(G,K,oe,Me);case k:return oe=Zo(oe),se(K,G,Z,oe,Me)}if(pe(oe)||P(oe))return K=K.get(Z)||null,ae(G,K,oe,Me,null);if(typeof oe.then=="function")return se(K,G,Z,ud(oe),Me);if(oe.$$typeof===Y)return se(K,G,Z,ad(G,oe),Me);hd(G,oe)}return null}function Ne(K,G,Z,oe){for(var Me=null,pt=null,Re=G,Xe=G=0,at=null;Re!==null&&Xe<Z.length;Xe++){Re.index>Xe?(at=Re,Re=null):at=Re.sibling;var gt=te(K,Re,Z[Xe],oe);if(gt===null){Re===null&&(Re=at);break}s&&Re&&gt.alternate===null&&i(K,Re),G=y(gt,G,Xe),pt===null?Me=gt:pt.sibling=gt,pt=gt,Re=at}if(Xe===Z.length)return o(K,Re),dt&&ra(K,Xe),Me;if(Re===null){for(;Xe<Z.length;Xe++)Re=he(K,Z[Xe],oe),Re!==null&&(G=y(Re,G,Xe),pt===null?Me=Re:pt.sibling=Re,pt=Re);return dt&&ra(K,Xe),Me}for(Re=u(Re);Xe<Z.length;Xe++)at=se(Re,K,Xe,Z[Xe],oe),at!==null&&(s&&at.alternate!==null&&Re.delete(at.key===null?Xe:at.key),G=y(at,G,Xe),pt===null?Me=at:pt.sibling=at,pt=at);return s&&Re.forEach(function(lo){return i(K,lo)}),dt&&ra(K,Xe),Me}function Ve(K,G,Z,oe){if(Z==null)throw Error(r(151));for(var Me=null,pt=null,Re=G,Xe=G=0,at=null,gt=Z.next();Re!==null&&!gt.done;Xe++,gt=Z.next()){Re.index>Xe?(at=Re,Re=null):at=Re.sibling;var lo=te(K,Re,gt.value,oe);if(lo===null){Re===null&&(Re=at);break}s&&Re&&lo.alternate===null&&i(K,Re),G=y(lo,G,Xe),pt===null?Me=lo:pt.sibling=lo,pt=lo,Re=at}if(gt.done)return o(K,Re),dt&&ra(K,Xe),Me;if(Re===null){for(;!gt.done;Xe++,gt=Z.next())gt=he(K,gt.value,oe),gt!==null&&(G=y(gt,G,Xe),pt===null?Me=gt:pt.sibling=gt,pt=gt);return dt&&ra(K,Xe),Me}for(Re=u(Re);!gt.done;Xe++,gt=Z.next())gt=se(Re,K,Xe,gt.value,oe),gt!==null&&(s&&gt.alternate!==null&&Re.delete(gt.key===null?Xe:gt.key),G=y(gt,G,Xe),pt===null?Me=gt:pt.sibling=gt,pt=gt);return s&&Re.forEach(function(nR){return i(K,nR)}),dt&&ra(K,Xe),Me}function Ct(K,G,Z,oe){if(typeof Z=="object"&&Z!==null&&Z.type===O&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:e:{for(var Me=Z.key;G!==null;){if(G.key===Me){if(Me=Z.type,Me===O){if(G.tag===7){o(K,G.sibling),oe=g(G,Z.props.children),oe.return=K,K=oe;break e}}else if(G.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===k&&Zo(Me)===G.type){o(K,G.sibling),oe=g(G,Z.props),uu(oe,Z),oe.return=K,K=oe;break e}o(K,G);break}else i(K,G);G=G.sibling}Z.type===O?(oe=Ko(Z.props.children,K.mode,oe,Z.key),oe.return=K,K=oe):(oe=rd(Z.type,Z.key,Z.props,null,K.mode,oe),uu(oe,Z),oe.return=K,K=oe)}return w(K);case S:e:{for(Me=Z.key;G!==null;){if(G.key===Me)if(G.tag===4&&G.stateNode.containerInfo===Z.containerInfo&&G.stateNode.implementation===Z.implementation){o(K,G.sibling),oe=g(G,Z.children||[]),oe.return=K,K=oe;break e}else{o(K,G);break}else i(K,G);G=G.sibling}oe=sp(Z,K.mode,oe),oe.return=K,K=oe}return w(K);case k:return Z=Zo(Z),Ct(K,G,Z,oe)}if(pe(Z))return Ne(K,G,Z,oe);if(P(Z)){if(Me=P(Z),typeof Me!="function")throw Error(r(150));return Z=Me.call(Z),Ve(K,G,Z,oe)}if(typeof Z.then=="function")return Ct(K,G,ud(Z),oe);if(Z.$$typeof===Y)return Ct(K,G,ad(K,Z),oe);hd(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,G!==null&&G.tag===6?(o(K,G.sibling),oe=g(G,Z),oe.return=K,K=oe):(o(K,G),oe=rp(Z,K.mode,oe),oe.return=K,K=oe),w(K)):o(K,G)}return function(K,G,Z,oe){try{cu=0;var Me=Ct(K,G,Z,oe);return $l=null,Me}catch(Re){if(Re===Fl||Re===ld)throw Re;var pt=es(29,Re,null,K.mode);return pt.lanes=oe,pt.return=K,pt}finally{}}}var el=Ob(!0),Db=Ob(!1),$a=!1;function gp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yp(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ga(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ka(s,i,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(xt&2)!==0){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,i=nd(s),gb(s,null,o),i}return td(s,u,i,o),nd(s)}function hu(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,Ki(s,o)}}function vp(s,i){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?g=y=w:y=y.next=w,o=o.next}while(o!==null);y===null?g=y=i:y=y.next=i}else g=y=i;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var bp=!1;function du(){if(bp){var s=Hl;if(s!==null)throw s}}function fu(s,i,o,u){bp=!1;var g=s.updateQueue;$a=!1;var y=g.firstBaseUpdate,w=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var H=I,J=H.next;H.next=null,w===null?y=J:w.next=J,w=H;var ae=s.alternate;ae!==null&&(ae=ae.updateQueue,I=ae.lastBaseUpdate,I!==w&&(I===null?ae.firstBaseUpdate=J:I.next=J,ae.lastBaseUpdate=H))}if(y!==null){var he=g.baseState;w=0,ae=J=H=null,I=y;do{var te=I.lane&-536870913,se=te!==I.lane;if(se?(it&te)===te:(u&te)===te){te!==0&&te===zl&&(bp=!0),ae!==null&&(ae=ae.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ne=s,Ve=I;te=i;var Ct=o;switch(Ve.tag){case 1:if(Ne=Ve.payload,typeof Ne=="function"){he=Ne.call(Ct,he,te);break e}he=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Ve.payload,te=typeof Ne=="function"?Ne.call(Ct,he,te):Ne,te==null)break e;he=b({},he,te);break e;case 2:$a=!0}}te=I.callback,te!==null&&(s.flags|=64,se&&(s.flags|=8192),se=g.callbacks,se===null?g.callbacks=[te]:se.push(te))}else se={lane:te,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ae===null?(J=ae=se,H=he):ae=ae.next=se,w|=te;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;se=I,I=se.next,se.next=null,g.lastBaseUpdate=se,g.shared.pending=null}}while(!0);ae===null&&(H=he),g.baseState=H,g.firstBaseUpdate=J,g.lastBaseUpdate=ae,y===null&&(g.shared.lanes=0),Za|=w,s.lanes=w,s.memoizedState=he}}function Lb(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function kb(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)Lb(o[s],i)}var Gl=q(null),dd=q(0);function Mb(s,i){s=ma,de(dd,s),de(Gl,i),ma=s|i.baseLanes}function xp(){de(dd,ma),de(Gl,Gl.current)}function _p(){ma=dd.current,W(Gl),W(dd)}var ts=q(null),Ns=null;function Ya(s){var i=s.alternate;de(fn,fn.current&1),de(ts,s),Ns===null&&(i===null||Gl.current!==null||i.memoizedState!==null)&&(Ns=s)}function Ep(s){de(fn,fn.current),de(ts,s),Ns===null&&(Ns=s)}function Pb(s){s.tag===22?(de(fn,fn.current),de(ts,s),Ns===null&&(Ns=s)):Qa()}function Qa(){de(fn,fn.current),de(ts,ts.current)}function ns(s){W(ts),Ns===s&&(Ns=null),W(fn)}var fn=q(0);function fd(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Cg(o)||Rg(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var aa=0,Ye=null,St=null,bn=null,md=!1,Kl=!1,tl=!1,pd=0,mu=0,Yl=null,G2=0;function on(){throw Error(r(321))}function wp(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!Jr(s[o],i[o]))return!1;return!0}function Tp(s,i,o,u,g,y){return aa=y,Ye=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=s===null||s.memoizedState===null?x1:Vp,tl=!1,y=o(u,g),tl=!1,Kl&&(y=Vb(i,o,u,g)),Ub(s),y}function Ub(s){F.H=yu;var i=St!==null&&St.next!==null;if(aa=0,bn=St=Ye=null,md=!1,mu=0,Yl=null,i)throw Error(r(300));s===null||xn||(s=s.dependencies,s!==null&&id(s)&&(xn=!0))}function Vb(s,i,o,u){Ye=s;var g=0;do{if(Kl&&(Yl=null),mu=0,Kl=!1,25<=g)throw Error(r(301));if(g+=1,bn=St=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}F.H=_1,y=i(o,u)}while(Kl);return y}function K2(){var s=F.H,i=s.useState()[0];return i=typeof i.then=="function"?pu(i):i,s=s.useState()[0],(St!==null?St.memoizedState:null)!==s&&(Ye.flags|=1024),i}function Ap(){var s=pd!==0;return pd=0,s}function Sp(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function Np(s){if(md){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}md=!1}aa=0,bn=St=Ye=null,Kl=!1,mu=pd=0,Yl=null}function wr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?Ye.memoizedState=bn=s:bn=bn.next=s,bn}function mn(){if(St===null){var s=Ye.alternate;s=s!==null?s.memoizedState:null}else s=St.next;var i=bn===null?Ye.memoizedState:bn.next;if(i!==null)bn=i,St=s;else{if(s===null)throw Ye.alternate===null?Error(r(467)):Error(r(310));St=s,s={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},bn===null?Ye.memoizedState=bn=s:bn=bn.next=s}return bn}function gd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pu(s){var i=mu;return mu+=1,Yl===null&&(Yl=[]),s=Rb(Yl,s,i),i=Ye,(bn===null?i.memoizedState:bn.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?x1:Vp),s}function yd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return pu(s);if(s.$$typeof===Y)return Gn(s)}throw Error(r(438,String(s)))}function Cp(s){var i=null,o=Ye.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Ye.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=gd(),Ye.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),u=0;u<s;u++)o[u]=$;return i.index++,o}function oa(s,i){return typeof i=="function"?i(s):i}function vd(s){var i=mn();return Rp(i,St,s)}function Rp(s,i,o){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var g=s.baseQueue,y=u.pending;if(y!==null){if(g!==null){var w=g.next;g.next=y.next,y.next=w}i.baseQueue=g=y,u.pending=null}if(y=s.baseState,g===null)s.memoizedState=y;else{i=g.next;var I=w=null,H=null,J=i,ae=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(it&he)===he:(aa&he)===he){var te=J.revertLane;if(te===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===zl&&(ae=!0);else if((aa&te)===te){J=J.next,te===zl&&(ae=!0);continue}else he={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},H===null?(I=H=he,w=y):H=H.next=he,Ye.lanes|=te,Za|=te;he=J.action,tl&&o(y,he),y=J.hasEagerState?J.eagerState:o(y,he)}else te={lane:he,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},H===null?(I=H=te,w=y):H=H.next=te,Ye.lanes|=he,Za|=he;J=J.next}while(J!==null&&J!==i);if(H===null?w=y:H.next=I,!Jr(y,s.memoizedState)&&(xn=!0,ae&&(o=Hl,o!==null)))throw o;s.memoizedState=y,s.baseState=w,s.baseQueue=H,u.lastRenderedState=y}return g===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Ip(s){var i=mn(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var u=o.dispatch,g=o.pending,y=i.memoizedState;if(g!==null){o.pending=null;var w=g=g.next;do y=s(y,w.action),w=w.next;while(w!==g);Jr(y,i.memoizedState)||(xn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function qb(s,i,o){var u=Ye,g=mn(),y=dt;if(y){if(o===void 0)throw Error(r(407));o=o()}else o=i();var w=!Jr((St||g).memoizedState,o);if(w&&(g.memoizedState=o,xn=!0),g=g.queue,Dp(Hb.bind(null,u,g,s),[s]),g.getSnapshot!==i||w||bn!==null&&bn.memoizedState.tag&1){if(u.flags|=2048,Ql(9,{destroy:void 0},zb.bind(null,u,g,o,i),null),It===null)throw Error(r(349));y||(aa&127)!==0||Bb(u,i,o)}return o}function Bb(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=Ye.updateQueue,i===null?(i=gd(),Ye.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function zb(s,i,o,u){i.value=o,i.getSnapshot=u,Fb(i)&&$b(s)}function Hb(s,i,o){return o(function(){Fb(i)&&$b(s)})}function Fb(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!Jr(s,o)}catch{return!0}}function $b(s){var i=Go(s,2);i!==null&&qr(i,s,2)}function jp(s){var i=wr();if(typeof s=="function"){var o=s;if(s=o(),tl){Sn(!0);try{o()}finally{Sn(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:s},i}function Gb(s,i,o,u){return s.baseState=o,Rp(s,St,typeof u=="function"?u:oa)}function Y2(s,i,o,u,g){if(_d(s))throw Error(r(485));if(s=i.action,s!==null){var y={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};F.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,Kb(i,y)):(y.next=o.next,i.pending=o.next=y)}}function Kb(s,i){var o=i.action,u=i.payload,g=s.state;if(i.isTransition){var y=F.T,w={};F.T=w;try{var I=o(g,u),H=F.S;H!==null&&H(w,I),Yb(s,i,I)}catch(J){Op(s,i,J)}finally{y!==null&&w.types!==null&&(y.types=w.types),F.T=y}}else try{y=o(g,u),Yb(s,i,y)}catch(J){Op(s,i,J)}}function Yb(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Qb(s,i,u)},function(u){return Op(s,i,u)}):Qb(s,i,o)}function Qb(s,i,o){i.status="fulfilled",i.value=o,Xb(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,Kb(s,o)))}function Op(s,i,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Xb(i),i=i.next;while(i!==u)}s.action=null}function Xb(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function Wb(s,i){return i}function Zb(s,i){if(dt){var o=It.formState;if(o!==null){e:{var u=Ye;if(dt){if(Vt){t:{for(var g=Vt,y=Ss;g.nodeType!==8;){if(!y){g=null;break t}if(g=Cs(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Vt=Cs(g.nextSibling),u=g.data==="F!";break e}}Ha(u)}u=!1}u&&(i=o[0])}}return o=wr(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wb,lastRenderedState:i},o.queue=u,o=y1.bind(null,Ye,u),u.dispatch=o,u=jp(!1),y=Up.bind(null,Ye,!1,u.queue),u=wr(),g={state:i,dispatch:null,action:s,pending:null},u.queue=g,o=Y2.bind(null,Ye,g,y,o),g.dispatch=o,u.memoizedState=s,[i,o,!1]}function Jb(s){var i=mn();return e1(i,St,s)}function e1(s,i,o){if(i=Rp(s,i,Wb)[0],s=vd(oa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=pu(i)}catch(w){throw w===Fl?ld:w}else u=i;i=mn();var g=i.queue,y=g.dispatch;return o!==i.memoizedState&&(Ye.flags|=2048,Ql(9,{destroy:void 0},Q2.bind(null,g,o),null)),[u,y,s]}function Q2(s,i){s.action=i}function t1(s){var i=mn(),o=St;if(o!==null)return e1(i,o,s);mn(),i=i.memoizedState,o=mn();var u=o.queue.dispatch;return o.memoizedState=s,[i,u,!1]}function Ql(s,i,o,u){return s={tag:s,create:o,deps:u,inst:i,next:null},i=Ye.updateQueue,i===null&&(i=gd(),Ye.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,i.lastEffect=s),s}function n1(){return mn().memoizedState}function bd(s,i,o,u){var g=wr();Ye.flags|=s,g.memoizedState=Ql(1|i,{destroy:void 0},o,u===void 0?null:u)}function xd(s,i,o,u){var g=mn();u=u===void 0?null:u;var y=g.memoizedState.inst;St!==null&&u!==null&&wp(u,St.memoizedState.deps)?g.memoizedState=Ql(i,y,o,u):(Ye.flags|=s,g.memoizedState=Ql(1|i,y,o,u))}function r1(s,i){bd(8390656,8,s,i)}function Dp(s,i){xd(2048,8,s,i)}function X2(s){Ye.flags|=4;var i=Ye.updateQueue;if(i===null)i=gd(),Ye.updateQueue=i,i.events=[s];else{var o=i.events;o===null?i.events=[s]:o.push(s)}}function s1(s){var i=mn().memoizedState;return X2({ref:i,nextImpl:s}),function(){if((xt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function i1(s,i){return xd(4,2,s,i)}function a1(s,i){return xd(4,4,s,i)}function o1(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function l1(s,i,o){o=o!=null?o.concat([s]):null,xd(4,4,o1.bind(null,i,s),o)}function Lp(){}function c1(s,i){var o=mn();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&wp(i,u[1])?u[0]:(o.memoizedState=[s,i],s)}function u1(s,i){var o=mn();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&wp(i,u[1]))return u[0];if(u=s(),tl){Sn(!0);try{s()}finally{Sn(!1)}}return o.memoizedState=[u,i],u}function kp(s,i,o){return o===void 0||(aa&1073741824)!==0&&(it&261930)===0?s.memoizedState=i:(s.memoizedState=o,s=hx(),Ye.lanes|=s,Za|=s,o)}function h1(s,i,o,u){return Jr(o,i)?o:Gl.current!==null?(s=kp(s,o,u),Jr(s,i)||(xn=!0),s):(aa&42)===0||(aa&1073741824)!==0&&(it&261930)===0?(xn=!0,s.memoizedState=o):(s=hx(),Ye.lanes|=s,Za|=s,i)}function d1(s,i,o,u,g){var y=ee.p;ee.p=y!==0&&8>y?y:8;var w=F.T,I={};F.T=I,Up(s,!1,i,o);try{var H=g(),J=F.S;if(J!==null&&J(I,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var ae=$2(H,u);gu(s,i,ae,is(s))}else gu(s,i,u,is(s))}catch(he){gu(s,i,{then:function(){},status:"rejected",reason:he},is())}finally{ee.p=y,w!==null&&I.types!==null&&(w.types=I.types),F.T=w}}function W2(){}function Mp(s,i,o,u){if(s.tag!==5)throw Error(r(476));var g=f1(s).queue;d1(s,g,i,ue,o===null?W2:function(){return m1(s),o(u)})}function f1(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:ue},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function m1(s){var i=f1(s);i.next===null&&(i=s.alternate.memoizedState),gu(s,i.next.queue,{},is())}function Pp(){return Gn(Du)}function p1(){return mn().memoizedState}function g1(){return mn().memoizedState}function Z2(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=is();s=Ga(o);var u=Ka(i,s,o);u!==null&&(qr(u,i,o),hu(u,i,o)),i={cache:dp()},s.payload=i;return}i=i.return}}function J2(s,i,o){var u=is();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},_d(s)?v1(i,o):(o=tp(s,i,o,u),o!==null&&(qr(o,s,u),b1(o,i,u)))}function y1(s,i,o){var u=is();gu(s,i,o,u)}function gu(s,i,o,u){var g={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(_d(s))v1(i,g);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var w=i.lastRenderedState,I=y(w,o);if(g.hasEagerState=!0,g.eagerState=I,Jr(I,w))return td(s,i,g,0),It===null&&ed(),!1}catch{}finally{}if(o=tp(s,i,g,u),o!==null)return qr(o,s,u),b1(o,i,u),!0}return!1}function Up(s,i,o,u){if(u={lane:2,revertLane:gg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},_d(s)){if(i)throw Error(r(479))}else i=tp(s,o,u,2),i!==null&&qr(i,s,2)}function _d(s){var i=s.alternate;return s===Ye||i!==null&&i===Ye}function v1(s,i){Kl=md=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function b1(s,i,o){if((o&4194048)!==0){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,Ki(s,o)}}var yu={readContext:Gn,use:yd,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on};yu.useEffectEvent=on;var x1={readContext:Gn,use:yd,useCallback:function(s,i){return wr().memoizedState=[s,i===void 0?null:i],s},useContext:Gn,useEffect:r1,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,bd(4194308,4,o1.bind(null,i,s),o)},useLayoutEffect:function(s,i){return bd(4194308,4,s,i)},useInsertionEffect:function(s,i){bd(4,2,s,i)},useMemo:function(s,i){var o=wr();i=i===void 0?null:i;var u=s();if(tl){Sn(!0);try{s()}finally{Sn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(s,i,o){var u=wr();if(o!==void 0){var g=o(i);if(tl){Sn(!0);try{o(i)}finally{Sn(!1)}}}else g=i;return u.memoizedState=u.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},u.queue=s,s=s.dispatch=J2.bind(null,Ye,s),[u.memoizedState,s]},useRef:function(s){var i=wr();return s={current:s},i.memoizedState=s},useState:function(s){s=jp(s);var i=s.queue,o=y1.bind(null,Ye,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:Lp,useDeferredValue:function(s,i){var o=wr();return kp(o,s,i)},useTransition:function(){var s=jp(!1);return s=d1.bind(null,Ye,s.queue,!0,!1),wr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var u=Ye,g=wr();if(dt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),It===null)throw Error(r(349));(it&127)!==0||Bb(u,i,o)}g.memoizedState=o;var y={value:o,getSnapshot:i};return g.queue=y,r1(Hb.bind(null,u,y,s),[s]),u.flags|=2048,Ql(9,{destroy:void 0},zb.bind(null,u,y,o,i),null),o},useId:function(){var s=wr(),i=It.identifierPrefix;if(dt){var o=Ei,u=_i;o=(u&~(1<<32-Dt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=pd++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=G2++,i="_"+i+"r_"+o.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:Pp,useFormState:Zb,useActionState:Zb,useOptimistic:function(s){var i=wr();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Up.bind(null,Ye,!0,o),o.dispatch=i,[s,i]},useMemoCache:Cp,useCacheRefresh:function(){return wr().memoizedState=Z2.bind(null,Ye)},useEffectEvent:function(s){var i=wr(),o={impl:s};return i.memoizedState=o,function(){if((xt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Vp={readContext:Gn,use:yd,useCallback:c1,useContext:Gn,useEffect:Dp,useImperativeHandle:l1,useInsertionEffect:i1,useLayoutEffect:a1,useMemo:u1,useReducer:vd,useRef:n1,useState:function(){return vd(oa)},useDebugValue:Lp,useDeferredValue:function(s,i){var o=mn();return h1(o,St.memoizedState,s,i)},useTransition:function(){var s=vd(oa)[0],i=mn().memoizedState;return[typeof s=="boolean"?s:pu(s),i]},useSyncExternalStore:qb,useId:p1,useHostTransitionStatus:Pp,useFormState:Jb,useActionState:Jb,useOptimistic:function(s,i){var o=mn();return Gb(o,St,s,i)},useMemoCache:Cp,useCacheRefresh:g1};Vp.useEffectEvent=s1;var _1={readContext:Gn,use:yd,useCallback:c1,useContext:Gn,useEffect:Dp,useImperativeHandle:l1,useInsertionEffect:i1,useLayoutEffect:a1,useMemo:u1,useReducer:Ip,useRef:n1,useState:function(){return Ip(oa)},useDebugValue:Lp,useDeferredValue:function(s,i){var o=mn();return St===null?kp(o,s,i):h1(o,St.memoizedState,s,i)},useTransition:function(){var s=Ip(oa)[0],i=mn().memoizedState;return[typeof s=="boolean"?s:pu(s),i]},useSyncExternalStore:qb,useId:p1,useHostTransitionStatus:Pp,useFormState:t1,useActionState:t1,useOptimistic:function(s,i){var o=mn();return St!==null?Gb(o,St,s,i):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:Cp,useCacheRefresh:g1};_1.useEffectEvent=s1;function qp(s,i,o,u){i=s.memoizedState,o=o(u,i),o=o==null?i:b({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Bp={enqueueSetState:function(s,i,o){s=s._reactInternals;var u=is(),g=Ga(u);g.payload=i,o!=null&&(g.callback=o),i=Ka(s,g,u),i!==null&&(qr(i,s,u),hu(i,s,u))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var u=is(),g=Ga(u);g.tag=1,g.payload=i,o!=null&&(g.callback=o),i=Ka(s,g,u),i!==null&&(qr(i,s,u),hu(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=is(),u=Ga(o);u.tag=2,i!=null&&(u.callback=i),i=Ka(s,u,o),i!==null&&(qr(i,s,o),hu(i,s,o))}};function E1(s,i,o,u,g,y,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,y,w):i.prototype&&i.prototype.isPureReactComponent?!ru(o,u)||!ru(g,y):!0}function w1(s,i,o,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==s&&Bp.enqueueReplaceState(i,i.state,null)}function nl(s,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(s=s.defaultProps){o===i&&(o=b({},o));for(var g in s)o[g]===void 0&&(o[g]=s[g])}return o}function T1(s){Jh(s)}function A1(s){console.error(s)}function S1(s){Jh(s)}function Ed(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function N1(s,i,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function zp(s,i,o){return o=Ga(o),o.tag=3,o.payload={element:null},o.callback=function(){Ed(s,i)},o}function C1(s){return s=Ga(s),s.tag=3,s}function R1(s,i,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;s.payload=function(){return g(y)},s.callback=function(){N1(i,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){N1(i,o,u),typeof g!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function eC(s,i,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Bl(i,o,g,!0),o=ts.current,o!==null){switch(o.tag){case 31:case 13:return Ns===null?Ld():o.alternate===null&&ln===0&&(ln=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===cd?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),fg(s,u,g)),!1;case 22:return o.flags|=65536,u===cd?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),fg(s,u,g)),!1}throw Error(r(435,o.tag))}return fg(s,u,g),Ld(),!1}if(dt)return i=ts.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,u!==op&&(s=Error(r(422),{cause:u}),au(ws(s,o)))):(u!==op&&(i=Error(r(423),{cause:u}),au(ws(i,o))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,u=ws(u,o),g=zp(s.stateNode,u,g),vp(s,g),ln!==4&&(ln=2)),!1;var y=Error(r(520),{cause:u});if(y=ws(y,o),Au===null?Au=[y]:Au.push(y),ln!==4&&(ln=2),i===null)return!0;u=ws(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=g&-g,o.lanes|=s,s=zp(o.stateNode,u,s),vp(o,s),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ja===null||!Ja.has(y))))return o.flags|=65536,g&=-g,o.lanes|=g,g=C1(g),R1(g,s,o,u),vp(o,g),!1}o=o.return}while(o!==null);return!1}var Hp=Error(r(461)),xn=!1;function Kn(s,i,o,u){i.child=s===null?Db(i,null,o,u):el(i,s.child,o,u)}function I1(s,i,o,u,g){o=o.render;var y=i.ref;if("ref"in u){var w={};for(var I in u)I!=="ref"&&(w[I]=u[I])}else w=u;return Xo(i),u=Tp(s,i,o,w,y,g),I=Ap(),s!==null&&!xn?(Sp(s,i,g),la(s,i,g)):(dt&&I&&ip(i),i.flags|=1,Kn(s,i,u,g),i.child)}function j1(s,i,o,u,g){if(s===null){var y=o.type;return typeof y=="function"&&!np(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,O1(s,i,y,u,g)):(s=rd(o.type,null,u,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(y=s.child,!Wp(s,g)){var w=y.memoizedProps;if(o=o.compare,o=o!==null?o:ru,o(w,u)&&s.ref===i.ref)return la(s,i,g)}return i.flags|=1,s=na(y,u),s.ref=i.ref,s.return=i,i.child=s}function O1(s,i,o,u,g){if(s!==null){var y=s.memoizedProps;if(ru(y,u)&&s.ref===i.ref)if(xn=!1,i.pendingProps=u=y,Wp(s,g))(s.flags&131072)!==0&&(xn=!0);else return i.lanes=s.lanes,la(s,i,g)}return Fp(s,i,o,u,g)}function D1(s,i,o,u){var g=u.children,y=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,s!==null){for(u=i.child=s.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~y}else u=0,i.child=null;return L1(s,i,y,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&od(i,y!==null?y.cachePool:null),y!==null?Mb(i,y):xp(),Pb(i);else return u=i.lanes=536870912,L1(s,i,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(od(i,y.cachePool),Mb(i,y),Qa(),i.memoizedState=null):(s!==null&&od(i,null),xp(),Qa());return Kn(s,i,g,o),i.child}function vu(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function L1(s,i,o,u,g){var y=mp();return y=y===null?null:{parent:vn._currentValue,pool:y},i.memoizedState={baseLanes:o,cachePool:y},s!==null&&od(i,null),xp(),Pb(i),s!==null&&Bl(s,i,u,!0),i.childLanes=g,null}function wd(s,i){return i=Ad({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function k1(s,i,o){return el(i,s.child,null,o),s=wd(i,i.pendingProps),s.flags|=2,ns(i),i.memoizedState=null,s}function tC(s,i,o){var u=i.pendingProps,g=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(dt){if(u.mode==="hidden")return s=wd(i,u),i.lanes=536870912,vu(null,s);if(Ep(i),(s=Vt)?(s=Kx(s,Ss),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Ba!==null?{id:_i,overflow:Ei}:null,retryLane:536870912,hydrationErrors:null},o=vb(s),o.return=i,i.child=o,$n=i,Vt=null)):s=null,s===null)throw Ha(i);return i.lanes=536870912,null}return wd(i,u)}var y=s.memoizedState;if(y!==null){var w=y.dehydrated;if(Ep(i),g)if(i.flags&256)i.flags&=-257,i=k1(s,i,o);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(r(558));else if(xn||Bl(s,i,o,!1),g=(o&s.childLanes)!==0,xn||g){if(u=It,u!==null&&(w=Yi(u,o),w!==0&&w!==y.retryLane))throw y.retryLane=w,Go(s,w),qr(u,s,w),Hp;Ld(),i=k1(s,i,o)}else s=y.treeContext,Vt=Cs(w.nextSibling),$n=i,dt=!0,za=null,Ss=!1,s!==null&&_b(i,s),i=wd(i,u),i.flags|=4096;return i}return s=na(s.child,{mode:u.mode,children:u.children}),s.ref=i.ref,i.child=s,s.return=i,s}function Td(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(i.flags|=4194816)}}function Fp(s,i,o,u,g){return Xo(i),o=Tp(s,i,o,u,void 0,g),u=Ap(),s!==null&&!xn?(Sp(s,i,g),la(s,i,g)):(dt&&u&&ip(i),i.flags|=1,Kn(s,i,o,g),i.child)}function M1(s,i,o,u,g,y){return Xo(i),i.updateQueue=null,o=Vb(i,u,o,g),Ub(s),u=Ap(),s!==null&&!xn?(Sp(s,i,y),la(s,i,y)):(dt&&u&&ip(i),i.flags|=1,Kn(s,i,o,y),i.child)}function P1(s,i,o,u,g){if(Xo(i),i.stateNode===null){var y=Pl,w=o.contextType;typeof w=="object"&&w!==null&&(y=Gn(w)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Bp,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},gp(i),w=o.contextType,y.context=typeof w=="object"&&w!==null?Gn(w):Pl,y.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(qp(i,o,w,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&Bp.enqueueReplaceState(y,y.state,null),fu(i,u,y,g),du(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){y=i.stateNode;var I=i.memoizedProps,H=nl(o,I);y.props=H;var J=y.context,ae=o.contextType;w=Pl,typeof ae=="object"&&ae!==null&&(w=Gn(ae));var he=o.getDerivedStateFromProps;ae=typeof he=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,ae||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||J!==w)&&w1(i,y,u,w),$a=!1;var te=i.memoizedState;y.state=te,fu(i,u,y,g),du(),J=i.memoizedState,I||te!==J||$a?(typeof he=="function"&&(qp(i,o,he,u),J=i.memoizedState),(H=$a||E1(i,o,H,u,te,J,w))?(ae||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=J),y.props=u,y.state=J,y.context=w,u=H):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,yp(s,i),w=i.memoizedProps,ae=nl(o,w),y.props=ae,he=i.pendingProps,te=y.context,J=o.contextType,H=Pl,typeof J=="object"&&J!==null&&(H=Gn(J)),I=o.getDerivedStateFromProps,(J=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==he||te!==H)&&w1(i,y,u,H),$a=!1,te=i.memoizedState,y.state=te,fu(i,u,y,g),du();var se=i.memoizedState;w!==he||te!==se||$a||s!==null&&s.dependencies!==null&&id(s.dependencies)?(typeof I=="function"&&(qp(i,o,I,u),se=i.memoizedState),(ae=$a||E1(i,o,ae,u,te,se,H)||s!==null&&s.dependencies!==null&&id(s.dependencies))?(J||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,se,H),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,se,H)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=se),y.props=u,y.state=se,y.context=H,u=ae):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),u=!1)}return y=u,Td(s,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,s!==null&&u?(i.child=el(i,s.child,null,g),i.child=el(i,null,o,g)):Kn(s,i,o,g),i.memoizedState=y.state,s=i.child):s=la(s,i,g),s}function U1(s,i,o,u){return Yo(),i.flags|=256,Kn(s,i,o,u),i.child}var $p={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gp(s){return{baseLanes:s,cachePool:Nb()}}function Kp(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=ss),s}function V1(s,i,o){var u=i.pendingProps,g=!1,y=(i.flags&128)!==0,w;if((w=y)||(w=s!==null&&s.memoizedState===null?!1:(fn.current&2)!==0),w&&(g=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,s===null){if(dt){if(g?Ya(i):Qa(),(s=Vt)?(s=Kx(s,Ss),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Ba!==null?{id:_i,overflow:Ei}:null,retryLane:536870912,hydrationErrors:null},o=vb(s),o.return=i,i.child=o,$n=i,Vt=null)):s=null,s===null)throw Ha(i);return Rg(s)?i.lanes=32:i.lanes=536870912,null}var I=u.children;return u=u.fallback,g?(Qa(),g=i.mode,I=Ad({mode:"hidden",children:I},g),u=Ko(u,g,o,null),I.return=i,u.return=i,I.sibling=u,i.child=I,u=i.child,u.memoizedState=Gp(o),u.childLanes=Kp(s,w,o),i.memoizedState=$p,vu(null,u)):(Ya(i),Yp(i,I))}var H=s.memoizedState;if(H!==null&&(I=H.dehydrated,I!==null)){if(y)i.flags&256?(Ya(i),i.flags&=-257,i=Qp(s,i,o)):i.memoizedState!==null?(Qa(),i.child=s.child,i.flags|=128,i=null):(Qa(),I=u.fallback,g=i.mode,u=Ad({mode:"visible",children:u.children},g),I=Ko(I,g,o,null),I.flags|=2,u.return=i,I.return=i,u.sibling=I,i.child=u,el(i,s.child,null,o),u=i.child,u.memoizedState=Gp(o),u.childLanes=Kp(s,w,o),i.memoizedState=$p,i=vu(null,u));else if(Ya(i),Rg(I)){if(w=I.nextSibling&&I.nextSibling.dataset,w)var J=w.dgst;w=J,u=Error(r(419)),u.stack="",u.digest=w,au({value:u,source:null,stack:null}),i=Qp(s,i,o)}else if(xn||Bl(s,i,o,!1),w=(o&s.childLanes)!==0,xn||w){if(w=It,w!==null&&(u=Yi(w,o),u!==0&&u!==H.retryLane))throw H.retryLane=u,Go(s,u),qr(w,s,u),Hp;Cg(I)||Ld(),i=Qp(s,i,o)}else Cg(I)?(i.flags|=192,i.child=s.child,i=null):(s=H.treeContext,Vt=Cs(I.nextSibling),$n=i,dt=!0,za=null,Ss=!1,s!==null&&_b(i,s),i=Yp(i,u.children),i.flags|=4096);return i}return g?(Qa(),I=u.fallback,g=i.mode,H=s.child,J=H.sibling,u=na(H,{mode:"hidden",children:u.children}),u.subtreeFlags=H.subtreeFlags&65011712,J!==null?I=na(J,I):(I=Ko(I,g,o,null),I.flags|=2),I.return=i,u.return=i,u.sibling=I,i.child=u,vu(null,u),u=i.child,I=s.child.memoizedState,I===null?I=Gp(o):(g=I.cachePool,g!==null?(H=vn._currentValue,g=g.parent!==H?{parent:H,pool:H}:g):g=Nb(),I={baseLanes:I.baseLanes|o,cachePool:g}),u.memoizedState=I,u.childLanes=Kp(s,w,o),i.memoizedState=$p,vu(s.child,u)):(Ya(i),o=s.child,s=o.sibling,o=na(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,s!==null&&(w=i.deletions,w===null?(i.deletions=[s],i.flags|=16):w.push(s)),i.child=o,i.memoizedState=null,o)}function Yp(s,i){return i=Ad({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function Ad(s,i){return s=es(22,s,null,i),s.lanes=0,s}function Qp(s,i,o){return el(i,s.child,null,o),s=Yp(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function q1(s,i,o){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),up(s.return,i,o)}function Xp(s,i,o,u,g,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g,treeForkCount:y}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=o,w.tailMode=g,w.treeForkCount=y)}function B1(s,i,o){var u=i.pendingProps,g=u.revealOrder,y=u.tail;u=u.children;var w=fn.current,I=(w&2)!==0;if(I?(w=w&1|2,i.flags|=128):w&=1,de(fn,w),Kn(s,i,u,o),u=dt?iu:0,!I&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&q1(s,o,i);else if(s.tag===19)q1(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(o=i.child,g=null;o!==null;)s=o.alternate,s!==null&&fd(s)===null&&(g=o),o=o.sibling;o=g,o===null?(g=i.child,i.child=null):(g=o.sibling,o.sibling=null),Xp(i,!1,g,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&fd(s)===null){i.child=g;break}s=g.sibling,g.sibling=o,o=g,g=s}Xp(i,!0,o,null,y,u);break;case"together":Xp(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function la(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),Za|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(Bl(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,o=na(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=na(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function Wp(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&id(s)))}function nC(s,i,o){switch(i.tag){case 3:je(i,i.stateNode.containerInfo),Fa(i,vn,s.memoizedState.cache),Yo();break;case 27:case 5:We(i);break;case 4:je(i,i.stateNode.containerInfo);break;case 10:Fa(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Ep(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ya(i),i.flags|=128,null):(o&i.child.childLanes)!==0?V1(s,i,o):(Ya(i),s=la(s,i,o),s!==null?s.sibling:null);Ya(i);break;case 19:var g=(s.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Bl(s,i,o,!1),u=(o&i.childLanes)!==0),g){if(u)return B1(s,i,o);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),de(fn,fn.current),u)break;return null;case 22:return i.lanes=0,D1(s,i,o,i.pendingProps);case 24:Fa(i,vn,s.memoizedState.cache)}return la(s,i,o)}function z1(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)xn=!0;else{if(!Wp(s,o)&&(i.flags&128)===0)return xn=!1,nC(s,i,o);xn=(s.flags&131072)!==0}else xn=!1,dt&&(i.flags&1048576)!==0&&xb(i,iu,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(s=Zo(i.elementType),i.type=s,typeof s=="function")np(s)?(u=nl(s,u),i.tag=1,i=P1(null,i,s,u,o)):(i.tag=0,i=Fp(null,i,s,u,o));else{if(s!=null){var g=s.$$typeof;if(g===Q){i.tag=11,i=I1(null,i,s,u,o);break e}else if(g===L){i.tag=14,i=j1(null,i,s,u,o);break e}}throw i=ge(s)||s,Error(r(306,i,""))}}return i;case 0:return Fp(s,i,i.type,i.pendingProps,o);case 1:return u=i.type,g=nl(u,i.pendingProps),P1(s,i,u,g,o);case 3:e:{if(je(i,i.stateNode.containerInfo),s===null)throw Error(r(387));u=i.pendingProps;var y=i.memoizedState;g=y.element,yp(s,i),fu(i,u,null,o);var w=i.memoizedState;if(u=w.cache,Fa(i,vn,u),u!==y.cache&&hp(i,[vn],o,!0),du(),u=w.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=U1(s,i,u,o);break e}else if(u!==g){g=ws(Error(r(424)),i),au(g),i=U1(s,i,u,o);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Vt=Cs(s.firstChild),$n=i,dt=!0,za=null,Ss=!0,o=Db(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Yo(),u===g){i=la(s,i,o);break e}Kn(s,i,u,o)}i=i.child}return i;case 26:return Td(s,i),s===null?(o=Jx(i.type,null,i.pendingProps,null))?i.memoizedState=o:dt||(o=i.type,s=i.pendingProps,u=Bd(Ae.current).createElement(o),u[Ft]=i,u[sn]=s,Yn(u,o,s),$t(u),i.stateNode=u):i.memoizedState=Jx(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return We(i),s===null&&dt&&(u=i.stateNode=Xx(i.type,i.pendingProps,Ae.current),$n=i,Ss=!0,g=Vt,ro(i.type)?(Ig=g,Vt=Cs(u.firstChild)):Vt=g),Kn(s,i,i.pendingProps.children,o),Td(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&dt&&((g=u=Vt)&&(u=OC(u,i.type,i.pendingProps,Ss),u!==null?(i.stateNode=u,$n=i,Vt=Cs(u.firstChild),Ss=!1,g=!0):g=!1),g||Ha(i)),We(i),g=i.type,y=i.pendingProps,w=s!==null?s.memoizedProps:null,u=y.children,Ag(g,y)?u=null:w!==null&&Ag(g,w)&&(i.flags|=32),i.memoizedState!==null&&(g=Tp(s,i,K2,null,null,o),Du._currentValue=g),Td(s,i),Kn(s,i,u,o),i.child;case 6:return s===null&&dt&&((s=o=Vt)&&(o=DC(o,i.pendingProps,Ss),o!==null?(i.stateNode=o,$n=i,Vt=null,s=!0):s=!1),s||Ha(i)),null;case 13:return V1(s,i,o);case 4:return je(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=el(i,null,u,o):Kn(s,i,u,o),i.child;case 11:return I1(s,i,i.type,i.pendingProps,o);case 7:return Kn(s,i,i.pendingProps,o),i.child;case 8:return Kn(s,i,i.pendingProps.children,o),i.child;case 12:return Kn(s,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Fa(i,i.type,u.value),Kn(s,i,u.children,o),i.child;case 9:return g=i.type._context,u=i.pendingProps.children,Xo(i),g=Gn(g),u=u(g),i.flags|=1,Kn(s,i,u,o),i.child;case 14:return j1(s,i,i.type,i.pendingProps,o);case 15:return O1(s,i,i.type,i.pendingProps,o);case 19:return B1(s,i,o);case 31:return tC(s,i,o);case 22:return D1(s,i,o,i.pendingProps);case 24:return Xo(i),u=Gn(vn),s===null?(g=mp(),g===null&&(g=It,y=dp(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=o),g=y),i.memoizedState={parent:u,cache:g},gp(i),Fa(i,vn,g)):((s.lanes&o)!==0&&(yp(s,i),fu(i,null,null,o),du()),g=s.memoizedState,y=i.memoizedState,g.parent!==u?(g={parent:u,cache:u},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),Fa(i,vn,u)):(u=y.cache,Fa(i,vn,u),u!==g.cache&&hp(i,[vn],o,!0))),Kn(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ca(s){s.flags|=4}function Zp(s,i,o,u,g){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(px())s.flags|=8192;else throw Jo=cd,pp}else s.flags&=-16777217}function H1(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!s_(i))if(px())s.flags|=8192;else throw Jo=cd,pp}function Sd(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?di():536870912,s.lanes|=i,Jl|=i)}function bu(s,i){if(!dt)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function qt(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(i)for(var g=s.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=u,s.childLanes=o,i}function rC(s,i,o){var u=i.pendingProps;switch(ap(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(i),null;case 1:return qt(i),null;case 3:return o=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ia(vn),ke(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(ql(i)?ca(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,lp())),qt(i),null;case 26:var g=i.type,y=i.memoizedState;return s===null?(ca(i),y!==null?(qt(i),H1(i,y)):(qt(i),Zp(i,g,null,u,o))):y?y!==s.memoizedState?(ca(i),qt(i),H1(i,y)):(qt(i),i.flags&=-16777217):(s=s.memoizedProps,s!==u&&ca(i),qt(i),Zp(i,g,s,u,o)),null;case 27:if(et(i),o=Ae.current,g=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&ca(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return qt(i),null}s=me.current,ql(i)?Eb(i):(s=Xx(g,u,o),i.stateNode=s,ca(i))}return qt(i),null;case 5:if(et(i),g=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&ca(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return qt(i),null}if(y=me.current,ql(i))Eb(i);else{var w=Bd(Ae.current);switch(y){case 1:y=w.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=w.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=w.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=w.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=w.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?w.createElement(g,{is:u.is}):w.createElement(g)}}y[Ft]=i,y[sn]=u;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)y.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=y;e:switch(Yn(y,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ca(i)}}return qt(i),Zp(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,o),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&ca(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=Ae.current,ql(i)){if(s=i.stateNode,o=i.memoizedProps,u=null,g=$n,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}s[Ft]=i,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Vx(s.nodeValue,o)),s||Ha(i,!0)}else s=Bd(s).createTextNode(u),s[Ft]=i,i.stateNode=s}return qt(i),null;case 31:if(o=i.memoizedState,s===null||s.memoizedState!==null){if(u=ql(i),o!==null){if(s===null){if(!u)throw Error(r(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Ft]=i}else Yo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),s=!1}else o=lp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return i.flags&256?(ns(i),i):(ns(i),null);if((i.flags&128)!==0)throw Error(r(558))}return qt(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=ql(i),u!==null&&u.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Ft]=i}else Yo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),g=!1}else g=lp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(ns(i),i):(ns(i),null)}return ns(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,s=s!==null&&s.memoizedState!==null,o&&(u=i.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)),o!==s&&o&&(i.child.flags|=8192),Sd(i,i.updateQueue),qt(i),null);case 4:return ke(),s===null&&xg(i.stateNode.containerInfo),qt(i),null;case 10:return ia(i.type),qt(i),null;case 19:if(W(fn),u=i.memoizedState,u===null)return qt(i),null;if(g=(i.flags&128)!==0,y=u.rendering,y===null)if(g)bu(u,!1);else{if(ln!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(y=fd(s),y!==null){for(i.flags|=128,bu(u,!1),s=y.updateQueue,i.updateQueue=s,Sd(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)yb(o,s),o=o.sibling;return de(fn,fn.current&1|2),dt&&ra(i,u.treeForkCount),i.child}s=s.sibling}u.tail!==null&&Ot()>jd&&(i.flags|=128,g=!0,bu(u,!1),i.lanes=4194304)}else{if(!g)if(s=fd(y),s!==null){if(i.flags|=128,g=!0,s=s.updateQueue,i.updateQueue=s,Sd(i,s),bu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!dt)return qt(i),null}else 2*Ot()-u.renderingStartTime>jd&&o!==536870912&&(i.flags|=128,g=!0,bu(u,!1),i.lanes=4194304);u.isBackwards?(y.sibling=i.child,i.child=y):(s=u.last,s!==null?s.sibling=y:i.child=y,u.last=y)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=Ot(),s.sibling=null,o=fn.current,de(fn,g?o&1|2:o&1),dt&&ra(i,u.treeForkCount),s):(qt(i),null);case 22:case 23:return ns(i),_p(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(qt(i),i.subtreeFlags&6&&(i.flags|=8192)):qt(i),o=i.updateQueue,o!==null&&Sd(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),s!==null&&W(Wo),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ia(vn),qt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function sC(s,i){switch(ap(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return ia(vn),ke(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return et(i),null;case 31:if(i.memoizedState!==null){if(ns(i),i.alternate===null)throw Error(r(340));Yo()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(ns(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Yo()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return W(fn),null;case 4:return ke(),null;case 10:return ia(i.type),null;case 22:case 23:return ns(i),_p(),s!==null&&W(Wo),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return ia(vn),null;case 25:return null;default:return null}}function F1(s,i){switch(ap(i),i.tag){case 3:ia(vn),ke();break;case 26:case 27:case 5:et(i);break;case 4:ke();break;case 31:i.memoizedState!==null&&ns(i);break;case 13:ns(i);break;case 19:W(fn);break;case 10:ia(i.type);break;case 22:case 23:ns(i),_p(),s!==null&&W(Wo);break;case 24:ia(vn)}}function xu(s,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&s)===s){u=void 0;var y=o.create,w=o.inst;u=y(),w.destroy=u}o=o.next}while(o!==g)}}catch(I){Tt(i,i.return,I)}}function Xa(s,i,o){try{var u=i.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&s)===s){var w=u.inst,I=w.destroy;if(I!==void 0){w.destroy=void 0,g=i;var H=o,J=I;try{J()}catch(ae){Tt(g,H,ae)}}}u=u.next}while(u!==y)}}catch(ae){Tt(i,i.return,ae)}}function $1(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{kb(i,o)}catch(u){Tt(s,s.return,u)}}}function G1(s,i,o){o.props=nl(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){Tt(s,i,u)}}function _u(s,i){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(g){Tt(s,i,g)}}function wi(s,i){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){Tt(s,i,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){Tt(s,i,g)}else o.current=null}function K1(s){var i=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){Tt(s,s.return,g)}}function Jp(s,i,o){try{var u=s.stateNode;SC(u,s.type,o,i),u[sn]=i}catch(g){Tt(s,s.return,g)}}function Y1(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ro(s.type)||s.tag===4}function eg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Y1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ro(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function tg(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(s),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=ir));else if(u!==4&&(u===27&&ro(s.type)&&(o=s.stateNode,i=null),s=s.child,s!==null))for(tg(s,i,o),s=s.sibling;s!==null;)tg(s,i,o),s=s.sibling}function Nd(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(u!==4&&(u===27&&ro(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(Nd(s,i,o),s=s.sibling;s!==null;)Nd(s,i,o),s=s.sibling}function Q1(s){var i=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);Yn(i,u,o),i[Ft]=s,i[sn]=o}catch(y){Tt(s,s.return,y)}}var ua=!1,_n=!1,ng=!1,X1=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function iC(s,i){if(s=s.containerInfo,wg=Yd,s=ob(s),Qm(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var w=0,I=-1,H=-1,J=0,ae=0,he=s,te=null;t:for(;;){for(var se;he!==o||g!==0&&he.nodeType!==3||(I=w+g),he!==y||u!==0&&he.nodeType!==3||(H=w+u),he.nodeType===3&&(w+=he.nodeValue.length),(se=he.firstChild)!==null;)te=he,he=se;for(;;){if(he===s)break t;if(te===o&&++J===g&&(I=w),te===y&&++ae===u&&(H=w),(se=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=se}o=I===-1||H===-1?null:{start:I,end:H}}else o=null}o=o||{start:0,end:0}}else o=null;for(Tg={focusedElem:s,selectionRange:o},Yd=!1,Dn=i;Dn!==null;)if(i=Dn,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Dn=s;else for(;Dn!==null;){switch(i=Dn,y=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)g=s[o],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,o=i,g=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var Ne=nl(o.type,g);s=u.getSnapshotBeforeUpdate(Ne,y),u.__reactInternalSnapshotBeforeUpdate=s}catch(Ve){Tt(o,o.return,Ve)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)Ng(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Ng(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Dn=s;break}Dn=i.return}}function W1(s,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:da(s,o),u&4&&xu(5,o);break;case 1:if(da(s,o),u&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(w){Tt(o,o.return,w)}else{var g=nl(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(g,i,s.__reactInternalSnapshotBeforeUpdate)}catch(w){Tt(o,o.return,w)}}u&64&&$1(o),u&512&&_u(o,o.return);break;case 3:if(da(s,o),u&64&&(s=o.updateQueue,s!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{kb(s,i)}catch(w){Tt(o,o.return,w)}}break;case 27:i===null&&u&4&&Q1(o);case 26:case 5:da(s,o),i===null&&u&4&&K1(o),u&512&&_u(o,o.return);break;case 12:da(s,o);break;case 31:da(s,o),u&4&&ex(s,o);break;case 13:da(s,o),u&4&&tx(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=mC.bind(null,o),LC(s,o))));break;case 22:if(u=o.memoizedState!==null||ua,!u){i=i!==null&&i.memoizedState!==null||_n,g=ua;var y=_n;ua=u,(_n=i)&&!y?fa(s,o,(o.subtreeFlags&8772)!==0):da(s,o),ua=g,_n=y}break;case 30:break;default:da(s,o)}}function Z1(s){var i=s.alternate;i!==null&&(s.alternate=null,Z1(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&fi(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Xt=null,Mr=!1;function ha(s,i,o){for(o=o.child;o!==null;)J1(s,i,o),o=o.sibling}function J1(s,i,o){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(gr,o)}catch{}switch(o.tag){case 26:_n||wi(o,i),ha(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:_n||wi(o,i);var u=Xt,g=Mr;ro(o.type)&&(Xt=o.stateNode,Mr=!1),ha(s,i,o),Iu(o.stateNode),Xt=u,Mr=g;break;case 5:_n||wi(o,i);case 6:if(u=Xt,g=Mr,Xt=null,ha(s,i,o),Xt=u,Mr=g,Xt!==null)if(Mr)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(o.stateNode)}catch(y){Tt(o,i,y)}else try{Xt.removeChild(o.stateNode)}catch(y){Tt(o,i,y)}break;case 18:Xt!==null&&(Mr?(s=Xt,$x(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),oc(s)):$x(Xt,o.stateNode));break;case 4:u=Xt,g=Mr,Xt=o.stateNode.containerInfo,Mr=!0,ha(s,i,o),Xt=u,Mr=g;break;case 0:case 11:case 14:case 15:Xa(2,o,i),_n||Xa(4,o,i),ha(s,i,o);break;case 1:_n||(wi(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&G1(o,i,u)),ha(s,i,o);break;case 21:ha(s,i,o);break;case 22:_n=(u=_n)||o.memoizedState!==null,ha(s,i,o),_n=u;break;default:ha(s,i,o)}}function ex(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{oc(s)}catch(o){Tt(i,i.return,o)}}}function tx(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{oc(s)}catch(o){Tt(i,i.return,o)}}function aC(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new X1),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new X1),i;default:throw Error(r(435,s.tag))}}function Cd(s,i){var o=aC(s);i.forEach(function(u){if(!o.has(u)){o.add(u);var g=pC.bind(null,s,u);u.then(g,g)}})}function Pr(s,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],y=s,w=i,I=w;e:for(;I!==null;){switch(I.tag){case 27:if(ro(I.type)){Xt=I.stateNode,Mr=!1;break e}break;case 5:Xt=I.stateNode,Mr=!1;break e;case 3:case 4:Xt=I.stateNode.containerInfo,Mr=!0;break e}I=I.return}if(Xt===null)throw Error(r(160));J1(y,w,g),Xt=null,Mr=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)nx(i,s),i=i.sibling}var Ws=null;function nx(s,i){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Pr(i,s),Ur(s),u&4&&(Xa(3,s,s.return),xu(3,s),Xa(5,s,s.return));break;case 1:Pr(i,s),Ur(s),u&512&&(_n||o===null||wi(o,o.return)),u&64&&ua&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=Ws;if(Pr(i,s),Ur(s),u&512&&(_n||o===null||wi(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[jr]||y[Ft]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),Yn(y,u,o),y[Ft]=s,$t(y),u=y;break e;case"link":var w=n_("link","href",g).get(u+(o.href||""));if(w){for(var I=0;I<w.length;I++)if(y=w[I],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(I,1);break t}}y=g.createElement(u),Yn(y,u,o),g.head.appendChild(y);break;case"meta":if(w=n_("meta","content",g).get(u+(o.content||""))){for(I=0;I<w.length;I++)if(y=w[I],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(I,1);break t}}y=g.createElement(u),Yn(y,u,o),g.head.appendChild(y);break;default:throw Error(r(468,u))}y[Ft]=s,$t(y),u=y}s.stateNode=u}else r_(g,s.type,s.stateNode);else s.stateNode=t_(g,u,s.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?r_(g,s.type,s.stateNode):t_(g,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Jp(s,s.memoizedProps,o.memoizedProps)}break;case 27:Pr(i,s),Ur(s),u&512&&(_n||o===null||wi(o,o.return)),o!==null&&u&4&&Jp(s,s.memoizedProps,o.memoizedProps);break;case 5:if(Pr(i,s),Ur(s),u&512&&(_n||o===null||wi(o,o.return)),s.flags&32){g=s.stateNode;try{Kt(g,"")}catch(Ne){Tt(s,s.return,Ne)}}u&4&&s.stateNode!=null&&(g=s.memoizedProps,Jp(s,g,o!==null?o.memoizedProps:g)),u&1024&&(ng=!0);break;case 6:if(Pr(i,s),Ur(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(Ne){Tt(s,s.return,Ne)}}break;case 3:if(Fd=null,g=Ws,Ws=zd(i.containerInfo),Pr(i,s),Ws=g,Ur(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{oc(i.containerInfo)}catch(Ne){Tt(s,s.return,Ne)}ng&&(ng=!1,rx(s));break;case 4:u=Ws,Ws=zd(s.stateNode.containerInfo),Pr(i,s),Ur(s),Ws=u;break;case 12:Pr(i,s),Ur(s);break;case 31:Pr(i,s),Ur(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Cd(s,u)));break;case 13:Pr(i,s),Ur(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Id=Ot()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Cd(s,u)));break;case 22:g=s.memoizedState!==null;var H=o!==null&&o.memoizedState!==null,J=ua,ae=_n;if(ua=J||g,_n=ae||H,Pr(i,s),_n=ae,ua=J,Ur(s),u&8192)e:for(i=s.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(o===null||H||ua||_n||rl(s)),o=null,i=s;;){if(i.tag===5||i.tag===26){if(o===null){H=o=i;try{if(y=H.stateNode,g)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{I=H.stateNode;var he=H.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;I.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ne){Tt(H,H.return,Ne)}}}else if(i.tag===6){if(o===null){H=i;try{H.stateNode.nodeValue=g?"":H.memoizedProps}catch(Ne){Tt(H,H.return,Ne)}}}else if(i.tag===18){if(o===null){H=i;try{var se=H.stateNode;g?Gx(se,!0):Gx(H.stateNode,!1)}catch(Ne){Tt(H,H.return,Ne)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Cd(s,o))));break;case 19:Pr(i,s),Ur(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Cd(s,u)));break;case 30:break;case 21:break;default:Pr(i,s),Ur(s)}}function Ur(s){var i=s.flags;if(i&2){try{for(var o,u=s.return;u!==null;){if(Y1(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var g=o.stateNode,y=eg(s);Nd(s,y,g);break;case 5:var w=o.stateNode;o.flags&32&&(Kt(w,""),o.flags&=-33);var I=eg(s);Nd(s,I,w);break;case 3:case 4:var H=o.stateNode.containerInfo,J=eg(s);tg(s,J,H);break;default:throw Error(r(161))}}catch(ae){Tt(s,s.return,ae)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function rx(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;rx(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function da(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)W1(s,i.alternate,i),i=i.sibling}function rl(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Xa(4,i,i.return),rl(i);break;case 1:wi(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&G1(i,i.return,o),rl(i);break;case 27:Iu(i.stateNode);case 26:case 5:wi(i,i.return),rl(i);break;case 22:i.memoizedState===null&&rl(i);break;case 30:rl(i);break;default:rl(i)}s=s.sibling}}function fa(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,g=s,y=i,w=y.flags;switch(y.tag){case 0:case 11:case 15:fa(g,y,o),xu(4,y);break;case 1:if(fa(g,y,o),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(J){Tt(u,u.return,J)}if(u=y,g=u.updateQueue,g!==null){var I=u.stateNode;try{var H=g.shared.hiddenCallbacks;if(H!==null)for(g.shared.hiddenCallbacks=null,g=0;g<H.length;g++)Lb(H[g],I)}catch(J){Tt(u,u.return,J)}}o&&w&64&&$1(y),_u(y,y.return);break;case 27:Q1(y);case 26:case 5:fa(g,y,o),o&&u===null&&w&4&&K1(y),_u(y,y.return);break;case 12:fa(g,y,o);break;case 31:fa(g,y,o),o&&w&4&&ex(g,y);break;case 13:fa(g,y,o),o&&w&4&&tx(g,y);break;case 22:y.memoizedState===null&&fa(g,y,o),_u(y,y.return);break;case 30:break;default:fa(g,y,o)}i=i.sibling}}function rg(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&ou(o))}function sg(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&ou(s))}function Zs(s,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)sx(s,i,o,u),i=i.sibling}function sx(s,i,o,u){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Zs(s,i,o,u),g&2048&&xu(9,i);break;case 1:Zs(s,i,o,u);break;case 3:Zs(s,i,o,u),g&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&ou(s)));break;case 12:if(g&2048){Zs(s,i,o,u),s=i.stateNode;try{var y=i.memoizedProps,w=y.id,I=y.onPostCommit;typeof I=="function"&&I(w,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(H){Tt(i,i.return,H)}}else Zs(s,i,o,u);break;case 31:Zs(s,i,o,u);break;case 13:Zs(s,i,o,u);break;case 23:break;case 22:y=i.stateNode,w=i.alternate,i.memoizedState!==null?y._visibility&2?Zs(s,i,o,u):Eu(s,i):y._visibility&2?Zs(s,i,o,u):(y._visibility|=2,Xl(s,i,o,u,(i.subtreeFlags&10256)!==0||!1)),g&2048&&rg(w,i);break;case 24:Zs(s,i,o,u),g&2048&&sg(i.alternate,i);break;default:Zs(s,i,o,u)}}function Xl(s,i,o,u,g){for(g=g&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=s,w=i,I=o,H=u,J=w.flags;switch(w.tag){case 0:case 11:case 15:Xl(y,w,I,H,g),xu(8,w);break;case 23:break;case 22:var ae=w.stateNode;w.memoizedState!==null?ae._visibility&2?Xl(y,w,I,H,g):Eu(y,w):(ae._visibility|=2,Xl(y,w,I,H,g)),g&&J&2048&&rg(w.alternate,w);break;case 24:Xl(y,w,I,H,g),g&&J&2048&&sg(w.alternate,w);break;default:Xl(y,w,I,H,g)}i=i.sibling}}function Eu(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,u=i,g=u.flags;switch(u.tag){case 22:Eu(o,u),g&2048&&rg(u.alternate,u);break;case 24:Eu(o,u),g&2048&&sg(u.alternate,u);break;default:Eu(o,u)}i=i.sibling}}var wu=8192;function Wl(s,i,o){if(s.subtreeFlags&wu)for(s=s.child;s!==null;)ix(s,i,o),s=s.sibling}function ix(s,i,o){switch(s.tag){case 26:Wl(s,i,o),s.flags&wu&&s.memoizedState!==null&&GC(o,Ws,s.memoizedState,s.memoizedProps);break;case 5:Wl(s,i,o);break;case 3:case 4:var u=Ws;Ws=zd(s.stateNode.containerInfo),Wl(s,i,o),Ws=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=wu,wu=16777216,Wl(s,i,o),wu=u):Wl(s,i,o));break;default:Wl(s,i,o)}}function ax(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function Tu(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Dn=u,lx(u,s)}ax(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ox(s),s=s.sibling}function ox(s){switch(s.tag){case 0:case 11:case 15:Tu(s),s.flags&2048&&Xa(9,s,s.return);break;case 3:Tu(s);break;case 12:Tu(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,Rd(s)):Tu(s);break;default:Tu(s)}}function Rd(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Dn=u,lx(u,s)}ax(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Xa(8,i,i.return),Rd(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Rd(i));break;default:Rd(i)}s=s.sibling}}function lx(s,i){for(;Dn!==null;){var o=Dn;switch(o.tag){case 0:case 11:case 15:Xa(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ou(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Dn=u;else e:for(o=s;Dn!==null;){u=Dn;var g=u.sibling,y=u.return;if(Z1(u),u===o){Dn=null;break e}if(g!==null){g.return=y,Dn=g;break e}Dn=y}}}var oC={getCacheForType:function(s){var i=Gn(vn),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o},cacheSignal:function(){return Gn(vn).controller.signal}},lC=typeof WeakMap=="function"?WeakMap:Map,xt=0,It=null,nt=null,it=0,wt=0,rs=null,Wa=!1,Zl=!1,ig=!1,ma=0,ln=0,Za=0,sl=0,ag=0,ss=0,Jl=0,Au=null,Vr=null,og=!1,Id=0,cx=0,jd=1/0,Od=null,Ja=null,Cn=0,eo=null,ec=null,pa=0,lg=0,cg=null,ux=null,Su=0,ug=null;function is(){return(xt&2)!==0&&it!==0?it&-it:F.T!==null?gg():rn()}function hx(){if(ss===0)if((it&536870912)===0||dt){var s=$r;$r<<=1,($r&3932160)===0&&($r=262144),ss=s}else ss=536870912;return s=ts.current,s!==null&&(s.flags|=32),ss}function qr(s,i,o){(s===It&&(wt===2||wt===9)||s.cancelPendingCommit!==null)&&(tc(s,0),to(s,it,ss,!1)),ds(s,o),((xt&2)===0||s!==It)&&(s===It&&((xt&2)===0&&(sl|=o),ln===4&&to(s,it,ss,!1)),Ti(s))}function dx(s,i,o){if((xt&6)!==0)throw Error(r(327));var u=!o&&(i&127)===0&&(i&s.expiredLanes)===0||Un(s,i),g=u?hC(s,i):dg(s,i,!0),y=u;do{if(g===0){Zl&&!u&&to(s,i,0,!1);break}else{if(o=s.current.alternate,y&&!cC(o)){g=dg(s,i,!1),y=!1;continue}if(g===2){if(y=i,s.errorRecoveryDisabledLanes&y)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var I=s;g=Au;var H=I.current.memoizedState.isDehydrated;if(H&&(tc(I,w).flags|=256),w=dg(I,w,!1),w!==2){if(ig&&!H){I.errorRecoveryDisabledLanes|=y,sl|=y,g=4;break e}y=Vr,Vr=g,y!==null&&(Vr===null?Vr=y:Vr.push.apply(Vr,y))}g=w}if(y=!1,g!==2)continue}}if(g===1){tc(s,0),to(s,i,0,!0);break}e:{switch(u=s,y=g,y){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:to(u,i,ss,!Wa);break e;case 2:Vr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(g=Id+300-Ot(),10<g)){if(to(u,i,ss,!Wa),In(u,0,!0)!==0)break e;pa=i,u.timeoutHandle=Hx(fx.bind(null,u,o,Vr,Od,og,i,ss,sl,Jl,Wa,y,"Throttled",-0,0),g);break e}fx(u,o,Vr,Od,og,i,ss,sl,Jl,Wa,y,null,-0,0)}}break}while(!0);Ti(s)}function fx(s,i,o,u,g,y,w,I,H,J,ae,he,te,se){if(s.timeoutHandle=-1,he=i.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ir},ix(i,y,he);var Ne=(y&62914560)===y?Id-Ot():(y&4194048)===y?cx-Ot():0;if(Ne=KC(he,Ne),Ne!==null){pa=y,s.cancelPendingCommit=Ne(_x.bind(null,s,i,y,o,u,g,w,I,H,ae,he,null,te,se)),to(s,y,w,!J);return}}_x(s,i,y,o,u,g,w,I,H)}function cC(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],y=g.getSnapshot;g=g.value;try{if(!Jr(y(),g))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function to(s,i,o,u){i&=~ag,i&=~sl,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var g=i;0<g;){var y=31-Dt(g),w=1<<y;u[y]=-1,g&=~w}o!==0&&zs(s,o,i)}function Dd(){return(xt&6)===0?(Nu(0),!1):!0}function hg(){if(nt!==null){if(wt===0)var s=nt.return;else s=nt,sa=Qo=null,Np(s),$l=null,cu=0,s=nt;for(;s!==null;)F1(s.alternate,s),s=s.return;nt=null}}function tc(s,i){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,RC(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),pa=0,hg(),It=s,nt=o=na(s.current,null),it=i,wt=0,rs=null,Wa=!1,Zl=Un(s,i),ig=!1,Jl=ss=ag=sl=Za=ln=0,Vr=Au=null,og=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var g=31-Dt(u),y=1<<g;i|=s[g],u&=~y}return ma=i,ed(),o}function mx(s,i){Ye=null,F.H=yu,i===Fl||i===ld?(i=Ib(),wt=3):i===pp?(i=Ib(),wt=4):wt=i===Hp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,rs=i,nt===null&&(ln=1,Ed(s,ws(i,s.current)))}function px(){var s=ts.current;return s===null?!0:(it&4194048)===it?Ns===null:(it&62914560)===it||(it&536870912)!==0?s===Ns:!1}function gx(){var s=F.H;return F.H=yu,s===null?yu:s}function yx(){var s=F.A;return F.A=oC,s}function Ld(){ln=4,Wa||(it&4194048)!==it&&ts.current!==null||(Zl=!0),(Za&134217727)===0&&(sl&134217727)===0||It===null||to(It,it,ss,!1)}function dg(s,i,o){var u=xt;xt|=2;var g=gx(),y=yx();(It!==s||it!==i)&&(Od=null,tc(s,i)),i=!1;var w=ln;e:do try{if(wt!==0&&nt!==null){var I=nt,H=rs;switch(wt){case 8:hg(),w=6;break e;case 3:case 2:case 9:case 6:ts.current===null&&(i=!0);var J=wt;if(wt=0,rs=null,nc(s,I,H,J),o&&Zl){w=0;break e}break;default:J=wt,wt=0,rs=null,nc(s,I,H,J)}}uC(),w=ln;break}catch(ae){mx(s,ae)}while(!0);return i&&s.shellSuspendCounter++,sa=Qo=null,xt=u,F.H=g,F.A=y,nt===null&&(It=null,it=0,ed()),w}function uC(){for(;nt!==null;)vx(nt)}function hC(s,i){var o=xt;xt|=2;var u=gx(),g=yx();It!==s||it!==i?(Od=null,jd=Ot()+500,tc(s,i)):Zl=Un(s,i);e:do try{if(wt!==0&&nt!==null){i=nt;var y=rs;t:switch(wt){case 1:wt=0,rs=null,nc(s,i,y,1);break;case 2:case 9:if(Cb(y)){wt=0,rs=null,bx(i);break}i=function(){wt!==2&&wt!==9||It!==s||(wt=7),Ti(s)},y.then(i,i);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:Cb(y)?(wt=0,rs=null,bx(i)):(wt=0,rs=null,nc(s,i,y,7));break;case 5:var w=null;switch(nt.tag){case 26:w=nt.memoizedState;case 5:case 27:var I=nt;if(w?s_(w):I.stateNode.complete){wt=0,rs=null;var H=I.sibling;if(H!==null)nt=H;else{var J=I.return;J!==null?(nt=J,kd(J)):nt=null}break t}}wt=0,rs=null,nc(s,i,y,5);break;case 6:wt=0,rs=null,nc(s,i,y,6);break;case 8:hg(),ln=6;break e;default:throw Error(r(462))}}dC();break}catch(ae){mx(s,ae)}while(!0);return sa=Qo=null,F.H=u,F.A=g,xt=o,nt!==null?0:(It=null,it=0,ed(),ln)}function dC(){for(;nt!==null&&!ka();)vx(nt)}function vx(s){var i=z1(s.alternate,s,ma);s.memoizedProps=s.pendingProps,i===null?kd(s):nt=i}function bx(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=M1(o,i,i.pendingProps,i.type,void 0,it);break;case 11:i=M1(o,i,i.pendingProps,i.type.render,i.ref,it);break;case 5:Np(i);default:F1(o,i),i=nt=yb(i,ma),i=z1(o,i,ma)}s.memoizedProps=s.pendingProps,i===null?kd(s):nt=i}function nc(s,i,o,u){sa=Qo=null,Np(i),$l=null,cu=0;var g=i.return;try{if(eC(s,g,i,o,it)){ln=1,Ed(s,ws(o,s.current)),nt=null;return}}catch(y){if(g!==null)throw nt=g,y;ln=1,Ed(s,ws(o,s.current)),nt=null;return}i.flags&32768?(dt||u===1?s=!0:Zl||(it&536870912)!==0?s=!1:(Wa=s=!0,(u===2||u===9||u===3||u===6)&&(u=ts.current,u!==null&&u.tag===13&&(u.flags|=16384))),xx(i,s)):kd(i)}function kd(s){var i=s;do{if((i.flags&32768)!==0){xx(i,Wa);return}s=i.return;var o=rC(i.alternate,i,ma);if(o!==null){nt=o;return}if(i=i.sibling,i!==null){nt=i;return}nt=i=s}while(i!==null);ln===0&&(ln=5)}function xx(s,i){do{var o=sC(s.alternate,s);if(o!==null){o.flags&=32767,nt=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){nt=s;return}nt=s=o}while(s!==null);ln=6,nt=null}function _x(s,i,o,u,g,y,w,I,H){s.cancelPendingCommit=null;do Md();while(Cn!==0);if((xt&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(y=i.lanes|i.childLanes,y|=ep,Gr(s,o,y,w,I,H),s===It&&(nt=It=null,it=0),ec=i,eo=s,pa=o,lg=y,cg=g,ux=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,gC(pr,function(){return Sx(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=F.T,F.T=null,g=ee.p,ee.p=2,w=xt,xt|=4;try{iC(s,i,o)}finally{xt=w,ee.p=g,F.T=u}}Cn=1,Ex(),wx(),Tx()}}function Ex(){if(Cn===1){Cn=0;var s=eo,i=ec,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=F.T,F.T=null;var u=ee.p;ee.p=2;var g=xt;xt|=4;try{nx(i,s);var y=Tg,w=ob(s.containerInfo),I=y.focusedElem,H=y.selectionRange;if(w!==I&&I&&I.ownerDocument&&ab(I.ownerDocument.documentElement,I)){if(H!==null&&Qm(I)){var J=H.start,ae=H.end;if(ae===void 0&&(ae=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(ae,I.value.length);else{var he=I.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var se=te.getSelection(),Ne=I.textContent.length,Ve=Math.min(H.start,Ne),Ct=H.end===void 0?Ve:Math.min(H.end,Ne);!se.extend&&Ve>Ct&&(w=Ct,Ct=Ve,Ve=w);var K=ib(I,Ve),G=ib(I,Ct);if(K&&G&&(se.rangeCount!==1||se.anchorNode!==K.node||se.anchorOffset!==K.offset||se.focusNode!==G.node||se.focusOffset!==G.offset)){var Z=he.createRange();Z.setStart(K.node,K.offset),se.removeAllRanges(),Ve>Ct?(se.addRange(Z),se.extend(G.node,G.offset)):(Z.setEnd(G.node,G.offset),se.addRange(Z))}}}}for(he=[],se=I;se=se.parentNode;)se.nodeType===1&&he.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<he.length;I++){var oe=he[I];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Yd=!!wg,Tg=wg=null}finally{xt=g,ee.p=u,F.T=o}}s.current=i,Cn=2}}function wx(){if(Cn===2){Cn=0;var s=eo,i=ec,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=F.T,F.T=null;var u=ee.p;ee.p=2;var g=xt;xt|=4;try{W1(s,i.alternate,i)}finally{xt=g,ee.p=u,F.T=o}}Cn=3}}function Tx(){if(Cn===4||Cn===3){Cn=0,Bi();var s=eo,i=ec,o=pa,u=ux;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Cn=5:(Cn=0,ec=eo=null,Ax(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Ja=null),yr(o),i=i.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(gr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=F.T,g=ee.p,ee.p=2,F.T=null;try{for(var y=s.onRecoverableError,w=0;w<u.length;w++){var I=u[w];y(I.value,{componentStack:I.stack})}}finally{F.T=i,ee.p=g}}(pa&3)!==0&&Md(),Ti(s),g=s.pendingLanes,(o&261930)!==0&&(g&42)!==0?s===ug?Su++:(Su=0,ug=s):Su=0,Nu(0)}}function Ax(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,ou(i)))}function Md(){return Ex(),wx(),Tx(),Sx()}function Sx(){if(Cn!==5)return!1;var s=eo,i=lg;lg=0;var o=yr(pa),u=F.T,g=ee.p;try{ee.p=32>o?32:o,F.T=null,o=cg,cg=null;var y=eo,w=pa;if(Cn=0,ec=eo=null,pa=0,(xt&6)!==0)throw Error(r(331));var I=xt;if(xt|=4,ox(y.current),sx(y,y.current,w,o),xt=I,Nu(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(gr,y)}catch{}return!0}finally{ee.p=g,F.T=u,Ax(s,i)}}function Nx(s,i,o){i=ws(o,i),i=zp(s.stateNode,i,2),s=Ka(s,i,2),s!==null&&(ds(s,2),Ti(s))}function Tt(s,i,o){if(s.tag===3)Nx(s,s,o);else for(;i!==null;){if(i.tag===3){Nx(i,s,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ja===null||!Ja.has(u))){s=ws(o,s),o=C1(2),u=Ka(i,o,2),u!==null&&(R1(o,u,i,s),ds(u,2),Ti(u));break}}i=i.return}}function fg(s,i,o){var u=s.pingCache;if(u===null){u=s.pingCache=new lC;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(o)||(ig=!0,g.add(o),s=fC.bind(null,s,i,o),i.then(s,s))}function fC(s,i,o){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,It===s&&(it&o)===o&&(ln===4||ln===3&&(it&62914560)===it&&300>Ot()-Id?(xt&2)===0&&tc(s,0):ag|=o,Jl===it&&(Jl=0)),Ti(s)}function Cx(s,i){i===0&&(i=di()),s=Go(s,i),s!==null&&(ds(s,i),Ti(s))}function mC(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),Cx(s,o)}function pC(s,i){var o=0;switch(s.tag){case 31:case 13:var u=s.stateNode,g=s.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),Cx(s,o)}function gC(s,i){return jt(s,i)}var Pd=null,rc=null,mg=!1,Ud=!1,pg=!1,no=0;function Ti(s){s!==rc&&s.next===null&&(rc===null?Pd=rc=s:rc=rc.next=s),Ud=!0,mg||(mg=!0,vC())}function Nu(s,i){if(!pg&&Ud){pg=!0;do for(var o=!1,u=Pd;u!==null;){if(s!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var w=u.suspendedLanes,I=u.pingedLanes;y=(1<<31-Dt(42|s)+1)-1,y&=g&~(w&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,Ox(u,y))}else y=it,y=In(u,u===It?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Un(u,y)||(o=!0,Ox(u,y));u=u.next}while(o);pg=!1}}function yC(){Rx()}function Rx(){Ud=mg=!1;var s=0;no!==0&&CC()&&(s=no);for(var i=Ot(),o=null,u=Pd;u!==null;){var g=u.next,y=Ix(u,i);y===0?(u.next=null,o===null?Pd=g:o.next=g,g===null&&(rc=o)):(o=u,(s!==0||(y&3)!==0)&&(Ud=!0)),u=g}Cn!==0&&Cn!==5||Nu(s),no!==0&&(no=0)}function Ix(s,i){for(var o=s.suspendedLanes,u=s.pingedLanes,g=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var w=31-Dt(y),I=1<<w,H=g[w];H===-1?((I&o)===0||(I&u)!==0)&&(g[w]=Gi(I,i)):H<=i&&(s.expiredLanes|=I),y&=~I}if(i=It,o=it,o=In(s,s===i?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===i&&(wt===2||wt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Nr(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Un(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(u!==null&&Nr(u),yr(o)){case 2:case 8:o=Fr;break;case 32:o=pr;break;case 268435456:o=Mn;break;default:o=pr}return u=jx.bind(null,s),o=jt(o,u),s.callbackPriority=i,s.callbackNode=o,i}return u!==null&&u!==null&&Nr(u),s.callbackPriority=2,s.callbackNode=null,2}function jx(s,i){if(Cn!==0&&Cn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Md()&&s.callbackNode!==o)return null;var u=it;return u=In(s,s===It?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(dx(s,u,i),Ix(s,Ot()),s.callbackNode!=null&&s.callbackNode===o?jx.bind(null,s):null)}function Ox(s,i){if(Md())return null;dx(s,i,!0)}function vC(){IC(function(){(xt&6)!==0?jt(zi,yC):Rx()})}function gg(){if(no===0){var s=zl;s===0&&(s=Pn,Pn<<=1,(Pn&261888)===0&&(Pn=256)),no=s}return no}function Dx(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:vi(""+s)}function Lx(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function bC(s,i,o,u,g){if(i==="submit"&&o&&o.stateNode===g){var y=Dx((g[sn]||null).action),w=u.submitter;w&&(i=(i=w[sn]||null)?Dx(i.formAction):w.getAttribute("formAction"),i!==null&&(y=i,w=null));var I=new Se("action","action",null,u,g);s.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(no!==0){var H=w?Lx(g,w):new FormData(g);Mp(o,{pending:!0,data:H,method:g.method,action:y},null,H)}}else typeof y=="function"&&(I.preventDefault(),H=w?Lx(g,w):new FormData(g),Mp(o,{pending:!0,data:H,method:g.method,action:y},y,H))},currentTarget:g}]})}}for(var yg=0;yg<Jm.length;yg++){var vg=Jm[yg],xC=vg.toLowerCase(),_C=vg[0].toUpperCase()+vg.slice(1);Xs(xC,"on"+_C)}Xs(ub,"onAnimationEnd"),Xs(hb,"onAnimationIteration"),Xs(fb,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(P2,"onTransitionRun"),Xs(U2,"onTransitionStart"),Xs(V2,"onTransitionCancel"),Xs(mb,"onTransitionEnd"),qn("onMouseEnter",["mouseout","mouseover"]),qn("onMouseLeave",["mouseout","mouseover"]),qn("onPointerEnter",["pointerout","pointerover"]),qn("onPointerLeave",["pointerout","pointerover"]),xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cu));function kx(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],g=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var w=u.length-1;0<=w;w--){var I=u[w],H=I.instance,J=I.currentTarget;if(I=I.listener,H!==y&&g.isPropagationStopped())break e;y=I,g.currentTarget=J;try{y(g)}catch(ae){Jh(ae)}g.currentTarget=null,y=H}else for(w=0;w<u.length;w++){if(I=u[w],H=I.instance,J=I.currentTarget,I=I.listener,H!==y&&g.isPropagationStopped())break e;y=I,g.currentTarget=J;try{y(g)}catch(ae){Jh(ae)}g.currentTarget=null,y=H}}}}function rt(s,i){var o=i[Jt];o===void 0&&(o=i[Jt]=new Set);var u=s+"__bubble";o.has(u)||(Mx(i,s,2,!1),o.add(u))}function bg(s,i,o){var u=0;i&&(u|=4),Mx(o,s,u,i)}var Vd="_reactListening"+Math.random().toString(36).slice(2);function xg(s){if(!s[Vd]){s[Vd]=!0,Qi.forEach(function(o){o!=="selectionchange"&&(EC.has(o)||bg(o,!1,s),bg(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Vd]||(i[Vd]=!0,bg("selectionchange",!1,i))}}function Mx(s,i,o,u){switch(h_(i)){case 2:var g=XC;break;case 8:g=WC;break;default:g=kg}o=g.bind(null,i,o,s),g=void 0,!xs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?s.addEventListener(i,o,{capture:!0,passive:g}):s.addEventListener(i,o,!0):g!==void 0?s.addEventListener(i,o,{passive:g}):s.addEventListener(i,o,!1)}function _g(s,i,o,u,g){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var I=u.stateNode.containerInfo;if(I===g)break;if(w===4)for(w=u.return;w!==null;){var H=w.tag;if((H===3||H===4)&&w.stateNode.containerInfo===g)return;w=w.return}for(;I!==null;){if(w=Mt(I),w===null)return;if(H=w.tag,H===5||H===6||H===26||H===27){u=y=w;continue e}I=I.parentNode}}u=u.return}bs(function(){var J=y,ae=zn(o),he=[];e:{var te=pb.get(s);if(te!==void 0){var se=Se,Ne=s;switch(s){case"keypress":if(E(o)===0)break e;case"keydown":case"keyup":se=Xh;break;case"focusin":Ne="focus",se=Fn;break;case"focusout":Ne="blur",se=Fn;break;case"beforeblur":case"afterblur":se=Fn;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Ut;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=x;break;case ub:case hb:case fb:se=zo;break;case mb:se=D;break;case"scroll":case"scrollend":se=Je;break;case"wheel":se=re;break;case"copy":case"cut":case"paste":se=ea;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=ta;break;case"toggle":case"beforetoggle":se=Ke}var Ve=(i&4)!==0,Ct=!Ve&&(s==="scroll"||s==="scrollend"),K=Ve?te!==null?te+"Capture":null:te;Ve=[];for(var G=J,Z;G!==null;){var oe=G;if(Z=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Z===null||K===null||(oe=ar(G,K),oe!=null&&Ve.push(Ru(G,oe,Z))),Ct)break;G=G.return}0<Ve.length&&(te=new se(te,Ne,null,o,ae),he.push({event:te,listeners:Ve}))}}if((i&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",se=s==="mouseout"||s==="pointerout",te&&o!==un&&(Ne=o.relatedTarget||o.fromElement)&&(Mt(Ne)||Ne[Ir]))break e;if((se||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,se?(Ne=o.relatedTarget||o.toElement,se=J,Ne=Ne?Mt(Ne):null,Ne!==null&&(Ct=l(Ne),Ve=Ne.tag,Ne!==Ct||Ve!==5&&Ve!==27&&Ve!==6)&&(Ne=null)):(se=null,Ne=J),se!==Ne)){if(Ve=Ut,oe="onMouseLeave",K="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Ve=ta,oe="onPointerLeave",K="onPointerEnter",G="pointer"),Ct=se==null?te:Vn(se),Z=Ne==null?te:Vn(Ne),te=new Ve(oe,G+"leave",se,o,ae),te.target=Ct,te.relatedTarget=Z,oe=null,Mt(ae)===J&&(Ve=new Ve(K,G+"enter",Ne,o,ae),Ve.target=Z,Ve.relatedTarget=Ct,oe=Ve),Ct=oe,se&&Ne)t:{for(Ve=wC,K=se,G=Ne,Z=0,oe=K;oe;oe=Ve(oe))Z++;oe=0;for(var Me=G;Me;Me=Ve(Me))oe++;for(;0<Z-oe;)K=Ve(K),Z--;for(;0<oe-Z;)G=Ve(G),oe--;for(;Z--;){if(K===G||G!==null&&K===G.alternate){Ve=K;break t}K=Ve(K),G=Ve(G)}Ve=null}else Ve=null;se!==null&&Px(he,te,se,Ve,!1),Ne!==null&&Ct!==null&&Px(he,Ct,Ne,Ve,!0)}}e:{if(te=J?Vn(J):window,se=te.nodeName&&te.nodeName.toLowerCase(),se==="select"||se==="input"&&te.type==="file")var pt=Jv;else if(Wv(te))if(eb)pt=L2;else{pt=O2;var Re=j2}else se=te.nodeName,!se||se.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&yi(J.elementType)&&(pt=Jv):pt=D2;if(pt&&(pt=pt(s,J))){Zv(he,pt,o,ae);break e}Re&&Re(s,te,J),s==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&Wi(te,"number",te.value)}switch(Re=J?Vn(J):window,s){case"focusin":(Wv(Re)||Re.contentEditable==="true")&&(Ll=Re,Xm=J,su=null);break;case"focusout":su=Xm=Ll=null;break;case"mousedown":Wm=!0;break;case"contextmenu":case"mouseup":case"dragend":Wm=!1,lb(he,o,ae);break;case"selectionchange":if(M2)break;case"keydown":case"keyup":lb(he,o,ae)}var Xe;if(bt)e:{switch(s){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Dl?Ho(s,o)&&(at="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(at="onCompositionStart");at&&(xi&&o.locale!=="ko"&&(Dl||at!=="onCompositionStart"?at==="onCompositionEnd"&&Dl&&(Xe=Ji()):(_r=ae,$s="value"in _r?_r.value:_r.textContent,Dl=!0)),Re=qd(J,at),0<Re.length&&(at=new bi(at,s,null,o,ae),he.push({event:at,listeners:Re}),Xe?at.data=Xe:(Xe=Ol(o),Xe!==null&&(at.data=Xe)))),(Xe=_s?N2(s,o):C2(s,o))&&(at=qd(J,"onBeforeInput"),0<at.length&&(Re=new bi("onBeforeInput","beforeinput",null,o,ae),he.push({event:Re,listeners:at}),Re.data=Xe)),bC(he,s,J,o,ae)}kx(he,i)})}function Ru(s,i,o){return{instance:s,listener:i,currentTarget:o}}function qd(s,i){for(var o=i+"Capture",u=[];s!==null;){var g=s,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=ar(s,o),g!=null&&u.unshift(Ru(s,g,y)),g=ar(s,i),g!=null&&u.push(Ru(s,g,y))),s.tag===3)return u;s=s.return}return[]}function wC(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Px(s,i,o,u,g){for(var y=i._reactName,w=[];o!==null&&o!==u;){var I=o,H=I.alternate,J=I.stateNode;if(I=I.tag,H!==null&&H===u)break;I!==5&&I!==26&&I!==27||J===null||(H=J,g?(J=ar(o,y),J!=null&&w.unshift(Ru(o,J,H))):g||(J=ar(o,y),J!=null&&w.push(Ru(o,J,H)))),o=o.return}w.length!==0&&s.push({event:i,listeners:w})}var TC=/\r\n?/g,AC=/\u0000|\uFFFD/g;function Ux(s){return(typeof s=="string"?s:""+s).replace(TC,`
`).replace(AC,"")}function Vx(s,i){return i=Ux(i),Ux(s)===i}function Nt(s,i,o,u,g,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Kt(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Kt(s,""+u);break;case"className":Bn(s,"class",u);break;case"tabIndex":Bn(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Bn(s,o,u);break;case"style":sr(s,u,y);break;case"data":if(i!=="object"){Bn(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=vi(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&Nt(s,i,"name",g.name,g,null),Nt(s,i,"formEncType",g.formEncType,g,null),Nt(s,i,"formMethod",g.formMethod,g,null),Nt(s,i,"formTarget",g.formTarget,g,null)):(Nt(s,i,"encType",g.encType,g,null),Nt(s,i,"method",g.method,g,null),Nt(s,i,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=vi(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=ir);break;case"onScroll":u!=null&&rt("scroll",s);break;case"onScrollEnd":u!=null&&rt("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=vi(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":rt("beforetoggle",s),rt("toggle",s),mi(s,"popover",u);break;case"xlinkActuate":Gt(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Gt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Gt(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Gt(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Gt(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Gt(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":mi(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Va.get(o)||o,mi(s,o,u))}}function Eg(s,i,o,u,g,y){switch(o){case"style":sr(s,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof u=="string"?Kt(s,u):(typeof u=="number"||typeof u=="bigint")&&Kt(s,""+u);break;case"onScroll":u!=null&&rt("scroll",s);break;case"onScrollEnd":u!=null&&rt("scrollend",s);break;case"onClick":u!=null&&(s.onclick=ir);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ms.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),i=o.slice(2,g?o.length-7:void 0),y=s[sn]||null,y=y!=null?y[o]:null,typeof y=="function"&&s.removeEventListener(i,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,u,g);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):mi(s,o,u)}}}function Yn(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",s),rt("load",s);var u=!1,g=!1,y;for(y in o)if(o.hasOwnProperty(y)){var w=o[y];if(w!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Nt(s,i,y,w,o,null)}}g&&Nt(s,i,"srcSet",o.srcSet,o,null),u&&Nt(s,i,"src",o.src,o,null);return;case"input":rt("invalid",s);var I=y=w=g=null,H=null,J=null;for(u in o)if(o.hasOwnProperty(u)){var ae=o[u];if(ae!=null)switch(u){case"name":g=ae;break;case"type":w=ae;break;case"checked":H=ae;break;case"defaultChecked":J=ae;break;case"value":y=ae;break;case"defaultValue":I=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,i));break;default:Nt(s,i,u,ae,o,null)}}gi(s,y,I,H,J,w,g,!1);return;case"select":rt("invalid",s),u=w=y=null;for(g in o)if(o.hasOwnProperty(g)&&(I=o[g],I!=null))switch(g){case"value":y=I;break;case"defaultValue":w=I;break;case"multiple":u=I;default:Nt(s,i,g,I,o,null)}i=y,o=w,s.multiple=!!u,i!=null?gs(s,!!u,i,!1):o!=null&&gs(s,!!u,o,!0);return;case"textarea":rt("invalid",s),y=g=u=null;for(w in o)if(o.hasOwnProperty(w)&&(I=o[w],I!=null))switch(w){case"value":u=I;break;case"defaultValue":g=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:Nt(s,i,w,I,o,null)}yn(s,u,g,y);return;case"option":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Nt(s,i,H,u,o,null)}return;case"dialog":rt("beforetoggle",s),rt("toggle",s),rt("cancel",s),rt("close",s);break;case"iframe":case"object":rt("load",s);break;case"video":case"audio":for(u=0;u<Cu.length;u++)rt(Cu[u],s);break;case"image":rt("error",s),rt("load",s);break;case"details":rt("toggle",s);break;case"embed":case"source":case"link":rt("error",s),rt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in o)if(o.hasOwnProperty(J)&&(u=o[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Nt(s,i,J,u,o,null)}return;default:if(yi(i)){for(ae in o)o.hasOwnProperty(ae)&&(u=o[ae],u!==void 0&&Eg(s,i,ae,u,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(u=o[I],u!=null&&Nt(s,i,I,u,o,null))}function SC(s,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,w=null,I=null,H=null,J=null,ae=null;for(se in o){var he=o[se];if(o.hasOwnProperty(se)&&he!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":H=he;default:u.hasOwnProperty(se)||Nt(s,i,se,null,u,he)}}for(var te in u){var se=u[te];if(he=o[te],u.hasOwnProperty(te)&&(se!=null||he!=null))switch(te){case"type":y=se;break;case"name":g=se;break;case"checked":J=se;break;case"defaultChecked":ae=se;break;case"value":w=se;break;case"defaultValue":I=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,i));break;default:se!==he&&Nt(s,i,te,se,u,he)}}pi(s,w,I,H,J,ae,y,g);return;case"select":se=w=I=te=null;for(y in o)if(H=o[y],o.hasOwnProperty(y)&&H!=null)switch(y){case"value":break;case"multiple":se=H;default:u.hasOwnProperty(y)||Nt(s,i,y,null,u,H)}for(g in u)if(y=u[g],H=o[g],u.hasOwnProperty(g)&&(y!=null||H!=null))switch(g){case"value":te=y;break;case"defaultValue":I=y;break;case"multiple":w=y;default:y!==H&&Nt(s,i,g,y,u,H)}i=I,o=w,u=se,te!=null?gs(s,!!o,te,!1):!!u!=!!o&&(i!=null?gs(s,!!o,i,!0):gs(s,!!o,o?[]:"",!1));return;case"textarea":se=te=null;for(I in o)if(g=o[I],o.hasOwnProperty(I)&&g!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Nt(s,i,I,null,u,g)}for(w in u)if(g=u[w],y=o[w],u.hasOwnProperty(w)&&(g!=null||y!=null))switch(w){case"value":te=g;break;case"defaultValue":se=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&Nt(s,i,w,g,u,y)}ys(s,te,se);return;case"option":for(var Ne in o)if(te=o[Ne],o.hasOwnProperty(Ne)&&te!=null&&!u.hasOwnProperty(Ne))switch(Ne){case"selected":s.selected=!1;break;default:Nt(s,i,Ne,null,u,te)}for(H in u)if(te=u[H],se=o[H],u.hasOwnProperty(H)&&te!==se&&(te!=null||se!=null))switch(H){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Nt(s,i,H,te,u,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in o)te=o[Ve],o.hasOwnProperty(Ve)&&te!=null&&!u.hasOwnProperty(Ve)&&Nt(s,i,Ve,null,u,te);for(J in u)if(te=u[J],se=o[J],u.hasOwnProperty(J)&&te!==se&&(te!=null||se!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,i));break;default:Nt(s,i,J,te,u,se)}return;default:if(yi(i)){for(var Ct in o)te=o[Ct],o.hasOwnProperty(Ct)&&te!==void 0&&!u.hasOwnProperty(Ct)&&Eg(s,i,Ct,void 0,u,te);for(ae in u)te=u[ae],se=o[ae],!u.hasOwnProperty(ae)||te===se||te===void 0&&se===void 0||Eg(s,i,ae,te,u,se);return}}for(var K in o)te=o[K],o.hasOwnProperty(K)&&te!=null&&!u.hasOwnProperty(K)&&Nt(s,i,K,null,u,te);for(he in u)te=u[he],se=o[he],!u.hasOwnProperty(he)||te===se||te==null&&se==null||Nt(s,i,he,te,u,se)}function qx(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NC(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var g=o[u],y=g.transferSize,w=g.initiatorType,I=g.duration;if(y&&I&&qx(w)){for(w=0,I=g.responseEnd,u+=1;u<o.length;u++){var H=o[u],J=H.startTime;if(J>I)break;var ae=H.transferSize,he=H.initiatorType;ae&&qx(he)&&(H=H.responseEnd,w+=ae*(H<I?1:(I-J)/(H-J)))}if(--u,i+=8*(y+w)/(g.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var wg=null,Tg=null;function Bd(s){return s.nodeType===9?s:s.ownerDocument}function Bx(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zx(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function Ag(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Sg=null;function CC(){var s=window.event;return s&&s.type==="popstate"?s===Sg?!1:(Sg=s,!0):(Sg=null,!1)}var Hx=typeof setTimeout=="function"?setTimeout:void 0,RC=typeof clearTimeout=="function"?clearTimeout:void 0,Fx=typeof Promise=="function"?Promise:void 0,IC=typeof queueMicrotask=="function"?queueMicrotask:typeof Fx<"u"?function(s){return Fx.resolve(null).then(s).catch(jC)}:Hx;function jC(s){setTimeout(function(){throw s})}function ro(s){return s==="head"}function $x(s,i){var o=i,u=0;do{var g=o.nextSibling;if(s.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"||o==="/&"){if(u===0){s.removeChild(g),oc(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Iu(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,Iu(o);for(var y=o.firstChild;y;){var w=y.nextSibling,I=y.nodeName;y[jr]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=w}}else o==="body"&&Iu(s.ownerDocument.body);o=g}while(o);oc(i)}function Gx(s,i){var o=s;s=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=u}while(o)}function Ng(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ng(o),fi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function OC(s,i,o,u){for(;s.nodeType===1;){var g=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[jr])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Cs(s.nextSibling),s===null)break}return null}function DC(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Cs(s.nextSibling),s===null))return null;return s}function Kx(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=Cs(s.nextSibling),s===null))return null;return s}function Cg(s){return s.data==="$?"||s.data==="$~"}function Rg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function LC(s,i){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Cs(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var Ig=null;function Yx(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(i===0)return Cs(s.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}s=s.nextSibling}return null}function Qx(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return s;i--}else o!=="/$"&&o!=="/&"||i++}s=s.previousSibling}return null}function Xx(s,i,o){switch(i=Bd(o),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Iu(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);fi(s)}var Rs=new Map,Wx=new Set;function zd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ga=ee.d;ee.d={f:kC,r:MC,D:PC,C:UC,L:VC,m:qC,X:zC,S:BC,M:HC};function kC(){var s=ga.f(),i=Dd();return s||i}function MC(s){var i=nr(s);i!==null&&i.tag===5&&i.type==="form"?m1(i):ga.r(s)}var sc=typeof document>"u"?null:document;function Zx(s,i,o){var u=sc;if(u&&typeof i=="string"&&i){var g=jn(i);g='link[rel="'+s+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),Wx.has(g)||(Wx.add(g),s={rel:s,crossOrigin:o,href:i},u.querySelector(g)===null&&(i=u.createElement("link"),Yn(i,"link",s),$t(i),u.head.appendChild(i)))}}function PC(s){ga.D(s),Zx("dns-prefetch",s,null)}function UC(s,i){ga.C(s,i),Zx("preconnect",s,i)}function VC(s,i,o){ga.L(s,i,o);var u=sc;if(u&&s&&i){var g='link[rel="preload"][as="'+jn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+jn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+jn(o.imageSizes)+'"]')):g+='[href="'+jn(s)+'"]';var y=g;switch(i){case"style":y=ic(s);break;case"script":y=ac(s)}Rs.has(y)||(s=b({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),Rs.set(y,s),u.querySelector(g)!==null||i==="style"&&u.querySelector(ju(y))||i==="script"&&u.querySelector(Ou(y))||(i=u.createElement("link"),Yn(i,"link",s),$t(i),u.head.appendChild(i)))}}function qC(s,i){ga.m(s,i);var o=sc;if(o&&s){var u=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+jn(u)+'"][href="'+jn(s)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=ac(s)}if(!Rs.has(y)&&(s=b({rel:"modulepreload",href:s},i),Rs.set(y,s),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ou(y)))return}u=o.createElement("link"),Yn(u,"link",s),$t(u),o.head.appendChild(u)}}}function BC(s,i,o){ga.S(s,i,o);var u=sc;if(u&&s){var g=Or(u).hoistableStyles,y=ic(s);i=i||"default";var w=g.get(y);if(!w){var I={loading:0,preload:null};if(w=u.querySelector(ju(y)))I.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":i},o),(o=Rs.get(y))&&jg(s,o);var H=w=u.createElement("link");$t(H),Yn(H,"link",s),H._p=new Promise(function(J,ae){H.onload=J,H.onerror=ae}),H.addEventListener("load",function(){I.loading|=1}),H.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Hd(w,i,u)}w={type:"stylesheet",instance:w,count:1,state:I},g.set(y,w)}}}function zC(s,i){ga.X(s,i);var o=sc;if(o&&s){var u=Or(o).hoistableScripts,g=ac(s),y=u.get(g);y||(y=o.querySelector(Ou(g)),y||(s=b({src:s,async:!0},i),(i=Rs.get(g))&&Og(s,i),y=o.createElement("script"),$t(y),Yn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function HC(s,i){ga.M(s,i);var o=sc;if(o&&s){var u=Or(o).hoistableScripts,g=ac(s),y=u.get(g);y||(y=o.querySelector(Ou(g)),y||(s=b({src:s,async:!0,type:"module"},i),(i=Rs.get(g))&&Og(s,i),y=o.createElement("script"),$t(y),Yn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function Jx(s,i,o,u){var g=(g=Ae.current)?zd(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=ic(o.href),o=Or(g).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=ic(o.href);var y=Or(g).hoistableStyles,w=y.get(s);if(w||(g=g.ownerDocument||g,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,w),(y=g.querySelector(ju(s)))&&!y._p&&(w.instance=y,w.state.loading=5),Rs.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Rs.set(s,o),y||FC(g,s,o,w.state))),i&&u===null)throw Error(r(528,""));return w}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ac(o),o=Or(g).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function ic(s){return'href="'+jn(s)+'"'}function ju(s){return'link[rel="stylesheet"]['+s+"]"}function e_(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function FC(s,i,o,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Yn(i,"link",o),$t(i),s.head.appendChild(i))}function ac(s){return'[src="'+jn(s)+'"]'}function Ou(s){return"script[async]"+s}function t_(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+jn(o.href)+'"]');if(u)return i.instance=u,$t(u),u;var g=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),$t(u),Yn(u,"style",g),Hd(u,o.precedence,s),i.instance=u;case"stylesheet":g=ic(o.href);var y=s.querySelector(ju(g));if(y)return i.state.loading|=4,i.instance=y,$t(y),y;u=e_(o),(g=Rs.get(g))&&jg(u,g),y=(s.ownerDocument||s).createElement("link"),$t(y);var w=y;return w._p=new Promise(function(I,H){w.onload=I,w.onerror=H}),Yn(y,"link",u),i.state.loading|=4,Hd(y,o.precedence,s),i.instance=y;case"script":return y=ac(o.src),(g=s.querySelector(Ou(y)))?(i.instance=g,$t(g),g):(u=o,(g=Rs.get(y))&&(u=b({},o),Og(u,g)),s=s.ownerDocument||s,g=s.createElement("script"),$t(g),Yn(g,"link",u),s.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Hd(u,o.precedence,s));return i.instance}function Hd(s,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,w=0;w<u.length;w++){var I=u[w];if(I.dataset.precedence===i)y=I;else if(y!==g)break}y?y.parentNode.insertBefore(s,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function jg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function Og(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Fd=null;function n_(s,i,o){if(Fd===null){var u=new Map,g=Fd=new Map;g.set(o,u)}else g=Fd,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),g=0;g<o.length;g++){var y=o[g];if(!(y[jr]||y[Ft]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(i)||"";w=s+w;var I=u.get(w);I?I.push(y):u.set(w,[y])}}return u}function r_(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function $C(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function s_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function GC(s,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=ic(u.href),y=i.querySelector(ju(g));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=$d.bind(s),i.then(s,s)),o.state.loading|=4,o.instance=y,$t(y);return}y=i.ownerDocument||i,u=e_(u),(g=Rs.get(g))&&jg(u,g),y=y.createElement("link"),$t(y);var w=y;w._p=new Promise(function(I,H){w.onload=I,w.onerror=H}),Yn(y,"link",u),o.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=$d.bind(s),i.addEventListener("load",o),i.addEventListener("error",o))}}var Dg=0;function KC(s,i){return s.stylesheets&&s.count===0&&Kd(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var u=setTimeout(function(){if(s.stylesheets&&Kd(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+i);0<s.imgBytes&&Dg===0&&(Dg=62500*NC());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Kd(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>Dg?50:800)+i);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function $d(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Gd=null;function Kd(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Gd=new Map,i.forEach(YC,s),Gd=null,$d.call(s))}function YC(s,i){if(!(i.state.loading&4)){var o=Gd.get(s);if(o)var u=o.get(null);else{o=new Map,Gd.set(s,o);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var w=g[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}g=i.instance,w=g.getAttribute("data-precedence"),y=o.get(w)||u,y===u&&o.set(null,g),o.set(w,g),this.count++,u=$d.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),i.state.loading|=4}}var Du={$$typeof:Y,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function QC(s,i,o,u,g,y,w,I,H){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.hiddenUpdates=Nn(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function i_(s,i,o,u,g,y,w,I,H,J,ae,he){return s=new QC(s,i,o,w,H,J,ae,he,I),i=1,y===!0&&(i|=24),y=es(3,null,null,i),s.current=y,y.stateNode=s,i=dp(),i.refCount++,s.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},gp(y),s}function a_(s){return s?(s=Pl,s):Pl}function o_(s,i,o,u,g,y){g=a_(g),u.context===null?u.context=g:u.pendingContext=g,u=Ga(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=Ka(s,u,i),o!==null&&(qr(o,s,i),hu(o,s,i))}function l_(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function Lg(s,i){l_(s,i),(s=s.alternate)&&l_(s,i)}function c_(s){if(s.tag===13||s.tag===31){var i=Go(s,67108864);i!==null&&qr(i,s,67108864),Lg(s,67108864)}}function u_(s){if(s.tag===13||s.tag===31){var i=is();i=fs(i);var o=Go(s,i);o!==null&&qr(o,s,i),Lg(s,i)}}var Yd=!0;function XC(s,i,o,u){var g=F.T;F.T=null;var y=ee.p;try{ee.p=2,kg(s,i,o,u)}finally{ee.p=y,F.T=g}}function WC(s,i,o,u){var g=F.T;F.T=null;var y=ee.p;try{ee.p=8,kg(s,i,o,u)}finally{ee.p=y,F.T=g}}function kg(s,i,o,u){if(Yd){var g=Mg(u);if(g===null)_g(s,i,u,Qd,o),d_(s,u);else if(JC(g,s,i,o,u))u.stopPropagation();else if(d_(s,u),i&4&&-1<ZC.indexOf(s)){for(;g!==null;){var y=nr(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=tr(y.pendingLanes);if(w!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;w;){var H=1<<31-Dt(w);I.entanglements[1]|=H,w&=~H}Ti(y),(xt&6)===0&&(jd=Ot()+500,Nu(0))}}break;case 31:case 13:I=Go(y,2),I!==null&&qr(I,y,2),Dd(),Lg(y,2)}if(y=Mg(u),y===null&&_g(s,i,u,Qd,o),y===g)break;g=y}g!==null&&u.stopPropagation()}else _g(s,i,u,null,o)}}function Mg(s){return s=zn(s),Pg(s)}var Qd=null;function Pg(s){if(Qd=null,s=Mt(s),s!==null){var i=l(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=c(i),s!==null)return s;s=null}else if(o===31){if(s=h(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Qd=s,null}function h_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Cr()){case zi:return 2;case Fr:return 8;case pr:case Hi:return 32;case Mn:return 268435456;default:return 32}default:return 32}}var Ug=!1,so=null,io=null,ao=null,Lu=new Map,ku=new Map,oo=[],ZC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d_(s,i){switch(s){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":io=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":Lu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ku.delete(i.pointerId)}}function Mu(s,i,o,u,g,y){return s===null||s.nativeEvent!==y?(s={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},i!==null&&(i=nr(i),i!==null&&c_(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function JC(s,i,o,u,g){switch(i){case"focusin":return so=Mu(so,s,i,o,u,g),!0;case"dragenter":return io=Mu(io,s,i,o,u,g),!0;case"mouseover":return ao=Mu(ao,s,i,o,u,g),!0;case"pointerover":var y=g.pointerId;return Lu.set(y,Mu(Lu.get(y)||null,s,i,o,u,g)),!0;case"gotpointercapture":return y=g.pointerId,ku.set(y,Mu(ku.get(y)||null,s,i,o,u,g)),!0}return!1}function f_(s){var i=Mt(s.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){s.blockedOn=i,vr(s.priority,function(){u_(o)});return}}else if(i===31){if(i=h(o),i!==null){s.blockedOn=i,vr(s.priority,function(){u_(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Xd(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=Mg(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);un=u,o.target.dispatchEvent(u),un=null}else return i=nr(o),i!==null&&c_(i),s.blockedOn=o,!1;i.shift()}return!0}function m_(s,i,o){Xd(s)&&o.delete(i)}function eR(){Ug=!1,so!==null&&Xd(so)&&(so=null),io!==null&&Xd(io)&&(io=null),ao!==null&&Xd(ao)&&(ao=null),Lu.forEach(m_),ku.forEach(m_)}function Wd(s,i){s.blockedOn===i&&(s.blockedOn=null,Ug||(Ug=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,eR)))}var Zd=null;function p_(s){Zd!==s&&(Zd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Zd===s&&(Zd=null);for(var i=0;i<s.length;i+=3){var o=s[i],u=s[i+1],g=s[i+2];if(typeof u!="function"){if(Pg(u||o)===null)continue;break}var y=nr(o);y!==null&&(s.splice(i,3),i-=3,Mp(y,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function oc(s){function i(H){return Wd(H,s)}so!==null&&Wd(so,s),io!==null&&Wd(io,s),ao!==null&&Wd(ao,s),Lu.forEach(i),ku.forEach(i);for(var o=0;o<oo.length;o++){var u=oo[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<oo.length&&(o=oo[0],o.blockedOn===null);)f_(o),o.blockedOn===null&&oo.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],y=o[u+1],w=g[sn]||null;if(typeof y=="function")w||p_(o);else if(w){var I=null;if(y&&y.hasAttribute("formAction")){if(g=y,w=y[sn]||null)I=w.formAction;else if(Pg(g)!==null)continue}else I=w.action;typeof I=="function"?o[u+1]=I:(o.splice(u,3),u-=3),p_(o)}}}function g_(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(w){return g=w})},focusReset:"manual",scroll:"manual"})}function i(){g!==null&&(g(),g=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),g!==null&&(g(),g=null)}}}function Vg(s){this._internalRoot=s}Jd.prototype.render=Vg.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=is();o_(o,u,s,i,null,null)},Jd.prototype.unmount=Vg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;o_(s.current,2,null,s,null,null),Dd(),i[Ir]=null}};function Jd(s){this._internalRoot=s}Jd.prototype.unstable_scheduleHydration=function(s){if(s){var i=rn();s={blockedOn:null,target:s,priority:i};for(var o=0;o<oo.length&&i!==0&&i<oo[o].priority;o++);oo.splice(o,0,s),o===0&&f_(s)}};var y_=e.version;if(y_!=="19.2.1")throw Error(r(527,y_,"19.2.1"));ee.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=p(i),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var tR={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{gr=ef.inject(tR),Zt=ef}catch{}}return Uu.createRoot=function(s,i){if(!a(s))throw Error(r(299));var o=!1,u="",g=T1,y=A1,w=S1;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=i_(s,1,!1,null,null,o,u,null,g,y,w,g_),s[Ir]=i.current,xg(s),new Vg(i)},Uu.hydrateRoot=function(s,i,o){if(!a(s))throw Error(r(299));var u=!1,g="",y=T1,w=A1,I=S1,H=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(H=o.formState)),i=i_(s,1,!0,i,o??null,u,g,H,y,w,I,g_),i.context=a_(null),o=i.current,u=is(),u=fs(u),g=Ga(u),g.callback=null,Ka(o,g,u),o=u,i.current.lanes=o,ds(i,o),Ti(i),s[Ir]=i.current,xg(s),new Jd(i)},Uu.version="19.2.1",Uu}var N_;function dR(){if(N_)return zg.exports;N_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zg.exports=hR(),zg.exports}var fR=dR(),Gg,C_;function mR(){if(C_)return Gg;C_=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function a(l,c){if(l===c)return!0;if(l&&c&&typeof l=="object"&&typeof c=="object"){if(l.constructor!==c.constructor)return!1;var h,f,p;if(Array.isArray(l)){if(h=l.length,h!=c.length)return!1;for(f=h;f--!==0;)if(!a(l[f],c[f]))return!1;return!0}var v;if(e&&l instanceof Map&&c instanceof Map){if(l.size!==c.size)return!1;for(v=l.entries();!(f=v.next()).done;)if(!c.has(f.value[0]))return!1;for(v=l.entries();!(f=v.next()).done;)if(!a(f.value[1],c.get(f.value[0])))return!1;return!0}if(t&&l instanceof Set&&c instanceof Set){if(l.size!==c.size)return!1;for(v=l.entries();!(f=v.next()).done;)if(!c.has(f.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(l)&&ArrayBuffer.isView(c)){if(h=l.length,h!=c.length)return!1;for(f=h;f--!==0;)if(l[f]!==c[f])return!1;return!0}if(l.constructor===RegExp)return l.source===c.source&&l.flags===c.flags;if(l.valueOf!==Object.prototype.valueOf&&typeof l.valueOf=="function"&&typeof c.valueOf=="function")return l.valueOf()===c.valueOf();if(l.toString!==Object.prototype.toString&&typeof l.toString=="function"&&typeof c.toString=="function")return l.toString()===c.toString();if(p=Object.keys(l),h=p.length,h!==Object.keys(c).length)return!1;for(f=h;f--!==0;)if(!Object.prototype.hasOwnProperty.call(c,p[f]))return!1;if(n&&l instanceof Element)return!1;for(f=h;f--!==0;)if(!((p[f]==="_owner"||p[f]==="__v"||p[f]==="__o")&&l.$$typeof)&&!a(l[p[f]],c[p[f]]))return!1;return!0}return l!==l&&c!==c}return Gg=function(c,h){try{return a(c,h)}catch(f){if((f.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw f}},Gg}var pR=mR();const gR=Vc(pR);var Kg,R_;function yR(){if(R_)return Kg;R_=1;var n=function(e,t,r,a,l,c,h,f){if(!e){var p;if(t===void 0)p=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var v=[r,a,l,c,h,f],b=0;p=new Error(t.replace(/%s/g,function(){return v[b++]})),p.name="Invariant Violation"}throw p.framesToPop=1,p}};return Kg=n,Kg}var vR=yR();const I_=Vc(vR);var Yg,j_;function bR(){return j_||(j_=1,Yg=function(e,t,r,a){var l=r?r.call(a,e,t):void 0;if(l!==void 0)return!!l;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var c=Object.keys(e),h=Object.keys(t);if(c.length!==h.length)return!1;for(var f=Object.prototype.hasOwnProperty.bind(t),p=0;p<c.length;p++){var v=c[p];if(!f(v))return!1;var b=e[v],_=t[v];if(l=r?r.call(a,b,_,v):void 0,l===!1||l===void 0&&b!==_)return!1}return!0}),Yg}var xR=bR();const _R=Vc(xR);var ST=(n=>(n.BASE="base",n.BODY="body",n.HEAD="head",n.HTML="html",n.LINK="link",n.META="meta",n.NOSCRIPT="noscript",n.SCRIPT="script",n.STYLE="style",n.TITLE="title",n.FRAGMENT="Symbol(react.fragment)",n))(ST||{}),Qg={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},O_=Object.values(ST),T0={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},ER=Object.entries(T0).reduce((n,[e,t])=>(n[t]=e,n),{}),ri="data-rh",yc={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},vc=(n,e)=>{for(let t=n.length-1;t>=0;t-=1){const r=n[t];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},wR=n=>{let e=vc(n,"title");const t=vc(n,yc.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),t&&e)return t.replace(/%s/g,()=>e);const r=vc(n,yc.DEFAULT_TITLE);return e||r||void 0},TR=n=>vc(n,yc.ON_CHANGE_CLIENT_STATE)||(()=>{}),Xg=(n,e)=>e.filter(t=>typeof t[n]<"u").map(t=>t[n]).reduce((t,r)=>({...t,...r}),{}),AR=(n,e)=>e.filter(t=>typeof t.base<"u").map(t=>t.base).reverse().reduce((t,r)=>{if(!t.length){const a=Object.keys(r);for(let l=0;l<a.length;l+=1){const h=a[l].toLowerCase();if(n.indexOf(h)!==-1&&r[h])return t.concat(r)}}return t},[]),SR=n=>console&&typeof console.warn=="function"&&console.warn(n),Vu=(n,e,t)=>{const r={};return t.filter(a=>Array.isArray(a[n])?!0:(typeof a[n]<"u"&&SR(`Helmet: ${n} should be of type "Array". Instead found type "${typeof a[n]}"`),!1)).map(a=>a[n]).reverse().reduce((a,l)=>{const c={};l.filter(f=>{let p;const v=Object.keys(f);for(let _=0;_<v.length;_+=1){const T=v[_],S=T.toLowerCase();e.indexOf(S)!==-1&&!(p==="rel"&&f[p].toLowerCase()==="canonical")&&!(S==="rel"&&f[S].toLowerCase()==="stylesheet")&&(p=S),e.indexOf(T)!==-1&&(T==="innerHTML"||T==="cssText"||T==="itemprop")&&(p=T)}if(!p||!f[p])return!1;const b=f[p].toLowerCase();return r[p]||(r[p]={}),c[p]||(c[p]={}),r[p][b]?!1:(c[p][b]=!0,!0)}).reverse().forEach(f=>a.push(f));const h=Object.keys(c);for(let f=0;f<h.length;f+=1){const p=h[f],v={...r[p],...c[p]};r[p]=v}return a},[]).reverse()},NR=(n,e)=>{if(Array.isArray(n)&&n.length){for(let t=0;t<n.length;t+=1)if(n[t][e])return!0}return!1},CR=n=>({baseTag:AR(["href"],n),bodyAttributes:Xg("bodyAttributes",n),defer:vc(n,yc.DEFER),encode:vc(n,yc.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Xg("htmlAttributes",n),linkTags:Vu("link",["rel","href"],n),metaTags:Vu("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:Vu("noscript",["innerHTML"],n),onChangeClientState:TR(n),scriptTags:Vu("script",["src","innerHTML"],n),styleTags:Vu("style",["cssText"],n),title:wR(n),titleAttributes:Xg("titleAttributes",n),prioritizeSeoTags:NR(n,yc.PRIORITIZE_SEO_TAGS)}),NT=n=>Array.isArray(n)?n.join(""):n,RR=(n,e)=>{const t=Object.keys(n);for(let r=0;r<t.length;r+=1)if(e[t[r]]&&e[t[r]].includes(n[t[r]]))return!0;return!1},Wg=(n,e)=>Array.isArray(n)?n.reduce((t,r)=>(RR(r,e)?t.priority.push(r):t.default.push(r),t),{priority:[],default:[]}):{default:n,priority:[]},D_=(n,e)=>({...n,[e]:void 0}),IR=["noscript","script","style"],Ry=(n,e=!0)=>e===!1?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),CT=n=>Object.keys(n).reduce((e,t)=>{const r=typeof n[t]<"u"?`${t}="${n[t]}"`:`${t}`;return e?`${e} ${r}`:r},""),jR=(n,e,t,r)=>{const a=CT(t),l=NT(e);return a?`<${n} ${ri}="true" ${a}>${Ry(l,r)}</${n}>`:`<${n} ${ri}="true">${Ry(l,r)}</${n}>`},OR=(n,e,t=!0)=>e.reduce((r,a)=>{const l=a,c=Object.keys(l).filter(p=>!(p==="innerHTML"||p==="cssText")).reduce((p,v)=>{const b=typeof l[v]>"u"?v:`${v}="${Ry(l[v],t)}"`;return p?`${p} ${b}`:b},""),h=l.innerHTML||l.cssText||"",f=IR.indexOf(n)===-1;return`${r}<${n} ${ri}="true" ${c}${f?"/>":`>${h}</${n}>`}`},""),RT=(n,e={})=>Object.keys(n).reduce((t,r)=>{const a=T0[r];return t[a||r]=n[r],t},e),DR=(n,e,t)=>{const r={key:e,[ri]:!0},a=RT(t,r);return[Ln.createElement("title",a,e)]},Ef=(n,e)=>e.map((t,r)=>{const a={key:r,[ri]:!0};return Object.keys(t).forEach(l=>{const h=T0[l]||l;if(h==="innerHTML"||h==="cssText"){const f=t.innerHTML||t.cssText;a.dangerouslySetInnerHTML={__html:f}}else a[h]=t[l]}),Ln.createElement(n,a)}),Is=(n,e,t=!0)=>{switch(n){case"title":return{toComponent:()=>DR(n,e.title,e.titleAttributes),toString:()=>jR(n,e.title,e.titleAttributes,t)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>RT(e),toString:()=>CT(e)};default:return{toComponent:()=>Ef(n,e),toString:()=>OR(n,e,t)}}},LR=({metaTags:n,linkTags:e,scriptTags:t,encode:r})=>{const a=Wg(n,Qg.meta),l=Wg(e,Qg.link),c=Wg(t,Qg.script);return{priorityMethods:{toComponent:()=>[...Ef("meta",a.priority),...Ef("link",l.priority),...Ef("script",c.priority)],toString:()=>`${Is("meta",a.priority,r)} ${Is("link",l.priority,r)} ${Is("script",c.priority,r)}`},metaTags:a.default,linkTags:l.default,scriptTags:c.default}},kR=n=>{const{baseTag:e,bodyAttributes:t,encode:r=!0,htmlAttributes:a,noscriptTags:l,styleTags:c,title:h="",titleAttributes:f,prioritizeSeoTags:p}=n;let{linkTags:v,metaTags:b,scriptTags:_}=n,T={toComponent:()=>{},toString:()=>""};return p&&({priorityMethods:T,linkTags:v,metaTags:b,scriptTags:_}=LR(n)),{priority:T,base:Is("base",e,r),bodyAttributes:Is("bodyAttributes",t,r),htmlAttributes:Is("htmlAttributes",a,r),link:Is("link",v,r),meta:Is("meta",b,r),noscript:Is("noscript",l,r),script:Is("script",_,r),style:Is("style",c,r),title:Is("title",{title:h,titleAttributes:f},r)}},Iy=kR,tf=[],IT=!!(typeof window<"u"&&window.document&&window.document.createElement),jy=class{instances=[];canUseDOM=IT;context;value={setHelmet:n=>{this.context.helmet=n},helmetInstances:{get:()=>this.canUseDOM?tf:this.instances,add:n=>{(this.canUseDOM?tf:this.instances).push(n)},remove:n=>{const e=(this.canUseDOM?tf:this.instances).indexOf(n);(this.canUseDOM?tf:this.instances).splice(e,1)}}};constructor(n,e){this.context=n,this.canUseDOM=e||!1,e||(n.helmet=Iy({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},MR={},jT=Ln.createContext(MR),OT=class DT extends M.Component{static canUseDOM=IT;helmetData;constructor(e){super(e),this.helmetData=new jy(this.props.context||{},DT.canUseDOM)}render(){return Ln.createElement(jT.Provider,{value:this.helmetData.value},this.props.children)}},lc=(n,e)=>{const t=document.head||document.querySelector("head"),r=t.querySelectorAll(`${n}[${ri}]`),a=[].slice.call(r),l=[];let c;return e&&e.length&&e.forEach(h=>{const f=document.createElement(n);for(const p in h)if(Object.prototype.hasOwnProperty.call(h,p))if(p==="innerHTML")f.innerHTML=h.innerHTML;else if(p==="cssText")f.styleSheet?f.styleSheet.cssText=h.cssText:f.appendChild(document.createTextNode(h.cssText));else{const v=p,b=typeof h[v]>"u"?"":h[v];f.setAttribute(p,b)}f.setAttribute(ri,"true"),a.some((p,v)=>(c=v,f.isEqualNode(p)))?a.splice(c,1):l.push(f)}),a.forEach(h=>h.parentNode?.removeChild(h)),l.forEach(h=>t.appendChild(h)),{oldTags:a,newTags:l}},Oy=(n,e)=>{const t=document.getElementsByTagName(n)[0];if(!t)return;const r=t.getAttribute(ri),a=r?r.split(","):[],l=[...a],c=Object.keys(e);for(const h of c){const f=e[h]||"";t.getAttribute(h)!==f&&t.setAttribute(h,f),a.indexOf(h)===-1&&a.push(h);const p=l.indexOf(h);p!==-1&&l.splice(p,1)}for(let h=l.length-1;h>=0;h-=1)t.removeAttribute(l[h]);a.length===l.length?t.removeAttribute(ri):t.getAttribute(ri)!==c.join(",")&&t.setAttribute(ri,c.join(","))},PR=(n,e)=>{typeof n<"u"&&document.title!==n&&(document.title=NT(n)),Oy("title",e)},L_=(n,e)=>{const{baseTag:t,bodyAttributes:r,htmlAttributes:a,linkTags:l,metaTags:c,noscriptTags:h,onChangeClientState:f,scriptTags:p,styleTags:v,title:b,titleAttributes:_}=n;Oy("body",r),Oy("html",a),PR(b,_);const T={baseTag:lc("base",t),linkTags:lc("link",l),metaTags:lc("meta",c),noscriptTags:lc("noscript",h),scriptTags:lc("script",p),styleTags:lc("style",v)},S={},O={};Object.keys(T).forEach(R=>{const{newTags:U,oldTags:z}=T[R];U.length&&(S[R]=U),z.length&&(O[R]=T[R].oldTags)}),e&&e(),f(n,S,O)},qu=null,UR=n=>{qu&&cancelAnimationFrame(qu),n.defer?qu=requestAnimationFrame(()=>{L_(n,()=>{qu=null})}):(L_(n),qu=null)},VR=UR,k_=class extends M.Component{rendered=!1;shouldComponentUpdate(n){return!_R(n,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:n}=this.props.context;n.remove(this),this.emitChange()}emitChange(){const{helmetInstances:n,setHelmet:e}=this.props.context;let t=null;const r=CR(n.get().map(a=>{const l={...a.props};return delete l.context,l}));OT.canUseDOM?VR(r):Iy&&(t=Iy(r)),e(t)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:n}=this.props.context;n.add(this),this.emitChange()}render(){return this.init(),null}},qR=class extends M.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(n){return!gR(D_(this.props,"helmetData"),D_(n,"helmetData"))}mapNestedChildrenToProps(n,e){if(!e)return null;switch(n.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(n,e,t,r){return{...e,[n.type]:[...e[n.type]||[],{...t,...this.mapNestedChildrenToProps(n,r)}]}}mapObjectTypeChildren(n,e,t,r){switch(n.type){case"title":return{...e,[n.type]:r,titleAttributes:{...t}};case"body":return{...e,bodyAttributes:{...t}};case"html":return{...e,htmlAttributes:{...t}};default:return{...e,[n.type]:{...t}}}}mapArrayTypeChildrenToProps(n,e){let t={...e};return Object.keys(n).forEach(r=>{t={...t,[r]:n[r]}}),t}warnOnInvalidChildren(n,e){return I_(O_.some(t=>n.type===t),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${O_.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`),I_(!e||typeof e=="string"||Array.isArray(e)&&!e.some(t=>typeof t!="string"),`Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(n,e){let t={};return Ln.Children.forEach(n,r=>{if(!r||!r.props)return;const{children:a,...l}=r.props,c=Object.keys(l).reduce((f,p)=>(f[ER[p]||p]=l[p],f),{});let{type:h}=r;switch(typeof h=="symbol"?h=h.toString():this.warnOnInvalidChildren(r,a),h){case"Symbol(react.fragment)":e=this.mapChildrenToProps(a,e);break;case"link":case"meta":case"noscript":case"script":case"style":t=this.flattenArrayTypeChildren(r,t,c,a);break;default:e=this.mapObjectTypeChildren(r,e,c,a);break}}),this.mapArrayTypeChildrenToProps(t,e)}render(){const{children:n,...e}=this.props;let t={...e},{helmetData:r}=e;if(n&&(t=this.mapChildrenToProps(n,t)),r&&!(r instanceof jy)){const a=r;r=new jy(a.context,!0),delete t.helmetData}return r?Ln.createElement(k_,{...t,context:r.value}):Ln.createElement(jT.Consumer,null,a=>Ln.createElement(k_,{...t,context:a}))}};var M_="popstate";function BR(n={}){function e(r,a){let{pathname:l,search:c,hash:h}=r.location;return Dy("",{pathname:l,search:c,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:lh(a)}return HR(e,t,null,n)}function Wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ps(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zR(){return Math.random().toString(36).substring(2,10)}function P_(n,e){return{usr:n.state,key:n.key,idx:e}}function Dy(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?qc(e):e,state:t,key:e&&e.key||r||zR()}}function lh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function qc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function HR(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,h="POP",f=null,p=v();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function v(){return(c.state||{idx:null}).idx}function b(){h="POP";let R=v(),U=R==null?null:R-p;p=R,f&&f({action:h,location:O.location,delta:U})}function _(R,U){h="PUSH";let z=Dy(O.location,R,U);p=v()+1;let Y=P_(z,p),Q=O.createHref(z);try{c.pushState(Y,"",Q)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;a.location.assign(Q)}l&&f&&f({action:h,location:O.location,delta:1})}function T(R,U){h="REPLACE";let z=Dy(O.location,R,U);p=v();let Y=P_(z,p),Q=O.createHref(z);c.replaceState(Y,"",Q),l&&f&&f({action:h,location:O.location,delta:0})}function S(R){return FR(R)}let O={get action(){return h},get location(){return n(a,c)},listen(R){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(M_,b),f=R,()=>{a.removeEventListener(M_,b),f=null}},createHref(R){return e(a,R)},createURL:S,encodeLocation(R){let U=S(R);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:_,replace:T,go(R){return c.go(R)}};return O}function FR(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:lh(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function LT(n,e,t="/"){return $R(n,e,t,!1)}function $R(n,e,t,r){let a=typeof e=="string"?qc(e):e,l=Ea(a.pathname||"/",t);if(l==null)return null;let c=kT(n);GR(c);let h=null;for(let f=0;h==null&&f<c.length;++f){let p=r4(l);h=t4(c[f],p,r)}return h}function kT(n,e=[],t=[],r="",a=!1){let l=(c,h,f=a,p)=>{let v={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&f)return;Wt(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let b=xa([r,v.relativePath]),_=t.concat(v);c.children&&c.children.length>0&&(Wt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),kT(c.children,e,_,b,f)),!(c.path==null&&!c.index)&&e.push({path:b,score:JR(b,c.index),routesMeta:_})};return n.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))l(c,h);else for(let f of MT(c.path))l(c,h,!0,f)}),e}function MT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=MT(r.join("/")),h=[];return h.push(...c.map(f=>f===""?l:[l,f].join("/"))),a&&h.push(...c),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function GR(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:e4(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var KR=/^:[\w-]+$/,YR=3,QR=2,XR=1,WR=10,ZR=-2,U_=n=>n==="*";function JR(n,e){let t=n.split("/"),r=t.length;return t.some(U_)&&(r+=ZR),e&&(r+=QR),t.filter(a=>!U_(a)).reduce((a,l)=>a+(KR.test(l)?YR:l===""?XR:WR),r)}function e4(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function t4(n,e,t=!1){let{routesMeta:r}=n,a={},l="/",c=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,v=l==="/"?e:e.slice(l.length)||"/",b=Pf({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},v),_=f.route;if(!b&&p&&t&&!r[r.length-1].route.index&&(b=Pf({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!b)return null;Object.assign(a,b.params),c.push({params:a,pathname:xa([l,b.pathname]),pathnameBase:l4(xa([l,b.pathnameBase])),route:_}),b.pathnameBase!=="/"&&(l=xa([l,b.pathnameBase]))}return c}function Pf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=n4(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:r.reduce((p,{paramName:v,isOptional:b},_)=>{if(v==="*"){let S=h[_]||"";c=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const T=h[_];return b&&!T?p[v]=void 0:p[v]=(T||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:n}}function n4(n,e=!1,t=!0){Ps(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function r4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ps(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ea(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var s4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i4=n=>s4.test(n);function a4(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?qc(n):n,l;if(t)if(i4(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Ps(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=V_(t.substring(1),"/"):l=V_(t,e)}else l=e;return{pathname:l,search:c4(r),hash:u4(a)}}function V_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Zg(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function o4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function A0(n){let e=o4(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function S0(n,e,t,r=!1){let a;typeof n=="string"?a=qc(n):(a={...n},Wt(!a.pathname||!a.pathname.includes("?"),Zg("?","pathname","search",a)),Wt(!a.pathname||!a.pathname.includes("#"),Zg("#","pathname","hash",a)),Wt(!a.search||!a.search.includes("#"),Zg("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,h;if(c==null)h=t;else{let b=e.length-1;if(!r&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),b-=1;a.pathname=_.join("/")}h=b>=0?e[b]:"/"}let f=a4(a,h),p=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||v)&&(f.pathname+="/"),f}var xa=n=>n.join("/").replace(/\/\/+/g,"/"),l4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),c4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,u4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function h4(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function d4(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var PT=["POST","PUT","PATCH","DELETE"];new Set(PT);var f4=["GET",...PT];new Set(f4);var Bc=M.createContext(null);Bc.displayName="DataRouter";var hm=M.createContext(null);hm.displayName="DataRouterState";M.createContext(!1);var UT=M.createContext({isTransitioning:!1});UT.displayName="ViewTransition";var m4=M.createContext(new Map);m4.displayName="Fetchers";var p4=M.createContext(null);p4.displayName="Await";var Vs=M.createContext(null);Vs.displayName="Navigation";var Th=M.createContext(null);Th.displayName="Location";var qs=M.createContext({outlet:null,matches:[],isDataRoute:!1});qs.displayName="Route";var N0=M.createContext(null);N0.displayName="RouteError";function g4(n,{relative:e}={}){Wt(zc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=M.useContext(Vs),{hash:a,pathname:l,search:c}=Ah(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:xa([t,l])),r.createHref({pathname:h,search:c,hash:a})}function zc(){return M.useContext(Th)!=null}function Lo(){return Wt(zc(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Th).location}var VT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qT(n){M.useContext(Vs).static||M.useLayoutEffect(n)}function Pi(){let{isDataRoute:n}=M.useContext(qs);return n?j4():y4()}function y4(){Wt(zc(),"useNavigate() may be used only in the context of a <Router> component.");let n=M.useContext(Bc),{basename:e,navigator:t}=M.useContext(Vs),{matches:r}=M.useContext(qs),{pathname:a}=Lo(),l=JSON.stringify(A0(r)),c=M.useRef(!1);return qT(()=>{c.current=!0}),M.useCallback((f,p={})=>{if(Ps(c.current,VT),!c.current)return;if(typeof f=="number"){t.go(f);return}let v=S0(f,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:xa([e,v.pathname])),(p.replace?t.replace:t.push)(v,p.state,p)},[e,t,l,a,n])}var v4=M.createContext(null);function b4(n){let e=M.useContext(qs).outlet;return M.useMemo(()=>e&&M.createElement(v4.Provider,{value:n},e),[e,n])}function Hc(){let{matches:n}=M.useContext(qs),e=n[n.length-1];return e?e.params:{}}function Ah(n,{relative:e}={}){let{matches:t}=M.useContext(qs),{pathname:r}=Lo(),a=JSON.stringify(A0(t));return M.useMemo(()=>S0(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function x4(n,e){return BT(n,e)}function BT(n,e,t,r,a){Wt(zc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=M.useContext(Vs),{matches:c}=M.useContext(qs),h=c[c.length-1],f=h?h.params:{},p=h?h.pathname:"/",v=h?h.pathnameBase:"/",b=h&&h.route;{let z=b&&b.path||"";zT(p,!b||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let _=Lo(),T;if(e){let z=typeof e=="string"?qc(e):e;Wt(v==="/"||z.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${z.pathname}" was given in the \`location\` prop.`),T=z}else T=_;let S=T.pathname||"/",O=S;if(v!=="/"){let z=v.replace(/^\//,"").split("/");O="/"+S.replace(/^\//,"").split("/").slice(z.length).join("/")}let R=LT(n,{pathname:O});Ps(b||R!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Ps(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=A4(R&&R.map(z=>Object.assign({},z,{params:Object.assign({},f,z.params),pathname:xa([v,l.encodeLocation?l.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?v:xa([v,l.encodeLocation?l.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),c,t,r,a);return e&&U?M.createElement(Th.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},U):U}function _4(){let n=I4(),e=h4(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:a},t):null,c)}var E4=M.createElement(_4,null),w4=class extends M.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?M.createElement(qs.Provider,{value:this.props.routeContext},M.createElement(N0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function T4({routeContext:n,match:e,children:t}){let r=M.useContext(Bc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(qs.Provider,{value:n},t)}function A4(n,e=[],t=null,r=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let v=l.findIndex(b=>b.route.id&&c?.[b.route.id]!==void 0);Wt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let h=!1,f=-1;if(t)for(let v=0;v<l.length;v++){let b=l[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(f=v),b.route.id){let{loaderData:_,errors:T}=t,S=b.route.loader&&!_.hasOwnProperty(b.route.id)&&(!T||T[b.route.id]===void 0);if(b.route.lazy||S){h=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}let p=t&&r?(v,b)=>{r(v,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:d4(t.matches),errorInfo:b})}:void 0;return l.reduceRight((v,b,_)=>{let T,S=!1,O=null,R=null;t&&(T=c&&b.route.id?c[b.route.id]:void 0,O=b.route.errorElement||E4,h&&(f<0&&_===0?(zT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,R=null):f===_&&(S=!0,R=b.route.hydrateFallbackElement||null)));let U=e.concat(l.slice(0,_+1)),z=()=>{let Y;return T?Y=O:S?Y=R:b.route.Component?Y=M.createElement(b.route.Component,null):b.route.element?Y=b.route.element:Y=v,M.createElement(T4,{match:b,routeContext:{outlet:v,matches:U,isDataRoute:t!=null},children:Y})};return t&&(b.route.ErrorBoundary||b.route.errorElement||_===0)?M.createElement(w4,{location:t.location,revalidation:t.revalidation,component:O,error:T,children:z(),routeContext:{outlet:null,matches:U,isDataRoute:!0},onError:p}):z()},null)}function C0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function S4(n){let e=M.useContext(Bc);return Wt(e,C0(n)),e}function N4(n){let e=M.useContext(hm);return Wt(e,C0(n)),e}function C4(n){let e=M.useContext(qs);return Wt(e,C0(n)),e}function R0(n){let e=C4(n),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function R4(){return R0("useRouteId")}function I4(){let n=M.useContext(N0),e=N4("useRouteError"),t=R0("useRouteError");return n!==void 0?n:e.errors?.[t]}function j4(){let{router:n}=S4("useNavigate"),e=R0("useNavigate"),t=M.useRef(!1);return qT(()=>{t.current=!0}),M.useCallback(async(a,l={})=>{Ps(t.current,VT),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var q_={};function zT(n,e,t){!e&&!q_[n]&&(q_[n]=!0,Ps(!1,t))}M.memo(O4);function O4({routes:n,future:e,state:t,unstable_onError:r}){return BT(n,void 0,t,r,e)}function D4({to:n,replace:e,state:t,relative:r}){Wt(zc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=M.useContext(Vs);Ps(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=M.useContext(qs),{pathname:c}=Lo(),h=Pi(),f=S0(n,A0(l),c,r==="path"),p=JSON.stringify(f);return M.useEffect(()=>{h(JSON.parse(p),{replace:e,state:t,relative:r})},[h,p,r,e,t]),null}function L4(n){return b4(n.context)}function pn(n){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function k4({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){Wt(!zc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),f=M.useMemo(()=>({basename:h,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[h,a,l,c]);typeof t=="string"&&(t=qc(t));let{pathname:p="/",search:v="",hash:b="",state:_=null,key:T="default"}=t,S=M.useMemo(()=>{let O=Ea(p,h);return O==null?null:{location:{pathname:O,search:v,hash:b,state:_,key:T},navigationType:r}},[h,p,v,b,_,T,r]);return Ps(S!=null,`<Router basename="${h}"> is not able to match the URL "${p}${v}${b}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:M.createElement(Vs.Provider,{value:f},M.createElement(Th.Provider,{children:e,value:S}))}function M4({children:n,location:e}){return x4(Ly(n),e)}function Ly(n,e=[]){let t=[];return M.Children.forEach(n,(r,a)=>{if(!M.isValidElement(r))return;let l=[...e,a];if(r.type===M.Fragment){t.push.apply(t,Ly(r.props.children,l));return}Wt(r.type===pn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Ly(r.props.children,l)),t.push(c)}),t}var wf="get",Tf="application/x-www-form-urlencoded";function dm(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function P4(n){return dm(n)&&n.tagName.toLowerCase()==="button"}function U4(n){return dm(n)&&n.tagName.toLowerCase()==="form"}function V4(n){return dm(n)&&n.tagName.toLowerCase()==="input"}function q4(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function B4(n,e){return n.button===0&&(!e||e==="_self")&&!q4(n)}var nf=null;function z4(){if(nf===null)try{new FormData(document.createElement("form"),0),nf=!1}catch{nf=!0}return nf}var H4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jg(n){return n!=null&&!H4.has(n)?(Ps(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tf}"`),null):n}function F4(n,e){let t,r,a,l,c;if(U4(n)){let h=n.getAttribute("action");r=h?Ea(h,e):null,t=n.getAttribute("method")||wf,a=Jg(n.getAttribute("enctype"))||Tf,l=new FormData(n)}else if(P4(n)||V4(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(r=f?Ea(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||wf,a=Jg(n.getAttribute("formenctype"))||Jg(h.getAttribute("enctype"))||Tf,l=new FormData(h,n),!z4()){let{name:p,type:v,value:b}=n;if(v==="image"){let _=p?`${p}.`:"";l.append(`${_}x`,"0"),l.append(`${_}y`,"0")}else p&&l.append(p,b)}}else{if(dm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=wf,r=null,a=Tf,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function I0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function $4(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Ea(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function G4(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function K4(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Y4(n,e,t){let r=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await G4(l,t);return c.links?c.links():[]}return[]}));return Z4(r.flat(1).filter(K4).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function B_(n,e,t,r,a,l){let c=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,h=(f,p)=>t[p].pathname!==f.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==f.params["*"];return l==="assets"?e.filter((f,p)=>c(f,p)||h(f,p)):l==="data"?e.filter((f,p)=>{let v=r.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(c(f,p)||h(f,p))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Q4(n,e,{includeHydrateFallback:t}={}){return X4(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function X4(n){return[...new Set(n)]}function W4(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Z4(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let l=JSON.stringify(W4(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function HT(){let n=M.useContext(Bc);return I0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function J4(){let n=M.useContext(hm);return I0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var j0=M.createContext(void 0);j0.displayName="FrameworkContext";function FT(){let n=M.useContext(j0);return I0(n,"You must render this element inside a <HydratedRouter> element"),n}function eI(n,e){let t=M.useContext(j0),[r,a]=M.useState(!1),[l,c]=M.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:p,onMouseLeave:v,onTouchStart:b}=e,_=M.useRef(null);M.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let O=U=>{U.forEach(z=>{c(z.isIntersecting)})},R=new IntersectionObserver(O,{threshold:.5});return _.current&&R.observe(_.current),()=>{R.disconnect()}}},[n]),M.useEffect(()=>{if(r){let O=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(O)}}},[r]);let T=()=>{a(!0)},S=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,_,{}]:[l,_,{onFocus:Bu(h,T),onBlur:Bu(f,S),onMouseEnter:Bu(p,T),onMouseLeave:Bu(v,S),onTouchStart:Bu(b,T)}]:[!1,_,{}]}function Bu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function tI({page:n,...e}){let{router:t}=HT(),r=M.useMemo(()=>LT(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?M.createElement(rI,{page:n,matches:r,...e}):null}function nI(n){let{manifest:e,routeModules:t}=FT(),[r,a]=M.useState([]);return M.useEffect(()=>{let l=!1;return Y4(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),r}function rI({page:n,matches:e,...t}){let r=Lo(),{manifest:a,routeModules:l}=FT(),{basename:c}=HT(),{loaderData:h,matches:f}=J4(),p=M.useMemo(()=>B_(n,e,f,a,r,"data"),[n,e,f,a,r]),v=M.useMemo(()=>B_(n,e,f,a,r,"assets"),[n,e,f,a,r]),b=M.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let S=new Set,O=!1;if(e.forEach(U=>{let z=a.routes[U.route.id];!z||!z.hasLoader||(!p.some(Y=>Y.route.id===U.route.id)&&U.route.id in h&&l[U.route.id]?.shouldRevalidate||z.hasClientLoader?O=!0:S.add(U.route.id))}),S.size===0)return[];let R=$4(n,c,"data");return O&&S.size>0&&R.searchParams.set("_routes",e.filter(U=>S.has(U.route.id)).map(U=>U.route.id).join(",")),[R.pathname+R.search]},[c,h,r,a,p,e,n,l]),_=M.useMemo(()=>Q4(v,a),[v,a]),T=nI(v);return M.createElement(M.Fragment,null,b.map(S=>M.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),_.map(S=>M.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),T.map(({key:S,link:O})=>M.createElement("link",{key:S,nonce:t.nonce,...O})))}function sI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var $T=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$T&&(window.__reactRouterVersion="7.10.1")}catch{}function iI({basename:n,children:e,unstable_useTransitions:t,window:r}){let a=M.useRef();a.current==null&&(a.current=BR({window:r,v5Compat:!0}));let l=a.current,[c,h]=M.useState({action:l.action,location:l.location}),f=M.useCallback(p=>{t===!1?h(p):M.startTransition(()=>h(p))},[t]);return M.useLayoutEffect(()=>l.listen(f),[l,f]),M.createElement(k4,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t===!0})}var GT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ze=M.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:h,target:f,to:p,preventScrollReset:v,viewTransition:b,..._},T){let{basename:S,unstable_useTransitions:O}=M.useContext(Vs),R=typeof p=="string"&&GT.test(p),U,z=!1;if(typeof p=="string"&&R&&(U=p,$T))try{let $=new URL(window.location.href),N=p.startsWith("//")?new URL($.protocol+p):new URL(p),P=Ea(N.pathname,S);N.origin===$.origin&&P!=null?p=P+N.search+N.hash:z=!0}catch{Ps(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=g4(p,{relative:a}),[Q,ie,ve]=eI(r,_),L=lI(p,{replace:c,state:h,target:f,preventScrollReset:v,relative:a,viewTransition:b,unstable_useTransitions:O});function k($){e&&e($),$.defaultPrevented||L($)}let V=M.createElement("a",{..._,...ve,href:U||Y,onClick:z||l?e:k,ref:sI(T,ie),target:f,"data-discover":!R&&t==="render"?"true":void 0});return Q&&!R?M.createElement(M.Fragment,null,V,M.createElement(tI,{page:Y})):V});ze.displayName="Link";var KT=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:h,children:f,...p},v){let b=Ah(c,{relative:p.relative}),_=Lo(),T=M.useContext(hm),{navigator:S,basename:O}=M.useContext(Vs),R=T!=null&&fI(b)&&h===!0,U=S.encodeLocation?S.encodeLocation(b).pathname:b.pathname,z=_.pathname,Y=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(z=z.toLowerCase(),Y=Y?Y.toLowerCase():null,U=U.toLowerCase()),Y&&O&&(Y=Ea(Y,O)||Y);const Q=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let ie=z===U||!a&&z.startsWith(U)&&z.charAt(Q)==="/",ve=Y!=null&&(Y===U||!a&&Y.startsWith(U)&&Y.charAt(U.length)==="/"),L={isActive:ie,isPending:ve,isTransitioning:R},k=ie?e:void 0,V;typeof r=="function"?V=r(L):V=[r,ie?"active":null,ve?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let $=typeof l=="function"?l(L):l;return M.createElement(ze,{...p,"aria-current":k,className:V,ref:v,style:$,to:c,viewTransition:h},typeof f=="function"?f(L):f)});KT.displayName="NavLink";var aI=M.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=wf,action:h,onSubmit:f,relative:p,preventScrollReset:v,viewTransition:b,..._},T)=>{let{unstable_useTransitions:S}=M.useContext(Vs),O=hI(),R=dI(h,{relative:p}),U=c.toLowerCase()==="get"?"get":"post",z=typeof h=="string"&&GT.test(h),Y=Q=>{if(f&&f(Q),Q.defaultPrevented)return;Q.preventDefault();let ie=Q.nativeEvent.submitter,ve=ie?.getAttribute("formmethod")||c,L=()=>O(ie||Q.currentTarget,{fetcherKey:e,method:ve,navigate:t,replace:a,state:l,relative:p,preventScrollReset:v,viewTransition:b});S&&t!==!1?M.startTransition(()=>L()):L()};return M.createElement("form",{ref:T,method:U,action:R,onSubmit:r?f:Y,..._,"data-discover":!z&&n==="render"?"true":void 0})});aI.displayName="Form";function oI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YT(n){let e=M.useContext(Bc);return Wt(e,oI(n)),e}function lI(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c,unstable_useTransitions:h}={}){let f=Pi(),p=Lo(),v=Ah(n,{relative:l});return M.useCallback(b=>{if(B4(b,e)){b.preventDefault();let _=t!==void 0?t:lh(p)===lh(v),T=()=>f(n,{replace:_,state:r,preventScrollReset:a,relative:l,viewTransition:c});h?M.startTransition(()=>T()):T()}},[p,f,v,t,r,e,n,a,l,c,h])}var cI=0,uI=()=>`__${String(++cI)}__`;function hI(){let{router:n}=YT("useSubmit"),{basename:e}=M.useContext(Vs),t=R4(),r=n.fetch,a=n.navigate;return M.useCallback(async(l,c={})=>{let{action:h,method:f,encType:p,formData:v,body:b}=F4(l,e);if(c.navigate===!1){let _=c.fetcherKey||uI();await r(_,t,c.action||h,{preventScrollReset:c.preventScrollReset,formData:v,body:b,formMethod:c.method||f,formEncType:c.encType||p,flushSync:c.flushSync})}else await a(c.action||h,{preventScrollReset:c.preventScrollReset,formData:v,body:b,formMethod:c.method||f,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,a,e,t])}function dI(n,{relative:e}={}){let{basename:t}=M.useContext(Vs),r=M.useContext(qs);Wt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...Ah(n||".",{relative:e})},c=Lo();if(n==null){l.search=c.search;let h=new URLSearchParams(l.search),f=h.getAll("index");if(f.some(v=>v==="")){h.delete("index"),f.filter(b=>b).forEach(b=>h.append("index",b));let v=h.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:xa([t,l.pathname])),lh(l)}function fI(n,{relative:e}={}){let t=M.useContext(UT);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=YT("useViewTransitionState"),a=Ah(n,{relative:e});if(!t.isTransitioning)return!1;let l=Ea(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Ea(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Pf(a.pathname,c)!=null||Pf(a.pathname,l)!=null}const mI=()=>{};var z_={};const QT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},pI=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],h=n[t++],f=((a&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},XT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,h=c?n[a+1]:0,f=a+2<n.length,p=f?n[a+2]:0,v=l>>2,b=(l&3)<<4|h>>4;let _=(h&15)<<2|p>>6,T=p&63;f||(T=64,c||(_=64)),r.push(t[v],t[b],t[_],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(QT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const b=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||p==null||b==null)throw new gI;const _=l<<2|h>>4;if(r.push(_),p!==64){const T=h<<4&240|p>>2;if(r.push(T),b!==64){const S=p<<6&192|b;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class gI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yI=function(n){const e=QT(n);return XT.encodeByteArray(e,!0)},Uf=function(n){return yI(n).replace(/\./g,"")},WT=function(n){try{return XT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const bI=()=>vI().__FIREBASE_DEFAULTS__,xI=()=>{if(typeof process>"u"||typeof z_>"u")return;const n=z_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_I=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&WT(n[1]);return e&&JSON.parse(e)},fm=()=>{try{return mI()||bI()||xI()||_I()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ZT=n=>fm()?.emulatorHosts?.[n],EI=n=>{const e=ZT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},JT=()=>fm()?.config,eA=n=>fm()?.[`_${n}`];class wI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Fc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tA(n){return(await fetch(n,{credentials:"include"})).ok}function TI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Uf(JSON.stringify(t)),Uf(JSON.stringify(c)),""].join(".")}const eh={};function AI(){const n={prod:[],emulator:[]};for(const e of Object.keys(eh))eh[e]?n.emulator.push(e):n.prod.push(e);return n}function SI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let H_=!1;function nA(n,e){if(typeof window>"u"||typeof document>"u"||!Fc(window.location.host)||eh[n]===e||eh[n]||H_)return;eh[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",l=AI().prod.length>0;function c(){const _=document.getElementById(r);_&&_.remove()}function h(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function f(_,T){_.setAttribute("width","24"),_.setAttribute("id",T),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function p(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{H_=!0,c()},_}function v(_,T){_.setAttribute("id",T),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function b(){const _=SI(r),T=t("text"),S=document.getElementById(T)||document.createElement("span"),O=t("learnmore"),R=document.getElementById(O)||document.createElement("a"),U=t("preprendIcon"),z=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const Y=_.element;h(Y),v(R,O);const Q=p();f(z,U),Y.append(z,S,R,Q),document.body.appendChild(Y)}l?(S.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function fr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fr())}function CI(){const n=fm()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function II(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function jI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OI(){const n=fr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function DI(){return!CI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LI(){try{return typeof indexedDB=="object"}catch{return!1}}function kI(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const MI="FirebaseError";class Ia extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=MI,Object.setPrototypeOf(this,Ia.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sh.prototype.create)}}class Sh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?PI(l,r):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Ia(a,h,r)}}function PI(n,e){return n.replace(UI,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const UI=/\{\$([^}]+)}/g;function VI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function wa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],c=e[a];if(F_(l)&&F_(c)){if(!wa(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function F_(n){return n!==null&&typeof n=="object"}function Nh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $u(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Gu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function qI(n,e){const t=new BI(n,e);return t.subscribe.bind(t)}class BI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");zI(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=ey),a.error===void 0&&(a.error=ey),a.complete===void 0&&(a.complete=ey);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ey(){}function An(n){return n&&n._delegate?n._delegate:n}class hl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const il="[DEFAULT]";class HI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new wI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($I(e))try{this.getOrInitializeService({instanceIdentifier:il})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=il){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=il){return this.instances.has(e)}getOptions(e=il){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=il){return this.component?this.component.multipleInstances?e:il:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FI(n){return n===il?void 0:n}function $I(n){return n.instantiationMode==="EAGER"}class GI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new HI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ot;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ot||(ot={}));const KI={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},YI=ot.INFO,QI={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},XI=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=QI[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class O0{constructor(e){this.name=e,this._logLevel=YI,this._logHandler=XI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const WI=(n,e)=>e.some(t=>n instanceof t);let $_,G_;function ZI(){return $_||($_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JI(){return G_||(G_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rA=new WeakMap,ky=new WeakMap,sA=new WeakMap,ty=new WeakMap,D0=new WeakMap;function e3(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(xo(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&rA.set(t,n)}).catch(()=>{}),D0.set(e,n),e}function t3(n){if(ky.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});ky.set(n,e)}let My={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ky.get(n);if(e==="objectStoreNames")return n.objectStoreNames||sA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function n3(n){My=n(My)}function r3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ny(this),e,...t);return sA.set(r,e.sort?e.sort():[e]),xo(r)}:JI().includes(n)?function(...e){return n.apply(ny(this),e),xo(rA.get(this))}:function(...e){return xo(n.apply(ny(this),e))}}function s3(n){return typeof n=="function"?r3(n):(n instanceof IDBTransaction&&t3(n),WI(n,ZI())?new Proxy(n,My):n)}function xo(n){if(n instanceof IDBRequest)return e3(n);if(ty.has(n))return ty.get(n);const e=s3(n);return e!==n&&(ty.set(n,e),D0.set(e,n)),e}const ny=n=>D0.get(n);function i3(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),h=xo(c);return r&&c.addEventListener("upgradeneeded",f=>{r(xo(c.result),f.oldVersion,f.newVersion,xo(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{l&&f.addEventListener("close",()=>l()),a&&f.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const a3=["get","getKey","getAll","getAllKeys","count"],o3=["put","add","delete","clear"],ry=new Map;function K_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ry.get(e))return ry.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=o3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||a3.includes(t)))return;const l=async function(c,...h){const f=this.transaction(c,a?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),a&&f.done]))[0]};return ry.set(e,l),l}n3(n=>({...n,get:(e,t,r)=>K_(e,t)||n.get(e,t,r),has:(e,t)=>!!K_(e,t)||n.has(e,t)}));class l3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(c3(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function c3(n){return n.getComponent()?.type==="VERSION"}const Py="@firebase/app",Y_="0.14.6";const Ta=new O0("@firebase/app"),u3="@firebase/app-compat",h3="@firebase/analytics-compat",d3="@firebase/analytics",f3="@firebase/app-check-compat",m3="@firebase/app-check",p3="@firebase/auth",g3="@firebase/auth-compat",y3="@firebase/database",v3="@firebase/data-connect",b3="@firebase/database-compat",x3="@firebase/functions",_3="@firebase/functions-compat",E3="@firebase/installations",w3="@firebase/installations-compat",T3="@firebase/messaging",A3="@firebase/messaging-compat",S3="@firebase/performance",N3="@firebase/performance-compat",C3="@firebase/remote-config",R3="@firebase/remote-config-compat",I3="@firebase/storage",j3="@firebase/storage-compat",O3="@firebase/firestore",D3="@firebase/ai",L3="@firebase/firestore-compat",k3="firebase",M3="12.6.0";const Uy="[DEFAULT]",P3={[Py]:"fire-core",[u3]:"fire-core-compat",[d3]:"fire-analytics",[h3]:"fire-analytics-compat",[m3]:"fire-app-check",[f3]:"fire-app-check-compat",[p3]:"fire-auth",[g3]:"fire-auth-compat",[y3]:"fire-rtdb",[v3]:"fire-data-connect",[b3]:"fire-rtdb-compat",[x3]:"fire-fn",[_3]:"fire-fn-compat",[E3]:"fire-iid",[w3]:"fire-iid-compat",[T3]:"fire-fcm",[A3]:"fire-fcm-compat",[S3]:"fire-perf",[N3]:"fire-perf-compat",[C3]:"fire-rc",[R3]:"fire-rc-compat",[I3]:"fire-gcs",[j3]:"fire-gcs-compat",[O3]:"fire-fst",[L3]:"fire-fst-compat",[D3]:"fire-vertex","fire-js":"fire-js",[k3]:"fire-js-all"};const Vf=new Map,U3=new Map,Vy=new Map;function Q_(n,e){try{n.container.addComponent(e)}catch(t){Ta.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Sc(n){const e=n.name;if(Vy.has(e))return Ta.debug(`There were multiple attempts to register component ${e}.`),!1;Vy.set(e,n);for(const t of Vf.values())Q_(t,n);for(const t of U3.values())Q_(t,n);return!0}function L0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function as(n){return n==null?!1:n.settings!==void 0}const V3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_o=new Sh("app","Firebase",V3);class q3{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _o.create("app-deleted",{appName:this._name})}}const $c=M3;function iA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Uy,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw _o.create("bad-app-name",{appName:String(a)});if(t||(t=JT()),!t)throw _o.create("no-options");const l=Vf.get(a);if(l){if(wa(t,l.options)&&wa(r,l.config))return l;throw _o.create("duplicate-app",{appName:a})}const c=new GI(a);for(const f of Vy.values())c.addComponent(f);const h=new q3(t,r,c);return Vf.set(a,h),h}function aA(n=Uy){const e=Vf.get(n);if(!e&&n===Uy&&JT())return iA();if(!e)throw _o.create("no-app",{appName:n});return e}function Eo(n,e,t){let r=P3[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ta.warn(c.join(" "));return}Sc(new hl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const B3="firebase-heartbeat-database",z3=1,ch="firebase-heartbeat-store";let sy=null;function oA(){return sy||(sy=i3(B3,z3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ch)}catch(t){console.warn(t)}}}}).catch(n=>{throw _o.create("idb-open",{originalErrorMessage:n.message})})),sy}async function H3(n){try{const t=(await oA()).transaction(ch),r=await t.objectStore(ch).get(lA(n));return await t.done,r}catch(e){if(e instanceof Ia)Ta.warn(e.message);else{const t=_o.create("idb-get",{originalErrorMessage:e?.message});Ta.warn(t.message)}}}async function X_(n,e){try{const r=(await oA()).transaction(ch,"readwrite");await r.objectStore(ch).put(e,lA(n)),await r.done}catch(t){if(t instanceof Ia)Ta.warn(t.message);else{const r=_o.create("idb-set",{originalErrorMessage:t?.message});Ta.warn(r.message)}}}function lA(n){return`${n.name}!${n.options.appId}`}const F3=1024,$3=30;class G3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Y3(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=W_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>$3){const a=Q3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ta.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=W_(),{heartbeatsToSend:t,unsentEntries:r}=K3(this._heartbeatsCache.heartbeats),a=Uf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ta.warn(e),""}}}function W_(){return new Date().toISOString().substring(0,10)}function K3(n,e=F3){const t=[];let r=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Z_(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Z_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Y3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LI()?kI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await H3(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return X_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return X_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Z_(n){return Uf(JSON.stringify({version:2,heartbeats:n})).length}function Q3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function X3(n){Sc(new hl("platform-logger",e=>new l3(e),"PRIVATE")),Sc(new hl("heartbeat",e=>new G3(e),"PRIVATE")),Eo(Py,Y_,n),Eo(Py,Y_,"esm2020"),Eo("fire-js","")}X3("");var W3="firebase",Z3="12.6.0";Eo(W3,Z3,"app");function cA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const J3=cA,uA=new Sh("auth","Firebase",cA());const qf=new O0("@firebase/auth");function ej(n,...e){qf.logLevel<=ot.WARN&&qf.warn(`Auth (${$c}): ${n}`,...e)}function Af(n,...e){qf.logLevel<=ot.ERROR&&qf.error(`Auth (${$c}): ${n}`,...e)}function Us(n,...e){throw M0(n,...e)}function ii(n,...e){return M0(n,...e)}function k0(n,e,t){const r={...J3(),[e]:t};return new Sh("auth","Firebase",r).create(e,{appName:n.name})}function _a(n){return k0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tj(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Us(n,"argument-error"),k0(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function M0(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return uA.create(n,...e)}function qe(n,e,...t){if(!n)throw M0(e,...t)}function va(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Af(e),new Error(e)}function Aa(n,e){n||va(e)}function qy(){return typeof self<"u"&&self.location?.href||""}function nj(){return J_()==="http:"||J_()==="https:"}function J_(){return typeof self<"u"&&self.location?.protocol||null}function rj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nj()||II()||"connection"in navigator)?navigator.onLine:!0}function sj(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Ch{constructor(e,t){this.shortDelay=e,this.longDelay=t,Aa(t>e,"Short delay should be less than long delay!"),this.isMobile=NI()||jI()}get(){return rj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function P0(n,e){Aa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class hA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;va("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;va("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;va("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ij={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const aj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oj=new Ch(3e4,6e4);function ko(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ja(n,e,t,r,a={}){return dA(n,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const h=Nh({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:f,...l};return RI()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Fc(n.emulatorConfig.host)&&(p.credentials="include"),hA.fetch()(await fA(n,n.config.apiHost,t,h),p)})}async function dA(n,e,t){n._canInitEmulator=!1;const r={...ij,...e};try{const a=new cj(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw rf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw rf(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw rf(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw rf(n,"user-disabled",c);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw k0(n,v,p);Us(n,v)}}catch(a){if(a instanceof Ia)throw a;Us(n,"network-request-failed",{message:String(a)})}}async function Rh(n,e,t,r,a={}){const l=await ja(n,e,t,r,a);return"mfaPendingCredential"in l&&Us(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function fA(n,e,t,r){const a=`${e}${t}?${r}`,l=n,c=l.config.emulator?P0(n.config,a):`${n.config.apiScheme}://${a}`;return aj.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function lj(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ii(this.auth,"network-request-failed")),oj.get())})}}function rf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=ii(n,e,r);return a.customData._tokenResponse=t,a}function eE(n){return n!==void 0&&n.enterprise!==void 0}class uj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lj(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hj(n,e){return ja(n,"GET","/v2/recaptchaConfig",ko(n,e))}async function dj(n,e){return ja(n,"POST","/v1/accounts:delete",e)}async function Bf(n,e){return ja(n,"POST","/v1/accounts:lookup",e)}function th(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fj(n,e=!1){const t=An(n),r=await t.getIdToken(e),a=U0(r);qe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:th(iy(a.auth_time)),issuedAtTime:th(iy(a.iat)),expirationTime:th(iy(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function iy(n){return Number(n)*1e3}function U0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Af("JWT malformed, contained fewer than 3 sections"),null;try{const a=WT(t);return a?JSON.parse(a):(Af("Failed to decode base64 JWT payload"),null)}catch(a){return Af("Caught error parsing JWT payload as JSON",a?.toString()),null}}function tE(n){const e=U0(n);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Nc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ia&&mj(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function mj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class pj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class By{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=th(this.lastLoginAt),this.creationTime=th(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function zf(n){const e=n.auth,t=await n.getIdToken(),r=await Nc(n,Bf(e,{idToken:t}));qe(r?.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?mA(a.providerUserInfo):[],c=yj(n.providerData,l),h=n.isAnonymous,f=!(n.email&&a.passwordHash)&&!c?.length,p=h?f:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new By(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function gj(n){const e=An(n);await zf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yj(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function mA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function vj(n,e){const t=await dA(n,{},async()=>{const r=Nh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await fA(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return n.emulatorConfig&&Fc(n.emulatorConfig.host)&&(f.credentials="include"),hA.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function bj(n,e){return ja(n,"POST","/v2/accounts:revokeToken",ko(n,e))}class bc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const t=tE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await vj(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new bc;return r&&(qe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(qe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(qe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bc,this.toJSON())}_performRefresh(){return va("not implemented")}}function co(n,e){qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class si{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new pj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new By(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Nc(this,this.stsTokenManager.getToken(this.auth,e));return qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fj(this,e)}reload(){return gj(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new si({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await zf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(as(this.auth.app))return Promise.reject(_a(this.auth));const e=await this.getIdToken();return await Nc(this,dj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,f=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:b,emailVerified:_,isAnonymous:T,providerData:S,stsTokenManager:O}=t;qe(b&&O,e,"internal-error");const R=bc.fromJSON(this.name,O);qe(typeof b=="string",e,"internal-error"),co(r,e.name),co(a,e.name),qe(typeof _=="boolean",e,"internal-error"),qe(typeof T=="boolean",e,"internal-error"),co(l,e.name),co(c,e.name),co(h,e.name),co(f,e.name),co(p,e.name),co(v,e.name);const U=new si({uid:b,auth:e,email:a,emailVerified:_,displayName:r,isAnonymous:T,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:R,createdAt:p,lastLoginAt:v});return S&&Array.isArray(S)&&(U.providerData=S.map(z=>({...z}))),f&&(U._redirectEventId=f),U}static async _fromIdTokenResponse(e,t,r=!1){const a=new bc;a.updateFromServerResponse(t);const l=new si({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await zf(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];qe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?mA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,h=new bc;h.updateFromIdToken(r);const f=new si({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new By(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(f,p),f}}const nE=new Map;function ba(n){Aa(n instanceof Function,"Expected a class definition");let e=nE.get(n);return e?(Aa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nE.set(n,e),e)}class pA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pA.type="NONE";const rE=pA;function Sf(n,e,t){return`firebase:${n}:${e}:${t}`}class xc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Sf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Sf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Bf(this.auth,{idToken:e}).catch(()=>{});return t?si._fromGetAccountInfoResponse(this.auth,t,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new xc(ba(rE),e,r);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||ba(rE);const c=Sf(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const v=await p._get(c);if(v){let b;if(typeof v=="string"){const _=await Bf(e,{idToken:v}).catch(()=>{});if(!_)break;b=await si._fromGetAccountInfoResponse(e,_,v)}else b=si._fromJSON(e,v);p!==l&&(h=b),l=p;break}}catch{}const f=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new xc(l,e,r):(l=f[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new xc(l,e,r))}}function sE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_A(e))return"Blackberry";if(EA(e))return"Webos";if(yA(e))return"Safari";if((e.includes("chrome/")||vA(e))&&!e.includes("edge/"))return"Chrome";if(xA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function gA(n=fr()){return/firefox\//i.test(n)}function yA(n=fr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vA(n=fr()){return/crios\//i.test(n)}function bA(n=fr()){return/iemobile/i.test(n)}function xA(n=fr()){return/android/i.test(n)}function _A(n=fr()){return/blackberry/i.test(n)}function EA(n=fr()){return/webos/i.test(n)}function V0(n=fr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function xj(n=fr()){return V0(n)&&!!window.navigator?.standalone}function _j(){return OI()&&document.documentMode===10}function wA(n=fr()){return V0(n)||xA(n)||EA(n)||_A(n)||/windows phone/i.test(n)||bA(n)}function TA(n,e=[]){let t;switch(n){case"Browser":t=sE(fr());break;case"Worker":t=`${sE(fr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$c}/${r}`}class Ej{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,h)=>{try{const f=e(l);c(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function wj(n,e={}){return ja(n,"GET","/v2/passwordPolicy",ko(n,e))}const Tj=6;class Aj{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Tj,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class Sj{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iE(this),this.idTokenSubscription=new iE(this),this.beforeStateQueue=new Ej(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ba(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Bf(this,{idToken:e}),r=await si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(as(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&h?.user&&(r=h.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(as(this.app))return Promise.reject(_a(this));const t=e?An(e):null;return t&&qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return as(this.app)?Promise.reject(_a(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return as(this.app)?Promise.reject(_a(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ba(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wj(this),t=new Aj(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await bj(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ba(e)||this._popupRedirectResolver;qe(t,this,"argument-error"),this.redirectPersistenceManager=await xc.create(this,[ba(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,a);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(as(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ej(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Mo(n){return An(n)}class iE{constructor(e){this.auth=e,this.observer=null,this.addObserver=qI(t=>this.observer=t)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let mm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nj(n){mm=n}function AA(n){return mm.loadJS(n)}function Cj(){return mm.recaptchaEnterpriseScript}function Rj(){return mm.gapiScript}function Ij(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class jj{constructor(){this.enterprise=new Oj}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Oj{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Dj="recaptcha-enterprise",SA="NO_RECAPTCHA";class Lj{constructor(e){this.type=Dj,this.auth=Mo(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{hj(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new uj(f);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(f=>{h(f)})})}function a(l,c,h){const f=window.grecaptcha;eE(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(SA)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jj().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(h=>{if(!t&&eE(window.grecaptcha))a(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=Cj();f.length!==0&&(f+=h),AA(f).then(()=>{a(h,l,c)}).catch(p=>{c(p)})}}).catch(h=>{c(h)})})}}async function aE(n,e,t,r=!1,a=!1){const l=new Lj(n);let c;if(a)c=SA;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function zy(n,e,t,r,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await aE(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await aE(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}function kj(n,e){const t=L0(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(wa(l,e??{}))return a;Us(a,"already-initialized")}return t.initialize({options:e})}function Mj(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ba);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Pj(n,e,t){const r=Mo(n);qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=NA(e),{host:c,port:h}=Uj(e),f=h===null?"":`:${h}`,p={url:`${l}//${c}${f}/`},v=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),qe(wa(p,r.config.emulator)&&wa(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Fc(c)?(tA(`${l}//${c}${f}`),nA("Auth",!0)):Vj()}function NA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Uj(n){const e=NA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:oE(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:oE(c)}}}function oE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Vj(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class q0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return va("not implemented")}_getIdTokenResponse(e){return va("not implemented")}_linkToIdToken(e,t){return va("not implemented")}_getReauthenticationResolver(e){return va("not implemented")}}async function qj(n,e){return ja(n,"POST","/v1/accounts:signUp",e)}async function Bj(n,e){return Rh(n,"POST","/v1/accounts:signInWithPassword",ko(n,e))}async function zj(n,e){return Rh(n,"POST","/v1/accounts:signInWithEmailLink",ko(n,e))}async function Hj(n,e){return Rh(n,"POST","/v1/accounts:signInWithEmailLink",ko(n,e))}class uh extends q0{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new uh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new uh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zy(e,t,"signInWithPassword",Bj);case"emailLink":return zj(e,{email:this._email,oobCode:this._password});default:Us(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zy(e,r,"signUpPassword",qj);case"emailLink":return Hj(e,{idToken:t,email:this._email,oobCode:this._password});default:Us(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function _c(n,e){return Rh(n,"POST","/v1/accounts:signInWithIdp",ko(n,e))}const Fj="http://localhost";class dl extends q0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new dl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Us("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new dl(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return _c(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,_c(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_c(e,t)}buildRequest(){const e={requestUri:Fj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nh(t)}return e}}function $j(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Gj(n){const e=$u(Gu(n)).link,t=e?$u(Gu(e)).deep_link_id:null,r=$u(Gu(n)).deep_link_id;return(r?$u(Gu(r)).link:null)||r||t||e||n}class B0{constructor(e){const t=$u(Gu(e)),r=t.apiKey??null,a=t.oobCode??null,l=$j(t.mode??null);qe(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Gj(e);try{return new B0(t)}catch{return null}}}class Gc{constructor(){this.providerId=Gc.PROVIDER_ID}static credential(e,t){return uh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=B0.parseLink(t);return qe(r,"argument-error"),uh._fromEmailAndCode(e,r.code,r.tenantId)}}Gc.PROVIDER_ID="password";Gc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class z0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ih extends z0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ho extends Ih{constructor(){super("facebook.com")}static credential(e){return dl._fromParams({providerId:ho.PROVIDER_ID,signInMethod:ho.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ho.credentialFromTaggedObject(e)}static credentialFromError(e){return ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ho.credential(e.oauthAccessToken)}catch{return null}}}ho.FACEBOOK_SIGN_IN_METHOD="facebook.com";ho.PROVIDER_ID="facebook.com";class Si extends Ih{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return dl._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Si.credential(t,r)}catch{return null}}}Si.GOOGLE_SIGN_IN_METHOD="google.com";Si.PROVIDER_ID="google.com";class fo extends Ih{constructor(){super("github.com")}static credential(e){return dl._fromParams({providerId:fo.PROVIDER_ID,signInMethod:fo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fo.credentialFromTaggedObject(e)}static credentialFromError(e){return fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fo.credential(e.oauthAccessToken)}catch{return null}}}fo.GITHUB_SIGN_IN_METHOD="github.com";fo.PROVIDER_ID="github.com";class mo extends Ih{constructor(){super("twitter.com")}static credential(e,t){return dl._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return mo.credential(t,r)}catch{return null}}}mo.TWITTER_SIGN_IN_METHOD="twitter.com";mo.PROVIDER_ID="twitter.com";async function Kj(n,e){return Rh(n,"POST","/v1/accounts:signUp",ko(n,e))}class fl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await si._fromIdTokenResponse(e,r,a),c=lE(r);return new fl({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=lE(r);return new fl({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function lE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Hf extends Ia{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Hf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Hf(e,t,r,a)}}function CA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Hf._fromErrorAndOperation(n,l,e,r):l})}async function Yj(n,e,t=!1){const r=await Nc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return fl._forOperation(n,"link",r)}async function Qj(n,e,t=!1){const{auth:r}=n;if(as(r.app))return Promise.reject(_a(r));const a="reauthenticate";try{const l=await Nc(n,CA(r,a,e,n),t);qe(l.idToken,r,"internal-error");const c=U0(l.idToken);qe(c,r,"internal-error");const{sub:h}=c;return qe(n.uid===h,r,"user-mismatch"),fl._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Us(r,"user-mismatch"),l}}async function RA(n,e,t=!1){if(as(n.app))return Promise.reject(_a(n));const r="signIn",a=await CA(n,r,e),l=await fl._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function Xj(n,e){return RA(Mo(n),e)}async function IA(n){const e=Mo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Wj(n,e,t){if(as(n.app))return Promise.reject(_a(n));const r=Mo(n),c=await zy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Kj).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&IA(n),f}),h=await fl._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function Zj(n,e,t){return as(n.app)?Promise.reject(_a(n)):Xj(An(n),Gc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&IA(n),r})}async function Jj(n,e){return ja(n,"POST","/v1/accounts:update",e)}async function eO(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=An(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Nc(r,Jj(r.auth,l));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function tO(n,e,t,r){return An(n).onIdTokenChanged(e,t,r)}function nO(n,e,t){return An(n).beforeAuthStateChanged(e,t)}function jh(n,e,t,r){return An(n).onAuthStateChanged(e,t,r)}function rO(n){return An(n).signOut()}const Ff="__sak";class jA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const sO=1e3,iO=10;class OA extends jA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,f)=>{this.notifyListeners(c,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);_j()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,iO):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},sO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}OA.type="LOCAL";const aO=OA;class DA extends jA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}DA.type="SESSION";const LA=DA;function oO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class pm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new pm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const h=Array.from(c).map(async p=>p(t.origin,l)),f=await oO(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pm.receivers=[];function H0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class lO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((h,f)=>{const p=H0("",20);a.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(b){const _=b;if(_.data.eventId===p)switch(_.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(_.data.response);break;default:clearTimeout(v),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ni(){return window}function cO(n){Ni().location.href=n}function kA(){return typeof Ni().WorkerGlobalScope<"u"&&typeof Ni().importScripts=="function"}async function uO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hO(){return navigator?.serviceWorker?.controller||null}function dO(){return kA()?self:null}const MA="firebaseLocalStorageDb",fO=1,$f="firebaseLocalStorage",PA="fbase_key";class Oh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gm(n,e){return n.transaction([$f],e?"readwrite":"readonly").objectStore($f)}function mO(){const n=indexedDB.deleteDatabase(MA);return new Oh(n).toPromise()}function Hy(){const n=indexedDB.open(MA,fO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore($f,{keyPath:PA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains($f)?e(r):(r.close(),await mO(),e(await Hy()))})})}async function cE(n,e,t){const r=gm(n,!0).put({[PA]:e,value:t});return new Oh(r).toPromise()}async function pO(n,e){const t=gm(n,!1).get(e),r=await new Oh(t).toPromise();return r===void 0?null:r.value}function uE(n,e){const t=gm(n,!0).delete(e);return new Oh(t).toPromise()}const gO=800,yO=3;class UA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>yO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pm._getInstance(dO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await uO(),!this.activeServiceWorker)return;this.sender=new lO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hy();return await cE(e,Ff,"1"),await uE(e,Ff),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>cE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>pO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=gm(a,!1).getAll();return new Oh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UA.type="LOCAL";const vO=UA;new Ch(3e4,6e4);function VA(n,e){return e?ba(e):(qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class F0 extends q0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _c(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _c(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _c(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function bO(n){return RA(n.auth,new F0(n),n.bypassAuthState)}function xO(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),Qj(t,new F0(n),n.bypassAuthState)}async function _O(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),Yj(t,new F0(n),n.bypassAuthState)}class qA{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bO;case"linkViaPopup":case"linkViaRedirect":return _O;case"reauthViaPopup":case"reauthViaRedirect":return xO;default:Us(this.auth,"internal-error")}}resolve(e){Aa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Aa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const EO=new Ch(2e3,1e4);async function BA(n,e,t){if(as(n.app))return Promise.reject(ii(n,"operation-not-supported-in-this-environment"));const r=Mo(n);tj(n,e,z0);const a=VA(r,t);return new al(r,"signInViaPopup",e,a).executeNotNull()}class al extends qA{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,al.currentPopupAction&&al.currentPopupAction.cancel(),al.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){Aa(this.filter.length===1,"Popup operations only handle one event");const e=H0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,al.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EO.get())};e()}}al.currentPopupAction=null;const wO="pendingRedirect",Nf=new Map;class TO extends qA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Nf.get(this.auth._key());if(!e){try{const r=await AO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Nf.set(this.auth._key(),e)}return this.bypassAuthState||Nf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AO(n,e){const t=CO(e),r=NO(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function SO(n,e){Nf.set(n._key(),e)}function NO(n){return ba(n._redirectPersistence)}function CO(n){return Sf(wO,n.config.apiKey,n.name)}async function RO(n,e,t=!1){if(as(n.app))return Promise.reject(_a(n));const r=Mo(n),a=VA(r,e),c=await new TO(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const IO=600*1e3;class jO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!zA(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ii(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IO&&this.cachedEventUids.clear(),this.cachedEventUids.has(hE(e))}saveEventToCache(e){this.cachedEventUids.add(hE(e)),this.lastProcessedEventTime=Date.now()}}function hE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function zA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function OO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zA(n);default:return!1}}async function DO(n,e={}){return ja(n,"GET","/v1/projects",e)}const LO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kO=/^https?/;async function MO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await DO(n);for(const t of e)try{if(PO(t))return}catch{}Us(n,"unauthorized-domain")}function PO(n){const e=qy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!kO.test(t))return!1;if(LO.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const UO=new Ch(3e4,6e4);function dE(){const n=Ni().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function VO(n){return new Promise((e,t)=>{function r(){dE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dE(),t(ii(n,"network-request-failed"))},timeout:UO.get()})}if(Ni().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ni().gapi?.load)r();else{const a=Ij("iframefcb");return Ni()[a]=()=>{gapi.load?r():t(ii(n,"network-request-failed"))},AA(`${Rj()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Cf=null,e})}let Cf=null;function qO(n){return Cf=Cf||VO(n),Cf}const BO=new Ch(5e3,15e3),zO="__/auth/iframe",HO="emulator/auth/iframe",FO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$O=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GO(n){const e=n.config;qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?P0(e,HO):`https://${n.config.authDomain}/${zO}`,r={apiKey:e.apiKey,appName:n.name,v:$c},a=$O.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Nh(r).slice(1)}`}async function KO(n){const e=await qO(n),t=Ni().gapi;return qe(t,n,"internal-error"),e.open({where:document.body,url:GO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FO,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=ii(n,"network-request-failed"),h=Ni().setTimeout(()=>{l(c)},BO.get());function f(){Ni().clearTimeout(h),a(r)}r.ping(f).then(f,()=>{l(c)})}))}const YO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QO=500,XO=600,WO="_blank",ZO="http://localhost";class fE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JO(n,e,t,r=QO,a=XO){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f={...YO,width:r.toString(),height:a.toString(),top:l,left:c},p=fr().toLowerCase();t&&(h=vA(p)?WO:t),gA(p)&&(e=e||ZO,f.scrollbars="yes");const v=Object.entries(f).reduce((_,[T,S])=>`${_}${T}=${S},`,"");if(xj(p)&&h!=="_self")return e6(e||"",h),new fE(null);const b=window.open(e||"",h,v);qe(b,n,"popup-blocked");try{b.focus()}catch{}return new fE(b)}function e6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const t6="__/auth/handler",n6="emulator/auth/handler",r6=encodeURIComponent("fac");async function mE(n,e,t,r,a,l){qe(n.config.authDomain,n,"auth-domain-config-required"),qe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:$c,eventId:a};if(e instanceof z0){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",VI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))c[v]=b}if(e instanceof Ih){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const f=await n._getAppCheckToken(),p=f?`#${r6}=${encodeURIComponent(f)}`:"";return`${s6(n)}?${Nh(h).slice(1)}${p}`}function s6({config:n}){return n.emulator?P0(n,n6):`https://${n.authDomain}/${t6}`}const ay="webStorageSupport";class i6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LA,this._completeRedirectFn=RO,this._overrideRedirectResult=SO}async _openPopup(e,t,r,a){Aa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await mE(e,t,r,qy(),a);return JO(e,l,H0())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await mE(e,t,r,qy(),a);return cO(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Aa(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await KO(e),r=new jO(e);return t.register("authEvent",a=>(qe(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ay,{type:ay},a=>{const l=a?.[0]?.[ay];l!==void 0&&t(!!l),Us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=MO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wA()||yA()||V0()}}const a6=i6;var pE="@firebase/auth",gE="1.11.1";class o6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function l6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function c6(n){Sc(new hl("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;qe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TA(n)},p=new Sj(r,a,l,f);return Mj(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Sc(new hl("auth-internal",e=>{const t=Mo(e.getProvider("auth").getImmediate());return(r=>new o6(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Eo(pE,gE,l6(n)),Eo(pE,gE,"esm2020")}const u6=300,h6=eA("authIdTokenMaxAge")||u6;let yE=null;const d6=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>h6)return;const a=t?.token;yE!==a&&(yE=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function f6(n=aA()){const e=L0(n,"auth");if(e.isInitialized())return e.getImmediate();const t=kj(n,{popupRedirectResolver:a6,persistence:[vO,aO,LA]}),r=eA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=d6(l.toString());nO(t,c,()=>c(t.currentUser)),tO(t,h=>c(h))}}const a=ZT("auth");return a&&Pj(t,`http://${a}`),t}function m6(){return document.getElementsByTagName("head")?.[0]??document}Nj({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=ii("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",m6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});c6("Browser");var vE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var wo,HA;(function(){var n;function e(L,k){function V(){}V.prototype=k.prototype,L.F=k.prototype,L.prototype=new V,L.prototype.constructor=L,L.D=function($,N,P){for(var C=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)C[ge-2]=arguments[ge];return k.prototype[N].apply($,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(L,k,V){V||(V=0);const $=Array(16);if(typeof k=="string")for(var N=0;N<16;++N)$[N]=k.charCodeAt(V++)|k.charCodeAt(V++)<<8|k.charCodeAt(V++)<<16|k.charCodeAt(V++)<<24;else for(N=0;N<16;++N)$[N]=k[V++]|k[V++]<<8|k[V++]<<16|k[V++]<<24;k=L.g[0],V=L.g[1],N=L.g[2];let P=L.g[3],C;C=k+(P^V&(N^P))+$[0]+3614090360&4294967295,k=V+(C<<7&4294967295|C>>>25),C=P+(N^k&(V^N))+$[1]+3905402710&4294967295,P=k+(C<<12&4294967295|C>>>20),C=N+(V^P&(k^V))+$[2]+606105819&4294967295,N=P+(C<<17&4294967295|C>>>15),C=V+(k^N&(P^k))+$[3]+3250441966&4294967295,V=N+(C<<22&4294967295|C>>>10),C=k+(P^V&(N^P))+$[4]+4118548399&4294967295,k=V+(C<<7&4294967295|C>>>25),C=P+(N^k&(V^N))+$[5]+1200080426&4294967295,P=k+(C<<12&4294967295|C>>>20),C=N+(V^P&(k^V))+$[6]+2821735955&4294967295,N=P+(C<<17&4294967295|C>>>15),C=V+(k^N&(P^k))+$[7]+4249261313&4294967295,V=N+(C<<22&4294967295|C>>>10),C=k+(P^V&(N^P))+$[8]+1770035416&4294967295,k=V+(C<<7&4294967295|C>>>25),C=P+(N^k&(V^N))+$[9]+2336552879&4294967295,P=k+(C<<12&4294967295|C>>>20),C=N+(V^P&(k^V))+$[10]+4294925233&4294967295,N=P+(C<<17&4294967295|C>>>15),C=V+(k^N&(P^k))+$[11]+2304563134&4294967295,V=N+(C<<22&4294967295|C>>>10),C=k+(P^V&(N^P))+$[12]+1804603682&4294967295,k=V+(C<<7&4294967295|C>>>25),C=P+(N^k&(V^N))+$[13]+4254626195&4294967295,P=k+(C<<12&4294967295|C>>>20),C=N+(V^P&(k^V))+$[14]+2792965006&4294967295,N=P+(C<<17&4294967295|C>>>15),C=V+(k^N&(P^k))+$[15]+1236535329&4294967295,V=N+(C<<22&4294967295|C>>>10),C=k+(N^P&(V^N))+$[1]+4129170786&4294967295,k=V+(C<<5&4294967295|C>>>27),C=P+(V^N&(k^V))+$[6]+3225465664&4294967295,P=k+(C<<9&4294967295|C>>>23),C=N+(k^V&(P^k))+$[11]+643717713&4294967295,N=P+(C<<14&4294967295|C>>>18),C=V+(P^k&(N^P))+$[0]+3921069994&4294967295,V=N+(C<<20&4294967295|C>>>12),C=k+(N^P&(V^N))+$[5]+3593408605&4294967295,k=V+(C<<5&4294967295|C>>>27),C=P+(V^N&(k^V))+$[10]+38016083&4294967295,P=k+(C<<9&4294967295|C>>>23),C=N+(k^V&(P^k))+$[15]+3634488961&4294967295,N=P+(C<<14&4294967295|C>>>18),C=V+(P^k&(N^P))+$[4]+3889429448&4294967295,V=N+(C<<20&4294967295|C>>>12),C=k+(N^P&(V^N))+$[9]+568446438&4294967295,k=V+(C<<5&4294967295|C>>>27),C=P+(V^N&(k^V))+$[14]+3275163606&4294967295,P=k+(C<<9&4294967295|C>>>23),C=N+(k^V&(P^k))+$[3]+4107603335&4294967295,N=P+(C<<14&4294967295|C>>>18),C=V+(P^k&(N^P))+$[8]+1163531501&4294967295,V=N+(C<<20&4294967295|C>>>12),C=k+(N^P&(V^N))+$[13]+2850285829&4294967295,k=V+(C<<5&4294967295|C>>>27),C=P+(V^N&(k^V))+$[2]+4243563512&4294967295,P=k+(C<<9&4294967295|C>>>23),C=N+(k^V&(P^k))+$[7]+1735328473&4294967295,N=P+(C<<14&4294967295|C>>>18),C=V+(P^k&(N^P))+$[12]+2368359562&4294967295,V=N+(C<<20&4294967295|C>>>12),C=k+(V^N^P)+$[5]+4294588738&4294967295,k=V+(C<<4&4294967295|C>>>28),C=P+(k^V^N)+$[8]+2272392833&4294967295,P=k+(C<<11&4294967295|C>>>21),C=N+(P^k^V)+$[11]+1839030562&4294967295,N=P+(C<<16&4294967295|C>>>16),C=V+(N^P^k)+$[14]+4259657740&4294967295,V=N+(C<<23&4294967295|C>>>9),C=k+(V^N^P)+$[1]+2763975236&4294967295,k=V+(C<<4&4294967295|C>>>28),C=P+(k^V^N)+$[4]+1272893353&4294967295,P=k+(C<<11&4294967295|C>>>21),C=N+(P^k^V)+$[7]+4139469664&4294967295,N=P+(C<<16&4294967295|C>>>16),C=V+(N^P^k)+$[10]+3200236656&4294967295,V=N+(C<<23&4294967295|C>>>9),C=k+(V^N^P)+$[13]+681279174&4294967295,k=V+(C<<4&4294967295|C>>>28),C=P+(k^V^N)+$[0]+3936430074&4294967295,P=k+(C<<11&4294967295|C>>>21),C=N+(P^k^V)+$[3]+3572445317&4294967295,N=P+(C<<16&4294967295|C>>>16),C=V+(N^P^k)+$[6]+76029189&4294967295,V=N+(C<<23&4294967295|C>>>9),C=k+(V^N^P)+$[9]+3654602809&4294967295,k=V+(C<<4&4294967295|C>>>28),C=P+(k^V^N)+$[12]+3873151461&4294967295,P=k+(C<<11&4294967295|C>>>21),C=N+(P^k^V)+$[15]+530742520&4294967295,N=P+(C<<16&4294967295|C>>>16),C=V+(N^P^k)+$[2]+3299628645&4294967295,V=N+(C<<23&4294967295|C>>>9),C=k+(N^(V|~P))+$[0]+4096336452&4294967295,k=V+(C<<6&4294967295|C>>>26),C=P+(V^(k|~N))+$[7]+1126891415&4294967295,P=k+(C<<10&4294967295|C>>>22),C=N+(k^(P|~V))+$[14]+2878612391&4294967295,N=P+(C<<15&4294967295|C>>>17),C=V+(P^(N|~k))+$[5]+4237533241&4294967295,V=N+(C<<21&4294967295|C>>>11),C=k+(N^(V|~P))+$[12]+1700485571&4294967295,k=V+(C<<6&4294967295|C>>>26),C=P+(V^(k|~N))+$[3]+2399980690&4294967295,P=k+(C<<10&4294967295|C>>>22),C=N+(k^(P|~V))+$[10]+4293915773&4294967295,N=P+(C<<15&4294967295|C>>>17),C=V+(P^(N|~k))+$[1]+2240044497&4294967295,V=N+(C<<21&4294967295|C>>>11),C=k+(N^(V|~P))+$[8]+1873313359&4294967295,k=V+(C<<6&4294967295|C>>>26),C=P+(V^(k|~N))+$[15]+4264355552&4294967295,P=k+(C<<10&4294967295|C>>>22),C=N+(k^(P|~V))+$[6]+2734768916&4294967295,N=P+(C<<15&4294967295|C>>>17),C=V+(P^(N|~k))+$[13]+1309151649&4294967295,V=N+(C<<21&4294967295|C>>>11),C=k+(N^(V|~P))+$[4]+4149444226&4294967295,k=V+(C<<6&4294967295|C>>>26),C=P+(V^(k|~N))+$[11]+3174756917&4294967295,P=k+(C<<10&4294967295|C>>>22),C=N+(k^(P|~V))+$[2]+718787259&4294967295,N=P+(C<<15&4294967295|C>>>17),C=V+(P^(N|~k))+$[9]+3951481745&4294967295,L.g[0]=L.g[0]+k&4294967295,L.g[1]=L.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,L.g[2]=L.g[2]+N&4294967295,L.g[3]=L.g[3]+P&4294967295}r.prototype.v=function(L,k){k===void 0&&(k=L.length);const V=k-this.blockSize,$=this.C;let N=this.h,P=0;for(;P<k;){if(N==0)for(;P<=V;)a(this,L,P),P+=this.blockSize;if(typeof L=="string"){for(;P<k;)if($[N++]=L.charCodeAt(P++),N==this.blockSize){a(this,$),N=0;break}}else for(;P<k;)if($[N++]=L[P++],N==this.blockSize){a(this,$),N=0;break}}this.h=N,this.o+=k},r.prototype.A=function(){var L=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);L[0]=128;for(var k=1;k<L.length-8;++k)L[k]=0;k=this.o*8;for(var V=L.length-8;V<L.length;++V)L[V]=k&255,k/=256;for(this.v(L),L=Array(16),k=0,V=0;V<4;++V)for(let $=0;$<32;$+=8)L[k++]=this.g[V]>>>$&255;return L};function l(L,k){var V=h;return Object.prototype.hasOwnProperty.call(V,L)?V[L]:V[L]=k(L)}function c(L,k){this.h=k;const V=[];let $=!0;for(let N=L.length-1;N>=0;N--){const P=L[N]|0;$&&P==k||(V[N]=P,$=!1)}this.g=V}var h={};function f(L){return-128<=L&&L<128?l(L,function(k){return new c([k|0],k<0?-1:0)}):new c([L|0],L<0?-1:0)}function p(L){if(isNaN(L)||!isFinite(L))return b;if(L<0)return R(p(-L));const k=[];let V=1;for(let $=0;L>=V;$++)k[$]=L/V|0,V*=4294967296;return new c(k,0)}function v(L,k){if(L.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(L.charAt(0)=="-")return R(v(L.substring(1),k));if(L.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=p(Math.pow(k,8));let $=b;for(let P=0;P<L.length;P+=8){var N=Math.min(8,L.length-P);const C=parseInt(L.substring(P,P+N),k);N<8?(N=p(Math.pow(k,N)),$=$.j(N).add(p(C))):($=$.j(V),$=$.add(p(C)))}return $}var b=f(0),_=f(1),T=f(16777216);n=c.prototype,n.m=function(){if(O(this))return-R(this).m();let L=0,k=1;for(let V=0;V<this.g.length;V++){const $=this.i(V);L+=($>=0?$:4294967296+$)*k,k*=4294967296}return L},n.toString=function(L){if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(S(this))return"0";if(O(this))return"-"+R(this).toString(L);const k=p(Math.pow(L,6));var V=this;let $="";for(;;){const N=Q(V,k).g;V=U(V,N.j(k));let P=((V.g.length>0?V.g[0]:V.h)>>>0).toString(L);if(V=N,S(V))return P+$;for(;P.length<6;)P="0"+P;$=P+$}},n.i=function(L){return L<0?0:L<this.g.length?this.g[L]:this.h};function S(L){if(L.h!=0)return!1;for(let k=0;k<L.g.length;k++)if(L.g[k]!=0)return!1;return!0}function O(L){return L.h==-1}n.l=function(L){return L=U(this,L),O(L)?-1:S(L)?0:1};function R(L){const k=L.g.length,V=[];for(let $=0;$<k;$++)V[$]=~L.g[$];return new c(V,~L.h).add(_)}n.abs=function(){return O(this)?R(this):this},n.add=function(L){const k=Math.max(this.g.length,L.g.length),V=[];let $=0;for(let N=0;N<=k;N++){let P=$+(this.i(N)&65535)+(L.i(N)&65535),C=(P>>>16)+(this.i(N)>>>16)+(L.i(N)>>>16);$=C>>>16,P&=65535,C&=65535,V[N]=C<<16|P}return new c(V,V[V.length-1]&-2147483648?-1:0)};function U(L,k){return L.add(R(k))}n.j=function(L){if(S(this)||S(L))return b;if(O(this))return O(L)?R(this).j(R(L)):R(R(this).j(L));if(O(L))return R(this.j(R(L)));if(this.l(T)<0&&L.l(T)<0)return p(this.m()*L.m());const k=this.g.length+L.g.length,V=[];for(var $=0;$<2*k;$++)V[$]=0;for($=0;$<this.g.length;$++)for(let N=0;N<L.g.length;N++){const P=this.i($)>>>16,C=this.i($)&65535,ge=L.i(N)>>>16,pe=L.i(N)&65535;V[2*$+2*N]+=C*pe,z(V,2*$+2*N),V[2*$+2*N+1]+=P*pe,z(V,2*$+2*N+1),V[2*$+2*N+1]+=C*ge,z(V,2*$+2*N+1),V[2*$+2*N+2]+=P*ge,z(V,2*$+2*N+2)}for(L=0;L<k;L++)V[L]=V[2*L+1]<<16|V[2*L];for(L=k;L<2*k;L++)V[L]=0;return new c(V,0)};function z(L,k){for(;(L[k]&65535)!=L[k];)L[k+1]+=L[k]>>>16,L[k]&=65535,k++}function Y(L,k){this.g=L,this.h=k}function Q(L,k){if(S(k))throw Error("division by zero");if(S(L))return new Y(b,b);if(O(L))return k=Q(R(L),k),new Y(R(k.g),R(k.h));if(O(k))return k=Q(L,R(k)),new Y(R(k.g),k.h);if(L.g.length>30){if(O(L)||O(k))throw Error("slowDivide_ only works with positive integers.");for(var V=_,$=k;$.l(L)<=0;)V=ie(V),$=ie($);var N=ve(V,1),P=ve($,1);for($=ve($,2),V=ve(V,2);!S($);){var C=P.add($);C.l(L)<=0&&(N=N.add(V),P=C),$=ve($,1),V=ve(V,1)}return k=U(L,N.j(k)),new Y(N,k)}for(N=b;L.l(k)>=0;){for(V=Math.max(1,Math.floor(L.m()/k.m())),$=Math.ceil(Math.log(V)/Math.LN2),$=$<=48?1:Math.pow(2,$-48),P=p(V),C=P.j(k);O(C)||C.l(L)>0;)V-=$,P=p(V),C=P.j(k);S(P)&&(P=_),N=N.add(P),L=U(L,C)}return new Y(N,L)}n.B=function(L){return Q(this,L).h},n.and=function(L){const k=Math.max(this.g.length,L.g.length),V=[];for(let $=0;$<k;$++)V[$]=this.i($)&L.i($);return new c(V,this.h&L.h)},n.or=function(L){const k=Math.max(this.g.length,L.g.length),V=[];for(let $=0;$<k;$++)V[$]=this.i($)|L.i($);return new c(V,this.h|L.h)},n.xor=function(L){const k=Math.max(this.g.length,L.g.length),V=[];for(let $=0;$<k;$++)V[$]=this.i($)^L.i($);return new c(V,this.h^L.h)};function ie(L){const k=L.g.length+1,V=[];for(let $=0;$<k;$++)V[$]=L.i($)<<1|L.i($-1)>>>31;return new c(V,L.h)}function ve(L,k){const V=k>>5;k%=32;const $=L.g.length-V,N=[];for(let P=0;P<$;P++)N[P]=k>0?L.i(P+V)>>>k|L.i(P+V+1)<<32-k:L.i(P+V);return new c(N,L.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,HA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,wo=c}).apply(typeof vE<"u"?vE:typeof self<"u"?self:typeof window<"u"?window:{});var sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var FA,Ku,$A,Rf,Fy,GA,KA,YA;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof sf=="object"&&sf];for(var x=0;x<d.length;++x){var A=d[x];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=t(this);function a(d,x){if(x)e:{var A=r;d=d.split(".");for(var D=0;D<d.length-1;D++){var X=d[D];if(!(X in A))break e;A=A[X]}d=d[d.length-1],D=A[d],x=x(D),x!=D&&x!=null&&e(A,d,{configurable:!0,writable:!0,value:x})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(x){var A=[],D;for(D in x)Object.prototype.hasOwnProperty.call(x,D)&&A.push([D,x[D]]);return A}});var l=l||{},c=this||self;function h(d){var x=typeof d;return x=="object"&&d!=null||x=="function"}function f(d,x,A){return d.call.apply(d.bind,arguments)}function p(d,x,A){return p=f,p.apply(null,arguments)}function v(d,x){var A=Array.prototype.slice.call(arguments,1);return function(){var D=A.slice();return D.push.apply(D,arguments),d.apply(this,D)}}function b(d,x){function A(){}A.prototype=x.prototype,d.Z=x.prototype,d.prototype=new A,d.prototype.constructor=d,d.Ob=function(D,X,re){for(var _e=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)_e[Ke-2]=arguments[Ke];return x.prototype[X].apply(D,_e)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function T(d){const x=d.length;if(x>0){const A=Array(x);for(let D=0;D<x;D++)A[D]=d[D];return A}return[]}function S(d,x){for(let D=1;D<arguments.length;D++){const X=arguments[D];var A=typeof X;if(A=A!="object"?A:X?Array.isArray(X)?"array":A:"null",A=="array"||A=="object"&&typeof X.length=="number"){A=d.length||0;const re=X.length||0;d.length=A+re;for(let _e=0;_e<re;_e++)d[A+_e]=X[_e]}else d.push(X)}}class O{constructor(x,A){this.i=x,this.j=A,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function R(d){c.setTimeout(()=>{throw d},0)}function U(){var d=L;let x=null;return d.g&&(x=d.g,d.g=d.g.next,d.g||(d.h=null),x.next=null),x}class z{constructor(){this.h=this.g=null}add(x,A){const D=Y.get();D.set(x,A),this.h?this.h.next=D:this.g=D,this.h=D}}var Y=new O(()=>new Q,d=>d.reset());class Q{constructor(){this.next=this.g=this.h=null}set(x,A){this.h=x,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ve=!1,L=new z,k=()=>{const d=Promise.resolve(void 0);ie=()=>{d.then(V)}};function V(){for(var d;d=U();){try{d.h.call(d.g)}catch(A){R(A)}var x=Y;x.j(d),x.h<100&&(x.h++,d.next=x.g,x.g=d)}ve=!1}function $(){this.u=this.u,this.C=this.C}$.prototype.u=!1,$.prototype.dispose=function(){this.u||(this.u=!0,this.N())},$.prototype[Symbol.dispose]=function(){this.dispose()},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(d,x){this.type=d,this.g=this.target=x,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,x=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const A=()=>{};c.addEventListener("test",A,x),c.removeEventListener("test",A,x)}catch{}return d})();function C(d){return/^[\s\xa0]*$/.test(d)}function ge(d,x){N.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,x)}b(ge,N),ge.prototype.init=function(d,x){const A=this.type=d.type,D=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=x,x=d.relatedTarget,x||(A=="mouseover"?x=d.fromElement:A=="mouseout"&&(x=d.toElement)),this.relatedTarget=x,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var pe="closure_listenable_"+(Math.random()*1e6|0),F=0;function ee(d,x,A,D,X){this.listener=d,this.proxy=null,this.src=x,this.type=A,this.capture=!!D,this.ha=X,this.key=++F,this.da=this.fa=!1}function ue(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function xe(d,x,A){for(const D in d)x.call(A,d[D],D,d)}function be(d,x){for(const A in d)x.call(void 0,d[A],A,d)}function q(d){const x={};for(const A in d)x[A]=d[A];return x}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(d,x){let A,D;for(let X=1;X<arguments.length;X++){D=arguments[X];for(A in D)d[A]=D[A];for(let re=0;re<W.length;re++)A=W[re],Object.prototype.hasOwnProperty.call(D,A)&&(d[A]=D[A])}}function me(d){this.src=d,this.g={},this.h=0}me.prototype.add=function(d,x,A,D,X){const re=d.toString();d=this.g[re],d||(d=this.g[re]=[],this.h++);const _e=Ae(d,x,D,X);return _e>-1?(x=d[_e],A||(x.fa=!1)):(x=new ee(x,this.src,re,!!D,X),x.fa=A,d.push(x)),x};function ye(d,x){const A=x.type;if(A in d.g){var D=d.g[A],X=Array.prototype.indexOf.call(D,x,void 0),re;(re=X>=0)&&Array.prototype.splice.call(D,X,1),re&&(ue(x),d.g[A].length==0&&(delete d.g[A],d.h--))}}function Ae(d,x,A,D){for(let X=0;X<d.length;++X){const re=d[X];if(!re.da&&re.listener==x&&re.capture==!!A&&re.ha==D)return X}return-1}var De="closure_lm_"+(Math.random()*1e6|0),je={};function ke(d,x,A,D,X){if(Array.isArray(x)){for(let re=0;re<x.length;re++)ke(d,x[re],A,D,X);return null}return A=qi(A),d&&d[pe]?d.J(x,A,h(D)?!!D.capture:!1,X):We(d,x,A,!1,D,X)}function We(d,x,A,D,X,re){if(!x)throw Error("Invalid event type");const _e=h(X)?!!X.capture:!!X;let Ke=Hr(d);if(Ke||(d[De]=Ke=new me(d)),A=Ke.add(x,A,D,_e,re),A.proxy)return A;if(D=et(),A.proxy=D,D.src=d,D.listener=A,d.addEventListener)P||(X=_e),X===void 0&&(X=!1),d.addEventListener(x.toString(),D,X);else if(d.attachEvent)d.attachEvent(vt(x.toString()),D);else if(d.addListener&&d.removeListener)d.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return A}function et(){function d(A){return x.call(d.src,d.listener,A)}const x=nn;return d}function st(d,x,A,D,X){if(Array.isArray(x))for(var re=0;re<x.length;re++)st(d,x[re],A,D,X);else D=h(D)?!!D.capture:!!D,A=qi(A),d&&d[pe]?(d=d.i,re=String(x).toString(),re in d.g&&(x=d.g[re],A=Ae(x,A,D,X),A>-1&&(ue(x[A]),Array.prototype.splice.call(x,A,1),x.length==0&&(delete d.g[re],d.h--)))):d&&(d=Hr(d))&&(x=d.g[x.toString()],d=-1,x&&(d=Ae(x,A,D,X)),(A=d>-1?x[d]:null)&&ht(A))}function ht(d){if(typeof d!="number"&&d&&!d.da){var x=d.src;if(x&&x[pe])ye(x.i,d);else{var A=d.type,D=d.proxy;x.removeEventListener?x.removeEventListener(A,D,d.capture):x.detachEvent?x.detachEvent(vt(A),D):x.addListener&&x.removeListener&&x.removeListener(D),(A=Hr(x))?(ye(A,d),A.h==0&&(A.src=null,x[De]=null)):ue(d)}}}function vt(d){return d in je?je[d]:je[d]="on"+d}function nn(d,x){if(d.da)d=!0;else{x=new ge(x,this);const A=d.listener,D=d.ha||d.src;d.fa&&ht(d),d=A.call(D,x)}return d}function Hr(d){return d=d[De],d instanceof me?d:null}var hi="__closure_events_fn_"+(Math.random()*1e9>>>0);function qi(d){return typeof d=="function"?d:(d[hi]||(d[hi]=function(x){return d.handleEvent(x)}),d[hi])}function Ht(){$.call(this),this.i=new me(this),this.M=this,this.G=null}b(Ht,$),Ht.prototype[pe]=!0,Ht.prototype.removeEventListener=function(d,x,A,D){st(this,d,x,A,D)};function jt(d,x){var A,D=d.G;if(D)for(A=[];D;D=D.G)A.push(D);if(d=d.M,D=x.type||x,typeof x=="string")x=new N(x,d);else if(x instanceof N)x.target=x.target||d;else{var X=x;x=new N(D,d),de(x,X)}X=!0;let re,_e;if(A)for(_e=A.length-1;_e>=0;_e--)re=x.g=A[_e],X=Nr(re,D,!0,x)&&X;if(re=x.g=d,X=Nr(re,D,!0,x)&&X,X=Nr(re,D,!1,x)&&X,A)for(_e=0;_e<A.length;_e++)re=x.g=A[_e],X=Nr(re,D,!1,x)&&X}Ht.prototype.N=function(){if(Ht.Z.N.call(this),this.i){var d=this.i;for(const x in d.g){const A=d.g[x];for(let D=0;D<A.length;D++)ue(A[D]);delete d.g[x],d.h--}}this.G=null},Ht.prototype.J=function(d,x,A,D){return this.i.add(String(d),x,!1,A,D)},Ht.prototype.K=function(d,x,A,D){return this.i.add(String(d),x,!0,A,D)};function Nr(d,x,A,D){if(x=d.i.g[String(x)],!x)return!0;x=x.concat();let X=!0;for(let re=0;re<x.length;++re){const _e=x[re];if(_e&&!_e.da&&_e.capture==A){const Ke=_e.listener,dn=_e.ha||_e.src;_e.fa&&ye(d.i,_e),X=Ke.call(dn,D)!==!1&&X}}return X&&!D.defaultPrevented}function ka(d,x){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:c.setTimeout(d,x||0)}function Bi(d){d.g=ka(()=>{d.g=null,d.i&&(d.i=!1,Bi(d))},d.l);const x=d.h;d.h=null,d.m.apply(null,x)}class Ot extends ${constructor(x,A){super(),this.m=x,this.l=A,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Bi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cr(d){$.call(this),this.h=d,this.g={}}b(Cr,$);var zi=[];function Fr(d){xe(d.g,function(x,A){this.g.hasOwnProperty(A)&&ht(x)},d),d.g={}}Cr.prototype.N=function(){Cr.Z.N.call(this),Fr(this)},Cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pr=c.JSON.stringify,Hi=c.JSON.parse,Mn=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function Fi(){}function $i(){}var gr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){N.call(this,"d")}b(Zt,N);function Sn(){N.call(this,"c")}b(Sn,N);var Dt={},Bs=null;function Rr(){return Bs=Bs||new Ht}Dt.Ia="serverreachability";function er(d){N.call(this,Dt.Ia,d)}b(er,N);function Pn(d){const x=Rr();jt(x,new er(x))}Dt.STAT_EVENT="statevent";function $r(d,x){N.call(this,Dt.STAT_EVENT,d),this.stat=x}b($r,N);function At(d){const x=Rr();jt(x,new $r(x,d))}Dt.Ja="timingevent";function tr(d,x){N.call(this,Dt.Ja,d),this.size=x}b(tr,N);function In(d,x){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},x)}function Un(){this.g=!0}Un.prototype.ua=function(){this.g=!1};function Gi(d,x,A,D,X,re){d.info(function(){if(d.g)if(re){var _e="",Ke=re.split("&");for(let bt=0;bt<Ke.length;bt++){var dn=Ke[bt].split("=");if(dn.length>1){const Qt=dn[0];dn=dn[1];const _s=Qt.split("_");_e=_s.length>=2&&_s[1]=="type"?_e+(Qt+"="+dn+"&"):_e+(Qt+"=redacted&")}}}else _e=null;else _e=re;return"XMLHTTP REQ ("+D+") [attempt "+X+"]: "+x+`
`+A+`
`+_e})}function di(d,x,A,D,X,re,_e){d.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+X+"]: "+x+`
`+A+`
`+re+" "+_e})}function Nn(d,x,A,D){d.info(function(){return"XMLHTTP TEXT ("+x+"): "+Gr(d,A)+(D?" "+D:"")})}function ds(d,x){d.info(function(){return"TIMEOUT: "+x})}Un.prototype.info=function(){};function Gr(d,x){if(!d.g)return x;if(!x)return null;try{const re=JSON.parse(x);if(re){for(d=0;d<re.length;d++)if(Array.isArray(re[d])){var A=re[d];if(!(A.length<2)){var D=A[1];if(Array.isArray(D)&&!(D.length<1)){var X=D[0];if(X!="noop"&&X!="stop"&&X!="close")for(let _e=1;_e<D.length;_e++)D[_e]=""}}}}return pr(re)}catch{return x}}var zs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ki={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yi;function fs(){}b(fs,Fi),fs.prototype.g=function(){return new XMLHttpRequest},Yi=new fs;function yr(d){return encodeURIComponent(String(d))}function rn(d){var x=1;d=d.split(":");const A=[];for(;x>0&&d.length;)A.push(d.shift()),x--;return d.length&&A.push(d.join(":")),A}function vr(d,x,A,D){this.j=d,this.i=x,this.l=A,this.S=D||1,this.V=new Cr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new br}function br(){this.i=null,this.g="",this.h=!1}var Ft={},sn={};function Ir(d,x,A){d.M=1,d.A=ps(Gt(x)),d.u=A,d.R=!0,Jt(d,null)}function Jt(d,x){d.F=Date.now(),jr(d),d.B=Gt(d.A);var A=d.B,D=d.S;Array.isArray(D)||(D=[String(D)]),yi(A.i,"t",D),d.C=0,A=d.j.L,d.h=new br,d.g=Yh(d.j,A?x:null,!d.u),d.P>0&&(d.O=new Ot(p(d.Y,d,d.g),d.P)),x=d.V,A=d.g,D=d.ba;var X="readystatechange";Array.isArray(X)||(X&&(zi[0]=X.toString()),X=zi);for(let re=0;re<X.length;re++){const _e=ke(A,X[re],D||x.handleEvent,!1,x.h||x);if(!_e)break;x.g[_e.key]=_e}x=d.J?q(d.J):{},d.u?(d.v||(d.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,x)):(d.v="GET",d.g.ea(d.B,d.v,null,x)),Pn(),Gi(d.i,d.v,d.B,d.l,d.S,d.u)}vr.prototype.ba=function(d){d=d.target;const x=this.O;x&&B(d)==3?x.j():this.Y(d)},vr.prototype.Y=function(d){try{if(d==this.g)e:{const Ke=B(this.g),dn=this.g.ya(),bt=this.g.ca();if(!(Ke<3)&&(Ke!=3||this.g&&(this.h.h||this.g.la()||ne(this.g)))){this.K||Ke!=4||dn==7||(dn==8||bt<=0?Pn(3):Pn(2)),Mt(this);var x=this.g.ca();this.X=x;var A=Bo(this);if(this.o=x==200,di(this.i,this.v,this.B,this.l,this.S,Ke,x),this.o){if(this.U&&!this.L){t:{if(this.g){var D,X=this.g;if((D=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(D)){var re=D;break t}}re=null}if(d=re)Nn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Or(this,d);else{this.o=!1,this.m=3,At(12),Vn(this),nr(this);break e}}if(this.R){d=!0;let Qt;for(;!this.K&&this.C<A.length;)if(Qt=Pa(this,A),Qt==sn){Ke==4&&(this.m=4,At(14),d=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Ft){this.m=4,At(15),Nn(this.i,this.l,A,"[Invalid Chunk]"),d=!1;break}else Nn(this.i,this.l,Qt,null),Or(this,Qt);if(Ma(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||A.length!=0||this.h.h||(this.m=1,At(16),d=!1),this.o=this.o&&d,!d)Nn(this.i,this.l,A,"[Invalid Chunked Response]"),Vn(this),nr(this);else if(A.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),Zr(_e),_e.P=!0,At(11))}}else Nn(this.i,this.l,A,null),Or(this,A);Ke==4&&Vn(this),this.o&&!this.K&&(Ke==4?ea(this.j,this):(this.o=!1,jr(this)))}else Ue(this.g),x==400&&A.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Vn(this),nr(this)}}}catch{}finally{}};function Bo(d){if(!Ma(d))return d.g.la();const x=ne(d.g);if(x==="")return"";let A="";const D=x.length,X=B(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Vn(d),nr(d),"";d.h.i=new c.TextDecoder}for(let re=0;re<D;re++)d.h.h=!0,A+=d.h.i.decode(x[re],{stream:!(X&&re==D-1)});return x.length=0,d.h.g+=A,d.C=0,d.h.g}function Ma(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Pa(d,x){var A=d.C,D=x.indexOf(`
`,A);return D==-1?sn:(A=Number(x.substring(A,D)),isNaN(A)?Ft:(D+=1,D+A>x.length?sn:(x=x.slice(D,D+A),d.C=D+A,x)))}vr.prototype.cancel=function(){this.K=!0,Vn(this)};function jr(d){d.T=Date.now()+d.H,fi(d,d.H)}function fi(d,x){if(d.D!=null)throw Error("WatchDog timer not null");d.D=In(p(d.aa,d),x)}function Mt(d){d.D&&(c.clearTimeout(d.D),d.D=null)}vr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(ds(this.i,this.B),this.M!=2&&(Pn(),At(17)),Vn(this),this.m=2,nr(this)):fi(this,this.T-d)};function nr(d){d.j.I==0||d.K||ea(d.j,d)}function Vn(d){Mt(d);var x=d.O;x&&typeof x.dispose=="function"&&x.dispose(),d.O=null,Fr(d.V),d.g&&(x=d.g,d.g=null,x.abort(),x.dispose())}function Or(d,x){try{var A=d.j;if(A.I!=0&&(A.g==d||qn(A.h,d))){if(!d.L&&qn(A.h,d)&&A.I==3){try{var D=A.Ba.g.parse(x)}catch{D=null}if(Array.isArray(D)&&D.length==3){var X=D;if(X[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<d.F)Ks(A),Et(A);else break e;Fn(A),At(18)}}else A.xa=X[1],0<A.xa-A.K&&X[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=In(p(A.Va,A),6e3));xr(A.h)<=1&&A.ta&&(A.ta=void 0)}else bi(A,11)}else if((d.L||A.g==d)&&Ks(A),!C(x))for(X=A.Ba.g.parse(x),x=0;x<X.length;x++){let bt=X[x];const Qt=bt[0];if(!(Qt<=A.K))if(A.K=Qt,bt=bt[1],A.I==2)if(bt[0]=="c"){A.M=bt[1],A.ba=bt[2];const _s=bt[3];_s!=null&&(A.ka=_s,A.j.info("VER="+A.ka));const xi=bt[4];xi!=null&&(A.za=xi,A.j.info("SVER="+A.za));const Ys=bt[5];Ys!=null&&typeof Ys=="number"&&Ys>0&&(D=1.5*Ys,A.O=D,A.j.info("backChannelRequestTimeoutMs_="+D)),D=A;const Qs=d.g;if(Qs){const Ho=Qs.g?Qs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ho){var re=D.h;re.g||Ho.indexOf("spdy")==-1&&Ho.indexOf("quic")==-1&&Ho.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(rr(re,re.h),re.h=null))}if(D.G){const Ol=Qs.g?Qs.g.getResponseHeader("X-HTTP-Session-Id"):null;Ol&&(D.wa=Ol,ft(D.J,D.G,Ol))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-d.F,A.j.info("Handshake RTT: "+A.T+"ms")),D=A;var _e=d;if(D.na=Kh(D,D.L?D.ba:null,D.W),_e.L){Hs(D.h,_e);var Ke=_e,dn=D.O;dn&&(Ke.H=dn),Ke.D&&(Mt(Ke),jr(Ke)),D.g=_e}else Wr(D);A.i.length>0&&Rt(A)}else bt[0]!="stop"&&bt[0]!="close"||bi(A,7);else A.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?bi(A,7):Je(A):bt[0]!="noop"&&A.l&&A.l.qa(bt),A.A=0)}}Pn(4)}catch{}}var $t=class{constructor(d,x){this.g=d,this.map=x}};function Qi(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ms(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function xr(d){return d.h?1:d.g?d.g.size:0}function qn(d,x){return d.h?d.h==x:d.g?d.g.has(x):!1}function rr(d,x){d.g?d.g.add(x):d.h=x}function Hs(d,x){d.h&&d.h==x?d.h=null:d.g&&d.g.has(x)&&d.g.delete(x)}Qi.prototype.cancel=function(){if(this.i=Xi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Xi(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let x=d.i;for(const A of d.g.values())x=x.concat(A.G);return x}return T(d.i)}var Ua=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mi(d,x){if(d){d=d.split("&");for(let A=0;A<d.length;A++){const D=d[A].indexOf("=");let X,re=null;D>=0?(X=d[A].substring(0,D),re=d[A].substring(D+1)):X=d[A],x(X,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Bn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;d instanceof Bn?(this.l=d.l,Pt(this,d.j),this.o=d.o,this.g=d.g,Dr(this,d.u),this.h=d.h,Kr(this,Va(d.i)),this.m=d.m):d&&(x=String(d).match(Ua))?(this.l=!1,Pt(this,x[1]||"",!0),this.o=Lr(x[2]||""),this.g=Lr(x[3]||"",!0),Dr(this,x[4]),this.h=Lr(x[5]||"",!0),Kr(this,x[6]||"",!0),this.m=Lr(x[7]||"")):(this.l=!1,this.i=new yn(null,this.l))}Bn.prototype.toString=function(){const d=[];var x=this.j;x&&d.push(Fs(x,pi,!0),":");var A=this.g;return(A||x=="file")&&(d.push("//"),(x=this.o)&&d.push(Fs(x,pi,!0),"@"),d.push(yr(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&d.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&d.push("/"),d.push(Fs(A,A.charAt(0)=="/"?Wi:gi,!0))),(A=this.i.toString())&&d.push("?",A),(A=this.m)&&d.push("#",Fs(A,ys)),d.join("")},Bn.prototype.resolve=function(d){const x=Gt(this);let A=!!d.j;A?Pt(x,d.j):A=!!d.o,A?x.o=d.o:A=!!d.g,A?x.g=d.g:A=d.u!=null;var D=d.h;if(A)Dr(x,d.u);else if(A=!!d.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var X=x.h.lastIndexOf("/");X!=-1&&(D=x.h.slice(0,X+1)+D)}if(X=D,X==".."||X==".")D="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){D=X.lastIndexOf("/",0)==0,X=X.split("/");const re=[];for(let _e=0;_e<X.length;){const Ke=X[_e++];Ke=="."?D&&_e==X.length&&re.push(""):Ke==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),D&&_e==X.length&&re.push("")):(re.push(Ke),D=!0)}D=re.join("/")}else D=X}return A?x.h=D:A=d.i.toString()!=="",A?Kr(x,Va(d.i)):A=!!d.m,A&&(x.m=d.m),x};function Gt(d){return new Bn(d)}function Pt(d,x,A){d.j=A?Lr(x,!0):x,d.j&&(d.j=d.j.replace(/:$/,""))}function Dr(d,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);d.u=x}else d.u=null}function Kr(d,x,A){x instanceof yn?(d.i=x,vi(d.i,d.l)):(A||(x=Fs(x,gs)),d.i=new yn(x,d.l))}function ft(d,x,A){d.i.set(x,A)}function ps(d){return ft(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Lr(d,x){return d?x?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Fs(d,x,A){return typeof d=="string"?(d=encodeURI(d).replace(x,jn),A&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function jn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var pi=/[#\/\?@]/g,gi=/[#\?:]/g,Wi=/[#\?]/g,gs=/[#\?@]/g,ys=/#/g;function yn(d,x){this.h=this.g=null,this.i=d||null,this.j=!!x}function Kt(d){d.g||(d.g=new Map,d.h=0,d.i&&mi(d.i,function(x,A){d.add(decodeURIComponent(x.replace(/\+/g," ")),A)}))}n=yn.prototype,n.add=function(d,x){Kt(this),this.i=null,d=vs(this,d);let A=this.g.get(d);return A||this.g.set(d,A=[]),A.push(x),this.h+=1,this};function kr(d,x){Kt(d),x=vs(d,x),d.g.has(x)&&(d.i=null,d.h-=d.g.get(x).length,d.g.delete(x))}function Zi(d,x){return Kt(d),x=vs(d,x),d.g.has(x)}n.forEach=function(d,x){Kt(this),this.g.forEach(function(A,D){A.forEach(function(X){d.call(x,X,D,this)},this)},this)};function sr(d,x){Kt(d);let A=[];if(typeof x=="string")Zi(d,x)&&(A=A.concat(d.g.get(vs(d,x))));else for(d=Array.from(d.g.values()),x=0;x<d.length;x++)A=A.concat(d[x]);return A}n.set=function(d,x){return Kt(this),this.i=null,d=vs(this,d),Zi(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[x]),this.h+=1,this},n.get=function(d,x){return d?(d=sr(this,d),d.length>0?String(d[0]):x):x};function yi(d,x,A){kr(d,x),A.length>0&&(d.i=null,d.g.set(vs(d,x),T(A)),d.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],x=Array.from(this.g.keys());for(let D=0;D<x.length;D++){var A=x[D];const X=yr(A);A=sr(this,A);for(let re=0;re<A.length;re++){let _e=X;A[re]!==""&&(_e+="="+yr(A[re])),d.push(_e)}}return this.i=d.join("&")};function Va(d){const x=new yn;return x.i=d.i,d.g&&(x.g=new Map(d.g),x.h=d.h),x}function vs(d,x){return x=String(x),d.j&&(x=x.toLowerCase()),x}function vi(d,x){x&&!d.j&&(Kt(d),d.i=null,d.g.forEach(function(A,D){const X=D.toLowerCase();D!=X&&(kr(this,D),yi(this,X,A))},d)),d.j=x}function ir(d,x){const A=new Un;if(c.Image){const D=new Image;D.onload=v(zn,A,"TestLoadImage: loaded",!0,x,D),D.onerror=v(zn,A,"TestLoadImage: error",!1,x,D),D.onabort=v(zn,A,"TestLoadImage: abort",!1,x,D),D.ontimeout=v(zn,A,"TestLoadImage: timeout",!1,x,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=d}else x(!1)}function un(d,x){const A=new Un,D=new AbortController,X=setTimeout(()=>{D.abort(),zn(A,"TestPingServer: timeout",!1,x)},1e4);fetch(d,{signal:D.signal}).then(re=>{clearTimeout(X),re.ok?zn(A,"TestPingServer: ok",!0,x):zn(A,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(X),zn(A,"TestPingServer: error",!1,x)})}function zn(d,x,A,D,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),D(A)}catch{}}function Yr(){this.g=new Mn}function Hn(d){this.i=d.Sb||null,this.h=d.ab||!1}b(Hn,Fi),Hn.prototype.g=function(){return new Qr(this.i,this.h)};function Qr(d,x){Ht.call(this),this.H=d,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Qr,Ht),n=Qr.prototype,n.open=function(d,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=x,this.readyState=1,ar(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(x.body=d),(this.H||c).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bs(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ar(this)),this.g&&(this.readyState=3,ar(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xr(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xr(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var x=d.value?d.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!d.done}))&&(this.response=this.responseText+=x)}d.done?bs(this):ar(this),this.readyState==3&&Xr(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,bs(this))},n.Na=function(d){this.g&&(this.response=d,bs(this))},n.ga=function(){this.g&&bs(this)};function bs(d){d.readyState=4,d.l=null,d.j=null,d.B=null,ar(d)}n.setRequestHeader=function(d,x){this.A.append(d,x)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],x=this.h.entries();for(var A=x.next();!A.done;)A=A.value,d.push(A[0]+": "+A[1]),A=x.next();return d.join(`\r
`)};function ar(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function On(d){let x="";return xe(d,function(A,D){x+=D,x+=":",x+=A,x+=`\r
`}),x}function xs(d,x,A){e:{for(D in A){var D=!1;break e}D=!0}D||(A=On(A),typeof d=="string"?A!=null&&yr(A):ft(d,x,A))}function Ze(d){Ht.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Ze,Ht);var _r=/^https?$/i,$s=["POST","PUT"];n=Ze.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,x,A,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);x=x?x.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yi.g(),this.g.onreadystatechange=_(p(this.Ca,this));try{this.B=!0,this.g.open(x,String(d),!0),this.B=!1}catch(re){Gs(this,re);return}if(d=A||"",A=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var X in D)A.set(X,D[X]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const re of D.keys())A.set(re,D.get(re));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(A.keys()).find(re=>re.toLowerCase()=="content-type"),X=c.FormData&&d instanceof c.FormData,!(Array.prototype.indexOf.call($s,x,void 0)>=0)||D||X||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,_e]of A)this.g.setRequestHeader(re,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(re){Gs(this,re)}};function Gs(d,x){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=x,d.o=5,Ji(d),j(d)}function Ji(d){d.A||(d.A=!0,jt(d,"complete"),jt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,jt(this,"complete"),jt(this,"abort"),j(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),j(this,!0)),Ze.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?E(this):this.Xa())},n.Xa=function(){E(this)};function E(d){if(d.h&&typeof l<"u"){if(d.v&&B(d)==4)setTimeout(d.Ca.bind(d),0);else if(jt(d,"readystatechange"),B(d)==4){d.h=!1;try{const re=d.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var A;if(!(A=x)){var D;if(D=re===0){let _e=String(d.D).match(Ua)[1]||null;!_e&&c.self&&c.self.location&&(_e=c.self.location.protocol.slice(0,-1)),D=!_r.test(_e?_e.toLowerCase():"")}A=D}if(A)jt(d,"complete"),jt(d,"success");else{d.o=6;try{var X=B(d)>2?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.ca()+"]",Ji(d)}}finally{j(d)}}}}function j(d,x){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const A=d.g;d.g=null,x||jt(d,"ready");try{A.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function B(d){return d.g?d.g.readyState:0}n.ca=function(){try{return B(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var x=this.g.responseText;return d&&x.indexOf(d)==0&&(x=x.substring(d.length)),Hi(x)}};function ne(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ue(d){const x={};d=(d.g&&B(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<d.length;D++){if(C(d[D]))continue;var A=rn(d[D]);const X=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const re=x[X]||[];x[X]=re,re.push(A)}be(x,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Se(d,x,A){return A&&A.internalChannelParams&&A.internalChannelParams[d]||x}function Qe(d){this.za=0,this.i=[],this.j=new Un,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Se("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Se("baseRetryDelayMs",5e3,d),this.Za=Se("retryDelaySeedMs",1e4,d),this.Ta=Se("forwardChannelMaxRetries",2,d),this.va=Se("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Qi(d&&d.concurrentRequestLimit),this.Ba=new Yr,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Qe.prototype,n.ka=8,n.I=1,n.connect=function(d,x,A,D){At(0),this.W=d,this.H=x||{},A&&D!==void 0&&(this.H.OSID=A,this.H.OAID=D),this.F=this.X,this.J=Kh(this,null,this.W),Rt(this)};function Je(d){if(tt(d),d.I==3){var x=d.V++,A=Gt(d.J);if(ft(A,"SID",d.M),ft(A,"RID",x),ft(A,"TYPE","terminate"),Yt(d,A),x=new vr(d,d.j,x),x.M=2,x.A=ps(Gt(A)),A=!1,c.navigator&&c.navigator.sendBeacon)try{A=c.navigator.sendBeacon(x.A.toString(),"")}catch{}!A&&c.Image&&(new Image().src=x.A,A=!0),A||(x.g=Yh(x.j,null),x.g.ea(x.A)),x.F=Date.now(),jr(x)}Gh(d)}function Et(d){d.g&&(Zr(d),d.g.cancel(),d.g=null)}function tt(d){Et(d),d.v&&(c.clearTimeout(d.v),d.v=null),Ks(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&c.clearTimeout(d.m),d.m=null)}function Rt(d){if(!ms(d.h)&&!d.m){d.m=!0;var x=d.Ea;ie||k(),ve||(ie(),ve=!0),L.add(x,d),d.D=0}}function hn(d,x){return xr(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=x.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=In(p(d.Ea,d,x),$h(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const X=new vr(this,this.j,d);let re=this.o;if(this.U&&(re?(re=q(re),de(re,this.U)):re=this.U),this.u!==null||this.R||(X.J=re,re=null),this.S)e:{for(var x=0,A=0;A<this.i.length;A++){t:{var D=this.i[A];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(x+=D,x>4096){x=A;break e}if(x===4096||A===this.i.length-1){x=A+1;break e}}x=1e3}else x=1e3;x=an(this,X,x),A=Gt(this.J),ft(A,"RID",d),ft(A,"CVER",22),this.G&&ft(A,"X-HTTP-Session-Id",this.G),Yt(this,A),re&&(this.R?x="headers="+yr(On(re))+"&"+x:this.u&&xs(A,this.u,re)),rr(this.h,X),this.Ra&&ft(A,"TYPE","init"),this.S?(ft(A,"$req",x),ft(A,"SID","null"),X.U=!0,Ir(X,A,null)):Ir(X,A,x),this.I=2}}else this.I==3&&(d?Ut(this,d):this.i.length==0||ms(this.h)||Ut(this))};function Ut(d,x){var A;x?A=x.l:A=d.V++;const D=Gt(d.J);ft(D,"SID",d.M),ft(D,"RID",A),ft(D,"AID",d.K),Yt(d,D),d.u&&d.o&&xs(D,d.u,d.o),A=new vr(d,d.j,A,d.D+1),d.u===null&&(A.J=d.o),x&&(d.i=x.G.concat(d.i)),x=an(d,A,1e3),A.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),rr(d.h,A),Ir(A,D,x)}function Yt(d,x){d.H&&xe(d.H,function(A,D){ft(x,D,A)}),d.l&&xe({},function(A,D){ft(x,D,A)})}function an(d,x,A){A=Math.min(d.i.length,A);const D=d.l?p(d.l.Ka,d.l,d):null;e:{var X=d.i;let Ke=-1;for(;;){const dn=["count="+A];Ke==-1?A>0?(Ke=X[0].g,dn.push("ofs="+Ke)):Ke=0:dn.push("ofs="+Ke);let bt=!0;for(let Qt=0;Qt<A;Qt++){var re=X[Qt].g;const _s=X[Qt].map;if(re-=Ke,re<0)Ke=Math.max(0,X[Qt].g-100),bt=!1;else try{re="req"+re+"_"||"";try{var _e=_s instanceof Map?_s:Object.entries(_s);for(const[xi,Ys]of _e){let Qs=Ys;h(Ys)&&(Qs=pr(Ys)),dn.push(re+xi+"="+encodeURIComponent(Qs))}}catch(xi){throw dn.push(re+"type="+encodeURIComponent("_badmap")),xi}}catch{D&&D(_s)}}if(bt){_e=dn.join("&");break e}}_e=void 0}return d=d.i.splice(0,A),x.G=d,_e}function Wr(d){if(!d.g&&!d.v){d.Y=1;var x=d.Da;ie||k(),ve||(ie(),ve=!0),L.add(x,d),d.A=0}}function Fn(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=In(p(d.Da,d),$h(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,zo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=In(p(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Et(this),zo(this))};function Zr(d){d.B!=null&&(c.clearTimeout(d.B),d.B=null)}function zo(d){d.g=new vr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var x=Gt(d.na);ft(x,"RID","rpc"),ft(x,"SID",d.M),ft(x,"AID",d.K),ft(x,"CI",d.F?"0":"1"),!d.F&&d.ia&&ft(x,"TO",d.ia),ft(x,"TYPE","xmlhttp"),Yt(d,x),d.u&&d.o&&xs(x,d.u,d.o),d.O&&(d.g.H=d.O);var A=d.g;d=d.ba,A.M=1,A.A=ps(Gt(x)),A.u=null,A.R=!0,Jt(A,d)}n.Va=function(){this.C!=null&&(this.C=null,Et(this),Fn(this),At(19))};function Ks(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function ea(d,x){var A=null;if(d.g==x){Ks(d),Zr(d),d.g=null;var D=2}else if(qn(d.h,x))A=x.G,Hs(d.h,x),D=1;else return;if(d.I!=0){if(x.o)if(D==1){A=x.u?x.u.length:0,x=Date.now()-x.F;var X=d.D;D=Rr(),jt(D,new tr(D,A)),Rt(d)}else Wr(d);else if(X=x.m,X==3||X==0&&x.X>0||!(D==1&&hn(d,x)||D==2&&Fn(d)))switch(A&&A.length>0&&(x=d.h,x.i=x.i.concat(A)),X){case 1:bi(d,5);break;case 4:bi(d,10);break;case 3:bi(d,6);break;default:bi(d,2)}}}function $h(d,x){let A=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(A*=2),A*x}function bi(d,x){if(d.j.info("Error code "+x),x==2){var A=p(d.bb,d),D=d.Ua;const X=!D;D=new Bn(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Pt(D,"https"),ps(D),X?ir(D.toString(),A):un(D.toString(),A)}else At(2);d.I=0,d.l&&d.l.pa(x),Gh(d),tt(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Gh(d){if(d.I=0,d.ja=[],d.l){const x=Xi(d.h);(x.length!=0||d.i.length!=0)&&(S(d.ja,x),S(d.ja,d.i),d.h.i.length=0,T(d.i),d.i.length=0),d.l.oa()}}function Kh(d,x,A){var D=A instanceof Bn?Gt(A):new Bn(A);if(D.g!="")x&&(D.g=x+"."+D.g),Dr(D,D.u);else{var X=c.location;D=X.protocol,x=x?x+"."+X.hostname:X.hostname,X=+X.port;const re=new Bn(null);D&&Pt(re,D),x&&(re.g=x),X&&Dr(re,X),A&&(re.h=A),D=re}return A=d.G,x=d.wa,A&&x&&ft(D,A,x),ft(D,"VER",d.ka),Yt(d,D),D}function Yh(d,x,A){if(x&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=d.Aa&&!d.ma?new Ze(new Hn({ab:A})):new Ze(d.ma),x.Fa(d.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qh(){}n=Qh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function qa(){}qa.prototype.g=function(d,x){return new Er(d,x)};function Er(d,x){Ht.call(this),this.g=new Qe(x),this.l=d,this.h=x&&x.messageUrlParams||null,d=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(d?d["X-WebChannel-Content-Type"]=x.messageContentType:d={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(d?d["X-WebChannel-Client-Profile"]=x.sa:d={"X-WebChannel-Client-Profile":x.sa}),this.g.U=d,(d=x&&x.Qb)&&!C(d)&&(this.g.u=d),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!C(x)&&(this.g.G=x,d=this.h,d!==null&&x in d&&(d=this.h,x in d&&delete d[x])),this.j=new ta(this)}b(Er,Ht),Er.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Er.prototype.close=function(){Je(this.g)},Er.prototype.o=function(d){var x=this.g;if(typeof d=="string"){var A={};A.__data__=d,d=A}else this.v&&(A={},A.__data__=pr(d),d=A);x.i.push(new $t(x.Ya++,d)),x.I==3&&Rt(x)},Er.prototype.N=function(){this.g.l=null,delete this.j,Je(this.g),delete this.g,Er.Z.N.call(this)};function Xh(d){Zt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var x=d.__sm__;if(x){e:{for(const A in x){d=A;break e}d=void 0}(this.i=d)&&(d=this.i,x=x!==null&&d in x?x[d]:void 0),this.data=x}else this.data=d}b(Xh,Zt);function Wh(){Sn.call(this),this.status=1}b(Wh,Sn);function ta(d){this.g=d}b(ta,Qh),ta.prototype.ra=function(){jt(this.g,"a")},ta.prototype.qa=function(d){jt(this.g,new Xh(d))},ta.prototype.pa=function(d){jt(this.g,new Wh)},ta.prototype.oa=function(){jt(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,Er.prototype.send=Er.prototype.o,Er.prototype.open=Er.prototype.m,Er.prototype.close=Er.prototype.close,YA=function(){return new qa},KA=function(){return Rr()},GA=Dt,Fy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zs.NO_ERROR=0,zs.TIMEOUT=8,zs.HTTP_ERROR=6,Rf=zs,Ki.COMPLETE="complete",$A=Ki,$i.EventType=gr,gr.OPEN="a",gr.CLOSE="b",gr.ERROR="c",gr.MESSAGE="d",Ht.prototype.listen=Ht.prototype.J,Ku=$i,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,FA=Ze}).apply(typeof sf<"u"?sf:typeof self<"u"?self:typeof window<"u"?window:{});const bE="@firebase/firestore",xE="4.9.2";class cr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cr.UNAUTHENTICATED=new cr(null),cr.GOOGLE_CREDENTIALS=new cr("google-credentials-uid"),cr.FIRST_PARTY=new cr("first-party-uid"),cr.MOCK_USER=new cr("mock-user");let Kc="12.3.0";const ml=new O0("@firebase/firestore");function cc(){return ml.logLevel}function Te(n,...e){if(ml.logLevel<=ot.DEBUG){const t=e.map($0);ml.debug(`Firestore (${Kc}): ${n}`,...t)}}function Sa(n,...e){if(ml.logLevel<=ot.ERROR){const t=e.map($0);ml.error(`Firestore (${Kc}): ${n}`,...t)}}function Cc(n,...e){if(ml.logLevel<=ot.WARN){const t=e.map($0);ml.warn(`Firestore (${Kc}): ${n}`,...t)}}function $0(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Be(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,QA(n,r,t)}function QA(n,e,t){let r=`FIRESTORE (${Kc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Sa(r),new Error(r)}function _t(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||QA(e,a,r)}function He(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Ia{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ci{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class XA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(cr.UNAUTHENTICATED)))}shutdown(){}}class g6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class y6{constructor(e){this.t=e,this.currentUser=cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_t(this.o===void 0,42304);let r=this.i;const a=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let l=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ci,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const f=l;e.enqueueRetryable((async()=>{await f.promise,await a(this.currentUser)}))},h=f=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ci)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t(typeof r.accessToken=="string",31837,{l:r}),new XA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string",2055,{h:e}),new cr(e)}}class v6{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=cr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class b6{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new v6(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(cr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _E{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class x6{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,as(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_t(this.o===void 0,3512);const r=l=>{l.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Te("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _E(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(_t(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new _E(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function _6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class G0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=_6(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function $y(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),l=e.charAt(r);if(a!==l)return oy(a)===oy(l)?lt(a,l):oy(a)?1:-1}return lt(n.length,e.length)}const E6=55296,w6=57343;function oy(n){const e=n.charCodeAt(0);return e>=E6&&e<=w6}function Rc(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}const EE="__name__";class Ai{constructor(e,t,r){t===void 0?t=0:t>e.length&&Be(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Be(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Ai.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return lt(e.length,t.length)}static compareSegments(e,t){const r=Ai.isNumericId(e),a=Ai.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Ai.extractNumericId(e).compare(Ai.extractNumericId(t)):$y(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wo.fromString(e.substring(4,e.length-2))}}class kt extends Ai{construct(e,t,r){return new kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new kt(t)}static emptyPath(){return new kt([])}}const T6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xn extends Ai{construct(e,t,r){return new Xn(e,t,r)}static isValidIdentifier(e){return T6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===EE}static keyField(){return new Xn([EE])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new we(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new we(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(r+=h,a++):(l(),a++)}if(l(),c)throw new we(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xn(t)}static emptyPath(){return new Xn([])}}class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(kt.fromString(e))}static fromName(e){return new Pe(kt.fromString(e).popFirst(5))}static empty(){return new Pe(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new kt(e.slice()))}}function WA(n,e,t){if(!t)throw new we(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function A6(n,e,t,r){if(e===!0&&r===!0)throw new we(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wE(n){if(!Pe.isDocumentKey(n))throw new we(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TE(n){if(Pe.isDocumentKey(n))throw new we(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ym(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Be(12329,{type:typeof n})}function Ar(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ym(n);throw new we(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function S6(n,e){if(e<=0)throw new we(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Tn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Dh(n,e){if(!ZA(n))throw new we(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new we(ce.INVALID_ARGUMENT,t);return!0}const AE=-62135596800,SE=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*SE);return new zt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<AE)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/SE}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dh(e,zt._jsonSchema))return new zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-AE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zt._jsonSchemaVersion="firestore/timestamp/1.0",zt._jsonSchema={type:Tn("string",zt._jsonSchemaVersion),seconds:Tn("number"),nanoseconds:Tn("number")};class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new zt(0,0))}static max(){return new Fe(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const hh=-1;function N6(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Fe.fromTimestamp(r===1e9?new zt(t+1,0):new zt(t,r));return new No(a,Pe.empty(),e)}function C6(n){return new No(n.readTime,n.key,hh)}class No{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new No(Fe.min(),Pe.empty(),hh)}static max(){return new No(Fe.max(),Pe.empty(),hh)}}function R6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Pe.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}const I6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class j6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Yc(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==I6)throw n;Te("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,r)=>{t(e)}))}static reject(e){return new fe(((t,r)=>{r(e)}))}static waitFor(e){return new fe(((t,r)=>{let a=0,l=0,c=!1;e.forEach((h=>{++a,h.next((()=>{++l,c&&l===a&&t()}),(f=>r(f)))})),c=!0,l===a&&t()}))}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next((a=>a?fe.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new fe(((r,a)=>{const l=e.length,c=new Array(l);let h=0;for(let f=0;f<l;f++){const p=f;t(e[p]).next((v=>{c[p]=v,++h,h===l&&r(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new fe(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}function O6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qc(n){return n.name==="IndexedDbTransactionError"}class vm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vm.ce=-1;const K0=-1;function bm(n){return n==null}function Gf(n){return n===0&&1/n==-1/0}function D6(n){return typeof n=="number"&&Number.isInteger(n)&&!Gf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const JA="";function L6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NE(e)),e=k6(n.get(t),e);return NE(e)}function k6(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case JA:t+="";break;default:t+=l}}return t}function NE(n){return n+JA+""}function CE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Po(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function M6(n,e){const t=[];for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.push(e(n[r],r,n));return t}function eS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class tn{constructor(e,t){this.comparator=e,this.root=t||Qn.EMPTY}insert(e,t){return new tn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new af(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new af(this.root,e,this.comparator,!1)}getReverseIterator(){return new af(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new af(this.root,e,this.comparator,!0)}}class af{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Qn.RED,this.left=a??Qn.EMPTY,this.right=l??Qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Qn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Qn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1;Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new RE(this.data.getIterator())}getIteratorFrom(e){return new RE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class RE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class os{constructor(e){this.fields=e,e.sort(Xn.comparator)}static empty(){return new os([])}unionWith(e){let t=new Rn(Xn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new os(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class tS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Jn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new tS("Invalid base64 string: "+l):l}})(e);return new Jn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Jn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jn.EMPTY_BYTE_STRING=new Jn("");const P6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Co(n){if(_t(!!n,39018),typeof n=="string"){let e=0;const t=P6.exec(n);if(_t(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gn(n.seconds),nanos:gn(n.nanos)}}function gn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ro(n){return typeof n=="string"?Jn.fromBase64String(n):Jn.fromUint8Array(n)}const nS="server_timestamp",rS="__type__",sS="__previous_value__",iS="__local_write_time__";function Y0(n){return(n?.mapValue?.fields||{})[rS]?.stringValue===nS}function xm(n){const e=n.mapValue.fields[sS];return Y0(e)?xm(e):e}function dh(n){const e=Co(n.mapValue.fields[iS].timestampValue);return new zt(e.seconds,e.nanos)}class U6{constructor(e,t,r,a,l,c,h,f,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=v}}const Kf="(default)";class fh{constructor(e,t){this.projectId=e,this.database=t||Kf}static empty(){return new fh("","")}get isDefaultDatabase(){return this.database===Kf}isEqual(e){return e instanceof fh&&e.projectId===this.projectId&&e.database===this.database}}const aS="__type__",V6="__max__",of={mapValue:{}},oS="__vector__",Yf="value";function Io(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Y0(n)?4:B6(n)?9007199254740991:q6(n)?10:11:Be(28295,{value:n})}function Li(n,e){if(n===e)return!0;const t=Io(n);if(t!==Io(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dh(n).isEqual(dh(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Co(a.timestampValue),h=Co(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Ro(a.bytesValue).isEqual(Ro(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return gn(a.geoPointValue.latitude)===gn(l.geoPointValue.latitude)&&gn(a.geoPointValue.longitude)===gn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return gn(a.integerValue)===gn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=gn(a.doubleValue),h=gn(l.doubleValue);return c===h?Gf(c)===Gf(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return Rc(n.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},h=l.mapValue.fields||{};if(CE(c)!==CE(h))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(h[f]===void 0||!Li(c[f],h[f])))return!1;return!0})(n,e);default:return Be(52216,{left:n})}}function mh(n,e){return(n.values||[]).find((t=>Li(t,e)))!==void 0}function Ic(n,e){if(n===e)return 0;const t=Io(n),r=Io(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=gn(l.integerValue||l.doubleValue),f=gn(c.integerValue||c.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return IE(n.timestampValue,e.timestampValue);case 4:return IE(dh(n),dh(e));case 5:return $y(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=Ro(l),f=Ro(c);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),f=c.split("/");for(let p=0;p<h.length&&p<f.length;p++){const v=lt(h[p],f[p]);if(v!==0)return v}return lt(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=lt(gn(l.latitude),gn(c.latitude));return h!==0?h:lt(gn(l.longitude),gn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return jE(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const h=l.fields||{},f=c.fields||{},p=h[Yf]?.arrayValue,v=f[Yf]?.arrayValue,b=lt(p?.values?.length||0,v?.values?.length||0);return b!==0?b:jE(p,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===of.mapValue&&c===of.mapValue)return 0;if(l===of.mapValue)return 1;if(c===of.mapValue)return-1;const h=l.fields||{},f=Object.keys(h),p=c.fields||{},v=Object.keys(p);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const _=$y(f[b],v[b]);if(_!==0)return _;const T=Ic(h[f[b]],p[v[b]]);if(T!==0)return T}return lt(f.length,v.length)})(n.mapValue,e.mapValue);default:throw Be(23264,{he:t})}}function IE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=Co(n),r=Co(e),a=lt(t.seconds,r.seconds);return a!==0?a:lt(t.nanos,r.nanos)}function jE(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Ic(t[a],r[a]);if(l)return l}return lt(t.length,r.length)}function jc(n){return Gy(n)}function Gy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Co(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ro(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Gy(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Gy(t.fields[c])}`;return a+"}"})(n.mapValue):Be(61005,{value:n})}function If(n){switch(Io(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xm(n);return e?16+If(e):16;case 5:return 2*n.stringValue.length;case 6:return Ro(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+If(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return Po(r.fields,((l,c)=>{a+=l.length+If(c)})),a})(n.mapValue);default:throw Be(13486,{value:n})}}function OE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ky(n){return!!n&&"integerValue"in n}function Q0(n){return!!n&&"arrayValue"in n}function DE(n){return!!n&&"nullValue"in n}function LE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jf(n){return!!n&&"mapValue"in n}function q6(n){return(n?.mapValue?.fields||{})[aS]?.stringValue===oS}function nh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Po(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=nh(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nh(n.arrayValue.values[t]);return e}return{...n}}function B6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===V6}class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nh(t)}setAll(e){let t=Xn.emptyPath(),r={},a=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,a),r={},a=[],t=h.popLast()}c?r[h.lastSegment()]=nh(c):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());jf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];jf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Po(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new zr(nh(this.value))}}function lS(n){const e=[];return Po(n.fields,((t,r)=>{const a=new Xn([t]);if(jf(r)){const l=lS(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new os(e)}class ur{constructor(e,t,r,a,l,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new ur(e,0,Fe.min(),Fe.min(),Fe.min(),zr.empty(),0)}static newFoundDocument(e,t,r,a){return new ur(e,1,t,Fe.min(),r,a,0)}static newNoDocument(e,t){return new ur(e,2,t,Fe.min(),Fe.min(),zr.empty(),0)}static newUnknownDocument(e,t){return new ur(e,3,t,Fe.min(),Fe.min(),zr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qf{constructor(e,t){this.position=e,this.inclusive=t}}function kE(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?r=Pe.comparator(Pe.fromName(c.referenceValue),t.key):r=Ic(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function ME(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Li(n.position[t],e.position[t]))return!1;return!0}class ph{constructor(e,t="asc"){this.field=e,this.dir=t}}function z6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class cS{}class wn extends cS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new F6(e,t,r):t==="array-contains"?new K6(e,r):t==="in"?new Y6(e,r):t==="not-in"?new Q6(e,r):t==="array-contains-any"?new X6(e,r):new wn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $6(e,r):new G6(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ic(t,this.value)):t!==null&&Io(this.value)===Io(t)&&this.matchesComparison(Ic(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends cS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new oi(e,t)}matches(e){return uS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uS(n){return n.op==="and"}function hS(n){return H6(n)&&uS(n)}function H6(n){for(const e of n.filters)if(e instanceof oi)return!1;return!0}function Yy(n){if(n instanceof wn)return n.field.canonicalString()+n.op.toString()+jc(n.value);if(hS(n))return n.filters.map((e=>Yy(e))).join(",");{const e=n.filters.map((t=>Yy(t))).join(",");return`${n.op}(${e})`}}function dS(n,e){return n instanceof wn?(function(r,a){return a instanceof wn&&r.op===a.op&&r.field.isEqual(a.field)&&Li(r.value,a.value)})(n,e):n instanceof oi?(function(r,a){return a instanceof oi&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,h)=>l&&dS(c,a.filters[h])),!0):!1})(n,e):void Be(19439)}function fS(n){return n instanceof wn?(function(t){return`${t.field.canonicalString()} ${t.op} ${jc(t.value)}`})(n):n instanceof oi?(function(t){return t.op.toString()+" {"+t.getFilters().map(fS).join(" ,")+"}"})(n):"Filter"}class F6 extends wn{constructor(e,t,r){super(e,t,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class $6 extends wn{constructor(e,t){super(e,"in",t),this.keys=mS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class G6 extends wn{constructor(e,t){super(e,"not-in",t),this.keys=mS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function mS(n,e){return(e.arrayValue?.values||[]).map((t=>Pe.fromName(t.referenceValue)))}class K6 extends wn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Q0(t)&&mh(t.arrayValue,this.value)}}class Y6 extends wn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&mh(this.value.arrayValue,t)}}class Q6 extends wn{constructor(e,t){super(e,"not-in",t)}matches(e){if(mh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!mh(this.value.arrayValue,t)}}class X6 extends wn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Q0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>mh(this.value.arrayValue,r)))}}class W6{constructor(e,t=null,r=[],a=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function PE(n,e=null,t=[],r=[],a=null,l=null,c=null){return new W6(n,e,t,r,a,l,c)}function X0(n){const e=He(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Yy(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),bm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>jc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>jc(r))).join(",")),e.Te=t}return e.Te}function W0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!z6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!dS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ME(n.startAt,e.startAt)&&ME(n.endAt,e.endAt)}function Qy(n){return Pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Xc{constructor(e,t=null,r=[],a=[],l=null,c="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Z6(n,e,t,r,a,l,c,h){return new Xc(n,e,t,r,a,l,c,h)}function _m(n){return new Xc(n)}function UE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pS(n){return n.collectionGroup!==null}function rh(n){const e=He(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Rn(Xn.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ph(l,r))})),t.has(Xn.keyField().canonicalString())||e.Ie.push(new ph(Xn.keyField(),r))}return e.Ie}function Ri(n){const e=He(n);return e.Ee||(e.Ee=gS(e,rh(n))),e.Ee}function J6(n){const e=He(n);return e.de||(e.de=gS(e,n.explicitOrderBy)),e.de}function gS(n,e){if(n.limitType==="F")return PE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new ph(a.field,l)}));const t=n.endAt?new Qf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Qf(n.startAt.position,n.startAt.inclusive):null;return PE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Xy(n,e){const t=n.filters.concat([e]);return new Xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xf(n,e,t){return new Xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Em(n,e){return W0(Ri(n),Ri(e))&&n.limitType===e.limitType}function yS(n){return`${X0(Ri(n))}|lt:${n.limitType}`}function uc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>fS(a))).join(", ")}]`),bm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>jc(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>jc(a))).join(",")),`Target(${r})`})(Ri(n))}; limitType=${n.limitType})`}function wm(n,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Pe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,a){for(const l of rh(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(c,h,f){const p=kE(c,h,f);return c.inclusive?p<=0:p<0})(r.startAt,rh(r),a)||r.endAt&&!(function(c,h,f){const p=kE(c,h,f);return c.inclusive?p>=0:p>0})(r.endAt,rh(r),a))})(n,e)}function e5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vS(n){return(e,t)=>{let r=!1;for(const a of rh(n)){const l=t5(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function t5(n,e,t){const r=n.field.isKeyField()?Pe.comparator(e.key,t.key):(function(l,c,h){const f=c.data.field(l),p=h.data.field(l);return f!==null&&p!==null?Ic(f,p):Be(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Be(19790,{direction:n.dir})}}class _l{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Po(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return eS(this.inner)}size(){return this.innerSize}}const n5=new tn(Pe.comparator);function Na(){return n5}const bS=new tn(Pe.comparator);function Yu(...n){let e=bS;for(const t of n)e=e.insert(t.key,t);return e}function xS(n){let e=bS;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ol(){return sh()}function _S(){return sh()}function sh(){return new _l((n=>n.toString()),((n,e)=>n.isEqual(e)))}const r5=new tn(Pe.comparator),s5=new Rn(Pe.comparator);function ct(...n){let e=s5;for(const t of n)e=e.add(t);return e}const i5=new Rn(lt);function a5(){return i5}function Z0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gf(e)?"-0":e}}function ES(n){return{integerValue:""+n}}function o5(n,e){return D6(e)?ES(e):Z0(n,e)}class Tm{constructor(){this._=void 0}}function l5(n,e,t){return n instanceof gh?(function(a,l){const c={fields:{[rS]:{stringValue:nS},[iS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Y0(l)&&(l=xm(l)),l&&(c.fields[sS]=l),{mapValue:c}})(t,e):n instanceof Oc?TS(n,e):n instanceof Dc?AS(n,e):(function(a,l){const c=wS(a,l),h=VE(c)+VE(a.Ae);return Ky(c)&&Ky(a.Ae)?ES(h):Z0(a.serializer,h)})(n,e)}function c5(n,e,t){return n instanceof Oc?TS(n,e):n instanceof Dc?AS(n,e):t}function wS(n,e){return n instanceof Wf?(function(r){return Ky(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class gh extends Tm{}class Oc extends Tm{constructor(e){super(),this.elements=e}}function TS(n,e){const t=SS(e);for(const r of n.elements)t.some((a=>Li(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Dc extends Tm{constructor(e){super(),this.elements=e}}function AS(n,e){let t=SS(e);for(const r of n.elements)t=t.filter((a=>!Li(a,r)));return{arrayValue:{values:t}}}class Wf extends Tm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function VE(n){return gn(n.integerValue||n.doubleValue)}function SS(n){return Q0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class J0{constructor(e,t){this.field=e,this.transform=t}}function u5(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof Oc&&a instanceof Oc||r instanceof Dc&&a instanceof Dc?Rc(r.elements,a.elements,Li):r instanceof Wf&&a instanceof Wf?Li(r.Ae,a.Ae):r instanceof gh&&a instanceof gh})(n.transform,e.transform)}class h5{constructor(e,t){this.version=e,this.transformResults=t}}class Ms{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ms}static exists(e){return new Ms(void 0,e)}static updateTime(e){return new Ms(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Of(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Am{}function NS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ev(n.key,Ms.none()):new Lh(n.key,n.data,Ms.none());{const t=n.data,r=zr.empty();let a=new Rn(Xn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Uo(n.key,r,new os(a.toArray()),Ms.none())}}function d5(n,e,t){n instanceof Lh?(function(a,l,c){const h=a.value.clone(),f=BE(a.fieldTransforms,l,c.transformResults);h.setAll(f),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Uo?(function(a,l,c){if(!Of(a.precondition,l))return void l.convertToUnknownDocument(c.version);const h=BE(a.fieldTransforms,l,c.transformResults),f=l.data;f.setAll(CS(a)),f.setAll(h),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function ih(n,e,t,r){return n instanceof Lh?(function(l,c,h,f){if(!Of(l.precondition,c))return h;const p=l.value.clone(),v=zE(l.fieldTransforms,f,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Uo?(function(l,c,h,f){if(!Of(l.precondition,c))return h;const p=zE(l.fieldTransforms,f,c),v=c.data;return v.setAll(CS(l)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(n,e,t,r):(function(l,c,h){return Of(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function f5(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=wS(r.transform,a||null);l!=null&&(t===null&&(t=zr.empty()),t.set(r.field,l))}return t||null}function qE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Rc(r,a,((l,c)=>u5(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Lh extends Am{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Uo extends Am{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function CS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function BE(n,e,t){const r=new Map;_t(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,h=e.data.field(l.field);r.set(l.field,c5(c,h,t[a]))}return r}function zE(n,e,t){const r=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);r.set(a.field,l5(l,c,e))}return r}class ev extends Am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class m5 extends Am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class p5{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&d5(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ih(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ih(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_S();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(a.key)?null:h;const f=NS(c,h);f!==null&&r.set(a.key,f),c.isValidDocument()||c.convertToNoDocument(Fe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ct())}isEqual(e){return this.batchId===e.batchId&&Rc(this.mutations,e.mutations,((t,r)=>qE(t,r)))&&Rc(this.baseMutations,e.baseMutations,((t,r)=>qE(t,r)))}}class tv{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){_t(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return r5})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new tv(e,t,r,a)}}class g5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class y5{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}class v5{constructor(e,t){this.count=e,this.unchangedNames=t}}var En,mt;function b5(n){switch(n){case ce.OK:return Be(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Be(15467,{code:n})}}function RS(n){if(n===void 0)return Sa("GRPC error has no .code"),ce.UNKNOWN;switch(n){case En.OK:return ce.OK;case En.CANCELLED:return ce.CANCELLED;case En.UNKNOWN:return ce.UNKNOWN;case En.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case En.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case En.INTERNAL:return ce.INTERNAL;case En.UNAVAILABLE:return ce.UNAVAILABLE;case En.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case En.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case En.NOT_FOUND:return ce.NOT_FOUND;case En.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case En.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case En.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case En.ABORTED:return ce.ABORTED;case En.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case En.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case En.DATA_LOSS:return ce.DATA_LOSS;default:return Be(39323,{code:n})}}(mt=En||(En={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";function x5(){return new TextEncoder}const _5=new wo([4294967295,4294967295],0);function HE(n){const e=x5().encode(n),t=new HA;return t.update(e),new Uint8Array(t.digest())}function FE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new wo([t,r],0),new wo([a,l],0)]}class nv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Qu(`Invalid padding: ${t}`);if(r<0)throw new Qu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Qu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=wo.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(wo.fromNumber(r)));return a.compare(_5)===1&&(a=new wo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=HE(e),[r,a]=FE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new nv(l,a,t);return r.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=HE(e),[r,a]=FE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sm{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,kh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Sm(Fe.min(),a,new tn(lt),Na(),ct())}}class kh{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new kh(r,t,ct(),ct(),ct())}}class Df{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class IS{constructor(e,t){this.targetId=e,this.Ce=t}}class jS{constructor(e,t,r=Jn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class $E{constructor(){this.ve=0,this.Fe=GE(),this.Me=Jn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ct(),t=ct(),r=ct();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Be(38017,{changeType:l})}})),new kh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=GE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class E5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Na(),this.Je=lf(),this.He=lf(),this.Ye=new tn(lt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Qy(l))if(r===0){const c=new Pe(l.path);this.et(t,c,ur.newNoDocument(c,Fe.min()))}else _t(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),f=h?this.ct(h,e,c):1;if(f!==0){this.it(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,h;try{c=Ro(r).toUint8Array()}catch(f){if(f instanceof tS)return Cc("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new nv(c,a,l)}catch(f){return Cc(f instanceof Qu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&Qy(h.target)){const f=new Pe(h.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,ur.newNoDocument(f,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let r=ct();this.He.forEach(((l,c)=>{let h=!0;c.forEachWhile((f=>{const p=this.ot(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Sm(e,t,this.Ye,this.je,r);return this.je=Na(),this.Je=lf(),this.He=lf(),this.Ye=new tn(lt),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new $E,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Rn(lt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Rn(lt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $E),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function lf(){return new tn(Pe.comparator)}function GE(){return new tn(Pe.comparator)}const w5={asc:"ASCENDING",desc:"DESCENDING"},T5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A5={and:"AND",or:"OR"};class S5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wy(n,e){return n.useProto3Json||bm(e)?e:{value:e}}function Zf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function N5(n,e){return Zf(n,e.toTimestamp())}function Ii(n){return _t(!!n,49232),Fe.fromTimestamp((function(t){const r=Co(t);return new zt(r.seconds,r.nanos)})(n))}function rv(n,e){return Zy(n,e).canonicalString()}function Zy(n,e){const t=(function(a){return new kt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function DS(n){const e=kt.fromString(n);return _t(VS(e),10190,{key:e.toString()}),e}function Jy(n,e){return rv(n.databaseId,e.path)}function ly(n,e){const t=DS(e);if(t.get(1)!==n.databaseId.projectId)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(kS(t))}function LS(n,e){return rv(n.databaseId,e)}function C5(n){const e=DS(n);return e.length===4?kt.emptyPath():kS(e)}function e0(n){return new kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kS(n){return _t(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function KE(n,e,t){return{name:Jy(n,e),fields:t.value.mapValue.fields}}function R5(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Be(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,v){return p.useProto3Json?(_t(v===void 0||typeof v=="string",58123),Jn.fromBase64String(v||"")):(_t(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Jn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(p){const v=p.code===void 0?ce.UNKNOWN:RS(p.code);return new we(v,p.message||"")})(c);t=new jS(r,a,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=ly(n,r.document.name),l=Ii(r.document.updateTime),c=r.document.createTime?Ii(r.document.createTime):Fe.min(),h=new zr({mapValue:{fields:r.document.fields}}),f=ur.newFoundDocument(a,l,c,h),p=r.targetIds||[],v=r.removedTargetIds||[];t=new Df(p,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=ly(n,r.document),l=r.readTime?Ii(r.readTime):Fe.min(),c=ur.newNoDocument(a,l),h=r.removedTargetIds||[];t=new Df([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=ly(n,r.document),l=r.removedTargetIds||[];t=new Df([],l,a,null)}else{if(!("filter"in e))return Be(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new v5(a,l),h=r.targetId;t=new IS(h,c)}}return t}function I5(n,e){let t;if(e instanceof Lh)t={update:KE(n,e.key,e.value)};else if(e instanceof ev)t={delete:Jy(n,e.key)};else if(e instanceof Uo)t={update:KE(n,e.key,e.data),updateMask:V5(e.fieldMask)};else{if(!(e instanceof m5))return Be(16599,{Vt:e.type});t={verify:Jy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const h=c.transform;if(h instanceof gh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Oc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Dc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Wf)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Be(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:N5(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Be(27497)})(n,e.precondition)),t}function j5(n,e){return n&&n.length>0?(_t(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?Ii(a.updateTime):Ii(l);return c.isEqual(Fe.min())&&(c=Ii(l)),new h5(c,a.transformResults||[])})(t,e)))):[]}function O5(n,e){return{documents:[LS(n,e.path)]}}function MS(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=LS(n,a);const l=(function(p){if(p.length!==0)return US(oi.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((v=>(function(_){return{field:po(_.field),direction:M5(_.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Wy(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function D5(n,e,t,r){const{ft:a,parent:l}=MS(n,e),c={},h=[];let f=0;return t.forEach((p=>{const v="aggregate_"+f++;c[v]=p.alias,p.aggregateType==="count"?h.push({alias:v,count:{}}):p.aggregateType==="avg"?h.push({alias:v,avg:{field:po(p.fieldPath)}}):p.aggregateType==="sum"&&h.push({alias:v,sum:{field:po(p.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:h,structuredQuery:a.structuredQuery},parent:a.parent},gt:c,parent:l}}function L5(n){let e=C5(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){_t(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(b){const _=PS(b);return _ instanceof oi&&hS(_)?_.getFilters():[_]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((_=>(function(S){return new ph(hc(S.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(_)))})(t.orderBy));let h=null;t.limit&&(h=(function(b){let _;return _=typeof b=="object"?b.value:b,bm(_)?null:_})(t.limit));let f=null;t.startAt&&(f=(function(b){const _=!!b.before,T=b.values||[];return new Qf(T,_)})(t.startAt));let p=null;return t.endAt&&(p=(function(b){const _=!b.before,T=b.values||[];return new Qf(T,_)})(t.endAt)),Z6(e,a,c,l,h,"F",f,p)}function k5(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function PS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=hc(t.unaryFilter.field);return wn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=hc(t.unaryFilter.field);return wn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=hc(t.unaryFilter.field);return wn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=hc(t.unaryFilter.field);return wn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(n):n.fieldFilter!==void 0?(function(t){return wn.create(hc(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return oi.create(t.compositeFilter.filters.map((r=>PS(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(t.compositeFilter.op))})(n):Be(30097,{filter:n})}function M5(n){return w5[n]}function P5(n){return T5[n]}function U5(n){return A5[n]}function po(n){return{fieldPath:n.canonicalString()}}function hc(n){return Xn.fromServerFormat(n.fieldPath)}function US(n){return n instanceof wn?(function(t){if(t.op==="=="){if(LE(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NAN"}};if(DE(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(LE(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NAN"}};if(DE(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(t.field),op:P5(t.op),value:t.value}}})(n):n instanceof oi?(function(t){const r=t.getFilters().map((a=>US(a)));return r.length===1?r[0]:{compositeFilter:{op:U5(t.op),filters:r}}})(n):Be(54877,{filter:n})}function V5(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function VS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class vo{constructor(e,t,r,a,l=Fe.min(),c=Fe.min(),h=Jn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new vo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class q5{constructor(e){this.yt=e}}function B5(n){const e=L5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xf(e,e.limit,"L"):e}class z5{constructor(){this.Cn=new H5}addToCollectionParentIndex(e,t){return this.Cn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(No.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(No.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class H5{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Rn(kt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Rn(kt.comparator)).toArray()}}const YE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qS=41943040;class Br{static withCacheSize(e){return new Br(e,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}Br.DEFAULT_COLLECTION_PERCENTILE=10,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Br.DEFAULT=new Br(qS,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Br.DISABLED=new Br(-1,0,0);class Lc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lc(0)}static cr(){return new Lc(-1)}}const QE="LruGarbageCollector",F5=1048576;function XE([n,e],[t,r]){const a=lt(n,t);return a===0?lt(e,r):a}class $5{constructor(e){this.Ir=e,this.buffer=new Rn(XE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();XE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class G5{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(QE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qc(t)?Te(QE,"Ignoring IndexedDB error during garbage collection: ",t):await Yc(t)}await this.Vr(3e5)}))}}class K5{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(vm.ce);const r=new $5(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(YE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,c,h,f,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,c=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(r=b,h=Date.now(),this.removeTargets(e,r,t)))).next((b=>(l=b,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(p=Date.now(),cc()<=ot.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${l} targets in `+(f-h)+`ms
	Removed ${b} documents in `+(p-f)+`ms
Total Duration: ${p-v}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function Y5(n,e){return new K5(n,e)}class Q5{constructor(){this.changes=new _l((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ur.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class X5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class W5{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&ih(r.mutation,a,os.empty(),zt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ct()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ct()){const a=ol();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=Yu();return l.forEach(((h,f)=>{c=c.insert(h,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=ol();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ct())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,r,a){let l=Na();const c=sh(),h=(function(){return sh()})();return t.forEach(((f,p)=>{const v=r.get(p.key);a.has(p.key)&&(v===void 0||v.mutation instanceof Uo)?l=l.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),ih(v.mutation,p,v.mutation.getFieldMask(),zt.now())):c.set(p.key,os.empty())})),this.recalculateAndSaveOverlays(e,l).next((f=>(f.forEach(((p,v)=>c.set(p,v))),t.forEach(((p,v)=>h.set(p,new X5(v,c.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=sh();let a=new tn(((c,h)=>c-h)),l=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((f=>{const p=t.get(f);if(p===null)return;let v=r.get(f)||os.empty();v=h.applyToLocalView(p,v),r.set(f,v);const b=(a.get(h.batchId)||ct()).add(f);a=a.insert(h.batchId,b)}))})).next((()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,v=f.value,b=_S();v.forEach((_=>{if(!l.has(_)){const T=NS(t.get(_),r.get(_));T!==null&&b.set(_,T),l=l.add(_)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,b))}return fe.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return Pe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):fe.resolve(ol());let h=hh,f=l;return c.next((p=>fe.forEach(p,((v,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),l.get(v)?fe.resolve():this.remoteDocumentCache.getEntry(e,v).next((_=>{f=f.insert(v,_)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,f,p,ct()))).next((v=>({batchId:h,changes:xS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next((r=>{let a=Yu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=Yu();return this.indexManager.getCollectionParents(e,l).next((h=>fe.forEach(h,(f=>{const p=(function(b,_){return new Xc(_,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next((v=>{v.forEach(((b,_)=>{c=c.insert(b,_)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((f,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,ur.newInvalidDocument(v)))}));let h=Yu();return c.forEach(((f,p)=>{const v=l.get(f);v!==void 0&&ih(v.mutation,p,os.empty(),zt.now()),wm(t,p)&&(h=h.insert(f,p))})),h}))}}class Z5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return fe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ii(a.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:B5(a.bundledQuery),readTime:Ii(a.readTime)}})(t)),fe.resolve()}}class J5{constructor(){this.overlays=new tn(Pe.comparator),this.qr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ol();return fe.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.St(e,t,l)})),fe.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const a=ol(),l=t.length+1,c=new Pe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&f.largestBatchId>r&&a.set(f.getKey(),f)}return fe.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new tn(((p,v)=>p-v));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=l.get(p.largestBatchId);v===null&&(v=ol(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=ol(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,v)=>h.set(p,v))),!(h.size()>=a)););return fe.resolve(h)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new g5(t,r));let l=this.qr.get(t);l===void 0&&(l=ct(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}class eD{constructor(){this.sessionToken=Jn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}class sv{constructor(){this.Qr=new Rn(kn.$r),this.Ur=new Rn(kn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new kn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new kn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Pe(new kt([])),r=new kn(t,e),a=new kn(t,e+1),l=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Pe(new kt([])),r=new kn(t,e),a=new kn(t,e+1);let l=ct();return this.Ur.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new kn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class kn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Pe.comparator(e.key,t.key)||lt(e.Yr,t.Yr)}static Kr(e,t){return lt(e.Yr,t.Yr)||Pe.comparator(e.key,t.key)}}class tD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Rn(kn.$r)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new p5(l,t,r,a);this.mutationQueue.push(c);for(const h of a)this.Zr=this.Zr.add(new kn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return fe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?K0:this.tr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new kn(t,0),a=new kn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(c=>{const h=this.Xr(c.Yr);l.push(h)})),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(lt);return t.forEach((a=>{const l=new kn(a,0),c=new kn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(h=>{r=r.add(h.Yr)}))})),fe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;Pe.isDocumentKey(l)||(l=l.child(""));const c=new kn(new Pe(l),0);let h=new Rn(lt);return this.Zr.forEachWhile((f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(h=h.add(f.Yr)),!0)}),c),fe.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){_t(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return fe.forEach(t.mutations,(a=>{const l=new kn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new kn(t,0),a=this.Zr.firstAfterOrEqual(r);return fe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nD{constructor(e){this.ri=e,this.docs=(function(){return new tn(Pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():ur.newInvalidDocument(t))}getEntries(e,t){let r=Na();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():ur.newInvalidDocument(a))})),fe.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Na();const c=t.path,h=new Pe(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:v}}=f.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||R6(C6(v),r)<=0||(a.has(v.key)||wm(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return fe.resolve(l)}getAllFromCollectionGroup(e,t,r,a){Be(9500)}ii(e,t){return fe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new rD(this)}getSize(e){return fe.resolve(this.size)}}class rD extends Q5{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),fe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class sD{constructor(e){this.persistence=e,this.si=new _l((t=>X0(t)),W0),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.oi=0,this._i=new sv,this.targetCount=0,this.ai=Lc.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),fe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Lc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Pr(t),fe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),fe.waitFor(l).next((()=>a))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this._i.containsKey(t))}}class BS{constructor(e,t){this.ui={},this.overlays={},this.ci=new vm(0),this.li=!1,this.li=!0,this.hi=new eD,this.referenceDelegate=e(this),this.Pi=new sD(this),this.indexManager=new z5,this.remoteDocumentCache=(function(a){return new nD(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new q5(t),this.Ii=new Z5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new J5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new tD(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Te("MemoryPersistence","Starting transaction:",e);const a=new iD(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return fe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class iD extends j6{constructor(e){super(),this.currentSequenceNumber=e}}class iv{constructor(e){this.persistence=e,this.Ri=new sv,this.Vi=null}static mi(e){return new iv(e)}get fi(){if(this.Vi)return this.Vi;throw Be(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,(r=>{const a=Pe.fromPath(r);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Fe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Jf{constructor(e,t){this.persistence=e,this.pi=new _l((r=>L6(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=Y5(this,t)}static mi(e,t){return new Jf(e,t)}Ei(){}di(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return fe.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?fe.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((h=>{h||(r++,l.removeEntry(c,Fe.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=If(e.data.value)),t}br(e,t,r){return fe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return fe.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class av{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=ct(),a=ct();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new av(e,t.fromCache,r,a)}}class aD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class oD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return DI()?8:O6(fr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new aD;return this.Ss(e,t,c).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>l.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(cc()<=ot.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",uc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(cc()<=ot.DEBUG&&Te("QueryEngine","Query:",uc(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(cc()<=ot.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",uc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ri(t))):fe.resolve())}ys(e,t){if(UE(t))return fe.resolve(null);let r=Ri(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Xf(t,null,"F"),r=Ri(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=ct(...l);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const p=this.Ds(t,h);return this.Cs(t,p,c,f.readTime)?this.ys(e,Xf(t,null,"F")):this.vs(e,p,t,f)}))))})))))}ws(e,t,r,a){return UE(t)||a.isEqual(Fe.min())?fe.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,a)?fe.resolve(null):(cc()<=ot.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),uc(t)),this.vs(e,c,t,N6(a,hh)).next((h=>h)))}))}Ds(e,t){let r=new Rn(vS(e));return t.forEach(((a,l)=>{wm(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return cc()<=ot.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",uc(t)),this.ps.getDocumentsMatchingQuery(e,t,No.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const ov="LocalStore",lD=3e8;class cD{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new tn(lt),this.xs=new _l((l=>X0(l)),W0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function uD(n,e,t,r){return new cD(n,e,t,r)}async function zS(n,e){const t=He(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],h=[];let f=ct();for(const p of a){c.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}for(const p of l){h.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:h})))}))}))}function hD(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,p,v){const b=p.batch,_=b.keys();let T=fe.resolve();return _.forEach((S=>{T=T.next((()=>v.getEntry(f,S))).next((O=>{const R=p.docVersions.get(S);_t(R!==null,48541),O.version.compareTo(R)<0&&(b.applyToRemoteDocument(O,p),O.isValidDocument()&&(O.setReadTime(p.commitVersion),v.addEntry(O)))}))})),T.next((()=>h.mutationQueue.removeMutationBatch(f,b)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=ct();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function HS(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function dD(n,e){const t=He(n),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((v,b)=>{const _=a.get(b);if(!_)return;h.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,b))));let T=_.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?T=T.withResumeToken(Jn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):v.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(v.resumeToken,r)),a=a.insert(b,T),(function(O,R,U){return O.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=lD?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(_,T,v)&&h.push(t.Pi.updateTargetData(l,T))}));let f=Na(),p=ct();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(fD(l,c,e.documentUpdates).next((v=>{f=v.ks,p=v.qs}))),!r.isEqual(Fe.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((b=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));h.push(v)}return fe.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,f,p))).next((()=>f))})).then((l=>(t.Ms=a,l)))}function fD(n,e,t){let r=ct(),a=ct();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=Na();return t.forEach(((h,f)=>{const p=l.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),f.isNoDocument()&&f.version.isEqual(Fe.min())?(e.removeEntry(h,f.readTime),c=c.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),c=c.insert(h,f)):Te(ov,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)})),{ks:c,qs:a}}))}function mD(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=K0),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function pD(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((l=>l?(a=l,fe.resolve(a)):t.Pi.allocateTargetId(r).next((c=>(a=new vo(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function t0(n,e,t){const r=He(n),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Qc(c))throw c;Te(ov,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function WE(n,e,t){const r=He(n);let a=Fe.min(),l=ct();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,p,v){const b=He(f),_=b.xs.get(v);return _!==void 0?fe.resolve(b.Ms.get(_)):b.Pi.getTargetData(p,v)})(r,c,Ri(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,h.targetId).next((f=>{l=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:Fe.min(),t?l:ct()))).next((h=>(gD(r,e5(e),h),{documents:h,Qs:l})))))}function gD(n,e,t){let r=n.Os.get(e)||Fe.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Os.set(e,r)}class ZE{constructor(){this.activeTargetIds=a5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yD{constructor(){this.Mo=new ZE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ZE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vD{Oo(e){}shutdown(){}}const JE="ConnectivityMonitor";class ew{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(JE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(JE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let cf=null;function n0(){return cf===null?cf=(function(){return 268435456+Math.round(2147483648*Math.random())})():cf++,"0x"+cf.toString(16)}const cy="RestConnection",bD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===Kf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const c=n0(),h=this.zo(e,t.toUriEncodedString());Te(cy,`Sending RPC '${e}' ${c}:`,h,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,a,l);const{host:p}=new URL(h),v=Fc(p);return this.Jo(e,h,f,r,v).then((b=>(Te(cy,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw Cc(cy,`RPC '${e}' ${c} failed with error: `,b,"url: ",h,"request:",r),b}))}Ho(e,t,r,a,l,c){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Kc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const r=bD[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class _D{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const lr="WebChannelConnection";class ED extends xD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=n0();return new Promise(((h,f)=>{const p=new FA;p.setWithCredentials(!0),p.listenOnce($A.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Rf.NO_ERROR:const b=p.getResponseJson();Te(lr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),h(b);break;case Rf.TIMEOUT:Te(lr,`RPC '${e}' ${c} timed out`),f(new we(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Rf.HTTP_ERROR:const _=p.getStatus();if(Te(lr,`RPC '${e}' ${c} failed with status:`,_,"response text:",p.getResponseText()),_>0){let T=p.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T?.error;if(S&&S.status&&S.message){const O=(function(U){const z=U.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(z)>=0?z:ce.UNKNOWN})(S.status);f(new we(O,S.message))}else f(new we(ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new we(ce.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Te(lr,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);Te(lr,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=n0(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=YA(),h=KA(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=l.join("");Te(lr,`Creating RPC '${e}' stream ${a}: ${v}`,f);const b=c.createWebChannel(v,f);this.I_(b);let _=!1,T=!1;const S=new _D({Yo:R=>{T?Te(lr,`Not sending because RPC '${e}' stream ${a} is closed:`,R):(_||(Te(lr,`Opening RPC '${e}' stream ${a} transport.`),b.open(),_=!0),Te(lr,`RPC '${e}' stream ${a} sending:`,R),b.send(R))},Zo:()=>b.close()}),O=(R,U,z)=>{R.listen(U,(Y=>{try{z(Y)}catch(Q){setTimeout((()=>{throw Q}),0)}}))};return O(b,Ku.EventType.OPEN,(()=>{T||(Te(lr,`RPC '${e}' stream ${a} transport opened.`),S.o_())})),O(b,Ku.EventType.CLOSE,(()=>{T||(T=!0,Te(lr,`RPC '${e}' stream ${a} transport closed`),S.a_(),this.E_(b))})),O(b,Ku.EventType.ERROR,(R=>{T||(T=!0,Cc(lr,`RPC '${e}' stream ${a} transport errored. Name:`,R.name,"Message:",R.message),S.a_(new we(ce.UNAVAILABLE,"The operation could not be completed")))})),O(b,Ku.EventType.MESSAGE,(R=>{if(!T){const U=R.data[0];_t(!!U,16349);const z=U,Y=z?.error||z[0]?.error;if(Y){Te(lr,`RPC '${e}' stream ${a} received error:`,Y);const Q=Y.status;let ie=(function(k){const V=En[k];if(V!==void 0)return RS(V)})(Q),ve=Y.message;ie===void 0&&(ie=ce.INTERNAL,ve="Unknown error status: "+Q+" with message "+Y.message),T=!0,S.a_(new we(ie,ve)),b.close()}else Te(lr,`RPC '${e}' stream ${a} received:`,U),S.u_(U)}})),O(h,GA.STAT_EVENT,(R=>{R.stat===Fy.PROXY?Te(lr,`RPC '${e}' stream ${a} detected buffering proxy`):R.stat===Fy.NOPROXY&&Te(lr,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function uy(){return typeof document<"u"?document:null}function Nm(n){return new S5(n,!0)}class FS{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&Te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const tw="PersistentStream";class $S{constructor(e,t,r,a,l,c,h,f){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new FS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Sa(t.toString()),Sa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new we(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(tw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Te(tw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wD extends $S{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=R5(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Fe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Fe.min():c.readTime?Ii(c.readTime):Fe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=e0(this.serializer),t.addTarget=(function(l,c){let h;const f=c.target;if(h=Qy(f)?{documents:O5(l,f)}:{query:MS(l,f).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=OS(l,c.resumeToken);const p=Wy(l,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(Fe.min())>0){h.readTime=Zf(l,c.snapshotVersion.toTimestamp());const p=Wy(l,c.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const r=k5(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=e0(this.serializer),t.removeTarget=e,this.q_(t)}}class TD extends $S{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return _t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=j5(e.writeResults,e.commitTime),r=Ii(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=e0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>I5(this.serializer,r)))};this.q_(t)}}class AD{}class SD extends AD{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Zy(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(ce.UNKNOWN,l.toString())}))}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,Zy(t,r),a,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new we(ce.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ND{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Sa(t),this.aa=!1):Te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const pl="RemoteStore";class CD{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{El(this)&&(Te(pl,"Restarting streams for network reachability change."),await(async function(f){const p=He(f);p.Ea.add(4),await Mh(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Cm(p)})(this))}))})),this.Ra=new ND(r,a)}}async function Cm(n){if(El(n))for(const e of n.da)await e(!0)}async function Mh(n){for(const e of n.da)await e(!1)}function GS(n,e){const t=He(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),hv(t)?uv(t):Wc(t).O_()&&cv(t,e))}function lv(n,e){const t=He(n),r=Wc(t);t.Ia.delete(e),r.O_()&&KS(t,e),t.Ia.size===0&&(r.O_()?r.L_():El(t)&&t.Ra.set("Unknown"))}function cv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wc(n).Y_(e)}function KS(n,e){n.Va.Ue(e),Wc(n).Z_(e)}function uv(n){n.Va=new E5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Wc(n).start(),n.Ra.ua()}function hv(n){return El(n)&&!Wc(n).x_()&&n.Ia.size>0}function El(n){return He(n).Ea.size===0}function YS(n){n.Va=void 0}async function RD(n){n.Ra.set("Online")}async function ID(n){n.Ia.forEach(((e,t)=>{cv(n,e)}))}async function jD(n,e){YS(n),hv(n)?(n.Ra.ha(e),uv(n)):n.Ra.set("Unknown")}async function OD(n,e,t){if(n.Ra.set("Online"),e instanceof jS&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(r){Te(pl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await em(n,r)}else if(e instanceof Df?n.Va.Ze(e):e instanceof IS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Fe.min()))try{const r=await HS(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const h=l.Va.Tt(c);return h.targetChanges.forEach(((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const v=l.Ia.get(p);v&&l.Ia.set(p,v.withResumeToken(f.resumeToken,c))}})),h.targetMismatches.forEach(((f,p)=>{const v=l.Ia.get(f);if(!v)return;l.Ia.set(f,v.withResumeToken(Jn.EMPTY_BYTE_STRING,v.snapshotVersion)),KS(l,f);const b=new vo(v.target,f,p,v.sequenceNumber);cv(l,b)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){Te(pl,"Failed to raise snapshot:",r),await em(n,r)}}async function em(n,e,t){if(!Qc(e))throw e;n.Ea.add(1),await Mh(n),n.Ra.set("Offline"),t||(t=()=>HS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Te(pl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Cm(n)}))}function QS(n,e){return e().catch((t=>em(n,t,e)))}async function Rm(n){const e=He(n),t=jo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:K0;for(;DD(e);)try{const a=await mD(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,LD(e,a)}catch(a){await em(e,a)}XS(e)&&WS(e)}function DD(n){return El(n)&&n.Ta.length<10}function LD(n,e){n.Ta.push(e);const t=jo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function XS(n){return El(n)&&!jo(n).x_()&&n.Ta.length>0}function WS(n){jo(n).start()}async function kD(n){jo(n).ra()}async function MD(n){const e=jo(n);for(const t of n.Ta)e.ea(t.mutations)}async function PD(n,e,t){const r=n.Ta.shift(),a=tv.from(r,e,t);await QS(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Rm(n)}async function UD(n,e){e&&jo(n).X_&&await(async function(r,a){if((function(c){return b5(c)&&c!==ce.ABORTED})(a.code)){const l=r.Ta.shift();jo(r).B_(),await QS(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Rm(r)}})(n,e),XS(n)&&WS(n)}async function nw(n,e){const t=He(n);t.asyncQueue.verifyOperationInProgress(),Te(pl,"RemoteStore received new credentials");const r=El(t);t.Ea.add(3),await Mh(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Cm(t)}async function VD(n,e){const t=He(n);e?(t.Ea.delete(2),await Cm(t)):e||(t.Ea.add(2),await Mh(t),t.Ra.set("Unknown"))}function Wc(n){return n.ma||(n.ma=(function(t,r,a){const l=He(t);return l.sa(),new wD(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:RD.bind(null,n),t_:ID.bind(null,n),r_:jD.bind(null,n),H_:OD.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),hv(n)?uv(n):n.Ra.set("Unknown")):(await n.ma.stop(),YS(n))}))),n.ma}function jo(n){return n.fa||(n.fa=(function(t,r,a){const l=He(t);return l.sa(),new TD(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:kD.bind(null,n),r_:UD.bind(null,n),ta:MD.bind(null,n),na:PD.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Rm(n)):(await n.fa.stop(),n.Ta.length>0&&(Te(pl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class dv{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,h=new dv(e,t,c,a,l);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fv(n,e){if(Sa("AsyncQueue",`${e}: ${n}`),Qc(n))return new we(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Ec{static emptySet(e){return new Ec(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pe.comparator(t.key,r.key):(t,r)=>Pe.comparator(t.key,r.key),this.keyedMap=Yu(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ec)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ec;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class rw{constructor(){this.ga=new tn(Pe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Be(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class kc{constructor(e,t,r,a,l,c,h,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new kc(e,t,Ec.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Em(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class qD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class BD{constructor(){this.queries=sw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=He(t),l=a.queries;a.queries=sw(),l.forEach(((c,h)=>{for(const f of h.Sa)f.onError(r)}))})(this,new we(ce.ABORTED,"Firestore shutting down"))}}function sw(){return new _l((n=>yS(n)),Em)}async function mv(n,e){const t=He(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new qD,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const h=fv(c,`Initialization of query '${uc(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&gv(t)}async function pv(n,e){const t=He(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function zD(n,e){const t=He(n);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const h of c.Sa)h.Fa(a)&&(r=!0);c.wa=a}}r&&gv(t)}function HD(n,e,t){const r=He(n),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function gv(n){n.Ca.forEach((e=>{e.next()}))}var r0,iw;(iw=r0||(r0={})).Ma="default",iw.Cache="cache";class yv{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new kc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==r0.Cache}}class ZS{constructor(e){this.key=e}}class JS{constructor(e){this.key=e}}class FD{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ct(),this.mutatedKeys=ct(),this.eu=vS(e),this.tu=new Ec(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new rw,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,h=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,b)=>{const _=a.get(v),T=wm(this.query,b)?b:null,S=!!_&&this.mutatedKeys.has(_.key),O=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let R=!1;_&&T?_.data.isEqual(T.data)?S!==O&&(r.track({type:3,doc:T}),R=!0):this.su(_,T)||(r.track({type:2,doc:T}),R=!0,(f&&this.eu(T,f)>0||p&&this.eu(T,p)<0)&&(h=!0)):!_&&T?(r.track({type:0,doc:T}),R=!0):_&&!T&&(r.track({type:1,doc:_}),R=!0,(f||p)&&(h=!0)),R&&(T?(c=c.add(T),l=O?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:c,iu:r,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,b)=>(function(T,S){const O=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{Rt:R})}};return O(T)-O(S)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(r),a=a??!1;const h=t&&!a?this._u():[],f=this.Xa.size===0&&this.current&&!a?1:0,p=f!==this.Za;return this.Za=f,c.length!==0||p?{snapshot:new kc(this.query,e.tu,l,c,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ct(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new JS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new ZS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ct();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return kc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vv="SyncEngine";class $D{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class GD{constructor(e){this.key=e,this.hu=!1}}class KD{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new _l((h=>yS(h)),Em),this.Iu=new Map,this.Eu=new Set,this.du=new tn(Pe.comparator),this.Au=new Map,this.Ru=new sv,this.Vu={},this.mu=new Map,this.fu=Lc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YD(n,e,t=!0){const r=iN(n);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await eN(r,e,t,!0),a}async function QD(n,e){const t=iN(n);await eN(t,e,!0,!1)}async function eN(n,e,t,r){const a=await pD(n.localStore,Ri(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await XD(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&GS(n.remoteStore,a),h}async function XD(n,e,t,r,a){n.pu=(b,_,T)=>(async function(O,R,U,z){let Y=R.view.ru(U);Y.Cs&&(Y=await WE(O.localStore,R.query,!1).then((({documents:L})=>R.view.ru(L,Y))));const Q=z&&z.targetChanges.get(R.targetId),ie=z&&z.targetMismatches.get(R.targetId)!=null,ve=R.view.applyChanges(Y,O.isPrimaryClient,Q,ie);return ow(O,R.targetId,ve.au),ve.snapshot})(n,b,_,T);const l=await WE(n.localStore,e,!0),c=new FD(e,l.Qs),h=c.ru(l.documents),f=kh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),p=c.applyChanges(h,n.isPrimaryClient,f);ow(n,t,p.au);const v=new $D(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function WD(n,e,t){const r=He(n),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!Em(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await t0(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&lv(r.remoteStore,a.targetId),s0(r,a.targetId)})).catch(Yc)):(s0(r,a.targetId),await t0(r.localStore,a.targetId,!0))}async function ZD(n,e){const t=He(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),lv(t.remoteStore,r.targetId))}async function JD(n,e,t){const r=aL(n);try{const a=await(function(c,h){const f=He(c),p=zt.now(),v=h.reduce(((T,S)=>T.add(S.key)),ct());let b,_;return f.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let S=Na(),O=ct();return f.Ns.getEntries(T,v).next((R=>{S=R,S.forEach(((U,z)=>{z.isValidDocument()||(O=O.add(U))}))})).next((()=>f.localDocuments.getOverlayedDocuments(T,S))).next((R=>{b=R;const U=[];for(const z of h){const Y=f5(z,b.get(z.key).overlayedDocument);Y!=null&&U.push(new Uo(z.key,Y,lS(Y.value.mapValue),Ms.exists(!0)))}return f.mutationQueue.addMutationBatch(T,p,U,h)})).next((R=>{_=R;const U=R.applyToLocalDocumentSet(b,O);return f.documentOverlayCache.saveOverlays(T,R.batchId,U)}))})).then((()=>({batchId:_.batchId,changes:xS(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,h,f){let p=c.Vu[c.currentUser.toKey()];p||(p=new tn(lt)),p=p.insert(h,f),c.Vu[c.currentUser.toKey()]=p})(r,a.batchId,t),await Ph(r,a.changes),await Rm(r.remoteStore)}catch(a){const l=fv(a,"Failed to persist write");t.reject(l)}}async function tN(n,e){const t=He(n);try{const r=await dD(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(_t(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?_t(c.hu,14607):a.removedDocuments.size>0&&(_t(c.hu,42227),c.hu=!1))})),await Ph(t,r,e)}catch(r){await Yc(r)}}function aw(n,e,t){const r=He(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(c,h){const f=He(c);f.onlineState=h;let p=!1;f.queries.forEach(((v,b)=>{for(const _ of b.Sa)_.va(h)&&(p=!0)})),p&&gv(f)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function eL(n,e,t){const r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new tn(Pe.comparator);c=c.insert(l,ur.newNoDocument(l,Fe.min()));const h=ct().add(l),f=new Sm(Fe.min(),new Map,new tn(lt),c,h);await tN(r,f),r.du=r.du.remove(l),r.Au.delete(e),bv(r)}else await t0(r.localStore,e,!1).then((()=>s0(r,e,t))).catch(Yc)}async function tL(n,e){const t=He(n),r=e.batch.batchId;try{const a=await hD(t.localStore,e);rN(t,r,null),nN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ph(t,a)}catch(a){await Yc(a)}}async function nL(n,e,t){const r=He(n);try{const a=await(function(c,h){const f=He(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return f.mutationQueue.lookupMutationBatch(p,h).next((b=>(_t(b!==null,37113),v=b.keys(),f.mutationQueue.removeMutationBatch(p,b)))).next((()=>f.mutationQueue.performConsistencyCheck(p))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(p,v,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>f.localDocuments.getDocuments(p,v)))}))})(r.localStore,e);rN(r,e,t),nN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ph(r,a)}catch(a){await Yc(a)}}function nN(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function rN(n,e,t){const r=He(n);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function s0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||sN(n,r)}))}function sN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(lv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),bv(n))}function ow(n,e,t){for(const r of t)r instanceof ZS?(n.Ru.addReference(r.key,e),rL(n,r)):r instanceof JS?(Te(vv,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||sN(n,r.key)):Be(19791,{wu:r})}function rL(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Te(vv,"New document in limbo: "+t),n.Eu.add(r),bv(n))}function bv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Pe(kt.fromString(e)),r=n.fu.next();n.Au.set(r,new GD(t)),n.du=n.du.insert(t,r),GS(n.remoteStore,new vo(Ri(_m(t.path)),r,"TargetPurposeLimboResolution",vm.ce))}}async function Ph(n,e,t){const r=He(n),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,f)=>{c.push(r.pu(f,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(p){a.push(p);const v=av.As(f.targetId,p);l.push(v)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(f,p){const v=He(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>fe.forEach(p,(_=>fe.forEach(_.Es,(T=>v.persistence.referenceDelegate.addReference(b,_.targetId,T))).next((()=>fe.forEach(_.ds,(T=>v.persistence.referenceDelegate.removeReference(b,_.targetId,T)))))))))}catch(b){if(!Qc(b))throw b;Te(ov,"Failed to update sequence numbers: "+b)}for(const b of p){const _=b.targetId;if(!b.fromCache){const T=v.Ms.get(_),S=T.snapshotVersion,O=T.withLastLimboFreeSnapshotVersion(S);v.Ms=v.Ms.insert(_,O)}}})(r.localStore,l))}async function sL(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){Te(vv,"User change. New user:",e.toKey());const r=await zS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((f=>{f.reject(new we(ce.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ph(t,r.Ls)}}function iL(n,e){const t=He(n),r=t.Au.get(e);if(r&&r.hu)return ct().add(r.key);{let a=ct();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const h=t.Tu.get(c);a=a.unionWith(h.view.nu)}return a}}function iN(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eL.bind(null,e),e.Pu.H_=zD.bind(null,e.eventManager),e.Pu.yu=HD.bind(null,e.eventManager),e}function aL(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nL.bind(null,e),e}class tm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return uD(this.persistence,new oD,e.initialUser,this.serializer)}Cu(e){return new BS(iv.mi,this.serializer)}Du(e){return new yD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tm.provider={build:()=>new tm};class oL extends tm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){_t(this.persistence.referenceDelegate instanceof Jf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new G5(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Br.withCacheSize(this.cacheSizeBytes):Br.DEFAULT;return new BS((r=>Jf.mi(r,t)),this.serializer)}}class i0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sL.bind(null,this.syncEngine),await VD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new BD})()}createDatastore(e){const t=Nm(e.databaseInfo.databaseId),r=(function(l){return new ED(l)})(e.databaseInfo);return(function(l,c,h,f){return new SD(l,c,h,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,h){return new CD(r,a,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>aw(this.syncEngine,t,0)),(function(){return ew.v()?new ew:new vD})())}createSyncEngine(e,t){return(function(a,l,c,h,f,p,v){const b=new KD(a,l,c,h,f,p);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=He(t);Te(pl,"RemoteStore shutting down."),r.Ea.add(5),await Mh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}i0.provider={build:()=>new i0};class xv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Sa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Oo="FirestoreClient";class lL{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=cr.UNAUTHENTICATED,this.clientId=G0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{Te(Oo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(Te(Oo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=fv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function hy(n,e){n.asyncQueue.verifyOperationInProgress(),Te(Oo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await zS(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function lw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await cL(n);Te(Oo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>nw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>nw(e.remoteStore,a))),n._onlineComponents=e}async function cL(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(Oo,"Using user provided OfflineComponentProvider");try{await hy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ce.FAILED_PRECONDITION||a.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Cc("Error using user provided cache. Falling back to memory cache: "+t),await hy(n,new tm)}}else Te(Oo,"Using default OfflineComponentProvider"),await hy(n,new oL(void 0));return n._offlineComponents}async function _v(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(Oo,"Using user provided OnlineComponentProvider"),await lw(n,n._uninitializedComponentsProvider._online)):(Te(Oo,"Using default OnlineComponentProvider"),await lw(n,new i0))),n._onlineComponents}function uL(n){return _v(n).then((e=>e.syncEngine))}function hL(n){return _v(n).then((e=>e.datastore))}async function nm(n){const e=await _v(n),t=e.eventManager;return t.onListen=YD.bind(null,e.syncEngine),t.onUnlisten=WD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=QD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ZD.bind(null,e.syncEngine),t}function dL(n,e,t={}){const r=new Ci;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,f,p){const v=new xv({next:_=>{v.Nu(),c.enqueueAndForget((()=>pv(l,b)));const T=_.docs.has(h);!T&&_.fromCache?p.reject(new we(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&_.fromCache&&f&&f.source==="server"?p.reject(new we(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(_)},error:_=>p.reject(_)}),b=new yv(_m(h.path),v,{includeMetadataChanges:!0,qa:!0});return mv(l,b)})(await nm(n),n.asyncQueue,e,t,r))),r.promise}function fL(n,e,t={}){const r=new Ci;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,f,p){const v=new xv({next:_=>{v.Nu(),c.enqueueAndForget((()=>pv(l,b))),_.fromCache&&f.source==="server"?p.reject(new we(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(_)},error:_=>p.reject(_)}),b=new yv(h,v,{includeMetadataChanges:!0,qa:!0});return mv(l,b)})(await nm(n),n.asyncQueue,e,t,r))),r.promise}function mL(n,e,t){const r=new Ci;return n.asyncQueue.enqueueAndForget((async()=>{try{const a=await hL(n);r.resolve((async function(c,h,f){const p=He(c),{request:v,gt:b,parent:_}=D5(p.serializer,J6(h),f);p.connection.$o||delete v.parent;const T=(await p.Ho("RunAggregationQuery",p.serializer.databaseId,_,v,1)).filter((O=>!!O.result));_t(T.length===1,64727);const S=T[0].result?.aggregateFields;return Object.keys(S).reduce(((O,R)=>(O[b[R]]=S[R],O)),{})})(a,e,t))}catch(a){r.reject(a)}})),r.promise}function aN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const cw=new Map;const oN="firestore.googleapis.com",uw=!0;class hw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oN,this.ssl=uw}else this.host=e.host,this.ssl=e.ssl??uw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<F5)throw new we(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aN(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Im{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new p6;switch(r.type){case"firstParty":return new b6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=cw.get(t);r&&(Te("ComponentProvider","Removing Datastore"),cw.delete(t),r.terminate())})(this),Promise.resolve()}}function pL(n,e,t,r={}){n=Ar(n,Im);const a=Fc(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&(tA(`https://${h}`),nA("Firestore",!0)),l.host!==oN&&l.host!==h&&Cc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...l,host:h,ssl:a,emulatorOptions:r};if(!wa(f,c)&&(n._setSettings(f),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=cr.MOCK_USER;else{p=TI(r.mockUserToken,n._app?.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new we(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new cr(b)}n._authCredentials=new g6(new XA(p,v))}}class Oa{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oa(this.firestore,e,this._query)}}class cn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}toJSON(){return{type:cn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Dh(t,cn._jsonSchema))return new cn(e,r||null,new Pe(kt.fromString(t.referencePath)))}}cn._jsonSchemaVersion="firestore/documentReference/1.0",cn._jsonSchema={type:Tn("string",cn._jsonSchemaVersion),referencePath:Tn("string")};class To extends Oa{constructor(e,t,r){super(e,t,_m(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new Pe(e))}withConverter(e){return new To(this.firestore,e,this._path)}}function ut(n,e,...t){if(n=An(n),WA("collection","path",e),n instanceof Im){const r=kt.fromString(e,...t);return TE(r),new To(n,null,r)}{if(!(n instanceof cn||n instanceof To))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return TE(r),new To(n.firestore,null,r)}}function $e(n,e,...t){if(n=An(n),arguments.length===1&&(e=G0.newId()),WA("doc","path",e),n instanceof Im){const r=kt.fromString(e,...t);return wE(r),new cn(n,null,new Pe(r))}{if(!(n instanceof cn||n instanceof To))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return wE(r),new cn(n.firestore,n instanceof To?n.converter:null,new Pe(r))}}const dw="AsyncQueue";class fw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new FS(this,"async_queue_retry"),this._c=()=>{const r=uy();r&&Te(dw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=uy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=uy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ci;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qc(e))throw e;Te(dw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Sa("INTERNAL UNHANDLED ERROR: ",mw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=dv.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Be(47125,{Pc:mw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function mw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function pw(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class ki extends Im{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new fw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fw(e),this._firestoreClient=void 0,await e}}}function gL(n,e){const t=typeof n=="object"?n:aA(),r=typeof n=="string"?n:Kf,a=L0(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=EI("firestore");l&&pL(a,...l)}return a}function Uh(n){if(n._terminated)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yL(n),n._firestoreClient}function yL(n){const e=n._freezeSettings(),t=(function(a,l,c,h){return new U6(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,aN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new lL(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}class vL{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class bL{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Ds{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ds(Jn.fromBase64String(e))}catch(t){throw new we(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ds(Jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ds._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dh(e,Ds._jsonSchema))return Ds.fromBase64String(e.bytes)}}Ds._jsonSchemaVersion="firestore/bytes/1.0",Ds._jsonSchema={type:Tn("string",Ds._jsonSchemaVersion),bytes:Tn("string")};class jm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zc{constructor(e){this._methodName=e}}class ji{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ji._jsonSchemaVersion}}static fromJSON(e){if(Dh(e,ji._jsonSchema))return new ji(e.latitude,e.longitude)}}ji._jsonSchemaVersion="firestore/geoPoint/1.0",ji._jsonSchema={type:Tn("string",ji._jsonSchemaVersion),latitude:Tn("number"),longitude:Tn("number")};class Oi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Oi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dh(e,Oi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Oi(e.vectorValues);throw new we(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Oi._jsonSchemaVersion="firestore/vectorValue/1.0",Oi._jsonSchema={type:Tn("string",Oi._jsonSchemaVersion),vectorValues:Tn("object")};const xL=/^__.*__$/;class _L{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Uo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lh(e,this.data,t,this.fieldTransforms)}}class lN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Uo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ac:n})}}class Om{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Om({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(cN(this.Ac)&&xL.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class EL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Nm(e)}Cc(e,t,r,a=!1){return new Om({Ac:e,methodName:t,Dc:r,path:Xn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dm(n){const e=n._freezeSettings(),t=Nm(n._databaseId);return new EL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uN(n,e,t,r,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);Av("Data must be an object, but it was:",c,r);const h=dN(r,c);let f,p;if(l.merge)f=new os(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const _=a0(e,b,t);if(!c.contains(_))throw new we(ce.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);mN(v,_)||v.push(_)}f=new os(v),p=c.fieldTransforms.filter((b=>f.covers(b.field)))}else f=null,p=c.fieldTransforms;return new _L(new zr(h),f,p)}class Lm extends Zc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lm}}function hN(n,e,t){return new Om({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ev extends Zc{_toFieldTransform(e){return new J0(e.path,new gh)}isEqual(e){return e instanceof Ev}}class wv extends Zc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=hN(this,e,!0),r=this.vc.map((l=>wl(l,t))),a=new Oc(r);return new J0(e.path,a)}isEqual(e){return e instanceof wv&&wa(this.vc,e.vc)}}class Tv extends Zc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=hN(this,e,!0),r=this.vc.map((l=>wl(l,t))),a=new Dc(r);return new J0(e.path,a)}isEqual(e){return e instanceof Tv&&wa(this.vc,e.vc)}}function wL(n,e,t,r){const a=n.Cc(1,e,t);Av("Data must be an object, but it was:",a,r);const l=[],c=zr.empty();Po(r,((f,p)=>{const v=Sv(e,f,t);p=An(p);const b=a.yc(v);if(p instanceof Lm)l.push(v);else{const _=wl(p,b);_!=null&&(l.push(v),c.set(v,_))}}));const h=new os(l);return new lN(c,h,a.fieldTransforms)}function TL(n,e,t,r,a,l){const c=n.Cc(1,e,t),h=[a0(e,r,t)],f=[a];if(l.length%2!=0)throw new we(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<l.length;_+=2)h.push(a0(e,l[_])),f.push(l[_+1]);const p=[],v=zr.empty();for(let _=h.length-1;_>=0;--_)if(!mN(p,h[_])){const T=h[_];let S=f[_];S=An(S);const O=c.yc(T);if(S instanceof Lm)p.push(T);else{const R=wl(S,O);R!=null&&(p.push(T),v.set(T,R))}}const b=new os(p);return new lN(v,b,c.fieldTransforms)}function AL(n,e,t,r=!1){return wl(t,n.Cc(r?4:3,e))}function wl(n,e){if(fN(n=An(n)))return Av("Unsupported field value:",e,n),dN(n,e);if(n instanceof Zc)return(function(r,a){if(!cN(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const h of r){let f=wl(h,a.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,a){if((r=An(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return o5(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=zt.fromDate(r);return{timestampValue:Zf(a.serializer,l)}}if(r instanceof zt){const l=new zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zf(a.serializer,l)}}if(r instanceof ji)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ds)return{bytesValue:OS(a.serializer,r._byteString)};if(r instanceof cn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:rv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Oi)return(function(c,h){return{mapValue:{fields:{[aS]:{stringValue:oS},[Yf]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return Z0(h.serializer,p)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${ym(r)}`)})(n,e)}function dN(n,e){const t={};return eS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Po(n,((r,a)=>{const l=wl(a,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function fN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof zt||n instanceof ji||n instanceof Ds||n instanceof cn||n instanceof Zc||n instanceof Oi)}function Av(n,e,t){if(!fN(t)||!ZA(t)){const r=ym(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function a0(n,e,t){if((e=An(e))instanceof jm)return e._internalPath;if(typeof e=="string")return Sv(n,e);throw rm("Field path arguments must be of type string or ",n,!1,void 0,t)}const SL=new RegExp("[~\\*/\\[\\]]");function Sv(n,e,t){if(e.search(SL)>=0)throw rm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jm(...e.split("."))._internalPath}catch{throw rm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rm(n,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(l||c)&&(f+=" (found",l&&(f+=` in field ${r}`),c&&(f+=` in document ${a}`),f+=")"),new we(ce.INVALID_ARGUMENT,h+n+f)}function mN(n,e){return n.some((t=>t.isEqual(e)))}class pN{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(km("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class NL extends pN{data(){return super.data()}}function km(n,e){return typeof e=="string"?Sv(n,e):e instanceof jm?e._internalPath:e._delegate._internalPath}function gN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nv{}class Cv extends Nv{}function Wn(n,e,...t){let r=[];e instanceof Nv&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((f=>f instanceof Rv)).length,h=l.filter((f=>f instanceof Mm)).length;if(c>1||c>0&&h>0)throw new we(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class Mm extends Cv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Mm(e,t,r)}_apply(e){const t=this._parse(e);return vN(e._query,t),new Oa(e.firestore,e.converter,Xy(e._query,t))}_parse(e){const t=Dm(e.firestore);return(function(l,c,h,f,p,v,b){let _;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new we(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){yw(b,v);const S=[];for(const O of b)S.push(gw(f,l,O));_={arrayValue:{values:S}}}else _=gw(f,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||yw(b,v),_=AL(h,c,b,v==="in"||v==="not-in");return wn.create(p,v,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function yN(n,e,t){const r=e,a=km("where",n);return Mm._create(a,r,t)}class Rv extends Nv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Rv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:oi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const h=l.getFlattenedFilters();for(const f of h)vN(c,f),c=Xy(c,f)})(e._query,t),new Oa(e.firestore,e.converter,Xy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Iv extends Cv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Iv(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ph(l,c)})(e._query,this._field,this._direction);return new Oa(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new Xc(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function us(n,e="asc"){const t=e,r=km("orderBy",n);return Iv._create(r,t)}class jv extends Cv{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new jv(e,t,r)}_apply(e){return new Oa(e.firestore,e.converter,Xf(e._query,this._limit,this._limitType))}}function Lf(n){return S6("limit",n),jv._create("limit",n,"F")}function gw(n,e,t){if(typeof(t=An(t))=="string"){if(t==="")throw new we(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pS(e)&&t.indexOf("/")!==-1)throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(kt.fromString(t));if(!Pe.isDocumentKey(r))throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return OE(n,new Pe(r))}if(t instanceof cn)return OE(n,t._key);throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ym(t)}.`)}function yw(n,e){if(!Array.isArray(n)||n.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vN(n,e){const t=(function(a,l){for(const c of a)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class CL{convertValue(e,t="none"){switch(Io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Po(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[Yf].arrayValue?.values?.map((r=>gn(r.doubleValue)));return new Oi(t)}convertGeoPoint(e){return new ji(gn(e.latitude),gn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=xm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dh(e));default:return null}}convertTimestamp(e){const t=Co(e);return new zt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=kt.fromString(e);_t(VS(r),9688,{name:e});const a=new fh(r.get(1),r.get(3)),l=new Pe(r.popFirst(5));return a.isEqual(t)||Sa(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function bN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}function RL(){return new vL("count")}class Xu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cl extends pN{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(km("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=cl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}cl._jsonSchemaVersion="firestore/documentSnapshot/1.0",cl._jsonSchema={type:Tn("string",cl._jsonSchemaVersion),bundleSource:Tn("string","DocumentSnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class kf extends cl{data(e={}){return super.data(e)}}class ul{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Xu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new kf(this._firestore,this._userDataWriter,r.key,r,new Xu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((h=>{const f=new kf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Xu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const f=new kf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Xu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,v=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:IL(h.type),doc:f,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ul._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function IL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:n})}}function mr(n){n=Ar(n,cn);const e=Ar(n.firestore,ki);return dL(Uh(e),n._key).then((t=>xN(e,n,t)))}ul._jsonSchemaVersion="firestore/querySnapshot/1.0",ul._jsonSchema={type:Tn("string",ul._jsonSchemaVersion),bundleSource:Tn("string","QuerySnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class Pm extends CL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ds(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,t)}}function en(n){n=Ar(n,Oa);const e=Ar(n.firestore,ki),t=Uh(e),r=new Pm(e);return gN(n._query),fL(t,n._query).then((a=>new ul(e,r,n,a)))}function Mc(n,e,t){n=Ar(n,cn);const r=Ar(n.firestore,ki),a=bN(n.converter,e,t);return Um(r,[uN(Dm(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Ms.none())])}function dr(n,e,t,...r){n=Ar(n,cn);const a=Ar(n.firestore,ki),l=Dm(a);let c;return c=typeof(e=An(e))=="string"||e instanceof jm?TL(l,"updateDoc",n._key,e,t,r):wL(l,"updateDoc",n._key,e),Um(a,[c.toMutation(n._key,Ms.exists(!0))])}function Vh(n){return Um(Ar(n.firestore,ki),[new ev(n._key,Ms.none())])}function Tl(n,e){const t=Ar(n.firestore,ki),r=$e(n),a=bN(n.converter,e);return Um(t,[uN(Dm(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,Ms.exists(!1))]).then((()=>r))}function sm(n,...e){n=An(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||pw(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(pw(e[r])){const f=e[r];e[r]=f.next?.bind(f),e[r+1]=f.error?.bind(f),e[r+2]=f.complete?.bind(f)}let l,c,h;if(n instanceof cn)c=Ar(n.firestore,ki),h=_m(n._key.path),l={next:f=>{e[r]&&e[r](xN(c,n,f))},error:e[r+1],complete:e[r+2]};else{const f=Ar(n,Oa);c=Ar(f.firestore,ki),h=f._query;const p=new Pm(c);l={next:v=>{e[r]&&e[r](new ul(c,p,f,v))},error:e[r+1],complete:e[r+2]},gN(n._query)}return(function(p,v,b,_){const T=new xv(_),S=new yv(v,T,b);return p.asyncQueue.enqueueAndForget((async()=>mv(await nm(p),S))),()=>{T.Nu(),p.asyncQueue.enqueueAndForget((async()=>pv(await nm(p),S)))}})(Uh(c),h,a,l)}function Um(n,e){return(function(r,a){const l=new Ci;return r.asyncQueue.enqueueAndForget((async()=>JD(await uL(r),a,l))),l.promise})(Uh(n),e)}function xN(n,e,t){const r=t.docs.get(e._key),a=new Pm(n);return new cl(n,a,e._key,r,new Xu(t.hasPendingWrites,t.fromCache),e.converter)}function uf(n){return jL(n,{count:RL()})}function jL(n,e){const t=Ar(n.firestore,ki),r=Uh(t),a=M6(e,((l,c)=>new y5(c,l.aggregateType,l._internalFieldPath)));return mL(r,n._query,a).then((l=>(function(h,f,p){const v=new Pm(h);return new bL(f,v,p)})(t,n,l)))}function gl(){return new Ev("serverTimestamp")}function yh(...n){return new wv("arrayUnion",n)}function ll(...n){return new Tv("arrayRemove",n)}(function(e,t=!0){(function(a){Kc=a})($c),Sc(new hl("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),h=new ki(new y6(r.getProvider("auth-internal")),new x6(c,r.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new we(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fh(p.options.projectId,v)})(c,a),c);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Eo(bE,xE,e),Eo(bE,xE,"esm2020")})();const OL={apiKey:"AIzaSyB3nTJlyM3K-XpvEUrXyk3leiVeMxzkTiU",authDomain:"forexvolcano-21180.firebaseapp.com",projectId:"forexvolcano-21180",storageBucket:"forexvolcano-21180.firebasestorage.app",messagingSenderId:"264687169302",appId:"1:264687169302:web:83322d7adc303b1f0c2a37",measurementId:"G-XTB0D1TPS6"},_N=iA(OL),Le=f6(_N),Ee=gL(_N),DL=()=>{const[n,e]=M.useState(null),[t,r]=M.useState(!1),a=Pi();M.useEffect(()=>{const c=jh(Le,async h=>{if(e(h),h)try{const f=await mr($e(Ee,"users",h.uid));f.exists()&&f.data().role==="admin"?r(!0):r(!1)}catch(f){console.error("Error checking admin role:",f),r(!1)}else r(!1)});return()=>c()},[]);const l=async()=>{try{await rO(Le),a("/")}catch(c){console.error("Error logging out",c)}};return m.jsx("nav",{className:"bg-surface border-b border-gray-800 sticky top-0 z-50",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex items-center justify-between h-16",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(ze,{to:"/",className:"flex-shrink-0",children:m.jsxs("span",{className:"text-secondary text-2xl font-bold tracking-tighter",children:["Forex",m.jsx("span",{className:"text-accent",children:"Volcano"})]})}),m.jsx("div",{className:"hidden md:block",children:m.jsxs("div",{className:"ml-10 flex items-baseline space-x-4",children:[m.jsx(ze,{to:"/analysis",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Analysis"}),m.jsx(ze,{to:"/academy",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Academy"}),m.jsx(ze,{to:"/news",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"News"})]})})]}),m.jsx("div",{className:"hidden md:block",children:m.jsx("div",{className:"ml-4 flex items-center md:ml-6",children:n?m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx(ze,{to:"/community",className:"text-secondary hover:text-green-400 font-medium px-3 py-2",children:"Community"}),m.jsx(ze,{to:"/dashboard",className:"text-primary hover:text-green-400 font-medium px-3 py-2",children:"Dashboard"}),t&&m.jsx(ze,{to:"/admin",className:"text-accent hover:text-orange-400 font-medium px-3 py-2",children:"Admin Panel"}),m.jsx("button",{onClick:l,className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-md text-sm font-medium",children:"Logout"})]}):m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx(ze,{to:"/login",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Login"}),m.jsx(ze,{to:"/register",className:"bg-primary hover:bg-green-600 text-white px-3 py-2 rounded-md text-sm font-medium",children:"Get Started"})]})})}),m.jsx("div",{className:"-mr-2 flex md:hidden",children:m.jsxs("button",{type:"button",className:"bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none","aria-controls":"mobile-menu","aria-expanded":"false",children:[m.jsx("span",{className:"sr-only",children:"Open main menu"}),m.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})})})},LL=()=>m.jsx("footer",{className:"bg-[#05080f] border-t border-gray-800/50 py-12",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[m.jsxs("div",{className:"mb-6 md:mb-0 text-center md:text-left",children:[m.jsxs(ze,{to:"/",className:"text-2xl font-bold tracking-tighter text-secondary",children:["Forex",m.jsx("span",{className:"text-accent",children:"Volcano"})]}),m.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[" ",new Date().getFullYear()," ForexVolcano. All rights reserved."]})]}),m.jsxs("div",{className:"flex space-x-8",children:[m.jsx(ze,{to:"/analysis",className:"text-gray-400 hover:text-white transition-colors",children:"Analysis"}),m.jsx(ze,{to:"/news",className:"text-gray-400 hover:text-white transition-colors",children:"News"}),m.jsx(ze,{to:"/login",className:"text-gray-400 hover:text-white transition-colors",children:"Login"})]})]})})}),vw={primary:"bg-primary hover:bg-green-500 text-white shadow-lg shadow-green-900/20",secondary:"bg-secondary hover:bg-red-500 text-white shadow-lg shadow-red-900/20",accent:"bg-accent hover:bg-orange-500 text-white shadow-lg shadow-orange-900/20",outline:"border-2 border-slate-700 hover:border-slate-500 text-slate-300 hover:text-white bg-transparent",ghost:"text-slate-400 hover:text-white hover:bg-white/5"},bw={sm:"px-3 py-1.5 text-sm",md:"px-6 py-3 text-base font-semibold",lg:"px-8 py-4 text-lg font-bold"},yt=({children:n,variant:e="primary",size:t="md",to:r=null,onClick:a,className:l="",...c})=>{const h="inline-flex items-center justify-center rounded-lg transition-all duration-300 transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0a0e17] focus:ring-slate-400",f=vw[e]||vw.primary,p=bw[t]||bw.md,v=`${h} ${f} ${p} ${l}`;return r?m.jsx(ze,{to:r,className:v,...c,children:n}):m.jsx("button",{onClick:a,className:v,...c,children:n})},kL=({title:n,description:e,name:t,type:r,image:a,url:l})=>{const c="ForexVolcano - Predict the Eruption",h="Your premier source for professional Forex analysis, breaking market news, and comprehensive trading education.",f="https://images.unsplash.com/photo-1611974765270-ca12586343bb?q=80&w=1200",p="https://forexvolcano.com",v=n?`${n} | ForexVolcano`:c,b=e||h,_=a||f,T=l?`${p}${l}`:p;return m.jsxs(qR,{children:[m.jsx("title",{children:v}),m.jsx("meta",{name:"description",content:b}),m.jsx("meta",{property:"og:type",content:r||"website"}),m.jsx("meta",{property:"og:title",content:n||c}),m.jsx("meta",{property:"og:description",content:b}),m.jsx("meta",{property:"og:image",content:_}),m.jsx("meta",{property:"og:url",content:T}),m.jsx("meta",{name:"twitter:creator",content:t||"ForexVolcano"}),m.jsx("meta",{name:"twitter:card",content:r==="article"?"summary_large_image":"summary"}),m.jsx("meta",{name:"twitter:title",content:n||c}),m.jsx("meta",{name:"twitter:description",content:b}),m.jsx("meta",{name:"twitter:image",content:_})]})},ML=()=>{const[n,e]=M.useState([]),[t,r]=M.useState([]),[a,l]=M.useState([]),[c,h]=M.useState(!0),f=b=>{if(!b)return"";const _=b.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),T=document.createElement("DIV");return T.innerHTML=_,(T.textContent||T.innerText||"").trim()};M.useEffect(()=>{(async()=>{try{const _=Wn(ut(Ee,"analysis"),us("createdAt","desc"),Lf(3)),T=await en(_);e(T.docs.map(z=>({id:z.id,...z.data()})));const S=Wn(ut(Ee,"news"),us("timestamp","desc"),Lf(3)),O=await en(S);r(O.docs.map(z=>({id:z.id,...z.data()})));const R=Wn(ut(Ee,"courses"),Lf(3)),U=await en(R);l(U.docs.map(z=>({id:z.id,...z.data()})))}catch(_){console.error("Error fetching home data:",_)}finally{h(!1)}})()},[]);const p=()=>m.jsxs("div",{className:"relative bg-background overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-background via-background/95 to-background/50 z-10"}),m.jsx("img",{src:"https://images.unsplash.com/photo-1611974765270-ca12586343bb?q=80&w=2070&auto=format&fit=crop",alt:"Trading Chart",className:"w-full h-full object-cover opacity-20"})]}),m.jsx("div",{className:"relative z-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 md:py-32",children:m.jsxs("div",{className:"max-w-3xl animate-fade-in-up",children:[m.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white tracking-tight mb-6",children:["Predict the ",m.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary",children:"Eruption"})]}),m.jsx("p",{className:"text-xl text-gray-400 mb-10 leading-relaxed max-w-2xl",children:"Your all-in-one platform for professional market analysis, breaking news, and comprehensive trading education. Join thousands of traders leveling up their game."}),m.jsxs("div",{className:"flex flex-wrap gap-4",children:[m.jsx(ze,{to:"/register",children:m.jsx(yt,{size:"lg",className:"px-8 text-lg",children:"Start Trading Now"})}),m.jsx(ze,{to:"/analysis",children:m.jsx(yt,{variant:"outline",size:"lg",className:"px-8 text-lg",children:"Read Analysis"})})]})]})})]}),v=({title:b,link:_,linkText:T})=>m.jsxs("div",{className:"flex justify-between items-end mb-8",children:[m.jsx("h2",{className:"text-3xl font-bold text-white border-l-4 border-primary pl-4",children:b}),m.jsxs(ze,{to:_,className:"text-primary hover:text-green-400 font-medium flex items-center gap-1 transition-colors",children:[T,m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]});return c?m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:"Loading Market Data..."}):m.jsxs("div",{className:"flex flex-col min-h-screen bg-background",children:[m.jsx(kL,{title:"Home",description:"ForexVolcano: The ultimate platform for professional forex analysis, real-time market news, and expert trading courses. Predict the market eruption with us."}),m.jsx(p,{}),m.jsxs("section",{className:"py-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full",children:[m.jsx(v,{title:"Latest Market Analysis",link:"/analysis",linkText:"View All Analysis"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:n.map(b=>m.jsx(ze,{to:`/analysis/${b.id}`,className:"group block h-full",children:m.jsxs("div",{className:"bg-surface rounded-xl overflow-hidden border border-gray-800 h-full hover:border-primary/50 transition-all duration-300 shadow-lg hover:shadow-primary/10",children:[m.jsxs("div",{className:"h-48 overflow-hidden relative",children:[m.jsx("img",{src:b.image,alt:b.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),m.jsx("div",{className:"absolute top-4 left-4",children:m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold text-white ${b.type==="Technical"?"bg-blue-600":"bg-purple-600"}`,children:b.type})})]}),m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx("span",{className:"text-xs font-bold text-primary px-2 py-1 bg-primary/10 rounded",children:b.pair}),m.jsx("span",{className:"text-xs text-gray-500",children:b.createdAt?.seconds?new Date(b.createdAt.seconds*1e3).toLocaleDateString():"Just now"})]}),m.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-primary transition-colors line-clamp-2",children:b.title}),m.jsxs("p",{className:"text-gray-400 text-sm line-clamp-3",children:[f(b.content).substring(0,100),"..."]})]})]})},b.id))})]}),m.jsx("section",{className:"py-16 bg-surface/50 w-full border-y border-gray-800",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsx(v,{title:"Breaking Market News",link:"/news",linkText:"Read All News"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map(b=>m.jsx(ze,{to:`/news/${b.id}`,className:"block group",children:m.jsxs("div",{className:"bg-background rounded-xl p-6 border border-gray-800 hover:border-gray-600 transition-colors h-full flex flex-col",children:[m.jsxs("div",{className:"flex justify-between items-start mb-4",children:[m.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${b.impact==="High"?"bg-red-500/20 text-red-500":b.impact==="Medium"?"bg-yellow-500/20 text-yellow-500":"bg-green-500/20 text-green-500"}`,children:[b.impact," Impact"]}),m.jsx("span",{className:"text-xs text-gray-500",children:b.timestamp?.seconds?new Date(b.timestamp.seconds*1e3).toLocaleDateString():"Just now"})]}),m.jsx("h3",{className:"text-lg font-bold text-white mb-2 group-hover:text-primary transition-colors",children:b.title}),m.jsx("div",{className:"flex gap-2 mt-auto pt-4",children:b.currencies?.map(_=>m.jsx("span",{className:"text-xs text-gray-400 bg-gray-800 px-2 py-1 rounded",children:_},_))})]})},b.id))})]})}),m.jsx("section",{className:"py-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Level Up Your Trading Skills"}),m.jsx("p",{className:"text-gray-400 text-lg mb-8",children:"Join our comprehensive academy with courses designed for every level. From interpreting candlestick patterns to mastering complex strategies."}),m.jsx("div",{className:"space-y-4 mb-8",children:a.slice(0,2).map(b=>m.jsxs("div",{className:"flex items-center gap-4 bg-surface p-4 rounded-xl border border-gray-800",children:[m.jsx("div",{className:"h-16 w-24 rounded-lg overflow-hidden flex-shrink-0",children:m.jsx("img",{src:b.image,alt:b.title,className:"w-full h-full object-cover"})}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-white",children:b.title}),m.jsxs("p",{className:"text-sm text-gray-500",children:[b.lessons?.length||0," Lessons  ",b.level||"All Levels"]})]})]},b.id))}),m.jsx(ze,{to:"/academy",children:m.jsx(yt,{variant:"secondary",children:"Start Learning Free"})})]}),m.jsxs("div",{className:"relative h-full min-h-[400px] bg-gradient-to-br from-gray-900 to-black rounded-2xl border border-gray-800 p-8 flex flex-col justify-center items-center text-center overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("h3",{className:"text-3xl font-bold text-white mb-4",children:"Join the Community"}),m.jsx("p",{className:"text-gray-400 mb-8 max-w-md mx-auto",children:"Connect with other traders, share your charts, and get real-time feedback. The journey is better together."}),m.jsx(ze,{to:"/community",children:m.jsx(yt,{size:"lg",className:"w-full sm:w-auto px-10 shadow-lg shadow-primary/25 animate-pulse",children:"Join Discussion"})})]})]})]})})]})},EN=({title:n,subtitle:e,image:t,content:r,footer:a,badges:l=[],className:c=""})=>m.jsxs("div",{className:`group relative flex flex-col overflow-hidden rounded-2xl bg-surface border border-gray-800 transition-all duration-300 hover:border-gray-700 hover:shadow-2xl hover:shadow-primary/5 ${c}`,children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent opacity-0 transition-opacity duration-500 group-hover:opacity-100 pointer-events-none"}),t&&m.jsxs("div",{className:"relative h-48 w-full overflow-hidden bg-gray-900",children:[m.jsx("img",{src:t,alt:n,className:"h-full w-full object-cover transition-transform duration-700 group-hover:scale-105",onError:h=>{h.target.style.display="none",h.target.parentElement.classList.add("flex","items-center","justify-center","bg-gray-800"),h.target.parentElement.innerHTML='<span class="text-4xl"></span>'}}),l.length>0&&m.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2",children:l.map((h,f)=>m.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded uppercase tracking-wider ${h.color||"bg-gray-800 text-white"}`,children:h.text},f))})]}),m.jsxs("div",{className:"flex flex-1 flex-col p-6 z-10",children:[e&&m.jsx("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-400",children:e}),m.jsx("h3",{className:"mb-3 text-xl font-bold text-white group-hover:text-primary transition-colors",children:n}),m.jsx("p",{className:"flex-1 text-gray-400 line-clamp-3 mb-6",children:r}),a&&m.jsx("div",{className:"mt-auto border-t border-gray-800 pt-4",children:a})]})]}),xw=[{id:"1",pair:"EUR/USD",direction:"Bearish",title:"EUR/USD Forming Head and Shoulders on 4H",content:"Price has failed to break the 1.0900 resistance level multiple times. We are observing a clear H&S pattern formation. If the neckline at 1.0820 breaks, we expect a sharp decline towards the 1.0750 liquidity zone.",author:"Volcano Chief",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=1000&auto=format&fit=crop"},{id:"2",pair:"XAU/USD",direction:"Bullish",title:"Gold Preparing for Eruption Above 2050",content:"Geopolitical tensions and a weakening dollar suggest Gold is accumulating for a massive leg up. Watch for a retest of 2035 as a potential entry point for long positions targeting new highs.",author:"Analyst Sarah",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1000&auto=format&fit=crop"},{id:"3",pair:"GBP/JPY",direction:"Bullish",title:"The Dragon is Waking Up",content:"GJ is respecting the ascending trendline perfectly. The recent pullback to 182.00 was rejected strongly. We are looking for continuation towards 185.00 level.",author:"Volcano Chief",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1526304640151-b59310398691?q=80&w=1000&auto=format&fit=crop"}],PL=()=>{const[n,e]=M.useState([]),[t,r]=M.useState(!0),[a,l]=M.useState("All");M.useEffect(()=>{(async()=>{try{const v=Wn(ut(Ee,"analysis"),us("timestamp","desc"));let _=(await en(v)).docs.map(T=>({id:T.id,...T.data()}));if(Le.currentUser){const T=await mr($e(Ee,"users",Le.currentUser.uid));if(T.exists()){const S=T.data().preferences;S&&S.analysisCurrencies&&S.analysisCurrencies.length>0&&(_=_.filter(O=>S.analysisCurrencies.includes(O.pair)))}}_.length>0?e(_):Le.currentUser?e([]):e(xw)}catch(v){console.error("Error fetching analysis:",v),e(xw)}finally{r(!1)}})()},[]);const c=a==="All"?n:n.filter(p=>p.pair===a),h=["All",...new Set(n.map(p=>p.pair))],f=p=>{if(!p)return"";const v=p.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),b=document.createElement("DIV");return b.innerHTML=v,(b.textContent||b.innerText||"").trim()};return m.jsx("div",{className:"bg-background min-h-screen py-12",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsxs("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl tracking-tight",children:["Market ",m.jsx("span",{className:"text-primary",children:"Analysis"})]}),m.jsx("p",{className:"mt-4 text-xl text-gray-400",children:"Daily technical breakdowns and trade setups from our experts."})]}),m.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-12",children:h.map(p=>m.jsx("button",{onClick:()=>l(p),className:`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-200 ${a===p?"bg-primary text-white shadow-lg shadow-primary/25":"bg-surface text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:p},p))}),t?m.jsx("div",{className:"text-center text-white py-20",children:"Loading Volcano Data..."}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:c.map(p=>{const v=p.direction==="Bullish"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary";return m.jsx(ze,{to:`/analysis/${p.id}`,className:"block group",children:m.jsx(EN,{title:p.title,image:p.image||p.chart_image_url,content:f(p.content),subtitle:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-gray-500 text-xs",children:p.timestamp?.seconds?new Date(p.timestamp.seconds*1e3).toLocaleDateString():p.timestamp||new Date().toLocaleDateString()}),m.jsx("span",{className:"text-gray-600",children:""}),m.jsxs("span",{className:"text-gray-500 text-xs text-accent",children:["By ",p.analystName||p.author||"Admin"]})]}),badges:[{text:p.pair,color:"bg-surface border border-gray-700 text-white"},{text:p.direction,color:v}],footer:m.jsxs(yt,{variant:"ghost",size:"sm",className:"w-full justify-between group-hover:text-white",children:["Read Full Breakdown",m.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})},p.id)})})]})})},UL=()=>{const{id:n}=Hc(),e=Pi(),[t,r]=M.useState(null),[a,l]=M.useState(!0);if(M.useEffect(()=>{(async()=>{try{const p=$e(Ee,"analysis",n),v=await mr(p);v.exists()?r({id:v.id,...v.data()}):(console.log("No such document!"),e("/analysis"))}catch(p){console.error("Error fetching analysis detail:",p)}finally{l(!1)}})()},[n,e]),a)return m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:"Loading..."});if(!t)return null;const c=t.timestamp?.seconds?new Date(t.timestamp.seconds*1e3).toLocaleDateString():t.timestamp||new Date().toLocaleDateString(),h=t.direction==="Bullish"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary";return m.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsx(yt,{variant:"ghost",onClick:()=>e("/analysis"),className:"mb-6 text-gray-400 hover:text-white",children:" Back to Analysis"}),m.jsxs("article",{className:"bg-surface rounded-2xl overflow-hidden border border-gray-800 shadow-2xl",children:[(t.image||t.chart_image_url)&&m.jsxs("div",{className:"w-full h-64 sm:h-96 relative",children:[m.jsx("img",{src:t.image||t.chart_image_url,alt:t.title,className:"w-full h-full object-cover"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent"})]}),m.jsxs("div",{className:"p-8 sm:p-12",children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[m.jsx("span",{className:"text-gray-400 text-sm",children:c}),m.jsx("span",{className:"text-gray-600",children:""}),m.jsx("span",{className:"text-accent text-sm uppercase tracking-wider font-bold",children:t.analysisType||"Technical Analysis"})]}),m.jsxs("div",{className:"flex gap-3 mb-6",children:[m.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide bg-surface border border-gray-700 text-white",children:t.pair}),m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${h}`,children:t.direction})]}),m.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-white mb-8 leading-tight",children:t.title}),m.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300 mb-16",dangerouslySetInnerHTML:{__html:t.content}}),(t.analystName||t.analystBio)&&m.jsxs("div",{className:"border-t border-gray-800 pt-12 mt-12 mb-8",children:[m.jsx("h3",{className:"text-2xl font-bold text-white mb-8",children:"Meet Your Analyst"}),m.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-8 bg-black/20 p-8 rounded-2xl border border-gray-800/50",children:[m.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 shrink-0 rounded-full overflow-hidden ring-4 ring-primary/20",children:m.jsx("img",{src:t.analystImage||"https://images.unsplash.com/photo-1633332755192-727a05c4013d?w=400&auto=format&fit=crop&q=60",alt:t.analystName||"Analyst",className:"w-full h-full object-cover"})}),m.jsxs("div",{className:"text-center sm:text-left",children:[m.jsx("h4",{className:"text-xl font-bold text-white mb-2",children:t.analystName||"Volcano Analyst"}),m.jsx("p",{className:"text-gray-400 leading-relaxed mb-4 whitespace-pre-wrap",children:t.analystBio||"Professional market analyst at Forex Volcano."}),m.jsxs("div",{className:"flex gap-4",children:[t.twitter&&m.jsx("a",{href:t.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:m.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:m.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),t.linkedin&&m.jsx("a",{href:t.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:m.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:m.jsx("path",{fillRule:"evenodd",d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z",clipRule:"evenodd"})})}),t.telegram&&m.jsx("a",{href:t.telegram,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-primary transition-colors",children:m.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:m.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]})]})]})]})]})]})]})})},_w=[{id:"1",title:"NFP Smashes Expectations: 350k Jobs Added",impact:"High",affectedCurrencies:["USD","XAU","JPY"],content:"The Non-Farm Payrolls report showed a surprise surge in job creation, sending the Dollar Index (DXY) rocketing past 104.50. Traders should watch for pullbacks on Gold.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1611974765270-ca1258634369?q=80&w=1000&auto=format&fit=crop"},{id:"2",title:"ECB Signals Rate Cuts in June",impact:"Medium",affectedCurrencies:["EUR","GBP"],content:"Lagarde hinted that inflation is under control, opening the door for a 25bps cut. Euro is showing weakness against the Pound.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1526304640151-b59310398691?q=80&w=1000&auto=format&fit=crop"},{id:"3",title:"BoJ Maintains Ultra-Loose Policy",impact:"Low",affectedCurrencies:["JPY"],content:"No surprises from the Bank of Japan. Yield Curve Control remains in place. USD/JPY is drifting sideways in a tight range.",timestamp:new Date().toLocaleDateString(),image:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1000&auto=format&fit=crop"}],VL={High:"bg-red-500/20 text-red-500 border border-red-500/50",Medium:"bg-orange-500/20 text-orange-500 border border-orange-500/50",Low:"bg-yellow-500/20 text-yellow-500 border border-yellow-500/50"},qL=()=>{const[n,e]=M.useState([]),[t,r]=M.useState(!0),a=l=>{if(!l)return"";const c=l.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<br\s*\/?>/gi," "),h=document.createElement("DIV");return h.innerHTML=c,(h.textContent||h.innerText||"").trim()};return M.useEffect(()=>{(async()=>{try{const c=Wn(ut(Ee,"news"),us("timestamp","desc"));let f=(await en(c)).docs.map(p=>({id:p.id,...p.data()}));if(Le.currentUser){const p=await mr($e(Ee,"users",Le.currentUser.uid));if(p.exists()){const v=p.data().preferences;v&&v.newsImpacts&&v.newsImpacts.length>0&&(f=f.filter(b=>v.newsImpacts.includes(b.impact)))}}f.length>0?e(f):Le.currentUser?e([]):e(_w)}catch(c){console.error("Error fetching news:",c),e(_w)}finally{r(!1)}})()},[]),m.jsx("div",{className:"bg-background min-h-screen py-12",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsxs("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl tracking-tight",children:["Market ",m.jsx("span",{className:"text-accent",children:"News"})]}),m.jsx("p",{className:"mt-4 text-xl text-gray-400",children:"Stay ahead of the volatility with real-time economic updates."})]}),t?m.jsx("div",{className:"text-center text-white py-20",children:"Loading Earth-shaking Events..."}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(l=>m.jsx(ze,{to:`/news/${l.id}`,className:"block group",children:m.jsx(EN,{title:l.title,image:l.image,content:a(l.content),subtitle:m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("span",{className:"text-gray-500 text-xs",children:l.timestamp?.seconds?new Date(l.timestamp.seconds*1e3).toLocaleDateString():l.timestamp||new Date().toLocaleDateString()})}),badges:[{text:l.impact,color:VL[l.impact]||"bg-gray-800 text-white"},...(l.affectedCurrencies||[]).map(c=>({text:c,color:"bg-surface border border-gray-700 text-white"}))]})},l.id))})]})})},BL=()=>{const{id:n}=Hc(),e=Pi(),[t,r]=M.useState(null),[a,l]=M.useState(!0);if(M.useEffect(()=>{(async()=>{try{const f=$e(Ee,"news",n),p=await mr(f);p.exists()?r({id:p.id,...p.data()}):(console.log("No such document!"),e("/news"))}catch(f){console.error("Error fetching news detail:",f)}finally{l(!1)}})()},[n,e]),a)return m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:"Loading..."});if(!t)return null;const c=t.timestamp?.seconds?new Date(t.timestamp.seconds*1e3).toLocaleDateString():t.timestamp||new Date().toLocaleDateString();return m.jsx("div",{className:"min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsx(yt,{variant:"ghost",onClick:()=>e("/news"),className:"mb-6 text-gray-400 hover:text-white",children:" Back to News"}),m.jsxs("article",{className:"bg-surface rounded-2xl overflow-hidden border border-gray-800 shadow-2xl",children:[t.image&&m.jsxs("div",{className:"w-full h-64 sm:h-96 relative",children:[m.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent"})]}),m.jsxs("div",{className:"p-8 sm:p-12",children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[m.jsx("span",{className:"text-gray-400 text-sm",children:c}),m.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide
                                ${t.impact==="High"?"bg-red-500/20 text-red-400":t.impact==="Medium"?"bg-orange-500/20 text-orange-400":"bg-green-500/20 text-green-400"}`,children:[t.impact," Impact"]}),t.affectedCurrencies&&t.affectedCurrencies.map&&t.affectedCurrencies.map(h=>m.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gray-800 text-gray-300 border border-gray-700",children:h},h))]}),m.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-white mb-8 leading-tight",children:t.title}),m.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300",dangerouslySetInnerHTML:{__html:t.content}})]})]})]})})},zL=()=>{const[n,e]=M.useState(""),[t,r]=M.useState(""),[a,l]=M.useState(""),[c,h]=M.useState(!1),f=Pi(),p=async _=>{try{const T=await mr($e(Ee,"users",_));T.exists()&&T.data().role==="admin"?f("/admin"):f("/dashboard")}catch(T){console.error("Error checking role:",T),f("/dashboard")}},v=async _=>{_.preventDefault(),l(""),h(!0);try{const T=await Zj(Le,n,t);await p(T.user.uid)}catch(T){console.error(T),l("Failed to login. Please check your credentials.")}finally{h(!1)}},b=async()=>{try{const _=new Si,T=await BA(Le,_);await p(T.user.uid)}catch(_){console.error(_),l("Failed to sign in with Google")}};return m.jsxs("div",{className:"min-h-screen bg-background flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[m.jsxs("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:["Sign in to ",m.jsx("span",{className:"text-secondary",children:"Volcano"})]}),m.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Or"," ",m.jsx(ze,{to:"/register",className:"font-medium text-primary hover:text-green-400",children:"start your 14-day free trial"})]})]}),m.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:m.jsxs("div",{className:"bg-surface py-8 px-4 shadow sm:rounded-lg sm:px-10 border border-gray-800",children:[m.jsxs("form",{className:"space-y-6",onSubmit:v,children:[a&&m.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 p-3 rounded text-sm text-center",children:a}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:_=>e(_.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:_=>r(_.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),m.jsx("div",{children:m.jsx(yt,{type:"submit",variant:"primary",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",disabled:c,children:c?"Signing in...":"Sign in"})})]}),m.jsxs("div",{className:"mt-6",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("div",{className:"w-full border-t border-gray-700"})}),m.jsx("div",{className:"relative flex justify-center text-sm",children:m.jsx("span",{className:"px-2 bg-surface text-gray-400",children:"Or continue with"})})]}),m.jsx("div",{className:"mt-6 grid grid-cols-1 gap-3",children:m.jsx("div",{children:m.jsxs("button",{type:"button",onClick:b,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-700 rounded-md shadow-sm bg-gray-800 text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[m.jsx("span",{className:"sr-only",children:"Sign in with Google"}),m.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:m.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 0.507 5.387 0 12s5.36 12 12 12c3.627 0 6.627-1.2 8.52-3.387 1.947-2.207 2.48-5.747 2.48-6.173 0-.613-.053-1.12-.133-1.507H12.48z"})})]})})})]})]})})]})},HL=()=>{const[n,e]=M.useState(""),[t,r]=M.useState(""),[a,l]=M.useState(""),[c,h]=M.useState(""),[f,p]=M.useState(!1),v=Pi(),b=async T=>{T.preventDefault(),h(""),p(!0);try{const O=(await Wj(Le,t,a)).user;await eO(O,{displayName:n}),await Mc($e(Ee,"users",O.uid),{uid:O.uid,username:n,email:t,role:"user",createdAt:new Date().toISOString(),avatar_url:`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=random`}),v("/dashboard")}catch(S){console.error(S),S.code==="auth/email-already-in-use"?h("Email already in use."):h("Failed to create account. Please try again.")}finally{p(!1)}},_=async()=>{try{const T=new Si,O=(await BA(Le,T)).user;await Mc($e(Ee,"users",O.uid),{uid:O.uid,username:O.displayName,email:O.email,role:"user",createdAt:new Date().toISOString(),avatar_url:O.photoURL},{merge:!0}),v("/dashboard")}catch(T){console.error(T),h("Failed to sign up with Google")}};return m.jsxs("div",{className:"min-h-screen bg-background flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[m.jsxs("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:["Join the ",m.jsx("span",{className:"text-secondary",children:"Eruption"})]}),m.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Already have an account?"," ",m.jsx(ze,{to:"/login",className:"font-medium text-primary hover:text-green-400",children:"Sign in"})]})]}),m.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[m.jsx("div",{className:"bg-surface py-8 px-4 shadow sm:rounded-lg sm:px-10 border border-gray-800",children:m.jsxs("form",{className:"space-y-6",onSubmit:b,children:[c&&m.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 p-3 rounded text-sm text-center",children:c}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300",children:"Full Name"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:n,onChange:T=>e(T.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:T=>r(T.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,minLength:6,value:a,onChange:T=>l(T.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary bg-gray-900 text-white sm:text-sm"})})]}),m.jsx("div",{children:m.jsx(yt,{type:"submit",variant:"primary",className:"w-full justify-center",disabled:f,children:f?"Creating Account...":"Sign up"})})]})}),m.jsxs("div",{className:"mt-6",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("div",{className:"w-full border-t border-gray-700"})}),m.jsx("div",{className:"relative flex justify-center text-sm",children:m.jsx("span",{className:"px-2 bg-surface text-gray-400",children:"Or continue with"})})]}),m.jsx("div",{className:"mt-6 grid grid-cols-1 gap-3",children:m.jsx("div",{children:m.jsxs("button",{type:"button",onClick:_,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-700 rounded-md shadow-sm bg-gray-800 text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[m.jsx("span",{className:"sr-only",children:"Sign up with Google"}),m.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:m.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 0.507 5.387 0 12s5.36 12 12 12c3.627 0 6.627-1.2 8.52-3.387 1.947-2.207 2.48-5.747 2.48-6.173 0-.613-.053-1.12-.133-1.507H12.48z"})})]})})})]})]})]})},FL=({userProfile:n,setUserProfile:e})=>{const[t,r]=M.useState(n?.preferences||{newsImpacts:["High","Medium","Low"],analysisCurrencies:["XAUUSD","EURUSD","GBPUSD","BTCUSD","US30"],analysisTypes:["Technical","Fundamental"]}),[a,l]=M.useState(!1);M.useEffect(()=>{n?.preferences&&r(n.preferences)},[n]);const c=async()=>{l(!0);try{await Mc($e(Ee,"users",Le.currentUser.uid),{preferences:t},{merge:!0}),e({...n,preferences:t}),alert("Preferences saved!")}catch(f){console.error("Error saving preferences:",f),alert("Failed to save.")}finally{l(!1)}},h=(f,p)=>{r(v=>{const b=v[f]||[];return b.includes(p)?{...v,[f]:b.filter(_=>_!==p)}:{...v,[f]:[...b,p]}})};return m.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 animate-fade-in",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Dashboard Customization"}),m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"News Notifications"}),m.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select which news impacts you want to see."}),m.jsx("div",{className:"flex gap-4",children:["High","Medium","Low"].map(f=>m.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:t.newsImpacts?.includes(f),onChange:()=>h("newsImpacts",f),className:"form-checkbox text-primary rounded bg-gray-900 border-gray-700"}),m.jsxs("span",{className:"text-gray-300",children:[f," Impact"]})]},f))})]}),m.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[m.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Analysis Filters"}),m.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Choose your favorite pairs to track."}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["XAUUSD","EURUSD","GBPUSD","USDJPY","BTCUSD","ETHUSD","US30","NAS100"].map(f=>m.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:t.analysisCurrencies?.includes(f),onChange:()=>h("analysisCurrencies",f),className:"form-checkbox text-primary rounded bg-gray-900 border-gray-700"}),m.jsx("span",{className:"text-gray-300",children:f})]},f))})]})]}),m.jsx("div",{className:"mt-8",children:m.jsx(yt,{onClick:c,disabled:a,children:a?"Saving...":"Save Preferences"})})]})},$L=({userProfile:n,setUserProfile:e})=>{const[t,r]=M.useState(n?.username||""),[a,l]=M.useState(n?.bio||""),[c,h]=M.useState(!1),[f,p]=M.useState(!1);M.useEffect(()=>{n&&(r(n.username||""),l(n.bio||""))},[n]);const v=T=>new Promise((S,O)=>{const R=new FileReader;R.readAsDataURL(T),R.onload=U=>{const z=new Image;z.src=U.target.result,z.onload=()=>{const Y=document.createElement("canvas"),Q=300,ie=300;let ve=z.width,L=z.height;ve>L?ve>Q&&(L*=Q/ve,ve=Q):L>ie&&(ve*=ie/L,L=ie),Y.width=ve,Y.height=L,Y.getContext("2d").drawImage(z,0,0,ve,L);const V=Y.toDataURL("image/jpeg",.7);S(V)},z.onerror=Y=>O(Y)},R.onerror=U=>O(U)}),b=async T=>{const S=T.target.files[0];if(S){S.size>5*1024*1024&&console.log("Large file detected, compression will be applied."),h(!0);try{const O=await v(S);O.length>5e5&&console.warn("Image might be too large for smooth database performance"),await Mc($e(Ee,"users",Le.currentUser.uid),{avatar_url:O},{merge:!0}),e({...n,avatar_url:O})}catch(O){console.error("Error processing image:",O),alert("Failed to process image.")}finally{h(!1)}}},_=async()=>{p(!0);try{if(t!==n?.username){if(!t.trim()){alert("Username cannot be empty"),p(!1);return}const T=Wn(ut(Ee,"users"),yN("username","==",t));if(!(await en(T)).empty){alert("Username is already taken. Please choose another."),p(!1);return}}await Mc($e(Ee,"users",Le.currentUser.uid),{username:t,bio:a},{merge:!0}),e({...n,username:t,bio:a}),alert("Profile updated!")}catch(T){console.error("Error saving profile:",T),alert("Failed to save profile.")}finally{p(!1)}};return m.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 animate-fade-in",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Profile Settings"}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsxs("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-800 relative group",children:[m.jsx("img",{src:n?.avatar_url||`https://ui-avatars.com/api/?name=${n?.username||"User"}`,alt:"Avatar",className:"w-full h-full object-cover"}),m.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:m.jsx("span",{className:"text-xs text-white",children:"Change"})}),m.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"absolute inset-0 opacity-0 cursor-pointer"})]}),c&&m.jsx("span",{className:"text-xs text-primary",children:"Compressing & Saving..."})]}),m.jsxs("div",{className:"flex-1 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Username (Public)"}),m.jsx("input",{type:"text",value:t,onChange:T=>r(T.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g. CryptoKing"}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique handle for your public profile."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bio"}),m.jsx("textarea",{value:a,onChange:T=>l(T.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:outline-none h-24 resize-none",placeholder:"Tell us about your trading journey..."})]}),m.jsx("div",{children:m.jsx(yt,{onClick:_,disabled:f,children:f?"Saving...":"Save Changes"})}),n?.username&&m.jsxs("div",{className:"mt-4 p-4 bg-gray-900/50 rounded-lg border border-gray-800 flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-gray-400",children:"Your Public Profile:"}),m.jsx(ze,{to:`/profile/${n.username}`,className:"text-primary hover:underline text-sm font-medium",children:"View Public Page "})]})]})]})]})},GL=()=>{const[n,e]=M.useState(null),[t,r]=M.useState(!0),[a,l]=M.useState("overview"),[c,h]=M.useState([]),[f,p]=M.useState({totalProgress:0,completed:0,avgQuiz:0});M.useEffect(()=>{(async()=>{if(Le.currentUser)try{const _=$e(Ee,"users",Le.currentUser.uid),T=await mr(_);T.exists()&&e(T.data());const S=await en(ut(Ee,"users",Le.currentUser.uid,"course_progress")),O={};if(S.docs.forEach(R=>{O[R.id]=R.data()}),Object.keys(O).length>0){const z=(await en(ut(Ee,"courses"))).docs.map(Q=>({id:Q.id,...Q.data()})).filter(Q=>O[Q.id]).map(Q=>{const ie=O[Q.id],ve=ie.completedLessonIds?.length||0;return{...Q,completedCount:ve,lastAccessed:ie.lastAccessed}});h(z);const Y=z.reduce((Q,ie)=>Q+ie.completedCount,0);p({totalProgress:Y,completed:z.length,avgQuiz:0})}}catch(_){console.error("Error fetching user data:",_)}finally{r(!1)}})()},[]);const v=n?.username||Le.currentUser?.displayName||"Trader";return console.log("Dashboard Render",{loading:t,userProfile:n,activeTab:a}),m.jsxs("div",{className:"min-h-screen bg-background text-white animate-fade-in",children:[m.jsx("div",{className:"bg-surface border-b border-gray-800",children:m.jsx("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-primary to-secondary p-[2px]",children:m.jsx("img",{src:n?.avatar_url||`https://ui-avatars.com/api/?name=${v}`,alt:"Profile",className:"h-full w-full rounded-full bg-background object-cover"})}),m.jsxs("div",{children:[m.jsxs("h1",{className:"text-3xl font-bold text-white",children:["Welcome back, ",m.jsx("span",{className:"text-primary",children:v})]}),m.jsx("p",{className:"mt-1 text-gray-400",children:"Ready to dominate the markets today?"})]})]})})}),m.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"flex space-x-6 mb-8 border-b border-gray-800 overflow-x-auto",children:[m.jsx("button",{onClick:()=>l("overview"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="overview"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Overview"}),m.jsx("button",{onClick:()=>l("profile"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="profile"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Profile"}),m.jsx("button",{onClick:()=>l("settings"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="settings"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"Settings & Preferences"}),m.jsx("button",{onClick:()=>l("learning"),className:`pb-4 px-2 font-medium transition-colors whitespace-nowrap ${a==="learning"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"My Learning"})]}),a==="overview"&&m.jsxs("div",{className:"animate-fade-in",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Account Overview"}),m.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3 mb-12",children:[m.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:m.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[m.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Lessons Completed"}),m.jsx("dd",{className:"mt-1 text-3xl font-semibold text-white",children:f.totalProgress})]})}),m.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:m.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[m.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Active Courses"}),m.jsx("dd",{className:"mt-1 text-3xl font-semibold text-primary",children:f.completed})]})}),m.jsx("div",{className:"bg-surface overflow-hidden shadow rounded-lg border border-gray-800",children:m.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[m.jsx("dt",{className:"text-sm font-medium text-gray-400 truncate",children:"Quiz Score Avg"}),m.jsx("dd",{className:"mt-1 text-3xl font-semibold text-secondary",children:"N/A"})]})})]}),c.length>0&&m.jsxs("div",{className:"mb-8",children:[m.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Jump Back In"}),m.jsxs("div",{className:"bg-surface rounded-xl p-6 border border-gray-800 flex flex-col md:flex-row items-center gap-6",children:[m.jsx("div",{className:"w-full md:w-1/3 aspect-video rounded-lg overflow-hidden",children:m.jsx("img",{src:c[0].image,alt:c[0].title,className:"w-full h-full object-cover"})}),m.jsxs("div",{className:"flex-1 w-full text-center md:text-left",children:[m.jsx("h4",{className:"text-xl font-bold text-white",children:c[0].title}),m.jsx("p",{className:"text-gray-400 mt-2 mb-4",children:"Continue where you left off."}),m.jsx(ze,{to:`/academy/${c[0].path||"General"}/${c[0].id}`,children:m.jsx(yt,{variant:"primary",children:"Continue Learning"})})]})]})]})]}),a==="profile"&&m.jsx($L,{userProfile:n,setUserProfile:e}),a==="settings"&&m.jsx(FL,{userProfile:n,setUserProfile:e}),a==="learning"&&m.jsxs("div",{className:"animate-fade-in",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Courses"}),m.jsx(ze,{to:"/academy",className:"text-primary text-sm hover:underline",children:"Browse All Courses"})]}),c.length>0?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:c.map(b=>m.jsxs("div",{className:"bg-surface rounded-xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-colors group",children:[m.jsxs("div",{className:"h-48 overflow-hidden relative",children:[m.jsx("img",{src:b.image,alt:b.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),m.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:m.jsx(ze,{to:`/academy/${b.path||"General"}/${b.id}`,children:m.jsx(yt,{variant:"primary",size:"sm",children:"Continue Learning"})})})]}),m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:b.title}),m.jsxs("div",{className:"mt-4",children:[m.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[m.jsx("span",{children:"Lessons Completed"}),m.jsx("span",{children:b.completedCount})]}),m.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:m.jsx("div",{className:"h-2 rounded-full bg-secondary",style:{width:`${Math.min(b.completedCount/10*100,100)}%`}})})]})]})]},b.id))}):m.jsxs("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:[m.jsx("p",{className:"text-gray-400 mb-4",children:"You haven't started any courses yet."}),m.jsx(ze,{to:"/academy",children:m.jsx(yt,{children:"Explore Academy"})})]})]})]})]})},KL=()=>{const[n,e]=M.useState(!1),[t,r]=M.useState(!0),a=Pi();return M.useEffect(()=>{const l=jh(Le,async c=>{if(c)try{const h=await mr($e(Ee,"users",c.uid));h.exists()&&h.data().role==="admin"?e(!0):a("/dashboard")}catch(h){console.error("Admin check failed",h),a("/dashboard")}else a("/login");r(!1)});return()=>l()},[a]),t?m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center text-white",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-2xl font-bold mb-2",children:"Verifying Clearance..."}),m.jsx("div",{className:"text-gray-400",children:"Please wait."})]})}):n?m.jsxs("div",{className:"min-h-screen bg-background flex",children:[m.jsxs("aside",{className:"w-64 bg-surface border-r border-gray-800 flex-shrink-0 hidden md:flex flex-col",children:[m.jsx("div",{className:"p-6 border-b border-gray-800",children:m.jsxs("span",{className:"text-xl font-bold text-white tracking-wider",children:["VOLCANO ",m.jsx("span",{className:"text-secondary text-base",children:"ADMIN"})]})}),m.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[m.jsx(zu,{to:"/admin",end:!0,children:"Dashboard"}),m.jsx(zu,{to:"/admin/news",children:"Manage News"}),m.jsx(zu,{to:"/admin/analysis",children:"Manage Analysis"}),m.jsx(zu,{to:"/admin/courses",children:"Manage Courses"}),m.jsx(zu,{to:"/admin/profile",children:"Analyst Profile"})]}),m.jsxs("div",{className:"p-4 border-t border-gray-800",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold",children:"A"}),m.jsxs("div",{className:"text-sm",children:[m.jsx("div",{className:"text-white font-medium",children:"Administrator"}),m.jsx("div",{className:"text-gray-500 text-xs",children:"Super User"})]})]}),m.jsx(yt,{variant:"outline",size:"sm",className:"w-full",onClick:()=>a("/"),children:"Exit to Site"})]})]}),m.jsxs("div",{className:"md:hidden absolute top-0 left-0 right-0 h-16 bg-surface border-b border-gray-800 flex items-center px-4 justify-between z-20",children:[m.jsx("span",{className:"font-bold text-white",children:"Admin Panel"}),m.jsx(yt,{size:"sm",onClick:()=>a("/"),children:"Exit"})]}),m.jsx("main",{className:"flex-1 overflow-auto p-8 pt-24 md:pt-8",children:m.jsx(L4,{})})]}):null},zu=({to:n,children:e,end:t=!1})=>m.jsx(KT,{to:n,end:t,className:({isActive:r})=>`block px-4 py-3 rounded-lg text-sm font-medium transition-colors ${r?"bg-primary/10 text-primary border border-primary/20":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:e}),YL=()=>{const[n,e]=M.useState({users:0,courses:0,analysis:0,news:0}),[t,r]=M.useState(!0);return M.useEffect(()=>{(async()=>{try{const l=await uf(ut(Ee,"users")),c=await uf(ut(Ee,"courses")),h=await uf(ut(Ee,"analysis")),f=await uf(ut(Ee,"news"));e({users:l.data().count,courses:c.data().count,analysis:h.data().count,news:f.data().count})}catch(l){console.error("Error fetching stats:",l)}finally{r(!1)}})()},[]),m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"System Overview"}),m.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[m.jsx(hf,{title:"Total Users",value:t?"...":n.users,change:"Registered",color:"primary"}),m.jsx(hf,{title:"Active Courses",value:t?"...":n.courses,change:"Live",color:"white"}),m.jsx(hf,{title:"Analysis Posts",value:t?"...":n.analysis,change:"Market Updates",color:"secondary"}),m.jsx(hf,{title:"News Alerts",value:t?"...":n.news,change:"Published",color:"accent"})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[m.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Quick Actions"}),m.jsxs("div",{className:"space-y-3",children:[m.jsx(dy,{label:"Post New Analysis",to:"/admin/analysis"}),m.jsx(dy,{label:"Broadcast News Alert",to:"/admin/news"}),m.jsx(dy,{label:"Review New User Signups",to:"#"})]})]}),m.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"System Status"}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(fy,{label:"Database Connection",status:"Healthy"}),m.jsx(fy,{label:"Auth Service",status:"Healthy"}),m.jsx(fy,{label:"API Latency",status:"24ms"})]})]})]})]})},hf=({title:n,value:e,change:t,color:r})=>{const a={primary:"text-primary",secondary:"text-secondary",accent:"text-accent",white:"text-white"};return m.jsxs("div",{className:"bg-surface rounded-xl p-6 border border-gray-800",children:[m.jsx("p",{className:"text-sm font-medium text-gray-400",children:n}),m.jsxs("div",{className:"mt-2 flex items-baseline",children:[m.jsx("p",{className:`text-3xl font-semibold ${a[r]||"text-white"}`,children:e}),m.jsx("p",{className:"ml-2 text-sm text-gray-500",children:t})]})]})},dy=({label:n,to:e})=>m.jsxs(ze,{to:e,className:"flex items-center justify-between p-3 bg-background rounded-lg hover:bg-gray-800 cursor-pointer transition-colors",children:[m.jsx("span",{className:"text-gray-300",children:n}),m.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),fy=({label:n,status:e})=>m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-400",children:n}),m.jsxs("span",{className:"flex items-center text-primary text-sm font-medium",children:[m.jsx("span",{className:"w-2 h-2 bg-primary rounded-full mr-2"}),e]})]});var wN=typeof global=="object"&&global&&global.Object===Object&&global,QL=typeof self=="object"&&self&&self.Object===Object&&self,Ui=wN||QL||Function("return this")(),Do=Ui.Symbol,TN=Object.prototype,XL=TN.hasOwnProperty,WL=TN.toString,Hu=Do?Do.toStringTag:void 0;function ZL(n){var e=XL.call(n,Hu),t=n[Hu];try{n[Hu]=void 0;var r=!0}catch{}var a=WL.call(n);return r&&(e?n[Hu]=t:delete n[Hu]),a}var JL=Object.prototype,ek=JL.toString;function tk(n){return ek.call(n)}var nk="[object Null]",rk="[object Undefined]",Ew=Do?Do.toStringTag:void 0;function Jc(n){return n==null?n===void 0?rk:nk:Ew&&Ew in Object(n)?ZL(n):tk(n)}function Ca(n){return n!=null&&typeof n=="object"}var yl=Array.isArray;function Vo(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}function AN(n){return n}var sk="[object AsyncFunction]",ik="[object Function]",ak="[object GeneratorFunction]",ok="[object Proxy]";function Ov(n){if(!Vo(n))return!1;var e=Jc(n);return e==ik||e==ak||e==sk||e==ok}var my=Ui["__core-js_shared__"],ww=(function(){var n=/[^.]+$/.exec(my&&my.keys&&my.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function lk(n){return!!ww&&ww in n}var ck=Function.prototype,uk=ck.toString;function Al(n){if(n!=null){try{return uk.call(n)}catch{}try{return n+""}catch{}}return""}var hk=/[\\^$.*+?()[\]{}|]/g,dk=/^\[object .+?Constructor\]$/,fk=Function.prototype,mk=Object.prototype,pk=fk.toString,gk=mk.hasOwnProperty,yk=RegExp("^"+pk.call(gk).replace(hk,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vk(n){if(!Vo(n)||lk(n))return!1;var e=Ov(n)?yk:dk;return e.test(Al(n))}function bk(n,e){return n?.[e]}function Sl(n,e){var t=bk(n,e);return vk(t)?t:void 0}var o0=Sl(Ui,"WeakMap"),Tw=Object.create,xk=(function(){function n(){}return function(e){if(!Vo(e))return{};if(Tw)return Tw(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}})();function _k(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function Ek(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var wk=800,Tk=16,Ak=Date.now;function Sk(n){var e=0,t=0;return function(){var r=Ak(),a=Tk-(r-t);if(t=r,a>0){if(++e>=wk)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function Nk(n){return function(){return n}}var im=(function(){try{var n=Sl(Object,"defineProperty");return n({},"",{}),n}catch{}})(),Ck=im?function(n,e){return im(n,"toString",{configurable:!0,enumerable:!1,value:Nk(e),writable:!0})}:AN,Rk=Sk(Ck);function Ik(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var jk=9007199254740991,Ok=/^(?:0|[1-9]\d*)$/;function SN(n,e){var t=typeof n;return e=e??jk,!!e&&(t=="number"||t!="symbol"&&Ok.test(n))&&n>-1&&n%1==0&&n<e}function Dv(n,e,t){e=="__proto__"&&im?im(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function qh(n,e){return n===e||n!==n&&e!==e}var Dk=Object.prototype,Lk=Dk.hasOwnProperty;function NN(n,e,t){var r=n[e];(!(Lk.call(n,e)&&qh(r,t))||t===void 0&&!(e in n))&&Dv(n,e,t)}function kk(n,e,t,r){var a=!t;t||(t={});for(var l=-1,c=e.length;++l<c;){var h=e[l],f=void 0;f===void 0&&(f=n[h]),a?Dv(t,h,f):NN(t,h,f)}return t}var Aw=Math.max;function Mk(n,e,t){return e=Aw(e===void 0?n.length-1:e,0),function(){for(var r=arguments,a=-1,l=Aw(r.length-e,0),c=Array(l);++a<l;)c[a]=r[e+a];a=-1;for(var h=Array(e+1);++a<e;)h[a]=r[a];return h[e]=t(c),_k(n,this,h)}}function Pk(n,e){return Rk(Mk(n,e,AN),n+"")}var Uk=9007199254740991;function CN(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Uk}function Vm(n){return n!=null&&CN(n.length)&&!Ov(n)}function Vk(n,e,t){if(!Vo(t))return!1;var r=typeof e;return(r=="number"?Vm(t)&&SN(e,t.length):r=="string"&&e in t)?qh(t[e],n):!1}function qk(n){return Pk(function(e,t){var r=-1,a=t.length,l=a>1?t[a-1]:void 0,c=a>2?t[2]:void 0;for(l=n.length>3&&typeof l=="function"?(a--,l):void 0,c&&Vk(t[0],t[1],c)&&(l=a<3?void 0:l,a=1),e=Object(e);++r<a;){var h=t[r];h&&n(e,h,r,l)}return e})}var Bk=Object.prototype;function Lv(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Bk;return n===t}function zk(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var Hk="[object Arguments]";function Sw(n){return Ca(n)&&Jc(n)==Hk}var RN=Object.prototype,Fk=RN.hasOwnProperty,$k=RN.propertyIsEnumerable,l0=Sw((function(){return arguments})())?Sw:function(n){return Ca(n)&&Fk.call(n,"callee")&&!$k.call(n,"callee")};function Gk(){return!1}var IN=typeof ls=="object"&&ls&&!ls.nodeType&&ls,Nw=IN&&typeof cs=="object"&&cs&&!cs.nodeType&&cs,Kk=Nw&&Nw.exports===IN,Cw=Kk?Ui.Buffer:void 0,Yk=Cw?Cw.isBuffer:void 0,vh=Yk||Gk,Qk="[object Arguments]",Xk="[object Array]",Wk="[object Boolean]",Zk="[object Date]",Jk="[object Error]",eM="[object Function]",tM="[object Map]",nM="[object Number]",rM="[object Object]",sM="[object RegExp]",iM="[object Set]",aM="[object String]",oM="[object WeakMap]",lM="[object ArrayBuffer]",cM="[object DataView]",uM="[object Float32Array]",hM="[object Float64Array]",dM="[object Int8Array]",fM="[object Int16Array]",mM="[object Int32Array]",pM="[object Uint8Array]",gM="[object Uint8ClampedArray]",yM="[object Uint16Array]",vM="[object Uint32Array]",Bt={};Bt[uM]=Bt[hM]=Bt[dM]=Bt[fM]=Bt[mM]=Bt[pM]=Bt[gM]=Bt[yM]=Bt[vM]=!0;Bt[Qk]=Bt[Xk]=Bt[lM]=Bt[Wk]=Bt[cM]=Bt[Zk]=Bt[Jk]=Bt[eM]=Bt[tM]=Bt[nM]=Bt[rM]=Bt[sM]=Bt[iM]=Bt[aM]=Bt[oM]=!1;function bM(n){return Ca(n)&&CN(n.length)&&!!Bt[Jc(n)]}function kv(n){return function(e){return n(e)}}var jN=typeof ls=="object"&&ls&&!ls.nodeType&&ls,ah=jN&&typeof cs=="object"&&cs&&!cs.nodeType&&cs,xM=ah&&ah.exports===jN,py=xM&&wN.process,Pc=(function(){try{var n=ah&&ah.require&&ah.require("util").types;return n||py&&py.binding&&py.binding("util")}catch{}})(),Rw=Pc&&Pc.isTypedArray,Mv=Rw?kv(Rw):bM,_M=Object.prototype,EM=_M.hasOwnProperty;function ON(n,e){var t=yl(n),r=!t&&l0(n),a=!t&&!r&&vh(n),l=!t&&!r&&!a&&Mv(n),c=t||r||a||l,h=c?zk(n.length,String):[],f=h.length;for(var p in n)(e||EM.call(n,p))&&!(c&&(p=="length"||a&&(p=="offset"||p=="parent")||l&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||SN(p,f)))&&h.push(p);return h}function DN(n,e){return function(t){return n(e(t))}}var wM=DN(Object.keys,Object),TM=Object.prototype,AM=TM.hasOwnProperty;function SM(n){if(!Lv(n))return wM(n);var e=[];for(var t in Object(n))AM.call(n,t)&&t!="constructor"&&e.push(t);return e}function NM(n){return Vm(n)?ON(n):SM(n)}function CM(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var RM=Object.prototype,IM=RM.hasOwnProperty;function jM(n){if(!Vo(n))return CM(n);var e=Lv(n),t=[];for(var r in n)r=="constructor"&&(e||!IM.call(n,r))||t.push(r);return t}function LN(n){return Vm(n)?ON(n,!0):jM(n)}var bh=Sl(Object,"create");function OM(){this.__data__=bh?bh(null):{},this.size=0}function DM(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var LM="__lodash_hash_undefined__",kM=Object.prototype,MM=kM.hasOwnProperty;function PM(n){var e=this.__data__;if(bh){var t=e[n];return t===LM?void 0:t}return MM.call(e,n)?e[n]:void 0}var UM=Object.prototype,VM=UM.hasOwnProperty;function qM(n){var e=this.__data__;return bh?e[n]!==void 0:VM.call(e,n)}var BM="__lodash_hash_undefined__";function zM(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=bh&&e===void 0?BM:e,this}function vl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}vl.prototype.clear=OM;vl.prototype.delete=DM;vl.prototype.get=PM;vl.prototype.has=qM;vl.prototype.set=zM;function HM(){this.__data__=[],this.size=0}function qm(n,e){for(var t=n.length;t--;)if(qh(n[t][0],e))return t;return-1}var FM=Array.prototype,$M=FM.splice;function GM(n){var e=this.__data__,t=qm(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():$M.call(e,t,1),--this.size,!0}function KM(n){var e=this.__data__,t=qm(e,n);return t<0?void 0:e[t][1]}function YM(n){return qm(this.__data__,n)>-1}function QM(n,e){var t=this.__data__,r=qm(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Da(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Da.prototype.clear=HM;Da.prototype.delete=GM;Da.prototype.get=KM;Da.prototype.has=YM;Da.prototype.set=QM;var xh=Sl(Ui,"Map");function XM(){this.size=0,this.__data__={hash:new vl,map:new(xh||Da),string:new vl}}function WM(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Bm(n,e){var t=n.__data__;return WM(e)?t[typeof e=="string"?"string":"hash"]:t.map}function ZM(n){var e=Bm(this,n).delete(n);return this.size-=e?1:0,e}function JM(n){return Bm(this,n).get(n)}function e8(n){return Bm(this,n).has(n)}function t8(n,e){var t=Bm(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function Nl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Nl.prototype.clear=XM;Nl.prototype.delete=ZM;Nl.prototype.get=JM;Nl.prototype.has=e8;Nl.prototype.set=t8;function n8(n,e){for(var t=-1,r=e.length,a=n.length;++t<r;)n[a+t]=e[t];return n}var kN=DN(Object.getPrototypeOf,Object),r8="[object Object]",s8=Function.prototype,i8=Object.prototype,MN=s8.toString,a8=i8.hasOwnProperty,o8=MN.call(Object);function l8(n){if(!Ca(n)||Jc(n)!=r8)return!1;var e=kN(n);if(e===null)return!0;var t=a8.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&MN.call(t)==o8}function c8(){this.__data__=new Da,this.size=0}function u8(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function h8(n){return this.__data__.get(n)}function d8(n){return this.__data__.has(n)}var f8=200;function m8(n,e){var t=this.__data__;if(t instanceof Da){var r=t.__data__;if(!xh||r.length<f8-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Nl(r)}return t.set(n,e),this.size=t.size,this}function Di(n){var e=this.__data__=new Da(n);this.size=e.size}Di.prototype.clear=c8;Di.prototype.delete=u8;Di.prototype.get=h8;Di.prototype.has=d8;Di.prototype.set=m8;var PN=typeof ls=="object"&&ls&&!ls.nodeType&&ls,Iw=PN&&typeof cs=="object"&&cs&&!cs.nodeType&&cs,p8=Iw&&Iw.exports===PN,jw=p8?Ui.Buffer:void 0,Ow=jw?jw.allocUnsafe:void 0;function UN(n,e){if(e)return n.slice();var t=n.length,r=Ow?Ow(t):new n.constructor(t);return n.copy(r),r}function g8(n,e){for(var t=-1,r=n==null?0:n.length,a=0,l=[];++t<r;){var c=n[t];e(c,t,n)&&(l[a++]=c)}return l}function y8(){return[]}var v8=Object.prototype,b8=v8.propertyIsEnumerable,Dw=Object.getOwnPropertySymbols,x8=Dw?function(n){return n==null?[]:(n=Object(n),g8(Dw(n),function(e){return b8.call(n,e)}))}:y8;function _8(n,e,t){var r=e(n);return yl(n)?r:n8(r,t(n))}function c0(n){return _8(n,NM,x8)}var u0=Sl(Ui,"DataView"),h0=Sl(Ui,"Promise"),d0=Sl(Ui,"Set"),Lw="[object Map]",E8="[object Object]",kw="[object Promise]",Mw="[object Set]",Pw="[object WeakMap]",Uw="[object DataView]",w8=Al(u0),T8=Al(xh),A8=Al(h0),S8=Al(d0),N8=Al(o0),ei=Jc;(u0&&ei(new u0(new ArrayBuffer(1)))!=Uw||xh&&ei(new xh)!=Lw||h0&&ei(h0.resolve())!=kw||d0&&ei(new d0)!=Mw||o0&&ei(new o0)!=Pw)&&(ei=function(n){var e=Jc(n),t=e==E8?n.constructor:void 0,r=t?Al(t):"";if(r)switch(r){case w8:return Uw;case T8:return Lw;case A8:return kw;case S8:return Mw;case N8:return Pw}return e});var C8=Object.prototype,R8=C8.hasOwnProperty;function I8(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&R8.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var am=Ui.Uint8Array;function Pv(n){var e=new n.constructor(n.byteLength);return new am(e).set(new am(n)),e}function j8(n,e){var t=Pv(n.buffer);return new n.constructor(t,n.byteOffset,n.byteLength)}var O8=/\w*$/;function D8(n){var e=new n.constructor(n.source,O8.exec(n));return e.lastIndex=n.lastIndex,e}var Vw=Do?Do.prototype:void 0,qw=Vw?Vw.valueOf:void 0;function L8(n){return qw?Object(qw.call(n)):{}}function VN(n,e){var t=e?Pv(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var k8="[object Boolean]",M8="[object Date]",P8="[object Map]",U8="[object Number]",V8="[object RegExp]",q8="[object Set]",B8="[object String]",z8="[object Symbol]",H8="[object ArrayBuffer]",F8="[object DataView]",$8="[object Float32Array]",G8="[object Float64Array]",K8="[object Int8Array]",Y8="[object Int16Array]",Q8="[object Int32Array]",X8="[object Uint8Array]",W8="[object Uint8ClampedArray]",Z8="[object Uint16Array]",J8="[object Uint32Array]";function e9(n,e,t){var r=n.constructor;switch(e){case H8:return Pv(n);case k8:case M8:return new r(+n);case F8:return j8(n);case $8:case G8:case K8:case Y8:case Q8:case X8:case W8:case Z8:case J8:return VN(n,t);case P8:return new r;case U8:case B8:return new r(n);case V8:return D8(n);case q8:return new r;case z8:return L8(n)}}function qN(n){return typeof n.constructor=="function"&&!Lv(n)?xk(kN(n)):{}}var t9="[object Map]";function n9(n){return Ca(n)&&ei(n)==t9}var Bw=Pc&&Pc.isMap,r9=Bw?kv(Bw):n9,s9="[object Set]";function i9(n){return Ca(n)&&ei(n)==s9}var zw=Pc&&Pc.isSet,a9=zw?kv(zw):i9,o9=1,BN="[object Arguments]",l9="[object Array]",c9="[object Boolean]",u9="[object Date]",h9="[object Error]",zN="[object Function]",d9="[object GeneratorFunction]",f9="[object Map]",m9="[object Number]",HN="[object Object]",p9="[object RegExp]",g9="[object Set]",y9="[object String]",v9="[object Symbol]",b9="[object WeakMap]",x9="[object ArrayBuffer]",_9="[object DataView]",E9="[object Float32Array]",w9="[object Float64Array]",T9="[object Int8Array]",A9="[object Int16Array]",S9="[object Int32Array]",N9="[object Uint8Array]",C9="[object Uint8ClampedArray]",R9="[object Uint16Array]",I9="[object Uint32Array]",Lt={};Lt[BN]=Lt[l9]=Lt[x9]=Lt[_9]=Lt[c9]=Lt[u9]=Lt[E9]=Lt[w9]=Lt[T9]=Lt[A9]=Lt[S9]=Lt[f9]=Lt[m9]=Lt[HN]=Lt[p9]=Lt[g9]=Lt[y9]=Lt[v9]=Lt[N9]=Lt[C9]=Lt[R9]=Lt[I9]=!0;Lt[h9]=Lt[zN]=Lt[b9]=!1;function Mf(n,e,t,r,a,l){var c,h=e&o9;if(c!==void 0)return c;if(!Vo(n))return n;var f=yl(n);if(f)c=I8(n);else{var p=ei(n),v=p==zN||p==d9;if(vh(n))return UN(n,h);if(p==HN||p==BN||v&&!a)c=v?{}:qN(n);else{if(!Lt[p])return a?n:{};c=e9(n,p,h)}}l||(l=new Di);var b=l.get(n);if(b)return b;l.set(n,c),a9(n)?n.forEach(function(S){c.add(Mf(S,e,t,S,n,l))}):r9(n)&&n.forEach(function(S,O){c.set(O,Mf(S,e,t,O,n,l))});var _=c0,T=f?void 0:_(n);return Ik(T||n,function(S,O){T&&(O=S,S=n[O]),NN(c,O,Mf(S,e,t,O,n,l))}),c}var j9=1,O9=4;function wc(n){return Mf(n,j9|O9)}var D9="__lodash_hash_undefined__";function L9(n){return this.__data__.set(n,D9),this}function k9(n){return this.__data__.has(n)}function om(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Nl;++e<t;)this.add(n[e])}om.prototype.add=om.prototype.push=L9;om.prototype.has=k9;function M9(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function P9(n,e){return n.has(e)}var U9=1,V9=2;function FN(n,e,t,r,a,l){var c=t&U9,h=n.length,f=e.length;if(h!=f&&!(c&&f>h))return!1;var p=l.get(n),v=l.get(e);if(p&&v)return p==e&&v==n;var b=-1,_=!0,T=t&V9?new om:void 0;for(l.set(n,e),l.set(e,n);++b<h;){var S=n[b],O=e[b];if(r)var R=c?r(O,S,b,e,n,l):r(S,O,b,n,e,l);if(R!==void 0){if(R)continue;_=!1;break}if(T){if(!M9(e,function(U,z){if(!P9(T,z)&&(S===U||a(S,U,t,r,l)))return T.push(z)})){_=!1;break}}else if(!(S===O||a(S,O,t,r,l))){_=!1;break}}return l.delete(n),l.delete(e),_}function q9(n){var e=-1,t=Array(n.size);return n.forEach(function(r,a){t[++e]=[a,r]}),t}function B9(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var z9=1,H9=2,F9="[object Boolean]",$9="[object Date]",G9="[object Error]",K9="[object Map]",Y9="[object Number]",Q9="[object RegExp]",X9="[object Set]",W9="[object String]",Z9="[object Symbol]",J9="[object ArrayBuffer]",eP="[object DataView]",Hw=Do?Do.prototype:void 0,gy=Hw?Hw.valueOf:void 0;function tP(n,e,t,r,a,l,c){switch(t){case eP:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case J9:return!(n.byteLength!=e.byteLength||!l(new am(n),new am(e)));case F9:case $9:case Y9:return qh(+n,+e);case G9:return n.name==e.name&&n.message==e.message;case Q9:case W9:return n==e+"";case K9:var h=q9;case X9:var f=r&z9;if(h||(h=B9),n.size!=e.size&&!f)return!1;var p=c.get(n);if(p)return p==e;r|=H9,c.set(n,e);var v=FN(h(n),h(e),r,a,l,c);return c.delete(n),v;case Z9:if(gy)return gy.call(n)==gy.call(e)}return!1}var nP=1,rP=Object.prototype,sP=rP.hasOwnProperty;function iP(n,e,t,r,a,l){var c=t&nP,h=c0(n),f=h.length,p=c0(e),v=p.length;if(f!=v&&!c)return!1;for(var b=f;b--;){var _=h[b];if(!(c?_ in e:sP.call(e,_)))return!1}var T=l.get(n),S=l.get(e);if(T&&S)return T==e&&S==n;var O=!0;l.set(n,e),l.set(e,n);for(var R=c;++b<f;){_=h[b];var U=n[_],z=e[_];if(r)var Y=c?r(z,U,_,e,n,l):r(U,z,_,n,e,l);if(!(Y===void 0?U===z||a(U,z,t,r,l):Y)){O=!1;break}R||(R=_=="constructor")}if(O&&!R){var Q=n.constructor,ie=e.constructor;Q!=ie&&"constructor"in n&&"constructor"in e&&!(typeof Q=="function"&&Q instanceof Q&&typeof ie=="function"&&ie instanceof ie)&&(O=!1)}return l.delete(n),l.delete(e),O}var aP=1,Fw="[object Arguments]",$w="[object Array]",df="[object Object]",oP=Object.prototype,Gw=oP.hasOwnProperty;function lP(n,e,t,r,a,l){var c=yl(n),h=yl(e),f=c?$w:ei(n),p=h?$w:ei(e);f=f==Fw?df:f,p=p==Fw?df:p;var v=f==df,b=p==df,_=f==p;if(_&&vh(n)){if(!vh(e))return!1;c=!0,v=!1}if(_&&!v)return l||(l=new Di),c||Mv(n)?FN(n,e,t,r,a,l):tP(n,e,f,t,r,a,l);if(!(t&aP)){var T=v&&Gw.call(n,"__wrapped__"),S=b&&Gw.call(e,"__wrapped__");if(T||S){var O=T?n.value():n,R=S?e.value():e;return l||(l=new Di),a(O,R,t,r,l)}}return _?(l||(l=new Di),iP(n,e,t,r,a,l)):!1}function $N(n,e,t,r,a){return n===e?!0:n==null||e==null||!Ca(n)&&!Ca(e)?n!==n&&e!==e:lP(n,e,t,r,$N,a)}function cP(n){return function(e,t,r){for(var a=-1,l=Object(e),c=r(e),h=c.length;h--;){var f=c[++a];if(t(l[f],f,l)===!1)break}return e}}var uP=cP();function f0(n,e,t){(t!==void 0&&!qh(n[e],t)||t===void 0&&!(e in n))&&Dv(n,e,t)}function hP(n){return Ca(n)&&Vm(n)}function m0(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function dP(n){return kk(n,LN(n))}function fP(n,e,t,r,a,l,c){var h=m0(n,t),f=m0(e,t),p=c.get(f);if(p){f0(n,t,p);return}var v=l?l(h,f,t+"",n,e,c):void 0,b=v===void 0;if(b){var _=yl(f),T=!_&&vh(f),S=!_&&!T&&Mv(f);v=f,_||T||S?yl(h)?v=h:hP(h)?v=Ek(h):T?(b=!1,v=UN(f,!0)):S?(b=!1,v=VN(f,!0)):v=[]:l8(f)||l0(f)?(v=h,l0(h)?v=dP(h):(!Vo(h)||Ov(h))&&(v=qN(f))):b=!1}b&&(c.set(f,v),a(v,f,r,l,c),c.delete(f)),f0(n,t,v)}function GN(n,e,t,r,a){n!==e&&uP(e,function(l,c){if(a||(a=new Di),Vo(l))fP(n,e,c,t,GN,r,a);else{var h=r?r(m0(n,c),l,c+"",n,e,a):void 0;h===void 0&&(h=l),f0(n,c,h)}},LN)}function go(n,e){return $N(n,e)}var Ao=qk(function(n,e,t){GN(n,e,t)}),Oe=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(Oe||{});class Mi{constructor(e,t,r={}){this.attrName=e,this.keyName=t;const a=Oe.TYPE&Oe.ATTRIBUTE;this.scope=r.scope!=null?r.scope&Oe.LEVEL|a:Oe.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}}class Tc extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const KN=class p0{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,t)}return null}create(e,t,r){const a=this.query(t);if(a==null)throw new Tc(`Unable to create ${t} blot`);const l=a,c=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:l.create(r),h=new l(e,c,r);return p0.blots.set(h.domNode,h),h}find(e,t=!1){return p0.find(e,t)}query(e,t=Oe.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&Oe.LEVEL&Oe.BLOCK?r=this.types.block:e&Oe.LEVEL&Oe.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(a=>(r=this.classes[a],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&t&Oe.LEVEL&r.scope&&t&Oe.TYPE&r.scope?r:null}register(...e){return e.map(t=>{const r="blotName"in t,a="attrName"in t;if(!r&&!a)throw new Tc("Invalid definition");if(r&&t.blotName==="abstract")throw new Tc("Cannot register abstract class");const l=r?t.blotName:a?t.attrName:void 0;return this.types[l]=t,a?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):r&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(c=>c.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(c=>{(this.tags[c]==null||t.className==null)&&(this.tags[c]=t)}))),t})}};KN.blots=new WeakMap;let Uc=KN;function Kw(n,e){return(n.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}class mP extends Mi{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){Kw(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const t=(Kw(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}}const ci=mP;function yy(n){const e=n.split("-"),t=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+t}class pP extends Mi{static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[yy(this.keyName)]=t,!0):!1}remove(e){e.style[yy(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const t=e.style[yy(this.keyName)];return this.canAdd(e,t)?t:""}}const qo=pP;class gP{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Uc.find(this.domNode);if(e==null)return;const t=Mi.keys(this.domNode),r=ci.keys(this.domNode),a=qo.keys(this.domNode);t.concat(r).concat(a).forEach(l=>{const c=e.scroll.query(l,Oe.ATTRIBUTE);c instanceof Mi&&(this.attributes[c.attrName]=c)})}copy(e){Object.keys(this.attributes).forEach(t=>{const r=this.attributes[t].value(this.domNode);e.format(t,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}}const zm=gP,YN=class{constructor(e,t){this.scroll=e,this.domNode=t,Uc.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Tc("Blot definition missing tagName");let t,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?t=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?t=document.createElement(r):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Uc.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,r,a){const l=this.isolate(e,t);if(this.scroll.query(r,Oe.BLOT)!=null&&a)l.wrap(r,a);else if(this.scroll.query(r,Oe.ATTRIBUTE)!=null){const c=this.scroll.create(this.statics.scope);l.wrap(c),c.format(r,a)}}insertAt(e,t,r){const a=r==null?this.scroll.create("text",t):this.scroll.create(t,r),l=this.split(e);this.parent.insertBefore(a,l||void 0)}isolate(e,t){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(t),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new Tc(`Cannot wrap ${e}`);return r.appendChild(this),r}};YN.blotName="abstract";let QN=YN;const XN=class extends QN{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};XN.scope=Oe.INLINE_BLOT;let yP=XN;const hr=yP;class vP{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const t=e.slice(1);this.append(...t)}}at(e){const t=this.iterator();let r=t();for(;r&&e>0;)e-=1,r=t();return r}contains(e){const t=this.iterator();let r=t();for(;r;){if(r===e)return!0;r=t()}return!1}indexOf(e){const t=this.iterator();let r=t(),a=0;for(;r;){if(r===e)return a;a+=1,r=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,r=this.head;for(;r!=null;){if(r===e)return t;t+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){const r=this.iterator();let a=r();for(;a;){const l=a.length();if(e<l||t&&e===l&&(a.next==null||a.next.length()!==0))return[a,e];e-=l,a=r()}return[null,0]}forEach(e){const t=this.iterator();let r=t();for(;r;)e(r),r=t()}forEachAt(e,t,r){if(t<=0)return;const[a,l]=this.find(e);let c=e-l;const h=this.iterator(a);let f=h();for(;f&&c<e+t;){const p=f.length();e>c?r(f,e-c,Math.min(t,c+p-e)):r(f,0,Math.min(p,e+t-c)),c+=p,f=h()}}map(e){return this.reduce((t,r)=>(t.push(e(r)),t),[])}reduce(e,t){const r=this.iterator();let a=r();for(;a;)t=e(t,a),a=r();return t}}function Yw(n,e){const t=e.find(n);if(t)return t;try{return e.create(n)}catch{const r=e.create(Oe.INLINE);return Array.from(n.childNodes).forEach(a=>{r.domNode.appendChild(a)}),n.parentNode&&n.parentNode.replaceChild(r.domNode,n),r.attach(),r}}const WN=class uo extends QN{constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,uo.uiClass&&this.uiNode.classList.add(uo.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new vP,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const t=Yw(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof Tc)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(r,a,l)=>{r.deleteAt(a,l)})}descendant(e,t=0){const[r,a]=this.children.find(t);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,a]:r instanceof uo?r.descendant(e,a):[null,-1]}descendants(e,t=0,r=Number.MAX_VALUE){let a=[],l=r;return this.children.forEachAt(t,r,(c,h,f)=>{(e.blotName==null&&e(c)||e.blotName!=null&&c instanceof e)&&a.push(c),c instanceof uo&&(a=a.concat(c.descendants(e,h,l))),l-=f}),a}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(r=>t instanceof r)||(t.statics.scope===Oe.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof uo?t.unwrap():t.remove())})}formatAt(e,t,r,a){this.children.forEachAt(e,t,(l,c,h)=>{l.formatAt(c,h,r,a)})}insertAt(e,t,r){const[a,l]=this.children.find(e);if(a)a.insertAt(l,t,r);else{const c=r==null?this.scroll.create("text",t):this.scroll.create(t,r);this.appendChild(c)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(r=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(r=>{e.insertBefore(r,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){const[r,a]=this.children.find(e,t),l=[[this,e]];return r instanceof uo?l.concat(r.path(a,t)):(r!=null&&l.push([r,a]),l)}removeChild(e){this.children.remove(e)}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return r instanceof uo&&this.moveChildren(r),super.replaceWith(r)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(a,l,c)=>{const h=a.split(l,t);h!=null&&r.appendChild(h)}),r}splitAfter(e){const t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){const r=[],a=[];e.forEach(l=>{l.target===this.domNode&&l.type==="childList"&&(r.push(...l.addedNodes),a.push(...l.removedNodes))}),a.forEach(l=>{if(l.parentNode!=null&&l.tagName!=="IFRAME"&&document.body.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const c=this.scroll.find(l);c!=null&&(c.domNode.parentNode==null||c.domNode.parentNode===this.domNode)&&c.detach()}),r.filter(l=>l.parentNode===this.domNode&&l!==this.uiNode).sort((l,c)=>l===c?0:l.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(l=>{let c=null;l.nextSibling!=null&&(c=this.scroll.find(l.nextSibling));const h=Yw(l,this.scroll);(h.next!==c||h.next==null)&&(h.parent!=null&&h.parent.removeChild(this),this.insertBefore(h,c||void 0))}),this.enforceAllowedChildren()}};WN.uiClass="";let bP=WN;const ai=bP;function xP(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}const dc=class fc extends ai{static create(e){return super.create(e)}static formats(e,t){const r=t.query(fc.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new zm(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(r=>{r instanceof fc||(r=r.wrap(fc.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,Oe.INLINE);if(r==null)return;r instanceof Mi?this.attributes.attribute(r,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,a){this.formats()[r]!=null||this.scroll.query(r,Oe.ATTRIBUTE)?this.isolate(e,t).format(r,a):super.formatAt(e,t,r,a)}optimize(e){super.optimize(e);const t=this.formats();if(Object.keys(t).length===0)return this.unwrap();const r=this.next;r instanceof fc&&r.prev===this&&xP(t,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,t){const r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,t){const r=super.wrap(e,t);return r instanceof fc&&this.attributes.move(r),r}};dc.allowedChildren=[dc,hr],dc.blotName="inline",dc.scope=Oe.INLINE_BLOT,dc.tagName="SPAN";let _P=dc;const Uv=_P,mc=class g0 extends ai{static create(e){return super.create(e)}static formats(e,t){const r=t.query(g0.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new zm(this.domNode)}format(e,t){const r=this.scroll.query(e,Oe.BLOCK);r!=null&&(r instanceof Mi?this.attributes.attribute(r,t):e===this.statics.blotName&&!t?this.replaceWith(g0.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,a){this.scroll.query(r,Oe.BLOCK)!=null?this.format(r,a):super.formatAt(e,t,r,a)}insertAt(e,t,r){if(r==null||this.scroll.query(t,Oe.INLINE)!=null)super.insertAt(e,t,r);else{const a=this.split(e);if(a!=null){const l=this.scroll.create(t,r);a.parent.insertBefore(l,a)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){const r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};mc.blotName="block",mc.scope=Oe.BLOCK_BLOT,mc.tagName="P",mc.allowedChildren=[Uv,mc,hr];let EP=mc;const _h=EP,y0=class extends ai{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,r,a){super.formatAt(e,t,r,a),this.enforceAllowedChildren()}insertAt(e,t,r){super.insertAt(e,t,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};y0.blotName="container",y0.scope=Oe.BLOCK_BLOT;let wP=y0;const Hm=wP;class TP extends hr{static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,r,a){e===0&&t===this.length()?this.format(r,a):super.formatAt(e,t,r,a)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const hs=TP,AP={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},SP=100,pc=class extends ai{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,AP),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const r=this.registry.find(e,t);return r?r.scroll===this?r:t?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,t=Oe.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,t)}formatAt(e,t,r,a){this.update(),super.formatAt(e,t,r,a)}insertAt(e,t,r){this.update(),super.insertAt(e,t,r)}optimize(e=[],t={}){super.optimize(t);const r=t.mutationsMap||new WeakMap;let a=Array.from(this.observer.takeRecords());for(;a.length>0;)e.push(a.pop());const l=(f,p=!0)=>{f==null||f===this||f.domNode.parentNode!=null&&(r.has(f.domNode)||r.set(f.domNode,[]),p&&l(f.parent))},c=f=>{r.has(f.domNode)&&(f instanceof ai&&f.children.forEach(c),r.delete(f.domNode),f.optimize(t))};let h=e;for(let f=0;h.length>0;f+=1){if(f>=SP)throw new Error("[Parchment] Maximum optimize iterations reached");for(h.forEach(p=>{const v=this.find(p.target,!0);v!=null&&(v.domNode===p.target&&(p.type==="childList"?(l(this.find(p.previousSibling,!1)),Array.from(p.addedNodes).forEach(b=>{const _=this.find(b,!1);l(_,!1),_ instanceof ai&&_.children.forEach(T=>{l(T,!1)})})):p.type==="attributes"&&l(v.prev)),l(v))}),this.children.forEach(c),h=Array.from(this.observer.takeRecords()),a=h.slice();a.length>0;)e.push(a.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(a=>{const l=this.find(a.target,!0);return l==null?null:r.has(l.domNode)?(r.get(l.domNode).push(a),null):(r.set(l.domNode,[a]),l)}).forEach(a=>{a!=null&&a!==this&&r.has(a.domNode)&&a.update(r.get(a.domNode)||[],t)}),t.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),t),this.optimize(e,t)}};pc.blotName="scroll",pc.defaultChild=_h,pc.allowedChildren=[_h,Hm],pc.scope=Oe.BLOCK_BLOT,pc.tagName="DIV";let NP=pc;const Vv=NP,v0=class ZN extends hr{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,r){r==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof ZN&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,t){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};v0.blotName="text",v0.scope=Oe.INLINE_BLOT;let CP=v0;const lm=CP,RP=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Mi,AttributorStore:zm,BlockBlot:_h,ClassAttributor:ci,ContainerBlot:Hm,EmbedBlot:hs,InlineBlot:Uv,LeafBlot:hr,ParentBlot:ai,Registry:Uc,Scope:Oe,ScrollBlot:Vv,StyleAttributor:qo,TextBlot:lm},Symbol.toStringTag,{value:"Module"}));var ff={exports:{}},vy,Qw;function IP(){if(Qw)return vy;Qw=1;var n=-1,e=1,t=0;function r(N,P,C,ge,pe){if(N===P)return N?[[t,N]]:[];if(C!=null){var F=V(N,P,C);if(F)return F}var ee=h(N,P),ue=N.substring(0,ee);N=N.substring(ee),P=P.substring(ee),ee=p(N,P);var xe=N.substring(N.length-ee);N=N.substring(0,N.length-ee),P=P.substring(0,P.length-ee);var be=a(N,P);return ue&&be.unshift([t,ue]),xe&&be.push([t,xe]),z(be,pe),ge&&b(be),be}function a(N,P){var C;if(!N)return[[e,P]];if(!P)return[[n,N]];var ge=N.length>P.length?N:P,pe=N.length>P.length?P:N,F=ge.indexOf(pe);if(F!==-1)return C=[[e,ge.substring(0,F)],[t,pe],[e,ge.substring(F+pe.length)]],N.length>P.length&&(C[0][0]=C[2][0]=n),C;if(pe.length===1)return[[n,N],[e,P]];var ee=v(N,P);if(ee){var ue=ee[0],xe=ee[1],be=ee[2],q=ee[3],W=ee[4],de=r(ue,be),me=r(xe,q);return de.concat([[t,W]],me)}return l(N,P)}function l(N,P){for(var C=N.length,ge=P.length,pe=Math.ceil((C+ge)/2),F=pe,ee=2*pe,ue=new Array(ee),xe=new Array(ee),be=0;be<ee;be++)ue[be]=-1,xe[be]=-1;ue[F+1]=0,xe[F+1]=0;for(var q=C-ge,W=q%2!==0,de=0,me=0,ye=0,Ae=0,De=0;De<pe;De++){for(var je=-De+de;je<=De-me;je+=2){var ke=F+je,We;je===-De||je!==De&&ue[ke-1]<ue[ke+1]?We=ue[ke+1]:We=ue[ke-1]+1;for(var et=We-je;We<C&&et<ge&&N.charAt(We)===P.charAt(et);)We++,et++;if(ue[ke]=We,We>C)me+=2;else if(et>ge)de+=2;else if(W){var st=F+q-je;if(st>=0&&st<ee&&xe[st]!==-1){var ht=C-xe[st];if(We>=ht)return c(N,P,We,et)}}}for(var vt=-De+ye;vt<=De-Ae;vt+=2){var st=F+vt,ht;vt===-De||vt!==De&&xe[st-1]<xe[st+1]?ht=xe[st+1]:ht=xe[st-1]+1;for(var nn=ht-vt;ht<C&&nn<ge&&N.charAt(C-ht-1)===P.charAt(ge-nn-1);)ht++,nn++;if(xe[st]=ht,ht>C)Ae+=2;else if(nn>ge)ye+=2;else if(!W){var ke=F+q-vt;if(ke>=0&&ke<ee&&ue[ke]!==-1){var We=ue[ke],et=F+We-ke;if(ht=C-ht,We>=ht)return c(N,P,We,et)}}}}return[[n,N],[e,P]]}function c(N,P,C,ge){var pe=N.substring(0,C),F=P.substring(0,ge),ee=N.substring(C),ue=P.substring(ge),xe=r(pe,F),be=r(ee,ue);return xe.concat(be)}function h(N,P){if(!N||!P||N.charAt(0)!==P.charAt(0))return 0;for(var C=0,ge=Math.min(N.length,P.length),pe=ge,F=0;C<pe;)N.substring(F,pe)==P.substring(F,pe)?(C=pe,F=C):ge=pe,pe=Math.floor((ge-C)/2+C);return Y(N.charCodeAt(pe-1))&&pe--,pe}function f(N,P){var C=N.length,ge=P.length;if(C==0||ge==0)return 0;C>ge?N=N.substring(C-ge):C<ge&&(P=P.substring(0,C));var pe=Math.min(C,ge);if(N==P)return pe;for(var F=0,ee=1;;){var ue=N.substring(pe-ee),xe=P.indexOf(ue);if(xe==-1)return F;ee+=xe,(xe==0||N.substring(pe-ee)==P.substring(0,ee))&&(F=ee,ee++)}}function p(N,P){if(!N||!P||N.slice(-1)!==P.slice(-1))return 0;for(var C=0,ge=Math.min(N.length,P.length),pe=ge,F=0;C<pe;)N.substring(N.length-pe,N.length-F)==P.substring(P.length-pe,P.length-F)?(C=pe,F=C):ge=pe,pe=Math.floor((ge-C)/2+C);return Q(N.charCodeAt(N.length-pe))&&pe--,pe}function v(N,P){var C=N.length>P.length?N:P,ge=N.length>P.length?P:N;if(C.length<4||ge.length*2<C.length)return null;function pe(me,ye,Ae){for(var De=me.substring(Ae,Ae+Math.floor(me.length/4)),je=-1,ke="",We,et,st,ht;(je=ye.indexOf(De,je+1))!==-1;){var vt=h(me.substring(Ae),ye.substring(je)),nn=p(me.substring(0,Ae),ye.substring(0,je));ke.length<nn+vt&&(ke=ye.substring(je-nn,je)+ye.substring(je,je+vt),We=me.substring(0,Ae-nn),et=me.substring(Ae+vt),st=ye.substring(0,je-nn),ht=ye.substring(je+vt))}return ke.length*2>=me.length?[We,et,st,ht,ke]:null}var F=pe(C,ge,Math.ceil(C.length/4)),ee=pe(C,ge,Math.ceil(C.length/2)),ue;if(!F&&!ee)return null;ee?F?ue=F[4].length>ee[4].length?F:ee:ue=ee:ue=F;var xe,be,q,W;N.length>P.length?(xe=ue[0],be=ue[1],q=ue[2],W=ue[3]):(q=ue[0],W=ue[1],xe=ue[2],be=ue[3]);var de=ue[4];return[xe,be,q,W,de]}function b(N){for(var P=!1,C=[],ge=0,pe=null,F=0,ee=0,ue=0,xe=0,be=0;F<N.length;)N[F][0]==t?(C[ge++]=F,ee=xe,ue=be,xe=0,be=0,pe=N[F][1]):(N[F][0]==e?xe+=N[F][1].length:be+=N[F][1].length,pe&&pe.length<=Math.max(ee,ue)&&pe.length<=Math.max(xe,be)&&(N.splice(C[ge-1],0,[n,pe]),N[C[ge-1]+1][0]=e,ge--,ge--,F=ge>0?C[ge-1]:-1,ee=0,ue=0,xe=0,be=0,pe=null,P=!0)),F++;for(P&&z(N),U(N),F=1;F<N.length;){if(N[F-1][0]==n&&N[F][0]==e){var q=N[F-1][1],W=N[F][1],de=f(q,W),me=f(W,q);de>=me?(de>=q.length/2||de>=W.length/2)&&(N.splice(F,0,[t,W.substring(0,de)]),N[F-1][1]=q.substring(0,q.length-de),N[F+1][1]=W.substring(de),F++):(me>=q.length/2||me>=W.length/2)&&(N.splice(F,0,[t,q.substring(0,me)]),N[F-1][0]=e,N[F-1][1]=W.substring(0,W.length-me),N[F+1][0]=n,N[F+1][1]=q.substring(me),F++),F++}F++}}var _=/[^a-zA-Z0-9]/,T=/\s/,S=/[\r\n]/,O=/\n\r?\n$/,R=/^\r?\n\r?\n/;function U(N){function P(me,ye){if(!me||!ye)return 6;var Ae=me.charAt(me.length-1),De=ye.charAt(0),je=Ae.match(_),ke=De.match(_),We=je&&Ae.match(T),et=ke&&De.match(T),st=We&&Ae.match(S),ht=et&&De.match(S),vt=st&&me.match(O),nn=ht&&ye.match(R);return vt||nn?5:st||ht?4:je&&!We&&et?3:We||et?2:je||ke?1:0}for(var C=1;C<N.length-1;){if(N[C-1][0]==t&&N[C+1][0]==t){var ge=N[C-1][1],pe=N[C][1],F=N[C+1][1],ee=p(ge,pe);if(ee){var ue=pe.substring(pe.length-ee);ge=ge.substring(0,ge.length-ee),pe=ue+pe.substring(0,pe.length-ee),F=ue+F}for(var xe=ge,be=pe,q=F,W=P(ge,pe)+P(pe,F);pe.charAt(0)===F.charAt(0);){ge+=pe.charAt(0),pe=pe.substring(1)+F.charAt(0),F=F.substring(1);var de=P(ge,pe)+P(pe,F);de>=W&&(W=de,xe=ge,be=pe,q=F)}N[C-1][1]!=xe&&(xe?N[C-1][1]=xe:(N.splice(C-1,1),C--),N[C][1]=be,q?N[C+1][1]=q:(N.splice(C+1,1),C--))}C++}}function z(N,P){N.push([t,""]);for(var C=0,ge=0,pe=0,F="",ee="",ue;C<N.length;){if(C<N.length-1&&!N[C][1]){N.splice(C,1);continue}switch(N[C][0]){case e:pe++,ee+=N[C][1],C++;break;case n:ge++,F+=N[C][1],C++;break;case t:var xe=C-pe-ge-1;if(P){if(xe>=0&&ve(N[xe][1])){var be=N[xe][1].slice(-1);if(N[xe][1]=N[xe][1].slice(0,-1),F=be+F,ee=be+ee,!N[xe][1]){N.splice(xe,1),C--;var q=xe-1;N[q]&&N[q][0]===e&&(pe++,ee=N[q][1]+ee,q--),N[q]&&N[q][0]===n&&(ge++,F=N[q][1]+F,q--),xe=q}}if(ie(N[C][1])){var be=N[C][1].charAt(0);N[C][1]=N[C][1].slice(1),F+=be,ee+=be}}if(C<N.length-1&&!N[C][1]){N.splice(C,1);break}if(F.length>0||ee.length>0){F.length>0&&ee.length>0&&(ue=h(ee,F),ue!==0&&(xe>=0?N[xe][1]+=ee.substring(0,ue):(N.splice(0,0,[t,ee.substring(0,ue)]),C++),ee=ee.substring(ue),F=F.substring(ue)),ue=p(ee,F),ue!==0&&(N[C][1]=ee.substring(ee.length-ue)+N[C][1],ee=ee.substring(0,ee.length-ue),F=F.substring(0,F.length-ue)));var W=pe+ge;F.length===0&&ee.length===0?(N.splice(C-W,W),C=C-W):F.length===0?(N.splice(C-W,W,[e,ee]),C=C-W+1):ee.length===0?(N.splice(C-W,W,[n,F]),C=C-W+1):(N.splice(C-W,W,[n,F],[e,ee]),C=C-W+2)}C!==0&&N[C-1][0]===t?(N[C-1][1]+=N[C][1],N.splice(C,1)):C++,pe=0,ge=0,F="",ee="";break}}N[N.length-1][1]===""&&N.pop();var de=!1;for(C=1;C<N.length-1;)N[C-1][0]===t&&N[C+1][0]===t&&(N[C][1].substring(N[C][1].length-N[C-1][1].length)===N[C-1][1]?(N[C][1]=N[C-1][1]+N[C][1].substring(0,N[C][1].length-N[C-1][1].length),N[C+1][1]=N[C-1][1]+N[C+1][1],N.splice(C-1,1),de=!0):N[C][1].substring(0,N[C+1][1].length)==N[C+1][1]&&(N[C-1][1]+=N[C+1][1],N[C][1]=N[C][1].substring(N[C+1][1].length)+N[C+1][1],N.splice(C+1,1),de=!0)),C++;de&&z(N,P)}function Y(N){return N>=55296&&N<=56319}function Q(N){return N>=56320&&N<=57343}function ie(N){return Q(N.charCodeAt(0))}function ve(N){return Y(N.charCodeAt(N.length-1))}function L(N){for(var P=[],C=0;C<N.length;C++)N[C][1].length>0&&P.push(N[C]);return P}function k(N,P,C,ge){return ve(N)||ie(ge)?null:L([[t,N],[n,P],[e,C],[t,ge]])}function V(N,P,C){var ge=typeof C=="number"?{index:C,length:0}:C.oldRange,pe=typeof C=="number"?null:C.newRange,F=N.length,ee=P.length;if(ge.length===0&&(pe===null||pe.length===0)){var ue=ge.index,xe=N.slice(0,ue),be=N.slice(ue),q=pe?pe.index:null;e:{var W=ue+ee-F;if(q!==null&&q!==W||W<0||W>ee)break e;var de=P.slice(0,W),me=P.slice(W);if(me!==be)break e;var ye=Math.min(ue,W),Ae=xe.slice(0,ye),De=de.slice(0,ye);if(Ae!==De)break e;var je=xe.slice(ye),ke=de.slice(ye);return k(Ae,je,ke,be)}e:{if(q!==null&&q!==ue)break e;var We=ue,de=P.slice(0,We),me=P.slice(We);if(de!==xe)break e;var et=Math.min(F-We,ee-We),st=be.slice(be.length-et),ht=me.slice(me.length-et);if(st!==ht)break e;var je=be.slice(0,be.length-et),ke=me.slice(0,me.length-et);return k(xe,je,ke,st)}}if(ge.length>0&&pe&&pe.length===0)e:{var Ae=N.slice(0,ge.index),st=N.slice(ge.index+ge.length),ye=Ae.length,et=st.length;if(ee<ye+et)break e;var De=P.slice(0,ye),ht=P.slice(ee-et);if(Ae!==De||st!==ht)break e;var je=N.slice(ye,F-et),ke=P.slice(ye,ee-et);return k(Ae,je,ke,st)}return null}function $(N,P,C,ge){return r(N,P,C,ge,!0)}return $.INSERT=e,$.DELETE=n,$.EQUAL=t,vy=$,vy}var Wu={exports:{}};Wu.exports;var Xw;function JN(){return Xw||(Xw=1,(function(n,e){var t=200,r="__lodash_hash_undefined__",a=9007199254740991,l="[object Arguments]",c="[object Array]",h="[object Boolean]",f="[object Date]",p="[object Error]",v="[object Function]",b="[object GeneratorFunction]",_="[object Map]",T="[object Number]",S="[object Object]",O="[object Promise]",R="[object RegExp]",U="[object Set]",z="[object String]",Y="[object Symbol]",Q="[object WeakMap]",ie="[object ArrayBuffer]",ve="[object DataView]",L="[object Float32Array]",k="[object Float64Array]",V="[object Int8Array]",$="[object Int16Array]",N="[object Int32Array]",P="[object Uint8Array]",C="[object Uint8ClampedArray]",ge="[object Uint16Array]",pe="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,ee=/\w*$/,ue=/^\[object .+?Constructor\]$/,xe=/^(?:0|[1-9]\d*)$/,be={};be[l]=be[c]=be[ie]=be[ve]=be[h]=be[f]=be[L]=be[k]=be[V]=be[$]=be[N]=be[_]=be[T]=be[S]=be[R]=be[U]=be[z]=be[Y]=be[P]=be[C]=be[ge]=be[pe]=!0,be[p]=be[v]=be[Q]=!1;var q=typeof yo=="object"&&yo&&yo.Object===Object&&yo,W=typeof self=="object"&&self&&self.Object===Object&&self,de=q||W||Function("return this")(),me=e&&!e.nodeType&&e,ye=me&&!0&&n&&!n.nodeType&&n,Ae=ye&&ye.exports===me;function De(E,j){return E.set(j[0],j[1]),E}function je(E,j){return E.add(j),E}function ke(E,j){for(var B=-1,ne=E?E.length:0;++B<ne&&j(E[B],B,E)!==!1;);return E}function We(E,j){for(var B=-1,ne=j.length,Ue=E.length;++B<ne;)E[Ue+B]=j[B];return E}function et(E,j,B,ne){for(var Ue=-1,Se=E?E.length:0;++Ue<Se;)B=j(B,E[Ue],Ue,E);return B}function st(E,j){for(var B=-1,ne=Array(E);++B<E;)ne[B]=j(B);return ne}function ht(E,j){return E?.[j]}function vt(E){var j=!1;if(E!=null&&typeof E.toString!="function")try{j=!!(E+"")}catch{}return j}function nn(E){var j=-1,B=Array(E.size);return E.forEach(function(ne,Ue){B[++j]=[Ue,ne]}),B}function Hr(E,j){return function(B){return E(j(B))}}function hi(E){var j=-1,B=Array(E.size);return E.forEach(function(ne){B[++j]=ne}),B}var qi=Array.prototype,Ht=Function.prototype,jt=Object.prototype,Nr=de["__core-js_shared__"],ka=(function(){var E=/[^.]+$/.exec(Nr&&Nr.keys&&Nr.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""})(),Bi=Ht.toString,Ot=jt.hasOwnProperty,Cr=jt.toString,zi=RegExp("^"+Bi.call(Ot).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fr=Ae?de.Buffer:void 0,pr=de.Symbol,Hi=de.Uint8Array,Mn=Hr(Object.getPrototypeOf,Object),Fi=Object.create,$i=jt.propertyIsEnumerable,gr=qi.splice,Zt=Object.getOwnPropertySymbols,Sn=Fr?Fr.isBuffer:void 0,Dt=Hr(Object.keys,Object),Bs=yn(de,"DataView"),Rr=yn(de,"Map"),er=yn(de,"Promise"),Pn=yn(de,"Set"),$r=yn(de,"WeakMap"),At=yn(Object,"create"),tr=un(Bs),In=un(Rr),Un=un(er),Gi=un(Pn),di=un($r),Nn=pr?pr.prototype:void 0,ds=Nn?Nn.valueOf:void 0;function Gr(E){var j=-1,B=E?E.length:0;for(this.clear();++j<B;){var ne=E[j];this.set(ne[0],ne[1])}}function zs(){this.__data__=At?At(null):{}}function Ki(E){return this.has(E)&&delete this.__data__[E]}function Yi(E){var j=this.__data__;if(At){var B=j[E];return B===r?void 0:B}return Ot.call(j,E)?j[E]:void 0}function fs(E){var j=this.__data__;return At?j[E]!==void 0:Ot.call(j,E)}function yr(E,j){var B=this.__data__;return B[E]=At&&j===void 0?r:j,this}Gr.prototype.clear=zs,Gr.prototype.delete=Ki,Gr.prototype.get=Yi,Gr.prototype.has=fs,Gr.prototype.set=yr;function rn(E){var j=-1,B=E?E.length:0;for(this.clear();++j<B;){var ne=E[j];this.set(ne[0],ne[1])}}function vr(){this.__data__=[]}function br(E){var j=this.__data__,B=qn(j,E);if(B<0)return!1;var ne=j.length-1;return B==ne?j.pop():gr.call(j,B,1),!0}function Ft(E){var j=this.__data__,B=qn(j,E);return B<0?void 0:j[B][1]}function sn(E){return qn(this.__data__,E)>-1}function Ir(E,j){var B=this.__data__,ne=qn(B,E);return ne<0?B.push([E,j]):B[ne][1]=j,this}rn.prototype.clear=vr,rn.prototype.delete=br,rn.prototype.get=Ft,rn.prototype.has=sn,rn.prototype.set=Ir;function Jt(E){var j=-1,B=E?E.length:0;for(this.clear();++j<B;){var ne=E[j];this.set(ne[0],ne[1])}}function Bo(){this.__data__={hash:new Gr,map:new(Rr||rn),string:new Gr}}function Ma(E){return ys(this,E).delete(E)}function Pa(E){return ys(this,E).get(E)}function jr(E){return ys(this,E).has(E)}function fi(E,j){return ys(this,E).set(E,j),this}Jt.prototype.clear=Bo,Jt.prototype.delete=Ma,Jt.prototype.get=Pa,Jt.prototype.has=jr,Jt.prototype.set=fi;function Mt(E){this.__data__=new rn(E)}function nr(){this.__data__=new rn}function Vn(E){return this.__data__.delete(E)}function Or(E){return this.__data__.get(E)}function $t(E){return this.__data__.has(E)}function Qi(E,j){var B=this.__data__;if(B instanceof rn){var ne=B.__data__;if(!Rr||ne.length<t-1)return ne.push([E,j]),this;B=this.__data__=new Jt(ne)}return B.set(E,j),this}Mt.prototype.clear=nr,Mt.prototype.delete=Vn,Mt.prototype.get=Or,Mt.prototype.has=$t,Mt.prototype.set=Qi;function ms(E,j){var B=Qr(E)||Hn(E)?st(E.length,String):[],ne=B.length,Ue=!!ne;for(var Se in E)Ot.call(E,Se)&&!(Ue&&(Se=="length"||Va(Se,ne)))&&B.push(Se);return B}function xr(E,j,B){var ne=E[j];(!(Ot.call(E,j)&&Yr(ne,B))||B===void 0&&!(j in E))&&(E[j]=B)}function qn(E,j){for(var B=E.length;B--;)if(Yr(E[B][0],j))return B;return-1}function rr(E,j){return E&&gi(j,$s(j),E)}function Hs(E,j,B,ne,Ue,Se,Qe){var Je;if(ne&&(Je=Se?ne(E,Ue,Se,Qe):ne(E)),Je!==void 0)return Je;if(!Ze(E))return E;var Et=Qr(E);if(Et){if(Je=Zi(E),!j)return pi(E,Je)}else{var tt=kr(E),Rt=tt==v||tt==b;if(ar(E))return Pt(E,j);if(tt==S||tt==l||Rt&&!Se){if(vt(E))return Se?E:{};if(Je=sr(Rt?{}:E),!j)return Wi(E,rr(Je,E))}else{if(!be[tt])return Se?E:{};Je=yi(E,tt,Hs,j)}}Qe||(Qe=new Mt);var hn=Qe.get(E);if(hn)return hn;if(Qe.set(E,Je),!Et)var Ut=B?gs(E):$s(E);return ke(Ut||E,function(Yt,an){Ut&&(an=Yt,Yt=E[an]),xr(Je,an,Hs(Yt,j,B,ne,an,E,Qe))}),Je}function Xi(E){return Ze(E)?Fi(E):{}}function Ua(E,j,B){var ne=j(E);return Qr(E)?ne:We(ne,B(E))}function mi(E){return Cr.call(E)}function Bn(E){if(!Ze(E)||vi(E))return!1;var j=On(E)||vt(E)?zi:ue;return j.test(un(E))}function Gt(E){if(!ir(E))return Dt(E);var j=[];for(var B in Object(E))Ot.call(E,B)&&B!="constructor"&&j.push(B);return j}function Pt(E,j){if(j)return E.slice();var B=new E.constructor(E.length);return E.copy(B),B}function Dr(E){var j=new E.constructor(E.byteLength);return new Hi(j).set(new Hi(E)),j}function Kr(E,j){var B=j?Dr(E.buffer):E.buffer;return new E.constructor(B,E.byteOffset,E.byteLength)}function ft(E,j,B){var ne=j?B(nn(E),!0):nn(E);return et(ne,De,new E.constructor)}function ps(E){var j=new E.constructor(E.source,ee.exec(E));return j.lastIndex=E.lastIndex,j}function Lr(E,j,B){var ne=j?B(hi(E),!0):hi(E);return et(ne,je,new E.constructor)}function Fs(E){return ds?Object(ds.call(E)):{}}function jn(E,j){var B=j?Dr(E.buffer):E.buffer;return new E.constructor(B,E.byteOffset,E.length)}function pi(E,j){var B=-1,ne=E.length;for(j||(j=Array(ne));++B<ne;)j[B]=E[B];return j}function gi(E,j,B,ne){B||(B={});for(var Ue=-1,Se=j.length;++Ue<Se;){var Qe=j[Ue],Je=void 0;xr(B,Qe,Je===void 0?E[Qe]:Je)}return B}function Wi(E,j){return gi(E,Kt(E),j)}function gs(E){return Ua(E,$s,Kt)}function ys(E,j){var B=E.__data__;return vs(j)?B[typeof j=="string"?"string":"hash"]:B.map}function yn(E,j){var B=ht(E,j);return Bn(B)?B:void 0}var Kt=Zt?Hr(Zt,Object):Gs,kr=mi;(Bs&&kr(new Bs(new ArrayBuffer(1)))!=ve||Rr&&kr(new Rr)!=_||er&&kr(er.resolve())!=O||Pn&&kr(new Pn)!=U||$r&&kr(new $r)!=Q)&&(kr=function(E){var j=Cr.call(E),B=j==S?E.constructor:void 0,ne=B?un(B):void 0;if(ne)switch(ne){case tr:return ve;case In:return _;case Un:return O;case Gi:return U;case di:return Q}return j});function Zi(E){var j=E.length,B=E.constructor(j);return j&&typeof E[0]=="string"&&Ot.call(E,"index")&&(B.index=E.index,B.input=E.input),B}function sr(E){return typeof E.constructor=="function"&&!ir(E)?Xi(Mn(E)):{}}function yi(E,j,B,ne){var Ue=E.constructor;switch(j){case ie:return Dr(E);case h:case f:return new Ue(+E);case ve:return Kr(E,ne);case L:case k:case V:case $:case N:case P:case C:case ge:case pe:return jn(E,ne);case _:return ft(E,ne,B);case T:case z:return new Ue(E);case R:return ps(E);case U:return Lr(E,ne,B);case Y:return Fs(E)}}function Va(E,j){return j=j??a,!!j&&(typeof E=="number"||xe.test(E))&&E>-1&&E%1==0&&E<j}function vs(E){var j=typeof E;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?E!=="__proto__":E===null}function vi(E){return!!ka&&ka in E}function ir(E){var j=E&&E.constructor,B=typeof j=="function"&&j.prototype||jt;return E===B}function un(E){if(E!=null){try{return Bi.call(E)}catch{}try{return E+""}catch{}}return""}function zn(E){return Hs(E,!0,!0)}function Yr(E,j){return E===j||E!==E&&j!==j}function Hn(E){return bs(E)&&Ot.call(E,"callee")&&(!$i.call(E,"callee")||Cr.call(E)==l)}var Qr=Array.isArray;function Xr(E){return E!=null&&xs(E.length)&&!On(E)}function bs(E){return _r(E)&&Xr(E)}var ar=Sn||Ji;function On(E){var j=Ze(E)?Cr.call(E):"";return j==v||j==b}function xs(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=a}function Ze(E){var j=typeof E;return!!E&&(j=="object"||j=="function")}function _r(E){return!!E&&typeof E=="object"}function $s(E){return Xr(E)?ms(E):Gt(E)}function Gs(){return[]}function Ji(){return!1}n.exports=zn})(Wu,Wu.exports)),Wu.exports}var Zu={exports:{}};Zu.exports;var Ww;function e2(){return Ww||(Ww=1,(function(n,e){var t=200,r="__lodash_hash_undefined__",a=1,l=2,c=9007199254740991,h="[object Arguments]",f="[object Array]",p="[object AsyncFunction]",v="[object Boolean]",b="[object Date]",_="[object Error]",T="[object Function]",S="[object GeneratorFunction]",O="[object Map]",R="[object Number]",U="[object Null]",z="[object Object]",Y="[object Promise]",Q="[object Proxy]",ie="[object RegExp]",ve="[object Set]",L="[object String]",k="[object Symbol]",V="[object Undefined]",$="[object WeakMap]",N="[object ArrayBuffer]",P="[object DataView]",C="[object Float32Array]",ge="[object Float64Array]",pe="[object Int8Array]",F="[object Int16Array]",ee="[object Int32Array]",ue="[object Uint8Array]",xe="[object Uint8ClampedArray]",be="[object Uint16Array]",q="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,de=/^\[object .+?Constructor\]$/,me=/^(?:0|[1-9]\d*)$/,ye={};ye[C]=ye[ge]=ye[pe]=ye[F]=ye[ee]=ye[ue]=ye[xe]=ye[be]=ye[q]=!0,ye[h]=ye[f]=ye[N]=ye[v]=ye[P]=ye[b]=ye[_]=ye[T]=ye[O]=ye[R]=ye[z]=ye[ie]=ye[ve]=ye[L]=ye[$]=!1;var Ae=typeof yo=="object"&&yo&&yo.Object===Object&&yo,De=typeof self=="object"&&self&&self.Object===Object&&self,je=Ae||De||Function("return this")(),ke=e&&!e.nodeType&&e,We=ke&&!0&&n&&!n.nodeType&&n,et=We&&We.exports===ke,st=et&&Ae.process,ht=(function(){try{return st&&st.binding&&st.binding("util")}catch{}})(),vt=ht&&ht.isTypedArray;function nn(E,j){for(var B=-1,ne=E==null?0:E.length,Ue=0,Se=[];++B<ne;){var Qe=E[B];j(Qe,B,E)&&(Se[Ue++]=Qe)}return Se}function Hr(E,j){for(var B=-1,ne=j.length,Ue=E.length;++B<ne;)E[Ue+B]=j[B];return E}function hi(E,j){for(var B=-1,ne=E==null?0:E.length;++B<ne;)if(j(E[B],B,E))return!0;return!1}function qi(E,j){for(var B=-1,ne=Array(E);++B<E;)ne[B]=j(B);return ne}function Ht(E){return function(j){return E(j)}}function jt(E,j){return E.has(j)}function Nr(E,j){return E?.[j]}function ka(E){var j=-1,B=Array(E.size);return E.forEach(function(ne,Ue){B[++j]=[Ue,ne]}),B}function Bi(E,j){return function(B){return E(j(B))}}function Ot(E){var j=-1,B=Array(E.size);return E.forEach(function(ne){B[++j]=ne}),B}var Cr=Array.prototype,zi=Function.prototype,Fr=Object.prototype,pr=je["__core-js_shared__"],Hi=zi.toString,Mn=Fr.hasOwnProperty,Fi=(function(){var E=/[^.]+$/.exec(pr&&pr.keys&&pr.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""})(),$i=Fr.toString,gr=RegExp("^"+Hi.call(Mn).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zt=et?je.Buffer:void 0,Sn=je.Symbol,Dt=je.Uint8Array,Bs=Fr.propertyIsEnumerable,Rr=Cr.splice,er=Sn?Sn.toStringTag:void 0,Pn=Object.getOwnPropertySymbols,$r=Zt?Zt.isBuffer:void 0,At=Bi(Object.keys,Object),tr=Kt(je,"DataView"),In=Kt(je,"Map"),Un=Kt(je,"Promise"),Gi=Kt(je,"Set"),di=Kt(je,"WeakMap"),Nn=Kt(Object,"create"),ds=un(tr),Gr=un(In),zs=un(Un),Ki=un(Gi),Yi=un(di),fs=Sn?Sn.prototype:void 0,yr=fs?fs.valueOf:void 0;function rn(E){var j=-1,B=E==null?0:E.length;for(this.clear();++j<B;){var ne=E[j];this.set(ne[0],ne[1])}}function vr(){this.__data__=Nn?Nn(null):{},this.size=0}function br(E){var j=this.has(E)&&delete this.__data__[E];return this.size-=j?1:0,j}function Ft(E){var j=this.__data__;if(Nn){var B=j[E];return B===r?void 0:B}return Mn.call(j,E)?j[E]:void 0}function sn(E){var j=this.__data__;return Nn?j[E]!==void 0:Mn.call(j,E)}function Ir(E,j){var B=this.__data__;return this.size+=this.has(E)?0:1,B[E]=Nn&&j===void 0?r:j,this}rn.prototype.clear=vr,rn.prototype.delete=br,rn.prototype.get=Ft,rn.prototype.has=sn,rn.prototype.set=Ir;function Jt(E){var j=-1,B=E==null?0:E.length;for(this.clear();++j<B;){var ne=E[j];this.set(ne[0],ne[1])}}function Bo(){this.__data__=[],this.size=0}function Ma(E){var j=this.__data__,B=Pt(j,E);if(B<0)return!1;var ne=j.length-1;return B==ne?j.pop():Rr.call(j,B,1),--this.size,!0}function Pa(E){var j=this.__data__,B=Pt(j,E);return B<0?void 0:j[B][1]}function jr(E){return Pt(this.__data__,E)>-1}function fi(E,j){var B=this.__data__,ne=Pt(B,E);return ne<0?(++this.size,B.push([E,j])):B[ne][1]=j,this}Jt.prototype.clear=Bo,Jt.prototype.delete=Ma,Jt.prototype.get=Pa,Jt.prototype.has=jr,Jt.prototype.set=fi;function Mt(E){var j=-1,B=E==null?0:E.length;for(this.clear();++j<B;){var ne=E[j];this.set(ne[0],ne[1])}}function nr(){this.size=0,this.__data__={hash:new rn,map:new(In||Jt),string:new rn}}function Vn(E){var j=yn(this,E).delete(E);return this.size-=j?1:0,j}function Or(E){return yn(this,E).get(E)}function $t(E){return yn(this,E).has(E)}function Qi(E,j){var B=yn(this,E),ne=B.size;return B.set(E,j),this.size+=B.size==ne?0:1,this}Mt.prototype.clear=nr,Mt.prototype.delete=Vn,Mt.prototype.get=Or,Mt.prototype.has=$t,Mt.prototype.set=Qi;function ms(E){var j=-1,B=E==null?0:E.length;for(this.__data__=new Mt;++j<B;)this.add(E[j])}function xr(E){return this.__data__.set(E,r),this}function qn(E){return this.__data__.has(E)}ms.prototype.add=ms.prototype.push=xr,ms.prototype.has=qn;function rr(E){var j=this.__data__=new Jt(E);this.size=j.size}function Hs(){this.__data__=new Jt,this.size=0}function Xi(E){var j=this.__data__,B=j.delete(E);return this.size=j.size,B}function Ua(E){return this.__data__.get(E)}function mi(E){return this.__data__.has(E)}function Bn(E,j){var B=this.__data__;if(B instanceof Jt){var ne=B.__data__;if(!In||ne.length<t-1)return ne.push([E,j]),this.size=++B.size,this;B=this.__data__=new Mt(ne)}return B.set(E,j),this.size=B.size,this}rr.prototype.clear=Hs,rr.prototype.delete=Xi,rr.prototype.get=Ua,rr.prototype.has=mi,rr.prototype.set=Bn;function Gt(E,j){var B=Hn(E),ne=!B&&Yr(E),Ue=!B&&!ne&&Xr(E),Se=!B&&!ne&&!Ue&&_r(E),Qe=B||ne||Ue||Se,Je=Qe?qi(E.length,String):[],Et=Je.length;for(var tt in E)Mn.call(E,tt)&&!(Qe&&(tt=="length"||Ue&&(tt=="offset"||tt=="parent")||Se&&(tt=="buffer"||tt=="byteLength"||tt=="byteOffset")||yi(tt,Et)))&&Je.push(tt);return Je}function Pt(E,j){for(var B=E.length;B--;)if(zn(E[B][0],j))return B;return-1}function Dr(E,j,B){var ne=j(E);return Hn(E)?ne:Hr(ne,B(E))}function Kr(E){return E==null?E===void 0?V:U:er&&er in Object(E)?kr(E):ir(E)}function ft(E){return Ze(E)&&Kr(E)==h}function ps(E,j,B,ne,Ue){return E===j?!0:E==null||j==null||!Ze(E)&&!Ze(j)?E!==E&&j!==j:Lr(E,j,B,ne,ps,Ue)}function Lr(E,j,B,ne,Ue,Se){var Qe=Hn(E),Je=Hn(j),Et=Qe?f:sr(E),tt=Je?f:sr(j);Et=Et==h?z:Et,tt=tt==h?z:tt;var Rt=Et==z,hn=tt==z,Ut=Et==tt;if(Ut&&Xr(E)){if(!Xr(j))return!1;Qe=!0,Rt=!1}if(Ut&&!Rt)return Se||(Se=new rr),Qe||_r(E)?gi(E,j,B,ne,Ue,Se):Wi(E,j,Et,B,ne,Ue,Se);if(!(B&a)){var Yt=Rt&&Mn.call(E,"__wrapped__"),an=hn&&Mn.call(j,"__wrapped__");if(Yt||an){var Wr=Yt?E.value():E,Fn=an?j.value():j;return Se||(Se=new rr),Ue(Wr,Fn,B,ne,Se)}}return Ut?(Se||(Se=new rr),gs(E,j,B,ne,Ue,Se)):!1}function Fs(E){if(!xs(E)||vs(E))return!1;var j=ar(E)?gr:de;return j.test(un(E))}function jn(E){return Ze(E)&&On(E.length)&&!!ye[Kr(E)]}function pi(E){if(!vi(E))return At(E);var j=[];for(var B in Object(E))Mn.call(E,B)&&B!="constructor"&&j.push(B);return j}function gi(E,j,B,ne,Ue,Se){var Qe=B&a,Je=E.length,Et=j.length;if(Je!=Et&&!(Qe&&Et>Je))return!1;var tt=Se.get(E);if(tt&&Se.get(j))return tt==j;var Rt=-1,hn=!0,Ut=B&l?new ms:void 0;for(Se.set(E,j),Se.set(j,E);++Rt<Je;){var Yt=E[Rt],an=j[Rt];if(ne)var Wr=Qe?ne(an,Yt,Rt,j,E,Se):ne(Yt,an,Rt,E,j,Se);if(Wr!==void 0){if(Wr)continue;hn=!1;break}if(Ut){if(!hi(j,function(Fn,Zr){if(!jt(Ut,Zr)&&(Yt===Fn||Ue(Yt,Fn,B,ne,Se)))return Ut.push(Zr)})){hn=!1;break}}else if(!(Yt===an||Ue(Yt,an,B,ne,Se))){hn=!1;break}}return Se.delete(E),Se.delete(j),hn}function Wi(E,j,B,ne,Ue,Se,Qe){switch(B){case P:if(E.byteLength!=j.byteLength||E.byteOffset!=j.byteOffset)return!1;E=E.buffer,j=j.buffer;case N:return!(E.byteLength!=j.byteLength||!Se(new Dt(E),new Dt(j)));case v:case b:case R:return zn(+E,+j);case _:return E.name==j.name&&E.message==j.message;case ie:case L:return E==j+"";case O:var Je=ka;case ve:var Et=ne&a;if(Je||(Je=Ot),E.size!=j.size&&!Et)return!1;var tt=Qe.get(E);if(tt)return tt==j;ne|=l,Qe.set(E,j);var Rt=gi(Je(E),Je(j),ne,Ue,Se,Qe);return Qe.delete(E),Rt;case k:if(yr)return yr.call(E)==yr.call(j)}return!1}function gs(E,j,B,ne,Ue,Se){var Qe=B&a,Je=ys(E),Et=Je.length,tt=ys(j),Rt=tt.length;if(Et!=Rt&&!Qe)return!1;for(var hn=Et;hn--;){var Ut=Je[hn];if(!(Qe?Ut in j:Mn.call(j,Ut)))return!1}var Yt=Se.get(E);if(Yt&&Se.get(j))return Yt==j;var an=!0;Se.set(E,j),Se.set(j,E);for(var Wr=Qe;++hn<Et;){Ut=Je[hn];var Fn=E[Ut],Zr=j[Ut];if(ne)var zo=Qe?ne(Zr,Fn,Ut,j,E,Se):ne(Fn,Zr,Ut,E,j,Se);if(!(zo===void 0?Fn===Zr||Ue(Fn,Zr,B,ne,Se):zo)){an=!1;break}Wr||(Wr=Ut=="constructor")}if(an&&!Wr){var Ks=E.constructor,ea=j.constructor;Ks!=ea&&"constructor"in E&&"constructor"in j&&!(typeof Ks=="function"&&Ks instanceof Ks&&typeof ea=="function"&&ea instanceof ea)&&(an=!1)}return Se.delete(E),Se.delete(j),an}function ys(E){return Dr(E,$s,Zi)}function yn(E,j){var B=E.__data__;return Va(j)?B[typeof j=="string"?"string":"hash"]:B.map}function Kt(E,j){var B=Nr(E,j);return Fs(B)?B:void 0}function kr(E){var j=Mn.call(E,er),B=E[er];try{E[er]=void 0;var ne=!0}catch{}var Ue=$i.call(E);return ne&&(j?E[er]=B:delete E[er]),Ue}var Zi=Pn?function(E){return E==null?[]:(E=Object(E),nn(Pn(E),function(j){return Bs.call(E,j)}))}:Gs,sr=Kr;(tr&&sr(new tr(new ArrayBuffer(1)))!=P||In&&sr(new In)!=O||Un&&sr(Un.resolve())!=Y||Gi&&sr(new Gi)!=ve||di&&sr(new di)!=$)&&(sr=function(E){var j=Kr(E),B=j==z?E.constructor:void 0,ne=B?un(B):"";if(ne)switch(ne){case ds:return P;case Gr:return O;case zs:return Y;case Ki:return ve;case Yi:return $}return j});function yi(E,j){return j=j??c,!!j&&(typeof E=="number"||me.test(E))&&E>-1&&E%1==0&&E<j}function Va(E){var j=typeof E;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?E!=="__proto__":E===null}function vs(E){return!!Fi&&Fi in E}function vi(E){var j=E&&E.constructor,B=typeof j=="function"&&j.prototype||Fr;return E===B}function ir(E){return $i.call(E)}function un(E){if(E!=null){try{return Hi.call(E)}catch{}try{return E+""}catch{}}return""}function zn(E,j){return E===j||E!==E&&j!==j}var Yr=ft((function(){return arguments})())?ft:function(E){return Ze(E)&&Mn.call(E,"callee")&&!Bs.call(E,"callee")},Hn=Array.isArray;function Qr(E){return E!=null&&On(E.length)&&!ar(E)}var Xr=$r||Ji;function bs(E,j){return ps(E,j)}function ar(E){if(!xs(E))return!1;var j=Kr(E);return j==T||j==S||j==p||j==Q}function On(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=c}function xs(E){var j=typeof E;return E!=null&&(j=="object"||j=="function")}function Ze(E){return E!=null&&typeof E=="object"}var _r=vt?Ht(vt):jn;function $s(E){return Qr(E)?Gt(E):pi(E)}function Gs(){return[]}function Ji(){return!1}n.exports=bs})(Zu,Zu.exports)),Zu.exports}var mf={},Zw;function jP(){if(Zw)return mf;Zw=1,Object.defineProperty(mf,"__esModule",{value:!0});const n=JN(),e=e2();var t;return(function(r){function a(f={},p={},v=!1){typeof f!="object"&&(f={}),typeof p!="object"&&(p={});let b=n(p);v||(b=Object.keys(b).reduce((_,T)=>(b[T]!=null&&(_[T]=b[T]),_),{}));for(const _ in f)f[_]!==void 0&&p[_]===void 0&&(b[_]=f[_]);return Object.keys(b).length>0?b:void 0}r.compose=a;function l(f={},p={}){typeof f!="object"&&(f={}),typeof p!="object"&&(p={});const v=Object.keys(f).concat(Object.keys(p)).reduce((b,_)=>(e(f[_],p[_])||(b[_]=p[_]===void 0?null:p[_]),b),{});return Object.keys(v).length>0?v:void 0}r.diff=l;function c(f={},p={}){f=f||{};const v=Object.keys(p).reduce((b,_)=>(p[_]!==f[_]&&f[_]!==void 0&&(b[_]=p[_]),b),{});return Object.keys(f).reduce((b,_)=>(f[_]!==p[_]&&p[_]===void 0&&(b[_]=null),b),v)}r.invert=c;function h(f,p,v=!1){if(typeof f!="object")return p;if(typeof p!="object")return;if(!v)return p;const b=Object.keys(p).reduce((_,T)=>(f[T]===void 0&&(_[T]=p[T]),_),{});return Object.keys(b).length>0?b:void 0}r.transform=h})(t||(t={})),mf.default=t,mf}var pf={},Jw;function t2(){if(Jw)return pf;Jw=1,Object.defineProperty(pf,"__esModule",{value:!0});var n;return(function(e){function t(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=t})(n||(n={})),pf.default=n,pf}var gf={},eT;function OP(){if(eT)return gf;eT=1,Object.defineProperty(gf,"__esModule",{value:!0});const n=t2();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const a=this.ops[this.index];if(a){const l=this.offset,c=n.default.length(a);if(r>=c-l?(r=c-l,this.index+=1,this.offset=0):this.offset+=r,typeof a.delete=="number")return{delete:r};{const h={};return a.attributes&&(h.attributes=a.attributes),typeof a.retain=="number"?h.retain=r:typeof a.retain=="object"&&a.retain!==null?h.retain=a.retain:typeof a.insert=="string"?h.insert=a.insert.substr(l,r):h.insert=a.insert,h}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?n.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,a=this.index,l=this.next(),c=this.ops.slice(this.index);return this.offset=r,this.index=a,[l].concat(c)}}else return[]}}return gf.default=e,gf}var tT;function DP(){return tT||(tT=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const t=IP(),r=JN(),a=e2(),l=jP();e.AttributeMap=l.default;const c=t2();e.Op=c.default;const h=OP();e.OpIterator=h.default;const f="\0",p=(b,_)=>{if(typeof b!="object"||b===null)throw new Error(`cannot retain a ${typeof b}`);if(typeof _!="object"||_===null)throw new Error(`cannot retain a ${typeof _}`);const T=Object.keys(b)[0];if(!T||T!==Object.keys(_)[0])throw new Error(`embed types not matched: ${T} != ${Object.keys(_)[0]}`);return[T,b[T],_[T]]};class v{constructor(_){Array.isArray(_)?this.ops=_:_!=null&&Array.isArray(_.ops)?this.ops=_.ops:this.ops=[]}static registerEmbed(_,T){this.handlers[_]=T}static unregisterEmbed(_){delete this.handlers[_]}static getHandler(_){const T=this.handlers[_];if(!T)throw new Error(`no handlers for embed type "${_}"`);return T}insert(_,T){const S={};return typeof _=="string"&&_.length===0?this:(S.insert=_,T!=null&&typeof T=="object"&&Object.keys(T).length>0&&(S.attributes=T),this.push(S))}delete(_){return _<=0?this:this.push({delete:_})}retain(_,T){if(typeof _=="number"&&_<=0)return this;const S={retain:_};return T!=null&&typeof T=="object"&&Object.keys(T).length>0&&(S.attributes=T),this.push(S)}push(_){let T=this.ops.length,S=this.ops[T-1];if(_=r(_),typeof S=="object"){if(typeof _.delete=="number"&&typeof S.delete=="number")return this.ops[T-1]={delete:S.delete+_.delete},this;if(typeof S.delete=="number"&&_.insert!=null&&(T-=1,S=this.ops[T-1],typeof S!="object"))return this.ops.unshift(_),this;if(a(_.attributes,S.attributes)){if(typeof _.insert=="string"&&typeof S.insert=="string")return this.ops[T-1]={insert:S.insert+_.insert},typeof _.attributes=="object"&&(this.ops[T-1].attributes=_.attributes),this;if(typeof _.retain=="number"&&typeof S.retain=="number")return this.ops[T-1]={retain:S.retain+_.retain},typeof _.attributes=="object"&&(this.ops[T-1].attributes=_.attributes),this}}return T===this.ops.length?this.ops.push(_):this.ops.splice(T,0,_),this}chop(){const _=this.ops[this.ops.length-1];return _&&typeof _.retain=="number"&&!_.attributes&&this.ops.pop(),this}filter(_){return this.ops.filter(_)}forEach(_){this.ops.forEach(_)}map(_){return this.ops.map(_)}partition(_){const T=[],S=[];return this.forEach(O=>{(_(O)?T:S).push(O)}),[T,S]}reduce(_,T){return this.ops.reduce(_,T)}changeLength(){return this.reduce((_,T)=>T.insert?_+c.default.length(T):T.delete?_-T.delete:_,0)}length(){return this.reduce((_,T)=>_+c.default.length(T),0)}slice(_=0,T=1/0){const S=[],O=new h.default(this.ops);let R=0;for(;R<T&&O.hasNext();){let U;R<_?U=O.next(_-R):(U=O.next(T-R),S.push(U)),R+=c.default.length(U)}return new v(S)}compose(_){const T=new h.default(this.ops),S=new h.default(_.ops),O=[],R=S.peek();if(R!=null&&typeof R.retain=="number"&&R.attributes==null){let z=R.retain;for(;T.peekType()==="insert"&&T.peekLength()<=z;)z-=T.peekLength(),O.push(T.next());R.retain-z>0&&S.next(R.retain-z)}const U=new v(O);for(;T.hasNext()||S.hasNext();)if(S.peekType()==="insert")U.push(S.next());else if(T.peekType()==="delete")U.push(T.next());else{const z=Math.min(T.peekLength(),S.peekLength()),Y=T.next(z),Q=S.next(z);if(Q.retain){const ie={};if(typeof Y.retain=="number")ie.retain=typeof Q.retain=="number"?z:Q.retain;else if(typeof Q.retain=="number")Y.retain==null?ie.insert=Y.insert:ie.retain=Y.retain;else{const L=Y.retain==null?"insert":"retain",[k,V,$]=p(Y[L],Q.retain),N=v.getHandler(k);ie[L]={[k]:N.compose(V,$,L==="retain")}}const ve=l.default.compose(Y.attributes,Q.attributes,typeof Y.retain=="number");if(ve&&(ie.attributes=ve),U.push(ie),!S.hasNext()&&a(U.ops[U.ops.length-1],ie)){const L=new v(T.rest());return U.concat(L).chop()}}else typeof Q.delete=="number"&&(typeof Y.retain=="number"||typeof Y.retain=="object"&&Y.retain!==null)&&U.push(Q)}return U.chop()}concat(_){const T=new v(this.ops.slice());return _.ops.length>0&&(T.push(_.ops[0]),T.ops=T.ops.concat(_.ops.slice(1))),T}diff(_,T){if(this.ops===_.ops)return new v;const S=[this,_].map(Y=>Y.map(Q=>{if(Q.insert!=null)return typeof Q.insert=="string"?Q.insert:f;const ie=Y===_?"on":"with";throw new Error("diff() called "+ie+" non-document")}).join("")),O=new v,R=t(S[0],S[1],T,!0),U=new h.default(this.ops),z=new h.default(_.ops);return R.forEach(Y=>{let Q=Y[1].length;for(;Q>0;){let ie=0;switch(Y[0]){case t.INSERT:ie=Math.min(z.peekLength(),Q),O.push(z.next(ie));break;case t.DELETE:ie=Math.min(Q,U.peekLength()),U.next(ie),O.delete(ie);break;case t.EQUAL:ie=Math.min(U.peekLength(),z.peekLength(),Q);const ve=U.next(ie),L=z.next(ie);a(ve.insert,L.insert)?O.retain(ie,l.default.diff(ve.attributes,L.attributes)):O.push(L).delete(ie);break}Q-=ie}}),O.chop()}eachLine(_,T=`
`){const S=new h.default(this.ops);let O=new v,R=0;for(;S.hasNext();){if(S.peekType()!=="insert")return;const U=S.peek(),z=c.default.length(U)-S.peekLength(),Y=typeof U.insert=="string"?U.insert.indexOf(T,z)-z:-1;if(Y<0)O.push(S.next());else if(Y>0)O.push(S.next(Y));else{if(_(O,S.next(1).attributes||{},R)===!1)return;R+=1,O=new v}}O.length()>0&&_(O,{},R)}invert(_){const T=new v;return this.reduce((S,O)=>{if(O.insert)T.delete(c.default.length(O));else{if(typeof O.retain=="number"&&O.attributes==null)return T.retain(O.retain),S+O.retain;if(O.delete||typeof O.retain=="number"){const R=O.delete||O.retain;return _.slice(S,S+R).forEach(z=>{O.delete?T.push(z):O.retain&&O.attributes&&T.retain(c.default.length(z),l.default.invert(O.attributes,z.attributes))}),S+R}else if(typeof O.retain=="object"&&O.retain!==null){const R=_.slice(S,S+1),U=new h.default(R.ops).next(),[z,Y,Q]=p(O.retain,U.insert),ie=v.getHandler(z);return T.retain({[z]:ie.invert(Y,Q)},l.default.invert(O.attributes,U.attributes)),S+1}}return S},0),T.chop()}transform(_,T=!1){if(T=!!T,typeof _=="number")return this.transformPosition(_,T);const S=_,O=new h.default(this.ops),R=new h.default(S.ops),U=new v;for(;O.hasNext()||R.hasNext();)if(O.peekType()==="insert"&&(T||R.peekType()!=="insert"))U.retain(c.default.length(O.next()));else if(R.peekType()==="insert")U.push(R.next());else{const z=Math.min(O.peekLength(),R.peekLength()),Y=O.next(z),Q=R.next(z);if(Y.delete)continue;if(Q.delete)U.push(Q);else{const ie=Y.retain,ve=Q.retain;let L=typeof ve=="object"&&ve!==null?ve:z;if(typeof ie=="object"&&ie!==null&&typeof ve=="object"&&ve!==null){const k=Object.keys(ie)[0];if(k===Object.keys(ve)[0]){const V=v.getHandler(k);V&&(L={[k]:V.transform(ie[k],ve[k],T)})}}U.retain(L,l.default.transform(Y.attributes,Q.attributes,T))}}return U.chop()}transformPosition(_,T=!1){T=!!T;const S=new h.default(this.ops);let O=0;for(;S.hasNext()&&O<=_;){const R=S.peekLength(),U=S.peekType();if(S.next(),U==="delete"){_-=Math.min(R,_-O);continue}else U==="insert"&&(O<_||!T)&&(_+=R);O+=R}return _}}v.Op=c.default,v.OpIterator=h.default,v.AttributeMap=l.default,v.handlers={},e.default=v,n.exports=v,n.exports.default=v})(ff,ff.exports)),ff.exports}var ks=DP();const Ie=Vc(ks);class ui extends hs{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}ui.blotName="break";ui.tagName="BR";let li=class extends lm{};const LP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Fm(n){return n.replace(/[&<>"']/g,e=>LP[e])}class Tr extends Uv{static allowedChildren=[Tr,ui,hs,li];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,t){const r=Tr.order.indexOf(e),a=Tr.order.indexOf(t);return r>=0||a>=0?r-a:e===t?0:e<t?-1:1}formatAt(e,t,r,a){if(Tr.compare(this.statics.blotName,r)<0&&this.scroll.query(r,Oe.BLOT)){const l=this.isolate(e,t);a&&l.wrap(r,a)}else super.formatAt(e,t,r,a)}optimize(e){if(super.optimize(e),this.parent instanceof Tr&&Tr.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}const nT=1;class Zn extends _h{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=n2(this)),this.cache.delta}deleteAt(e,t){super.deleteAt(e,t),this.cache={}}formatAt(e,t,r,a){t<=0||(this.scroll.query(r,Oe.BLOCK)?e+t===this.length()&&this.format(r,a):super.formatAt(e,Math.min(t,this.length()-e-1),r,a),this.cache={})}insertAt(e,t,r){if(r!=null){super.insertAt(e,t,r),this.cache={};return}if(t.length===0)return;const a=t.split(`
`),l=a.shift();l.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let c=this;a.reduce((h,f)=>(c=c.split(h,!0),c.insertAt(0,f),f.length),e+l.length)}insertBefore(e,t){const{head:r}=this.children;super.insertBefore(e,t),r instanceof ui&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+nT),this.cache.length}moveChildren(e,t){super.moveChildren(e,t),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t&&(e===0||e>=this.length()-nT)){const a=this.clone();return e===0?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}const r=super.split(e,t);return this.cache={},r}}Zn.blotName="block";Zn.tagName="P";Zn.defaultChild=ui;Zn.allowedChildren=[ui,Tr,hs,li];class Ls extends hs{attach(){super.attach(),this.attributes=new zm(this.domNode)}delta(){return new Ie().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){const r=this.scroll.query(e,Oe.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,t)}formatAt(e,t,r,a){this.format(r,a)}insertAt(e,t,r){if(r!=null){super.insertAt(e,t,r);return}const a=t.split(`
`),l=a.pop(),c=a.map(f=>{const p=this.scroll.create(Zn.blotName);return p.insertAt(0,f),p}),h=this.split(e);c.forEach(f=>{this.parent.insertBefore(f,h)}),l&&this.parent.insertBefore(this.scroll.create("text",l),h)}}Ls.scope=Oe.BLOCK_BLOT;function n2(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(hr).reduce((t,r)=>r.length()===0?t:t.insert(r.value(),js(r,{},e)),new Ie).insert(`
`,js(n))}function js(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(e={...e,...n.formats()},t&&delete e["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?e:js(n.parent,e,t)}class ti extends hs{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,t,r){super(e,t),this.selection=r,this.textNode=document.createTextNode(ti.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let r=this,a=0;for(;r!=null&&r.statics.scope!==Oe.BLOCK_BLOT;)a+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=ti.CONTENTS.length,r.optimize(),r.formatAt(a,ti.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const t=this.prev instanceof li?this.prev:null,r=t?t.length():0,a=this.next instanceof li?this.next:null,l=a?a.text:"",{textNode:c}=this,h=c.data.split(ti.CONTENTS).join("");c.data=ti.CONTENTS;let f;if(t)f=t,(h||a)&&(t.insertAt(t.length(),h+l),a&&a.remove());else if(a)f=a,a.insertAt(0,h);else{const p=document.createTextNode(h);f=this.scroll.create(p),this.parent.insertBefore(f,this)}if(this.remove(),e){const p=(_,T)=>t&&_===t.domNode?T:_===c?r+T-1:a&&_===a.domNode?r+h.length+T:null,v=p(e.start.node,e.start.offset),b=p(e.end.node,e.end.offset);if(v!==null&&b!==null)return{startNode:f.domNode,startOffset:v,endNode:f.domNode,endOffset:b}}return null}update(e,t){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(t.range=r)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=ti.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}}var by={exports:{}},rT;function kP(){return rT||(rT=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function a(f,p,v){this.fn=f,this.context=p,this.once=v||!1}function l(f,p,v,b,_){if(typeof v!="function")throw new TypeError("The listener must be a function");var T=new a(v,b||f,_),S=t?t+p:p;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],T]:f._events[S].push(T):(f._events[S]=T,f._eventsCount++),f}function c(f,p){--f._eventsCount===0?f._events=new r:delete f._events[p]}function h(){this._events=new r,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],v,b;if(this._eventsCount===0)return p;for(b in v=this._events)e.call(v,b)&&p.push(t?b.slice(1):b);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(v)):p},h.prototype.listeners=function(p){var v=t?t+p:p,b=this._events[v];if(!b)return[];if(b.fn)return[b.fn];for(var _=0,T=b.length,S=new Array(T);_<T;_++)S[_]=b[_].fn;return S},h.prototype.listenerCount=function(p){var v=t?t+p:p,b=this._events[v];return b?b.fn?1:b.length:0},h.prototype.emit=function(p,v,b,_,T,S){var O=t?t+p:p;if(!this._events[O])return!1;var R=this._events[O],U=arguments.length,z,Y;if(R.fn){switch(R.once&&this.removeListener(p,R.fn,void 0,!0),U){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,v),!0;case 3:return R.fn.call(R.context,v,b),!0;case 4:return R.fn.call(R.context,v,b,_),!0;case 5:return R.fn.call(R.context,v,b,_,T),!0;case 6:return R.fn.call(R.context,v,b,_,T,S),!0}for(Y=1,z=new Array(U-1);Y<U;Y++)z[Y-1]=arguments[Y];R.fn.apply(R.context,z)}else{var Q=R.length,ie;for(Y=0;Y<Q;Y++)switch(R[Y].once&&this.removeListener(p,R[Y].fn,void 0,!0),U){case 1:R[Y].fn.call(R[Y].context);break;case 2:R[Y].fn.call(R[Y].context,v);break;case 3:R[Y].fn.call(R[Y].context,v,b);break;case 4:R[Y].fn.call(R[Y].context,v,b,_);break;default:if(!z)for(ie=1,z=new Array(U-1);ie<U;ie++)z[ie-1]=arguments[ie];R[Y].fn.apply(R[Y].context,z)}}return!0},h.prototype.on=function(p,v,b){return l(this,p,v,b,!1)},h.prototype.once=function(p,v,b){return l(this,p,v,b,!0)},h.prototype.removeListener=function(p,v,b,_){var T=t?t+p:p;if(!this._events[T])return this;if(!v)return c(this,T),this;var S=this._events[T];if(S.fn)S.fn===v&&(!_||S.once)&&(!b||S.context===b)&&c(this,T);else{for(var O=0,R=[],U=S.length;O<U;O++)(S[O].fn!==v||_&&!S[O].once||b&&S[O].context!==b)&&R.push(S[O]);R.length?this._events[T]=R.length===1?R[0]:R:c(this,T)}return this},h.prototype.removeAllListeners=function(p){var v;return p?(v=t?t+p:p,this._events[v]&&c(this,v)):(this._events=new r,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=t,h.EventEmitter=h,n.exports=h})(by)),by.exports}var MP=kP();const PP=Vc(MP),b0=new WeakMap,x0=["error","warn","log","info"];let _0="warn";function r2(n){if(_0&&x0.indexOf(n)<=x0.indexOf(_0)){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];console[n](...t)}}function La(n){return x0.reduce((e,t)=>(e[t]=r2.bind(console,t,n),e),{})}La.level=n=>{_0=n};r2.level=La.level;const xy=La("quill:events"),UP=["selectionchange","mousedown","mouseup","click"];UP.forEach(n=>{document.addEventListener(n,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(a=>{const l=b0.get(a);l&&l.emitter&&l.emitter.handleDOM(...t)})})});class Ce extends PP{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",xy.error)}emit(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return xy.log.call(xy,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];(this.domListeners[e.type]||[]).forEach(l=>{let{node:c,handler:h}=l;(e.target===c||c.contains(e.target))&&h(e,...r)})}listenDOM(e,t,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:r})}}const _y=La("quill:selection");class bl{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}}class VP{constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new bl(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Ce.sources.USER),1)}),this.emitter.on(Ce.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(Ce.events.SCROLL_UPDATE,(a,l)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const c=l.some(h=>h.type==="characterData"||h.type==="childList"||h.type==="attributes"&&h.target===this.root);this.update(c?Ce.sources.SILENT:a)}catch{}})}),this.emitter.on(Ce.events.SCROLL_OPTIMIZE,(r,a)=>{if(a.range){const{startNode:l,startOffset:c,endNode:h,endOffset:f}=a.range;this.setNativeRange(l,c,h,f),this.update(Ce.sources.SILENT)}}),this.update(Ce.sources.SILENT)}handleComposition(){this.emitter.on(Ce.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Ce.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Ce.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,Oe.BLOCK))){if(r.start.node!==this.cursor.textNode){const a=this.scroll.find(r.start.node,!1);if(a==null)return;if(a instanceof hr){const l=a.split(r.start.offset);a.parent.insertBefore(this.cursor,l)}else a.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;let a,[l,c]=this.scroll.leaf(e);if(l==null)return null;if(t>0&&c===l.length()){const[v]=this.scroll.leaf(e+1);if(v){const[b]=this.scroll.line(e),[_]=this.scroll.line(e+1);b===_&&(l=v,c=0)}}[a,c]=l.position(c,!0);const h=document.createRange();if(t>0)return h.setStart(a,c),[l,c]=this.scroll.leaf(e+t),l==null?null:([a,c]=l.position(c,!0),h.setEnd(a,c),h.getBoundingClientRect());let f="left",p;if(a instanceof Text){if(!a.data.length)return null;c<a.data.length?(h.setStart(a,c),h.setEnd(a,c+1)):(h.setStart(a,c-1),h.setEnd(a,c),f="right"),p=h.getBoundingClientRect()}else{if(!(l.domNode instanceof Element))return null;p=l.domNode.getBoundingClientRect(),c>0&&(f="right")}return{bottom:p.top+p.height,height:p.height,left:p[f],right:p[f],top:p.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const t=e.getRangeAt(0);if(t==null)return null;const r=this.normalizeNative(t);return _y.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Ey(this.root,document.activeElement)}normalizedToRange(e){const t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);const r=t.map(c=>{const[h,f]=c,p=this.scroll.find(h,!0),v=p.offset(this.scroll);return f===0?v:p instanceof hr?v+p.index(h,f):v+p.length()}),a=Math.min(Math.max(...r),this.scroll.length()-1),l=Math.min(a,...r);return new bl(l,a-l)}normalizeNative(e){if(!Ey(this.root,e.startContainer)||!e.collapsed&&!Ey(this.root,e.endContainer))return null;const t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(r=>{let{node:a,offset:l}=r;for(;!(a instanceof Text)&&a.childNodes.length>0;)if(a.childNodes.length>l)a=a.childNodes[l],l=0;else if(a.childNodes.length===l)a=a.lastChild,a instanceof Text?l=a.data.length:a.childNodes.length>0?l=a.childNodes.length:l=a.childNodes.length+1;else break;r.node=a,r.offset=l}),t}rangeToNative(e){const t=this.scroll.length(),r=(a,l)=>{a=Math.min(t-1,a);const[c,h]=this.scroll.leaf(a);return c?c.position(h,l):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(_y.info("setNativeRange",e,t,r,a),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const c=document.getSelection();if(c!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:h}=this.getNativeRange()||{};if(h==null||l||e!==h.startContainer||t!==h.startOffset||r!==h.endContainer||a!==h.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(a=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const f=document.createRange();f.setStart(e,t),f.setEnd(r,a),c.removeAllRanges(),c.addRange(f)}}else c.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.sources.API;if(typeof t=="string"&&(r=t,t=!1),_y.info("setRange",e),e!=null){const a=this.rangeToNative(e);this.setNativeRange(...a,t)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.sources.USER;const t=this.lastRange,[r,a]=this.getRange();if(this.lastRange=r,this.lastNative=a,this.lastRange!=null&&(this.savedRange=this.lastRange),!go(t,this.lastRange)){if(!this.composing&&a!=null&&a.native.collapsed&&a.start.node!==this.cursor.textNode){const c=this.cursor.restore();c&&this.setNativeRange(c.startNode,c.startOffset,c.endNode,c.endOffset)}const l=[Ce.events.SELECTION_CHANGE,wc(this.lastRange),wc(t),e];this.emitter.emit(Ce.events.EDITOR_CHANGE,...l),e!==Ce.sources.SILENT&&this.emitter.emit(...l)}}}function Ey(n,e){try{e.parentNode}catch{return!1}return n.contains(e)}const qP=/^[ -~]*$/;class BP{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();const r=sT(e),a=new Ie;return HP(r.ops.slice()).reduce((c,h)=>{const f=ks.Op.length(h);let p=h.attributes||{},v=!1,b=!1;if(h.insert!=null){if(a.retain(f),typeof h.insert=="string"){const S=h.insert;b=!S.endsWith(`
`)&&(t<=c||!!this.scroll.descendant(Ls,c)[0]),this.scroll.insertAt(c,S);const[O,R]=this.scroll.line(c);let U=Ao({},js(O));if(O instanceof Zn){const[z]=O.descendant(hr,R);z&&(U=Ao(U,js(z)))}p=ks.AttributeMap.diff(U,p)||{}}else if(typeof h.insert=="object"){const S=Object.keys(h.insert)[0];if(S==null)return c;const O=this.scroll.query(S,Oe.INLINE)!=null;if(O)(t<=c||this.scroll.descendant(Ls,c)[0])&&(b=!0);else if(c>0){const[R,U]=this.scroll.descendant(hr,c-1);R instanceof li?R.value()[U]!==`
`&&(v=!0):R instanceof hs&&R.statics.scope===Oe.INLINE_BLOT&&(v=!0)}if(this.scroll.insertAt(c,S,h.insert[S]),O){const[R]=this.scroll.descendant(hr,c);if(R){const U=Ao({},js(R));p=ks.AttributeMap.diff(U,p)||{}}}}t+=f}else if(a.push(h),h.retain!==null&&typeof h.retain=="object"){const S=Object.keys(h.retain)[0];if(S==null)return c;this.scroll.updateEmbedAt(c,S,h.retain[S])}Object.keys(p).forEach(S=>{this.scroll.formatAt(c,f,S,p[S])});const _=v?1:0,T=b?1:0;return t+=_+T,a.retain(_),a.delete(T),c+f+_+T},0),a.reduce((c,h)=>typeof h.delete=="number"?(this.scroll.deleteAt(c,h.delete),c):c+ks.Op.length(h),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new Ie().retain(e).delete(t))}formatLine(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(l=>{this.scroll.lines(e,Math.max(t,1)).forEach(c=>{c.format(l,r[l])})}),this.scroll.optimize();const a=new Ie().retain(e).retain(t,wc(r));return this.update(a)}formatText(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(l=>{this.scroll.formatAt(e,t,l,r[l])});const a=new Ie().retain(e).retain(t,wc(r));return this.update(a)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new Ie)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],a=[];t===0?this.scroll.path(e).forEach(h=>{const[f]=h;f instanceof Zn?r.push(f):f instanceof hr&&a.push(f)}):(r=this.scroll.lines(e,t),a=this.scroll.descendants(hr,e,t));const[l,c]=[r,a].map(h=>{const f=h.shift();if(f==null)return{};let p=js(f);for(;Object.keys(p).length>0;){const v=h.shift();if(v==null)return p;p=zP(js(v),p)}return p});return{...l,...c}}getHTML(e,t){const[r,a]=this.scroll.line(e);if(r){const l=r.length();return r.length()>=a+t&&!(a===0&&t===l)?Eh(r,a,t,!0):Eh(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,t){const r=sT(t),a=new Ie().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(a)}insertEmbed(e,t,r){return this.scroll.insertAt(e,t,r),this.update(new Ie().retain(e).insert({[t]:r}))}insertText(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(r).forEach(a=>{this.scroll.formatAt(e,t.length,a,r[a])}),this.update(new Ie().retain(e).insert(t,wc(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==Zn.blotName)return!1;const t=e;return t.children.length>1?!1:t.children.head instanceof ui}removeFormat(e,t){const r=this.getText(e,t),[a,l]=this.scroll.line(e+t);let c=0,h=new Ie;a!=null&&(c=a.length()-l,h=a.delta().slice(l,l+c-1).insert(`
`));const p=this.getContents(e,t+c).diff(new Ie().insert(r).concat(h)),v=new Ie().retain(e).concat(p);return this.applyDelta(v)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const a=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(qP)&&this.scroll.find(t[0].target)){const l=this.scroll.find(t[0].target),c=js(l),h=l.offset(this.scroll),f=t[0].oldValue.replace(ti.CONTENTS,""),p=new Ie().insert(f),v=new Ie().insert(l.value()),b=r&&{oldRange:iT(r.oldRange,-h),newRange:iT(r.newRange,-h)};e=new Ie().retain(h).concat(p.diff(v,b)).reduce((T,S)=>S.insert?T.insert(S.insert,c):T.push(S),new Ie),this.delta=a.compose(e)}else this.delta=this.getDelta(),(!e||!go(a.compose(e),this.delta))&&(e=a.diff(this.delta,r));return e}}function gc(n,e,t){if(n.length===0){const[T]=wy(t.pop());return e<=0?`</li></${T}>`:`</li></${T}>${gc([],e-1,t)}`}const[{child:r,offset:a,length:l,indent:c,type:h},...f]=n,[p,v]=wy(h);if(c>e)return t.push(h),c===e+1?`<${p}><li${v}>${Eh(r,a,l)}${gc(f,c,t)}`:`<${p}><li>${gc(n,e+1,t)}`;const b=t[t.length-1];if(c===e&&h===b)return`</li><li${v}>${Eh(r,a,l)}${gc(f,c,t)}`;const[_]=wy(t.pop());return`</li></${_}>${gc(n,e-1,t)}`}function Eh(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(e,t);if(n instanceof li)return Fm(n.value().slice(e,e+t)).replaceAll(" ","&nbsp;");if(n instanceof ai){if(n.statics.blotName==="list-container"){const p=[];return n.children.forEachAt(e,t,(v,b,_)=>{const T="formats"in v&&typeof v.formats=="function"?v.formats():{};p.push({child:v,offset:b,length:_,indent:T.indent||0,type:T.list})}),gc(p,-1,[])}const a=[];if(n.children.forEachAt(e,t,(p,v,b)=>{a.push(Eh(p,v,b))}),r||n.statics.blotName==="list")return a.join("");const{outerHTML:l,innerHTML:c}=n.domNode,[h,f]=l.split(`>${c}<`);return h==="<table"?`<table style="border: 1px solid #000;">${a.join("")}<${f}`:`${h}>${a.join("")}<${f}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}function zP(n,e){return Object.keys(e).reduce((t,r)=>{if(n[r]==null)return t;const a=e[r];return a===n[r]?t[r]=a:Array.isArray(a)?a.indexOf(n[r])<0?t[r]=a.concat([n[r]]):t[r]=a:t[r]=[a,n[r]],t},{})}function wy(n){const e=n==="ordered"?"ol":"ul";switch(n){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function sT(n){return n.reduce((e,t)=>{if(typeof t.insert=="string"){const r=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,t.attributes)}return e.push(t)},new Ie)}function iT(n,e){let{index:t,length:r}=n;return new bl(t+e,r)}function HP(n){const e=[];return n.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((a,l)=>{l&&e.push({insert:`
`,attributes:t.attributes}),a&&e.push({insert:a,attributes:t.attributes})}):e.push(t)}),e}class Vi{static DEFAULTS={};constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}}const yf="\uFEFF";class qv extends hs{constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(yf),this.rightGuard=document.createTextNode(yf),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,r;const a=e.data.split(yf).join("");if(e===this.leftGuard)if(this.prev instanceof li){const l=this.prev.length();this.prev.insertAt(l,a),t={startNode:this.prev.domNode,startOffset:l+a.length}}else r=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(r),this),t={startNode:r,startOffset:a.length};else e===this.rightGuard&&(this.next instanceof li?(this.next.insertAt(0,a),t={startNode:this.next.domNode,startOffset:a.length}):(r=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(r),this.next),t={startNode:r,startOffset:a.length}));return e.data=yf,t}update(e,t){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const a=this.restore(r.target);a&&(t.range=a)}})}}class FP{isComposing=!1;constructor(e,t){this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof qv)&&(this.emitter.emit(Ce.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(Ce.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(Ce.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(Ce.events.COMPOSITION_END,e),this.isComposing=!1}}class eu{static DEFAULTS={modules:{}};static themes={default:eu};modules={};constructor(e,t){this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}const $P=n=>n.parentElement||n.getRootNode().host||null,GP=n=>{const e=n.getBoundingClientRect(),t="offsetWidth"in n&&Math.abs(e.width)/n.offsetWidth||1,r="offsetHeight"in n&&Math.abs(e.height)/n.offsetHeight||1;return{top:e.top,right:e.left+n.clientWidth*t,bottom:e.top+n.clientHeight*r,left:e.left}},vf=n=>{const e=parseInt(n,10);return Number.isNaN(e)?0:e},aT=(n,e,t,r,a,l)=>n<t&&e>r?0:n<t?-(t-n+a):e>r?e-n>r-t?n+a-t:e-r+l:0,KP=(n,e)=>{const t=n.ownerDocument;let r=e,a=n;for(;a;){const l=a===t.body,c=l?{top:0,right:window.visualViewport?.width??t.documentElement.clientWidth,bottom:window.visualViewport?.height??t.documentElement.clientHeight,left:0}:GP(a),h=getComputedStyle(a),f=aT(r.left,r.right,c.left,c.right,vf(h.scrollPaddingLeft),vf(h.scrollPaddingRight)),p=aT(r.top,r.bottom,c.top,c.bottom,vf(h.scrollPaddingTop),vf(h.scrollPaddingBottom));if(f||p)if(l)t.defaultView?.scrollBy(f,p);else{const{scrollLeft:v,scrollTop:b}=a;p&&(a.scrollTop+=p),f&&(a.scrollLeft+=f);const _=a.scrollLeft-v,T=a.scrollTop-b;r={left:r.left-_,top:r.top-T,right:r.right-_,bottom:r.bottom-T}}a=l||h.position==="fixed"?null:$P(a)}},YP=100,QP=["block","break","cursor","inline","scroll","text"],XP=(n,e,t)=>{const r=new Uc;return QP.forEach(a=>{const l=e.query(a);l&&r.register(l)}),n.forEach(a=>{let l=e.query(a);l||t.error(`Cannot register "${a}" specified in "formats" config. Are you sure it was registered?`);let c=0;for(;l;)if(r.register(l),l="blotName"in l?l.requiredContainer??null:null,c+=1,c>YP){t.error(`Cycle detected in registering blot requiredContainer: "${a}"`);break}}),r},Ac=La("quill"),bf=new Uc;ai.uiClass="ql-ui";class le{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:bf,theme:"default"};static events=Ce.events;static sources=Ce.sources;static version="2.0.3";static imports={delta:Ie,parchment:RP,"core/module":Vi,"core/theme":eu};static debug(e){e===!0&&(e="log"),La.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return b0.get(e)||bf.find(e,t)}static import(e){return this.imports[e]==null&&Ac.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],t=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,t):Object.keys(e).forEach(a=>{this.register(a,e[a],t)})}else{const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&Ac.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&bf.register(t),typeof t.register=="function"&&t.register(bf)}}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=WP(e,t),this.container=this.options.container,this.container==null){Ac.error("Invalid Quill container",e);return}this.options.debug&&le.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",b0.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Ce;const a=Vv.blotName,l=this.options.registry.query(a);if(!l||!("blotName"in l))throw new Error(`Cannot initialize Quill without "${a}" blot`);if(this.scroll=new l(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new BP(this.scroll),this.selection=new VP(this.scroll,this.emitter),this.composition=new FP(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Ce.events.EDITOR_CHANGE,c=>{c===Ce.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Ce.events.SCROLL_UPDATE,(c,h)=>{const f=this.selection.lastRange,[p]=this.selection.getRange(),v=f&&p?{oldRange:f,newRange:p}:void 0;Js.call(this,()=>this.editor.update(null,h,v),c)}),this.emitter.on(Ce.events.SCROLL_EMBED_UPDATE,(c,h)=>{const f=this.selection.lastRange,[p]=this.selection.getRange(),v=f&&p?{oldRange:f,newRange:p}:void 0;Js.call(this,()=>{const b=new Ie().retain(c.offset(this)).retain({[c.statics.blotName]:h});return this.editor.update(b,[],v)},le.sources.USER)}),r){const c=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(c)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,r){return[e,t,,r]=ya(e,t,r),Js.call(this,()=>this.editor.deleteText(e,t),r,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.sources.API;return Js.call(this,()=>{const a=this.getSelection(!0);let l=new Ie;if(a==null)return l;if(this.scroll.query(e,Oe.BLOCK))l=this.editor.formatLine(a.index,a.length,{[e]:t});else{if(a.length===0)return this.selection.format(e,t),l;l=this.editor.formatText(a.index,a.length,{[e]:t})}return this.setSelection(a,Ce.sources.SILENT),l},r)}formatLine(e,t,r,a,l){let c;return[e,t,c,l]=ya(e,t,r,a,l),Js.call(this,()=>this.editor.formatLine(e,t,c),l,e,0)}formatText(e,t,r,a,l){let c;return[e,t,c,l]=ya(e,t,r,a,l),Js.call(this,()=>this.editor.formatText(e,t,c),l,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,t):r=this.selection.getBounds(e.index,e.length),!r)return null;const a=this.container.getBoundingClientRect();return{bottom:r.bottom-a.top,height:r.height,left:r.left-a.left,right:r.right-a.left,top:r.top-a.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=ya(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=ya(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=ya(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:le.sources.API;return Js.call(this,()=>this.editor.insertEmbed(e,t,r),a,e)}insertText(e,t,r,a,l){let c;return[e,,c,l]=ya(e,0,r,a,l),Js.call(this,()=>this.editor.insertText(e,t,c),l,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,r){return[e,t,,r]=ya(e,t,r),Js.call(this,()=>this.editor.removeFormat(e,t),r,e)}scrollRectIntoView(e){KP(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;return Js.call(this,()=>{e=new Ie(e);const r=this.getLength(),a=this.editor.deleteText(0,r),l=this.editor.insertContents(0,e),c=this.editor.deleteText(this.getLength()-1,1);return a.compose(l).compose(c)},t)}setSelection(e,t,r){e==null?this.selection.setRange(null,t||le.sources.API):([e,t,,r]=ya(e,t,r),this.selection.setRange(new bl(Math.max(0,e),t),r),r!==Ce.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;const r=new Ie().insert(e);return this.setContents(r,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.sources.USER;const t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;return Js.call(this,()=>(e=new Ie(e),this.editor.applyDelta(e)),t,!0)}}function oT(n){return typeof n=="string"?document.querySelector(n):n}function Ty(n){return Object.entries(n??{}).reduce((e,t)=>{let[r,a]=t;return{...e,[r]:a===!0?{}:a}},{})}function lT(n){return Object.fromEntries(Object.entries(n).filter(e=>e[1]!==void 0))}function WP(n,e){const t=oT(n);if(!t)throw new Error("Invalid Quill container");const a=!e.theme||e.theme===le.DEFAULTS.theme?eu:le.import(`themes/${e.theme}`);if(!a)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:l,...c}=le.DEFAULTS,{modules:h,...f}=a.DEFAULTS;let p=Ty(e.modules);p!=null&&p.toolbar&&p.toolbar.constructor!==Object&&(p={...p,toolbar:{container:p.toolbar}});const v=Ao({},Ty(l),Ty(h),p),b={...c,...lT(f),...lT(e)};let _=e.registry;return _?e.formats&&Ac.warn('Ignoring "formats" option because "registry" is specified'):_=e.formats?XP(e.formats,b.registry,Ac):b.registry,{...b,registry:_,container:t,theme:a,modules:Object.entries(v).reduce((T,S)=>{let[O,R]=S;if(!R)return T;const U=le.import(`modules/${O}`);return U==null?(Ac.error(`Cannot load ${O} module. Are you sure you registered it?`),T):{...T,[O]:Ao({},U.DEFAULTS||{},R)}},{}),bounds:oT(b.bounds)}}function Js(n,e,t,r){if(!this.isEnabled()&&e===Ce.sources.USER&&!this.allowReadOnlyEdits)return new Ie;let a=t==null?null:this.getSelection();const l=this.editor.delta,c=n();if(a!=null&&(t===!0&&(t=a.index),r==null?a=cT(a,c,e):r!==0&&(a=cT(a,t,r,e)),this.setSelection(a,Ce.sources.SILENT)),c.length()>0){const h=[Ce.events.TEXT_CHANGE,c,l,e];this.emitter.emit(Ce.events.EDITOR_CHANGE,...h),e!==Ce.sources.SILENT&&this.emitter.emit(...h)}return c}function ya(n,e,t,r,a){let l={};return typeof n.index=="number"&&typeof n.length=="number"?typeof e!="number"?(a=r,r=t,t=e,e=n.length,n=n.index):(e=n.length,n=n.index):typeof e!="number"&&(a=r,r=t,t=e,e=0),typeof t=="object"?(l=t,a=r):typeof t=="string"&&(r!=null?l[t]=r:a=t),a=a||Ce.sources.API,[n,e,l,a]}function cT(n,e,t,r){const a=typeof t=="number"?t:0;if(n==null)return null;let l,c;return e&&typeof e.transformPosition=="function"?[l,c]=[n.index,n.index+n.length].map(h=>e.transformPosition(h,r!==Ce.sources.USER)):[l,c]=[n.index,n.index+n.length].map(h=>h<e||h===e&&r===Ce.sources.USER?h:a>=0?h+a:Math.max(e,h+a)),new bl(l,c-l)}class Cl extends Hm{}function uT(n){return n instanceof Zn||n instanceof Ls}function hT(n){return typeof n.updateContent=="function"}class ZP extends Vv{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Zn;static allowedChildren=[Zn,Ls,Cl];constructor(e,t,r){let{emitter:a}=r;super(e,t),this.emitter=a,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",l=>this.handleDragStart(l))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(Ce.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(Ce.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(Ce.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){const[r,a]=this.line(e),[l]=this.line(e+t);if(super.deleteAt(e,t),l!=null&&r!==l&&a>0){if(r instanceof Ls||l instanceof Ls){this.optimize();return}const c=l.children.head instanceof ui?null:l.children.head;r.moveChildren(l,c),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,r,a){super.formatAt(e,t,r,a),this.optimize()}insertAt(e,t,r){if(e>=this.length())if(r==null||this.scroll.query(t,Oe.BLOCK)==null){const a=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(a),r==null&&t.endsWith(`
`)?a.insertAt(0,t.slice(0,-1),r):a.insertAt(0,t,r)}else{const a=this.scroll.create(t,r);this.appendChild(a)}else super.insertAt(e,t,r);this.optimize()}insertBefore(e,t){if(e.statics.scope===Oe.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,t)}else super.insertBefore(e,t)}insertContents(e,t){const r=this.deltaToRenderBlocks(t.concat(new Ie().insert(`
`))),a=r.pop();if(a==null)return;this.batchStart();const l=r.shift();if(l){const f=l.type==="block"&&(l.delta.length()===0||!this.descendant(Ls,e)[0]&&e<this.length()),p=l.type==="block"?l.delta:new Ie().insert({[l.key]:l.value});Ay(this,e,p);const v=l.type==="block"?1:0,b=e+p.length()+v;f&&this.insertAt(b-1,`
`);const _=js(this.line(e)[0]),T=ks.AttributeMap.diff(_,l.attributes)||{};Object.keys(T).forEach(S=>{this.formatAt(b-1,1,S,T[S])}),e=b}let[c,h]=this.children.find(e);if(r.length&&(c&&(c=c.split(h),h=0),r.forEach(f=>{if(f.type==="block"){const p=this.createBlock(f.attributes,c||void 0);Ay(p,0,f.delta)}else{const p=this.create(f.key,f.value);this.insertBefore(p,c||void 0),Object.keys(f.attributes).forEach(v=>{p.format(v,f.attributes[v])})}})),a.type==="block"&&a.delta.length()){const f=c?c.offset(c.scroll)+h:this.length();Ay(this,f,a.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const t=this.path(e).pop();if(!t)return[null,-1];const[r,a]=t;return r instanceof hr?[r,a]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(uT,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(a,l,c)=>{let h=[],f=c;return a.children.forEachAt(l,c,(p,v,b)=>{uT(p)?h.push(p):p instanceof Hm&&(h=h.concat(r(p,v,f))),f-=b}),h};return r(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(Ce.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=Ce.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:a}=r;const l=this.find(a,!0);return l&&!hT(l)}),e.length>0&&this.emitter.emit(Ce.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(Ce.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,r){const[a]=this.descendant(l=>l instanceof Ls,e);a&&a.statics.blotName===t&&hT(a)&&a.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const t=[];let r=new Ie;return e.forEach(a=>{const l=a?.insert;if(l)if(typeof l=="string"){const c=l.split(`
`);c.slice(0,-1).forEach(f=>{r.insert(f,a.attributes),t.push({type:"block",delta:r,attributes:a.attributes??{}}),r=new Ie});const h=c[c.length-1];h&&r.insert(h,a.attributes)}else{const c=Object.keys(l)[0];if(!c)return;this.query(c,Oe.INLINE)?r.push(a):(r.length()&&t.push({type:"block",delta:r,attributes:{}}),r=new Ie,t.push({type:"blockEmbed",key:c,value:l[c],attributes:a.attributes??{}}))}}),r.length()&&t.push({type:"block",delta:r,attributes:{}}),t}createBlock(e,t){let r;const a={};Object.entries(e).forEach(h=>{let[f,p]=h;this.query(f,Oe.BLOCK&Oe.BLOT)!=null?r=f:a[f]=p});const l=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(l,t||void 0);const c=l.length();return Object.entries(a).forEach(h=>{let[f,p]=h;l.formatAt(0,c,f,p)}),l}}function Ay(n,e,t){t.reduce((r,a)=>{const l=ks.Op.length(a);let c=a.attributes||{};if(a.insert!=null){if(typeof a.insert=="string"){const h=a.insert;n.insertAt(r,h);const[f]=n.descendant(hr,r),p=js(f);c=ks.AttributeMap.diff(p,c)||{}}else if(typeof a.insert=="object"){const h=Object.keys(a.insert)[0];if(h==null)return r;if(n.insertAt(r,h,a.insert[h]),n.scroll.query(h,Oe.INLINE)!=null){const[p]=n.descendant(hr,r),v=js(p);c=ks.AttributeMap.diff(v,c)||{}}}}return Object.keys(c).forEach(h=>{n.formatAt(r,l,h,c[h])}),r+l},e)}const Bv={scope:Oe.BLOCK,whitelist:["right","center","justify"]},JP=new Mi("align","align",Bv),s2=new ci("align","ql-align",Bv),i2=new qo("align","text-align",Bv);class a2 extends qo{value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(a=>`00${parseInt(a,10).toString(16)}`.slice(-2)).join("")}`):t}}const e7=new ci("color","ql-color",{scope:Oe.INLINE}),zv=new a2("color","color",{scope:Oe.INLINE}),t7=new ci("background","ql-bg",{scope:Oe.INLINE}),Hv=new a2("background","background-color",{scope:Oe.INLINE});class Rl extends Cl{static create(e){const t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${Fm(this.code(e,t))}
</pre>`}}class Sr extends Zn{static TAB="  ";static register(){le.register(Rl)}}class Fv extends Tr{}Fv.blotName="code";Fv.tagName="CODE";Sr.blotName="code-block";Sr.className="ql-code-block";Sr.tagName="DIV";Rl.blotName="code-block-container";Rl.className="ql-code-block-container";Rl.tagName="DIV";Rl.allowedChildren=[Sr];Sr.allowedChildren=[li,ui,ti];Sr.requiredContainer=Rl;const $v={scope:Oe.BLOCK,whitelist:["rtl"]},o2=new Mi("direction","dir",$v),l2=new ci("direction","ql-direction",$v),c2=new qo("direction","direction",$v),u2={scope:Oe.INLINE,whitelist:["serif","monospace"]},h2=new ci("font","ql-font",u2);class n7 extends qo{value(e){return super.value(e).replace(/["']/g,"")}}const d2=new n7("font","font-family",u2),f2=new ci("size","ql-size",{scope:Oe.INLINE,whitelist:["small","large","huge"]}),m2=new qo("size","font-size",{scope:Oe.INLINE,whitelist:["10px","18px","32px"]}),r7=La("quill:keyboard"),s7=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class $m extends Vi{static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!t[r]!==e[r]&&t[r]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=a7(e);if(a==null){r7.warn("Attempted to add invalid keyboard binding",a);return}typeof t=="function"&&(t={handler:t}),typeof r=="function"&&(r={handler:r}),(Array.isArray(a.key)?a.key:[a.key]).forEach(c=>{const h={...a,key:c,...t,...r};this.bindings[h.key]=this.bindings[h.key]||[],this.bindings[h.key].push(h)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const a=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(U=>$m.match(e,U));if(a.length===0)return;const l=le.find(e.target,!0);if(l&&l.scroll!==this.quill.scroll)return;const c=this.quill.getSelection();if(c==null||!this.quill.hasFocus())return;const[h,f]=this.quill.getLine(c.index),[p,v]=this.quill.getLeaf(c.index),[b,_]=c.length===0?[p,v]:this.quill.getLeaf(c.index+c.length),T=p instanceof lm?p.value().slice(0,v):"",S=b instanceof lm?b.value().slice(_):"",O={collapsed:c.length===0,empty:c.length===0&&h.length()<=1,format:this.quill.getFormat(c),line:h,offset:f,prefix:T,suffix:S,event:e};a.some(U=>{if(U.collapsed!=null&&U.collapsed!==O.collapsed||U.empty!=null&&U.empty!==O.empty||U.offset!=null&&U.offset!==O.offset)return!1;if(Array.isArray(U.format)){if(U.format.every(z=>O.format[z]==null))return!1}else if(typeof U.format=="object"&&!Object.keys(U.format).every(z=>U.format[z]===!0?O.format[z]!=null:U.format[z]===!1?O.format[z]==null:go(U.format[z],O.format[z])))return!1;return U.prefix!=null&&!U.prefix.test(O.prefix)||U.suffix!=null&&!U.suffix.test(O.suffix)?!1:U.handler.call(this,c,O,U)!==!0})&&e.preventDefault()})}handleBackspace(e,t){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let a={};const[l]=this.quill.getLine(e.index);let c=new Ie().retain(e.index-r).delete(r);if(t.offset===0){const[h]=this.quill.getLine(e.index-1);if(h&&!(h.statics.blotName==="block"&&h.length()<=1)){const p=l.formats(),v=this.quill.getFormat(e.index-1,1);if(a=ks.AttributeMap.diff(p,v)||{},Object.keys(a).length>0){const b=new Ie().retain(e.index+l.length()-2).retain(1,a);c=c.compose(b)}}}this.quill.updateContents(c,le.sources.USER),this.quill.focus()}handleDelete(e,t){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let a={};const[l]=this.quill.getLine(e.index);let c=new Ie().retain(e.index).delete(r);if(t.offset>=l.length()-1){const[h]=this.quill.getLine(e.index+1);if(h){const f=l.formats(),p=this.quill.getFormat(e.index,1);a=ks.AttributeMap.diff(f,p)||{},Object.keys(a).length>0&&(c=c.retain(h.length()-1).retain(1,a))}}this.quill.updateContents(c,le.sources.USER),this.quill.focus()}handleDeleteRange(e){Gv({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){const r=Object.keys(t.format).reduce((l,c)=>(this.quill.scroll.query(c,Oe.BLOCK)&&!Array.isArray(t.format[c])&&(l[c]=t.format[c]),l),{}),a=new Ie().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(e.index+1,le.sources.SILENT),this.quill.focus()}}const i7={bindings:{bold:Sy("bold"),italic:Sy("italic"),underline:Sy("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",le.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",le.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,e){e.format.indent!=null?this.quill.format("indent","-1",le.sources.USER):e.format.list!=null&&this.quill.format("list",!1,le.sources.USER)}},"indent code-block":dT(!0),"outdent code-block":dT(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,le.sources.USER)}},tab:{key:"Tab",handler(n,e){if(e.format.table)return!0;this.quill.history.cutoff();const t=new Ie().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(t,le.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,le.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,le.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,e){const t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(n.index,n.length,t,le.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){const[e,t]=this.quill.getLine(n.index),r={...e.formats(),list:"checked"},a=new Ie().retain(n.index).insert(`
`,r).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(n.index+1,le.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,e){const[t,r]=this.quill.getLine(n.index),a=new Ie().retain(n.index).insert(`
`,e.format).retain(t.length()-r-1).retain(1,{header:null});this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(n.index+1,le.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){const e=this.quill.getModule("table");if(e){const[t,r,a,l]=e.getTable(n),c=o7(t,r,a,l);if(c==null)return;let h=t.offset();if(c<0){const f=new Ie().retain(h).insert(`
`);this.quill.updateContents(f,le.sources.USER),this.quill.setSelection(n.index+1,n.length,le.sources.SILENT)}else if(c>0){h+=t.length();const f=new Ie().retain(h).insert(`
`);this.quill.updateContents(f,le.sources.USER),this.quill.setSelection(h,le.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,e){const{event:t,line:r}=e,a=r.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(a-1,le.sources.USER):this.quill.setSelection(a+r.length(),le.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,e){if(this.quill.scroll.query("list")==null)return!0;const{length:t}=e.prefix,[r,a]=this.quill.getLine(n.index);if(a>t)return!0;let l;switch(e.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(n.index," ",le.sources.USER),this.quill.history.cutoff();const c=new Ie().retain(n.index-a).delete(t+1).retain(r.length()-2-a).retain(1,{list:l});return this.quill.updateContents(c,le.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-t,le.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){const[e,t]=this.quill.getLine(n.index);let r=2,a=e;for(;a!=null&&a.length()<=1&&a.formats()["code-block"];)if(a=a.prev,r-=1,r<=0){const l=new Ie().retain(n.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(l,le.sources.USER),this.quill.setSelection(n.index-1,le.sources.SILENT),!1}return!0}},"embed left":xf("ArrowLeft",!1),"embed left shift":xf("ArrowLeft",!0),"embed right":xf("ArrowRight",!1),"embed right shift":xf("ArrowRight",!0),"table down":fT(!1),"table up":fT(!0)}};$m.DEFAULTS=i7;function dT(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(e,t){let{event:r}=t;const a=this.quill.scroll.query("code-block"),{TAB:l}=a;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,l,le.sources.USER),this.quill.setSelection(e.index+l.length,le.sources.SILENT);return}const c=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:h,length:f}=e;c.forEach((p,v)=>{n?(p.insertAt(0,l),v===0?h+=l.length:f+=l.length):p.domNode.textContent.startsWith(l)&&(p.deleteAt(0,l.length),v===0?h-=l.length:f-=l.length)}),this.quill.update(le.sources.USER),this.quill.setSelection(h,f,le.sources.SILENT)}}}function xf(n,e){return{key:n,shiftKey:e,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:a}=r;n==="ArrowRight"&&(a+=r.length+1);const[l]=this.quill.getLeaf(a);return l instanceof hs?(n==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,le.sources.USER):this.quill.setSelection(r.index-1,le.sources.USER):e?this.quill.setSelection(r.index,r.length+1,le.sources.USER):this.quill.setSelection(r.index+r.length+1,le.sources.USER),!1):!0}}}function Sy(n){return{key:n[0],shortKey:!0,handler(e,t){this.quill.format(n,!t.format[n],le.sources.USER)}}}function fT(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){const r=n?"prev":"next",a=t.line,l=a.parent[r];if(l!=null){if(l.statics.blotName==="table-row"){let c=l.children.head,h=a;for(;h.prev!=null;)h=h.prev,c=c.next;const f=c.offset(this.quill.scroll)+Math.min(t.offset,c.length()-1);this.quill.setSelection(f,0,le.sources.USER)}}else{const c=a.table()[r];c!=null&&(n?this.quill.setSelection(c.offset(this.quill.scroll)+c.length()-1,0,le.sources.USER):this.quill.setSelection(c.offset(this.quill.scroll),0,le.sources.USER))}return!1}}}function a7(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=wc(n);else return null;return n.shortKey&&(n[s7]=n.shortKey,delete n.shortKey),n}function Gv(n){let{quill:e,range:t}=n;const r=e.getLines(t);let a={};if(r.length>1){const l=r[0].formats(),c=r[r.length-1].formats();a=ks.AttributeMap.diff(c,l)||{}}e.deleteText(t,le.sources.USER),Object.keys(a).length>0&&e.formatLine(t.index,1,a,le.sources.USER),e.setSelection(t.index,le.sources.SILENT)}function o7(n,e,t,r){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?r===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const l7=/font-weight:\s*normal/,c7=["P","OL","UL"],mT=n=>n&&c7.includes(n.tagName),u7=n=>{Array.from(n.querySelectorAll("br")).filter(e=>mT(e.previousElementSibling)&&mT(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},h7=n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(l7)).forEach(e=>{const t=n.createDocumentFragment();t.append(...e.childNodes),e.parentNode?.replaceChild(t,e)})};function d7(n){n.querySelector('[id^="docs-internal-guid-"]')&&(h7(n),u7(n))}const f7=/\bmso-list:[^;]*ignore/i,m7=/\bmso-list:[^;]*\bl(\d+)/i,p7=/\bmso-list:[^;]*\blevel(\d+)/i,g7=(n,e)=>{const t=n.getAttribute("style"),r=t?.match(m7);if(!r)return null;const a=Number(r[1]),l=t?.match(p7),c=l?Number(l[1]):1,h=new RegExp(`@list l${a}:level${c}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),f=e.match(h),p=f&&f[1]==="bullet"?"bullet":"ordered";return{id:a,indent:c,type:p,element:n}},y7=n=>{const e=Array.from(n.querySelectorAll("[style*=mso-list]")),t=[],r=[];e.forEach(c=>{(c.getAttribute("style")||"").match(f7)?t.push(c):r.push(c)}),t.forEach(c=>c.parentNode?.removeChild(c));const a=n.documentElement.innerHTML,l=r.map(c=>g7(c,a)).filter(c=>c);for(;l.length;){const c=[];let h=l.shift();for(;h;)c.push(h),h=l.length&&l[0]?.element===h.element.nextElementSibling&&l[0].id===h.id?l.shift():null;const f=document.createElement("ul");c.forEach(b=>{const _=document.createElement("li");_.setAttribute("data-list",b.type),b.indent>1&&_.setAttribute("class",`ql-indent-${b.indent-1}`),_.innerHTML=b.element.innerHTML,f.appendChild(_)});const p=c[0]?.element,{parentNode:v}=p??{};p&&v?.replaceChild(f,p),c.slice(1).forEach(b=>{let{element:_}=b;v?.removeChild(_)})}};function v7(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&y7(n)}const b7=[v7,d7],x7=n=>{n.documentElement&&b7.forEach(e=>{e(n)})},_7=La("quill:clipboard"),E7=[[Node.TEXT_NODE,k7],[Node.TEXT_NODE,gT],["br",C7],[Node.ELEMENT_NODE,gT],[Node.ELEMENT_NODE,N7],[Node.ELEMENT_NODE,S7],[Node.ELEMENT_NODE,D7],["li",j7],["ol, ul",O7],["pre",R7],["tr",L7],["b",Ny("bold")],["i",Ny("italic")],["strike",Ny("strike")],["style",I7]],w7=[JP,o2].reduce((n,e)=>(n[e.keyName]=e,n),{}),pT=[i2,Hv,zv,c2,d2,m2].reduce((n,e)=>(n[e.keyName]=e,n),{});class T7 extends Vi{static DEFAULTS={matchers:[]};constructor(e,t){super(e,t),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],E7.concat(this.options.matchers??[]).forEach(r=>{let[a,l]=r;this.addMatcher(a,l)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:r}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a[Sr.blotName])return new Ie().insert(r||"",{[Sr.blotName]:a[Sr.blotName]});if(!t)return new Ie().insert(r||"",a);const l=this.convertHTML(t);return Bh(l,`
`)&&(l.ops[l.ops.length-1].attributes==null||a.table)?l.compose(new Ie().retain(l.length()-1).delete(1)):l}normalizeHTML(e){x7(e)}convertHTML(e){const t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);const r=t.body,a=new WeakMap,[l,c]=this.prepareMatching(r,a);return Kv(this.quill.scroll,r,l,c,a)}dangerouslyPasteHTML(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:le.sources.API;if(typeof e=="string"){const a=this.convert({html:e,text:""});this.quill.setContents(a,t),this.quill.setSelection(0,le.sources.SILENT)}else{const a=this.convert({html:t,text:""});this.quill.updateContents(new Ie().retain(e).concat(a),r),this.quill.setSelection(e+a.length(),le.sources.SILENT)}}onCaptureCopy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:a,text:l}=this.onCopy(r,t);e.clipboardData?.setData("text/plain",l),e.clipboardData?.setData("text/html",a),t&&Gv({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const t=this.quill.getSelection(!0);if(t==null)return;const r=e.clipboardData?.getData("text/html");let a=e.clipboardData?.getData("text/plain");if(!r&&!a){const c=e.clipboardData?.getData("text/uri-list");c&&(a=this.normalizeURIList(c))}const l=Array.from(e.clipboardData?.files||[]);if(!r&&l.length>0){this.quill.uploader.upload(t,l);return}if(r&&l.length>0){const c=new DOMParser().parseFromString(r,"text/html");if(c.body.childElementCount===1&&c.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(t,l);return}}this.onPaste(t,{html:r,text:a})}onCopy(e){const t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:r,html:a}=t;const l=this.quill.getFormat(e.index),c=this.convert({text:r,html:a},l);_7.log("onPaste",c,{text:r,html:a});const h=new Ie().retain(e.index).delete(e.length).concat(c);this.quill.updateContents(h,le.sources.USER),this.quill.setSelection(h.length()-e.length,le.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){const r=[],a=[];return this.matchers.forEach(l=>{const[c,h]=l;switch(c){case Node.TEXT_NODE:a.push(h);break;case Node.ELEMENT_NODE:r.push(h);break;default:Array.from(e.querySelectorAll(c)).forEach(f=>{t.has(f)?t.get(f)?.push(h):t.set(f,[h])});break}}),[r,a]}}function Il(n,e,t,r){return r.query(e)?n.reduce((a,l)=>{if(!l.insert)return a;if(l.attributes&&l.attributes[e])return a.push(l);const c=t?{[e]:t}:{};return a.insert(l.insert,{...c,...l.attributes})},new Ie):n}function Bh(n,e){let t="";for(let r=n.ops.length-1;r>=0&&t.length<e.length;--r){const a=n.ops[r];if(typeof a.insert!="string")break;t=a.insert+t}return t.slice(-1*e.length)===e}function bo(n,e){if(!(n instanceof Element))return!1;const t=e.query(n);return t&&t.prototype instanceof hs?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}function A7(n,e){return n.previousElementSibling&&n.nextElementSibling&&!bo(n.previousElementSibling,e)&&!bo(n.nextElementSibling,e)}const _f=new WeakMap;function p2(n){return n==null?!1:(_f.has(n)||(n.tagName==="PRE"?_f.set(n,!0):_f.set(n,p2(n.parentNode))),_f.get(n))}function Kv(n,e,t,r,a){return e.nodeType===e.TEXT_NODE?r.reduce((l,c)=>c(e,l,n),new Ie):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((l,c)=>{let h=Kv(n,c,t,r,a);return c.nodeType===e.ELEMENT_NODE&&(h=t.reduce((f,p)=>p(c,f,n),h),h=(a.get(c)||[]).reduce((f,p)=>p(c,f,n),h)),l.concat(h)},new Ie):new Ie}function Ny(n){return(e,t,r)=>Il(t,n,!0,r)}function S7(n,e,t){const r=Mi.keys(n),a=ci.keys(n),l=qo.keys(n),c={};return r.concat(a).concat(l).forEach(h=>{let f=t.query(h,Oe.ATTRIBUTE);f!=null&&(c[f.attrName]=f.value(n),c[f.attrName])||(f=w7[h],f!=null&&(f.attrName===h||f.keyName===h)&&(c[f.attrName]=f.value(n)||void 0),f=pT[h],f!=null&&(f.attrName===h||f.keyName===h)&&(f=pT[h],c[f.attrName]=f.value(n)||void 0))}),Object.entries(c).reduce((h,f)=>{let[p,v]=f;return Il(h,p,v,t)},e)}function N7(n,e,t){const r=t.query(n);if(r==null)return e;if(r.prototype instanceof hs){const a={},l=r.value(n);if(l!=null)return a[r.blotName]=l,new Ie().insert(a,r.formats(n,t))}else if(r.prototype instanceof _h&&!Bh(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return Il(e,r.blotName,r.formats(n,t),t);return e}function C7(n,e){return Bh(e,`
`)||e.insert(`
`),e}function R7(n,e,t){const r=t.query("code-block"),a=r&&"formats"in r&&typeof r.formats=="function"?r.formats(n,t):!0;return Il(e,"code-block",a,t)}function I7(){return new Ie}function j7(n,e,t){const r=t.query(n);if(r==null||r.blotName!=="list"||!Bh(e,`
`))return e;let a=-1,l=n.parentNode;for(;l!=null;)["OL","UL"].includes(l.tagName)&&(a+=1),l=l.parentNode;return a<=0?e:e.reduce((c,h)=>h.insert?h.attributes&&typeof h.attributes.indent=="number"?c.push(h):c.insert(h.insert,{indent:a,...h.attributes||{}}):c,new Ie)}function O7(n,e,t){const r=n;let a=r.tagName==="OL"?"ordered":"bullet";const l=r.getAttribute("data-checked");return l&&(a=l==="true"?"checked":"unchecked"),Il(e,"list",a,t)}function gT(n,e,t){if(!Bh(e,`
`)){if(bo(n,t)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&n.nextSibling){let r=n.nextSibling;for(;r!=null;){if(bo(r,t))return e.insert(`
`);const a=t.query(r);if(a&&a.prototype instanceof Ls)return e.insert(`
`);r=r.firstChild}}}return e}function D7(n,e,t){const r={},a=n.style||{};return a.fontStyle==="italic"&&(r.italic=!0),a.textDecoration==="underline"&&(r.underline=!0),a.textDecoration==="line-through"&&(r.strike=!0),(a.fontWeight?.startsWith("bold")||parseInt(a.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((l,c)=>{let[h,f]=c;return Il(l,h,f,t)},e),parseFloat(a.textIndent||0)>0?new Ie().insert("	").concat(e):e}function L7(n,e,t){const r=n.parentElement?.tagName==="TABLE"?n.parentElement:n.parentElement?.parentElement;if(r!=null){const l=Array.from(r.querySelectorAll("tr")).indexOf(n)+1;return Il(e,"table",l,t)}return e}function k7(n,e,t){let r=n.data;if(n.parentElement?.tagName==="O:P")return e.insert(r.trim());if(!p2(n)){if(r.trim().length===0&&r.includes(`
`)&&!A7(n,t))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(n.previousSibling==null&&n.parentElement!=null&&bo(n.parentElement,t)||n.previousSibling instanceof Element&&bo(n.previousSibling,t))&&(r=r.replace(/^ /,"")),(n.nextSibling==null&&n.parentElement!=null&&bo(n.parentElement,t)||n.nextSibling instanceof Element&&bo(n.nextSibling,t))&&(r=r.replace(/ $/,"")),r=r.replaceAll(""," ")}return e.insert(r)}class M7 extends Vi{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,t){super(e,t),this.quill.on(le.events.EDITOR_CHANGE,(r,a,l,c)=>{r===le.events.SELECTION_CHANGE?a&&c!==le.sources.SILENT&&(this.currentRange=a):r===le.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||c===le.sources.USER?this.record(a,l):this.transform(a)),this.currentRange=E0(this.currentRange,a))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(e,t){if(this.stack[e].length===0)return;const r=this.stack[e].pop();if(!r)return;const a=this.quill.getContents(),l=r.delta.invert(a);this.stack[t].push({delta:l,range:E0(r.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,le.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,t){if(e.ops.length===0)return;this.stack.redo=[];let r=e.invert(t),a=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const c=this.stack.undo.pop();c&&(r=r.compose(c.delta),a=c.range)}else this.lastRecorded=l;r.length()!==0&&(this.stack.undo.push({delta:r,range:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){yT(this.stack.undo,e),yT(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,le.sources.USER);else{const t=U7(this.quill.scroll,e.delta);this.quill.setSelection(t,le.sources.USER)}}}function yT(n,e){let t=e;for(let r=n.length-1;r>=0;r-=1){const a=n[r];n[r]={delta:t.transform(a.delta,!0),range:a.range&&E0(a.range,t)},t=a.delta.transform(t),n[r].delta.length()===0&&n.splice(r,1)}}function P7(n,e){const t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(r=>n.query(r,Oe.BLOCK)!=null):!1}function U7(n,e){const t=e.reduce((a,l)=>a+(l.delete||0),0);let r=e.length()-t;return P7(n,e)&&(r-=1),r}function E0(n,e){if(!n)return n;const t=e.transformPosition(n.index),r=e.transformPosition(n.index+n.length);return{index:t,length:r-t}}class g2 extends Vi{constructor(e,t){super(e,t),e.root.addEventListener("drop",r=>{r.preventDefault();let a=null;if(document.caretRangeFromPoint)a=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const c=document.caretPositionFromPoint(r.clientX,r.clientY);a=document.createRange(),a.setStart(c.offsetNode,c.offset),a.setEnd(c.offsetNode,c.offset)}const l=a&&e.selection.normalizeNative(a);if(l){const c=e.selection.normalizedToRange(l);r.dataTransfer?.files&&this.upload(c,r.dataTransfer.files)}})}upload(e,t){const r=[];Array.from(t).forEach(a=>{a&&this.options.mimetypes?.includes(a.type)&&r.push(a)}),r.length>0&&this.options.handler.call(this,e,r)}}g2.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,e){if(!this.quill.scroll.query("image"))return;const t=e.map(r=>new Promise(a=>{const l=new FileReader;l.onload=()=>{a(l.result)},l.readAsDataURL(r)}));Promise.all(t).then(r=>{const a=r.reduce((l,c)=>l.insert({image:c}),new Ie().retain(n.index).delete(n.length));this.quill.updateContents(a,Ce.sources.USER),this.quill.setSelection(n.index+r.length,Ce.sources.SILENT)})}};const V7=["insertText","insertReplacementText"];class q7 extends Vi{constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(le.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){Gv({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Ie().retain(e.index).insert(t,r),le.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,le.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!V7.includes(e.inputType))return;const t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;const r=B7(e);if(r==null)return;const a=this.quill.selection.normalizeNative(t),l=a?this.quill.selection.normalizedToRange(a):null;l&&this.replaceText(l,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function B7(n){return typeof n.data=="string"?n.data:n.dataTransfer?.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}const z7=/Mac/i.test(navigator.platform),H7=100,F7=n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||z7&&n.key==="a"&&n.ctrlKey===!0);class $7 extends Vi{isListening=!1;selectionChangeDeadline=0;constructor(e,t){super(e,t),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,t){let{line:r,event:a}=t;if(!(r instanceof ai)||!r.uiNode)return!0;const l=getComputedStyle(r.domNode).direction==="rtl";return l&&a.key!=="ArrowRight"||!l&&a.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(a.shiftKey?1:0),le.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&F7(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+H7,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const t=e.getRangeAt(0);if(t.collapsed!==!0||t.startOffset!==0)return;const r=this.quill.scroll.find(t.startContainer);if(!(r instanceof ai)||!r.uiNode)return;const a=document.createRange();a.setStartAfter(r.uiNode),a.setEndAfter(r.uiNode),e.removeAllRanges(),e.addRange(a)}}le.register({"blots/block":Zn,"blots/block/embed":Ls,"blots/break":ui,"blots/container":Cl,"blots/cursor":ti,"blots/embed":qv,"blots/inline":Tr,"blots/scroll":ZP,"blots/text":li,"modules/clipboard":T7,"modules/history":M7,"modules/keyboard":$m,"modules/uploader":g2,"modules/input":q7,"modules/uiNode":$7});class G7 extends ci{add(e,t){let r=0;if(t==="+1"||t==="-1"){const a=this.value(e)||0;r=t==="+1"?a+1:a-1}else typeof t=="number"&&(r=t);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}}const K7=new G7("indent","ql-indent",{scope:Oe.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class Y7 extends Zn{static blotName="blockquote";static tagName="blockquote"}class Q7 extends Zn{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class zh extends Cl{}zh.blotName="list-container";zh.tagName="OL";class Hh extends Zn{static create(e){const t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){le.register(zh)}constructor(e,t){super(e,t);const r=t.ownerDocument.createElement("span"),a=l=>{if(!e.isEnabled())return;const c=this.statics.formats(t,e);c==="checked"?(this.format("list","unchecked"),l.preventDefault()):c==="unchecked"&&(this.format("list","checked"),l.preventDefault())};r.addEventListener("mousedown",a),r.addEventListener("touchstart",a),this.attachUI(r)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}}Hh.blotName="list";Hh.tagName="LI";zh.allowedChildren=[Hh];Hh.requiredContainer=zh;class Yv extends Tr{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class X7 extends Yv{static blotName="italic";static tagName=["EM","I"]}class cm extends Tr{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return y2(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}}function y2(n,e){const t=document.createElement("a");t.href=n;const r=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(r)>-1}class W7 extends Tr{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class Z7 extends Yv{static blotName="strike";static tagName=["S","STRIKE"]}class J7 extends Tr{static blotName="underline";static tagName="U"}class eU extends qv{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const vT=["alt","height","width"];let tU=class extends hs{static blotName="image";static tagName="IMG";static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return vT.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return y2(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){vT.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}};const bT=["height","width"];class nU extends Ls{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return bT.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}static sanitize(e){return cm.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){bT.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const Ju=new ci("code-token","hljs",{scope:Oe.INLINE});class Ra extends Tr{static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(Sr.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,r){super(e,t,r),Ju.add(this.domNode,r)}format(e,t){e!==Ra.blotName?super.format(e,t):t?Ju.add(this.domNode,t):(Ju.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Ju.value(this.domNode)||this.unwrap()}}Ra.blotName="code-token";Ra.className="ql-token";class Os extends Sr{static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),Ra.blotName,!1),super.replaceWith(e,t)}}class oh extends Rl{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===Os.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,t)}))}formatAt(e,t,r,a){r===Os.blotName&&(this.forceNext=!0),super.formatAt(e,t,r,a)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const a=`${Array.from(this.domNode.childNodes).filter(c=>c!==this.uiNode).map(c=>c.textContent).join(`
`)}
`,l=Os.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==a){if(a.trim().length>0||this.cachedText==null){const c=this.children.reduce((f,p)=>f.concat(n2(p,!1)),new Ie),h=e(a,l);c.diff(h).reduce((f,p)=>{let{retain:v,attributes:b}=p;return v?(b&&Object.keys(b).forEach(_=>{[Os.blotName,Ra.blotName].includes(_)&&this.formatAt(f,v,_,b[_])}),f+v):f},0)}this.cachedText=a,this.forceNext=!1}}html(e,t){const[r]=this.children.find(e);return`<pre data-language="${r?Os.formats(r.domNode):"plain"}">
${Fm(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const t=Os.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}oh.allowedChildren=[Os];Os.requiredContainer=oh;Os.allowedChildren=[Ra,ti,li,ui];const rU=(n,e,t)=>{if(typeof n.versionString=="string"){const r=n.versionString.split(".")[0];if(parseInt(r,10)>=11)return n.highlight(t,{language:e}).value}return n.highlight(e,t).value};class v2 extends Vi{static register(){le.register(Ra,!0),le.register(Os,!0),le.register(oh,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,a)=>{let{key:l}=a;return r[l]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(le.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof oh))return;const t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:a,label:l}=r;const c=t.ownerDocument.createElement("option");c.textContent=l,c.setAttribute("value",a),t.appendChild(c)}),t.addEventListener("change",()=>{e.format(Os.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=Os.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(le.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(le.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(oh):[e]).forEach(l=>{l.highlight(this.highlightBlot,t)}),this.quill.update(le.sources.SILENT),r!=null&&this.quill.setSelection(r,le.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return Fm(e).split(`
`).reduce((a,l,c)=>(c!==0&&a.insert(`
`,{[Sr.blotName]:t}),a.insert(l)),new Ie);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(Sr.className),r.innerHTML=rU(this.options.hljs,t,e),Kv(this.quill.scroll,r,[(a,l)=>{const c=Ju.value(a);return c?l.compose(new Ie().retain(l.length(),{[Ra.blotName]:c})):l}],[(a,l)=>a.data.split(`
`).reduce((c,h,f)=>(f!==0&&c.insert(`
`,{[Sr.blotName]:t}),c.insert(h)),l)],new WeakMap)}}v2.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class ni extends Zn{static blotName="table";static tagName="TD";static create(e){const t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",Qv()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===ni.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class xl extends Cl{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),t=this.children.tail.formats(),r=this.next.children.head.formats(),a=this.next.children.tail.formats();return e.table===t.table&&e.table===r.table&&e.table===a.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;const r=t.formats(),a=t.next.formats();if(r.table!==a.table){const l=this.splitAfter(t);l&&l.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class So extends Cl{static blotName="table-body";static tagName="TBODY"}class um extends Cl{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(xl),t=e.reduce((r,a)=>Math.max(a.children.length,r),0);e.forEach(r=>{new Array(t-r.children.length).fill(0).forEach(()=>{let a;r.children.head!=null&&(a=ni.formats(r.children.head.domNode));const l=this.scroll.create(ni.blotName,a);r.appendChild(l),l.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){const[t]=this.descendant(So);t==null||t.children.head==null||t.children.forEach(r=>{const a=r.children.at(e);a?.remove()})}insertColumn(e){const[t]=this.descendant(So);t==null||t.children.head==null||t.children.forEach(r=>{const a=r.children.at(e),l=ni.formats(r.children.head.domNode),c=this.scroll.create(ni.blotName,l);r.insertBefore(c,a)})}insertRow(e){const[t]=this.descendant(So);if(t==null||t.children.head==null)return;const r=Qv(),a=this.scroll.create(xl.blotName);t.children.head.children.forEach(()=>{const c=this.scroll.create(ni.blotName,r);a.appendChild(c)});const l=t.children.at(e);t.insertBefore(a,l)}rows(){const e=this.children.head;return e==null?[]:e.children.map(t=>t)}}um.allowedChildren=[So];So.requiredContainer=um;So.allowedChildren=[xl];xl.requiredContainer=So;xl.allowedChildren=[ni];ni.requiredContainer=xl;function Qv(){return`row-${Math.random().toString(36).slice(2,6)}`}class sU extends Vi{static register(){le.register(ni),le.register(xl),le.register(So),le.register(um)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(um).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(le.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(le.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const t=e.offset();e.remove(),this.quill.update(le.sources.USER),this.quill.setSelection(t,le.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[t,r]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==ni.blotName)return[null,null,null,-1];const a=t.parent;return[a.parent.parent,a,t,r]}insertColumn(e){const t=this.quill.getSelection();if(!t)return;const[r,a,l]=this.getTable(t);if(l==null)return;const c=l.cellOffset();r.insertColumn(c+e),this.quill.update(le.sources.USER);let h=a.rowOffset();e===0&&(h+=1),this.quill.setSelection(t.index+h,t.length,le.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const t=this.quill.getSelection();if(!t)return;const[r,a,l]=this.getTable(t);if(l==null)return;const c=a.rowOffset();r.insertRow(c+e),this.quill.update(le.sources.USER),e>0?this.quill.setSelection(t,le.sources.SILENT):this.quill.setSelection(t.index+a.children.length,t.length,le.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){const r=this.quill.getSelection();if(r==null)return;const a=new Array(e).fill(0).reduce(l=>{const c=new Array(t).fill(`
`).join("");return l.insert(c,{table:Qv()})},new Ie().retain(r.index));this.quill.updateContents(a,le.sources.USER),this.quill.setSelection(r.index,le.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(le.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(le.events.TEXT_CHANGE,(r,a,l)=>{l===le.sources.USER&&this.balanceTables()}),!0):!1)})}}const xT=La("quill:toolbar");class Xv extends Vi{constructor(e,t){if(super(e,t),Array.isArray(this.options.container)){const r=document.createElement("div");r.setAttribute("role","toolbar"),iU(r,this.options.container),e.container?.parentNode?.insertBefore(r,e.container),this.container=r}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){xT.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{const a=this.options.handlers?.[r];a&&this.addHandler(r,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(le.events.EDITOR_CHANGE,()=>{const[r]=this.quill.selection.getRange();this.update(r)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(a=>a.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){xT.warn("ignoring attaching to nonexistent format",t,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,a=>{let l;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const h=e.options[e.selectedIndex];h.hasAttribute("selected")?l=!1:l=h.value||!1}else e.classList.contains("ql-active")?l=!1:l=e.value||!e.hasAttribute("value"),a.preventDefault();this.quill.focus();const[c]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,l);else if(this.quill.scroll.query(t).prototype instanceof hs){if(l=prompt(`Enter ${t}`),!l)return;this.quill.updateContents(new Ie().retain(c.index).delete(c.length).insert({[t]:l}),le.sources.USER)}else this.quill.format(t,l,le.sources.USER);this.update(c)}),this.controls.push([t,e])}update(e){const t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[a,l]=r;if(l.tagName==="SELECT"){let c=null;if(e==null)c=null;else if(t[a]==null)c=l.querySelector("option[selected]");else if(!Array.isArray(t[a])){let h=t[a];typeof h=="string"&&(h=h.replace(/"/g,'\\"')),c=l.querySelector(`option[value="${h}"]`)}c==null?(l.value="",l.selectedIndex=-1):c.selected=!0}else if(e==null)l.classList.remove("ql-active"),l.setAttribute("aria-pressed","false");else if(l.hasAttribute("value")){const c=t[a],h=c===l.getAttribute("value")||c!=null&&c.toString()===l.getAttribute("value")||c==null&&!l.getAttribute("value");l.classList.toggle("ql-active",h),l.setAttribute("aria-pressed",h.toString())}else{const c=t[a]!=null;l.classList.toggle("ql-active",c),l.setAttribute("aria-pressed",c.toString())}})}}Xv.DEFAULTS={};function _T(n,e,t){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),t!=null?(r.value=t,r.setAttribute("aria-label",`${e}: ${t}`)):r.setAttribute("aria-label",e),n.appendChild(r)}function iU(n,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{const r=document.createElement("span");r.classList.add("ql-formats"),t.forEach(a=>{if(typeof a=="string")_T(r,a);else{const l=Object.keys(a)[0],c=a[l];Array.isArray(c)?aU(r,l,c):_T(r,l,c)}}),n.appendChild(r)})}function aU(n,e,t){const r=document.createElement("select");r.classList.add(`ql-${e}`),t.forEach(a=>{const l=document.createElement("option");a!==!1?l.setAttribute("value",String(a)):l.setAttribute("selected","selected"),r.appendChild(l)}),n.appendChild(r)}Xv.DEFAULTS={container:null,handlers:{clean(){const n=this.quill.getSelection();if(n!=null)if(n.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,Oe.INLINE)!=null&&this.quill.format(t,!1,le.sources.USER)})}else this.quill.removeFormat(n.index,n.length,le.sources.USER)},direction(n){const{align:e}=this.quill.getFormat();n==="rtl"&&e==null?this.quill.format("align","right",le.sources.USER):!n&&e==="right"&&this.quill.format("align",!1,le.sources.USER),this.quill.format("direction",n,le.sources.USER)},indent(n){const e=this.quill.getSelection(),t=this.quill.getFormat(e),r=parseInt(t.indent||0,10);if(n==="+1"||n==="-1"){let a=n==="+1"?1:-1;t.direction==="rtl"&&(a*=-1),this.quill.format("indent",r+a,le.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,le.sources.USER)},list(n){const e=this.quill.getSelection(),t=this.quill.getFormat(e);n==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,le.sources.USER):this.quill.format("list","unchecked",le.sources.USER):this.quill.format("list",n,le.sources.USER)}}};const oU='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',lU='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',cU='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',uU='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',hU='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',dU='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',fU='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',mU='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',ET='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',pU='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',gU='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',yU='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',vU='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',bU='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',xU='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',_U='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',EU='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',wU='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',TU='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',AU='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',SU='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',NU='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',CU='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',RU='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',IU='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',jU='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',OU='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',DU='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',LU='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',kU='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',MU='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',PU='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',UU='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',wh={align:{"":oU,center:lU,right:cU,justify:uU},background:hU,blockquote:dU,bold:fU,clean:mU,code:ET,"code-block":ET,color:pU,direction:{"":gU,rtl:yU},formula:vU,header:{1:bU,2:xU,3:_U,4:EU,5:wU,6:TU},italic:AU,image:SU,indent:{"+1":NU,"-1":CU},link:RU,list:{bullet:IU,check:jU,ordered:OU},script:{sub:DU,super:LU},strike:kU,table:MU,underline:PU,video:UU},VU='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let wT=0;function TT(n,e){n.setAttribute(e,`${n.getAttribute(e)!=="true"}`)}class Gm{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),TT(this.label,"aria-expanded"),TT(this.options,"aria-hidden")}buildItem(e){const t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&t.setAttribute("data-value",r),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",a=>{switch(a.key){case"Enter":this.selectItem(t,!0),a.preventDefault();break;case"Escape":this.escape(),a.preventDefault();break}}),t}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=VU,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${wT}`,wT+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{const r=this.buildItem(t);e.appendChild(r),t.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}}class b2 extends Gm{constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);const r=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=a:r.style.fill=a)}}class x2 extends Gm{constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=t[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const qU=n=>{const{overflowY:e}=getComputedStyle(n,null);return e!=="visible"&&e!=="clip"};class _2{constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,qU(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const a=this.boundsContainer.getBoundingClientRect(),l=this.root.getBoundingClientRect();let c=0;if(l.right>a.right&&(c=a.right-l.right,this.root.style.left=`${t+c}px`),l.left<a.left&&(c=a.left-l.left,this.root.style.left=`${t+c}px`),l.bottom>a.bottom){const h=l.bottom-l.top,f=e.bottom-e.top+h;this.root.style.top=`${r-f}px`,this.root.classList.add("ql-flip")}return c}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const BU=[!1,"center","right","justify"],zU=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],HU=[!1,"serif","monospace"],FU=["1","2","3",!1],$U=["small",!1,"large","huge"];class Fh extends eu{constructor(e,t){super(e,t);const r=a=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(a.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(l=>{l.container.contains(a.target)||l.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(l=>{if(l.startsWith("ql-")&&(l=l.slice(3),t[l]!=null))if(l==="direction")r.innerHTML=t[l][""]+t[l].rtl;else if(typeof t[l]=="string")r.innerHTML=t[l];else{const c=r.value||"";c!=null&&t[l][c]&&(r.innerHTML=t[l][c])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(a=>{if(a.classList.contains("ql-align")&&(a.querySelector("option")==null&&Fu(a,BU),typeof t.align=="object"))return new x2(a,t.align);if(a.classList.contains("ql-background")||a.classList.contains("ql-color")){const l=a.classList.contains("ql-background")?"background":"color";return a.querySelector("option")==null&&Fu(a,zU,l==="background"?"#ffffff":"#000000"),new b2(a,t[l])}return a.querySelector("option")==null&&(a.classList.contains("ql-font")?Fu(a,HU):a.classList.contains("ql-header")?Fu(a,FU):a.classList.contains("ql-size")&&Fu(a,$U)),new Gm(a)});const r=()=>{this.pickers.forEach(a=>{a.update()})};this.quill.on(Ce.events.EDITOR_CHANGE,r)}}Fh.DEFAULTS=Ao({},eu.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class E2 extends _2{constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,Ce.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,Ce.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=GU(e);case"formula":{if(!e)break;const t=this.quill.getSelection(!0);if(t!=null){const r=t.index+t.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,Ce.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",Ce.sources.USER),this.quill.setSelection(r+2,Ce.sources.USER)}break}}this.textbox.value="",this.hide()}}function GU(n){let e=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:n}function Fu(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const a=document.createElement("option");r===t?a.setAttribute("selected","selected"):a.setAttribute("value",String(r)),n.appendChild(a)})}const KU=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class YU extends E2{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,t){super(e,t),this.quill.on(Ce.events.EDITOR_CHANGE,(r,a,l,c)=>{if(r===Ce.events.SELECTION_CHANGE)if(a!=null&&a.length>0&&c===Ce.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const h=this.quill.getLines(a.index,a.length);if(h.length===1){const f=this.quill.getBounds(a);f!=null&&this.position(f)}else{const f=h[h.length-1],p=this.quill.getIndex(f),v=Math.min(f.length()-1,a.index+a.length-p),b=this.quill.getBounds(new bl(p,v));b!=null&&this.position(b)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Ce.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){const t=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",t!==0&&(r.style.marginLeft=`${-1*t-r.offsetWidth/2}px`),t}}class w2 extends Fh{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=KU),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new YU(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),wh),this.buildPickers(e.container.querySelectorAll("select"),wh))}}w2.DEFAULTS=Ao({},Fh.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1,le.sources.USER)}}}}});const QU=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class XU extends E2{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,Ce.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(Ce.events.SELECTION_CHANGE,(e,t,r)=>{if(e!=null){if(e.length===0&&r===Ce.sources.USER){const[a,l]=this.quill.scroll.descendant(cm,e.index);if(a!=null){this.linkRange=new bl(e.index-l,a.length());const c=cm.formats(a.domNode);this.preview.textContent=c,this.preview.setAttribute("href",c),this.show();const h=this.quill.getBounds(this.linkRange);h!=null&&this.position(h);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class T2 extends Fh{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=QU),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),wh),this.buildPickers(e.container.querySelectorAll("select"),wh),this.tooltip=new XU(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,r)=>{e.handlers.link.call(e,!r.format.link)}))}}T2.DEFAULTS=Ao({},Fh.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){const e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);const{tooltip:r}=this.quill.theme;r.edit("link",t)}else this.quill.format("link",!1,le.sources.USER)}}}}});le.register({"attributors/attribute/direction":o2,"attributors/class/align":s2,"attributors/class/background":t7,"attributors/class/color":e7,"attributors/class/direction":l2,"attributors/class/font":h2,"attributors/class/size":f2,"attributors/style/align":i2,"attributors/style/background":Hv,"attributors/style/color":zv,"attributors/style/direction":c2,"attributors/style/font":d2,"attributors/style/size":m2},!0);le.register({"formats/align":s2,"formats/direction":l2,"formats/indent":K7,"formats/background":Hv,"formats/color":zv,"formats/font":h2,"formats/size":f2,"formats/blockquote":Y7,"formats/code-block":Sr,"formats/header":Q7,"formats/list":Hh,"formats/bold":Yv,"formats/code":Fv,"formats/italic":X7,"formats/link":cm,"formats/script":W7,"formats/strike":Z7,"formats/underline":J7,"formats/formula":eU,"formats/image":tU,"formats/video":nU,"modules/syntax":v2,"modules/table":sU,"modules/toolbar":Xv,"themes/bubble":w2,"themes/snow":T2,"ui/icons":wh,"ui/picker":Gm,"ui/icon-picker":x2,"ui/color-picker":b2,"ui/tooltip":_2},!0);class jl extends Ln.Component{constructor(e){super(e),this.editingAreaRef=M.createRef(),this.containerRef=M.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(r,a,l,c)=>{r==="text-change"?this.onEditorChangeText?.(this.editor.root.innerHTML,a,c,this.unprivilegedEditor):r==="selection-change"&&this.onEditorChangeSelection?.(a,c,this.unprivilegedEditor)};const t=this.isControlled()?e.value:e.defaultValue;this.value=t??""}validateProps(e){if(Ln.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Ln.Children.count(e.children)&&Ln.Children.only(e.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,t){if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){const r=this.getEditorContents(),a=e.value??"";this.isEqualValue(a,r)||this.setEditorContents(this.editor,a)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(r=>!go(e[r],this.props[r]))}shouldComponentRegenerate(e){return this.dirtyProps.some(t=>!go(e[t],this.props[t]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,t){if(this.editor&&this.shouldComponentRegenerate(e)){const r=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:r,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){const{delta:r,selection:a}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const l=this.editor;l.setContents(r),AT(()=>this.setEditorSelection(l,a))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const e=this.props.modules?.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const r=this.containerRef.current?.querySelector(".ql-toolbar");r&&r.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,t){const r=new le(e,t);return t.tabIndex!=null&&this.setEditorTabIndex(r,t.tabIndex),this.hookEditor(r),r}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,t){return this.isDelta(e)&&this.isDelta(t)?go(e.ops,t.ops):go(e,t)}setEditorContents(e,t){this.value=t;const r=this.getEditorSelection();typeof t=="string"?e.setContents(e.clipboard.convert({html:t})):e.setContents(t),AT(()=>this.setEditorSelection(e,r))}setEditorSelection(e,t){if(this.selection=t,t){const r=e.getLength();t.index=Math.max(0,Math.min(t.index,r-1)),t.length=Math.max(0,Math.min(t.length,r-1-t.index)),e.setSelection(t)}}setEditorTabIndex(e,t){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=t)}setEditorReadOnly(e,t){t?e.disable():e.enable()}makeUnprivilegedEditor(e){const t=e;return{getHTML:()=>t.root.innerHTML,getSemanticHTML:t.getSemanticHTML.bind(t),getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:t}=this.props,{generation:r}=this.state,a={key:r,ref:this.editingAreaRef};return Ln.Children.count(e)?Ln.cloneElement(Ln.Children.only(e),a):t?Ln.createElement("pre",{...a}):Ln.createElement("div",{...a})}render(){return Ln.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,t,r,a){if(!this.editor)return;const l=this.isDelta(this.value)?a.getContents():a.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=l,this.props.onChange?.(e,t,r,a))}onEditorChangeSelection(e,t,r){if(!this.editor)return;const a=this.getEditorSelection(),l=!a&&e,c=a&&!e;go(e,a)||(this.selection=e,this.props.onChangeSelection?.(e,t,r),l?this.props.onFocus?.(e,t,r):c&&this.props.onBlur?.(a,t,r))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}jl.displayName="React Quill";jl.Quill=le;jl.defaultProps={theme:"snow",modules:{},readOnly:!1};function AT(n){Promise.resolve().then(n)}const WU={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},ZU=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],JU=()=>{const[n,e]=M.useState([]),[t,r]=M.useState(!0),[a,l]=M.useState(!1),[c,h]=M.useState(null),[f,p]=M.useState({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""});M.useEffect(()=>{v()},[]);const v=async()=>{r(!0);try{const S=Wn(ut(Ee,"news"),us("timestamp","desc")),R=(await en(S)).docs.map(U=>({id:U.id,...U.data()}));e(R)}catch(S){console.error("Error fetching news:",S)}finally{r(!1)}},b=async S=>{if(window.confirm("Are you sure you want to delete this news item?"))try{await Vh($e(Ee,"news",S)),v()}catch(O){console.error("Error deleting news:",O),alert("Failed to delete news item.")}},_=async S=>{S.preventDefault();try{const O=f.affectedCurrencies.split(",").map(R=>R.trim().toUpperCase()).filter(R=>R);c?await dr($e(Ee,"news",c),{title:f.title,impact:f.impact,content:f.content,image:f.image,affectedCurrencies:O,timestamp:gl()}):await Tl(ut(Ee,"news"),{title:f.title,impact:f.impact,content:f.content,image:f.image,affectedCurrencies:O,timestamp:gl()}),l(!1),h(null),p({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""}),v()}catch(O){console.error("Error saving news:",O),alert("Failed to save news item.")}},T=S=>{p({title:S.title,impact:S.impact,content:S.content,image:S.image,affectedCurrencies:S.affectedCurrencies?S.affectedCurrencies.join(", "):""}),h(S.id),l(!0)};return m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage News"}),m.jsx(yt,{onClick:()=>{l(!a),a&&(h(null),p({title:"",impact:"Medium",content:"",image:"",affectedCurrencies:""}))},children:a?"Cancel":"Post New Alert"})]}),a&&m.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:c?"Edit Market Update":"New Market Update"}),m.jsxs("form",{onSubmit:_,className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),m.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:f.title,onChange:S=>p({...f,title:S.target.value}),placeholder:"e.g., NFP Beats Expectations"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Impact Level"}),m.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:f.impact,onChange:S=>p({...f,impact:S.target.value}),children:[m.jsx("option",{value:"Low",children:"Low (Yellow)"}),m.jsx("option",{value:"Medium",children:"Medium (Orange)"}),m.jsx("option",{value:"High",children:"High (Red)"})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Content/Summary"}),m.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:m.jsx(jl,{theme:"snow",value:f.content,onChange:S=>p({...f,content:S}),modules:WU,formats:ZU,className:"h-96 mb-12"})})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Image URL (Optional)"}),m.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:f.image,onChange:S=>p({...f,image:S.target.value}),placeholder:"https://..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Affected Currencies (comma separated)"}),m.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:f.affectedCurrencies,onChange:S=>p({...f,affectedCurrencies:S.target.value}),placeholder:"USD, EUR, JPY"})]})]}),m.jsx("div",{className:"flex justify-end pt-4",children:m.jsx(yt,{type:"submit",variant:"primary",children:c?"Update News":"Publish News"})})]})]}),m.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden",children:m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-800",children:[m.jsx("thead",{className:"bg-gray-900/50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Title"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Impact"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),m.jsx("tbody",{className:"divide-y divide-gray-800",children:t?m.jsx("tr",{children:m.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-400",children:"Loading data..."})}):n.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-400",children:"No news posted yet."})}):n.map(S=>m.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.timestamp?.seconds?new Date(S.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-medium",children:S.title}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${S.impact==="High"?"bg-red-500/20 text-red-400":S.impact==="Medium"?"bg-orange-500/20 text-orange-400":"bg-green-500/20 text-green-400"}`,children:S.impact})}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[m.jsx("button",{onClick:()=>T(S),className:"text-primary hover:text-primary/80 transition-colors mr-4",children:"Edit"}),m.jsx("button",{onClick:()=>b(S.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Delete"})]})]},S.id))})]})})})]})},eV={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},tV=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],nV=()=>{const[n,e]=M.useState([]),[t,r]=M.useState(!0),[a,l]=M.useState(!1),[c,h]=M.useState(null),[f,p]=M.useState({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}),[v,b]=M.useState({});M.useEffect(()=>{_();const R=jh(Le,async U=>{if(U)try{const z=$e(Ee,"users",U.uid),Y=await mr(z);Y.exists()&&b(Y.data())}catch(z){console.error("Error fetching profile:",z)}});return()=>R()},[]);const _=async()=>{r(!0);try{const R=Wn(ut(Ee,"analysis"),us("timestamp","desc")),z=(await en(R)).docs.map(Y=>({id:Y.id,...Y.data()}));e(z)}catch(R){console.error("Error fetching analysis:",R)}finally{r(!1)}},T=async R=>{if(window.confirm("Are you sure you want to delete this analysis?"))try{await Vh($e(Ee,"analysis",R)),_()}catch(U){console.error("Error deleting post:",U),alert("Failed to delete post.")}},S=async R=>{R.preventDefault();const U={...f,...v,timestamp:gl()};try{c?await dr($e(Ee,"analysis",c),U):await Tl(ut(Ee,"analysis"),U),l(!1),h(null),p({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}),_()}catch(z){console.error("Error saving post:",z),alert("Failed to save analysis.")}},O=R=>{p({title:R.title,pair:R.pair,direction:R.direction,content:R.content,image:R.image,analysisType:R.analysisType||"Technical Analysis"}),h(R.id),l(!0)};return m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage Analysis"}),m.jsx(yt,{onClick:()=>{l(!a),a&&(h(null),p({title:"",pair:"EUR/USD",direction:"Neutral",content:"",image:"",analysisType:"Technical Analysis"}))},children:a?"Cancel":"New Analysis"})]}),a&&m.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:c?"Edit Analysis":"Post Technical Breakdown"}),m.jsxs("form",{onSubmit:S,className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Pair / Asset"}),m.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none uppercase",value:f.pair,onChange:R=>p({...f,pair:R.target.value}),placeholder:"e.g. GBP/JPY"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Direction"}),m.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:f.direction,onChange:R=>p({...f,direction:R.target.value}),children:[m.jsx("option",{value:"Neutral",children:"Neutral (Gray)"}),m.jsx("option",{value:"Bullish",children:"Bullish (Green)"}),m.jsx("option",{value:"Bearish",children:"Bearish (Red)"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analysis Type"}),m.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:f.analysisType,onChange:R=>p({...f,analysisType:R.target.value}),children:[m.jsx("option",{value:"Technical Analysis",children:"Technical Analysis"}),m.jsx("option",{value:"Fundamental Analysis",children:"Fundamental Analysis"}),m.jsx("option",{value:"Sentiment Analysis",children:"Sentiment Analysis"})]})]})]}),m.jsx("div",{className:"grid grid-cols-1 gap-4",children:m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Image URL (Chart)"}),m.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:f.image,onChange:R=>p({...f,image:R.target.value}),placeholder:"https://..."})]})}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),m.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:f.title,onChange:R=>p({...f,title:R.target.value}),placeholder:"e.g. Double Top formation on 4H"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analysis Content"}),m.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:m.jsx(jl,{theme:"snow",value:f.content,onChange:R=>p({...f,content:R}),modules:eV,formats:tV,className:"h-96 mb-12"})})]}),m.jsx("div",{className:"flex justify-end pt-4",children:m.jsx(yt,{type:"submit",variant:"primary",children:c?"Update Analysis":"Post Analysis"})})]})]}),m.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden",children:m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-800",children:[m.jsx("thead",{className:"bg-gray-900/50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Pair"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Direction"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Title"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),m.jsx("tbody",{className:"divide-y divide-gray-800",children:t?m.jsx("tr",{children:m.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-400",children:"Loading data..."})}):n.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-400",children:"No analysis posted yet."})}):n.map(R=>m.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R.timestamp?.seconds?new Date(R.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-bold",children:R.pair}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${R.direction==="Bullish"?"bg-green-500/20 text-green-400":R.direction==="Bearish"?"bg-red-500/20 text-red-400":"bg-gray-700 text-gray-300"}`,children:R.direction})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white max-w-xs truncate",children:R.title}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[m.jsx("button",{onClick:()=>O(R),className:"text-primary hover:text-primary/80 transition-colors mr-4",children:"Edit"}),m.jsx("button",{onClick:()=>T(R.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Delete"})]})]},R.id))})]})})})]})},A2={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},S2=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],rV=()=>{const[n,e]=M.useState([]),[t,r]=M.useState(!1),[a,l]=M.useState({name:"",description:"",image:""}),[c,h]=M.useState(null),[f,p]=M.useState(!0);M.useEffect(()=>{v()},[]);const v=async()=>{p(!0);try{const T=await en(ut(Ee,"paths"));e(T.docs.map(S=>({id:S.id,...S.data()})))}catch(T){console.error("Error fetching paths:",T)}finally{p(!1)}},b=async T=>{T.preventDefault();try{c?await dr($e(Ee,"paths",c),a):await Tl(ut(Ee,"paths"),{...a,createdAt:gl()}),r(!1),h(null),l({name:"",description:"",image:""}),v()}catch(S){console.error("Error saving path:",S),alert("Failed to save path")}},_=async T=>{if(window.confirm("Delete this path?"))try{await Vh($e(Ee,"paths",T)),v()}catch(S){console.error("Error deleting path:",S)}};return m.jsxs("div",{className:"animate-fade-in",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-white",children:"Academy Paths"}),m.jsx(yt,{onClick:()=>{r(!t),t&&(h(null),l({name:"",description:"",image:""}))},children:t?"Cancel":"New Path"})]}),t&&m.jsx("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8",children:m.jsxs("form",{onSubmit:b,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Path Name"}),m.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.name,onChange:T=>l({...a,name:T.target.value}),placeholder:"e.g. Technical Analysis"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),m.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-24",value:a.description,onChange:T=>l({...a,description:T.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Cover Image URL"}),m.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:a.image,onChange:T=>l({...a,image:T.target.value})})]}),m.jsx("div",{className:"flex justify-end",children:m.jsx(yt,{type:"submit",variant:"primary",children:c?"Update Path":"Create Path"})})]})}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(T=>m.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden group",children:[m.jsxs("div",{className:"h-40 bg-gray-900 relative",children:[T.image&&m.jsx("img",{src:T.image,alt:T.name,className:"w-full h-full object-cover"}),m.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{onClick:()=>{l(T),h(T.id),r(!0)},className:"bg-primary/80 p-1 rounded text-white hover:bg-primary",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),m.jsx("button",{onClick:()=>_(T.id),className:"bg-red-500/80 p-1 rounded text-white hover:bg-red-600",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-bold text-white text-lg",children:T.name}),m.jsx("p",{className:"text-gray-400 text-sm mt-1 line-clamp-2",children:T.description})]})]},T.id))})]})},sV=()=>{const[n,e]=M.useState("paths"),[t,r]=M.useState([]),[a,l]=M.useState([]),[c,h]=M.useState(null),[f,p]=M.useState(!0),[v,b]=M.useState(!1),[_,T]=M.useState(null),[S,O]=M.useState({title:"",path:"",description:"",image:"",level:"Beginner",instructorName:"Forex Volcano",instructorBio:"",instructorImage:""});M.useEffect(()=>{R()},[]);const R=async()=>{p(!0);try{const ie=(await en(ut(Ee,"paths"))).docs.map(k=>k.data().name);l(ie);const ve=Wn(ut(Ee,"courses"),us("order","asc")),L=await en(ve);r(L.docs.map(k=>({id:k.id,...k.data()})))}catch(Q){console.error("Error fetching data:",Q)}finally{p(!1)}},U=async Q=>{Q.preventDefault();try{_?await dr($e(Ee,"courses",_),S):await Tl(ut(Ee,"courses"),{...S,order:t.length+1,createdAt:gl()}),b(!1),T(null),O({title:"",path:"",description:"",image:"",level:"Beginner",instructorName:"Forex Volcano",instructorBio:"",instructorImage:""}),R()}catch(ie){console.error("Error saving course:",ie),alert("Failed to save course")}},z=Q=>{O({title:Q.title,description:Q.description,path:Q.path||"",image:Q.image,level:Q.level||"Beginner",instructorName:Q.instructorName||"Forex Volcano",instructorBio:Q.instructorBio||"",instructorImage:Q.instructorImage||""}),T(Q.id),b(!0)},Y=async Q=>{if(window.confirm("Delete this course? All lessons inside it might become orphaned."))try{await Vh($e(Ee,"courses",Q)),R(),c?.id===Q&&h(null)}catch(ie){console.error("Error deleting course:",ie)}};return c?m.jsx(iV,{course:c,onBack:()=>h(null)}):m.jsxs("div",{children:[m.jsxs("div",{className:"flex space-x-6 mb-8 border-b border-gray-800",children:[m.jsx("button",{onClick:()=>e("paths"),className:`pb-4 px-2 font-medium transition-colors ${n==="paths"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"1. Manage Paths"}),m.jsx("button",{onClick:()=>e("courses"),className:`pb-4 px-2 font-medium transition-colors ${n==="courses"?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-white"}`,children:"2. Manage Courses"})]}),n==="paths"?m.jsx(rV,{}):m.jsxs("div",{className:"animate-fade-in",children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage Courses"}),m.jsx(yt,{onClick:()=>{b(!v),v&&T(null)},children:v?"Cancel":"New Course"})]}),v&&m.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:_?"Edit Course":"Create New Course"}),m.jsxs("form",{onSubmit:U,className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Course Title"}),m.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.title,onChange:Q=>O({...S,title:Q.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Path / Category"}),m.jsxs("select",{required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.path,onChange:Q=>O({...S,path:Q.target.value}),children:[m.jsx("option",{value:"",children:"Select Path..."}),a.map(Q=>m.jsx("option",{value:Q,children:Q},Q))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Level"}),m.jsxs("select",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.level,onChange:Q=>O({...S,level:Q.target.value}),children:[m.jsx("option",{children:"Beginner"}),m.jsx("option",{children:"Intermediate"}),m.jsx("option",{children:"Advanced"})]})]})]}),m.jsxs("div",{className:"border-t border-gray-800 pt-4 mt-4",children:[m.jsx("h3",{className:"text-sm font-bold text-primary mb-3",children:"Instructor Details"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Name"}),m.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.instructorName,onChange:Q=>O({...S,instructorName:Q.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Image URL"}),m.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.instructorImage,onChange:Q=>O({...S,instructorImage:Q.target.value})})]}),m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Instructor Bio"}),m.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-20",value:S.instructorBio,onChange:Q=>O({...S,instructorBio:Q.target.value})})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),m.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:m.jsx(jl,{theme:"snow",value:S.description,onChange:Q=>O({...S,description:Q}),modules:A2,formats:S2,className:"h-48 mb-12"})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Cover Image URL"}),m.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:S.image,onChange:Q=>O({...S,image:Q.target.value})})]}),m.jsx("div",{className:"flex justify-end",children:m.jsx(yt,{type:"submit",variant:"primary",children:_?"Update Course":"Create Course"})})]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f?m.jsx("div",{className:"text-gray-400",children:"Loading courses..."}):t.map(Q=>m.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden group hover:border-gray-600 transition-all",children:[m.jsxs("div",{className:"h-40 bg-gray-900 relative",children:[Q.image&&m.jsx("img",{src:Q.image,alt:Q.title,className:"w-full h-full object-cover"}),m.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[m.jsx("button",{onClick:ie=>{ie.stopPropagation(),z(Q)},className:"bg-primary/80 p-1 rounded text-white hover:bg-primary",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),m.jsx("button",{onClick:ie=>{ie.stopPropagation(),Y(Q.id)},className:"bg-red-500/80 p-1 rounded text-white hover:bg-red-600",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),m.jsxs("div",{className:"p-5",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:Q.title}),Q.path&&m.jsx("span",{className:"bg-gray-800 text-xs text-gray-300 px-2 py-1 rounded",children:Q.path})]}),m.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:Q.description}),m.jsx(yt,{variant:"outline",size:"sm",className:"w-full",onClick:()=>h(Q),children:"Manage Lessons"})]})]},Q.id))})]})]})},iV=({course:n,onBack:e})=>{const[t,r]=M.useState([]),[a,l]=M.useState(!1),[c,h]=M.useState(null),[f,p]=M.useState({title:"",videoUrl:"",content:"",duration:"10 min"}),[v,b]=M.useState(!0);M.useEffect(()=>{_()},[n]);const _=async()=>{b(!0);try{const R=Wn(ut(Ee,"courses",n.id,"lessons"),us("order","asc")),U=await en(R);r(U.docs.map(z=>({id:z.id,...z.data()})))}catch(R){console.error("Error fetching lessons:",R);const U=await en(ut(Ee,"courses",n.id,"lessons"));r(U.docs.map(z=>({id:z.id,...z.data()})))}finally{b(!1)}},T=async R=>{R.preventDefault();try{c?await dr($e(Ee,"courses",n.id,"lessons",c),{...f}):await Tl(ut(Ee,"courses",n.id,"lessons"),{...f,order:t.length+1,createdAt:gl()}),l(!1),h(null),p({title:"",videoUrl:"",content:"",duration:"10 min"}),_()}catch(U){console.error("Error saving lesson:",U),alert("Failed to save lesson")}},S=R=>{p({title:R.title,videoUrl:R.videoUrl,content:R.content,duration:R.duration}),h(R.id),l(!0)},O=async R=>{if(window.confirm("Delete this lesson?"))try{await Vh($e(Ee,"courses",n.id,"lessons",R)),_()}catch(U){console.error("Error deleting lesson:",U)}};return m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[m.jsxs("button",{onClick:e,className:"text-gray-400 hover:text-white flex items-center gap-1",children:[m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),m.jsxs("h1",{className:"text-2xl font-bold text-white",children:[m.jsx("span",{className:"text-gray-500 font-normal",children:"Edit Course:"})," ",n.title]})]}),m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("h2",{className:"text-xl font-bold text-white",children:["Lessons (",t.length,")"]}),m.jsx(yt,{onClick:()=>{l(!a),a&&(h(null),p({title:"",videoUrl:"",content:"",duration:"10 min"}))},variant:"secondary",children:a?"Cancel":"Add Lesson"})]}),a&&m.jsx("div",{className:"bg-surface p-6 rounded-xl border border-gray-800 mb-8 animate-fade-in",children:m.jsxs("form",{onSubmit:T,className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Lesson Title"}),m.jsx("input",{type:"text",required:!0,className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:f.title,onChange:R=>p({...f,title:R.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Duration"}),m.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:f.duration,onChange:R=>p({...f,duration:R.target.value}),placeholder:"e.g. 15 min"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Video Embed URL (YouTube/Vimeo)"}),m.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:f.videoUrl,onChange:R=>p({...f,videoUrl:R.target.value}),placeholder:"https://www.youtube.com/embed/..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Lesson Content / Notes"}),m.jsx("div",{className:"bg-white rounded-lg overflow-hidden text-black",children:m.jsx(jl,{theme:"snow",value:f.content,onChange:R=>p({...f,content:R}),modules:A2,formats:S2,className:"h-72 mb-12"})})]}),m.jsx("div",{className:"flex justify-end",children:m.jsx(yt,{type:"submit",variant:"primary",children:c?"Update Lesson":"Save Lesson"})})]})}),m.jsxs("div",{className:"space-y-3",children:[v?m.jsx("div",{className:"text-gray-400",children:"Loading lessons..."}):t.map((R,U)=>m.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-gray-800 flex justify-between items-center group hover:border-gray-600",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-800 text-gray-400 font-bold text-sm",children:U+1}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-white",children:R.title}),m.jsx("div",{className:"text-xs text-gray-500",children:R.duration})]})]}),m.jsxs("div",{className:"flex items-center gap-3 opacity-0 group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{onClick:()=>S(R),className:"text-primary hover:text-primary/80 text-sm",children:"Edit"}),m.jsx("button",{onClick:()=>O(R.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Delete"})]})]},R.id)),t.length===0&&!v&&m.jsx("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:"No lessons yet. Start teaching!"})]})]})},aV=()=>{const[n,e]=M.useState(!0),[t,r]=M.useState(!1),[a,l]=M.useState(null),[c,h]=M.useState({analystName:"",analystImage:"",analystBio:"",twitter:"",linkedin:"",telegram:""});M.useEffect(()=>{const p=jh(Le,async v=>{if(v){l(v);try{const b=$e(Ee,"users",v.uid),_=await mr(b);if(_.exists()){const T=_.data();h(S=>({...S,analystName:T.analystName||"",analystImage:T.analystImage||"",analystBio:T.analystBio||"",twitter:T.twitter||"",linkedin:T.linkedin||"",telegram:T.telegram||""}))}}catch(b){console.error("Error fetching profile:",b)}}e(!1)});return()=>p()},[]);const f=async p=>{if(p.preventDefault(),!!a){r(!0);try{await Mc($e(Ee,"users",a.uid),c,{merge:!0}),alert("Profile updated successfully!")}catch(v){console.error("Error saving profile:",v),alert("Failed to save profile.")}finally{r(!1)}}};return n?m.jsx("div",{className:"text-white",children:"Loading Profile..."}):m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"Analyst Profile Settings"}),m.jsx("div",{className:"bg-surface p-8 rounded-xl border border-gray-800",children:m.jsxs("form",{onSubmit:f,className:"space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsx("div",{className:"md:col-span-2",children:m.jsx("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-800 pb-2",children:"Personal Details"})}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Analyst Name"}),m.jsx("input",{type:"text",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.analystName,onChange:p=>h({...c,analystName:p.target.value}),placeholder:"e.g. John Doe"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Profile Image URL"}),m.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.analystImage,onChange:p=>h({...c,analystImage:p.target.value}),placeholder:"https://..."})]}),m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bio"}),m.jsx("textarea",{className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none h-32 resize-none",value:c.analystBio,onChange:p=>h({...c,analystBio:p.target.value}),placeholder:"Tell us about yourself..."})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pt-6",children:[m.jsx("div",{className:"md:col-span-3",children:m.jsx("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-800 pb-2",children:"Social Connections"})}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Twitter (X) URL"}),m.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.twitter,onChange:p=>h({...c,twitter:p.target.value}),placeholder:"https://twitter.com/..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"LinkedIn URL"}),m.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.linkedin,onChange:p=>h({...c,linkedin:p.target.value}),placeholder:"https://linkedin.com/in/..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Telegram URL"}),m.jsx("input",{type:"url",className:"w-full bg-background border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-primary focus:outline-none",value:c.telegram,onChange:p=>h({...c,telegram:p.target.value}),placeholder:"https://t.me/..."})]})]}),m.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-800",children:m.jsx(yt,{type:"submit",variant:"primary",contentClassName:"px-8",children:t?"Saving...":"Save Profile"})})]})})]})},oV=()=>{const{courseId:n}=Hc(),e=Pi(),[t,r]=M.useState(null),[a,l]=M.useState([]),[c,h]=M.useState(null),[f,p]=M.useState(!0),[v,b]=M.useState(!0);return M.useEffect(()=>{(async()=>{try{p(!0);const T=await mr($e(Ee,"courses",n));if(!T.exists()){alert("Course not found"),e("/dashboard");return}r({id:T.id,...T.data()});const S=Wn(ut(Ee,"courses",n,"lessons"),us("order","asc")),O=await en(S);let R=[];O.empty?R=(await en(ut(Ee,"courses",n,"lessons"))).docs.map(z=>({id:z.id,...z.data()})):R=O.docs.map(U=>({id:U.id,...U.data()})),l(R),R.length>0&&h(R[0])}catch(T){console.error("Error loading course:",T)}finally{p(!1)}})()},[n,e]),f?m.jsx("div",{className:"p-10 text-center text-white",children:"Loading class..."}):t?m.jsxs("div",{className:"flex h-screen bg-background overflow-hidden animate-fade-in",children:[m.jsxs("div",{className:`${v?"w-80":"w-0"} bg-surface border-r border-gray-800 transition-all duration-300 flex flex-col flex-shrink-0 relative`,children:[m.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center",children:[m.jsx("h2",{className:"font-bold text-white truncate max-w-[200px]",children:t.title}),m.jsx("button",{onClick:()=>b(!1),className:"md:hidden text-gray-400",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a.map((_,T)=>m.jsxs("div",{onClick:()=>h(_),className:`p-4 border-b border-gray-800 cursor-pointer transition-colors hover:bg-gray-800/50 flex items-start gap-3
                   ${c?.id===_.id?"bg-primary/10 border-l-4 border-l-primary":"border-l-4 border-l-transparent"}
                 `,children:[m.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-800 text-gray-400 text-xs flex items-center justify-center mt-0.5",children:T+1}),m.jsxs("div",{children:[m.jsx("h4",{className:`text-sm font-medium ${c?.id===_.id?"text-primary":"text-gray-300"}`,children:_.title}),m.jsx("span",{className:"text-xs text-gray-500",children:_.duration||"10 min"})]})]},_.id)),a.length===0&&m.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No lessons available yet."})]}),m.jsx("div",{className:"p-4 border-t border-gray-800",children:m.jsx(ze,{to:"/dashboard",children:m.jsx(yt,{variant:"outline",size:"sm",className:"w-full",children:"Back to Dashboard"})})})]}),m.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[m.jsx("div",{className:"absolute top-4 left-4 z-10",children:m.jsx("button",{onClick:()=>b(!v),className:"bg-surface/80 p-2 rounded-full text-white hover:bg-surface backdrop-blur border border-gray-700 shadow-lg",children:v?m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),c?m.jsxs("div",{className:"flex-1 overflow-y-auto",children:[m.jsx("div",{className:"bg-black aspect-video w-full max-h-[70vh] flex items-center justify-center",children:c.videoUrl?m.jsx("iframe",{src:c.videoUrl,title:c.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):m.jsxs("div",{className:"text-gray-500 text-center",children:[m.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),m.jsx("p",{children:"No video content for this lesson."})]})}),m.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[m.jsx("div",{className:"flex justify-between items-start mb-6",children:m.jsx("h1",{className:"text-2xl font-bold text-white",children:c.title})}),m.jsx("div",{className:"prose prose-invert max-w-none",children:m.jsx("p",{className:"text-gray-300 whitespace-pre-line",children:c.content})})]})]}):m.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"Select a lesson from the sidebar to start."})]})]}):null},lV=()=>{const[n,e]=M.useState([]),[t,r]=M.useState(!0);return M.useEffect(()=>{(async()=>{try{const c=(await en(ut(Ee,"courses"))).docs.map(f=>f.data()),h={};c.forEach(f=>{const p=f.path||"General";h[p]||(h[p]={name:p,count:0,image:f.image}),h[p].count+=1}),e(Object.values(h))}catch(l){console.error("Error fetching paths:",l)}finally{r(!1)}})()},[]),t?m.jsx("div",{className:"p-10 text-center text-white",children:"Loading Academy..."}):m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 animate-fade-in",children:[m.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"My Academy"}),m.jsx("p",{className:"text-gray-400 mb-10",children:"Choose a learning path to start your journey."}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(a=>m.jsx(ze,{to:`/academy/${encodeURIComponent(a.name)}`,className:"group",children:m.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden hover:border-primary transition-all h-full flex flex-col",children:[m.jsxs("div",{className:"h-48 bg-gray-900 relative overflow-hidden",children:[a.image?m.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:m.jsx("svg",{className:"w-12 h-12 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface to-transparent opacity-80"}),m.jsx("div",{className:"absolute bottom-4 left-4",children:m.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-primary transition-colors",children:a.name})})]}),m.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-between",children:[m.jsxs("p",{className:"text-gray-400",children:[a.count," Course",a.count!==1&&"s"," available"]}),m.jsxs("span",{className:"text-primary mt-4 inline-flex items-center text-sm font-medium",children:["Explore Path ",m.jsx("svg",{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]})]})},a.name))}),n.length===0&&m.jsx("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:m.jsx("p",{className:"text-gray-500",children:"No academy paths available yet."})})]})},cV=()=>{const{path:n}=Hc(),e=decodeURIComponent(n),[t,r]=M.useState([]),[a,l]=M.useState(!0);return M.useEffect(()=>{(async()=>{try{const h=Wn(ut(Ee,"courses"),us("order","asc")),v=(await en(h)).docs.map(b=>({id:b.id,...b.data()})).filter(b=>(b.path||"General")===e);r(v)}catch(h){console.error("Error loading courses:",h)}finally{l(!1)}})()},[e]),a?m.jsx("div",{className:"p-10 text-center text-white",children:"Loading Path..."}):m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 animate-fade-in",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx(ze,{to:"/academy",className:"text-gray-500 hover:text-white mb-4 inline-block",children:" Back to Academy"}),m.jsxs("h1",{className:"text-3xl font-bold text-white",children:[m.jsx("span",{className:"text-primary",children:e})," Courses"]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(c=>m.jsx(ze,{to:`/academy/${encodeURIComponent(e)}/${c.id}`,className:"group",children:m.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 overflow-hidden hover:border-gray-600 transition-all h-full",children:[m.jsxs("div",{className:"h-48 bg-gray-900 relative",children:[c.image&&m.jsx("img",{src:c.image,alt:c.title,className:"w-full h-full object-cover"}),m.jsx("div",{className:"absolute top-2 right-2 bg-black/60 backdrop-blur px-2 py-1 rounded text-xs text-white border border-gray-700",children:c.level})]}),m.jsxs("div",{className:"p-5",children:[m.jsx("h3",{className:"text-lg font-bold text-white mb-2 group-hover:text-primary transition-colors",children:c.title}),m.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:c.description}),m.jsx("span",{className:"text-sm font-medium text-white group-hover:underline",children:"Start Learning "})]})]})},c.id))}),t.length===0&&m.jsx("div",{className:"text-center py-20 bg-surface rounded-xl border border-gray-800",children:m.jsx("p",{className:"text-gray-500",children:"No courses found in this path."})})]})},uV=()=>{const{path:n,courseId:e}=Hc(),t=Pi(),[r,a]=M.useState(null),[l,c]=M.useState([]),[h,f]=M.useState(null),[p,v]=M.useState(!0),[b,_]=M.useState(!0),[T,S]=M.useState([]);return M.useEffect(()=>{(async()=>{if(Le.currentUser&&e){const R=$e(db,"users",Le.currentUser.uid,"course_progress",e),U=await mr(R);U.exists()&&S(U.data().completedLessonIds||[])}})()},[e]),M.useEffect(()=>{(async()=>{try{v(!0);const R=await mr($e(db,"courses",e));if(!R.exists()){alert("Course not found"),t(`/academy/${n}`);return}a({id:R.id,...R.data()});const U=Wn(ut(db,"courses",e,"lessons"),us("order","asc")),z=await en(U);let Y=[];z.empty?Y=(await en(ut(db,"courses",e,"lessons"))).docs.map(ie=>({id:ie.id,...ie.data()})):Y=z.docs.map(Q=>({id:Q.id,...Q.data()})),c(Y),Y.length>0&&f(Y[0])}catch(R){console.error("Error loading course:",R)}finally{v(!1)}})()},[e,t,n]),p?m.jsx("div",{className:"p-10 text-center text-white",children:"Loading class..."}):r?m.jsxs("div",{className:"flex bg-background overflow-hidden animate-fade-in",style:{height:"calc(100vh - 64px)"},children:[m.jsxs("div",{className:`${b?"w-80":"w-0"} bg-surface border-r border-gray-800 transition-all duration-300 flex flex-col flex-shrink-0 relative`,children:[m.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50",children:[m.jsx("h2",{className:"font-bold text-white truncate max-w-[200px]",children:r.title}),m.jsx("button",{onClick:()=>_(!1),className:"md:hidden text-gray-400",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto",children:[l.map((O,R)=>m.jsxs("div",{onClick:()=>f(O),className:`p-4 border-b border-gray-800 cursor-pointer transition-colors hover:bg-gray-800/50 flex items-start gap-3
                   ${h?.id===O.id?"bg-primary/10 border-l-4 border-l-primary":"border-l-4 border-l-transparent"}
                 `,children:[m.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-gray-800 text-gray-400 text-xs flex items-center justify-center mt-0.5",children:R+1}),m.jsxs("div",{children:[m.jsx("h4",{className:`text-sm font-medium ${h?.id===O.id?"text-primary":"text-gray-300"}`,children:O.title}),m.jsx("span",{className:"text-xs text-gray-500",children:O.duration||"10 min"})]})]},O.id)),l.length===0&&m.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No lessons available yet."})]}),m.jsx("div",{className:"p-4 border-t border-gray-800",children:m.jsx(ze,{to:`/academy/${n}`,children:m.jsx(Button,{variant:"outline",size:"sm",className:"w-full",children:" Back to Path"})})})]}),m.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[m.jsx("div",{className:"absolute top-4 left-4 z-10",children:m.jsx("button",{onClick:()=>_(!b),className:"bg-surface/80 p-2 rounded-full text-white hover:bg-surface backdrop-blur border border-gray-700 shadow-lg",children:b?m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}):m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),h?m.jsxs("div",{className:"flex-1 overflow-y-auto",children:[m.jsx("div",{className:"bg-black aspect-video w-full max-h-[60vh] flex items-center justify-center",children:h.videoUrl?m.jsx("iframe",{src:h.videoUrl,title:h.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):m.jsxs("div",{className:"text-gray-500 text-center",children:[m.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),m.jsx("p",{children:"No video content."})]})}),m.jsxs("div",{className:"max-w-4xl mx-auto p-8 pb-20",children:[m.jsx("div",{className:"flex justify-between items-start mb-6",children:m.jsx("h1",{className:"text-2xl font-bold text-white",children:h.title})}),m.jsx("div",{className:"prose prose-invert max-w-none",children:m.jsx("div",{dangerouslySetInnerHTML:{__html:h.content}})}),(r.instructorName||r.instructorBio)&&m.jsxs("div",{className:"mt-12 border-t border-gray-800 pt-8",children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Meet Your Instructor"}),m.jsxs("div",{className:"flex items-start gap-6 bg-surface p-6 rounded-xl border border-gray-800",children:[r.instructorImage?m.jsx("img",{src:r.instructorImage,alt:r.instructorName,className:"w-20 h-20 rounded-full object-cover border-2 border-primary"}):m.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-700 flex items-center justify-center text-2xl font-bold text-gray-400",children:r.instructorName?r.instructorName.charAt(0):"I"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-lg font-bold text-white",children:r.instructorName}),m.jsx("p",{className:"text-gray-400 text-sm whitespace-pre-wrap mt-2",children:r.instructorBio})]})]})]})]})]}):m.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:m.jsx("p",{children:"Select a lesson from the list to start learning."})})]})]}):null},hV=({onPostCreated:n})=>{const[e,t]=M.useState(""),[r,a]=M.useState("public"),[l,c]=M.useState(null),[h,f]=M.useState(!1),p=_=>new Promise((T,S)=>{const O=new FileReader;O.readAsDataURL(_),O.onload=R=>{const U=new Image;U.src=R.target.result,U.onload=()=>{const z=document.createElement("canvas"),Y=800,Q=800;let ie=U.width,ve=U.height;ie>ve?ie>Y&&(ve*=Y/ie,ie=Y):ve>Q&&(ie*=Q/ve,ve=Q),z.width=ie,z.height=ve,z.getContext("2d").drawImage(U,0,0,ie,ve);const k=z.toDataURL("image/jpeg",.7);T(k)},U.onerror=z=>S(z)},O.onerror=R=>S(R)}),v=async _=>{const T=_.target.files[0];if(T)try{const S=await p(T);c(S)}catch(S){console.error("Compression error:",S),alert("Failed to process image.")}},b=async _=>{if(_.preventDefault(),!(!e.trim()&&!l)){f(!0);try{const T={uid:Le.currentUser.uid,content:e.trim(),image:l,privacy:r,likes:[],commentsCount:0,shares:0,createdAt:gl()};await Tl(ut(Ee,"posts"),T),t(""),c(null),n&&n()}catch(T){console.error("Error creating post:",T),alert("Failed to post. Please try again.")}finally{f(!1)}}};return m.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 p-4 mb-6 animate-fade-in",children:m.jsxs("div",{className:"flex gap-4",children:[m.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 flex-shrink-0 overflow-hidden",children:Le.currentUser?.photoURL?m.jsx("img",{src:Le.currentUser.photoURL,alt:"User",className:"h-full w-full object-cover"}):m.jsx("div",{className:"h-full w-full flex items-center justify-center text-xs text-gray-400",children:"You"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("textarea",{value:e,onChange:_=>t(_.target.value),placeholder:"What's on your mind, trader?",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg p-3 text-white focus:outline-none focus:border-primary min-h-[100px] resize-none"}),l&&m.jsxs("div",{className:"mt-2 relative inline-block",children:[m.jsx("img",{src:l,alt:"Preview",className:"h-32 rounded-lg border border-gray-700"}),m.jsx("button",{onClick:()=>c(null),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsxs("div",{className:"flex justify-between items-center mt-3",children:[m.jsxs("div",{className:"flex gap-2 text-primary",children:[m.jsxs("label",{className:"cursor-pointer hover:bg-gray-800 p-2 rounded-full transition-colors flex items-center gap-2",children:[m.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:v}),m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),m.jsx("span",{className:"text-sm",children:"Photo"})]}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsxs("select",{value:r,onChange:_=>a(_.target.value),className:"bg-gray-800 text-gray-300 text-sm border border-gray-700 rounded-md py-1 px-2 focus:outline-none",children:[m.jsx("option",{value:"public",children:"Public"}),m.jsx("option",{value:"friends",children:"Friends Only"}),m.jsx("option",{value:"private",children:"Private"})]})})]}),m.jsx(yt,{onClick:b,disabled:h||!e.trim()&&!l,children:h?"Posting...":"Post"})]})]})]})})},dV=({post:n})=>{const[e,t]=M.useState(null),[r,a]=M.useState(n.likes?.includes(Le.currentUser?.uid)),[l,c]=M.useState(n.likes?.length||0),[h,f]=M.useState(!1),[p,v]=M.useState([]),[b,_]=M.useState(""),[T,S]=M.useState(!1);M.useEffect(()=>{(async()=>{if(n.uid){const ie=await mr($e(Ee,"users",n.uid));ie.exists()&&t(ie.data())}})()},[n.uid]),M.useEffect(()=>{if(h){const Q=Wn(ut(Ee,"posts",n.id,"comments"),us("createdAt","asc")),ie=sm(Q,ve=>{v(ve.docs.map(L=>({id:L.id,...L.data()})))});return()=>ie()}},[h,n.id]);const O=async()=>{if(!Le.currentUser)return;const Q=r;a(!Q),c(ve=>Q?ve-1:ve+1);const ie=$e(Ee,"posts",n.id);Q?await dr(ie,{likes:ll(Le.currentUser.uid)}):await dr(ie,{likes:yh(Le.currentUser.uid)})},R=async Q=>{if(Q.preventDefault(),!!b.trim()){S(!0);try{await Tl(ut(Ee,"posts",n.id,"comments"),{uid:Le.currentUser.uid,username:Le.currentUser.displayName||"User",content:b.trim(),createdAt:new Date}),await dr($e(Ee,"posts",n.id),{commentsCount:(n.commentsCount||0)+1}),_("")}catch(ie){console.error("Error commenting:",ie)}finally{S(!1)}}},U=Q=>{if(!Q)return"Just now";const ie=Q.toDate?Q.toDate():new Date(Q),ve=Math.floor((new Date-ie)/1e3);let L=ve/31536e3;return L>1?Math.floor(L)+"y":(L=ve/2592e3,L>1?Math.floor(L)+"mo":(L=ve/86400,L>1?Math.floor(L)+"d":(L=ve/3600,L>1?Math.floor(L)+"h":(L=ve/60,L>1?Math.floor(L)+"m":Math.floor(ve)+"s"))))},z=e?.username||"Unknown User",Y=e?.avatar_url||`https://ui-avatars.com/api/?name=${z}`;return m.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 mb-6 overflow-hidden animate-fade-in",children:[m.jsxs("div",{className:"p-4 flex items-center gap-3",children:[m.jsx(ze,{to:`/profile/${z}`,className:"block h-10 w-10 rounded-full overflow-hidden bg-gray-700",children:m.jsx("img",{src:Y,alt:z,className:"h-full w-full object-cover"})}),m.jsxs("div",{children:[m.jsx(ze,{to:`/profile/${z}`,className:"text-white font-bold hover:underline text-sm block",children:z}),m.jsxs("span",{className:"text-xs text-gray-500",children:[U(n.createdAt),"  ",n.privacy==="public"?"Public":n.privacy==="friends"?"Friends":"Private"]})]})]}),m.jsx("div",{className:"px-4 pb-2",children:m.jsx("p",{className:"text-gray-200 whitespace-pre-wrap",children:n.content})}),n.image&&m.jsx("div",{className:"w-full h-auto mt-2",children:m.jsx("img",{src:n.image,alt:"Post content",className:"w-full h-auto max-h-[500px] object-cover"})}),m.jsx("div",{className:"px-4 py-3 border-t border-gray-800 flex justify-between items-center mt-2",children:m.jsxs("div",{className:"flex gap-6",children:[m.jsxs("button",{onClick:O,className:`flex items-center gap-2 text-sm transition-colors ${r?"text-red-500":"text-gray-400 hover:text-red-500"}`,children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${r?"fill-current":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),l>0&&m.jsx("span",{children:l})]}),m.jsxs("button",{onClick:()=>f(!h),className:"flex items-center gap-2 text-sm text-gray-400 hover:text-primary transition-colors",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),m.jsx("span",{children:p.length||n.commentsCount||0})]}),m.jsx("button",{className:"flex items-center gap-2 text-sm text-gray-400 hover:text-green-500 transition-colors",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})}),h&&m.jsxs("div",{className:"bg-gray-900/30 p-4 border-t border-gray-800",children:[m.jsx("div",{className:"space-y-3 mb-4 max-h-60 overflow-y-auto",children:p.map(Q=>m.jsxs("div",{className:"flex gap-2 items-start",children:[m.jsx("div",{className:"h-6 w-6 rounded-full bg-gray-700 flex-shrink-0"}),m.jsxs("div",{className:"bg-gray-800 rounded-lg p-2 text-sm flex-1",children:[m.jsx("span",{className:"font-bold text-white mr-2",children:"Unknown"})," ",m.jsx("span",{className:"text-gray-300",children:Q.content})]})]},Q.id))}),m.jsxs("form",{onSubmit:R,className:"flex gap-2",children:[m.jsx("input",{type:"text",value:b,onChange:Q=>_(Q.target.value),placeholder:"Write a comment...",className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-primary"}),m.jsx("button",{type:"submit",disabled:T||!b.trim(),className:"text-primary font-medium text-sm disabled:opacity-50",children:"Post"})]})]})]})},fV=()=>{const[n,e]=M.useState("feed"),[t,r]=M.useState([]),[a,l]=M.useState(!0),[c,h]=M.useState([]),[f,p]=M.useState({sent:[],received:[]}),[v,b]=M.useState([]);M.useEffect(()=>{if(!Le.currentUser)return;const S=sm($e(Ee,"users",Le.currentUser.uid),O=>{if(O.exists()){const R=O.data();h(R.friends||[]),p(R.friendRequests||{sent:[],received:[]})}});return()=>S()},[]),M.useEffect(()=>{c&&(async()=>{if(Le.currentUser)try{const O=Wn(ut(Ee,"users"),Lf(20)),U=(await en(O)).docs.map(z=>({id:z.id,...z.data()})).filter(z=>z.id!==Le.currentUser.uid&&!c.includes(z.id)&&!f.sent?.includes(z.id)&&!f.received?.includes(z.id)).slice(0,5);b(U)}catch(O){console.error("Error fetching suggestions:",O)}})()},[c,f]),M.useEffect(()=>{const S=Wn(ut(Ee,"posts"),us("createdAt","desc")),O=sm(S,R=>{const z=R.docs.map(Y=>({id:Y.id,...Y.data()})).filter(Y=>Y.uid===Le.currentUser?.uid||Y.privacy==="public"?!0:Y.privacy==="friends"?c.includes(Y.uid):!1);r(z),l(!1)});return()=>O()},[c]);const _=async S=>{try{const O=$e(Ee,"users",Le.currentUser.uid),R=$e(Ee,"users",S);await dr(O,{friends:yh(S),"friendRequests.received":ll(S)}),await dr(R,{friends:yh(Le.currentUser.uid),"friendRequests.sent":ll(Le.currentUser.uid)}),alert("Friend request accepted!")}catch(O){console.error("Error accepting friend:",O)}},T=async S=>{try{const O=$e(Ee,"users",Le.currentUser.uid),R=$e(Ee,"users",S);await dr(O,{"friendRequests.received":ll(S)}),await dr(R,{"friendRequests.sent":ll(Le.currentUser.uid)})}catch(O){console.error("Error rejecting friend:",O)}};return m.jsx("div",{className:"min-h-screen bg-background pt-20 pb-10",children:m.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-white",children:"Traders Community"}),m.jsxs("div",{className:"flex space-x-1 bg-surface p-1 rounded-lg border border-gray-800",children:[m.jsx("button",{onClick:()=>e("feed"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="feed"?"bg-primary text-white":"text-gray-400 hover:text-white"}`,children:"Feed"}),m.jsxs("button",{onClick:()=>e("friends"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="friends"?"bg-primary text-white":"text-gray-400 hover:text-white"}`,children:["Friends ",m.jsx("span",{className:"ml-1 bg-gray-800 text-xs px-2 py-0.5 rounded-full",children:c.length})]}),m.jsxs("button",{onClick:()=>e("requests"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="requests"?"bg-primary text-white":"text-gray-400 hover:text-white"}`,children:["Requests ",m.jsx("span",{className:"ml-1 bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:f.received?.length||0})]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[m.jsx("div",{className:"hidden lg:block col-span-1",children:m.jsx("div",{className:"bg-surface rounded-xl border border-gray-800 p-6 sticky top-24",children:m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx(ze,{to:`/profile/${Le.currentUser?.displayName}`,className:"h-20 w-20 rounded-full bg-gray-700 overflow-hidden mb-4",children:m.jsx("img",{src:Le.currentUser?.photoURL||"https://ui-avatars.com/api/?name=User",alt:"Me",className:"w-full h-full object-cover"})}),m.jsx("h3",{className:"text-lg font-bold text-white",children:Le.currentUser?.displayName||"Trader"}),m.jsx("div",{className:"w-full border-t border-gray-800 my-4"}),m.jsxs("div",{className:"w-full flex justify-between text-sm mb-2",children:[m.jsx("span",{className:"text-gray-400",children:"Posts"}),m.jsx("span",{className:"text-white font-bold",children:t.filter(S=>S.uid===Le.currentUser?.uid).length})]}),m.jsxs("div",{className:"w-full flex justify-between text-sm",children:[m.jsx("span",{className:"text-gray-400",children:"Friends"}),m.jsx("span",{className:"text-white font-bold",children:c.length})]})]})})}),m.jsxs("div",{className:"col-span-1 lg:col-span-2",children:[n==="feed"&&m.jsxs(m.Fragment,{children:[m.jsx(hV,{}),a?m.jsx("div",{className:"text-center py-10 text-gray-400",children:"Loading community feed..."}):t.length>0?t.map(S=>m.jsx(dV,{post:S},S.id)):m.jsx("div",{className:"text-center py-10 bg-surface rounded-xl border border-gray-800",children:m.jsx("p",{className:"text-gray-400",children:"No posts yet. Be the first to share something!"})})]}),n==="friends"&&m.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Your Friends"}),c.length>0?m.jsx("div",{className:"grid grid-cols-1 gap-4",children:c.map(S=>m.jsx(mV,{userId:S},S))}):m.jsx("p",{className:"text-gray-400",children:"No friends yet. Add people from the suggestions!"})]}),n==="requests"&&m.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6",children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Friend Requests"}),f.received?.length>0?m.jsx("div",{className:"space-y-4",children:f.received.map(S=>m.jsx(pV,{userId:S,onAccept:()=>_(S),onReject:()=>T(S)},S))}):m.jsx("p",{className:"text-gray-400",children:"No pending requests."})]})]}),m.jsx("div",{className:"hidden lg:block col-span-1",children:m.jsxs("div",{className:"bg-surface rounded-xl border border-gray-800 p-6 sticky top-24",children:[m.jsx("h3",{className:"text-white font-bold mb-4",children:"Suggested People"}),m.jsx("div",{className:"space-y-4",children:v.length>0?v.map(S=>m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs(ze,{to:`/profile/${S.username}`,className:"flex items-center gap-3 group",children:[m.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden",children:m.jsx("img",{src:S.avatar_url||`https://ui-avatars.com/api/?name=${S.username}`,alt:S.username,className:"w-full h-full object-cover"})}),m.jsx("div",{className:"max-w-[100px]",children:m.jsx("p",{className:"text-sm font-bold text-white truncate group-hover:underline",children:S.username})})]}),m.jsx(ze,{to:`/profile/${S.username}`,className:"text-primary text-xs hover:underline",children:"View"})]},S.id)):m.jsx("p",{className:"text-xs text-gray-500",children:"No suggestions available right now."})})]})})]})]})})},mV=({userId:n})=>{const[e,t]=M.useState(null);return M.useEffect(()=>{mr($e(Ee,"users",n)).then(r=>{r.exists()&&t(r.data())})},[n]),e?m.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(ze,{to:`/profile/${e.username}`,className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden",children:m.jsx("img",{src:e.avatar_url||`https://ui-avatars.com/api/?name=${e.username}`,alt:e.username,className:"w-full h-full object-cover"})}),m.jsxs("div",{children:[m.jsx(ze,{to:`/profile/${e.username}`,className:"font-bold text-white hover:underline",children:e.username}),m.jsx("p",{className:"text-xs text-gray-500",children:"Trader"})]})]}),m.jsx(ze,{to:`/profile/${e.username}`,className:"text-xs text-primary border border-primary px-3 py-1 rounded-full hover:bg-primary hover:text-white transition-colors",children:"View Profile"})]}):m.jsx("div",{className:"h-16 bg-gray-800 rounded-lg animate-pulse"})},pV=({userId:n,onAccept:e,onReject:t})=>{const[r,a]=M.useState(null);return M.useEffect(()=>{mr($e(Ee,"users",n)).then(l=>{l.exists()&&a(l.data())})},[n]),r?m.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden",children:m.jsx("img",{src:r.avatar_url||`https://ui-avatars.com/api/?name=${r.username}`,alt:r.username,className:"w-full h-full object-cover"})}),m.jsxs("div",{children:[m.jsx("span",{className:"font-bold text-white",children:r.username}),m.jsx("p",{className:"text-xs text-gray-500",children:"Wants to be your friend"})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:e,className:"bg-primary hover:bg-green-600 text-white px-3 py-1 rounded-md text-xs font-bold",children:"Accept"}),m.jsx("button",{onClick:t,className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md text-xs font-bold",children:"Reject"})]})]}):m.jsx("div",{className:"h-16 bg-gray-800 rounded-lg animate-pulse"})},gV=()=>{const{username:n}=Hc(),[e,t]=M.useState(null),[r,a]=M.useState(!0),[l,c]=M.useState(null);M.useEffect(()=>{(async()=>{try{const S=Wn(ut(Ee,"users"),yN("username","==",n)),O=await en(S);O.empty?t(null):t({id:O.docs[0].id,...O.docs[0].data()})}catch(S){console.error("Error fetching profile:",S)}finally{a(!1)}})()},[n]),M.useEffect(()=>{if(!Le.currentUser)return;const T=sm($e(Ee,"users",Le.currentUser.uid),S=>{S.exists()&&c(S.data())});return()=>T()},[]);const h=Le.currentUser?.uid===e?.id,f=l?.friends?.includes(e?.id),p=l?.friendRequests?.sent?.includes(e?.id),v=l?.friendRequests?.received?.includes(e?.id),b=async()=>{if(!(!Le.currentUser||!e))try{await dr($e(Ee,"users",Le.currentUser.uid),{"friendRequests.sent":yh(e.id)}),await dr($e(Ee,"users",e.id),{"friendRequests.received":yh(Le.currentUser.uid)}),alert("Friend request sent!")}catch(T){console.error(T)}},_=async()=>{if(confirm("Are you sure you want to remove this friend?"))try{await dr($e(Ee,"users",Le.currentUser.uid),{friends:ll(e.id)}),await dr($e(Ee,"users",e.id),{friends:ll(Le.currentUser.uid)})}catch(T){console.error(T)}};return r?m.jsx("div",{className:"text-center p-20 text-white",children:"Loading Profile..."}):e?m.jsx("div",{className:"min-h-screen bg-background pt-20 px-4 animate-fade-in",children:m.jsxs("div",{className:"max-w-3xl mx-auto bg-surface rounded-xl border border-gray-800 overflow-hidden shadow-2xl",children:[m.jsx("div",{className:"h-32 bg-gradient-to-r from-primary/20 to-secondary/20 relative"}),m.jsxs("div",{className:"px-8 pb-8",children:[m.jsxs("div",{className:"relative -mt-16 mb-6 flex flex-col md:flex-row items-end md:items-end gap-6",children:[m.jsx("div",{className:"h-32 w-32 rounded-full border-4 border-surface bg-gray-800 overflow-hidden",children:m.jsx("img",{src:e.avatar_url||`https://ui-avatars.com/api/?name=${e.username}`,alt:e.username,className:"w-full h-full object-cover"})}),m.jsxs("div",{className:"flex-1 mb-2 text-center md:text-left",children:[m.jsx("h1",{className:"text-3xl font-bold text-white",children:e.username}),m.jsxs("p",{className:"text-gray-400 text-sm",children:["Member since ",e.createdAt?new Date(e.createdAt.seconds*1e3).getFullYear():"2024"]})]}),m.jsx("div",{className:"mb-4",children:h?m.jsx("span",{className:"px-4 py-2 bg-gray-700 text-white rounded-lg text-sm",children:"It's You"}):f?m.jsxs("div",{className:"flex gap-2",children:[m.jsx("span",{className:"px-4 py-2 bg-green-500/20 text-green-400 border border-green-500/50 rounded-lg text-sm font-bold",children:"Friends"}),m.jsx("button",{onClick:_,className:"text-red-400 hover:text-red-300 text-xs underline",children:"Unfriend"})]}):p?m.jsx(yt,{disabled:!0,className:"opacity-70",children:"Request Sent"}):v?m.jsx("span",{className:"text-yellow-400 text-sm",children:"Check your requests!"}):m.jsx(yt,{onClick:b,children:"Add Friend"})})]}),m.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[m.jsx("h2",{className:"text-lg font-bold text-white mb-3",children:"About"}),m.jsx("p",{className:"text-gray-300 leading-relaxed whitespace-pre-wrap",children:e.bio||"No bio yet."})]}),m.jsx("div",{className:"mt-8 grid grid-cols-2 gap-4",children:m.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg border border-gray-800 text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-primary",children:e.friends?.length||0}),m.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-widest",children:"Friends"})]})})]})]})}):m.jsx("div",{className:"text-center p-20 text-white",children:"User not found"})},Cy=({children:n,adminOnly:e=!1})=>{const[t,r]=M.useState(null),[a,l]=M.useState(!0);return M.useEffect(()=>{const c=jh(Le,h=>{r(h),l(!1)});return()=>c()},[]),a?m.jsx("div",{className:"text-center p-10 pt-32 text-white",children:"Loading..."}):t?n:m.jsx(D4,{to:"/login",replace:!0})};function yV(){return m.jsx(iI,{children:m.jsxs("div",{className:"min-h-screen bg-background text-text font-sans flex flex-col",children:[m.jsx(DL,{}),m.jsx("main",{className:"flex-grow",children:m.jsxs(M4,{children:[m.jsx(pn,{path:"/",element:m.jsx(ML,{})}),m.jsx(pn,{path:"/analysis",element:m.jsx(PL,{})}),m.jsx(pn,{path:"/analysis/:id",element:m.jsx(UL,{})}),m.jsx(pn,{path:"/news",element:m.jsx(qL,{})}),m.jsx(pn,{path:"/news/:id",element:m.jsx(BL,{})}),m.jsx(pn,{path:"/login",element:m.jsx(zL,{})}),m.jsx(pn,{path:"/register",element:m.jsx(HL,{})}),m.jsx(pn,{path:"/community",element:m.jsx(Cy,{children:m.jsx(fV,{})})}),m.jsx(pn,{path:"/academy",element:m.jsx(lV,{})}),m.jsx(pn,{path:"/academy/:path",element:m.jsx(cV,{})}),m.jsx(pn,{path:"/academy/:path/:courseId",element:m.jsx(uV,{})}),m.jsx(pn,{path:"/profile/:username",element:m.jsx(gV,{})}),m.jsx(pn,{path:"/dashboard",element:m.jsx(Cy,{children:m.jsx(GL,{})})}),m.jsx(pn,{path:"/dashboard/course/:courseId",element:m.jsx(Cy,{children:m.jsx(oV,{})})}),m.jsxs(pn,{path:"/admin",element:m.jsx(KL,{}),children:[m.jsx(pn,{index:!0,element:m.jsx(YL,{})}),m.jsx(pn,{path:"news",element:m.jsx(JU,{})}),m.jsx(pn,{path:"analysis",element:m.jsx(nV,{})}),m.jsx(pn,{path:"courses",element:m.jsx(sV,{})}),m.jsx(pn,{path:"profile",element:m.jsx(aV,{})})]})]})}),m.jsx(LL,{})]})})}fR.createRoot(document.getElementById("root")).render(m.jsx(M.StrictMode,{children:m.jsx(OT,{children:m.jsx(yV,{})})}))});export default vV();
